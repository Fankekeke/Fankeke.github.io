<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="原生JS实现最简单的图片懒加载"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>原生JS实现最简单的图片懒加载 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/14apsvmfwir/",
				"appid": "1613049289050283", 
				"title": "原生JS实现最简单的图片懒加载 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-04T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4mq83oos5hp/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/412cne46v65/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&text=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&text=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&title=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&is_video=false&description=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&title=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&title=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&title=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f14apsvmfwir%2f&title=%e5%8e%9f%e7%94%9fJS%e5%ae%9e%e7%8e%b0%e6%9c%80%e7%ae%80%e5%8d%95%e7%9a%84%e5%9b%be%e7%89%87%e6%87%92%e5%8a%a0%e8%bd%bd"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">原生JS实现最简单的图片懒加载</h1><div class="meta"><div class="postdate"><time datetime="2019-01-04" itemprop="datePublished">2019-01-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e原文地址：\x3ca href=\x22https:\/\/github.com\/axuebin\/articles\/issues\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e原生JS实现最简单的图片懒加载\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e欢迎star。\x3c\/p\x3e\n\x3cp\x3e如果有错误的地方欢迎指正。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3eDemo地址：\x3ca href=\x22http:\/\/axuebin.com\/lazyload\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/axuebin.com\/lazyload\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e照片都是自己拍的哦~\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e懒加载\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e什么是懒加载\x3c\/h3\x3e\n\x3cp\x3e懒加载其实就是延迟加载，是一种对网页性能优化的方式，比如当访问一个页面的时候，优先显示可视区域的图片而不一次性加载所有图片，当需要显示的时候再发送图片请求，避免打开网页时加载过多资源。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e什么时候用懒加载\x3c\/h3\x3e\n\x3cp\x3e当页面中需要一次性载入很多图片的时候，往往都是需要用懒加载的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e懒加载原理\x3c\/h3\x3e\n\x3cp\x3e我们都知道HTML中的\x3ccode\x3e\x26lt;img\x26gt;\x3c\/code\x3e标签是代表文档中的一个图像。。说了个废话。。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e\x26lt;img\x26gt;\x3c\/code\x3e标签有一个属性是\x3ccode\x3esrc\x3c\/code\x3e，用来表示图像的URL，当这个属性的值不为空时，浏览器就会根据这个值发送请求。如果没有\x3ccode\x3esrc\x3c\/code\x3e属性，就不会发送请求。\x3c\/p\x3e\n\x3cp\x3e嗯？貌似这点可以利用一下？\x3c\/p\x3e\n\x3cp\x3e我先不设置\x3ccode\x3esrc\x3c\/code\x3e，需要的时候再设置？\x3c\/p\x3e\n\x3cp\x3enice，就是这样。\x3c\/p\x3e\n\x3cp\x3e我们先不给\x3ccode\x3e\x26lt;img\x26gt;\x3c\/code\x3e设置\x3ccode\x3esrc\x3c\/code\x3e，把图片真正的URL放在另一个属性\x3ccode\x3edata-src\x3c\/code\x3e中，在需要的时候也就是图片进入可视区域的之前，将URL取出放到\x3ccode\x3esrc\x3c\/code\x3e中。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e实现\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eHTML结构\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;container\x26quot;\x3e\n  \x3cdiv class=\x26quot;img-area\x26quot;\x3e\n    \x3cimg class=\x26quot;my-photo\x26quot; alt=\x26quot;loading\x26quot; data-src=\x26quot;.\/img\/img1.png\x26quot;\x3e\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;img-area\x26quot;\x3e\n    \x3cimg class=\x26quot;my-photo\x26quot; alt=\x26quot;loading\x26quot; data-src=\x26quot;.\/img\/img2.png\x26quot;\x3e\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;img-area\x26quot;\x3e\n    \x3cimg class=\x26quot;my-photo\x26quot; alt=\x26quot;loading\x26quot; data-src=\x26quot;.\/img\/img3.png\x26quot;\x3e\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;img-area\x26quot;\x3e\n    \x3cimg class=\x26quot;my-photo\x26quot; alt=\x26quot;loading\x26quot; data-src=\x26quot;.\/img\/img4.png\x26quot;\x3e\n  \x3c\/div\x3e\n  \x3cdiv class=\x26quot;img-area\x26quot;\x3e\n    \x3cimg class=\x26quot;my-photo\x26quot; alt=\x26quot;loading\x26quot; data-src=\x26quot;.\/img\/img5.png\x26quot;\x3e\n  \x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img-area\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22my-photo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loading\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-src\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/img\/img1.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img-area\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22my-photo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loading\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-src\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/img\/img2.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img-area\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22my-photo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loading\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-src\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/img\/img3.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img-area\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22my-photo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loading\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-src\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/img\/img4.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22img-area\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22my-photo\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ealt\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22loading\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-src\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/img\/img5.png\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e仔细观察一下，\x3ccode\x3e\x26lt;img\x26gt;\x3c\/code\x3e标签此时是没有\x3ccode\x3esrc\x3c\/code\x3e属性的，只有\x3ccode\x3ealt\x3c\/code\x3e和\x3ccode\x3edata-src\x3c\/code\x3e属性。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3ealt 属性是一个必需的属性，它规定在图像无法显示时的替代文本。\x3cbr\x3edata-* 全局属性：构成一类名称为自定义数据属性的属性，可以通过\x3ccode\x3eHTMLElement.dataset\x3c\/code\x3e来访问。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e如何判断元素是否在可视区域\x3c\/h3\x3e\n\x3ch4\x3e方法一\x3c\/h4\x3e\n\x3cp\x3e网上看到好多这种方法，稍微记录一下。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e通过\x3ccode\x3edocument.documentElement.clientHeight\x3c\/code\x3e获取屏幕可视窗口高度\x3c\/li\x3e\n\x3cli\x3e通过\x3ccode\x3eelement.offsetTop\x3c\/code\x3e获取元素相对于文档顶部的距离\x3c\/li\x3e\n\x3cli\x3e通过\x3ccode\x3edocument.documentElement.scrollTop\x3c\/code\x3e获取浏览器窗口顶部与文档顶部之间的距离，也就是滚动条滚动的距离\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e然后判断②-③\x26lt;①是否成立，如果成立，元素就在可视区域内。\x3c\/p\x3e\n\x3ch4\x3e方法二（推荐）\x3c\/h4\x3e\n\x3cp\x3e通过\x3ccode\x3egetBoundingClientRect()\x3c\/code\x3e方法来获取元素的大小以及位置，MDN上是这样描述的：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eThe Element.getBoundingClientRect() method returns the size of an element and its position relative to the viewport.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e这个方法返回一个名为\x3ccode\x3eClientRect\x3c\/code\x3e的\x3ccode\x3eDOMRect\x3c\/code\x3e对象，包含了\x3ccode\x3etop\x3c\/code\x3e、\x3ccode\x3eright\x3c\/code\x3e、\x3ccode\x3ebotton\x3c\/code\x3e、\x3ccode\x3eleft\x3c\/code\x3e、\x3ccode\x3ewidth\x3c\/code\x3e、\x3ccode\x3eheight\x3c\/code\x3e这些值。\x3c\/p\x3e\n\x3cp\x3eMDN上有这样一张图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010540151\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010540151\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看出返回的元素位置是相对于左上角而言的，而不是边距。\x3c\/p\x3e\n\x3cp\x3e我们思考一下，什么情况下图片进入可视区域。\x3c\/p\x3e\n\x3cp\x3e假设\x3ccode\x3econst bound = el.getBoundingClientRect();\x3c\/code\x3e来表示图片到可视区域顶部距离；\x3cbr\x3e并设 \x3ccode\x3econst clientHeight = window.innerHeight;\x3c\/code\x3e来表示可视区域的高度。\x3c\/p\x3e\n\x3cp\x3e随着滚动条的向下滚动，\x3ccode\x3ebound.top\x3c\/code\x3e会越来越小，也就是图片到可视区域顶部的距离越来越小，当\x3ccode\x3ebound.top===clientHeight\x3c\/code\x3e时，图片的上沿应该是位于可视区域下沿的位置的临界点，再滚动一点点，图片就会进入可视区域。\x3c\/p\x3e\n\x3cp\x3e也就是说，在\x3ccode\x3ebound.top\x26lt;=clientHeight\x3c\/code\x3e时，图片是在可视区域内的。\x3c\/p\x3e\n\x3cp\x3e我们这样判断：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function isInSight(el) {\n  const bound = el.getBoundingClientRect();\n  const clientHeight = window.innerHeight;\n  \/\/如果只考虑向下滚动加载\n  \/\/const clientWidth = window.innerWeight;\n  return bound.top \x3c= clientHeight \x2b 100;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eisInSight\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eel\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bound = el.getBoundingClientRect();\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e clientHeight = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.innerHeight;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果只考虑向下滚动加载\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/const clientWidth = window.innerWeight;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e bound.top \x26lt;= clientHeight \x2b \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里有个\x2b100是为了提前加载。\x3c\/p\x3e\n\x3cp\x3e经提醒。。这个方法性能\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e加载图片\x3c\/h3\x3e\n\x3cp\x3e页面打开时需要对所有图片进行检查，是否在可视区域内，如果是就加载。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function checkImgs() {\n  const imgs = document.querySelectorAll(\x27.my-photo\x27);\n  Array.from(imgs).forEach(el =\x3e {\n    if (isInSight(el)) {\n      loadImg(el);\n    }\n  })\n}\n\nfunction loadImg(el) {\n  if (!el.src) {\n    const source = el.dataset.src;\n    el.src = source;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3echeckImgs\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e imgs = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelectorAll(\x3cspan class=\x22hljs-string\x22\x3e\x27.my-photo\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.from(imgs).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eel\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isInSight(el)) {\n      loadImg(el);\n    }\n  })\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eloadImg\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eel\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!el.src) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e source = el.dataset.src;\n    el.src = source;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里应该是有一个优化的地方，设一个标识符标识已经加载图片的index，当滚动条滚动时就不需要遍历所有的图片，只需要遍历未加载的图片即可。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e函数节流\x3c\/h3\x3e\n\x3cp\x3e在类似于滚动条滚动等频繁的DOM操作时，总会提到“函数节流、函数去抖”。\x3c\/p\x3e\n\x3cp\x3e所谓的函数节流，也就是让一个函数不要执行的太频繁，减少一些过快的调用来节流。\x3c\/p\x3e\n\x3cp\x3e基本步骤：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e获取第一次触发事件的时间戳\x3c\/li\x3e\n\x3cli\x3e获取第二次触发事件的时间戳\x3c\/li\x3e\n\x3cli\x3e时间差如果大于某个阈值就执行事件，然后重置第一个时间\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function throttle(fn, mustRun = 500) {\n  const timer = null;\n  let previous = null;\n  return function() {\n    const now = new Date();\n    const context = this;\n    const args = arguments;\n    if (!previous){\n      previous = now;\n    }\n    const remaining = now - previous;\n    if (mustRun \x26amp;\x26amp; remaining \x3e= mustRun) {\n      fn.apply(context, args);\n      previous = now;\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ethrottle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efn, mustRun = \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e previous = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e now = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e args = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!previous){\n      previous = now;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e remaining = now - previous;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mustRun \x26amp;\x26amp; remaining \x26gt;= mustRun) {\n      fn.apply(context, args);\n      previous = now;\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里的\x3ccode\x3emustRun\x3c\/code\x3e就是调用函数的时间间隔，无论多么频繁的调用\x3ccode\x3efn\x3c\/code\x3e，只有\x3ccode\x3eremaining\x26gt;=mustRun\x3c\/code\x3e时\x3ccode\x3efn\x3c\/code\x3e才能被执行。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e实验\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e页面打开时\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010744394\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010744394\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看出此时仅仅是加载了img1和img2，其它的img都没发送请求，看看此时的浏览器\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010744395\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010744395\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e第一张图片是完整的呈现了，第二张图片刚进入可视区域，后面的就看不到了~\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e页面滚动时\x3c\/h3\x3e\n\x3cp\x3e当我向下滚动，此时浏览器是这样\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010744396\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010744396\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e此时第二张图片完全显示了，而第三张图片显示了一点点，这时候我们看看请求情况\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010744397\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010744397\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eimg3的请求发出来，而后面的请求还是没发出~\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e全部载入时\x3c\/h3\x3e\n\x3cp\x3e当滚动条滚到最底下时，全部请求都应该是发出的，如图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010744398\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010744398\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e完整demo\x3c\/h3\x3e\n\x3cp\x3e在这哦：\x3ca href=\x22http:\/\/axuebin.com\/lazyload\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/axuebin.com\/lazyload\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e原文地址：\x3ca href=\x22http:\/\/axuebin.com\/blog\/2017\/08\/19\/javascript-lazyload\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22http:\/\/axuebin.com\/blog\/2017\/08\/19\/javascript-lazyload\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/axuebin.com\/blog\/2017\/...\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e更新\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e方法三 IntersectionObserver\x3c\/h3\x3e\n\x3cp\x3e经大佬提醒，发现了这个方法\x3c\/p\x3e\n\x3cp\x3e先附上链接：\x3c\/p\x3e\n\x3cp\x3ejjc大大：\x3ca href=\x22https:\/\/github.com\/justjavac\/the-front-end-knowledge-you-may-dont-know\/issues\/10\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/justjavac\/the-front-end-knowledge-you-may-dont-know\/issues\/10\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e阮一峰大大：\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2016\/11\/intersectionobserver_api.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ruanyifeng.com\/blog\/2016\/11\/intersectionobserver_api.html\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3eAPI Sketch for Intersection Observers：\x3ca href=\x22https:\/\/github.com\/WICG\/IntersectionObserver\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/WICG\/IntersectionObserver\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eIntersectionObserver\x3c\/code\x3e可以自动观察元素是否在视口内。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var io = new IntersectionObserver(callback, option);\n\/\/ 开始观察\nio.observe(document.getElementById(\x27example\x27));\n\/\/ 停止观察\nio.unobserve(element);\n\/\/ 关闭观察器\nio.disconnect();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e io = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e IntersectionObserver(callback, option);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开始观察\x3c\/span\x3e\nio.observe(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e));\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 停止观察\x3c\/span\x3e\nio.unobserve(element);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关闭观察器\x3c\/span\x3e\nio.disconnect();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ecallback的参数是一个数组，每个数组都是一个\x3ccode\x3eIntersectionObserverEntry\x3c\/code\x3e对象，包括以下属性：\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e属性\x3c\/th\x3e\n\x3cth\x3e描述\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3etime\x3c\/td\x3e\n\x3ctd\x3e可见性发生变化的时间，单位为毫秒\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3erootBounds\x3c\/td\x3e\n\x3ctd\x3e与getBoundingClientRect()方法的返回值一样\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eboundingClientRect\x3c\/td\x3e\n\x3ctd\x3e目标元素的矩形区域的信息\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eintersectionRect\x3c\/td\x3e\n\x3ctd\x3e目标元素与视口（或根元素）的交叉区域的信息\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eintersectionRatio\x3c\/td\x3e\n\x3ctd\x3e目标元素的可见比例，即intersectionRect占boundingClientRect的比例，完全可见时为1，完全不可见时小于等于0\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3etarget\x3c\/td\x3e\n\x3ctd\x3e被观察的目标元素，是一个 DOM 节点对象\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e我们需要用到\x3ccode\x3eintersectionRatio\x3c\/code\x3e来判断是否在可视区域内，当\x3ccode\x3eintersectionRatio \x26gt; 0 \x26amp;\x26amp; intersectionRatio \x26lt;= 1\x3c\/code\x3e即在可视区域内。\x3c\/p\x3e\n\x3ch4\x3e代码\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function checkImgs() {\n  const imgs = Array.from(document.querySelectorAll(\x26quot;.my-photo\x26quot;));\n  imgs.forEach(item =\x3e io.observe(item));\n}\n\nfunction loadImg(el) {\n  if (!el.src) {\n    const source = el.dataset.src;\n    el.src = source;\n  }\n}\n\nconst io = new IntersectionObserver(ioes =\x3e {\n  ioes.forEach(ioe =\x3e {\n    const el = ioe.target;\n    const intersectionRatio = ioe.intersectionRatio;\n    if (intersectionRatio \x3e 0 \x26amp;\x26amp; intersectionRatio \x3c= 1) {\n      loadImg(el);\n    }\n    el.onload = el.onerror = () =\x3e io.unobserve(el);\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3echeckImgs\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e imgs = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.from(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelectorAll(\x3cspan class=\x22hljs-string\x22\x3e\x22.my-photo\x22\x3c\/span\x3e));\n  imgs.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e io.observe(item));\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eloadImg\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eel\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!el.src) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e source = el.dataset.src;\n    el.src = source;\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e io = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e IntersectionObserver(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eioes\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  ioes.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eioe\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e el = ioe.target;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e intersectionRatio = ioe.intersectionRatio;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (intersectionRatio \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; intersectionRatio \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n      loadImg(el);\n    }\n    el.onload = el.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e io.unobserve(el);\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>原生JS实现最简单的图片懒加载</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010744417">https://segmentfault.com/a/1190000010744417</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/14apsvmfwir/" target="_blank">https://alili.tech/archive/14apsvmfwir/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>