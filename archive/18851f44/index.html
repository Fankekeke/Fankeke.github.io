<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="日常 Python 编程优雅之道"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>日常 Python 编程优雅之道 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/18851f44/",
				"appid": "1613049289050283", 
				"title": "日常 Python 编程优雅之道 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-19T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/c7e93bce/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/72830d37/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&text=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&text=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&title=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&is_video=false&description=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f18851f44%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&title=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&title=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&title=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f18851f44%2f&title=%e6%97%a5%e5%b8%b8%20Python%20%e7%bc%96%e7%a8%8b%e4%bc%98%e9%9b%85%e4%b9%8b%e9%81%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">日常 Python 编程优雅之道</h1><div class="meta"><div class="postdate"><time datetime="2018-10-19" itemprop="datePublished">2018-10-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#日常-python-编程优雅之道\x22\x3e\x3c\/a\x3e日常 Python 编程优雅之道\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3e3 个可以使你的 Python 代码更优雅、可读、直观和易于维护的工具。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/1bf02c6ae37d5830e4f879b09f1bde0aef1eef22\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f7374796c65732f696d6167652d66756c6c2d73697a652f7075626c69632f6c6561642d696d616765732f73657276696e672d626f776c2d666f726b732d64696e6e65722e706e673f69746f6b3d6133597150777235\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t0126e2480793c94104.png\x22 alt=\x22\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3ePython 提供了一组独特的工具和语言特性来使你的代码更加优雅、可读和直观。为正确的问题选择合适的工具，你的代码将更易于维护。在本文中，我们将研究其中的三个工具：魔术方法、迭代器和生成器，以及方法魔术。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#魔术方法\x22\x3e\x3c\/a\x3e魔术方法\x3c\/h3\x3e\n\x3cp\x3e魔术方法可以看作是 Python 的管道。它们被称为“底层”方法，用于某些内置的方法、符号和操作。你可能熟悉的常见魔术方法是 \x3ccode\x3e__init__()\x3c\/code\x3e，当我们想要初始化一个类的新实例时，它会被调用。\x3c\/p\x3e\n\x3cp\x3e你可能已经看过其他常见的魔术方法，如 \x3ccode\x3e__str__\x3c\/code\x3e 和 \x3ccode\x3e__repr__\x3c\/code\x3e。Python 中有一整套魔术方法，通过实现其中的一些方法，我们可以修改一个对象的行为，甚至使其行为类似于内置数据类型，例如数字、列表或字典。\x3c\/p\x3e\n\x3cp\x3e让我们创建一个 \x3ccode\x3eMoney\x3c\/code\x3e 类来示例：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMoney\x3c\/span\x3e:\x3c\/span\x3e\n\n    currency_rates = {\n        \x3cspan class=\x22hljs-string\x22\x3e\x27$\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x27€\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e,\n    }\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__init__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, symbol, amount)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.symbol = symbol\n        \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.amount = amount\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__repr__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27%s%.2f\x27\x3c\/span\x3e % (\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.symbol, \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.amount)\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3econvert\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, other)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22 Convert other amount to our currency \x22\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e\n        new_amount = (\n            other.amount \/ \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.currency_rates[other.symbol]\n            * \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.currency_rates[\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.symbol])\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Money(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.symbol, new_amount)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e该类定义为给定的货币符号和汇率定义了一个货币汇率，指定了一个初始化器（也称为构造函数），并实现 \x3ccode\x3e__repr__\x3c\/code\x3e，因此当我们打印这个类时，我们会看到一个友好的表示，例如 \x3ccode\x3e$2.00\x3c\/code\x3e ，这是一个带有货币符号和金额的 \x3ccode\x3eMoney(\x27$\x27, 2.00)\x3c\/code\x3e 实例。最重要的是，它定义了一种方法，允许你使用不同的汇率在不同的货币之间进行转换。\x3c\/p\x3e\n\x3cp\x3e打开 Python shell，假设我们已经定义了使用两种不同货币的食品的成本，如下所示：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; soda_cost = Money(\x3cspan class=\x22hljs-string\x22\x3e\x27$\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5.25\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; soda_cost\n    $5.\x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; pizza_cost = Money(\x3cspan class=\x22hljs-string\x22\x3e\x27€\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e7.99\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; pizza_cost\n    €\x3cspan class=\x22hljs-number\x22\x3e7.99\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们可以使用魔术方法使得这个类的实例之间可以相互交互。假设我们希望能够将这个类的两个实例一起加在一起，即使它们是不同的货币。为了实现这一点，我们可以在 \x3ccode\x3eMoney\x3c\/code\x3e 类上实现 \x3ccode\x3e__add__\x3c\/code\x3e 这个魔术方法：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs python\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMoney\x3c\/span\x3e:\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e# ... previously defined methods ...\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__add__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(self, other)\x3c\/span\x3e:\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x22 Add 2 Money instances using \x27\x2b\x27 \x22\x22\x22\x3c\/span\x3e\n        new_amount = self.amount \x2b self.convert(other).amount\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Money(self.symbol, new_amount)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e现在我们可以以非常直观的方式使用这个类：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; soda_cost = Money(\x3cspan class=\x22hljs-string\x22\x3e\x27$\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5.25\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; pizza_cost = Money(\x3cspan class=\x22hljs-string\x22\x3e\x27€\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e7.99\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; soda_cost \x2b pizza_cost\n    $14.\x3cspan class=\x22hljs-number\x22\x3e33\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; pizza_cost \x2b soda_cost\n    €\x3cspan class=\x22hljs-number\x22\x3e12.61\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e当我们将两个实例加在一起时，我们得到以第一个定义的货币符号所表示的结果。所有的转换都是在底层无缝完成的。如果我们想的话，我们也可以为减法实现 \x3ccode\x3e__sub__\x3c\/code\x3e，为乘法实现 \x3ccode\x3e__mul__\x3c\/code\x3e 等等。阅读\x3ca href=\x22https:\/\/docs.python.org\/3\/reference\/datamodel.html#emulating-numeric-types\x22\x3e模拟数字类型\x3c\/a\x3e或\x3ca href=\x22https:\/\/rszalski.github.io\/magicmethods\/\x22\x3e魔术方法指南\x3c\/a\x3e来获得更多信息。\x3c\/p\x3e\n\x3cp\x3e我们学习到 \x3ccode\x3e__add__\x3c\/code\x3e 映射到内置运算符 \x3ccode\x3e\x2b\x3c\/code\x3e。其他魔术方法可以映射到像 \x3ccode\x3e[]\x3c\/code\x3e 这样的符号。例如，在字典中通过索引或键来获得一项，其实是使用了 \x3ccode\x3e__getitem__\x3c\/code\x3e 方法：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; d = {\x3cspan class=\x22hljs-string\x22\x3e\x27one\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27two\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e}\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; d[\x3cspan class=\x22hljs-string\x22\x3e\x27two\x27\x3c\/span\x3e]\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; d.__getitem_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27two\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e一些魔术方法甚至映射到内置函数，例如 \x3ccode\x3e__len__()\x3c\/code\x3e 映射到 \x3ccode\x3elen()\x3c\/code\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAlphabet\x3c\/span\x3e:\x3c\/span\x3e\n    letters = \x3cspan class=\x22hljs-string\x22\x3e\x27ABCDEFGHIJKLMNOPQRSTUVWXYZ\x27\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__len__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e len(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.letters)\n\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; my_alphabet = Alphabet()\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; len(my_alphabet)\n    \x3cspan class=\x22hljs-number\x22\x3e26\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch3\x3e\x3ca href=\x22#自定义迭代器\x22\x3e\x3c\/a\x3e自定义迭代器\x3c\/h3\x3e\n\x3cp\x3e对于新的和经验丰富的 Python 开发者来说，自定义迭代器是一个非常强大的但令人迷惑的主题。\x3c\/p\x3e\n\x3cp\x3e许多内置类型，例如列表、集合和字典，已经实现了允许它们在底层迭代的协议。这使我们可以轻松地遍历它们。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs python\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x26gt; \x3c\/span\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e food \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27Pizza\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Fries\x27\x3c\/span\x3e]:\n\n         print(food \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27. Yum!\x27\x3c\/span\x3e)\n\nPizza. Yum!\nFries. Yum!\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们如何迭代我们自己的自定义类？首先，让我们来澄清一些术语。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e要成为一个可迭代对象，一个类需要实现 \x3ccode\x3e__iter__()\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e__iter__()\x3c\/code\x3e 方法需要返回一个迭代器\x3c\/li\x3e\n\x3cli\x3e要成为一个迭代器，一个类需要实现 \x3ccode\x3e__next__()\x3c\/code\x3e（或\x3ca href=\x22https:\/\/docs.python.org\/2\/library\/stdtypes.html#iterator.next\x22\x3e在 Python 2\x3c\/a\x3e中是 \x3ccode\x3enext()\x3c\/code\x3e），当没有更多的项要迭代时，必须抛出一个 \x3ccode\x3eStopIteration\x3c\/code\x3e 异常。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e呼！这听起来很复杂，但是一旦你记住了这些基本概念，你就可以在任何时候进行迭代。\x3c\/p\x3e\n\x3cp\x3e我们什么时候想使用自定义迭代器？让我们想象一个场景，我们有一个 \x3ccode\x3eServer\x3c\/code\x3e 实例在不同的端口上运行不同的服务，如 \x3ccode\x3ehttp\x3c\/code\x3e 和 \x3ccode\x3essh\x3c\/code\x3e。其中一些服务处于 \x3ccode\x3eactive\x3c\/code\x3e 状态，而其他服务则处于 \x3ccode\x3einactive\x3c\/code\x3e 状态。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs python\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eServer\x3c\/span\x3e:\x3c\/span\x3e\n\n    services = [\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eFalse\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ftp\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e},\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eTrue\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ssh\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e},\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eTrue\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e},\n    ]\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e当我们遍历 \x3ccode\x3eServer\x3c\/code\x3e 实例时，我们只想遍历那些处于 \x3ccode\x3eactive\x3c\/code\x3e 的服务。让我们创建一个 \x3ccode\x3eIterableServer\x3c\/code\x3e 类：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIterableServer\x3c\/span\x3e:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__init__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.current_pos = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__next__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n        pass  \x3cspan class=\x22hljs-comment\x22\x3e# \x3cspan class=\x22hljs-doctag\x22\x3eTODO:\x3c\/span\x3e 实现并记得抛出 StopIteration\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e首先，我们将当前位置初始化为 \x3ccode\x3e0\x3c\/code\x3e。然后，我们定义一个 \x3ccode\x3e__next__()\x3c\/code\x3e 方法来返回下一项。我们还将确保在没有更多项返回时抛出 \x3ccode\x3eStopIteration\x3c\/code\x3e。到目前为止都很好！现在，让我们实现这个 \x3ccode\x3e__next__()\x3c\/code\x3e 方法。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIterableServer\x3c\/span\x3e:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__init__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.current_pos = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e.  \x3cspan class=\x22hljs-comment\x22\x3e# 我们初始化当前位置为 0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__iter__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:  \x3cspan class=\x22hljs-comment\x22\x3e# 我们可以在这里返回 self，因为实现了 __next__\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__next__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.current_pos \x26lt; len(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.services):\n            service = \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.services[\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.current_pos]\n            \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.current_pos \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e service[\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e]:\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e service[\x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e], service[\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e]\n        raise StopIteration\n    \x3cspan class=\x22hljs-keyword\x22\x3enext\x3c\/span\x3e = __next_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e# 可选的 Python2 兼容性\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们对列表中的服务进行遍历，而当前的位置小于服务的个数，但只有在服务处于活动状态时才返回。一旦我们遍历完服务，就会抛出一个 \x3ccode\x3eStopIteration\x3c\/code\x3e 异常。\x3c\/p\x3e\n\x3cp\x3e因为我们实现了 \x3ccode\x3e__next__()\x3c\/code\x3e 方法，当它耗尽时，它会抛出 \x3ccode\x3eStopIteration\x3c\/code\x3e。我们可以从 \x3ccode\x3e__iter__()\x3c\/code\x3e 返回 \x3ccode\x3eself\x3c\/code\x3e，因为 \x3ccode\x3eIterableServer\x3c\/code\x3e 类遵循 \x3ccode\x3eiterable\x3c\/code\x3e 协议。\x3c\/p\x3e\n\x3cp\x3e现在我们可以遍历一个 \x3ccode\x3eIterableServer\x3c\/code\x3e 实例，这将允许我们查看每个处于活动的服务，如下所示：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs applescript\x22\x3e\x26gt;\x26gt;\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e protocol, port \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e IterableServer():\n\n        print(\x27service %s \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erunning\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e port %d\x27 % (protocol, port))\n\nservice ssh \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erunning\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e port \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e\n\nservice http \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erunning\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e port \x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e\n\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e太棒了，但我们可以做得更好！在这样类似的实例中，我们的迭代器不需要维护大量的状态，我们可以简化代码并使用 \x3ca href=\x22https:\/\/docs.python.org\/3\/library\/stdtypes.html#generator-types\x22\x3egenerator（生成器）\x3c\/a\x3e 来代替。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs python\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eServer\x3c\/span\x3e:\x3c\/span\x3e\n    services = [\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eFalse\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ftp\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e},\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eTrue\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ssh\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e},\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eTrue\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e},\n    ]\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__iter__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(self)\x3c\/span\x3e:\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e service \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e self.services:\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e service[\x3cspan class=\x22hljs-string\x22\x3e\x27active\x27\x3c\/span\x3e]:\n                \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e service[\x3cspan class=\x22hljs-string\x22\x3e\x27protocol\x27\x3c\/span\x3e], service[\x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e]\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3ccode\x3eyield\x3c\/code\x3e 关键字到底是什么？在定义生成器函数时使用 yield。这有点像 \x3ccode\x3ereturn\x3c\/code\x3e，虽然 \x3ccode\x3ereturn\x3c\/code\x3e 在返回值后退出函数，但 \x3ccode\x3eyield\x3c\/code\x3e 会暂停执行直到下次调用它。这允许你的生成器的功能在它恢复之前保持状态。查看 \x3ca href=\x22https:\/\/docs.python.org\/3\/reference\/expressions.html#yieldexpr\x22\x3eyield 的文档\x3c\/a\x3e以了解更多信息。使用生成器，我们不必通过记住我们的位置来手动维护状态。生成器只知道两件事：它现在需要做什么以及计算下一个项目需要做什么。一旦我们到达执行点，即 \x3ccode\x3eyield\x3c\/code\x3e 不再被调用，我们就知道停止迭代。\x3c\/p\x3e\n\x3cp\x3e这是因为一些内置的 Python 魔法。在 \x3ca href=\x22https:\/\/docs.python.org\/3\/reference\/datamodel.html#object.__iter__\x22\x3ePython 关于 \x3ccode\x3e__iter__()\x3c\/code\x3e 的文档\x3c\/a\x3e中我们可以看到，如果 \x3ccode\x3e__iter__()\x3c\/code\x3e 是作为一个生成器实现的，它将自动返回一个迭代器对象，该对象提供 \x3ccode\x3e__iter__()\x3c\/code\x3e 和 \x3ccode\x3e__next__()\x3c\/code\x3e 方法。阅读这篇很棒的文章，深入了解\x3ca href=\x22http:\/\/nvie.com\/posts\/iterators-vs-generators\/\x22\x3e迭代器，可迭代对象和生成器\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#方法魔法\x22\x3e\x3c\/a\x3e方法魔法\x3c\/h3\x3e\n\x3cp\x3e由于其独特的方面，Python 提供了一些有趣的方法魔法作为语言的一部分。\x3c\/p\x3e\n\x3cp\x3e其中一个例子是别名功能。因为函数只是对象，所以我们可以将它们赋值给多个变量。例如：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e:\n       return \x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; foo()\n\x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; bar = foo\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; bar()\n\x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们稍后会看到它的作用。\x3c\/p\x3e\n\x3cp\x3ePython 提供了一个方便的内置函数\x3ca href=\x22https:\/\/docs.python.org\/3\/library\/functions.html#getattr\x22\x3e称为 \x3ccode\x3egetattr()\x3c\/code\x3e\x3c\/a\x3e，它接受 \x3ccode\x3eobject, name, default\x3c\/code\x3e 参数并在 \x3ccode\x3eobject\x3c\/code\x3e 上返回属性 \x3ccode\x3ename\x3c\/code\x3e。这种编程方式允许我们访问实例变量和方法。例如：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eDog\x3c\/span\x3e:\x3c\/span\x3e\n        sound = \x3cspan class=\x22hljs-string\x22\x3e\x27Bark\x27\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3espeak\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e)\x3c\/span\x3e\x3c\/span\x3e:\n            print(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.sound \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27!\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.sound \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27!\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; fido = Dog()\n\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; fido.sound\n\x3cspan class=\x22hljs-string\x22\x3e\x27Bark\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; getattr(fido, \x3cspan class=\x22hljs-string\x22\x3e\x27sound\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-string\x22\x3e\x27Bark\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; fido.speak\n\x26lt;bound method Dog.speak of \x26lt;__main_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e.Dog object at \x3cspan class=\x22hljs-number\x22\x3e0x102db8828\x3c\/span\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\n\x3c\/span\x3e\x26gt;\x26gt;\x26gt; getattr(fido, \x3cspan class=\x22hljs-string\x22\x3e\x27speak\x27\x3c\/span\x3e)\n\x26lt;bound method Dog.speak of \x26lt;__main_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e.Dog object at \x3cspan class=\x22hljs-number\x22\x3e0x102db8828\x3c\/span\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\n\n\n\x3c\/span\x3e\x26gt;\x26gt;\x26gt; fido.speak()\nBark! Bark!\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; speak_method = getattr(fido, \x3cspan class=\x22hljs-string\x22\x3e\x27speak\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; speak_method()\nBark! Bark!\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这是一个很酷的技巧，但是我们如何在实际中使用 \x3ccode\x3egetattr\x3c\/code\x3e 呢？让我们看一个例子，我们编写一个小型命令行工具来动态处理命令。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eOperations\x3c\/span\x3e:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esay_hi\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, name)\x3c\/span\x3e\x3c\/span\x3e:\n        print(\x3cspan class=\x22hljs-string\x22\x3e\x27Hello,\x27\x3c\/span\x3e, name)\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esay_bye\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, name)\x3c\/span\x3e\x3c\/span\x3e:\n        print (\x3cspan class=\x22hljs-string\x22\x3e\x27Goodbye,\x27\x3c\/span\x3e, name)\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edefault\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, arg)\x3c\/span\x3e\x3c\/span\x3e:\n        print (\x3cspan class=\x22hljs-string\x22\x3e\x27This operation is not supported.\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e __name_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e == \x3cspan class=\x22hljs-string\x22\x3e\x27__main__\x27\x3c\/span\x3e:\n    operations = Operations()\n    \x3cspan class=\x22hljs-comment\x22\x3e# 假设我们做了错误处理\x3c\/span\x3e\n    command, argument = input(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26gt; \x27\x3c\/span\x3e).split()\n    func_to_call = getattr(operations, command, operations.default)\n    func_to_call(argument)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e脚本的输出是：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e python getattr.py\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e say_hi Nina\x3c\/span\x3e\nHello, Nina\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e blah blah\x3c\/span\x3e\nThis operation is not supported.\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e接下来，我们来看看 \x3ccode\x3epartial\x3c\/code\x3e。例如，\x3ccode\x3efunctool.partial(func, *args, **kwargs)\x3c\/code\x3e 允许你返回一个新的 \x3ca href=\x22https:\/\/docs.python.org\/3\/library\/functools.html#functools.partial\x22\x3epartial 对象\x3c\/a\x3e，它的行为类似 \x3ccode\x3efunc\x3c\/code\x3e，参数是 \x3ccode\x3eargs\x3c\/code\x3e 和 \x3ccode\x3ekwargs\x3c\/code\x3e。如果传入更多的 \x3ccode\x3eargs\x3c\/code\x3e，它们会被附加到 \x3ccode\x3eargs\x3c\/code\x3e。如果传入更多的 \x3ccode\x3ekwargs\x3c\/code\x3e，它们会扩展并覆盖 \x3ccode\x3ekwargs\x3c\/code\x3e。让我们通过一个简短的例子来看看：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e\x26gt;\x26gt; from functools import partial\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e\x26gt;\x26gt; basetwo = partial(int, base=2)\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e\x26gt;\x26gt; basetwo\x3c\/span\x3e\n\x26lt;functools.partial object at 0x1085a09f0\x26gt;\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e\x26gt;\x26gt; basetwo(\x3cspan class=\x22hljs-string\x22\x3e\x2710010\x27\x3c\/span\x3e)\x3c\/span\x3e\n18\n\x3cspan class=\x22hljs-meta\x22\x3e\n#\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e 这等同于\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e\x26gt;\x26gt; int(\x3cspan class=\x22hljs-string\x22\x3e\x2710010\x27\x3c\/span\x3e, base=2)\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e让我们看看在我喜欢的一个\x3ca href=\x22https:\/\/github.com\/mozilla\/agithub\x22\x3e名为 \x3ccode\x3eagithub\x3c\/code\x3e\x3c\/a\x3e 的库中的一些示例代码中，这个方法魔术是如何结合在一起的，这是一个（名字起得很 low 的） REST API 客户端，它具有透明的语法，允许你以最小的配置快速构建任何 REST API 原型（不仅仅是 GitHub）。我发现这个项目很有趣，因为它非常强大，但只有大约 400 行 Python 代码。你可以在大约 30 行配置代码中添加对任何 REST API 的支持。\x3ccode\x3eagithub\x3c\/code\x3e 知道协议所需的一切（\x3ccode\x3eREST\x3c\/code\x3e、\x3ccode\x3eHTTP\x3c\/code\x3e、\x3ccode\x3eTCP\x3c\/code\x3e），但它不考虑上游 API。让我们深入到它的实现中。\x3c\/p\x3e\n\x3cp\x3e以下是我们如何为 GitHub API 和任何其他相关连接属性定义端点 URL 的简化版本。在这里查看\x3ca href=\x22https:\/\/github.com\/mozilla\/agithub\/blob\/master\/agithub\/GitHub.py\x22\x3e完整代码\x3c\/a\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGitHub\x3c\/span\x3e(\x3cspan class=\x22hljs-title\x22\x3eAPI\x3c\/span\x3e):\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__init__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, token=None, *args, **kwargs)\x3c\/span\x3e\x3c\/span\x3e:\n        props = ConnectionProperties(api_url = kwargs.pop(\x3cspan class=\x22hljs-string\x22\x3e\x27api_url\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27api.github.com\x27\x3c\/span\x3e))\n        \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.setClient(Client(*args, **kwargs))\n        \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.setConnectionProperties(props)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e然后，一旦配置了\x3ca href=\x22https:\/\/github.com\/settings\/tokens\x22\x3e访问令牌\x3c\/a\x3e，就可以开始使用 \x3ca href=\x22https:\/\/developer.github.com\/v3\/repos\/#list-your-repositories\x22\x3eGitHub API\x3c\/a\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; gh = GitHub(\x3cspan class=\x22hljs-string\x22\x3e\x27token\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; status, data = gh.user.repos.get(visibility=\x3cspan class=\x22hljs-string\x22\x3e\x27public\x27\x3c\/span\x3e, sort=\x3cspan class=\x22hljs-string\x22\x3e\x27created\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e# ^ 映射到 GET \/user\/repos\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; data\n... [\x3cspan class=\x22hljs-string\x22\x3e\x27tweeter\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27snipey\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27...\x27\x3c\/span\x3e]\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e请注意，你要确保 URL 拼写正确，因为我们没有验证 URL。如果 URL 不存在或出现了其他任何错误，将返回 API 抛出的错误。那么，这一切是如何运作的呢？让我们找出答案。首先，我们将查看一个 \x3ca href=\x22https:\/\/github.com\/mozilla\/agithub\/blob\/dbf7014e2504333c58a39153aa11bbbdd080f6ac\/agithub\/base.py#L30-L58\x22\x3e\x3ccode\x3eAPI\x3c\/code\x3e 类\x3c\/a\x3e的简化示例：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAPI\x3c\/span\x3e:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e# ... other methods ...\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__getattr__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, key)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e IncompleteRequest(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.client).__getattr_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e(key)\n    __getitem_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e = __getattr_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在 \x3ccode\x3eAPI\x3c\/code\x3e 类上的每次调用都会调用 \x3ca href=\x22https:\/\/github.com\/mozilla\/agithub\/blob\/dbf7014e2504333c58a39153aa11bbbdd080f6ac\/agithub\/base.py#L60-L100\x22\x3e\x3ccode\x3eIncompleteRequest\x3c\/code\x3e 类\x3c\/a\x3e作为指定的 \x3ccode\x3ekey\x3c\/code\x3e。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIncompleteRequest\x3c\/span\x3e:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e# ... other methods ...\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e__getattr__\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, key)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.client.\x3cspan class=\x22hljs-symbol\x22\x3ehttp_methods:\x3c\/span\x3e\n            htmlMethod = getattr(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.client, key)\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e partial(htmlMethod, url=\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.url)\n        \x3cspan class=\x22hljs-symbol\x22\x3eelse:\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.url \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e \x2b str(key)\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e\n    __getitem_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e = __getattr_\x3cspan class=\x22hljs-number\x22\x3e_\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eClient\x3c\/span\x3e:\x3c\/span\x3e\n    http_methods = (\x3cspan class=\x22hljs-string\x22\x3e\x27get\x27\x3c\/span\x3e)  \x3cspan class=\x22hljs-comment\x22\x3e# 还有 post, put, patch 等等。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edef\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eget\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e, url, headers={}, **params)\x3c\/span\x3e\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eself\x3c\/span\x3e.request(\x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e, url, None, headers)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e如果最后一次调用不是 HTTP 方法（如 \x3ccode\x3eget\x3c\/code\x3e、\x3ccode\x3epost\x3c\/code\x3e 等），则返回带有附加路径的 \x3ccode\x3eIncompleteRequest\x3c\/code\x3e。否则，它从\x3ca href=\x22https:\/\/github.com\/mozilla\/agithub\/blob\/dbf7014e2504333c58a39153aa11bbbdd080f6ac\/agithub\/base.py#L102-L231\x22\x3e\x3ccode\x3eClient\x3c\/code\x3e 类\x3c\/a\x3e获取 HTTP 方法对应的正确函数，并返回 \x3ccode\x3epartial\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e如果我们给出一个不存在的路径会发生什么？\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e\x26gt;\x26gt;\x26gt; status, data = this\x3cspan class=\x22hljs-selector-class\x22\x3e.path\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.doesnt\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.exist\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.get\x3c\/span\x3e()\n\x26gt;\x26gt;\x26gt; status\n... \x3cspan class=\x22hljs-number\x22\x3e404\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e因为 \x3ccode\x3e__getattr__\x3c\/code\x3e 别名为 \x3ccode\x3e__getitem__\x3c\/code\x3e：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs ruby\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; owner, repo = \x3cspan class=\x22hljs-string\x22\x3e\x27nnja\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27tweeter\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; status, data = gh.repos[owner][repo].pulls.get()\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; \x3cspan class=\x22hljs-comment\x22\x3e# ^ Maps to GET \/repos\/nnja\/tweeter\/pulls\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\x26gt;\x26gt;\x3c\/span\x3e\x26gt; data\n.... \x3cspan class=\x22hljs-comment\x22\x3e# {....}\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e这真心是一些方法魔术！\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#了解更多\x22\x3e\x3c\/a\x3e了解更多\x3c\/h3\x3e\n\x3cp\x3ePython 提供了大量工具，使你的代码更优雅，更易于阅读和理解。挑战在于找到合适的工具来完成工作，但我希望本文为你的工具箱添加了一些新工具。而且，如果你想更进一步，你可以在我的博客 \x3ca href=\x22http:\/\/nnja.io\x22\x3ennja.io\x3c\/a\x3e 上阅读有关装饰器、上下文管理器、上下文生成器和命名元组的内容。随着你成为一名更好的 Python 开发人员，我鼓励你到那里阅读一些设计良好的项目的源代码。\x3ca href=\x22https:\/\/github.com\/requests\/requests\x22\x3eRequests\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/github.com\/pallets\/flask\x22\x3eFlask\x3c\/a\x3e 是两个很好的起步的代码库。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/opensource.com\/article\/18\/4\/elegant-solutions-everyday-python-problems\x22\x3ehttps:\/\/opensource.com\/article\/18\/4\/elegant-solutions-everyday-python-problems\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/opensource.com\/users\/nnja\x22\x3eNina Zakharenko\x3c\/a\x3e 选题：\x3ca href=\x22https:\/\/github.com\/lujun9972\x22\x3elujun9972\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/MjSeven\x22\x3eMjSeven\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/3-practical-python-tools-magic-methods-iterators-and-generators-and-method-magic">https://www.zcfy.cc/article/3-practical-python-tools-magic-methods-iterators-and-generators-and-method-magic</a> 原文标题: 日常 Python 编程优雅之道 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/18851f44/" target="_blank">https://alili.tech/archive/18851f44/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>