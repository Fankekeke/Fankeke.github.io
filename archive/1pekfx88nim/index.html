<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vuejs实现spa页面组件滑动特效"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vuejs实现spa页面组件滑动特效 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/1pekfx88nim/",
				"appid": "1613049289050283", 
				"title": "vuejs实现spa页面组件滑动特效 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-11T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/0lhk4yn0ouyc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qi9he6u1z3/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&text=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&text=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&title=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&is_video=false&description=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&title=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&title=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&title=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f1pekfx88nim%2f&title=vuejs%e5%ae%9e%e7%8e%b0spa%e9%a1%b5%e9%9d%a2%e7%bb%84%e4%bb%b6%e6%bb%91%e5%8a%a8%e7%89%b9%e6%95%88"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vuejs实现spa页面组件滑动特效</h1><div class="meta"><div class="postdate"><time datetime="2018-12-11" itemprop="datePublished">2018-12-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3evuejs实现spa页面组件滑动特效\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e写在前面的一些废话\x3c\/h2\x3e\n\x3cp\x3e其实通过vuejs非常容易实现spa中路由的过渡效果，网上也有不少教程。但是考虑一下以下需求\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e即将离开的组件和将要进入的组合同时出现在页面中\x3c\/li\x3e\n\x3cli\x3e用手指拖动页面可以切换路由，而不仅仅是点击链接\x3c\/li\x3e\n\x3cli\x3e结合以上两点，拖动过程中同时显示两个组件，手指离开屏幕后执行切换路由或者返回\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e好像\x3cdel\x3e也不是\x3c\/del\x3e很简单\x3cbr\x3e最近几个\x3cdel\x3e月\x3c\/del\x3e天在仿DiDi应用写一个web app，写到“顺风车”组件的时候发现在其组件下的两个子组件：\x3cem\x3e乘客组件\x3c\/em\x3e以及\x3cem\x3e车主组件\x3c\/em\x3e，他们的切换方式正是满足上面3点要求。好几番尝试后终于写出了满足要求的代码，来和小伙伴分享~\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e我是正文\x3c\/h2\x3e\n\x3cp\x3e首先简单的过渡效果我就不多做介绍了。通过\x3ccode\x3evue\x3c\/code\x3e提供的\x3ccode\x3etransition\x3c\/code\x3e组件，我们可以很容易的实现一个普通的动画效果。具体的可以参考\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/transitions.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evuejs官方文档\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eStep 0\x3c\/h3\x3e\n\x3cp\x3e我们先大致了解一下html结构\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;content-wrapper\x26quot;\x3e\n  \x3c!-- router-view指向组件driver和passenger --\x3e\n  \x3crouter-view class=\x26quot;content\x26quot;\x3e\x3c\/router-view\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content-wrapper\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- router-view指向组件driver和passenger --\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3erouter-view\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3erouter-view\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eStep 1\x3c\/h3\x3e\n\x3cp\x3e来实现第一个需求。\x3cbr\x3e这个需求不难，分别给2个组件定义不同\x3ccode\x3etransition\x3c\/code\x3e动画即可。\x3cbr\x3e对于左边的passenger组件，他是从左边进入\/离开的，相应的代码为\x3ccode\x3etransform: translateX(-100%)\x3c\/code\x3e,同理对于右边的driver组件，相应代码为\x3ccode\x3etransform: translateX(100%)\x3c\/code\x3e。\x3cbr\x3e特别注意的是，需要对\x3ccode\x3erouter-view\x3c\/code\x3e添加一行css代码（写在\x3ccode\x3e.content\x3c\/code\x3e中）\x3ccode\x3eposition: absolute\x3c\/code\x3e来使driver组件元素和passenger组件元素脱离文档流，否则达不到2个组件同时出现在页面中的效果。\x3cbr\x3e效果如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013604311?w=376\x26amp;h=668\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013604311?w=376\x26amp;h=668\x22 alt=\x22效果图1\x22 title=\x22效果图1\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e上一个touch事件完成后，已滑动距离。实际在这个设计里，因为我们手指离开后，页面不会停留在中间，不是滑过去切换路由，就是滑回去恢复原样。所以\x3ccode\x3ecurrentDistance\x3c\/code\x3e并没有什么卵用，但是如果要\x3cem\x3e即停即走\x3c\/em\x3e，这个变量不可少。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eStep 2\x3c\/h3\x3e\n\x3cp\x3e对于移动端，肯定少不了手指滑动效果。在左右滑动页面的时候，理应也能切换到对应的路由。滴滴app就是这样。如何滑动？实现思路就是以3个touch事件：\x3ccode\x3etouchstart\x3c\/code\x3e,\x3ccode\x3etouchmove\x3c\/code\x3e,\x3ccode\x3etouchend\x3c\/code\x3e是核心，配合\x3ccode\x3etransform: translate\x3c\/code\x3e来实现。额外要求：松手后判断滑动距离，达到一定距即进行路由的切换，否则页面“滑”回去。\x3cbr\x3e如何让元素跟着你的指尖走？我们以\x3ccode\x3edriver\x3c\/code\x3e组件为例，先了解一下组件中各项数据\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22data() {\n  return {\n    touch: {}, \/\/ 保存着起始位置x1和变化的位置x2\n    touchStartTime: 0, \/\/ touch开始\n    touchEndTime: 0, \/\/ touch结束时间\n    currentDistance: 0 \/\/ 上一个touch事件完成后，已滑动距离。实际在这个设计里，因为我们手指离开后， 页面不会停留在中间，不是滑过去切换路由，就是滑回去恢复原样。所以这个变量并没有什么卵用，但是如果要*即停即走*，这个变量不可少。\n    totalDiff: 0 \/\/ 总滑动距离\n  }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edata() {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3etouch\x3c\/span\x3e: {}, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 保存着起始位置x1和变化的位置x2\x3c\/span\x3e\n    touchStartTime: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ touch开始\x3c\/span\x3e\n    touchEndTime: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ touch结束时间\x3c\/span\x3e\n    currentDistance: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 上一个touch事件完成后，已滑动距离。实际在这个设计里，因为我们手指离开后， 页面不会停留在中间，不是滑过去切换路由，就是滑回去恢复原样。所以这个变量并没有什么卵用，但是如果要*即停即走*，这个变量不可少。\x3c\/span\x3e\n    totalDiff: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 总滑动距离\x3c\/span\x3e\n  }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e首先，我们在监听元素的touchstart事件，在用户touch页面的时候记录下位置信息，因为我们是左右滑动，所以只关心x轴方向。回调函数如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function touchStart(ev) {\n  let touch = ev.changedTouches[0]\n  this.touch.x1 = touch.pageX \/\/ 本文中所有this指向vue组件实例\n                                                          \/\/ 这里是driver组件或是passenger\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etouchStart\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eev\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e touch = ev.changedTouches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x1 = touch.pageX \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 本文中所有this指向vue组件实例\x3c\/span\x3e\n                                                          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里是driver组件或是passenger\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，也是重点，监听touchmove事件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function touchMove(ev) {\n  let touch = ev.changedTouches[0]\n  this.touch.x2 = touch.pageX\n  let diff = this.touch.x2 - this.touch.x1 \/\/ 差值，表示手指移动的距离\n  this.totalDiff = diff \x2b this.currentDistance \/\/ 总差值，表示手指移动的距离，正表示右滑，负左滑\n  if (this.totalDiff \x3c 0) { \/\/ driver组件是右滑，所以totalDiff不能小于0\n    this.totalDiff = 0\n  } else if (this.totalDiff \x3e this.maxMoveDistance) { \/\/ 这里maxMoveDistance为屏幕宽度\n    this.totalDiff = this.maxMoveDistance\n  }\n  let el = ev.currentTarget\n  translate(el, this.totalDiff, 0) \/\/ 对组件进行滑动\n  translate(this.leftEl, this.totalDiff, 0) \/\/ leftEl后面再做解释\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etouchMove\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eev\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e touch = ev.changedTouches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x2 = touch.pageX\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e diff = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x2 - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x1 \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 差值，表示手指移动的距离\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff = diff \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentDistance \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 总差值，表示手指移动的距离，正表示右滑，负左滑\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ driver组件是右滑，所以totalDiff不能小于0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxMoveDistance) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里maxMoveDistance为屏幕宽度\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxMoveDistance\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e el = ev.currentTarget\n  translate(el, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对组件进行滑动\x3c\/span\x3e\n  translate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.leftEl, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ leftEl后面再做解释\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e关于translate函数，具体实现如下:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 简单的移动函数\n * @param {HTML Object} el 目标节点\n * @param {number} x 水平方向的移动\n * @param {number} y 垂直方向的移动\n * @param {Object} options 可选参数\n * @param {Boolean} options.useTransfrom 是否通过transfrom来移动元素\n * @param {Boolean} options.transitionTimingFunction transition的timingFunction\n * @param {String} options.transitionDuration transition时间\n *\/\nfunction translate(el, x, y, options) {\n  const defaultOptions = {\n    useTransfrom: true,\n    transitionTimingFunction: \x27cubic-bezier(0.165, 0.84, 0.44, 1)\x27,\n    transitionDuration: \x270s\x27\n  }\n  for (let option in options) {\n    defaultOptions[option] = options[option]\n  }\n  if (defaultOptions.useTransfrom) {\n    el.style.transform = `translate3d(${x}px,${y}px,0)`\n    el.style.transitionProperty = \x27transform\x27\n    el.style.transitionTimingFunction = defaultOptions.transitionTimingFunction\n    el.style.transitionDuration = defaultOptions.transitionDuration\n  } else {\n    el.style.left = x\n    el.style.top = y\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 简单的移动函数\n * @param {HTML Object} el 目标节点\n * @param {number} x 水平方向的移动\n * @param {number} y 垂直方向的移动\n * @param {Object} options 可选参数\n * @param {Boolean} options.useTransfrom 是否通过transfrom来移动元素\n * @param {Boolean} options.transitionTimingFunction transition的timingFunction\n * @param {String} options.transitionDuration transition时间\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etranslate\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eel, x, y, options\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e defaultOptions = {\n    \x3cspan class=\x22hljs-attr\x22\x3euseTransfrom\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etransitionTimingFunction\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27cubic-bezier(0.165, 0.84, 0.44, 1)\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etransitionDuration\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x270s\x27\x3c\/span\x3e\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e option \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e options) {\n    defaultOptions[option] = options[option]\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (defaultOptions.useTransfrom) {\n    el.style.transform = \x3cspan class=\x22hljs-string\x22\x3e`translate3d(\x3cspan class=\x22hljs-subst\x22\x3e${x}\x3c\/span\x3epx,\x3cspan class=\x22hljs-subst\x22\x3e${y}\x3c\/span\x3epx,0)`\x3c\/span\x3e\n    el.style.transitionProperty = \x3cspan class=\x22hljs-string\x22\x3e\x27transform\x27\x3c\/span\x3e\n    el.style.transitionTimingFunction = defaultOptions.transitionTimingFunction\n    el.style.transitionDuration = defaultOptions.transitionDuration\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    el.style.left = x\n    el.style.top = y\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来就是\x3ccode\x3etouchend\x3c\/code\x3e事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function touchEnd(ev) {\n  let touch = ev.changedTouches[0]\n  this.touch.x2 = touch.pageX\n  let diff = this.touch.x2 - this.touch.x1\n  this.touchEndTime = Date.now()\n  this.totalDiff = diff \x2b this.currentDistance\n  this.currentDistance = this.totalDiff\n  let el = ev.currentTarget\n  let touchTime = this.touchEndTime - this.touchStartTime\n  \/\/ 当滑动距离超过一半或者快速滑动一段距离时，就进行完整的滑动，否则回弹\n  \/\/ 快速滑动的数据是自己尝试的，体验可能不是很好^ ^\n  if (this.totalDiff \x3e this.maxMoveDistance \/ 2 || (touchTime \x3c 150 \x26amp;\x26amp; this.totalDiff \x3e this.maxMoveDistance \/ 10)) {\n    translate(el, this.maxMoveDistance, 0, {\n      transitionTimingFunction: \x27linear\x27,\n      transitionDuration: \x27.1s\x27\n    })\n    translate(this.leftEl, this.maxMoveDistance, 0, {\n      transitionTimingFunction: \x27linear\x27,\n      transitionDuration: \x27.1s\x27\n    })\n    this.$emit(\x27dragedSlide\x27) \/\/ 通知父组件进行路由切换\n  } else {\n    this.totalDiff = this.currentDistance = 0\n    translate(el, this.totalDiff, 0)\n    translate(this.leftEl, this.totalDiff, 0)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etouchEnd\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eev\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e touch = ev.changedTouches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x2 = touch.pageX\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e diff = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x2 - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touch.x1\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touchEndTime = \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e.now()\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff = diff \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentDistance\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentDistance = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e el = ev.currentTarget\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e touchTime = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touchEndTime - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touchStartTime\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当滑动距离超过一半或者快速滑动一段距离时，就进行完整的滑动，否则回弹\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 快速滑动的数据是自己尝试的，体验可能不是很好^ ^\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxMoveDistance \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e || (touchTime \x26lt; \x3cspan class=\x22hljs-number\x22\x3e150\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxMoveDistance \/ \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e)) {\n    translate(el, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxMoveDistance, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, {\n      \x3cspan class=\x22hljs-attr\x22\x3etransitionTimingFunction\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27linear\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3etransitionDuration\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.1s\x27\x3c\/span\x3e\n    })\n    translate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.leftEl, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.maxMoveDistance, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, {\n      \x3cspan class=\x22hljs-attr\x22\x3etransitionTimingFunction\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27linear\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3etransitionDuration\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.1s\x27\x3c\/span\x3e\n    })\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27dragedSlide\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通知父组件进行路由切换\x3c\/span\x3e\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentDistance = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    translate(el, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n    translate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.leftEl, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.totalDiff, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e效果图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013604312?w=376\x26amp;h=668\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013604312?w=376\x26amp;h=668\x22 alt=\x22效果图2\x22 title=\x22效果图2\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eStep 3\x3c\/h3\x3e\n\x3cp\x3e在拖动时，左右都是“白边”，难看。怎么处理？也不难。\x3cbr\x3e我们\x3cdel\x3e都\x3c\/del\x3e写过或者了解过轮播图，其中一种写法就是在第一张图(元素)的左边插入最后一张图(元素)，最后一张图的右边插入第一张。在拖动当前元素时，同时拖动其左\/右的元素(也就是Step 2中代码里的\x3ccode\x3eleftEl\x3c\/code\x3e，当然还有righEl)，来达到我们要的效果。所以现在我们的html结构是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;content-wrapper\x26quot;\x3e\n    \x3cpassenger class=\x26quot;out_of_screen out_of_screen-left\x26quot;\/\x3e\n    \x3c!-- router-view指向组件driver和passenger --\x3e\n    \x3crouter-view class=\x26quot;content\x26quot;\/\x3e\n    \x3cdriver class=\x26quot;out_of_screen out_of_screen-right\x26quot;\/\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content-wrapper\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3epassenger\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22out_of_screen out_of_screen-left\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- router-view指向组件driver和passenger --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3erouter-view\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3edriver\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22out_of_screen out_of_screen-right\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里好像就大功告成了？看一下效果：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013604313?w=376\x26amp;h=668\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013604313?w=376\x26amp;h=668\x22 alt=\x22效果图3\x22 title=\x22效果图3\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e等等，是你撸多了吗？怎么有两个动画？\x3cbr\x3e其实是因为路由切换后会自动触发组件本身的transition，再加上自己写的\x3ccode\x3etranslate(this.leftEl, ...)\x3c\/code\x3e，就有2个啦。\x3cbr\x3e知道原因就很好处理了，去掉其中一个动画即可。我的选择是去掉组件本身的过渡效果。\x3cbr\x3e具体做法就是给组件动态绑定\x3ccode\x3etransition\x3c\/code\x3e的\x3ccode\x3ename\x3c\/code\x3e属性，来选择性的使组件开启\/关闭过渡效果。同时对左右插入的元素监听其\x3ccode\x3etransitionend\x3c\/code\x3e事件，配合上父组件的\x3ccode\x3edragedSlide\x3c\/code\x3e事件，来实现动态过渡，上代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;content-wrapper\x26quot;\x3e\n  \x3cpassenger class=\x26quot;out_of_screen out_of_screen-left\x26quot; @transitionend.native=\x26quot;updateRouter($event, \x27passenger\x27)\/\x3e\n  \x3c!-- router-view指向组件driver和passenger --\x3e\n  \x3crouter-view class=\x26quot;content\x26quot; \n    @dragedSlide=\x26quot;confirmDragSlide\x26quot;\n    :transitionName=\x26quot;transitionName\x26quot;\n  \/\x3e\n  \x3cdriver class=\x26quot;out_of_screen out_of_screen-right\x26quot; @transitionend.native=\x26quot;updateRouter($event, \x27passenger\x27)\/\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content-wrapper\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3epassenger\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22out_of_screen out_of_screen-left\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3etransitionend.native\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22updateRouter($event, \x27passenger\x27)\/\x26gt;\n  \x26lt;!-- router-view指向组件driver和passenger --\x26gt;\n  \x26lt;router-view class=\x22\x3c\/span\x3e\x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e\x22 \n    @\x3cspan class=\x22hljs-attr\x22\x3edragedSlide\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22confirmDragSlide\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3e:transitionName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22transitionName\x22\x3c\/span\x3e\n  \/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3edriver\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22out_of_screen out_of_screen-right\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3etransitionend.native\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22updateRouter($event, \x27passenger\x27)\/\x26gt;\n\x26lt;\/div\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e父组件js部分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default {\n  beforeRouteUpdate(to, from, next) {\n    this.transitionName = this.isDragedSlide ? \x27\x27 : \x27slide\x27\n    next()\n  },\n data() {\n    return {\n      transitionName: \x27slide\x27,\n      isDragedSlide: false\n    }\n  },\n  methods: {\n        \/\/ ...\n    \/\/ 是否通过手指拖动触发滑屏\n    confirmDragSlide() {\n      this.isDragedSlide = true\n    },\n    updateRouter(ev, routeName) {\n      if (this.isDragedSlide) {\n        let el = ev.target\n        this.$router.push(routeName)\n        el.style.transform = \x27\x27\n        el.style.transitionDuration = \x270s\x27\n        this.isDragedSlide = false\n      }\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  beforeRouteUpdate(to, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, next) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.transitionName = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isDragedSlide ? \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27slide\x27\x3c\/span\x3e\n    next()\n  },\n data() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3etransitionName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27slide\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eisDragedSlide\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否通过手指拖动触发滑屏\x3c\/span\x3e\n    confirmDragSlide() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isDragedSlide = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    },\n    updateRouter(ev, routeName) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isDragedSlide) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e el = ev.target\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.push(routeName)\n        el.style.transform = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n        el.style.transitionDuration = \x3cspan class=\x22hljs-string\x22\x3e\x270s\x27\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isDragedSlide = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n      }\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终效果\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013604314?w=376\x26amp;h=668\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013604314?w=376\x26amp;h=668\x22 alt=\x22效果图4\x22 title=\x22效果图4\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000014303454\x22\x3e这里有内容更新\x3c\/a\x3e\x3c\/p\x3e\n\x3chr\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eEnd\x3c\/h2\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vuejs实现spa页面组件滑动特效</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013604306">https://segmentfault.com/a/1190000013604306</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/1pekfx88nim/" target="_blank">https://alili.tech/archive/1pekfx88nim/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>