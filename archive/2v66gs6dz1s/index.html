<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="在线考试系统（vue2 &#43; elementui &#43; express4 &#43; MongoDB）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>在线考试系统（vue2 &#43; elementui &#43; express4 &#43; MongoDB） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/2v66gs6dz1s/",
				"appid": "1613049289050283", 
				"title": "在线考试系统（vue2 &#43; elementui &#43; express4 &#43; MongoDB） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-02T02:30:15"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/a67eg5cjtmg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/i0zyrepjxq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&text=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&text=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&title=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&is_video=false&description=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&title=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&title=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&title=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2v66gs6dz1s%2f&title=%e5%9c%a8%e7%ba%bf%e8%80%83%e8%af%95%e7%b3%bb%e7%bb%9f%ef%bc%88vue2%20%2b%20elementui%20%2b%20express4%20%2b%20MongoDB%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">在线考试系统（vue2 &#43; elementui &#43; express4 &#43; MongoDB）</h1><div class="meta"><div class="postdate"><time datetime="2018-12-02" itemprop="datePublished">2018-12-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e这是我毕业项目，从0到1，前后台独立开发完成。功能不多，在此记录,温故而知新！项目github地址:\x3ca href=\x22https:\/\/github.com\/FinGet\/Exam\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/github.com\/FinGet\/Exam\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/FinGet\/Exam\x3c\/a\x3e ，博客地址：\x3ca href=\x22https:\/\/finget.github.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/finget.github.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/finget.github.io\/\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3cblockquote\x3e更新记录：2018-4-9，md5加密\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e安装mongodb\x3c\/h2\x3e\n\x3cp\x3ewindow下安装mongodb，需要参考的可以移步我的博客中：\x3ca href=\x22https:\/\/finget.github.io\/2018\/05\/05\/win-mongodb\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewin10安装mongodb\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e项目初始化\x3c\/h2\x3e\n\x3cp\x3e本次项目使用的是express4 \x2b vue2\x2b \x2b elementUI1\x2b \x2b mongodb3.4\x2b\x3c\/p\x3e\n\x3cp\x3e先看项目文件目录结构：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737443?w=165\x26amp;h=668\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737443?w=165\x26amp;h=668\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e我页面用的vue所以\x3ccode\x3eserver\/views\x3c\/code\x3e和\x3ccode\x3eserver\/public\x3c\/code\x3e都没有用\x3c\/blockquote\x3e\n\x3cul\x3e\n\x3cli\x3e项目建立用的是vue-cli:\x3cbr\x3e\x3ccode\x3evue init webpack exam\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e项目中前后台是写在一个项目中的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 npm i -g express-generator\n \/\/ 在项目文件根目录下\n express server\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e npm i -g express-generator\n \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在项目文件根目录下\x3c\/span\x3e\n express server\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e由于前后台都是写在一个项目中的，我就将\x3ccode\x3eserver\x3c\/code\x3e下的\x3ccode\x3epackage.json\x3c\/code\x3e和\x3ccode\x3evue\x3c\/code\x3e下的\x3ccode\x3epackage.json\x3c\/code\x3e合并了\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737444?w=555\x26amp;h=723\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737444?w=555\x26amp;h=723\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e安装一些插件\x3c\/h3\x3e\n\x3ch4\x3eaxios 请求数据\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3enpm i axios --save\x3c\/code\x3e\x3cbr\x3e首先axios不支持vue.use()式声明\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 在main.js中如下声明使用\nimport axios from \x27axios\x27;\nVue.prototype.$axios=axios;\n\/\/ 那么在其他vue组件中就可以this.$axios调用使用\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在main.js中如下声明使用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e;\nVue.prototype.$axios=axios;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 那么在其他vue组件中就可以this.$axios调用使用\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eelementUI\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3enpm i element-ui --save\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import ElementUI from \x27element-ui\x27 \/\/ 加载ElementUI\nimport \x27element-ui\/lib\/theme-default\/index.css\x27\nVue.use(ElementUI) \/\/ 全局使用elementUI\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ElementUI \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27element-ui\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载ElementUI\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27element-ui\/lib\/theme-default\/index.css\x27\x3c\/span\x3e\nVue.use(ElementUI) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局使用elementUI\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3evue-lazyload 图片懒加载\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3enpm i vue-lazyload --save\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ main.js\nimport VueLazyLoad from \x27vue-lazyload\x27\nVue.use(VueLazyLoad, { \/\/ 全局使用图片懒加载\n  loading: \x27static\/loading-svg\/loading-bars.svg\x27, \/\/ 图片还没加载时的svg图片\n  try: 1 \/\/ default 1\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ main.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VueLazyLoad \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-lazyload\x27\x3c\/span\x3e\nVue.use(VueLazyLoad, { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局使用图片懒加载\x3c\/span\x3e\n  loading: \x3cspan class=\x22hljs-string\x22\x3e\x27static\/loading-svg\/loading-bars.svg\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 图片还没加载时的svg图片\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ default 1\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用懒加载：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cimg width=\x26quot;300\x26quot; height=\x26quot;53\x26quot; v-lazy=\x26quot;logoSrc\x26quot; alt=\x26quot;\x26quot;\x3e\nlogoSrc:require(\x27..\/common\/img\/logo.png\x27)\n\/\/ 不能写成：\x3cimg width=\x26quot;300\x26quot; height=\x26quot;53\x26quot; v-lazy=\x26quot;..\/common\/img\/logo.png\x26quot; alt=\x26quot;\x26quot;\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;img width=\x3cspan class=\x22hljs-string\x22\x3e\x22300\x22\x3c\/span\x3e height=\x3cspan class=\x22hljs-string\x22\x3e\x2253\x22\x3c\/span\x3e v-lazy=\x3cspan class=\x22hljs-string\x22\x3e\x22logoSrc\x22\x3c\/span\x3e alt=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e\x26gt;\nlogoSrc:\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/common\/img\/logo.png\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不能写成：\x26lt;img width=\x22300\x22 height=\x2253\x22 v-lazy=\x22..\/common\/img\/logo.png\x22 alt=\x22\x22\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3emongoose 操作mongodb的\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3enpm i mongoose --save\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3e就不一一列举所有的插件了（没有用vuex）\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e开发上的一些事\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e前台相关\x3c\/h3\x3e\n\x3ch4\x3esessionStorage\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ commonFun.js\n\/\/获取sessionStorage\nfunction getSessionStorage(key, format) {\n  var data;\n  if (sessionStorage.getItem(key)) {\n    if (format == \x27json\x27) {\n      data = JSON.parse(sessionStorage.getItem(key));\n    } else {\n      data = sessionStorage.getItem(key);\n    }\n  } else {\n    data = false\n  }\n  return data;\n}\n\/\/写入sessionStorage\nfunction setSessionStorage(key, content, format) {\n  var data;\n  if (format == \x27json\x27) {\n    data = JSON.stringify(content);\n  } else {\n    data = content;\n  }\n  sessionStorage.setItem(key, data);\n}\nexport var mySessionStorage = {\n  get: getSessionStorage,\n  set: setSessionStorage\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ commonFun.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/获取sessionStorage\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetSessionStorage\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ekey, format\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data;\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (sessionStorage.getItem(key)) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (format == \x3cspan class=\x22hljs-string\x22\x3e\x27json\x27\x3c\/span\x3e) {\n      data = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(sessionStorage.getItem(key));\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      data = sessionStorage.getItem(key);\n    }\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    data = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e data;\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/写入sessionStorage\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esetSessionStorage\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ekey, content, format\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data;\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (format == \x3cspan class=\x22hljs-string\x22\x3e\x27json\x27\x3c\/span\x3e) {\n    data = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(content);\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    data = content;\n  }\n  sessionStorage.setItem(key, data);\n}\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mySessionStorage = {\n  \x3cspan class=\x22hljs-attr\x22\x3eget\x3c\/span\x3e: getSessionStorage,\n  \x3cspan class=\x22hljs-attr\x22\x3eset\x3c\/span\x3e: setSessionStorage\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e全局挂载\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ main.js\nimport * as commonFun from \x27.\/common\/js\/commonFun.js\x27\nVue.prototype.$mySessionStorage = commonFun.mySessionStorage;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ main.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e * \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e commonFun \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/common\/js\/commonFun.js\x27\x3c\/span\x3e\nVue.prototype.$mySessionStorage = commonFun.mySessionStorage;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在页面中使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.$mySessionStorage.set(key,content,format);\nthis.$mySessionStorage.get(key);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$mySessionStorage.set(key,content,format);\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$mySessionStorage.get(key);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e登录检测\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ main.js\n\/\/ 登录判断\nrouter.beforeEach((to, from, next) =\x3e {\n  var userdata = getUserData();\n  if (to.path != \x27\/managelogin\x27\x26amp;\x26amp;to.name!=\x27404\x27\x26amp;\x26amp;to.path != \x27\/\x27\x26amp;\x26amp;to.path != \x26quot;\/frontregister\x26quot;\x26amp;\x26amp;to.path!=\x27\/manageregister\x27) {  \/\/ 判断是否登录\n    if(!userdata.userName){\n      ElementUI.Message.error(\x27抱歉，您还没有登录！\x27);\n      if(to.path.indexOf(\x27front\x27)\x3e0){\n        router.push({path:\x27\/\x27});\n      } else {\n        router.push({path:\x27\/managelogin\x27});\n      }\n    } else {\n      next();\n    }\n  }\n  else {\n    next();\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ main.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 登录判断\x3c\/span\x3e\nrouter.beforeEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eto, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, next\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e userdata = getUserData();\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (to.path != \x3cspan class=\x22hljs-string\x22\x3e\x27\/managelogin\x27\x3c\/span\x3e\x26amp;\x26amp;to.name!=\x3cspan class=\x22hljs-string\x22\x3e\x27404\x27\x3c\/span\x3e\x26amp;\x26amp;to.path != \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e\x26amp;\x26amp;to.path != \x3cspan class=\x22hljs-string\x22\x3e\x22\/frontregister\x22\x3c\/span\x3e\x26amp;\x26amp;to.path!=\x3cspan class=\x22hljs-string\x22\x3e\x27\/manageregister\x27\x3c\/span\x3e) {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断是否登录\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!userdata.userName){\n      ElementUI.Message.error(\x3cspan class=\x22hljs-string\x22\x3e\x27抱歉，您还没有登录！\x27\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(to.path.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27front\x27\x3c\/span\x3e)\x26gt;\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n        router.push({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e});\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        router.push({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27\/managelogin\x27\x3c\/span\x3e});\n      }\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      next();\n    }\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    next();\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e面包屑导航\x3c\/h4\x3e\n\x3cblockquote\x3e绑定面包屑要根据实际情况来定，但是\x3ccode\x3ethis.$router.currentRoute.matched\x3c\/code\x3e是最主要的\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv class=\x26quot;bread\x26quot;\x3e\n    \x3cel-breadcrumb separator=\x26quot;\/\x26quot;\x3e\n      \x3cel-breadcrumb-item v-for=\x26quot;(item, index) in breadData\x26quot; :key=\x26quot;item.id\x26quot; :to=\x26quot;{ name: item.meta.breadName==\x27管理系统\x27?\x27Index\x27:item.name }\x26quot;\x3e\x22{{\x22item.meta.breadName\x22}}\x22\x3c\/el-breadcrumb-item\x3e\n    \x3c\/el-breadcrumb\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript type=\x26quot;text\/ecmascript-6\x26quot;\x3e\n  export default {\n    data() {\n      return {\n        breadData:[]\n      }\n    },\n    watch: {\n      $route () {\n        this.initBreadData();\n      }\n    },\n    methods:{\n      \/\/面包屑\n      initBreadData(){\n        this.breadData=this.$router.currentRoute.matched;\n        \/\/ console.log(this.breadData)\n      }\n    },\n    created(){\n      this.initBreadData();\n    }\n  }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;template\x26gt;\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22bread\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-breadcrumb\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eseparator\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-breadcrumb-item\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22(item, index) in breadData\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item.id\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:to\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{ name: item.meta.breadName==\x27管理系统\x27?\x27Index\x27:item.name }\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22item.meta.breadName\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-breadcrumb-item\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-breadcrumb\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/ecmascript-6\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n    data() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ebreadData\x3c\/span\x3e:[]\n      }\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3ewatch\x3c\/span\x3e: {\n      $route () {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initBreadData();\n      }\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e:{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/面包屑\x3c\/span\x3e\n      initBreadData(){\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.breadData=\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.currentRoute.matched;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(this.breadData)\x3c\/span\x3e\n      }\n    },\n    created(){\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initBreadData();\n    }\n  }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e路由部分：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737445?w=1069\x26amp;h=357\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737445?w=1069\x26amp;h=357\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eelementui面包屑导航与左侧导航相对应\x3c\/h4\x3e\n\x3cblockquote\x3e根据实际情况来，不能套用，要看你的路由怎么写的 \x3ccode\x3ethis.$router.currentRoute.path\x3c\/code\x3e\x3cbr\x3e\x3ccode\x3e:default-active=\x22activeIndex\x22\x3c\/code\x3e\n\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ conponents\/sidebar.vue\n\/\/初始化列表active状态\n...\nmethods:{\n  initActiveIndex(){\n    \/\/ var str =this.$router.currentRoute.path;\n    this.activeIndex=this.$router.currentRoute.path;\n    \/\/ console.log(str)\n  }\n},\nwatch:{\n  \x27$route\x27:\x27initActiveIndex\x27\n},\ncreated(){\n  this.initActiveIndex();\n}\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ conponents\/sidebar.vue\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/初始化列表active状态\x3c\/span\x3e\n...\nmethods:{\n  initActiveIndex(){\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ var str =this.$router.currentRoute.path;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.activeIndex=\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.currentRoute.path;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(str)\x3c\/span\x3e\n  }\n},\n\x3cspan class=\x22hljs-attr\x22\x3ewatch\x3c\/span\x3e:{\n  \x3cspan class=\x22hljs-string\x22\x3e\x27$route\x27\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27initActiveIndex\x27\x3c\/span\x3e\n},\ncreated(){\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initActiveIndex();\n}\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e配置代理\x3c\/h4\x3e\n\x3cp\x3e要想请求到后台数据，这一步是必须的\x3cbr\x3e配置代理之后，localhost:8088\/api\/\x3cem\x3e -\x26gt; localhost:3000\/api\/\x3c\/em\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22config\/index.js\nproxyTable: {\n  \/\/ proxy all requests starting with \/api to jsonplaceholder\n  \x27\/api\x27: {\n    target: \x27http:\/\/127.0.0.1:3000\/api\x27, \/\/ 端口号根据后台设置来，默认是3000\n    changeOrigin: true,\n    pathRewrite: {\n      \x27^\/api\x27: \x27\x27  \/\/ 若target中没有\/api、这里又为空，则404；\n    }\n  }\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs axapta\x22\x3e\x3ccode\x3econfig\/\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e.js\nproxyTable: {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ proxy all requests starting with \/api to jsonplaceholder\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e\x27\/api\x27\x3c\/span\x3e: {\n    target: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/127.0.0.1:3000\/api\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 端口号根据后台设置来，默认是3000\x3c\/span\x3e\n    changeOrigin: \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e,\n    pathRewrite: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27^\/api\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 若target中没有\/api、这里又为空，则404；\x3c\/span\x3e\n    }\n  }\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eElementUi动态增加表单的表单验证 大坑\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv  v-if=\x26quot;dialogForm.type!=\x27judgement\x27\x26amp;\x26amp;dialogForm.type!=\x27Q\x26amp;A\x27\x26quot;\x3e\n    \x3cel-form-item v-for=\x26quot;(item,index) in dialogForm.surveyQuestionOptionList\x26quot;\n    :key=\x26quot;item.key\x26quot;\n    :label=\x26quot;\x27选项\x27\x2b(index\x2b1) \x2b\x27：\x27\x26quot;\n    :prop=\x26quot;\x27surveyQuestionOptionList.\x27 \x2b index \x2b \x27.optionContent\x27\x26quot;\n    :rules=\x26quot;{\n      required:true, message:\x27选项不能为空\x27, trigger:\x27blur\x27\n    }\x26quot;\n    \x3e\n    \/\/ 最重要的是prop 一定要带上`.optionContent`，也就是你绑定值的key\n      \x3cel-input placeholder=\x26quot;请输入选项\x26quot; class=\x26quot;dialog_input\x26quot; v-model=\x26quot;item.optionContent\x26quot;\x3e\x3c\/el-input\x3e\n      \x3ci class=\x26quot;el-icon-delete delete-icon\x26quot; @click=\x26quot;deleteDlalogOption(index)\x26quot;\x3e\x3c\/i\x3e\n    \x3c\/el-form-item\x3e\n    \x3cel-button type=\x26quot;primary\x26quot; size=\x26quot;small\x26quot; class=\x26quot;marginB10\x26quot; @click=\x26quot;addDialogOption\x26quot;\x3e添加选项\x3c\/el-button\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;div  v-\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22dialogForm.type!=\x27judgement\x27\x26amp;\x26amp;dialogForm.type!=\x27Q\x26amp;A\x27\x22\x3c\/span\x3e\x26gt;\n    \x26lt;el-form-item v-for=\x22(item,index) in dialogForm.surveyQuestionOptionList\x22\n    :key=\x22item.key\x22\n    :label=\x22\x27选项\x27\x2b(index\x2b1) \x2b\x27：\x27\x22\n    :prop=\x22\x27surveyQuestionOptionList.\x27 \x2b index \x2b \x27.optionContent\x27\x22\n    :rules=\x22{\n      required:true, message:\x27选项不能为空\x27, trigger:\x27blur\x27\n    }\x22\n    \x26gt;\n    \/\/ 最重要的是prop 一定要带上`.optionContent`，也就是你绑定值的key\n      \x26lt;el-input placeholder=\x22请输入选项\x22 class=\x22dialog_input\x22 v-model=\x22item.optionContent\x22\x26gt;\x26lt;\/el-input\x26gt;\n      \x26lt;i class=\x22el-icon-delete delete-icon\x22 @click=\x22deleteDlalogOption(index)\x22\x26gt;\x26lt;\/i\x26gt;\n    \x26lt;\/el-form-item\x26gt;\n    \x26lt;el-button type=\x22primary\x22 size=\x22small\x22 class=\x22marginB10\x22 @click=\x22addDialogOption\x22\x26gt;添加选项\x26lt;\/el-button\x26gt;\n\x26lt;\/div\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3equery要用path来引入，params要用name来引入\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22goToExam(id){\n\/\/ params传参只能用name引入\n  this.$router.push({name:\x27ForntExam\x27,params:{id:id\x22}}\x22);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3egoToExam(id){\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ params传参只能用name引入\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.push({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27ForntExam\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3eparams\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:id\x22}}\x22);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eElementui 单选框对上单选题\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;single\x26quot;\x3e\n    \x3ch4\x3e单选题（只有一个正确答案）\x3c\/h4\x3e\n    \x3cul\x3e\n      \x3cli class=\x26quot;marginB10\x26quot; v-for=\x26quot;(item,index) in singleQuestions\x26quot; :key=\x26quot;item.id\x26quot;\x3e\n        \x3cp class=\x26quot;question-title\x26quot;\x3e\x22{{\x22index\x2b1\x22}}\x22 、\x22{{\x22item.name\x22}}\x22（）\x3c\/p\x3e\n    \n        \x3cspan class=\x26quot;option\x26quot;\n              v-if=\x26quot;item.type!=\x27judgement\x27\x26amp;\x26amp;item.type!=\x27Q\x26amp;A\x27\x26quot;item\n              v-for=\x26quot;(item1,index1) in item.selection\x26quot; :key=\x26quot;item1.id\x26quot;\x3e\n          \x3cel-radio v-model=\x26quot;item.sanswer\x26quot; :label=\x26quot;options[index1]\x26quot; :key=\x26quot;index1\x26quot;\x3e\x22{{\x22options[index1]\x22}}\x22、\x22{{\x22item1\x22}}\x22\x3c\/el-radio\x3e\n          \x3c\/span\x3e\n      \x3c\/li\x3e\n    \x3c\/ul\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;div \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22single\x22\x3c\/span\x3e\x26gt;\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3e单选题（只有一个正确答案）\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh4\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    \x26lt;ul\x26gt;\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22marginB10\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22(item,index) in singleQuestions\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item.id\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22question-title\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22index\x2b1\x22}}\x22 、\x22{{\x22item.name\x22}}\x22（）\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22option\x22\x3c\/span\x3e\n              \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item.type!=\x27judgement\x27\x26amp;\x26amp;item.type!=\x27Q\x26amp;A\x27\x22\x3c\/span\x3e\x3cspan class=\x22hljs-attr\x22\x3eitem\x3c\/span\x3e\n              \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22(item1,index1) in item.selection\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item1.id\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-radio\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item.sanswer\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:label\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22options[index1]\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22index1\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22options[index1]\x22}}\x22、\x22{{\x22item1\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-radio\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/div\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22init(){\n  if(this.id == \x27\x27 || !this.id ){\n    this.$router.push({path:\x27forntexamindex\x27});\n    return\n  } else {\n    this.$axios.get(\x27\/api\/getExamInfo\x27,{\n      params:{\n        id: this.id\n      }\n    }).then(response =\x3e {\n      let res = response.data;\n      if(res.status == \x270\x27) {\n        for(let key in this.paperData) {\n          this.paperData[key] = res.result[key];\n        }\n        res.result._questions.forEach(item =\x3e {\n          if(item.type==\x27single\x27){\n            item.sanswer = \x27\x27; \/\/ 重要的在这 给他新增一个属性，用来存答案\n            this.singleQuestions.push(item);\n          } else if(item.type == \x27multi\x27){\n            item.sanswer = []; \/\/ 多选题\n            this.multiQuestions.push(item);\n          } else if(item.type == \x27Q\x26amp;A\x27) {\n            item.sanswer = \x27\x27; \n            this.QAQuestions.push(item);\n          } else if(item.type == \x27judgement\x27){\n            item.sanswer = \x27\x27;\n            this.judgeQuestions.push(item);\n          }\n        })\n      }\n  }).catch(err =\x3e {\n    this.$message.error(err);\n  })\n}\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3einit(){\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id == \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e || !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id ){\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.push({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27forntexamindex\x27\x3c\/span\x3e});\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$axios.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getExamInfo\x27\x3c\/span\x3e,{\n      \x3cspan class=\x22hljs-attr\x22\x3eparams\x3c\/span\x3e:{\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id\n      }\n    }).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e res = response.data;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(res.status == \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.paperData) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.paperData[key] = res.result[key];\n        }\n        res.result._questions.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item.type==\x3cspan class=\x22hljs-string\x22\x3e\x27single\x27\x3c\/span\x3e){\n            item.sanswer = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重要的在这 给他新增一个属性，用来存答案\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.singleQuestions.push(item);\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item.type == \x3cspan class=\x22hljs-string\x22\x3e\x27multi\x27\x3c\/span\x3e){\n            item.sanswer = []; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 多选题\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiQuestions.push(item);\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item.type == \x3cspan class=\x22hljs-string\x22\x3e\x27Q\x26amp;A\x27\x3c\/span\x3e) {\n            item.sanswer = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e; \n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.QAQuestions.push(item);\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item.type == \x3cspan class=\x22hljs-string\x22\x3e\x27judgement\x27\x3c\/span\x3e){\n            item.sanswer = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.judgeQuestions.push(item);\n          }\n        })\n      }\n  }).catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$message.error(err);\n  })\n}\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e后台相关\x3c\/h3\x3e\n\x3ch4\x3e连接数据库\x3c\/h4\x3e\n\x3cp\x3e在server根目录下新建\x3ccode\x3edb.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ db.js\nvar mongoose = require(\x27mongoose\x27);\nvar dbUrl = \x27mongodb:\/\/127.0.0.1:27017\/examSystem\x27;\nvar db = mongoose.connect(dbUrl);\ndb.connection.on(\x27error\x27,function(error) {\n    console.log(\x27数据库链接失败：\x27\x2b error);\n});\ndb.connection.on(\x27connected\x27,function() {\n    console.log(\x27数据库链接成功!\x27);\n});\ndb.connection.on(\x27disconnected\x27,function() {\n    console.log(\x27Mongoose connection disconnected\x27);\n});\n\nmodule.exports = db;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ db.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoose = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongoose\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dbUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27mongodb:\/\/127.0.0.1:27017\/examSystem\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = mongoose.connect(dbUrl);\ndb.connection.on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27数据库链接失败：\x27\x3c\/span\x3e\x2b error);\n});\ndb.connection.on(\x3cspan class=\x22hljs-string\x22\x3e\x27connected\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27数据库链接成功!\x27\x3c\/span\x3e);\n});\ndb.connection.on(\x3cspan class=\x22hljs-string\x22\x3e\x27disconnected\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Mongoose connection disconnected\x27\x3c\/span\x3e);\n});\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = db;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ server\/app.js\n\/\/ 链接数据库\nrequire(\x27.\/db\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ server\/app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 链接数据库\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/db\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e配置seesion\x3c\/h4\x3e\n\x3cp\x3e需要\x3ccode\x3eexpress-session\x3c\/code\x3e 和 \x3ccode\x3ecookie-parser\x3c\/code\x3e插件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app.js\n\/\/ 加载解析session的中间件\n\/\/ session 的 store 有四个常用选项：1）内存 2）cookie 3）缓存 4）数据库\n\/\/ 数据库 session。除非你很熟悉这一块，知道自己要什么，否则还是老老实实用缓存吧 需要用到（connect-mongo插件 line 7）\n\/\/ app.use(sessionParser({ 会在数据库中新建一个session集合存储session\n\/\/     secret: \x27express\x27,\n\/\/     store: new mongoStore({\n\/\/         url:\x27mongodb:\/\/127.0.0.1:27017\/examSystem\x27,\n\/\/         collection:\x27session\x27\n\/\/     })\n\/\/ }));\n\n\/\/ 默认使用内存来存 session，对于开发调试来说很方便\napp.use(sessionParser({\n  secret: \x2712345\x27, \/\/ 建议使用 128 个字符的随机字符串\n  name: \x27userInfo\x27,\n  cookie: { maxAge: 1800000 }, \/\/ 时间可以长点\n  resave:true,\n  rolling:true,\n  saveUninitialized:false\n}));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载解析session的中间件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ session 的 store 有四个常用选项：1）内存 2）cookie 3）缓存 4）数据库\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据库 session。除非你很熟悉这一块，知道自己要什么，否则还是老老实实用缓存吧 需要用到（connect-mongo插件 line 7）\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app.use(sessionParser({ 会在数据库中新建一个session集合存储session\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     secret: \x27express\x27,\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     store: new mongoStore({\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/         url:\x27mongodb:\/\/127.0.0.1:27017\/examSystem\x27,\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/         collection:\x27session\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/     })\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ }));\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认使用内存来存 session，对于开发调试来说很方便\x3c\/span\x3e\napp.use(sessionParser({\n  \x3cspan class=\x22hljs-attr\x22\x3esecret\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2712345\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 建议使用 128 个字符的随机字符串\x3c\/span\x3e\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27userInfo\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ecookie\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3emaxAge\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1800000\x3c\/span\x3e }, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 时间可以长点\x3c\/span\x3e\n  resave:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3erolling\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3esaveUninitialized\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n}));\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e配置后台路由\x3c\/h4\x3e\n\x3cp\x3e默认的使用方式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ appi.js\nvar index = require(\x27.\/routes\/index\x27);\napp.use(\x27\/\x27, index);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ appi.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/index\x27\x3c\/span\x3e);\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, index);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ routes\/index\nvar express = require(\x27express\x27);\nvar router = express.Router();\n\n\/* GET home page. *\/\nrouter.get(\x27\/\x27, function(req, res, next) {\n   res.render(\x27index\x27, { title: \x27Express\x27 });\n});\n\nmodule.exports = router;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ routes\/index\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e router = express.Router();\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/* GET home page. *\/\x3c\/span\x3e\nrouter.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n   res.render(\x3cspan class=\x22hljs-string\x22\x3e\x27index\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Express\x27\x3c\/span\x3e });\n});\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = router;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我之前做的一个电子商城采用的这种方式：\x3ca href=\x22https:\/\/github.com\/FinGet\/Node-vue-mongodb\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub地址\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我的项目中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app.js\nvar indexs = require(\x27.\/routes\/index\x27);\nvar routes = require(\x27.\/routes\/routes\x27);\n\nindexs(app);\nroutes(app);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e indexs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/index\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e routes = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/routes\x27\x3c\/span\x3e);\n\nindexs(app);\nroutes(app);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ routes\/index.js\nmodule.exports = function(app) {\n  app.get(\x27\/api\x27, (req, res) =\x3e {\n    res.render(\x27index\x27, {title: \x27Express\x27});\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ routes\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eapp\x3c\/span\x3e) \x3c\/span\x3e{\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\x27\x3c\/span\x3e, (req, res) =\x26gt; {\n    res.render(\x3cspan class=\x22hljs-string\x22\x3e\x27index\x27\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Express\x27\x3c\/span\x3e});\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e两种方式有什么不同：\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e如果你有多个路由文件 （例如\x3ccode\x3egoods.js\x3c\/code\x3e,\x3ccode\x3eindex.js\x3c\/code\x3e,\x3ccode\x3eusers.js\x3c\/code\x3e……）,你都需要去app.js中引入\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app.js\nvar index = require(\x27.\/routes\/index\x27);\nvar users = require(\x27.\/routes\/users\x27);\nvar goods = require(\x27.\/routes\/goods\x27);\napp.use(\x27\/\x27, index);\napp.use(\x27\/users\x27, users);\napp.use(\x27\/goods\x27, goods);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/index\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e users = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/users\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e goods = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routes\/goods\x27\x3c\/span\x3e);\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, index);\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/users\x27\x3c\/span\x3e, users);\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/goods\x27\x3c\/span\x3e, goods);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在前台请求的时候：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ goods.js\n....\nrouter.get(\x26quot;\/list\x26quot;, function (req, res, next) {\n    ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ goods.js\x3c\/span\x3e\n....\nrouter.get(\x3cspan class=\x22hljs-string\x22\x3e\x22\/list\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n    ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ xxx.vue\n...\nthis.$axios.get(\x27\/goods\/list\x27).then()... \/\/ 不能忘了加上goods，也就是你在app.js中定义的一级路由\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ xxx.vue\x3c\/span\x3e\n...\nthis.$axios.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/goods\/list\x27\x3c\/span\x3e).then()... \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不能忘了加上goods，也就是你在app.js中定义的一级路由\x3c\/span\x3e\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e如果没看懂，可以去\x3ca href=\x22https:\/\/github.com\/FinGet\/Node-vue-mongodb\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGitHub\x3c\/a\x3e上看一下实际代码，有助于理解\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e第二种方式\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e不用在app.js中引入各个路由文件，一个\x3ccode\x3eroute.js\x3c\/code\x3e就搞定了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ route.js\nvar Teacher = require(\x27..\/controllers\/teacher\x27),\n    Student = require(\x27..\/controllers\/student\x27);\nmodule.exports = function(app) {\n\n  \/*----------------------教师用户----------------------*\/\n  app.post(\x27\/api\/register\x27,Teacher.register);\n  \/\/ 用户登录\n  app.post(\x27\/api\/login\x27, Teacher.signup);\n  \/\/ 登出\n  app.post(\x26quot;\/api\/logout\x26quot;, Teacher.signout);\n  \/\/ 获取用户信息\n  app.post(\x27\/api\/getUserInfo\x27,Teacher.getUserInfo);\n  \/\/ 修改用户信息\n  app.post(\x27\/api\/updateUser\x27, Teacher.updateUser);\n  \/\/ 获取试卷(分页、模糊查询)\n  app.get(\x27\/api\/mypapers\x27, Teacher.getPapers);\n  \/\/ 保存试卷\n  app.post(\x27\/api\/savePaper\x27, Teacher.savePaper);\n  \/\/ 发布试卷\n  app.post(\x27\/api\/publishPaper\x27, Teacher.publishPaper);\n  \/\/ 删除试卷\n  app.post(\x27\/api\/deletePaper\x27, Teacher.deletePaper);\n  \/\/ 查找试卷\n  app.post(\x27\/api\/findPaper\x27, Teacher.findPaper);\n  \/\/ 修改试题\n  app.post(\x27\/api\/updateQuestion\x27, Teacher.updateQuestion);\n  \/\/ 修改试卷\n  app.post(\x27\/api\/updatePaper\x27, Teacher.updatePaper);\n  \/\/ 获取所有的考试\n  app.get(\x27\/api\/getAllExams\x27,Teacher.getAllExams);\n  \/\/ 获取已考试的试卷\n  app.get(\x27\/api\/getExams\x27,Teacher.getExams);\n  \/\/ 获取学生考试成绩\n  app.get(\x27\/api\/getScores\x27, Teacher.getScores);\n  \/\/ 批阅试卷\n  app.get(\x27\/api\/getCheckPapers\x27, Teacher.getCheckPapers);\n  \/\/ 打分提交\n  app.get(\x27\/api\/submitScore\x27, Teacher.submitScore);\n\n\n  \/*----------------------学生用户----------------------*\/\n  \/\/ 学生注册\n  app.post(\x27\/api\/studentregister\x27,Student.register);\n  \/\/ 学生登录\n  app.post(\x27\/api\/studentlogin\x27, Student.signup);\n  \/\/ 学生登出\n  app.post(\x27\/api\/studentlogout\x27, Student.signout);\n  \/\/ 修改信息\n  app.post(\x27\/api\/updateStudent\x27, Student.updateStudent);\n  \/\/ 获取考试记录\n  app.get(\x27\/api\/getexamlogs\x27, Student.getExamLogs);\n  \/\/ 获取个人信息\n  app.get(\x27\/api\/studentinfo\x27, Student.getInfo);\n  \/\/ 获取考试信息\n  app.get(\x27\/api\/getExamsPaper\x27,Student.getExams);\n  \/\/ 获取试卷信息\n  app.get(\x27\/api\/getExamInfo\x27,Student.getExamInfo);\n  \/\/ 提交考试信息\n  app.post(\x27\/api\/submitExam\x27,Student.submitExam);\n\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ route.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Teacher = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/controllers\/teacher\x27\x3c\/span\x3e),\n    Student = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/controllers\/student\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eapp\x3c\/span\x3e) \x3c\/span\x3e{\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*----------------------教师用户----------------------*\/\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/register\x27\x3c\/span\x3e,Teacher.register);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用户登录\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/login\x27\x3c\/span\x3e, Teacher.signup);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 登出\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x22\/api\/logout\x22\x3c\/span\x3e, Teacher.signout);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取用户信息\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getUserInfo\x27\x3c\/span\x3e,Teacher.getUserInfo);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改用户信息\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/updateUser\x27\x3c\/span\x3e, Teacher.updateUser);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取试卷(分页、模糊查询)\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/mypapers\x27\x3c\/span\x3e, Teacher.getPapers);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 保存试卷\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/savePaper\x27\x3c\/span\x3e, Teacher.savePaper);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发布试卷\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/publishPaper\x27\x3c\/span\x3e, Teacher.publishPaper);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除试卷\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/deletePaper\x27\x3c\/span\x3e, Teacher.deletePaper);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 查找试卷\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/findPaper\x27\x3c\/span\x3e, Teacher.findPaper);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改试题\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/updateQuestion\x27\x3c\/span\x3e, Teacher.updateQuestion);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改试卷\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/updatePaper\x27\x3c\/span\x3e, Teacher.updatePaper);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取所有的考试\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getAllExams\x27\x3c\/span\x3e,Teacher.getAllExams);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取已考试的试卷\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getExams\x27\x3c\/span\x3e,Teacher.getExams);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取学生考试成绩\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getScores\x27\x3c\/span\x3e, Teacher.getScores);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 批阅试卷\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getCheckPapers\x27\x3c\/span\x3e, Teacher.getCheckPapers);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打分提交\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/submitScore\x27\x3c\/span\x3e, Teacher.submitScore);\n\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*----------------------学生用户----------------------*\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 学生注册\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/studentregister\x27\x3c\/span\x3e,Student.register);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 学生登录\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/studentlogin\x27\x3c\/span\x3e, Student.signup);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 学生登出\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/studentlogout\x27\x3c\/span\x3e, Student.signout);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改信息\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/updateStudent\x27\x3c\/span\x3e, Student.updateStudent);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取考试记录\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getexamlogs\x27\x3c\/span\x3e, Student.getExamLogs);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取个人信息\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/studentinfo\x27\x3c\/span\x3e, Student.getInfo);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取考试信息\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getExamsPaper\x27\x3c\/span\x3e,Student.getExams);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取试卷信息\x3c\/span\x3e\n  app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getExamInfo\x27\x3c\/span\x3e,Student.getExamInfo);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提交考试信息\x3c\/span\x3e\n  app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/submitExam\x27\x3c\/span\x3e,Student.submitExam);\n\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，我将每个路由的方法都是提取出去的，这样可以避免这个文件不会有太多的代码，可读性降低，将代码分离开来，也有助于维护\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737446?w=864\x26amp;h=601\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737446?w=864\x26amp;h=601\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在使用的时候：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ xxx.vue\n...\nthis.$axios.get(\x27\/api\/getexamlogs\x27).then()... \n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ xxx.vue\x3c\/span\x3e\n...\nthis.$axios.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/getexamlogs\x27\x3c\/span\x3e).then()... \n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e数据库的相关操作\x3c\/h4\x3e\n\x3cp\x3e我这次用mongodb，主要是因为可以用js来操作，对我来说比较简单，mysql我不会用。在实际开发过程中发现，考试系统各个表（集合）都是需要关联，mongodb这种非关系型数据库，做起来反而麻烦了不少。在此将一些数据库增删改查的方法回顾一下。\x3c\/p\x3e\n\x3ch5\x3e初始化一条数据\x3c\/h5\x3e\n\x3cblockquote\x3e如果对mongodb，mongoose没有基础的了解，建议看一看\x3ca href=\x22https:\/\/www.villainhr.com\/page\/2016\/05\/11\/%E6%B7%B1%E5%85%A5%E6%B5%85%E5%87%BAmongoose\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emongoose深入浅出\x3c\/a\x3e ，\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000014736907\x22\x3emongoose基础操作\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ controllers\/student.js\nconst Student = require(\x27..\/model\/student\x27);\nvar mongoose = require(\x27mongoose\x27);\nvar Schema = mongoose.Schema;\n\nvar student = new Student({\n    userId: 12001, \/\/ 学号\n    userName: \x27张三\x27, \/\/ 用户名\n    passWord: \x27123321\x27, \/\/ 密码\n    grade: 3, \/\/ 年级 1~6 分别代表一年级到六年级\n    class: 3, \/\/ 班级\n    exams:[{ \/\/ 参加的考试\n      _paper:Schema.Types.ObjectId(\x26quot;5a40a4ef485a584d44764ff1\x26quot;), \/\/ 这个是_id，在mongodb自动生成的，从数据库复制过来，初始化一个学生，应该是没有参加考试的\n      score:100,\n      date: new Date(),\n      answers: []\n    }]\n})\n\/\/ 保存\nstudent.save((err,doc) =\x3e {\n  console.log(err);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ controllers\/student.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Student = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/model\/student\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoose = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongoose\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Schema = mongoose.Schema;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e student = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Student({\n    \x3cspan class=\x22hljs-attr\x22\x3euserId\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e12001\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 学号\x3c\/span\x3e\n    userName: \x3cspan class=\x22hljs-string\x22\x3e\x27张三\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用户名\x3c\/span\x3e\n    passWord: \x3cspan class=\x22hljs-string\x22\x3e\x27123321\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 密码\x3c\/span\x3e\n    grade: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 年级 1~6 分别代表一年级到六年级\x3c\/span\x3e\n    \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e: 3, \/\/ 班级\n    \x3cspan class=\x22hljs-title\x22\x3eexams\x3c\/span\x3e:[\x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 参加的考试\x3c\/span\x3e\n      _paper:Schema.Types.ObjectId(\x3cspan class=\x22hljs-string\x22\x3e\x225a40a4ef485a584d44764ff1\x22\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个是_id，在mongodb自动生成的，从数据库复制过来，初始化一个学生，应该是没有参加考试的\x3c\/span\x3e\n      score:\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3edate\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e(),\n      \x3cspan class=\x22hljs-attr\x22\x3eanswers\x3c\/span\x3e: []\n    }]\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 保存\x3c\/span\x3e\nstudent.save(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr,doc\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e用户注册，其实就是创建一条数据\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22exports.register = function (req,res) {\n  let userInfo = req.body.userInfo; \/\/ req.body 获取post方式传递的参数\n  Student.findOne(userInfo,(err,doc) =\x3e {\n    if(err) {\n      ...\n     } else {\n       if(doc) {\n         res.json({\n           status:\x272\x27,\n           msg: \x27用户已存在\x27\n         })\n        } else {\n          userInfo.exams = [];\n          \/\/ userInfo 是个对象，包含了用户相关的信息\n          Student.create(userInfo,(err1,doc1) =\x3e {\n          if(err1) {\n            ...\n          }else {\n            if(doc1) {\n              ...\n            } else {\n             ...\n          }\n        }\n      })\n     }\n    }\n   })\n };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexports.register = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq,res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userInfo = req.body.userInfo; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ req.body 获取post方式传递的参数\x3c\/span\x3e\n  Student.findOne(userInfo,(err,doc) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      ...\n     } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n       \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc) {\n         res.json({\n           \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x272\x27\x3c\/span\x3e,\n           \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27用户已存在\x27\x3c\/span\x3e\n         })\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          userInfo.exams = [];\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ userInfo 是个对象，包含了用户相关的信息\x3c\/span\x3e\n          Student.create(userInfo,(err1,doc1) =\x26gt; {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err1) {\n            ...\n          }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc1) {\n              ...\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n             ...\n          }\n        }\n      })\n     }\n    }\n   })\n };\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e获取考试记录,子文档数组分页模糊查询\x3c\/h5\x3e\n\x3cp\x3e如下图是我的\x3ccode\x3estudent\x3c\/code\x3e集合:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737447?w=758\x26amp;h=440\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737447?w=758\x26amp;h=440\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e在该集合中，学生参加过的考试记录，存在\x3ccode\x3eexams\x3c\/code\x3e数组中，当想实现分页查询几条数据的时候，需要用到\x3ccode\x3e$slice\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3ccode\x3e$slice:[start,size]\x3c\/code\x3e  第一个参数表示，数组开始的下标，第二个表示截取的数量\x3cbr\x3e在后台接收到前台传递的\x3ccode\x3epageSize\x3c\/code\x3e和\x3ccode\x3epageNumber\x3c\/code\x3e时，需要计算出当前需要截取的下标，即\x3ccode\x3elet  skip = (pageNumber-1)*pageSize\x3c\/code\x3e\n\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22exports.getExamLogs = function (req, res){\n  let userName =req.session.userName;\n  let name = req.param(\x27name\x27);\n    \/\/ 通过req.param()取到的值都是字符串，而limit()需要一个数字作为参数\n  let  pageSize = parseInt(req.param(\x27pageSize\x27));\n  let  pageNumber = parseInt(req.param(\x27pageNumber\x27));\n  let  skip = (pageNumber-1)*pageSize; \/\/ 跳过几条\n  let  reg = new RegExp(name,\x27i\x27); \/\/ 在nodejs中，必须要使用RegExp，来构建正则表达式对象。\n  Student.findOne({\x26quot;userName\x26quot;:userName},{\x26quot;exams\x26quot;:{$slice:[skip,pageSize]\x22}}\x22).populate({path:\x27exams._paper\x27,match:{name: reg\x22}}\x22)\n    .exec((err,doc) =\x3e {\n      if (err) {\n        ...\n      } else {\n        if (doc) {\n          res.json({\n            status: \x270\x27,\n            msg:\x27success\x27,\n            result:doc,\n            count: doc.exams.length?doc.exams.length:0\n          })\n        } else {\n          ...\n        }\n      }\n    })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexports.getExamLogs = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e)\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userName =req.session.userName;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e name = req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过req.param()取到的值都是字符串，而limit()需要一个数字作为参数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e  pageSize = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27pageSize\x27\x3c\/span\x3e));\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e  pageNumber = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27pageNumber\x27\x3c\/span\x3e));\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e  skip = (pageNumber\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e)*pageSize; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 跳过几条\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e  reg = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(name,\x3cspan class=\x22hljs-string\x22\x3e\x27i\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在nodejs中，必须要使用RegExp，来构建正则表达式对象。\x3c\/span\x3e\n  Student.findOne({\x3cspan class=\x22hljs-string\x22\x3e\x22userName\x22\x3c\/span\x3e:userName},{\x3cspan class=\x22hljs-string\x22\x3e\x22exams\x22\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3e$slice\x3c\/span\x3e:[skip,pageSize]\x22}}\x22).populate({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27exams._paper\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ematch\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: reg\x22}}\x22)\n    .exec(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr,doc\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n        ...\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc) {\n          res.json({\n            \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e:doc,\n            \x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: doc.exams.length?doc.exams.length:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n          })\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          ...\n        }\n      }\n    })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e另一种分页模糊查询--在文档之间（document）\x3c\/h5\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737448?w=723\x26amp;h=576\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737448?w=723\x26amp;h=576\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e每个试卷都是独立的文档，通过他们的名称\x3ccode\x3ename\x3c\/code\x3e实现模糊查询\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 获取考试信息\nexports.getExams = function (req,res) {\n  let userName =req.session.userName;\n  let name = req.param(\x27name\x27);\n    \/\/ 通过req.param()取到的值都是字符串，而limit()需要一个数字作为参数\n  let  pageSize = parseInt(req.param(\x27pageSize\x27));\n  let  pageNumber = parseInt(req.param(\x27pageNumber\x27));\n  let skip = (pageNumber-1)*pageSize; \/\/ 跳过几条\n  let reg = new RegExp(name,\x27i\x27); \/\/ 在nodejs中，必须要使用RegExp，来构建正则表达式对象。\n  Student.findOne({\x26quot;userName\x26quot;:userName},(err,doc)=\x3e{\n    if(err) {\n      res.json({\n        status: \x271\x27,\n        msg: err.message\n      })\n    } else {\n      if(doc) {\n      \/\/ 关键在这里\n        Paper.find({startTime:{$exists:true},name:reg}).skip(skip).limit(pageSize).populate({path:\x27_questions\x27}).exec((err1,doc1)=\x3e{\n        ....  \n  })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取考试信息\x3c\/span\x3e\nexports.getExams = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq,res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userName =req.session.userName;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e name = req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过req.param()取到的值都是字符串，而limit()需要一个数字作为参数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e  pageSize = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27pageSize\x27\x3c\/span\x3e));\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e  pageNumber = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27pageNumber\x27\x3c\/span\x3e));\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e skip = (pageNumber\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e)*pageSize; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 跳过几条\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e reg = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(name,\x3cspan class=\x22hljs-string\x22\x3e\x27i\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在nodejs中，必须要使用RegExp，来构建正则表达式对象。\x3c\/span\x3e\n  Student.findOne({\x3cspan class=\x22hljs-string\x22\x3e\x22userName\x22\x3c\/span\x3e:userName},(err,doc)=\x26gt;{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      res.json({\n        \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: err.message\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关键在这里\x3c\/span\x3e\n        Paper.find({\x3cspan class=\x22hljs-attr\x22\x3estartTime\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3e$exists\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e},\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:reg}).skip(skip).limit(pageSize).populate({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27_questions\x27\x3c\/span\x3e}).exec(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr1,doc1\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{\n        ....  \n  })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e还有一种模糊分页查询--查询关联文档再模糊分页查询\x3c\/h5\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737449?w=699\x26amp;h=236\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737449?w=699\x26amp;h=236\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e先通过\x3ccode\x3epopulate\x3c\/code\x3e查询除关联文档，在模糊分页查询\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22exports.getPapers = function (req, res) {\n  \/\/ console.log(req.session.userName);\n  let name = req.param(\x27name\x27),\n    \/\/ 通过req.param()取到的值都是字符串，而limit()需要一个数字作为参数\n    pageSize = parseInt(req.param(\x27pageSize\x27)),\n    pageNumber = parseInt(req.param(\x27pageNumber\x27)),\n    userName = req.session.userName;\n  let skip = (pageNumber-1)*pageSize; \/\/ 跳过几条\n  let reg = new RegExp(name,\x27i\x27); \/\/ 在nodejs中，必须要使用RegExp，来构建正则表达式对象。\n  let params = {\n    name: reg\n  };\n  Teacher.findOne({\x27userName\x27:userName}).populate({path:\x27_papers\x27,match:{name: reg},options:{skip:skip,limit:pageSize\x22}}\x22)\n    .exec((err, doc) =\x3e {\n      ....\n    })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexports.getPapers = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(req.session.userName);\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e name = req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27name\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过req.param()取到的值都是字符串，而limit()需要一个数字作为参数\x3c\/span\x3e\n    pageSize = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27pageSize\x27\x3c\/span\x3e)),\n    pageNumber = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27pageNumber\x27\x3c\/span\x3e)),\n    userName = req.session.userName;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e skip = (pageNumber\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e)*pageSize; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 跳过几条\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e reg = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(name,\x3cspan class=\x22hljs-string\x22\x3e\x27i\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在nodejs中，必须要使用RegExp，来构建正则表达式对象。\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e params = {\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: reg\n  };\n  Teacher.findOne({\x3cspan class=\x22hljs-string\x22\x3e\x27userName\x27\x3c\/span\x3e:userName}).populate({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27_papers\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3ematch\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: reg},\x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3eskip\x3c\/span\x3e:skip,\x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e:pageSize\x22}}\x22)\n    .exec(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, doc\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      ....\n    })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3epopulate\x3c\/h5\x3e\n\x3cp\x3emongodb本来就是非关系型的数据库，但是有很多时候不同的集合直接是需要关联的，这是就用到了mongoose提供的\x3ccode\x3epopulate\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e直接看图，不同集合直接的关联，用的就是\x3ccode\x3e_id\x3c\/code\x3e,比如下图中，学生参加的考试，关联了试卷，试卷里面又关联了题目\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014737450?w=624\x26amp;h=406\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014737450?w=624\x26amp;h=406\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e怎么查询呢：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Student.findOne({}).populate({path:\x27exams._paper\x27}).exec(....)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eStudent.findOne({}).populate({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27exams._paper\x27\x3c\/span\x3e}).exec(....)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更多的可以看看我项目中的实际代码都在\x3ccode\x3eserver\/controllers\x3c\/code\x3e下面\x3c\/p\x3e\n\x3ch5\x3e关联集合的新增\x3c\/h5\x3e\n\x3cp\x3e在系统中，教师可以增加试卷，这个时候我就不知道该怎么保存前台传过来的数据。数据中既有试卷的信息，也有很多题目。题目都属于该试卷，改试卷又属于当前登录系统的老师（即创建试卷的老师）。\x3cbr\x3e怎么才能让试卷、教师、问题关联起来啊，ref存的是_id,然而这些新增的数据，是保存之后才有_id的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22exports.savePaper = function (req, res) {\n  let paperForm = req.body.paperForm;\n  let userName = req.session.userName;\n  if(paperForm == {}){\n    res.json({\n      status:\x275\x27,\n      msg: \x27数据不能为空\x27\n    })\n  }\n  \/\/ 第一步查找当前登录的教师\n  Teacher.findOne({\x26quot;userName\x26quot;: userName}, (err,doc)=\x3e{\n    if (err) {\n      ...\n    } else {\n      if (doc) {\n        let paperData = {\n          name:paperForm.name,\n          totalPoints:paperForm.totalPoints,\n          time:paperForm.time,\n          _teacher: doc._id, \/\/ 这里就可以拿到教师的_id\n          _questions: [],\n          examnum:0\n        }\n        \/\/ 第二步创建试卷\n        Paper.create(paperData,function (err1,doc1) {\n          if (err1) {\n            ...\n          } else {\n            if (doc1) {\n              doc._papers.push(doc1._id); \/\/ 教师中添加该试卷的_id\n              doc.save(); \/\/ 很重要 不save则没有数据\n              \n              \/\/ 第三步 创建问题\n              paperForm._questions.forEach(item =\x3e {\n                item._papers = [];\n                item._papers.push(doc1._id); \/\/ 试卷中存入试卷的_id，因为此时已经创建了试卷，所以可以拿到_id\n                item._teacher = doc._id;  \/\/ 试卷中存入教师的_id\n              })\n              Question.create(paperForm._questions,function (err2,doc2) {\n                if (err2) {\n                  ...\n                } else {\n                  if (doc2) {\n                    doc2.forEach(item =\x3e {\n                      doc1._questions.push(item._id); \/\/ 当问题创建成功，则在试卷中存入问题的_id\n                    })\n                    doc1.save();\n                    res.json({\n                      status:\x270\x27,\n                      msg: \x27success\x27\n                    })\n                  } else {\n                    ...\n                  }\n                }\n              })\n            } else {\n              ...\n            }\n          }\n        })\n      }\n      else {\n       ...\n      }\n    }\n  })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexports.savePaper = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e paperForm = req.body.paperForm;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userName = req.session.userName;\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(paperForm == {}){\n    res.json({\n      \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x275\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27数据不能为空\x27\x3c\/span\x3e\n    })\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第一步查找当前登录的教师\x3c\/span\x3e\n  Teacher.findOne({\x3cspan class=\x22hljs-string\x22\x3e\x22userName\x22\x3c\/span\x3e: userName}, (err,doc)=\x26gt;{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n      ...\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e paperData = {\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:paperForm.name,\n          \x3cspan class=\x22hljs-attr\x22\x3etotalPoints\x3c\/span\x3e:paperForm.totalPoints,\n          \x3cspan class=\x22hljs-attr\x22\x3etime\x3c\/span\x3e:paperForm.time,\n          \x3cspan class=\x22hljs-attr\x22\x3e_teacher\x3c\/span\x3e: doc._id, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里就可以拿到教师的_id\x3c\/span\x3e\n          _questions: [],\n          \x3cspan class=\x22hljs-attr\x22\x3eexamnum\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第二步创建试卷\x3c\/span\x3e\n        Paper.create(paperData,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr1,doc1\x3c\/span\x3e) \x3c\/span\x3e{\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err1) {\n            ...\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc1) {\n              doc._papers.push(doc1._id); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 教师中添加该试卷的_id\x3c\/span\x3e\n              doc.save(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 很重要 不save则没有数据\x3c\/span\x3e\n              \n              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第三步 创建问题\x3c\/span\x3e\n              paperForm._questions.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                item._papers = [];\n                item._papers.push(doc1._id); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 试卷中存入试卷的_id，因为此时已经创建了试卷，所以可以拿到_id\x3c\/span\x3e\n                item._teacher = doc._id;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 试卷中存入教师的_id\x3c\/span\x3e\n              })\n              Question.create(paperForm._questions,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr2,doc2\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err2) {\n                  ...\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc2) {\n                    doc2.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                      doc1._questions.push(item._id); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当问题创建成功，则在试卷中存入问题的_id\x3c\/span\x3e\n                    })\n                    doc1.save();\n                    res.json({\n                      \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e,\n                      \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e\n                    })\n                  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                    ...\n                  }\n                }\n              })\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n              ...\n            }\n          }\n        })\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n       ...\n      }\n    }\n  })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e关联集合的删除---删除试卷\x3c\/h5\x3e\n\x3cblockquote\x3e删除某一个试卷，既要删除教师中对应的试卷_id,也要删除问题中对应的试卷_id\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 删除试卷\nexports.deletePaper = function (req, res) {\n  let id = req.body.id;\n  let userName = req.session.userName;\n  \/\/ 第一步 删除教师中的_id _papers是一个数组，所以用到了`$pull`\n  Teacher.update({\x26quot;userName\x26quot;:userName},{\x27$pull\x27:{\x27_papers\x27:{$in:id\x22}}\x22}, (err,doc)=\x3e{\n    if (err) {\n      res.json({\n        status:\x271\x27,\n        msg: err.message\n      })\n    } else {\n      if (doc) {\n        \/\/ 第二步  删除试卷 即 移除一个文档\n        Paper.remove({\x26quot;_id\x26quot;:{$in:id\x22}}\x22,function (err1,doc1){\n          if(err1) {\n            res.json({\n              status:\x271\x27,\n              msg: err1.message\n            })\n          } else {\n            if (doc1) {\n            \/\/ 第三步  updateMany删除多个问题中的_id 这里并没有删除试卷中包含的问题，是为了以后题库做准备\n              Question.updateMany({\x27_papers\x27:{$in:id\x22}}\x22,{\x27$pull\x27:{\x27_papers\x27:{$in:id\x22}}\x22},function (err2,doc2) {\n                if(err2){\n                  ...\n                } else {\n                  if (doc2){\n                    ...\n                  }\n                }\n              })\n            } else {\n              ...\n            }\n          }\n        })\n      } else {\n       ...\n      }\n    }\n  })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除试卷\x3c\/span\x3e\nexports.deletePaper = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e id = req.body.id;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userName = req.session.userName;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第一步 删除教师中的_id _papers是一个数组，所以用到了`$pull`\x3c\/span\x3e\n  Teacher.update({\x3cspan class=\x22hljs-string\x22\x3e\x22userName\x22\x3c\/span\x3e:userName},{\x3cspan class=\x22hljs-string\x22\x3e\x27$pull\x27\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x27_papers\x27\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3e$in\x3c\/span\x3e:id\x22}}\x22}, (err,doc)=\x26gt;{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n      res.json({\n        \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: err.message\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第二步  删除试卷 即 移除一个文档\x3c\/span\x3e\n        Paper.remove({\x3cspan class=\x22hljs-string\x22\x3e\x22_id\x22\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3e$in\x3c\/span\x3e:id\x22}}\x22,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr1,doc1\x3c\/span\x3e)\x3c\/span\x3e{\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err1) {\n            res.json({\n              \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e,\n              \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: err1.message\n            })\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc1) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第三步  updateMany删除多个问题中的_id 这里并没有删除试卷中包含的问题，是为了以后题库做准备\x3c\/span\x3e\n              Question.updateMany({\x3cspan class=\x22hljs-string\x22\x3e\x27_papers\x27\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3e$in\x3c\/span\x3e:id\x22}}\x22,{\x3cspan class=\x22hljs-string\x22\x3e\x27$pull\x27\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x27_papers\x27\x3c\/span\x3e:{\x3cspan class=\x22hljs-attr\x22\x3e$in\x3c\/span\x3e:id\x22}}\x22},\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr2,doc2\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err2){\n                  ...\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc2){\n                    ...\n                  }\n                }\n              })\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n              ...\n            }\n          }\n        })\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n       ...\n      }\n    }\n  })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e关联集合多条数据的更新--修改试卷\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 修改试卷-修改试卷\nexports.updatePaper = function (req,res) {\n  let userName = req.session.userName;\n  let params = req.body.params;\n  let paperParams = { \/\/ 试卷需要更新的字段\n    name: params.name,\n    totalPoints: params.totalPoints,\n    time: params.time\n  }\n  let updateQuestion = []; \/\/ 需要更新的题目\n  let addQuestion = []; \/\/ 需要新增的题目\n  params._questions.forEach(item =\x3e {\n    if(item._id) {  \/\/ 通过判断是否有_id区分已有的或者是新增的\n      updateQuestion.push(item);\n    } else {\n      addQuestion.push(item);\n    }\n  })\n  Teacher.findOne({\x27userName\x27:userName},(err,doc)=\x3e{\n    if (err) {\n      ...\n    } else {\n      if (doc) {\n        Paper.findOneAndUpdate({\x26quot;_id\x26quot;:params._id},paperParams,(err1,doc1) =\x3e {\n          if(err1) {\n            ...\n          }else {\n            if(doc1){\n              updateQuestion.forEach((item,index)=\x3e{ \/\/ 循环更新题目，好像很傻的方法，可能有更好的办法\n                Question.update({\x26quot;_id\x26quot;:item._id},item,(err2,doc2)=\x3e{\n                  if(err2){\n                    res.json({\n                      status:\x271\x27,\n                      msg: err2.message\n                    })\n                  }else {\n                    if(doc2){\n                      if(index == (updateQuestion.length-1)){\n                        if (addQuestion.length\x3e0){\n                          addQuestion.forEach(item =\x3e {\n                            item._papers = [];\n                            item._papers.push(doc1._id);\n                            item._teacher = doc._id;\n                          })\n                          \/\/ 创建新增题目\n                          Question.create(addQuestion,(err3,doc3) =\x3e {\n                            if(err3) {\n                             ...\n                            } else {\n                              if(doc3) {\n                                doc3.forEach(item =\x3e {\n                                  doc1._questions.push(item._id); \/\/ 还要将新增的题目关联到试卷当中\n                                })\n\n                                doc1.save(); \/\/ 很重要 不save则没有数据\n                                res.json({\n                                  status:\x270\x27,\n                                  msg: \x27success\x27\n                                })\n             \/\/ .......................判断太长省略........................\n  })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改试卷-修改试卷\x3c\/span\x3e\nexports.updatePaper = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq,res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userName = req.session.userName;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e params = req.body.params;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e paperParams = { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 试卷需要更新的字段\x3c\/span\x3e\n    name: params.name,\n    \x3cspan class=\x22hljs-attr\x22\x3etotalPoints\x3c\/span\x3e: params.totalPoints,\n    \x3cspan class=\x22hljs-attr\x22\x3etime\x3c\/span\x3e: params.time\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e updateQuestion = []; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 需要更新的题目\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e addQuestion = []; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 需要新增的题目\x3c\/span\x3e\n  params._questions.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(item._id) {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过判断是否有_id区分已有的或者是新增的\x3c\/span\x3e\n      updateQuestion.push(item);\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      addQuestion.push(item);\n    }\n  })\n  Teacher.findOne({\x3cspan class=\x22hljs-string\x22\x3e\x27userName\x27\x3c\/span\x3e:userName},(err,doc)=\x26gt;{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n      ...\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (doc) {\n        Paper.findOneAndUpdate({\x3cspan class=\x22hljs-string\x22\x3e\x22_id\x22\x3c\/span\x3e:params._id},paperParams,(err1,doc1) =\x26gt; {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err1) {\n            ...\n          }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc1){\n              updateQuestion.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem,index\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 循环更新题目，好像很傻的方法，可能有更好的办法\x3c\/span\x3e\n                Question.update({\x3cspan class=\x22hljs-string\x22\x3e\x22_id\x22\x3c\/span\x3e:item._id},item,(err2,doc2)=\x26gt;{\n                  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err2){\n                    res.json({\n                      \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e,\n                      \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: err2.message\n                    })\n                  }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc2){\n                      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(index == (updateQuestion.length\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e)){\n                        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (addQuestion.length\x26gt;\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e){\n                          addQuestion.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                            item._papers = [];\n                            item._papers.push(doc1._id);\n                            item._teacher = doc._id;\n                          })\n                          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建新增题目\x3c\/span\x3e\n                          Question.create(addQuestion,(err3,doc3) =\x26gt; {\n                            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err3) {\n                             ...\n                            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                              \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc3) {\n                                doc3.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                                  doc1._questions.push(item._id); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 还要将新增的题目关联到试卷当中\x3c\/span\x3e\n                                })\n\n                                doc1.save(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 很重要 不save则没有数据\x3c\/span\x3e\n                                res.json({\n                                  \x3cspan class=\x22hljs-attr\x22\x3estatus\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e,\n                                  \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27success\x27\x3c\/span\x3e\n                                })\n             \x3cspan class=\x22hljs-comment\x22\x3e\/\/ .......................判断太长省略........................\x3c\/span\x3e\n  })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e更新子文档数组--阅卷打分\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 打分提交\nexports.submitScore = function (req, res) {\n  let name = req.param(\x27userName\x27),\n    date = req.param(\x27date\x27),\n    score = req.param(\x27score\x27) - 0,\n    userName = req.session.userName;\n  Teacher.findOne({\x27userName\x27:userName},(err,doc) =\x3e {\n    if(err) {\n      ...\n    } else {\n      if(doc) {\n        Student.update({\x26quot;userName\x26quot;:name,\x26quot;exams.date\x26quot;:date},{$set:{\x26quot;exams.$.score\x26quot;:score,\x26quot;exams.$.isSure\x26quot;:true\x22}}\x22,(err1, doc1) =\x3e {\n          if(err1) {\n            ...\n          } else {\n            if(doc1) {\n              ...\n            } else {\n              ...\n            }\n          }\n        })\n      } else {\n        ...\n      }\n    }\n  })\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打分提交\x3c\/span\x3e\nexports.submitScore = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e name = req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27userName\x27\x3c\/span\x3e),\n    date = req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27date\x27\x3c\/span\x3e),\n    score = req.param(\x3cspan class=\x22hljs-string\x22\x3e\x27score\x27\x3c\/span\x3e) - \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    userName = req.session.userName;\n  Teacher.findOne({\x3cspan class=\x22hljs-string\x22\x3e\x27userName\x27\x3c\/span\x3e:userName},(err,doc) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) {\n      ...\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc) {\n        Student.update({\x3cspan class=\x22hljs-string\x22\x3e\x22userName\x22\x3c\/span\x3e:name,\x3cspan class=\x22hljs-string\x22\x3e\x22exams.date\x22\x3c\/span\x3e:date},{\x3cspan class=\x22hljs-attr\x22\x3e$set\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x22exams.$.score\x22\x3c\/span\x3e:score,\x3cspan class=\x22hljs-string\x22\x3e\x22exams.$.isSure\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x22}}\x22,(err1, doc1) =\x26gt; {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err1) {\n            ...\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(doc1) {\n              ...\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n              ...\n            }\n          }\n        })\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        ...\n      }\n    }\n  })\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3emd5加密\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/student.js\nconst crypto = require(\x27crypto\x27);\n\nlet mdHash = function(data){\n  \/\/ hash 的定义要写在这个方法内，不然会报错Digest already called ****\n  const hash = crypto.createHash(\x27md5\x27);\n  return hash.update(data).digest(\x27hex\x27);\n}\n\n\/\/ 使用\n\/\/注册\nexports.register = function (req,res) {\n    let userInfo = req.body.userInfo;\n    获取到前台传过来的密码，先加密再存储\n    userInfo.passWord = mdHash(userInfo.passWord);\n    ...\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/student.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e crypto = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27crypto\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mdHash = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e)\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ hash 的定义要写在这个方法内，不然会报错Digest already called ****\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e hash = crypto.createHash(\x3cspan class=\x22hljs-string\x22\x3e\x27md5\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e hash.update(data).digest(\x3cspan class=\x22hljs-string\x22\x3e\x27hex\x27\x3c\/span\x3e);\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/注册\x3c\/span\x3e\nexports.register = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq,res\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userInfo = req.body.userInfo;\n    获取到前台传过来的密码，先加密再存储\n    userInfo.passWord = mdHash(userInfo.passWord);\n    ...\n\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>在线考试系统（vue2 + elementui + express4 + MongoDB）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014737438">https://segmentfault.com/a/1190000014737438</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/2v66gs6dz1s/" target="_blank">https://alili.tech/archive/2v66gs6dz1s/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>