<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="编写高性能js注意点"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>编写高性能js注意点 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/2ze2p5g1daq/",
				"appid": "1613049289050283", 
				"title": "编写高性能js注意点 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-27T02:30:13"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/kz60duc5xtg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/dncz7gyulud/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&text=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&text=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&title=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&is_video=false&description=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&title=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&title=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&title=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f2ze2p5g1daq%2f&title=%e7%bc%96%e5%86%99%e9%ab%98%e6%80%a7%e8%83%bdjs%e6%b3%a8%e6%84%8f%e7%82%b9"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">编写高性能js注意点</h1><div class="meta"><div class="postdate"><time datetime="2018-12-27" itemprop="datePublished">2018-12-27</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch5\x3e该文章以收录： \x3ca href=\x22http:\/\/webxiaoma.com\/blogs\/2017\/09\/16\/js-log\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《JavaScript深入探索之路》\x3c\/a\x3e\n\x3c\/h5\x3e\n\x3chr\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e本文的一些注意的是我以前看书籍总结的，我们一般人写项目时，对我们的影响并不是很大，有时完全可以忽略，但是我们知道这些总不是什么坏处。\x3c\/p\x3e\n\x3cp\x3ejs这个大众语言我想，很多人多知道，它入门和简单，可是想要深入了解还是要有一定的水平、 的，同样的效果虽然都可以写出来，但还是性能和可维护性却有很大差别。下来我们就来总结一下书写高质量js代码的一些注意点。\x3c\/p\x3e\n\x3cp\x3e代码维护是高成本的，如果我们在开发代码时，不注重代码的规范，可读性和可维护性，那么将来带给我们的将是更大的开支。如果说你是给公司干活，自己写完就不用管了，这样的思想很危险。不但对他人读取你代码时带来困扰，同时也是限制自己发展的一个障碍。代码终究是要给人去阅读的。我们整个团队在书写代码时应该劲量做到：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e可读的\x3c\/li\x3e\n\x3cli\x3e一致的\x3c\/li\x3e\n\x3cli\x3e可预测的\x3c\/li\x3e\n\x3cli\x3e看上去就像是同一个人写的\x3c\/li\x3e\n\x3cli\x3e已记录\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e执行与加载\x3c\/h2\x3e\n\x3cp\x3e管理浏览器中的脚本 JavaScript 代码是个棘手的问题，因为代码执行过程会阻塞浏览器的其他进程，比如用户界面绘制，每次遇到\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e标签，页面都必须停下来等待代码下载(如果是外链文件)并执行，然后继续处理其他部分，尽管如此，还是有几种方法能减少\x3ccode\x3ejavascript \x3c\/code\x3e对性能的影响。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x26lt;\/body\x26gt;闭合标签之前，将所有的\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e标签放到页面底部，这确保在脚本执行前页面已加载完成了渲染。\x3c\/li\x3e\n\x3cli\x3e合并脚本，页面中的\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e 标签越少，加载也就也快，响应也更迅速。无论外链文件还是内嵌脚本都是如此\x3c\/li\x3e\n\x3cli\x3e有多种无阻塞下载JavaScript方法：\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cul\x3e\x3cli\x3e使用\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e标签的defer属性（H5提供一个新属性async）\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3edefer和async的相同点是采用并行下载，在下载过程中不会产生阻塞。区别在于执行时机，async是加载完成后自动执行，而defer需要等待页面完成后执行。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript type=\x26quot;text\/javascript\x26quot; defer\x3e\x3c\/script\x3e\n\x3cscript type=\x26quot;text\/javascript\x26quot; async\x3e\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edefer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3easync\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e使用动态创建\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e元素来下载并执行代码\x3cbr\x3e   使用动态创建\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e元素不会阻塞页面的其他进程，这样我们可以将动态创建的\x3ccode\x3e\x26lt;script\x26gt;\x3c\/code\x3e放到页面的 \x3ccode\x3e\x26lt;head\x26gt;\x3c\/code\x3e区域。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function(url){\n    var script = document.creatElement(\x27script\x27);\n    script.type = \x26quot;text\/javascript\x26quot;;\n    script.src = url;\n    document.getElementsByTagName(\x27head\x27)[0].appendChild(script);\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e script = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.creatElement(\x3cspan class=\x22hljs-string\x22\x3e\x27script\x27\x3c\/span\x3e);\n    script.type = \x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e;\n    script.src = \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27head\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].appendChild(script);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们什么时候知道脚本已经加载完成呢？Firefox，Opera,Chrome和safari3为我们提供了一个\x3ccode\x3eonload\x3c\/code\x3e事件来监听，而IE 为我们提供了\x3ccode\x3eonreadystatechange\x3c\/code\x3e 事件并根据\x3ccode\x3ereadyState属性来进行判断\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e通过上面的方法，我们可以极大提高那些需要使用大量的\x3ccode\x3eJavaScript\x3c\/code\x3e 的 web应用的实际性能\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e变量处理\x3c\/h2\x3e\n\x3cp\x3e我们都知道，JavaScript通过函数管理作用域。在函数内部声明的变量只在这个函数内部，函数外面不可用。另一方面，全局变量就是在任何函数外面声明的或是未声明直接简单使用的。我们应该尽量的减少全局变量，这样避免全局变量过多而造成变量命名冲突，同时又占用内存。\x3c\/p\x3e\n\x3cp\x3e声明变量是我们尽量用\x3ccode\x3evar\x3c\/code\x3e去声明\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function fun(){\n    a = 1; \/\/ 这样是不推荐的，因为a是隐式的全局变量\n    var b = 2; \/\/ 这样是推荐的\n    var c = d = 5 \/\/ 这样也是不推荐的，因为d是隐式的全局变量\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3efunction \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3efun\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这样是不推荐的，因为a是隐式的全局变量\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这样是推荐的\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e c = d = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这样也是不推荐的，因为d是隐式的全局变量\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e减少全局变量我们还可以使用立即执行函数，下来我们也会有章节去详细的讲解\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function(){\n    var a = 3;\n    var b = 4;\n})()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n})()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外我们应该知道变量提升原则，这个在后面的章节中我们还会详细的讲解我们在写一些变量时，可以这样去写。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function(){\n    var a,\n        b,\n        c;\n\n    a = 1;\n    b = 2;\n    c = 3;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3efunction(){\n    var a,\n        \x3cspan class=\x22hljs-keyword\x22\x3eb,\n\x3c\/span\x3e        c\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n    a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eb \x3c\/span\x3e= \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    c = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们把常用的变量写到最上面，可以进行注释，这样更有利于维护我们的代码,同时防止变量在定义之前使用的逻辑错误。\x3c\/p\x3e\n\x3ch4\x3eDOM操作的注意点\x3c\/h4\x3e\n\x3cp\x3e脚本进行DOM的操作的代价是很昂贵的。它是富Web应用中最常见的性能瓶颈。浏览器中通常会把DOM 和 JavaScript（ECMAScript） 独立实现。我们每一次用js去操作DOM都会产生性能消耗，所以我们尽可能小的去处理DOM，这也是现在MVVM和MVC框架流行的一部分原因。我们在处理DOM时尽可能这样做。\x3c\/p\x3e\n\x3cp\x3e1.最小化DOM访问次数，尽可能在JavaScript端处理\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var ul = document.getElementById(\x26quot;ul\x26quot;);\n var a = \x26quot;\x26quot;;\n for(var i=0;i\x3c10;i\x2b\x2b){\n    a \x2b= \x26quot;\x3cli\x3ei\x3c\/li\x3e\x26quot;;\n }\n ul.innerHTML = a;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ul = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22ul\x22\x3c\/span\x3e);\n \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e;\n \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;i\x2b\x2b){\n    a \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x22\x26lt;li\x26gt;i\x26lt;\/li\x26gt;\x22\x3c\/span\x3e;\n }\n ul.innerHTML = a;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e将要添加的标签存储在变量a中，一次性加入ul中，这样只访问一次dom,降低了性能消耗。\x3c\/p\x3e\n\x3cp\x3e2.如果需要多次访问某个DOM节点，请使用局部变量存储它的引用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var doc = document; \/\/ 存储document\ndoc.getElementById(\x26quot;div\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ceylon\x22\x3e\x3ccode\x3evar \x3cspan class=\x22hljs-meta\x22\x3edoc\x3c\/span\x3e = document; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 存储document\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3edoc\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.小心处理HTML集合，因为它实时连系着底层文档，把集合的长度缓存到一个变量中，并在迭代中使用它。如果需要经常操作集合，建议把它拷贝到一个数组中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var divList = document.getElementsByTagName(\x26quot;div\x26quot;);\n\nfor(var i = 0,len = divList.length; i \x3c len; i\x2b\x2b){\n    \n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs go\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e divList = document.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3elen\x3c\/span\x3e = divList.length; i \x26lt; \x3cspan class=\x22hljs-built_in\x22\x3elen\x3c\/span\x3e; i\x2b\x2b){\n    \n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里我们将\x3ccode\x3edivList\x3c\/code\x3e的长度去存储在变量 len中，而不像下面这样每次循环都要读取一遍长度。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 避免使用的例子\nvar divList = document.getElementsByTagName(\x26quot;div\x26quot;);\n\nfor(var i = 0; i \x3c divList.length; i\x2b\x2b){\n    \n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 避免使用的例子\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e divList = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; divList.length; i\x2b\x2b){\n    \n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e4.如果可能的话，使用速度更快的API，比如\x3ccode\x3equerySelectorAll()\x3c\/code\x3e 和 \x3ccode\x3efirstElementChild\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e5.要留意重绘和重排；批量修改样式时，\x27离线\x27操作DOM树，使用缓存、并减少访问布局信息的次数\x3cbr\x3e浏览器下载完页面中的所有组件之后会解析并生成两个内部数据结构\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eDOM树：\x3c\/strong\x3e 表示页面结构\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e渲染树：\x3c\/strong\x3e 表示DOM节点如何显示\x3c\/p\x3e\n\x3cp\x3e当DOM的变化影响了元素的几何属性时(宽高)—— 比如改变框宽度或给段落增加文字，导致行数增加，浏览器需要重新计算元素的几何属性，同样其他元素的几何属性和位置也会因此受到影响，浏览器会是渲染树中受到影响的部分失效，并重新构造渲染树。这一过程称为 “重排(reflow)”。完成重排后，浏览器会重新绘制影响的部分到屏幕中，该过程称为 “重绘”。\x3c\/p\x3e\n\x3cp\x3e那么我们该怎么减少重排和重绘\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e样式统一处理\x3cbr\x3e  我们在改变一个元素样式时，可以统一处理\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \/\/这种写法不推荐\n  var el = document.getElementById(\x26quot;div\x26quot;);\n  el.style.width = \x27100px\x27;\n  el.style.height = \x27100px\x27;\n  el.style.padding = \x2710px\x27;\n\n \/\/这种写法推荐\n  var el = document.getElementById(\x26quot;div\x26quot;);\n  el.style.cssText = \x26quot;width:100px;height:100px;padding:5px;\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/这种写法不推荐\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e el = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\n  el.style.width = \x3cspan class=\x22hljs-string\x22\x3e\x27100px\x27\x3c\/span\x3e;\n  el.style.height = \x3cspan class=\x22hljs-string\x22\x3e\x27100px\x27\x3c\/span\x3e;\n  el.style.padding = \x3cspan class=\x22hljs-string\x22\x3e\x2710px\x27\x3c\/span\x3e;\n\n \x3cspan class=\x22hljs-comment\x22\x3e\/\/这种写法推荐\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e el = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\n  el.style.cssText = \x3cspan class=\x22hljs-string\x22\x3e\x22width:100px;height:100px;padding:5px;\x22\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下边的方法很明显只进行了一次重排，而上边的重排了三次。使用\x3ccode\x3ecssText\x3c\/code\x3e时会覆盖前边的style样式，我们可以这样做\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 el.style.cssText \x2b= \x26quot;width:100px;height:100px;padding:5px;\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e el.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.cssText \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x22width:100px;height:100px;padding:5px;\x22\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外我们还可以将改变的样式写在css样式表中，通过修改class来改变其样式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  var el = document.getElementById(\x26quot;div\x26quot;);\n  el.className = \x26quot;active\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs abnf\x22\x3e\x3ccode\x3e  var el = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  el.className = \x3cspan class=\x22hljs-string\x22\x3e\x22active\x22\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e脱离文档流修改DOM\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e脱离文档修改DOM的步骤就是\x3c\/p\x3e\n\x3cp\x3e使元素脱离文档流\x3cbr\x3e  对其应用多重改变\x3cbr\x3e  把元素带回文档中\x3c\/p\x3e\n\x3cp\x3e这里我有三种方法：\x3c\/p\x3e\n\x3cp\x3e(1) 第一种：隐藏元素，应用修改，重新显示\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  var el = document.getElementById(\x26quot;div\x26quot;);\n  el.style.display = \x26quot;none\x26quot;;\n  el.style.width = \x27100px\x27;\n  el.style.height = \x27100px\x27;\n  el.style.padding = \x2710px\x27;\n  el.style.display = \x26quot;block\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e el = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e);\n  el.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3edisplay\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22none\x22\x3c\/span\x3e;\n  el.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = \x27100px\x27;\n  el.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = \x27100px\x27;\n  el.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.padding = \x2710px\x27;\n  el.\x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3edisplay\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22block\x22\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e(2) 第二种：使用文档片段在当前DOM之外构建一个子树，在把它拷贝回文档\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  var el = document.getElementById(\x26quot;ul\x26quot;);\n  var fragment = document.createDocumentFragment();\n  for(var i = 0; i \x3c 50000; i\x2b\x2b){\n    fragment.appendChild(document.createElement(\x26quot;li\x26quot;));\n  }\n  el.appenChild(fragment);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e el = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22ul\x22\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fragment = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createDocumentFragment();\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-number\x22\x3e50000\x3c\/span\x3e; i\x2b\x2b){\n    fragment.appendChild(\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x22li\x22\x3c\/span\x3e));\n  }\n  el.appenChild(fragment);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e推荐使用这种方式。\x3c\/p\x3e\n\x3cp\x3e(3) 第三种：将原始元素拷贝到一个脱离文档的节点中，修改副本，完成后在提货原始元素\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var el = document.getElementById(\x26quot;div\x26quot;);\n var cloneDiv = el.choleNode(true);\n cloneDiv.appendChild = li;\n el.parentNode.replaceChild(clone,el); \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mipsasm\x22\x3e\x3ccode\x3e var el = document.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x22div\x22\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n var \x3cspan class=\x22hljs-keyword\x22\x3ecloneDiv \x3c\/span\x3e= el.choleNode(true)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n \x3cspan class=\x22hljs-keyword\x22\x3ecloneDiv.appendChild \x3c\/span\x3e= li\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n el.parentNode.replaceChild(\x3cspan class=\x22hljs-keyword\x22\x3eclone,el); \x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上脱离文档流修改DOM的方法推荐第二种方法。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e减少渲染变化的排队与刷新\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e由于每次重排都会产生计算消耗，大多数浏览器通过列队化修改并批量执行来优化重排过程。而我们不知不觉中就使用了一些强制刷新队列并要求计划任务立刻执行的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 1. offsetTop、offsetLeft、offsetWidth、offsetHeight\n 2. scrollTop、scrollLeft、scrollWidth、scrollHeight\n 3. clientTop、clientLeft、clientWidht、clientHeight\n 4. getComputedStyle() \/\/ currentStyle IE中\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e offsetTop、offsetLeft、offsetWidth、offsetHeight\n \x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e scrollTop、scrollLeft、scrollWidth、scrollHeight\n \x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e clientTop、clientLeft、clientWidht、clientHeight\n \x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e getComputedStyle() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ currentStyle IE中\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在使用上面方法时要注意，浏览器为了返回最新值，会刷新队列应用所用变更，我们应该减少他们的使用，如果使用他们我们最好缓存布局信息\x3cbr\x3e例如我们将滚轮滚动到页面顶部：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var scroll = document.body.scrollTop; \/\/ 这里直接缓存scrollTop\nvar set = setInterval(function(){\n     scroll--; \/\/ 这里不使用window.scrollTop--\n     document.body.scrollTop = scroll;\n     if(scroll \x3c 0) {\n        clearInterval(set);\n     }\n},100)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scroll = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollTop; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里直接缓存scrollTop\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e = setInterval(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n     scroll--; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里不使用window.scrollTop--\x3c\/span\x3e\n     \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.scrollTop = scroll;\n     \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(scroll \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n        clearInterval(\x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e);\n     }\n},\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e6.动画中使用绝对定位。\x3c\/p\x3e\n\x3cp\x3e对于用展开\/折叠的效果，我们使用绝对定位，将其脱离文档流，会是重绘更少些。\x3c\/p\x3e\n\x3cp\x3e7.使用事件委托来减少事件处理器的数量。\x3c\/p\x3e\n\x3cp\x3e如果你还不知道事件委托事什么，请访问：\x3cbr\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/webxiaoma\/article\/details\/53501616\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.csdn.net\/webxiaoma\/article\/details\/53501616\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e算法和流程控制\x3c\/h2\x3e\n\x3cp\x3e这里我们讨论的是循环和判断，我们直接写推荐的书写方法\x3c\/p\x3e\n\x3cp\x3e1.循环体\x3cbr\x3e 循环包括 \x3ccode\x3efor\x3c\/code\x3e循环、\x3ccode\x3ewhile\x3c\/code\x3e循环、\x3ccode\x3edo-while\x3c\/code\x3e循环、\x3ccode\x3efor-in\x3c\/code\x3e循环。\x3cbr\x3e 其中\x3ccode\x3efor-in\x3c\/code\x3e循环的性能明显比其他性能差些，另外ES6对于属性循环有出了\x3ccode\x3efor-of\x3c\/code\x3e循环，比起\x3ccode\x3efor-in\x3c\/code\x3e循环性能要好一些。\x3cbr\x3e 我们前面也说了，循环时，我们最好存储判断的长度，另外递减循环要比递加循环速度相当要快。\x3c\/p\x3e\n\x3cp\x3e2.判断\x3cbr\x3e 判断有：\x3ccode\x3eif\x3c\/code\x3e 和 \x3ccode\x3eswitch\x3c\/code\x3e;\x3cbr\x3e 当我们做判断时，最好是吧最有可能出现的放到前面，另外\x3ccode\x3eif-else-if\x3c\/code\x3e很多的话，推荐使用\x3ccode\x3eswitch\x3c\/code\x3e去判断，这样更有利于减少性能的消耗。有时候我们选择嵌套if也不使用很多\x3ccode\x3eif-else-if\x3c\/code\x3e连用的方法如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 推荐\nif(){\n  if(){\n    if(){\n\n    }\n  }\n}\n\n\/\/ 尽量少用\nif(){\n\n} else if(){\n\n} else if(){\n\n} else if(){\n\n} else if(){\n\n} else if(){\n\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\/\/ 推荐\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n  if(){\n    if(){\n\n    }\n  }\n}\n\n\/\/ 尽量少用\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(){\n\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e对象和作用域\x3c\/h2\x3e\n\x3cp\x3e对象的注意点是：\x3c\/p\x3e\n\x3cp\x3e1.尽量不扩展内置原型(如给Object.prototype添加自己的方法)，除非你确定不会对你的团队造成影响\x3c\/p\x3e\n\x3cp\x3e2.访问的作用域和对象越深，越消耗性能，我们 尽量减少，不过这并不是硬性的要求，我们尽量减少那些不必要的深入访问。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e其他注意点\x3c\/h2\x3e\n\x3col\x3e\x3cli\x3e避免隐士类型转换(有时候判断需要考虑用全等号还是双等号)\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 0;\nif(a === false){\n    \/\/不执行\n}\n\nif(a == false){\n    \/\/执行了\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gcode\x22\x3e\x3ccode\x3evar a = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e(a === false)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/不执行\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e(a == false)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/执行了\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.尽量少的使用\x3ccode\x3eeval()\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e3.项目发布时的代码压缩，js文件整合，图片整合等等优化。\x3c\/p\x3e\n\x3cp\x3e4.整个团队的代码书写风格，要确定。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e结束\x3c\/h2\x3e\n\x3cp\x3e文章基本就写到这里，项目书写的注意点不单单只有这些，其实对代码的优化还有很多，还有你的经验。不断积累一定会写成很优雅的代码。\x3c\/p\x3e\n\x3cp\x3e参考文献：《高性能JavaScript》\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>编写高性能js注意点</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011735788">https://segmentfault.com/a/1190000011735788</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/2ze2p5g1daq/" target="_blank">https://alili.tech/archive/2ze2p5g1daq/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>