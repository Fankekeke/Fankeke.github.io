<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="小谈日志与其实践"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>小谈日志与其实践 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/3h1kbt93l9i/",
				"appid": "1613049289050283", 
				"title": "小谈日志与其实践 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-02T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/vroh239djm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/gx81cpxwumd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&text=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&text=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&title=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&is_video=false&description=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&title=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&title=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&title=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3h1kbt93l9i%2f&title=%e5%b0%8f%e8%b0%88%e6%97%a5%e5%bf%97%e4%b8%8e%e5%85%b6%e5%ae%9e%e8%b7%b5"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">小谈日志与其实践</h1><div class="meta"><div class="postdate"><time datetime="2019-01-02" itemprop="datePublished">2019-01-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e本文首发于泊浮目的专栏：\x3ca href=\x22https:\/\/segmentfault.com\/blog\/camile\x22\x3ehttps:\/\/segmentfault.com\/blog...\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e前言\x3c\/h1\x3e\n\x3cp\x3e前阵子在论坛上看到一个问题，大致的意思就是日志该怎么打？或者说是，我们应该在日志中打印出哪些内容？\x3c\/p\x3e\n\x3cp\x3e看了该问题，笔者真是有所感慨：从实习到现在，从接的外包小项目到企业级应用，从觉得\x3cstrong\x3e日志没什么软用\x3c\/strong\x3e到在客户的环境中排bug\x3cstrong\x3e在日志中看到蛛丝马迹\x3c\/strong\x3e。不得不说，日志真是太重要了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e什么是日志\x3c\/h1\x3e\n\x3cp\x3e日志文件是用于记录系统操作事件的记录文件或文件集合，是一个软件系统的重要组成部分。一般良好的日志可以帮助我们：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e了解项目的运行状态\x3c\/li\x3e\n\x3cli\x3e发现潜在的性能问题\x3c\/li\x3e\n\x3cli\x3e快速定位故障所在\x3c\/li\x3e\n\x3cli\x3e价值化（大数据分析等）\x3c\/li\x3e\n\x3cli\x3e.....\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e日志的分类\x3c\/h1\x3e\n\x3cp\x3e就功能来说，我们一般分为诊断日志、审计日志、统计日志。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e诊断日志\x3c\/h2\x3e\n\x3cp\x3e一般诊断日志包含的信息最为全面，包括但不限于：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eRequest \x26amp;\x26amp; Response\x3c\/li\x3e\n\x3cli\x3e系统操作行为：读写文件、定时任务等\x3c\/li\x3e\n\x3cli\x3e异常行为：不可容错与容错行为\x3c\/li\x3e\n\x3cli\x3e第三方服务的调用\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e审计日志\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e记录账户对资源的操作行为\x3c\/strong\x3e。比起诊断日志，可能更加方便普通人的阅读，运营、运维同志们的福利。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e统计日志\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e用户访问统计：浏览、日活、IP、上传下载的数据量\x3c\/li\x3e\n\x3cli\x3e计费日志（常见于公有、私有云中）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e日志中该记录什么\x3c\/h1\x3e\n\x3cp\x3e先来看看一段\x3ccode\x3eZStack\x3c\/code\x3e中的日志\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x222017-09-04 13:37:45,509 TRACE [CloudBusImpl2] {} [msg send]: {\x26quot;org.zstack.header.host.APIDeleteHostMsg\x26quot;:{\x26quot;uuid\x26quot;:\x26quot;e36525b2fbe9429093450b72a4552656\x26quot;,\x26quot;deleteMode\x26quot;:\x26quot;Permissive\x26quot;,\x26quot;session\x26quot;:{\x26quot;uuid\x26quot;:\x26quot;a7c068a7d3fd41388994e4b413cf4f7d\x26quot;},\x26quot;timeout\x26quot;:-1,\x26quot;headers\x26quot;:{\x26quot;correlationId\x26quot;:\x26quot;f1ad7d11a73f472ca5dc2ea003f16006\x26quot;,\x26quot;replyTo\x26quot;:\x26quot;zstack.message.cloudbus.bbaaa63f1b4d4b0cb96e452bf68eaccf\x26quot;,\x26quot;noReply\x26quot;:\x26quot;false\x26quot;,\x26quot;schema\x26quot;:{},\x26quot;task-context\x26quot;:{\x22}}\x22,\x26quot;id\x26quot;:\x26quot;f1ad7d11a73f472ca5dc2ea003f16006\x26quot;,\x26quot;serviceId\x26quot;:\x26quot;api.portal\x26quot;,\x26quot;createdTime\x26quot;:1504417065507\x22}}\x22\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-number\x22\x3e2017\x3c\/span\x3e-09-\x3cspan class=\x22hljs-number\x22\x3e04\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e37\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e509\x3c\/span\x3e TRACE [CloudBusImpl2] {} [msg send]: {\x3cspan class=\x22hljs-string\x22\x3e\x22org.zstack.header.host.APIDeleteHostMsg\x22\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x22uuid\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22e36525b2fbe9429093450b72a4552656\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22deleteMode\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22Permissive\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22session\x22\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x22uuid\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22a7c068a7d3fd41388994e4b413cf4f7d\x22\x3c\/span\x3e},\x3cspan class=\x22hljs-string\x22\x3e\x22timeout\x22\x3c\/span\x3e:-\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22headers\x22\x3c\/span\x3e:{\x3cspan class=\x22hljs-string\x22\x3e\x22correlationId\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22f1ad7d11a73f472ca5dc2ea003f16006\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22replyTo\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22zstack.message.cloudbus.bbaaa63f1b4d4b0cb96e452bf68eaccf\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22noReply\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22false\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22schema\x22\x3c\/span\x3e:{},\x3cspan class=\x22hljs-string\x22\x3e\x22task-context\x22\x3c\/span\x3e:{\x22}}\x22,\x3cspan class=\x22hljs-string\x22\x3e\x22id\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22f1ad7d11a73f472ca5dc2ea003f16006\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22serviceId\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22api.portal\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22createdTime\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1504417065507\x3c\/span\x3e\x22}}\x22\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以看到精确的时间，以及日志级别，日志调用者及其行为，以及参数。其中\x3ccode\x3ecorrelationId\x3c\/code\x3e就是我们常说的RequestID。\x3c\/p\x3e\n\x3cblockquote\x3eRequestID:我们通常用RequestID来对请求进行唯一的标记，目的是可以通过RequestID将一个请求在系统中的执行过程串联起来，这在分布式系统中的威力是巨大的。该RequestID通常会随着响应返回给调用者，如果调用出现问题，调用者也可以通过提供RequestID帮助服务提供者定位问题。以Java为例，生成方法可以考虑如下：\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22public static String getUuid() {\n      return UUID.randomUUID().toString().replace(\x26quot;-\x26quot;, \x26quot;\x26quot;);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22java hljs\x22\x3e\x3ccode class=\x22java\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e String \x3cspan class=\x22hljs-title\x22\x3egetUuid\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e UUID.randomUUID().toString().replace(\x3cspan class=\x22hljs-string\x22\x3e\x22-\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3eps:去掉-是为了更方便的copy-paste。\x3c\/blockquote\x3e\n\x3cp\x3e这样我们便可以利用这个线索在日志中快速的找出问题啦。同时，我们也可以\x3cstrong\x3e根据自己的需求来放入时间戳、业务属性等来组成RequestID\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e除之前提到的\x3cstrong\x3e该记录的日志\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eRequest \x26amp;\x26amp; Response\x3c\/li\x3e\n\x3cli\x3e系统操作行为：读写文件、定时任务等\x3c\/li\x3e\n\x3cli\x3e异常行为：不可容错与容错行为（比如分布式系统中的心跳机制，请记录尝试的次数）\x3c\/li\x3e\n\x3cli\x3e第三方服务的调用\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e还有：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e很少出现的else情况\x3c\/li\x3e\n\x3cli\x3e非预期执行\x3c\/li\x3e\n\x3cli\x3e批量插入操作记录\x3c\/li\x3e\n\x3cli\x3e服务状态变化（尽有可能记录线索）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们也要去掉那些多余的日志，比如：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e明明可以一条输出却多条输出（无论从阅读还是性能上来看都不是较为好的选择）\x3c\/li\x3e\n\x3cli\x3e为调试而添加的临时日志\x3c\/li\x3e\n\x3cli\x3e预期会被正常处理的异常，却打出堆栈\x3c\/li\x3e\n\x3cli\x3e等...\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader7\x22\x3e关于日志级别\x3c\/h1\x3e\n\x3cp\x3e我们通常使用的日志库，将日志基本分为以下几类（从高到低）：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3eFATAL\x3c\/strong\x3e – The FATAL level designates very severe error events that will presumably lead the application to abort.\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eERROR\x3c\/strong\x3e – The ERROR level designates error events that might still allow the application to continue running.\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eWARN\x3c\/strong\x3e  – The WARN level designates potentially harmful situations.\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eINFO\x3c\/strong\x3e – The INFO level designates informational messages that highlight the progress of the application at coarse-grained level.\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eDEBUG\x3c\/strong\x3e – The DEBUG Level designates fine-grained informational events that are most useful to debug an application.\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eTRACE\x3c\/strong\x3e – The TRACE Level designates finer-grained informational events than the\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e参考帖子：\x3ca href=\x22https:\/\/stackoverflow.com\/questions\/2031163\/when-to-use-the-different-log-levels\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/stackoverflow.com\/que...\x3c\/a\x3e。\x3c\/blockquote\x3e\n\x3cp\x3e对于日志级别的分类，有以下参考：\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3eFATAL\x3c\/h2\x3e\n\x3cp\x3e表示需要立即被处理的系统级错误。当该错误发生时，表示服务已经出现了某种程度的不可用，系统管理员需要立即介入。这属于最严重的日志级别，因此该日志级别必须慎用，如果这种级别的日志经常出现，则该日志也失去了意义。通常情况下，一个进程的生命周期中应该只记录一次FATAL级别的日志，即该进程遇到无法恢复的错误而退出时。当然，如果某个系统的子系统遇到了不可恢复的错误，那该子系统的调用方也可以记入FATAL级别日志，以便通过日志报警提醒系统管理员修复；\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eERROR\x3c\/h2\x3e\n\x3cp\x3e该级别的错误也需要马上被处理，但是紧急程度要低于FATAL级别。当ERROR错误发生时，已经影响了用户的正常访问。从该意义上来说，实际上ERROR错误和FATAL错误对用户的影响是相当的。FATAL相当于服务已经挂了，而ERROR相当于好死不如赖活着，然而活着却无法提供正常的服务，只能不断地打印ERROR日志。特别需要注意的是，ERROR和FATAL都属于服务器自己的异常，是需要马上得到人工介入并处理的。而对于用户自己操作不当，如请求参数错误等等，是绝对不应该记为ERROR日志的；\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3eWARN\x3c\/h2\x3e\n\x3cp\x3e该日志表示系统可能出现问题，也可能没有，这种情况如网络的波动等。对于那些目前还不是错误，然而不及时处理也会变为错误的情况，也可以记为WARN日志，例如一个存储系统的磁盘使用量超过阀值，或者系统中某个用户的存储配额快用完等等。对于WARN级别的日志，虽然不需要系统管理员马上处理，也是需要及时查看并处理的。因此此种级别的日志也不应太多，能不打WARN级别的日志，就尽量不要打；\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3eINFO\x3c\/h2\x3e\n\x3cp\x3e该种日志记录系统的正常运行状态，例如某个子系统的初始化，某个请求的成功执行等等。通过查看INFO级别的日志，可以很快地对系统中出现的 WARN,ERROR,FATAL错误进行定位。INFO日志不宜过多，通常情况下，INFO级别的日志应该不大于TRACE日志的10%；\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3eDEBUG or TRACE\x3c\/h2\x3e\n\x3cp\x3e这两种日志具体的规范应该由项目组自己定义，该级别日志的主要作用是对系统每一步的运行状态进行精确的记录。通过该种日志，可以查看某一个操作每一步的执 行过程，可以准确定位是何种操作，何种参数，何种顺序导致了某种错误的发生。可以保证在不重现错误的情况下，也可以通过DEBUG（或TRACE）级别的日志对问题进行诊断。需要注意的是，DEBUG日志也需要规范日志格式，应该保证除了记录日志的开发人员自己外，其他的如运维，测试人员等也可以通过 DEBUG（或TRACE）日志来定位问题；\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader13\x22\x3e其他\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e注意制定规范，而不是让开发者随意打日志。对于日志的等级选择也要注意。\x3c\/li\x3e\n\x3cli\x3e注意日志的切片设置，以免文件过大不方便操作。\x3c\/li\x3e\n\x3cli\x3e过期的日志定期清理。\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>小谈日志与其实践</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010999784">https://segmentfault.com/a/1190000010999784</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/3h1kbt93l9i/" target="_blank">https://alili.tech/archive/3h1kbt93l9i/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>