<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【30分钟学完】canvas动画|游戏基础(2)：从零开始画画"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【30分钟学完】canvas动画|游戏基础(2)：从零开始画画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/3nabqcdtt2n/",
				"appid": "1613049289050283", 
				"title": "【30分钟学完】canvas动画|游戏基础(2)：从零开始画画 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-09T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/1yvh3374vqf/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/tp5jfs1ha68/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&text=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&text=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&is_video=false&description=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3nabqcdtt2n%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%282%29%ef%bc%9a%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e7%94%bb%e7%94%bb"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【30分钟学完】canvas动画|游戏基础(2)：从零开始画画</h1><div class="meta"><div class="postdate"><time datetime="2018-12-09" itemprop="datePublished">2018-12-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e上篇主要是理论的概述，本篇会多些实践，来讲讲canvas的基础用法，并包含一些基础三角函数的应用，推荐没有canvas基础的朋友阅读，熟悉的朋友可以跳过。  \x3cbr\x3e本人能力有限，欢迎牛人共同讨论，批评指正。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e一起来画画吧\x3c\/h2\x3e\n\x3cp\x3ecanvas的API有很多，如果一一列举30分钟你是绝对看不完的，而且怎么流水账还不如自己去看文档呢（笑），本教程的思路是用实例一步一步从无到有讲解基础用法。  \x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/Canvas_API\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecanvas相关文档\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e准备工作\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e布置画布：通过添加\x3ccode\x3e\x26lt;canvas\x26gt;\x3c\/code\x3e标签，添加canvas元素；\x3c\/li\x3e\n\x3cli\x3e获取画布：通过\x3ccode\x3e\x26lt;canvas\x26gt;\x3c\/code\x3e标签的id，获得canvas对象；\x3c\/li\x3e\n\x3cli\x3e获得画笔：通过canvas对象的getContext(\x222d\x22)方法，获得2D环境。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ccanvas id=\x26quot;canvas\x26quot; width=\x26quot;400\x26quot; height=\x26quot;400\x26quot;\x3e\x3c\/canvas\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22400\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22400\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const canvas = document.getElementById(\x27canvas\x27);\nconst context = canvas.getContext(\x272d\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e画个箭头\x3c\/h3\x3e\n\x3cp\x3e首先我们来画个\x3cstrong\x3e红边黄底的箭头\x3c\/strong\x3e，使用面向对象的代码组织方式，全部代码如下。  \x3cbr\x3e类名为Arrow。它拥有x轴坐标、y轴坐标、底的颜色color、旋转弧度rotation四个属性。  \x3cbr\x3e实例方法是draw()，它需要一个context对象作为参数，就是准备工作里的context，它就相当于是画笔，这里其实是类似依赖注入的过程，将canvas的画笔交给实例的draw()方法，实例用这个画笔去画出箭头，绘画过程见代码注释。特别注意以下几点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ebeginPath()方法调用后moveTo()和lineTo移动坐标是\x3cstrong\x3e相对与beginPath()时画笔的坐标的\x3c\/strong\x3e，可以理解成画笔自带一个坐标系，它可以旋转和在画布上移动，绘制工作的坐标都是属于这个坐标系的；\x3c\/li\x3e\n\x3cli\x3ebeginPath()是绘制设置状态的起始点，它之后代码设置的绘制状态的作用域结束于绘制方法stroke()、fill()或者closePath()；\x3c\/li\x3e\n\x3cli\x3esave()的作用是保存笔的状态，因为一个画布的笔只有一支，会在不同对象中传递，为了不污染后续的画就应该先保存，画完再restore()还原；\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e\x3ccode\x3e\x26lt;canvas\x26gt;\x3c\/code\x3e本身是透明的\x3c\/strong\x3e，可以使用CSS给它个背景，例子中普遍使用白色背景。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 箭头类\n * @class Representing a arrow.\n *\/\n\/* eslint no-unused-vars: [\x26quot;error\x26quot;, { \x26quot;varsIgnorePattern\x26quot;: \x26quot;Arrow\x26quot; }] *\/\nclass Arrow {\n  \/**\n    * Create a arrow.\n    *\/\n  constructor() {\n    this.x = 0;\n    this.y = 0;\n    this.color = \x27#ffff00\x27;\n    this.rotation = 0;\n  }\n  \/**\n   * Draw the arrow.\n   * @param {Object} _context - The canvas context.\n   *\/\n  draw(_context) {\n    const context = _context;\n    \/\/ 会先保存画笔状态\n    context.save();\n    \/\/ 移动画笔\n    context.translate(this.x, this.y);\n    \/\/ 旋转画笔\n    context.rotate(this.rotation);\n    \/\/ 设置线条宽度\n    context.lineWidth = 2;\n    \/\/ 设置线条颜色\n    context.strokeStyle = \x27#ff0000\x27;\n    \/\/ 设置填充颜色\n    context.fillStyle = this.color;\n    \/\/ 开始路径\n    context.beginPath();\n    \/\/ 将笔移动到相对位置\n    context.moveTo(-50, -25);\n    \/\/ 画线到相对位置\n    context.lineTo(0, -25);\n    context.lineTo(0, -50);\n    context.lineTo(50, 0);\n    context.lineTo(0, 50);\n    context.lineTo(0, 25);\n    context.lineTo(-50, 25);\n    context.lineTo(-50, -25);\n    \/\/ 闭合路径\n    context.closePath();\n    \/\/ 填充路径包围区\n    context.fill();\n    \/\/ 绘制路径\n    context.stroke();\n    \/\/ 载入保存的笔信息\n    context.restore();\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 箭头类\n * @class Representing a arrow.\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/* eslint no-unused-vars: [\x22error\x22, { \x22varsIgnorePattern\x22: \x22Arrow\x22 }] *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eArrow\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n    * Create a arrow.\n    *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color = \x3cspan class=\x22hljs-string\x22\x3e\x27#ffff00\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rotation = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * Draw the arrow.\n   * @param {Object} _context - The canvas context.\n   *\/\x3c\/span\x3e\n  draw(_context) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = _context;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会先保存画笔状态\x3c\/span\x3e\n    context.save();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 移动画笔\x3c\/span\x3e\n    context.translate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转画笔\x3c\/span\x3e\n    context.rotate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.rotation);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置线条宽度\x3c\/span\x3e\n    context.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置线条颜色\x3c\/span\x3e\n    context.strokeStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27#ff0000\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置填充颜色\x3c\/span\x3e\n    context.fillStyle = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开始路径\x3c\/span\x3e\n    context.beginPath();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将笔移动到相对位置\x3c\/span\x3e\n    context.moveTo(\x3cspan class=\x22hljs-number\x22\x3e-50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-25\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 画线到相对位置\x3c\/span\x3e\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-25\x3c\/span\x3e);\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-50\x3c\/span\x3e);\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e);\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e-50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n    context.lineTo(\x3cspan class=\x22hljs-number\x22\x3e-50\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-25\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 闭合路径\x3c\/span\x3e\n    context.closePath();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 填充路径包围区\x3c\/span\x3e\n    context.fill();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 绘制路径\x3c\/span\x3e\n    context.stroke();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 载入保存的笔信息\x3c\/span\x3e\n    context.restore();\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同理我们还可以画点其他的，比如一个圆\x3ca href=\x22https:\/\/github.com\/nimokuri\/H5Learning-animationDemo\/blob\/master\/common\/ball.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eball.js\x3c\/a\x3e，稍微多些参数，慢慢理解。  \x3cbr\x3e成品的效果可以先看这个（稍微剧透）：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/01-rotate-to-mouse.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个会跟踪鼠标位置的箭头\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e加入循环动起来\x3c\/h3\x3e\n\x3cp\x3e现在我们已经掌握了画画的基本功，并且可以画箭头\x3ca href=\x22https:\/\/github.com\/nimokuri\/H5Learning-animationDemo\/blob\/master\/common\/arrow.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3earrow.js\x3c\/a\x3e和圆\x3ca href=\x22https:\/\/github.com\/nimokuri\/H5Learning-animationDemo\/blob\/master\/common\/ball.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eball.js\x3c\/a\x3e，然而这样只是静止画，接下来我们需要一个循环，不断的执行擦除和重画的工作才能实现帧动画。\x3cbr\x3e下面这段代码的中绘图函数drawFrame被立即执行，并递归调用自身，你将会在大部分例子中看到。  \x3cbr\x3e循环原理上一篇已经说明，不再重复。这里要说明的是clearRect()，这个函数接受一个矩形坐标，也就是（x轴坐标，y轴坐标，矩形宽度，矩形高度），用于清除矩形区域内的画。  \x3cbr\x3e例子里直接是清除了整个画布，但这不是绝对的，刷不刷新，是局部刷新还是全部刷新，都需要灵活处理。  \x3cbr\x3e这里有个不刷新的例子:\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part3\/01-drawing-app.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e鼠标画图工具\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function drawFrame() {\n  \/\/ 类似setTimeout的操作\n  window.requestAnimationFrame(drawFrame, canvas);\n  \/\/ 将画布擦干净\n  context.clearRect(0, 0, canvas.width, canvas.height);\n  \/\/ ...继续你的作画\n}());\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 类似setTimeout的操作\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将画布擦干净\x3c\/span\x3e\n  context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...继续你的作画\x3c\/span\x3e\n}());\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e给它点动力\x3c\/h3\x3e\n\x3cp\x3e现在画面已经是在不断的重绘，但为什么还是静止的呢？因为每一次刷新都没有改变要画的内容。  \x3cbr\x3e那我们就给它一个目标吧，这样它才能动起来，比如就让箭头始终指向鼠标。  \x3cbr\x3e下面是核心代码，主要目的就是求出每帧arrow的旋转角度，这里使用的工具类mouse会实时返回鼠标的x，y轴坐标，封装原理上一篇已经讲过，根据这鼠标的坐标和arrow的坐标，即可得到鼠标的相对于arrow的距离dx和dy，如下图：  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6Lbn?w=1232\x26amp;h=688\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6Lbn?w=1232\x26amp;h=688\x22 alt=\x22箭头角度演示\x22 title=\x22箭头角度演示\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e而arrow的旋转角度即可以通过dx和dy使用反正切函数得到，这里需要注意几点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e仔细看上面代码中arrow的绘制过程，可知其原点是在中心位置的，所以刚好旋转角度就是画笔的旋转角度；\x3c\/li\x3e\n\x3cli\x3edx和dy是鼠标相对与arrow的坐标，所以图中把坐标系挪动箭头中心是没毛病的；\x3c\/li\x3e\n\x3cli\x3e用atan2，而不是atan，是因为tan值本来就可能是重复的，比如-1\/2和1\/(-2)两个都是-0.5，无法区分象限，而atan2就可以区分开。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e完整实例：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/01-rotate-to-mouse.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个会跟踪鼠标位置的箭头\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const mouse = utils.captureMouse(canvas);\n  const arrow = new Arrow();\n\n  arrow.x = canvas.width \/ 2;\n  arrow.y = canvas.height \/ 2;\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    const dx = mouse.x - arrow.x;\n    const dy = mouse.y - arrow.y;\n\n    arrow.rotation = Math.atan2(dy, dx);\n    arrow.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mouse = utils.captureMouse(canvas);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arrow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Arrow();\n\n  arrow.x = canvas.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  arrow.y = canvas.height \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx = mouse.x - arrow.x;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy = mouse.y - arrow.y;\n\n    arrow.rotation = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan2(dy, dx);\n    arrow.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e三角函数\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e上下运动\x3c\/h3\x3e\n\x3cp\x3e终于顺利过渡到三角函数的话题（笑）。三角函数不止有反正切一个应用，下面再看一个例子。  \x3cbr\x3e下面是一个ball在上下运动的核心代码，重点就是ball的y轴坐标改变，就是这句：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ball.y = clientY \x2b Math.sin(angle) * range;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eball.y = clientY \x2b \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(angle) * range;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e利用Math.sin(angle)的取值范围是-1到1，并且会随着angle增大而反复，使ball在一定范围上下运动。  \x3cbr\x3e完整例子：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/03-bobbing-2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个上下运动的球（可调参数版）\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const ball = new Ball();\n  let angle = 0;\n  \/\/ 运动中心\n  const clientY = 200;\n  \/\/ 范围\n  const range = 50;\n  \/\/ 速度\n  const speed = 0.05;\n\n  ball.x = canvas.width \/ 2;\n  ball.y = canvas.height \/ 2;\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    ball.y = clientY \x2b Math.sin(angle) * range;\n    angle \x2b= speed;\n    ball.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Ball();\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e angle = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 运动中心\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e clientY = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 范围\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e range = \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e speed = \x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e;\n\n  ball.x = canvas.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  ball.y = canvas.height \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    ball.y = clientY \x2b \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(angle) * range;\n    angle \x2b= speed;\n    ball.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e向前运动\x3c\/h3\x3e\n\x3cp\x3e只是上下运动不过瘾，那就让圆前进吧，其实就是每帧改变x轴的位置。  \x3cbr\x3e核心代码如下，相比前面的上下运动，多了x轴的速度，每帧移动一点就形成了波浪前进的效果。  \x3cbr\x3e完整实例：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/04-wave-1.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个波浪运动的球\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const ball = new Ball();\n  let angle = 0;\n  const centerY = 200;\n  const range = 50;\n  const xspeed = 1;\n  const yspeed = 0.05;\n\n  ball.x = 0;\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    ball.x \x2b= xspeed;\n    ball.y = centerY \x2b Math.sin(angle) * range;\n    angle \x2b= yspeed;\n    ball.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Ball();\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e angle = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e centerY = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e range = \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e xspeed = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e yspeed = \x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e;\n\n  ball.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n    ball.x \x2b= xspeed;\n    ball.y = centerY \x2b \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(angle) * range;\n    angle \x2b= yspeed;\n    ball.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e其他示例\x3c\/h3\x3e\n\x3cp\x3e其他的应用就不一一讲解，罗列出来一些：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/05-pulse.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e不断缩放的球\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/06-random.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e两轴同时改变的圆\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/07-wave-2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e绘制波\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/08-circle.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个做圆周运动的圆\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/09-oval.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一个做椭圆形运动的圆\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/10-distance.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e计算两个随机块的距离\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part2\/11-mouse-distance.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e中心点到鼠标的距离\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【30分钟学完】canvas动画|游戏基础(2)：从零开始画画</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013965650">https://segmentfault.com/a/1190000013965650</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/3nabqcdtt2n/" target="_blank">https://alili.tech/archive/3nabqcdtt2n/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>