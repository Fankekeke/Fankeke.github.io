<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="以太坊开发DApp实战教程——用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>以太坊开发DApp实战教程——用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/3pagy4a7e35/",
				"appid": "1613049289050283", 
				"title": "以太坊开发DApp实战教程——用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-08T02:30:30"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/8idbu55nqmq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/s4mspj06ktg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&text=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&text=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&title=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&is_video=false&description=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&title=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&title=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&title=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f3pagy4a7e35%2f&title=%e4%bb%a5%e5%a4%aa%e5%9d%8a%e5%bc%80%e5%8f%91DApp%e5%ae%9e%e6%88%98%e6%95%99%e7%a8%8b%e2%80%94%e2%80%94%e7%94%a8%e5%8c%ba%e5%9d%97%e9%93%be%e3%80%81%e6%98%9f%e9%99%85%e6%96%87%e4%bb%b6%e7%b3%bb%e7%bb%9f%ef%bc%88IPFS%ef%bc%89%e3%80%81Node.js%e5%92%8cMongoDB%e6%9d%a5%e6%9e%84%e5%bb%ba%e7%94%b5%e5%95%86%e5%b9%b3%e5%8f%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">以太坊开发DApp实战教程——用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台</h1><div class="meta"><div class="postdate"><time datetime="2018-12-08" itemprop="datePublished">2018-12-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch4\x3e第一节 简介\x3c\/h4\x3e\n\x3cp\x3e欢迎和我们一起来用以太坊开发构建一个去中心化电商DApp！我们将会构建一个类似淘宝的在线电商应用，卖家可以自由地出售商品，买家可以自由地购物：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076909?w=657\x26amp;h=374\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076909?w=657\x26amp;h=374\x22 alt=\x22ethereum dapp 以太坊DApp开发\x22 title=\x22ethereum dapp 以太坊DApp开发\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e去中心化： 和淘宝或\x3cstrong\x3eeBay\x3c\/strong\x3e不同，我们把所有的商业逻辑和核心数据都放在以太坊区块链上，这使 得它成为一个完全去中心化的应用。和淘宝这样中心化的电商平台相比，一个去中心化的\x3cstrong\x3eP2P\x3c\/strong\x3e电商应用显然有其独特的价值——至少你不用担心被平台封账户了。\x3c\/li\x3e\n\x3cli\x3eIPFS： 在以太坊上存储用于商品展示的图片和描述超文本十分昂贵，由于以太坊虚拟机的限制， 有时甚至是不可行的。为了解决这个问题，我们将会把商品图片和商品描述信息存储在同样去中心化的\x3cstrong\x3e星际文件系统\x3c\/strong\x3e（\x3cstrong\x3eIPFS\x3c\/strong\x3e)中，而仅仅在链上保存这些数据的\x3cstrong\x3eID\x3c\/strong\x3e。\x3c\/li\x3e\n\x3cli\x3e商品拍卖： 对于卖家而言，拍卖显然是一种非常好的提升商品利润空间的销售手段。因此我们在课程项目中将实现去中心化环境下的维科瑞（\x3cstrong\x3eVickery\x3c\/strong\x3e）拍卖 —— 这非常类似于\x3cstrong\x3eeBay\x3c\/strong\x3e的自动竞价系统，而不是简单地对商品进行固定标价。\x3c\/li\x3e\n\x3cli\x3e资金托管： \x3cstrong\x3e中心化\x3c\/strong\x3e的平台有一个优点在于它天然提供了买卖双方之间的信任中介。在\x3cstrong\x3e去中心化\x3c\/strong\x3e的环境中，我们将使用一个多方托管合约来应对买卖双方可能的风险，\x3cstrong\x3e托管合约\x3c\/strong\x3e采用\x3cstrong\x3e投票机制\x3c\/strong\x3e来决定买家货款的最终流向。\x3c\/li\x3e\n\x3cli\x3e链下数据存储： 不要被去中心化限制我们的思维，传统的技术依然有其强大之处。我们将使用\x3cstrong\x3eMongoDB\x3c\/strong\x3e在链下做一个同步的数据备份，以便实现单纯用区块链很难实现的功能：灵活的商品查询。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e课程地址：\x3ca href=\x22http:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6\/?affid=sfw\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e第二节 去中心化，why？\x3c\/h4\x3e\n\x3cp\x3e在开始构建我们的应用之前，非常值得花一分钟时间，来理解为什么要在像以太坊这样的\x3cstrong\x3e去中心化平台\x3c\/strong\x3e上搭建在线卖场。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eeBay\x3c\/strong\x3e或\x3cstrong\x3e淘宝\x3c\/strong\x3e这样的\x3cstrong\x3eC2C电商平台\x3c\/strong\x3e已经获得了巨大成功，因为它使得买卖双方都相当便利：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076910?w=518\x26amp;h=135\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076910?w=518\x26amp;h=135\x22 alt=\x22ebay-taobao 淘宝c2c电商平台\x22 title=\x22ebay-taobao 淘宝c2c电商平台\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在互联网成为主流之前，人们只能在小范围内、或者在邻里之间买卖商品。当越来越多的人使用互联网， 出现了像eBay这样的平台，无论来自世界的任何一个地方，你都可以在网上买卖商品。无论是商家还 是消费者，这样的平台都有其价值。\x3c\/p\x3e\n\x3cp\x3e尽管\x3cstrong\x3eeBay\x3c\/strong\x3e这样的平台方便了大家，也改善了贸易和经济，但它也存在一些缺点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e被平台束缚。参与的商家受制于拥有平台的企业。在任何时候，平台拥有者可以自行决定在是否对某个商家进行封号处理，而如果商家严重依赖于平台，那么账号被封就是一个巨大的打击。\x3c\/li\x3e\n\x3cli\x3e商家费用高。商家上架商品要交费，售出商品也要交佣金。收费本身并没有错，毕竟eBay这样的平台提供了服务。但是，上架费有时太高了，这导致商家最后盈利很少，或是将成本转嫁到消费者身上。\x3c\/li\x3e\n\x3cli\x3e数据失控。商家或消费者都无法拥有本应属于自己的数据。评论、购买历史等等所有数据都为平台拥有者所有。比如，如果一个商家想要换一个提供商，或者想要导出商品评论或是其他数据都非常不容易，甚至不可能。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e在\x3cstrong\x3e以太坊\x3c\/strong\x3e上构建的去中心化电商平台就解决了这些问题：商家的账户不会被封；数据也是公开的，所以很容易导出数据；相对于中心化的平台，交易佣金也会低得多。\x3c\/p\x3e\n\x3ch4\x3e第三节  初步的功能特性\x3c\/h4\x3e\n\x3cp\x3e现在你应该已经理解了为什么要构建去中心化的电商应用，也了解了我们要构建的应用是什么，现在让我们来大致看一下，在这个项目中将要实现的主要功能特性：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076911?w=704\x26amp;h=510\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076911?w=704\x26amp;h=510\x22 alt=\x22ebay user case\x22 title=\x22ebay user case\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cstrong\x3e商品上架\x3c\/strong\x3e：应用应该支持卖家上架商品进行销售。我们将实现让任何人自由上架商品的功能。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e商品浏览与搜索\x3c\/strong\x3e：应用应该支持买家方便地\x3cstrong\x3e浏览商品列表\x3c\/strong\x3e。我们会实现浏览商品的功能，以及基于商品类别、拍卖时间等条件进行查询的功能。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e商品拍卖\x3c\/strong\x3e：跟eBay一样，我们会实现\x3cstrong\x3e维科瑞\x3c\/strong\x3e拍卖方式的商品竞价销售。由于\x3cstrong\x3e以太坊\x3c\/strong\x3e上的一切交易都是公开的，因此我们的实现将会与中心化环境下有所不同。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e资金托管\x3c\/strong\x3e：一旦出价结束，商品拍卖有了赢家以后，我们会创建由胜出的买方、卖方和任意第三方参与的托管合约，由\x3cstrong\x3e托管合约\x3c\/strong\x3e来管理交易资金。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e托管资金保护\x3c\/strong\x3e：为了保护托管资金，我们将采用\x3cstrong\x3e多重签名\x3c\/strong\x3e（2\/3）来实现防欺诈保护，即三个参与者有两个同意时，才会将托管资金释放给卖方，或是将托管资金返还给买方。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e为了便于查询，我们会将商品数据同时存在链上和链下（数据库）；同时，为了避免图片等数据占用昂贵的链上存储，我们将把图片和商品描述信息上传到同样\x3cstrong\x3e去中心化\x3c\/strong\x3e的\x3cstrong\x3eIPFS\x3c\/strong\x3e网络。\x3c\/p\x3e\n\x3cp\x3e课程地址：\x3ca href=\x22http:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6\/?affid=sfw\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e第四节  基础知识要求\x3c\/h4\x3e\n\x3cp\x3e为了顺利地完成本课程的学习，你应该对以下语言\/技术有一些了解：\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\n\x3cstrong\x3eSolidity\/Truffle\x3c\/strong\x3e：课程将会深入使用\x3cstrong\x3esolidity\x3c\/strong\x3e来编写合约。如果你还没有学过，建议你先学习一下\x3ca href=\x22http:\/\/xc.hubwiz.com\/course\/5a952991adb3847553d205d1\/?affid=sfw\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3e以太坊开发DApp入门教程\x3c\/strong\x3e\x3c\/a\x3e，这样至少写过一两个简单的\x3cstrong\x3e合约\x3c\/strong\x3e。同时，对\x3cstrong\x3etruffle\x3c\/strong\x3e开发框架的基本了解也会十分有助于完成本课程。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076912?w=500\x26amp;h=133\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076912?w=500\x26amp;h=133\x22 alt=\x22solidity truffle\x22 title=\x22solidity truffle\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\n\x3cstrong\x3eHTML\/CSS\/JavaScript\x3c\/strong\x3e：相比入门课程，本课程将会有更多的HTML和CSS代码。你应该对使用HTML\/CSS构建前端有基本的了解。同时，我们将会进一步使用JavaScript。它会在服务端将数据保存到数据库，查询数据库并将结果返回给前端。\x3cstrong\x3eweb3.js\x3c\/strong\x3e用于前端与区块链的交互。为了适用各种背景的学习者，我们已经保持\x3cstrong\x3eJavaScript\x3c\/strong\x3e代码尽可能地简单。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076913?w=620\x26amp;h=150\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076913?w=620\x26amp;h=150\x22 alt=\x22html css js web3.js\x22 title=\x22html css js web3.js\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\n\x3cstrong\x3eDatabase\x3c\/strong\x3e：我们会用\x3cstrong\x3eMongoDB\x3c\/strong\x3e在链下保存产品信息。无须特别了解MongoDB，但是基本的数据库知识有助于你顺利完成本课程的。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076914?w=431\x26amp;h=117\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076914?w=431\x26amp;h=117\x22 alt=\x22mongodb\x22 title=\x22mongodb\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e第五节  系统架构\x3c\/h4\x3e\n\x3cp\x3e在开始着手具体的实现之前，先来看一下在本课程我们将要构建的\x3cstrong\x3e去中心化电商DApp\x3c\/strong\x3e的\x3cstrong\x3e架构\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076915?w=582\x26amp;h=494\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076915?w=582\x26amp;h=494\x22 alt=\x22ebay dapp architecture\x22 title=\x22ebay dapp architecture\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cstrong\x3eWeb前端\x3c\/strong\x3e：web前端使用\x3cstrong\x3eHTML\/CSS\/JavaScript\x3c\/strong\x3e开发，其中大量使用了\x3cstrong\x3eweb3js\x3c\/strong\x3e来访问区块链。用户将会通过这个前端应用来访问\x3cstrong\x3e以太坊\x3c\/strong\x3e、\x3cstrong\x3eIPFS\x3c\/strong\x3e和\x3cstrong\x3eNodeJS\x3c\/strong\x3e服务器。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e以太坊区块链\x3c\/strong\x3e：这是去中心化应用的核心，所有的代码（\x3cstrong\x3e电商合约\x3c\/strong\x3e、\x3cstrong\x3e资金托管合约\x3c\/strong\x3e）和交易都存储在链上，这包括所有的商品信息、买家的出价信息、商品竞价结果、资金流向投票结果等。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eMongoDB\x3c\/strong\x3e：尽管核心数据存储在\x3cstrong\x3e区块链\x3c\/strong\x3e上，但是为了方便买家对商品的检索和查询，例如只显示某一类的商品，或者显示即将过期的商品等等，我们会用MongoDB数据库来同步地存储和检索商品信息。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eNodeJS服务器\x3c\/strong\x3e：这是\x3cstrong\x3e后端\x3c\/strong\x3e服务器，我们会利用它给前端提供\x3cstrong\x3eREST\x3c\/strong\x3e风格的\x3cstrong\x3eAPI\x3c\/strong\x3e来查询商品， 同时，也利用它来响应对前端\x3cstrong\x3e静态页面\x3c\/strong\x3e的请求。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3eIPFS\x3c\/strong\x3e: 当卖家上架一个商品时，前端会商品图片文件和介绍文本上传到\x3cstrong\x3eIPFS\x3c\/strong\x3e，并将所上传文件的\x3cstrong\x3e哈希值\x3c\/strong\x3e存到链上。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch4\x3e第六节 理解架构的作用\x3c\/h4\x3e\n\x3cp\x3e为了帮助理解上一节谈到的那些组件的作用，让我们来看看一下卖家上架一个商品的流程：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076916?w=590\x26amp;h=495\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076916?w=590\x26amp;h=495\x22 alt=\x22ebay list item\x22 title=\x22ebay list item\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e(1)前端使用一个\x3cstrong\x3eHTML表单\x3c\/strong\x3e来采集用户输入的商品细节，例如起拍价、商品图片、描述信息等。\x3c\/li\x3e\n\x3cli\x3e(2)(3) 前端将商品图片和介绍文本上传到\x3cstrong\x3eIPFS\x3c\/strong\x3e，并返回所上传内容对应的链接（\x3cstrong\x3e哈希\x3c\/strong\x3e）。\x3c\/li\x3e\n\x3cli\x3e(4)(5) 然后，\x3cstrong\x3eweb前端\x3c\/strong\x3e会调用电商合约将\x3cstrong\x3e商品信息\x3c\/strong\x3e和\x3cstrong\x3eIPFS\x3c\/strong\x3e链接存储到链上。当合约成功地将商品存入\x3cstrong\x3e区块链\x3c\/strong\x3e后，就会触发一个\x3cstrong\x3e事件\x3c\/strong\x3e，该事件中包含了商品所有的信息。\x3c\/li\x3e\n\x3cli\x3e(6)(7)(8) \x3cstrong\x3eNodeJS\x3c\/strong\x3e服务器监听\x3cstrong\x3e区块链事件\x3c\/strong\x3e，当事件被\x3cstrong\x3e电商合约触发\x3c\/strong\x3e时，服务器读取事件内容并将商品信息插入到\x3cstrong\x3eMongoDB\x3c\/strong\x3e数据库中。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e当开始具体实现商品上架这一特性时，我们将重温这一流程。\x3c\/p\x3e\n\x3ch4\x3e第七节  敏捷开发\x3c\/h4\x3e\n\x3cp\x3e我们将采用\x3cstrong\x3e敏捷开发\x3c\/strong\x3e的思想来实现去中心化电商\x3cstrong\x3eDApp\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014076917?w=727\x26amp;h=604\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014076917?w=727\x26amp;h=604\x22 alt=\x22scrum way\x22 title=\x22scrum way\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们将全部的产品特性分别列入8个\x3cstrong\x3e迭代\x3c\/strong\x3e周期，通过每一次的\x3cstrong\x3e冲刺\x3c\/strong\x3e（\x3cstrong\x3esprint\x3c\/strong\x3e），我们都将得到一个可以发布的版本：\x3c\/p\x3e\n\x3cp\x3e前两个\x3cstrong\x3e冲刺\x3c\/strong\x3e主要集中在使用\x3cstrong\x3esolidity\x3c\/strong\x3e和\x3cstrong\x3etruffle框架\x3c\/strong\x3e实现电商合约方面，这包括\x3cstrong\x3e合约的设计、开发 、编译、部署与测试\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3esprint-1：实现电商合约的商品上架和展示方法。\x3c\/li\x3e\n\x3cli\x3esprint-2：实现电商合约的商品竞价和出价揭示方法。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e在电商合约基本实现之后，接下来的三个冲刺主要集中在前端用户界面的构建方面，这包括使用web3 与合约的交互，以及通过ipfs的开发接口上传图片等数据交互，当然，还有必不可少的DOM操作：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3esprint-3：为买家提供商品浏览界面。\x3c\/li\x3e\n\x3cli\x3esprint-4：为卖家提供商品上架操作界面。\x3c\/li\x3e\n\x3cli\x3esprint-5：为买家提供商品详情界面、竞价表单以及出价揭示表单。在接下来的两个冲刺里，我们将首先实现资金托管合约，用来管理竞价结束后胜出买家的资金；然后实现相应的用户操作界面。\x3c\/li\x3e\n\x3cli\x3esprint-6：实现资金托管合约。\x3c\/li\x3e\n\x3cli\x3esprint-7：基于资金托管合约，为参与托管各方提供操作界面。最后，为了便于商品的查询检索，我们将使用MongoDB来实现商品数据的链下存储。\x3c\/li\x3e\n\x3cli\x3esprint-8：实现链下数据的同步与数据查询。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e课程地址：\x3ca href=\x22http:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6\/?affid=sfw\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>以太坊开发DApp实战教程——用区块链、星际文件系统（IPFS）、Node.js和MongoDB来构建电商平台</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014076904">https://segmentfault.com/a/1190000014076904</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/3pagy4a7e35/" target="_blank">https://alili.tech/archive/3pagy4a7e35/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>