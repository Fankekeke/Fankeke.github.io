<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="实现 JavaScript 异步方法 Promise.all"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>实现 JavaScript 异步方法 Promise.all | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4lnepr5d5zl/",
				"appid": "1613049289050283", 
				"title": "实现 JavaScript 异步方法 Promise.all | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-03T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/cfp86of75yu/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/tn6nd0xnyld/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&text=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&text=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&title=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&is_video=false&description=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&title=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&title=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&title=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4lnepr5d5zl%2f&title=%e5%ae%9e%e7%8e%b0%20JavaScript%20%e5%bc%82%e6%ad%a5%e6%96%b9%e6%b3%95%20Promise.all"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">实现 JavaScript 异步方法 Promise.all</h1><div class="meta"><div class="postdate"><time datetime="2019-01-03" itemprop="datePublished">2019-01-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e本次的任务\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e假如。。。。。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eJavaScript\x3c\/code\x3e v8 引擎发生了重大故障，\x3ccode\x3ePromise.all\x3c\/code\x3e 方法变成了 \x3ccode\x3eundefined\x3c\/code\x3e ，为了拯救 \x3ccode\x3eJavaScript\x3c\/code\x3e 世界，需要开发一个模块来解决此问题。\x3c\/p\x3e\n\x3cp\x3e使用者需要在代码入口处引入我们开发的模块就可渡过此劫，但要求三个月后官方修改此版本，代码无修改就能自动切换到官方版本。实现 \x3ccode\x3ePromise.all\x3c\/code\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e首先要知道 \x3ccode\x3ePromise\x3c\/code\x3e 是什么\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3epromise\x3c\/code\x3e 是对异步编程的一种抽象。它是一个代理对象，代表一个必须进行异步处理的函数返回的值或抛出的异常。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3epromise\x3c\/code\x3e 最早是在 \x3ccode\x3ecommonjs\x3c\/code\x3e 社区提出来的，当时提出了很多规范。比较接受的是 \x3ccode\x3epromise\/A\x3c\/code\x3e 规范。后来人们在这个基础上。提出了 \x3ccode\x3epromise\/A\x2b\x3c\/code\x3e规范，也就是实际上的业内推行的规范。\x3ccode\x3eECMAScript 6.0\x3c\/code\x3e 也是采用的这种规范。\x3c\/p\x3e\n\x3cp\x3e英文版：\x3ca href=\x22https:\/\/promisesaplus.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/promisesaplus.com\/\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e中文版：\x3ca href=\x22http:\/\/link.zhihu.com\/?target=http%3A\/\/www.ituring.com.cn\/article\/66566\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e【翻译】Promises\/A\x2b规范\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e上面的规范中主要定义的 \x3ccode\x3ethen\x3c\/code\x3e 的实现方式，也就是只规定了 \x3ccode\x3ePromise\x3c\/code\x3e 的核心， \x3ccode\x3ePromise.race\x3c\/code\x3e，\x3ccode\x3ePromise.all\x3c\/code\x3e 等 \x3ccode\x3eapi\x3c\/code\x3e 没有规定。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.ecma-international.org\/ecma-262\/6.0\/#sec-promise-constructor\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript 6.0 Promise.all 规范\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3eNode.js 兼容性如下图 \x3ca href=\x22http:\/\/node.green\/#ES2015-built-ins-Promise\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点击查看在线版\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVTkTi?w=2474\x26amp;h=530\x22 src=\x22https:\/\/static.alili.tech\/img\/bVTkTi?w=2474\x26amp;h=530\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e特点\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e \x3ccode\x3ePromise\x3c\/code\x3e 不需要编译器\/解释器的支持\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e将来可能成为主流的 \x3ccode\x3easync-await\x3c\/code\x3e，以及曾经火过一把的 \x3ccode\x3egenerator\x3c\/code\x3e \x2b \x3ccode\x3eco\x3c\/code\x3e，这些都是需要编译器或者解释器级别的支持才能使用。\x3c\/p\x3e\n\x3cp\x3e而 \x3ccode\x3ePromise\x3c\/code\x3e，是完全可以利用语言已有特性，作为一个库来实现！即使在非常原始的JS运行环境，你也可以自己实现一个 \x3ccode\x3ePromise\x3c\/code\x3e，而不需要等待其他人的帮助。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e \x3ccode\x3ePromise\x3c\/code\x3e 是语言无关的\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ePromise\x3c\/code\x3e 还是独立于语言的，如果你要给另外一种编程语言实现 \x3ccode\x3ePromise\x3c\/code\x3e，只要照葫芦画瓢就行了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e\n\x3ccode\x3epromise\x3c\/code\x3e 怎么用\x3c\/h2\x3e\n\x3cp\x3e请看这里，阮一峰的 \x3ca href=\x22http:\/\/es6.ruanyifeng.com\/#docs\/promise\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eECMAScript 6 入门 Promise \x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e实现 \x3ccode\x3ePromise.all\x3c\/code\x3e\n\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ePromise.all\x3c\/code\x3e 接收一个 \x3ccode\x3epromise\x3c\/code\x3e 对象的数组作为参数，当这个数组里的所有 \x3ccode\x3epromise\x3c\/code\x3e 对象全部变为\x3ccode\x3eresolve\x3c\/code\x3e或 有 \x3ccode\x3ereject\x3c\/code\x3e 状态出现的时候，它才会去调用 \x3ccode\x3e.then\x3c\/code\x3e 方法,它们是并发执行的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ePromise.all 简介\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3ePromise.all(promiseArray)\x3c\/code\x3e 方法是 \x3ccode\x3ePromise\x3c\/code\x3e 对象上的静态方法，该方法的作用是将多个 \x3ccode\x3ePromise\x3c\/code\x3e 对象实例包装，生成并返回一个新的 \x3ccode\x3ePromise\x3c\/code\x3e 实例。\x3c\/p\x3e\n\x3cp\x3e参数：\x3ccode\x3epromiseArray\x3c\/code\x3e，是一个 \x3ccode\x3ePromise\x3c\/code\x3e 实例数组\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var p1 = Promise.resolve(1),\n    p2 = Promise.resolve(2),\n    p3 = Promise.resolve(3);\nPromise.all([p1, p2, p3]).then(function (results) {\n    console.log(results);  \/\/ [1, 2, 3]\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p1 = \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n    p2 = \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e),\n    p3 = \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.all([p1, p2, p3]).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eresults\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(results);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ [1, 2, 3]\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的方法中，\x3ccode\x3epromise\x3c\/code\x3e 数组中所有的 \x3ccode\x3epromise\x3c\/code\x3e 实例都变为\x3ccode\x3eresolve\x3c\/code\x3e 的时候，该方法才会返回，并将所有结果传递 \x3ccode\x3eresults\x3c\/code\x3e 数组中。\x3ccode\x3epromise\x3c\/code\x3e 数组中任何一个 \x3ccode\x3epromise\x3c\/code\x3e 为 \x3ccode\x3ereject\x3c\/code\x3e 的话，则整个 \x3ccode\x3ePromise.all\x3c\/code\x3e 调用会立即终止，并返回一个 \x3ccode\x3ereject\x3c\/code\x3e 的新的 \x3ccode\x3epromise\x3c\/code\x3e 对象。\x3ccode\x3ereject\x3c\/code\x3e 使用示例如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var p1 = Promise.resolve(1),\n    p2 = Promise.reject(2),\n    p3 = Promise.resolve(3);\nPromise.all([p1, p2, p3]).then(function (results) {\n    \/\/then方法不会被执行\n    console.log(results);\n}).catch(function (e){\n    \/\/catch方法将会被执行，输出结果为：2\n    console.log(2);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p1 = \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n    p2 = \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e),\n    p3 = \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.all([p1, p2, p3]).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eresults\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/then方法不会被执行\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(results);\n}).catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/catch方法将会被执行，输出结果为：2\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e总结 \x3ccode\x3epromise.all\x3c\/code\x3e 的特点\x3c\/h3\x3e\n\x3cp\x3e1、接收一个 \x3ccode\x3ePromise\x3c\/code\x3e 实例的数组或具有 \x3ccode\x3eIterator\x3c\/code\x3e 接口的对象，\x3c\/p\x3e\n\x3cp\x3e2、如果元素不是 \x3ccode\x3ePromise\x3c\/code\x3e 对象，则使用 \x3ccode\x3ePromise.resolve\x3c\/code\x3e 转成 \x3ccode\x3ePromise\x3c\/code\x3e 对象\x3c\/p\x3e\n\x3cp\x3e3、如果全部成功，状态变为 \x3ccode\x3eresolved\x3c\/code\x3e，返回值将组成一个数组传给回调\x3c\/p\x3e\n\x3cp\x3e4、只要有一个失败，状态就变为 \x3ccode\x3erejected\x3c\/code\x3e，返回值将直接传递给回调\x3cbr\x3e\x3ccode\x3eall()\x3c\/code\x3e 的返回值也是新的 \x3ccode\x3ePromise\x3c\/code\x3e 对象\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e实现 \x3ccode\x3ePromise.all\x3c\/code\x3e 方法\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function promiseAll(promises) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(promises)) {\n      return reject(new TypeError(\x27arguments must be an array\x27));\n    }\n    var resolvedCounter = 0;\n    var promiseNum = promises.length;\n    var resolvedValues = new Array(promiseNum);\n    for (var i = 0; i \x3c promiseNum; i\x2b\x2b) {\n      (function(i) {\n        Promise.resolve(promises[i]).then(function(value) {\n          resolvedCounter\x2b\x2b\n          resolvedValues[i] = value\n          if (resolvedCounter == promiseNum) {\n            return resolve(resolvedValues)\n          }\n        }, function(reason) {\n          return reject(reason)\n        })\n      })(i)\n    }\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epromiseAll\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3epromises\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!isArray(promises)) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e reject(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eTypeError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27arguments must be an array\x27\x3c\/span\x3e));\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e resolvedCounter = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e promiseNum = promises.length;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e resolvedValues = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(promiseNum);\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; promiseNum; i\x2b\x2b) {\n      (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(promises[i]).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3evalue\x3c\/span\x3e) \x3c\/span\x3e{\n          resolvedCounter\x2b\x2b\n          resolvedValues[i] = value\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (resolvedCounter == promiseNum) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e resolve(resolvedValues)\n          }\n        }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereason\x3c\/span\x3e) \x3c\/span\x3e{\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e reject(reason)\n        })\n      })(i)\n    }\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3enpms 地址 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/promise-all-simple\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epromise-all-simple\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e参考\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.jianshu.com\/p\/48e193c4662e\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e自己动手实现ES6 Promise\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/liubin.org\/promises-book\/#ch2-promise-all\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript Promise迷你书\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/itbilu.com\/javascript\/js\/41KMSZ9a.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePromise对象Promise.all()方法的使用\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/25178630\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入 Promise(一)——Promise 实现详解\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/coderlt.coding.me\/2016\/12\/03\/promise-in-depth-an-introduction-1\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入理解 Promise (上)\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e扩展阅读\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/i5ting.github.io\/asynchronous-flow-control\/#101\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入浅出js（Node.js）异步流程控制\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>实现 JavaScript 异步方法 Promise.all</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010765655">https://segmentfault.com/a/1190000010765655</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4lnepr5d5zl/" target="_blank">https://alili.tech/archive/4lnepr5d5zl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>