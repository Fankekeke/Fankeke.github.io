<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="简单的canvas翻角效果"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>简单的canvas翻角效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/4mfu8fkswc9/",
				"appid": "1613049289050283", 
				"title": "简单的canvas翻角效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-25T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/l7nuulsjwd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/b6rib2ef08p/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&text=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&text=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&title=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&is_video=false&description=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&title=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&title=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&title=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f4mfu8fkswc9%2f&title=%e7%ae%80%e5%8d%95%e7%9a%84canvas%e7%bf%bb%e8%a7%92%e6%95%88%e6%9e%9c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">简单的canvas翻角效果</h1><div class="meta"><div class="postdate"><time datetime="2018-12-25" itemprop="datePublished">2018-12-25</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e由于工作需求 , 需要写一个翻角效果;\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVYVm4?w=135\x26amp;h=127\x22 src=\x22https:\/\/static.alili.tech\/img\/bVYVm4?w=135\x26amp;h=127\x22 alt=\x22翻角效果图\x22 title=\x22翻角效果图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/jsbin.com\/rereqes\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3edemo链接\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e右上角需要从无的状态撕开一个标记 , 且有动画过程 , 上图是实现的效果图 , 不是gif\x3c\/p\x3e\n\x3cp\x3e对这个翻角效果的难点在于没有翻开的时候露出的是dom下面的内容 , 实现角度来说 纯dom \x2b css动画的设计方案并没有相出一个好的对策 ; 于是捡起了好久之前学的入门级别的canvas;\x3c\/p\x3e\n\x3cp\x3e下面说一下实现思路:\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e动画拆分 :\x3cbr\x3e将此动画分解成两部分 , 一部分是翻页出现的黑色三角区域 , 另一个是露出的橘色展示内容\x3cbr\x3e对于橘色的展示内容区域相对好一些 , 因为是一个规则图形 , 而黑色区域相对较难;\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e先从基础canvas使用方法说起 :\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;container\x26quot;\x3e\n    \x3ccanvas class=\x26quot;myCanvas\x26quot; width=\x26quot;100\x26quot; height=\x26quot;100\x26quot;\x3e\x3c\/canvas\x3e\n\x3c\/div\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e class=\x3cspan class=\x22hljs-string\x22\x3e\x22container\x22\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ecanvas\x3c\/span\x3e class=\x3cspan class=\x22hljs-string\x22\x3e\x22myCanvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22100\x22\x3c\/span\x3e height=\x3cspan class=\x22hljs-string\x22\x3e\x22100\x22\x3c\/span\x3e\x26gt;\x26lt;\/canvas\x26gt;\n\x26lt;\/div\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e布局如上 , 这里要说一点踩过的坑是 , canvas必须要设置上width 与 height , 此处并非为css中的width与height;而是写在dom上的属性 ; \x3cstrong\x3e因为dom上的width与height标识了canvas的分辨率(个人理解)\x3c\/strong\x3e; 所以此canvas画布分辨率为100*100 , 而展示尺寸是可以通过css控制;\x3c\/p\x3e\n\x3cp\x3ejs中首先要做的是获取canvas对象 ,\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var canvas = document.querySelector(\x27.myCanvas\x27); \/\/获取canvas对应dom\nvar ctx = canvas.getContext(\x272d\x27); \/\/此方法较为基础 , 意为获取canvas绘画2d内容的工具(上下文)\nvar cw = 100; \/\/分辨率 , 其实直接从dom上获取可能更好些\nvar ch = 100; \/\/分辨率 , 其实直接从dom上获取可能更好些\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3equerySelector\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.myCanvas\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取canvas对应dom\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ctx = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/此方法较为基础 , 意为获取canvas绘画2d内容的工具(上下文)\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cw = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/分辨率 , 其实直接从dom上获取可能更好些\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ch = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/分辨率 , 其实直接从dom上获取可能更好些\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ectx这个绘画上下文在这个教程中起到的作用至关重要 ;  它提供了非常强大的api , 比如用于画线 , 填充 , 写文字等 , 这样看来理解为画笔会更为简明一些;\x3c\/p\x3e\n\x3cp\x3e此处效果需要用到的api如下 ( 不做详细解释 , 可w3c自行查询 );\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.save() \/\/保存上下文状态 (比如画笔尺寸 颜色 旋转角度)\nctx.restore() \/\/返回上次保存的上下文状态\nctx.moveTo(x,y) \/\/上下文移动到具体位置\nctx.lineTo(x,y) \/\/上下文以划线的形式移动到某位置\nctx.stroke() \/\/ 画线动作\nctx.quadraticCurveTo() \/\/上下文(画笔)按贝塞尔曲线移动(简单理解为可控的曲线即可)\nctx.arc() \/\/画圆\nctx.beginPath() \/\/开启新的画笔路径\nctx.closePath() \/\/关闭当前画笔路径\nctx.createLinearGradient() \/\/创建canvas渐变对象\nctx.fill() \/\/对闭合区域进行填充\nctx.globalCompositeOperation \/\/画笔的重叠模式\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.save\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/保存上下文状态 (比如画笔尺寸 颜色 旋转角度)\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.restore\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/返回上次保存的上下文状态\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.moveTo\x3c\/span\x3e(x,y) \x3cspan class=\x22hljs-comment\x22\x3e\/\/上下文移动到具体位置\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.lineTo\x3c\/span\x3e(x,y) \x3cspan class=\x22hljs-comment\x22\x3e\/\/上下文以划线的形式移动到某位置\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.stroke\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 画线动作\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.quadraticCurveTo\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/上下文(画笔)按贝塞尔曲线移动(简单理解为可控的曲线即可)\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.arc\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/画圆\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.beginPath\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/开启新的画笔路径\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.closePath\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/关闭当前画笔路径\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.createLinearGradient\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/创建canvas渐变对象\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.fill\x3c\/span\x3e() \x3cspan class=\x22hljs-comment\x22\x3e\/\/对闭合区域进行填充\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.globalCompositeOperation\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/画笔的重叠模式\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可能方法列举的不够详尽 , 见谅.\x3c\/p\x3e\n\x3cp\x3e首先是绘制黑色翻出的部分 , 图形分解为如下几部分(请根据上图脑补)\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e左上角向右下的半弧 ╮\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e然后是竖直向下的竖线 |\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e然后是向右的半圆   ╰\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e再然后是向右的横线\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e接着还是向右下的半弧 ╮\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e最后是将线连接会起点\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e于是第一步 我们要先将画笔移动到 起始位置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   ctx.moveTo(50,0);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e   ctx.moveTo(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.quadraticCurveTo(55 , 5 , 55 , 25); \/\/ 可以理解为从(50,0)这个点划线到(55,25)这个点 , 中间会受到(55,5)这个点将直线想磁铁一样\x26quot;吸\x26quot;成曲线;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.quadraticCurveTo(\x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以理解为从(50,0)这个点划线到(55,25)这个点 , 中间会受到(55,5)这个点将直线想磁铁一样\x22吸\x22成曲线;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e于是第一个向右下的半弧完成 , 此时canvas上没有任何绘制内容 , 因为还没有执行过绘制方法例如stroke或fill,\x3c\/p\x3e\n\x3cp\x3e接下来直线向下就是简单的移动\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.lineTo(55 , 40);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个时候我们接下来应该画向右的半圆 ,  这个时候再用贝塞尔曲线绘制 实在有些不太合适 , 因为从图上来看 , 这里完全是1\/4的圆 , 所以要使用canvas提供的画圆的api\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.arc(60 , 40 , 5 , Math.PI , Math.PI \/ 2 , true);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.arc(\x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e , Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e , Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e , true);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述画圆的代码意为 : 以(60,40)点为圆心 , 5为半径 , 逆时针从 180度绘制到90度 , 180度就是圆心的水平向左 到达点(55,40) , 与上一步连接上 , 然后又因为屏幕向下为正 , 90度在圆心正下方 , 所以绘制出此半圆\x3c\/p\x3e\n\x3cp\x3e于是按照相同的步骤 水平向右\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.lineTo(75 , 45);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e75\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后再次使用贝塞尔曲线用第一步的思路画出向右下的弧;\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.quadraticCurveTo( 95 , 45 , 100 , 50 );\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.quadraticCurveTo( \x3cspan class=\x22hljs-number\x22\x3e95\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e );\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同理 上述贝塞尔曲线可以理解为一条从( 75 , 45 ) 到 ( 100 , 50 )的线被 ( 95 , 45 )\x22吸\x22成曲线\x3c\/p\x3e\n\x3cp\x3e最后链接起点 , 闭合绘画区域\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.lineTo(50 , 0);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个时候黑色区域的翻页就画完了 , 然后此时开始填充颜色 ;\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var gradient = ctx.createLinearGradient(50 , 50 , 75 , 75);\ngradient.addColorStop(0 , \x27#ccc\x27);\ngradient.addColorStop(0.7 , \x27#111\x27);\ngradient.addColorStop(1 , \x27#000\x27);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3evar gradient = ctx.createLinearGradient(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e75\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e75\x3c\/span\x3e);\ngradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e , \x27#ccc\x27);\ngradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e , \x27#\x3cspan class=\x22hljs-number\x22\x3e111\x3c\/span\x3e\x27);\ngradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e , \x27#\x3cspan class=\x22hljs-number\x22\x3e000\x3c\/span\x3e\x27);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们通过上述代码创建一个 从( 50 , 50 )点到(75 , 75)点的线性渐变 , 颜色从 #ccc 到 #111 到 #000 ; 创建高光效果;\x3cbr\x3e然后填充:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.fillStyle = gradient;\nctx.fill();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs abnf\x22\x3e\x3ccode\x3ectx.fillStyle = gradient\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\nctx.fill()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e于是翻页效果的一半就算完成了。\x3c\/p\x3e\n\x3cp\x3e至此 , 我要说一点我领悟的canvas的绘画\x22套路\x22;\x3c\/p\x3e\n\x3cp\x3e对于上述教程中 , 有一步我们使用了一个词叫做 闭合 , 闭合的概念在canvas中是真是存在的 , 对于fill方法来说 填充的区间是有一个空间尺寸才可以的 , 比如我们绘画的这个黑色的三角形 , 加入我们最后没有将终点与起点相连接 , 同样canvas会自动帮我们链接最后一笔绘画的位置到起点 , 强制行程闭合空间 , 而这样我们想再多画几个新的闭合空间就麻烦了 , 所以canvas提供了如下api 新建闭合路径:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.beginPath(); \/\/新建路径\nctx.closePath(); \/\/闭合路径\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.beginPath\x3c\/span\x3e(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/新建路径\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3ectx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.closePath\x3c\/span\x3e(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/闭合路径\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以对于我们接下来要绘制右上角橘色区域来说 , 我们在绘制黑色区域之前首先要做的是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.beginPath();\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs erlang\x22\x3e\x3ccode\x3ectx.\x3cspan class=\x22hljs-keyword\x22\x3ebegin\x3c\/span\x3ePath();\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在fill之前 我们应该\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.closePath();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs abnf\x22\x3e\x3ccode\x3ectx.closePath()\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也就是说beginPath 到 closePath之间标识着我们自己的一个完整的绘画阶段.\x3c\/p\x3e\n\x3cp\x3e那么接下来绘制右上角的橘色区域就简单很多了:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.beginPath();\nctx.moveTo(50,0);\nctx.lineTo(100,50);\nctx.lineTo(100,0);\nctx.lineTo(50,0);\nctx.closePath();\nctx.fillStyle = \x27#ff6600\x27;\nctx.fill();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3ectx.beginPath();\nctx.moveTo(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\nctx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e);\nctx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\nctx.lineTo(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\nctx.closePath();\nctx.fillStyle = \x27#ff6600\x27;\nctx.fill();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e于是右上角的橘色区域我们就绘制完成了;\x3c\/p\x3e\n\x3cp\x3e文字绘制\x3c\/p\x3e\n\x3cp\x3e接下来绘制\x22new\x22 , 实际上是使用canvas简单的文本绘制 , 代码如下:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var deg = Math.PI \/ 180;\nctx.globalCompositeOperation = \x27source-atop\x27; \/\/canvas层叠模式\nctx.beginPath();\nctx.font = \x2714px Arial\x27; \/\/设置字体大小 字体\nctx.textAlign = \x27center\x27; \/\/ 字体对齐方式\nctx.translate(78 , 22);  \/\/ 移动canvas画布圆点\nctx.rotate(45 * deg);    \/\/ 旋转画布\nctx.fillStyle = \x27#fff\x27;  \/\/ 设置文字颜色\nctx.fillText(\x27NEW\x27 , 0 , 0); \/\/文字绘制动作\nctx.closePath();\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3evar deg = Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e;\nctx.globalCompositeOperation = \x3cspan class=\x22hljs-string\x22\x3e\x27source-atop\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/canvas层叠模式\x3c\/span\x3e\nctx.beginPath();\nctx.font = \x3cspan class=\x22hljs-string\x22\x3e\x2714px Arial\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置字体大小 字体\x3c\/span\x3e\nctx.\x3cspan class=\x22hljs-built_in\x22\x3etextAlign\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27center\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 字体对齐方式\x3c\/span\x3e\nctx.\x3cspan class=\x22hljs-built_in\x22\x3etranslate\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e78\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 移动canvas画布圆点\x3c\/span\x3e\nctx.\x3cspan class=\x22hljs-built_in\x22\x3erotate\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e * deg);    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转画布\x3c\/span\x3e\nctx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27#fff\x27\x3c\/span\x3e;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置文字颜色\x3c\/span\x3e\nctx.fillText(\x3cspan class=\x22hljs-string\x22\x3e\x27NEW\x27\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e , \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/文字绘制动作\x3c\/span\x3e\nctx.closePath();\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对于上述代码中 , 文字的相关api是属于没有难度的 , 只是设置而已 , 需要理解的部分在于 translate和rotate,\x3c\/p\x3e\n\x3cp\x3e这两个方法中 translate的意思为移动canvas画布的( 0 , 0 )点到 (78,22),然后旋转45度, 再将文字渲染在原点 , 实际就是 ( 78 , 22 ) 这个点上, 此时我们对canvas的画笔做出了非常大的修改 \x3c\/p\x3e\n\x3cp\x3e比如我们修改了旋转角度以及画布圆点 , 这种操作或许只在我们需要绘制倾斜的new 的时候需要 , 后期可能就不需要使用了 ,\x3c\/p\x3e\n\x3cp\x3e还好canvas的画笔是存在\x22状态\x22的, 通过ctx.save();可以保存当前画笔的状态 , 通过ctx.restore();可以恢复到上次画笔保存的状态.\x3c\/p\x3e\n\x3cp\x3e于是我个人理解到 , 在开发canvas动画时 , 一个较好的习惯就是 , 在beginPath之前先ctx.save();保存画笔状态 , 在closePath后ctx.restore();恢复之前的画笔状态 , 这样我们的每一个绘制阶段对于画笔的修改都将是不会有影响的.( 个人经验 )\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.globalCompositeOperation = \x27source-atop\x27; \/\/canvas层叠模式\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3ectx.globalCompositeOperation = \x3cspan class=\x22hljs-string\x22\x3e\x27source-atop\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/canvas层叠模式\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e代码中这部分是指 我们绘制的文字new 与 橘色三角形区域的重叠关系 , 此方法取值较多 , 此处不做过多介绍 , source-atop值可以使重叠区域保留 , 新绘制的内容在重叠区域以外的部分消失 , 以此达到new在里面的效果\x3c\/p\x3e\n\x3cp\x3e到这里我们就开发好了翻角效果的完全展示的状态 , 那么如何让这个区域动起来呢?\x3c\/p\x3e\n\x3cp\x3e此处需要使用h5提供的用于刷帧的函数 requestAnimationFrame ;\x3c\/p\x3e\n\x3cp\x3e此方法可简单理解为 16毫秒的定时器 , 但是厉害的是可以再各个环境中自动匹配到可达到的相对顺畅的帧率 , 实际并不是定时器哈~\x3c\/p\x3e\n\x3cp\x3e我们需要在这个循环执行的函数中 , 将上述的绘制内容重复绘制 , 例如 :\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw(){\n    drawMethod(); \/\/绘制三角等内容\n    window.requestAnimationFrame(function(){\n        draw();\n    })\n}\nfunction drawMethod(){\n    \/\/...\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    drawMethod(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/绘制三角等内容\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        draw();\n    })\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawMethod\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样我们就可以达到刷帧的效果了 , 于是接着我们要做的就是控制绘制时各个数值的参数.\x3c\/p\x3e\n\x3cp\x3e比如我们是以 (50,0)为起点 , ( 100 , 50 )为终点这样的两个移动点为绘制标记的 , 如果我们将两个点进行存储 , 并且每次执行drawMethod的时候更新点的位置 , 然后清空canvas ,再绘制新的点 那么就可以达到canvas动起来的目的了;\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/jsbin.com\/rereqes\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e实际效果链接在这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在上面的demo链接中 , 自己定义了一个速度与加速度的关系 , 比如每次绘制一次canvas后 , 将存储的点坐标进行增加一个speed值 , 然后speed值也增加 , 这样speed对应的概念就是速度 , 而speed的增加值对应的就是加速度. 所以就呈现了一种加速运动的状态;\x3c\/p\x3e\n\x3cp\x3e以上内容纯属个人理解内容 , 若果有哪里理解错了 欢迎各位大大指点 , 另demo链接失效可私信.\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>简单的canvas翻角效果</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012101315">https://segmentfault.com/a/1190000012101315</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/4mfu8fkswc9/" target="_blank">https://alili.tech/archive/4mfu8fkswc9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>