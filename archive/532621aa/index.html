<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React v16.4.0: 指针事件 - React Blog"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React v16.4.0: 指针事件 - React Blog | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/532621aa/",
				"appid": "1613049289050283", 
				"title": "React v16.4.0: 指针事件 - React Blog | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-20T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/414ae069/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/6adc68c9/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&text=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&text=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&title=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&is_video=false&description=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f532621aa%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&title=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&title=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&title=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f532621aa%2f&title=React%20v16.4.0%3a%20%e6%8c%87%e9%92%88%e4%ba%8b%e4%bb%b6%20-%20React%20Blog"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React v16.4.0: 指针事件 - React Blog</h1><div class="meta"><div class="postdate"><time datetime="2018-10-20" itemprop="datePublished">2018-10-20</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3eMay 23, 2018 by \x3ca href=\x22https:\/\/twitter.com\/acdlite\x22\x3eAndrew Clark\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e最新的版本增加了对经常请求的功能的支持：指针事件！\x3c\/p\x3e\n\x3cp\x3e它还包括getDerivedStateFromProps的错误修正。查看下面的完整\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#changelog\x22\x3e更新日志\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch2\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#pointer-events\x22\x3e\x3c\/a\x3e指针事件\x3c\/h2\x3e\n\x3cp\x3eReact DOM中现在提供以下事件类型：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eonPointerDown\x3c\/li\x3e\n\x3cli\x3eonPointerMove\x3c\/li\x3e\n\x3cli\x3eonPointerUp\x3c\/li\x3e\n\x3cli\x3eonPointerCancel\x3c\/li\x3e\n\x3cli\x3eonGotPointerCapture\x3c\/li\x3e\n\x3cli\x3eonLostPointerCapture\x3c\/li\x3e\n\x3cli\x3eonPointerEnter\x3c\/li\x3e\n\x3cli\x3eonPointerLeave\x3c\/li\x3e\n\x3cli\x3eonPointerOver\x3c\/li\x3e\n\x3cli\x3eonPointerOut\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e请注意，这些事件仅适用于支持\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Pointer_events\x22\x3e指针事件\x3c\/a\x3e 规范的浏览器。 （在撰写本文时，这包括最新版本的Chrome，Firefox，Edge和Internet Explorer。）如果您的应用程序依赖于指针事件，我们建议使用第三方指针事件polyfill。我们选择不在React DOM中包含这样的polyfill，以避免增加bundle大小。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codesandbox.io\/api\/v1\/sandboxes\/define?parameters=N4IgZglgNgpgziAXKADgQwMYGs0HMYB0AVnAPYB2SoGFALjObVSACYwoNvkYTzMBOMTE0QgoaenCYAaEIOEBaFqQC2SMRPhMAvrtkRybAB7EEyEDUYMRICCpSl-tAAQAlIRhdh-q5wHJ5Tz8AbgAdcjsHJzcPWgARAHkAWWdvXwDYpVUQ8PDLKWcAYQBJV0KAGQBRAH0AZWKALUrnAF5nAA4AVjDyPPE4OGc4_jwAIVIjZxgjekNB92ECQtUHcmtnYHDnZylNVo2t7ecACzQ4QrQUWgBXQURUtCg4GGlD7Z5-DFhymDBae_aAAZXuQjs4Pl8YAAVUgoAHAw7aHrbCBwYZ4XAGXD7MCPZ7I5woQQANwgpGucB-f32gIJRJgpPJcBhKBpPUOFDipAA7qC2gz1i0AHwHUFHWjHVEEVHo3CY8jYtq0fjXGAE7YCxgEWhofj4WgEZ60AAKpAM9H4FyutxgAApNQaHOaYPxiiwAJTssXbAD0PucAHUYDtaI5gxLgwYILQII9waRHCwDJpBqHnAAjYNodOwZxpjCPDDXcT0PPHYMYU4K-BvZx-5wll3OCgEWsSqXTZXCU1waNk8hxGBQHX24nWT2Ir3bChJUhj_YO1oizbe5wQMDOW0AQnbcGlaJGcqx7tFYO2ghu_HI6uc2lr-RcwFgf2kedh2n2u4InZGnh7fc5IcRwdCdelXL8jVqHV6FtW1gAhb5floV8EOhd8T2FTcVzPcEIE-RC_nuVCqRcABqBskJBHDUJZIi8MhFlnHI0MUCoo5tHdUDtiRXIxQoABVVl-THRgl03L8ZUPeVFQeJ4YC45tyAAcVIWgrUvYNhMFEUIJgWgoM0ODTnOS4NPuZVVQ4gkKHKUgpHUm0FxElxhTbSU90g6C7WAYyHLuWTnis3iNRmX8TTsgCByAtAnO008jgfCjqS0rV0HwAANG9EpY2LUrwGAAE0sooAo2GHGK2mws9n3-JKXAUMspXpRkKRItiwRY8zYWcBqv2askKRZdrbxvPqSQGykkP2GrRvcgh-qZRilVhG8L1uUEyp1AkeLA89OBdW0Tyq94SsfXzTJtFD6II5DcPwtCUA_JU5t2egpwS06MwmKCAE9c0q2ttnTRMXXuPwAEYUEmMgoAgFhnAAYhYABOFGUb8YbthUXV5TB8HASh5xAWcAAmAmjAxwHnBUAwAAkYAgXBjlqgAWQEEVXbZuThiU8fZgBSSnOcJCKYwoMHBBLCAxyFsEdvvT7UN-_74rBbmWF5opSgqGp6iaTGTgZpnapKMoqjqRpKgN4H-DYfhXDQJMKXuU2dYtpo61Jg2HF7MXyDB7MYeuehZeqpC6Putqqc6u6GNha3MCwXAfGuQxligRx7nO61BGcAB-fwc1VPxnDB5OYAYUOOvJSsAEFPH7MHyAoGAq5G4KjjWq9NypgAeJNiRDP6YBaYBgaMZWYG0IUqe2fvpdno4pGH0eldoYe72FsEKFNZ1-C5XlR6_TkeXITecO38hd6sfhZzHI-5pnOcp8X6cr7NG_BIfqUBMe1_FOvhaC43Ahzfz3L_c-F834qXCnvPyI9gDH2UqpeBkCoE2TsrAm-8CwEEAwfZC6gg0Fnh9DPYWvcfQDzIWCBSm9N7hAWJ4RISQCCCEMAdQ4vdZTjEmKQtiygiwqGsAQfUlRYBCMYKMH6bpbQBATLQPw7pwigRANofQ7CTDMxUFAZglhZg2HnoPOGLRQhyHkaYoUFCqGqN0EAA\x22\x3e在CodeSandbox中参看实例\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e非常感谢\x3ca href=\x22https:\/\/github.com\/philipp-spiess\x22\x3ePhilipp Spiess\x3c\/a\x3e为此做出贡献！\x3c\/p\x3e\n\x3ch2\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#bugfix-for-getderivedstatefromprops\x22\x3e\x3c\/a\x3egetDerivedStateFromProps的修改\x3c\/h2\x3e\n\x3cp\x3e无论更新的原因如何，每次呈现组件时都会调用getDerivedStateFromProps。以前，只有在组件由其父组件重新呈现时才会调用它，并且不会因本地setState而触发。这是对最初实施的疏忽，现在已得到纠正。之前的行为更类似于componentWillReceiveProps，但改进的行为确保了与React即将推出的异步呈现模式的兼容性。\x3c\/p\x3e\n\x3cp\x3e此错误修复不会影响大多数应用程序，但它可能会导致一小部分组件出现问题。其重要的罕见情况分为两类：\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#1-avoid-side-effects-in-getderivedstatefromprops\x22\x3e\x3c\/a\x3e1. 避免在getDerivedStateFromProps中出现副作用\x3c\/h3\x3e\n\x3cp\x3e与render方法一样，getDerivedStateFromProps应该是props和state的纯函数。 getDerivedStateFromProps中的副作用从未受到支持，但由于它现在比以前更频繁地触发，因此最近的更改可能会暴露以前未发现的错误。\x3c\/p\x3e\n\x3cp\x3e应将副作用代码移动到其他方法：例如，Flux调度通常属于原始事件处理程序，手动DOM突变属于componentDidMount或componentDidUpdate。您可以在我们最近关于\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/03\/27\/update-on-async-rendering.html\x22\x3e准备异步呈现\x3c\/a\x3e的帖子中阅读更多相关信息。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#2-compare-incoming-props-to-previous-props-when-computing-controlled-values\x22\x3e\x3c\/a\x3e2. 在计算受控值时将传入的props与先前的props进行比较\x3c\/h3\x3e\n\x3cp\x3e以下代码假定getDerivedStateFromProps仅触发prop的更改：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs pf\x22\x3estatic getDerivedStateFromProps(props, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e) {\n  if (props.value !== \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.controlledValue) {\n    return {\n      \/\/ Since this method fires \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e both props and \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e changes, local updates\n      \/\/ \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e the controlled value will be ignored, because the props version\n      \/\/ always overrides it. Oops!\n      controlledValue: props.value,\n    };\n  }\n  return null;\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e解决此问题的一种可能方法是通过将以前的props存储在状态中来比较传入值与之前的值：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs pf\x22\x3estatic getDerivedStateFromProps(props, \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e) {\n  const prevProps = \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.prevProps;\n  \/\/ Compare the incoming prop \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e previous prop\n  const controlledValue =\n    prevProps.value !== props.value\n      ? props.value\n      : \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e.controlledValue;\n  return {\n    \/\/ Store the previous props \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e\n    prevProps: props,\n    controlledValue,\n  };\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e但是，无论是使用较新的getDerivedStateFromProps还是遗留的componentWillReceiveProps，在state“镜像”props的代码通常都包含错误。我们发布了一篇后续博客文章，更详细地解释了这些问题，并提出了不涉及getDerivedStateFromProps（）的\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/06\/07\/you-probably-dont-need-derived-state.html\x22\x3e更简单的解决方案\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch2\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#installation\x22\x3e\x3c\/a\x3e安装\x3c\/h2\x3e\n\x3cp\x3e可以在npm上安装React v16.4.0\x3c\/p\x3e\n\x3cp\x3e也可以使用yaran安装React 16，执行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3eyarn add react@^\x3cspan class=\x22hljs-number\x22\x3e16.4\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.0\x3c\/span\x3e react-dom@^\x3cspan class=\x22hljs-number\x22\x3e16.4\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.0\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e要使用npm安装React 16，请运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3enpm install --save react@^\x3cspan class=\x22hljs-number\x22\x3e16.4\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.0\x3c\/span\x3e react-dom@^\x3cspan class=\x22hljs-number\x22\x3e16.4\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e.0\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e我们还通过CDN提供了反应的UMD版本：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecrossorigin\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/unpkg.com\/react@16\/umd\/react.production.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecrossorigin\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/unpkg.com\/react-dom@16\/umd\/react-dom.production.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e有关详细的安装说明，\x3ca href=\x22https:\/\/reactjs.org\/docs\/installation.html\x22\x3e请参阅文档\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch2\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#changelog\x22\x3e\x3c\/a\x3e\x3c\/h2\x3e\n\x3cp\x3e更新日志\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#react\x22\x3e\x3c\/a\x3eReact\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e添加一个新的\x3ca href=\x22https:\/\/github.com\/reactjs\/rfcs\/pull\/51\x22\x3e实验\x3c\/a\x3e 性React.unstable_Profiler组件以测量性能。 (\x3ca href=\x22https:\/\/github.com\/bvaughn\x22\x3e@bvaughn\x3c\/a\x3e 在 \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12745\x22\x3e#12745\x3c\/a\x3e)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#react-dom\x22\x3e\x3c\/a\x3eReact DOM\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e添加对Pointer Events规范的支持。(\x3ca href=\x22https:\/\/github.com\/philipp-spiess\x22\x3e@philipp-spiess\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12507\x22\x3e#12507\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e无论重新渲染的原因如何，都要正确调用getDerivedStateFromProps（） 。(\x3ca href=\x22https:\/\/github.com\/acdlite\x22\x3e@acdlite\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12600\x22\x3e#12600\x3c\/a\x3e and \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12802\x22\x3e#12802\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e修复了在某些情况下阻止上下文传播的错误。 (\x3ca href=\x22https:\/\/github.com\/gaearon\x22\x3e@gaearon\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12708\x22\x3e#12708\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e修复在更深的setState（）上使用forwardRef（）重新渲染组件的问题。 (\x3ca href=\x22https:\/\/github.com\/gaearon\x22\x3e@gaearon\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12690\x22\x3e#12690\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e修复一些属性错误地从自定义元素节点中删除。(\x3ca href=\x22https:\/\/github.com\/airamrguez\x22\x3e@airamrguez\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12702\x22\x3e#12702\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e如果上面有遗留上下文提供程序，修复上下文提供程序不要对子项进行纾困。(\x3ca href=\x22https:\/\/github.com\/gaearon\x22\x3e@gaearon\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12586\x22\x3e#12586\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e添加在上下文提供程序组件上指定propTypes的功能。(\x3ca href=\x22https:\/\/github.com\/nicolevy\x22\x3e@nicolevy\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12658\x22\x3e#12658\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e在\x3ccode\x3e\x26lt;StrictMode\x26gt;\x3c\/code\x3e中使用react-lifecycles-compat时修复误报警告. (\x3ca href=\x22https:\/\/github.com\/bvaughn\x22\x3e@bvaughn\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12644\x22\x3e#12644\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e当forwardRef（）render函数具有propTypes或defaultProps时发出警告。(\x3ca href=\x22https:\/\/github.com\/bvaughn\x22\x3e@bvaughn\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12644\x22\x3e#12644\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e改进forwardRef（）和上下文使用者在组件堆栈中的显示方式。(\x3ca href=\x22https:\/\/github.com\/sophiebits\x22\x3e@sophiebits\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12777\x22\x3e#12777\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e更改内部事件名称。这可能会破坏以不受支持的方式依赖React内部的第三方软件包。(\x3ca href=\x22https:\/\/github.com\/philipp-spiess\x22\x3e@philipp-spiess\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12629\x22\x3e#12629\x3c\/a\x3e)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#react-test-renderer\x22\x3e\x3c\/a\x3eReact Test Renderer\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e修复getDerivedStateFromProps（）支持以匹配新的React DOM行为。(\x3ca href=\x22https:\/\/github.com\/koba04\x22\x3e@koba04\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12676\x22\x3e#12676\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e当父级是片段或其他特殊节点时，修复testInstance.parent崩溃。\n(\x3ca href=\x22https:\/\/github.com\/gaearon\x22\x3e@gaearon\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12813\x22\x3e#12813\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3e现在，测试渲染器遍历方法可以发现forwardRef（）组件。(\x3ca href=\x22https:\/\/github.com\/gaearon\x22\x3e@gaearon\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12725\x22\x3e#12725\x3c\/a\x3e)\x3c\/li\x3e\n\x3cli\x3eShallow渲染器现在忽略返回null或undefined的setState（）更新程序。(\x3ca href=\x22https:\/\/github.com\/koba04\x22\x3e@koba04\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12756\x22\x3e#12756\x3c\/a\x3e)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#react-art\x22\x3e\x3c\/a\x3eReact ART\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e修复从React DOM管理的树提供的读取上下文。\n(\x3ca href=\x22https:\/\/github.com\/acdlite\x22\x3e@acdlite\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12779\x22\x3e#12779\x3c\/a\x3e)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3\x3e\x3ca href=\x22https:\/\/reactjs.org\/blog\/2018\/05\/23\/react-v-16-4.html#bugfix-for-getderivedstatefromprops\/#react-call-return-experimental\x22\x3e\x3c\/a\x3eReact Call Return (Experimental)\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e此实验已删除，因为它影响了捆绑包大小，并且API不够好。它可能会以某种其他形式回到未来。\n(\x3ca href=\x22https:\/\/github.com\/gaearon\x22\x3e@gaearon\x3c\/a\x3e in \x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/12820\x22\x3e#12820\x3c\/a\x3e)\x3c\/li\x3e\n\x3c\/ul\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/react-v16-4-0-pointer-events-react-blog">https://www.zcfy.cc/article/react-v16-4-0-pointer-events-react-blog</a> 原文标题: React v16.4.0: 指针事件 - React Blog 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/532621aa/" target="_blank">https://alili.tech/archive/532621aa/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>