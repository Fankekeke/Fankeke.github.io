<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="原生js实现简单的下拉刷新功能"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>原生js实现简单的下拉刷新功能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/5in4e6tf5rj/",
				"appid": "1613049289050283", 
				"title": "原生js实现简单的下拉刷新功能 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-09T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/qvanrrke00r/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/io3i0sq1yin/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&text=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&text=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&title=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&is_video=false&description=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&title=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&title=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&title=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5in4e6tf5rj%2f&title=%e5%8e%9f%e7%94%9fjs%e5%ae%9e%e7%8e%b0%e7%ae%80%e5%8d%95%e7%9a%84%e4%b8%8b%e6%8b%89%e5%88%b7%e6%96%b0%e5%8a%9f%e8%83%bd"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">原生js实现简单的下拉刷新功能</h1><div class="meta"><div class="postdate"><time datetime="2018-12-09" itemprop="datePublished">2018-12-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前言：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22我们在浏览移动端web页面的时候，经常会用到下拉刷新。\n现在我们用原生的js实现这个非常简单的下拉刷新功能。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs x86asm\x22\x3e\x3ccode\x3e我们在浏览移动端web页面的时候，经常会用到下拉刷新。\n现在我们用原生的\x3cspan class=\x22hljs-keyword\x22\x3ejs\x3c\/span\x3e实现这个非常简单的下拉刷新功能。\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（温馨提示：本文比较基础，功能也很简单。写的不好的地方，希望大神提点一二。）\x3c\/p\x3e\n\x3cp\x3e一、创建简单的html页面：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6y0u?w=299\x26amp;h=71\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6y0u?w=299\x26amp;h=71\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e假设代码里的float-box是一个主页面。\x3c\/p\x3e\n\x3cp\x3e二、封装下拉刷新的功能模块：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22（1）首先创建一个Slide构造函数，用来初始化属性与函数。\nfunction Slide(dom){\n    this.start_y=null;\/\/手指滑动屏幕的初始位置\n    this.end_y=null;\/\/手指滑动屏幕的结束位置\n    this.render(dom);\/\/初始化下拉功能的render函数，这里的dom参数是你的主页面。\n}\n（2）编写render函数\nrender函数是用来动态创建下拉刷新的动画图。现在我们在Slide原型上编写render函数。\n    Slide.prototype={\n    render:function(dom){\n        \/\/拿到body节点\n        var body = document.getElementsByTagName(\x27body\x27);\n        \/\/创建div，用来显示下拉效果。这个div有\x27正在刷新。。\x27 和 \x27下拉刷新\x27 这个两个子节点。\n        var newItem = document.createElement(\x27div\x27);\n        \/\/给div设置class属性，该class是下拉效果的样式\n        newItem.className = \x27slide-wrap\x27;\n        \/\/利用innerHTML将  \x27正在刷新。。。\x27 和 \x27下拉刷新\x27 这两个子节点插入到上面创建的div中。\n        newItem.innerHTML = \x27\x3cdiv class=\x26quot;slided\x26quot;\x3e正在刷新。。。\x3c\/div\x3e\x27\x2b\x27\x3cdiv class=\x26quot;sliding\x26quot;\x3e下拉刷新\x3c\/div\x3e\x27;\n        \/\/然后将创建的div插入到主页面的前面\n        body[0].insertBefore(newItem,dom[0]);\n        \/\/获取创建完成的下拉刷新div\n        var dom2 = document.getElementsByClassName(\x27slide-wrap\x27);\n        \/\/运行slide_start（）\n        this.slide_start(dom2);\n    \x22}}\x22\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e（\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e）首先创建一个Slide构造函数，用来初始化属性与函数。\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSlide\x3c\/span\x3e\x3c\/span\x3e(dom){\n    \x3cspan class=\x22hljs-built_in\x22\x3ethis\x3c\/span\x3e.start_y=\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/手指滑动屏幕的初始位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ethis\x3c\/span\x3e.end_y=\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/手指滑动屏幕的结束位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ethis\x3c\/span\x3e.render(dom);\x3cspan class=\x22hljs-comment\x22\x3e\/\/初始化下拉功能的render函数，这里的dom参数是你的主页面。\x3c\/span\x3e\n}\n（\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e）编写render函数\nrender函数是用来动态创建下拉刷新的动画图。现在我们在Slide原型上编写render函数。\n    Slide.prototype={\n    render:\x3cspan class=\x22hljs-type\x22\x3efunction\x3c\/span\x3e(dom){\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/拿到body节点\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e body = document.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/创建div，用来显示下拉效果。这个div有\x27正在刷新。。\x27 和 \x27下拉刷新\x27 这个两个子节点。\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eItem\x3c\/span\x3e = document.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/给div设置class属性，该class是下拉效果的样式\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eItem\x3c\/span\x3e.className = \x3cspan class=\x22hljs-string\x22\x3e\x27slide-wrap\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/利用innerHTML将  \x27正在刷新。。。\x27 和 \x27下拉刷新\x27 这两个子节点插入到上面创建的div中。\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eItem\x3c\/span\x3e.innerHTML = \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22slided\x22\x26gt;正在刷新。。。\x26lt;\/div\x26gt;\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22sliding\x22\x26gt;下拉刷新\x26lt;\/div\x26gt;\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/然后将创建的div插入到主页面的前面\x3c\/span\x3e\n        body[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].insertBefore(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eItem\x3c\/span\x3e,dom[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取创建完成的下拉刷新div\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dom2 = document.getElementsByClassName(\x3cspan class=\x22hljs-string\x22\x3e\x27slide-wrap\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/运行slide_start（）\x3c\/span\x3e\n        \x3cspan class=\x22hljs-built_in\x22\x3ethis\x3c\/span\x3e.slide_start(dom2);\n    \x22}}\x22\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下图为下拉刷新的css样式：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6zih?w=314\x26amp;h=394\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6zih?w=314\x26amp;h=394\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e（3）编写slide_start()函数\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22slide_start:function(dom2){\n    var _this = this;\n    \/\/监听document整个文档的touchstart事件\n    document.addEventListener(\x27touchstart\x27,function(evt){\n        var touch = evt.touches[0]; \/\/获取第一个触点\n        _this.start_y = Number(touch.pageY);\/\/第一个触点的Y坐标 \n    });\n    \/\/运行slide_move\n    _this.slide_move(dom2);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eslide_start:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom2\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听document整个文档的touchstart事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e touch = evt.touches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取第一个触点\x3c\/span\x3e\n        _this.start_y = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(touch.pageY);\x3cspan class=\x22hljs-comment\x22\x3e\/\/第一个触点的Y坐标 \x3c\/span\x3e\n    });\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/运行slide_move\x3c\/span\x3e\n    _this.slide_move(dom2);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（4）编写slide_move()函数\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22slide_move:function(dom2){\n    var _this = this;\n    \/\/监听document的touchmove事件\n    document.addEventListener(\x27touchmove\x27,function(evt){\n        \/\/下面这一行代码是保证在手指移动的距离还不到规定的长度时候，就不显示 \x27正在刷新。。\x27 \n        dom2[0].childNodes[0].style.display=\x27none\x27;\n        var touch = evt.touches[0]; \/\/获取第一个触点\n        \/\/获取手指向下移动的长度距离\n        _this.end_y = Number(touch.pageY) - _this.start_y; \n        \/\/判断手指移动距离是否大于5.这个为什么设置为5，而不是0呢，主要是为了避免用户不觉意的轻微滑动\n        if(_this.end_y \x3e 5){\n        \/\/当滑动距离大于5时，将 ‘下拉刷新’ 的效果显示出来，同时将它的高度赋值为手指滑动的距离，以达到慢慢下拉的效果\n            dom2[0].childNodes[1].style.display = \x27block\x27;\n            dom2[0].childNodes[1].style.height = _this.end_y \x2b\x27px\x27;\n            dom2[0].childNodes[1].style.lineHeight = _this.end_y \x2b\x27px\x27;\n        }\n   });\n   \/\/执行slide_end()函数\n   this.slide_end(dom2);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eslide_move:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom2\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听document的touchmove事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchmove\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/下面这一行代码是保证在手指移动的距离还不到规定的长度时候，就不显示 \x27正在刷新。。\x27 \x3c\/span\x3e\n        dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e touch = evt.touches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取第一个触点\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取手指向下移动的长度距离\x3c\/span\x3e\n        _this.end_y = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(touch.pageY) - _this.start_y; \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断手指移动距离是否大于5.这个为什么设置为5，而不是0呢，主要是为了避免用户不觉意的轻微滑动\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(_this.end_y \x26gt; \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e){\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/当滑动距离大于5时，将 ‘下拉刷新’ 的效果显示出来，同时将它的高度赋值为手指滑动的距离，以达到慢慢下拉的效果\x3c\/span\x3e\n            dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n            dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.height = _this.end_y \x2b\x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e;\n            dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.lineHeight = _this.end_y \x2b\x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e;\n        }\n   });\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/执行slide_end()函数\x3c\/span\x3e\n   \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slide_end(dom2);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（5）编写slide_end()函数\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22slide_end:function(dom2){\n    var _this = this;\n    \/\/监听touchend事件\n    document.addEventListener(\x27touchend\x27,function(evt){\n    \/\/当手指送开的时候，判断手指的滑动距离如果大于100就将 \x27正在刷新。。\x27 的效果显示出来，同时隐藏 \x27下拉刷新\x27 的效果\n      if(_this.end_y \x3e 100){\n          dom2[0].childNodes[1].style.display=\x27none\x27;\n          dom2[0].childNodes[0].style.display=\x27block\x27;\n          console.log(\x27开始刷新\x27);\n          \/\/这里是模拟3秒后刷新成功，然后隐藏 \x27正在刷新。。\x27 效果 \n          setTimeout(function(){\n              dom2[0].childNodes[0].style.display=\x27none\x27;\n          },3000);\n      }else{\n      \/\/这里是当手指滑动距离小于100时，就将 \x27下拉刷新\x27 效果隐藏。也就是什么也不做\n          dom2[0].childNodes[1].style.display = \x27none\x27;\n      }\n   });\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eslide_end:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom2\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/监听touchend事件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchend\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/当手指送开的时候，判断手指的滑动距离如果大于100就将 \x27正在刷新。。\x27 的效果显示出来，同时隐藏 \x27下拉刷新\x27 的效果\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(_this.end_y \x26gt; \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e){\n          dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n          dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27开始刷新\x27\x3c\/span\x3e);\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里是模拟3秒后刷新成功，然后隐藏 \x27正在刷新。。\x27 效果 \x3c\/span\x3e\n          setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n              dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n          },\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\n      }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里是当手指滑动距离小于100时，就将 \x27下拉刷新\x27 效果隐藏。也就是什么也不做\x3c\/span\x3e\n          dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n      }\n   });\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（5）最后将Slide构造函数暴露到全局window里：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.Slide=Slide;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs abnf\x22\x3e\x3ccode\x3ewindow.Slide=Slide\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e整个下刷新功能到这了就完了。很简单吧。\x3cbr\x3e下面是完整的封装代码。\x3cbr\x3e;(function(){\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Slide(dom){\n    this.start_y=null;\n    this.end_y=null;\n    this.render(dom);\n}\nSlide.prototype={\n    \/\/ 动态创建下拉刷新特效\n    render:function(dom){\n        var body = document.getElementsByTagName(\x27body\x27);\n        var newItem = document.createElement(\x27div\x27);\n        newItem.className = \x27slide-wrap\x27;\n        newItem.innerHTML = \x27\x3cdiv class=\x26quot;slided\x26quot;\x3e正在刷新。。。\x3c\/div\x3e\x27\x2b\x27\x3cdiv class=\x26quot;sliding\x26quot;\x3e下拉刷新\x3c\/div\x3e\x27;\n        body[0].insertBefore(newItem,dom[0]);\n        var dom2 = document.getElementsByClassName(\x27slide-wrap\x27);\n        this.slide_start(dom2);\n    },\n    slide_start:function(dom2){\n        var _this = this;\n            document.addEventListener(\x27touchstart\x27,function(evt){\n                 var touch = evt.touches[0]; \/\/获取第一个触点\n                 _this.start_y = Number(touch.pageY); \n            });\n        _this.slide_move(dom2);\n    },\n    slide_move:function(dom2){\n            var _this = this;\n            document.addEventListener(\x27touchmove\x27,function(evt){\n                 dom2[0].childNodes[0].style.display=\x27none\x27;\n                 var touch = evt.touches[0]; \/\/获取第一个触点\n                 _this.end_y = Number(touch.pageY) - _this.start_y; \n                 if(_this.end_y \x3e 5){\n                     dom2[0].childNodes[1].style.display = \x27block\x27;\n                     dom2[0].childNodes[1].style.height = _this.end_y \x2b\x27px\x27;\n                     dom2[0].childNodes[1].style.lineHeight = _this.end_y \x2b\x27px\x27;\n                 }\n            });\n        this.slide_end(dom2);\n    },\n    slide_end:function(dom2){\n        var _this = this;\n            document.addEventListener(\x27touchend\x27,function(evt){\n                if(_this.end_y \x3e 100){\n                    dom2[0].childNodes[1].style.display=\x27none\x27;\n                    dom2[0].childNodes[0].style.display=\x27block\x27;\n                       console.log(\x27开始刷新\x27);\n                    setTimeout(function(){\n                        dom2[0].childNodes[0].style.display=\x27none\x27;\n                    },3000);\n                }else{\n                     dom2[0].childNodes[1].style.display = \x27none\x27;\n                }\n            });\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSlide\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.start_y=\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.end_y=\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.render(dom);\n}\nSlide.prototype={\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动态创建下拉刷新特效\x3c\/span\x3e\n    render:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e body = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newItem = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n        newItem.className = \x3cspan class=\x22hljs-string\x22\x3e\x27slide-wrap\x27\x3c\/span\x3e;\n        newItem.innerHTML = \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22slided\x22\x26gt;正在刷新。。。\x26lt;\/div\x26gt;\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22sliding\x22\x26gt;下拉刷新\x26lt;\/div\x26gt;\x27\x3c\/span\x3e;\n        body[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].insertBefore(newItem,dom[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dom2 = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementsByClassName(\x3cspan class=\x22hljs-string\x22\x3e\x27slide-wrap\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slide_start(dom2);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eslide_start\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom2\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e)\x3c\/span\x3e{\n                 \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e touch = evt.touches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取第一个触点\x3c\/span\x3e\n                 _this.start_y = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(touch.pageY); \n            });\n        _this.slide_move(dom2);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eslide_move\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom2\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchmove\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e)\x3c\/span\x3e{\n                 dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n                 \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e touch = evt.touches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取第一个触点\x3c\/span\x3e\n                 _this.end_y = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(touch.pageY) - _this.start_y; \n                 \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(_this.end_y \x26gt; \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e){\n                     dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n                     dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.height = _this.end_y \x2b\x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e;\n                     dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.lineHeight = _this.end_y \x2b\x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e;\n                 }\n            });\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slide_end(dom2);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eslide_end\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom2\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27touchend\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e)\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(_this.end_y \x26gt; \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e){\n                    dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n                    dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n                       \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27开始刷新\x27\x3c\/span\x3e);\n                    setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n                        dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].style.display=\x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n                    },\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e);\n                }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                     dom2[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].childNodes[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n                }\n            });\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ewindow.Slide=Slide;\x3cbr\x3e})();\x3c\/p\x3e\n\x3cp\x3e使用方法也很简单：在你的页面里new一个Slide()。并且将主页面的dom节点传进去即可。\x3cbr\x3evar target = document.getElementsByClassName(\x27float-box\x27);\x3cbr\x3enew Slide(target);\x3c\/p\x3e\n\x3cp\x3e最后的效果如下图：\x3cbr\x3e持续下拉的效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6zF1?w=309\x26amp;h=371\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6zF1?w=309\x26amp;h=371\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e松开手指，正在刷新的效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6zGu?w=308\x26amp;h=287\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6zGu?w=308\x26amp;h=287\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e当然，这效果是很丑，因为只是个小demo，所以css样式非常简单。你们可以自己发挥想象力，写更好看的css样式即可。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>原生js实现简单的下拉刷新功能</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013921296">https://segmentfault.com/a/1190000013921296</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/5in4e6tf5rj/" target="_blank">https://alili.tech/archive/5in4e6tf5rj/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>