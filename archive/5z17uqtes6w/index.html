<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React组件：拖拽布局Dragact v0.1.6 发布"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React组件：拖拽布局Dragact v0.1.6 发布 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/5z17uqtes6w/",
				"appid": "1613049289050283", 
				"title": "React组件：拖拽布局Dragact v0.1.6 发布 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-12T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/brqdtk3gadh/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/reh3526t4nk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&text=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&text=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&title=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&is_video=false&description=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&title=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&title=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&title=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f5z17uqtes6w%2f&title=React%e7%bb%84%e4%bb%b6%ef%bc%9a%e6%8b%96%e6%8b%bd%e5%b8%83%e5%b1%80Dragact%20v0.1.6%20%e5%8f%91%e5%b8%83"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React组件：拖拽布局Dragact v0.1.6 发布</h1><div class="meta"><div class="postdate"><time datetime="2018-12-12" itemprop="datePublished">2018-12-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013377768?w=600\x26amp;h=375\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013377768?w=600\x26amp;h=375\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e仓库地址：\x3ca href=\x22https:\/\/github.com\/215566435\/Dragact\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDragact爽滑的拖拽组件\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e大家好，新年已经过去，大家又投入了繁忙的工作当中，由于我在国外，因此压根儿没有休息...\x3c\/p\x3e\n\x3cp\x3e少说废话，上周一周的时间里，我陆陆续续的为\x3ca href=\x22https:\/\/github.com\/215566435\/Dragact\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDragact\x3c\/a\x3e\x3cbr\x3e组件进行了一系列更新，基本上做了一个大重构，而且做了一小部分性能优化。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e新特性1：性能提升\x3c\/h1\x3e\n\x3cp\x3e通过对React 组件渲染的优化以及内部算法的优化，把大量的遍历和渲染都省掉。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013377766?w=448\x26amp;h=221\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013377766?w=448\x26amp;h=221\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e优化前6s的性能\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013377767?w=528\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013377767?w=528\x26amp;h=300\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e优化后6s的性能\x3c\/p\x3e\n\x3cp\x3e大家可以看到，同样是跑6s，我们脚本计算时间，渲染时间，浏览器painting时间都有了很大幅度的提升。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e新特性2：不一样的挂件渲染Api\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e依赖注入式的挂件(widget)\x3c\/h3\x3e\n\x3cp\x3e可以从最简单的例子看出，我们渲染子组件的方式和以往有些不同。以往的React组件书写方式，采用的是类似以下写法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cDragact\n        col={8}\n        width={800}\n        margin={[5, 5]}\n        rowHeight={40}\n        className=\x27plant-layout\x27\n    \x3e\n        \x3cdiv key={0} data-set=\x22{{\x22 GridX: 0, GridY: 0, w: 4, h: 2 \x22}}\x22 className=\x27layout-child\x27\x3e0\x3c\/div\x3e\n        \x3cdiv key={1} data-set=\x22{{\x22 GridX: 0, GridY: 0, w: 1, h: 2 \x22}}\x22 className=\x27layout-child\x27\x3e1\x3c\/div\x3e\n        \x3cdiv key={2} data-set=\x22{{\x22 GridX: 0, GridY: 0, w: 3, h: 2 \x22}}\x22 className=\x27layout-child\x27\x3e2\x3c\/div\x3e\n    \x3c\/Dragact\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22tsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eDragact\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3ecol\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{8}\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{800}\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3emargin\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{[5,\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e5\x3c\/span\x3e]}\n        \x3cspan class=\x22hljs-attr\x22\x3erowHeight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{40}\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27plant-layout\x27\x3c\/span\x3e\n    \x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{0}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-set\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eGridX:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eGridY:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ew:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eh:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e2\x3c\/span\x3e \x22}}\x22 \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27layout-child\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3e0\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-set\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eGridX:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eGridY:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ew:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eh:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e2\x3c\/span\x3e \x22}}\x22 \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27layout-child\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3e1\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-set\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eGridX:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eGridY:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ew:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eh:\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e2\x3c\/span\x3e \x22}}\x22 \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x27layout-child\x27\x3c\/span\x3e\x26gt;\x3c\/span\x3e2\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eDragact\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这么做当然可以，但是有几个问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e子组件非常的丑，需要我们定义一大堆东西\x3c\/li\x3e\n\x3cli\x3e很难监听到子组件的事件，比如是否拖拽等\x3c\/li\x3e\n\x3cli\x3e如果有大量的数据时，就必须写对数组写一个map函数，类似:layout.map(item=\x26gt;item); 来帮助渲染数组\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e为了解决这个问题，我将子组件的渲染方式进行高度抽象成为一个构造器，简单来说就是以下的形式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cDragact\n        layout={fakeData}\/\/必填项\n        ....\n    \x3e\n        {(item, isDragging) =\x3e {\n            return \x3cdiv style={blockStyle}\x3e\n                {isDragging ? \x27正在抓取\x27 : \x27停放\x27}\n            \x3c\/div\x3e\n        \x22}}\x22\n    \x3c\/Dragact\x3e,\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x26lt;Dragact\n        layout={fakeData}\x3cspan class=\x22hljs-comment\x22\x3e\/\/必填项\x3c\/span\x3e\n        ....\n    \x26gt;\n        {(item, isDragging) =\x26gt; {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{blockStyle}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                {isDragging ? \x27正在抓取\x27 : \x27停放\x27}\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        \x22}}\x22\n    \x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/Dragact\x26gt;,\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，我们子元素渲染变成一个小小的构造函数，第一个入参是您输入数据的每一项，第二个参数就是isDragging，状态监听参数。\x3c\/p\x3e\n\x3cp\x3e这么做，轻易的实现了，组件漂亮，不用写map函数，不用写key，同时更容易监听每一个组件的拖拽状态isDragging.\x3c\/p\x3e\n\x3cp\x3e更多的依赖注入思想以及好处，请看我的知乎问答：\x3ca href=\x22https:\/\/www.zhihu.com\/question\/266745124\/answer\/322998960\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e知乎，方正的回答：如何设计一款组件库\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e最后放一张图动图:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013377768?w=600\x26amp;h=375\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013377768?w=600\x26amp;h=375\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e非常轻松的追踪到了是否拖拽\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e新特性3：拖拽把手\x3c\/h1\x3e\n\x3cp\x3e通过全新的api，现在dragact能够轻松的实现，全自定义的拖拽把手\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013377769?w=600\x26amp;h=375\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013377769?w=600\x26amp;h=375\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击拖拽把手就能移动，不点击？绝对不能移动\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e新特性4：数据驱动的模式\x3c\/h1\x3e\n\x3cblockquote\x3e视图的改变就是数据的改变\x3c\/blockquote\x3e\n\x3cp\x3e这是React给我们的一个启示，\x3ca href=\x22https:\/\/github.com\/215566435\/Dragact\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDragact\x3c\/a\x3e组件通过对数据的处理，达到了数据变化即视图变化。\x3c\/p\x3e\n\x3cp\x3e这么做的好处就是我们可以轻松的将布局信息记录在服务器的数据库中，下一次拿到数据的时候，就可以轻松的恢复原来的视图位置。\x3c\/p\x3e\n\x3cp\x3e通过获取\x3ca href=\x22https:\/\/github.com\/215566435\/Dragact\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDragact\x3c\/a\x3e组件的实例，我提供了一个api getLayout():DragactLayout;，用于获取当前的布局信息。\x3c\/p\x3e\n\x3cp\x3e在这个例子：\x3ca href=\x22http:\/\/link.zhihu.com\/?target=http%3A\/\/htmlpreview.github.io\/%3Fhttps%3A\/\/github.com\/215566435\/React-dragger-layout\/blob\/master\/build\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDrag例子中\x3c\/a\x3e，我们通过调用getLayout() api将数据存储在本地浏览器中，当下次访问的时候，我们就可以恢复之前所摆放的布局。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3e新特性5：全新的用例，支持移动端\x3c\/h1\x3e\n\x3cp\x3e为了更好的观看体验，我为移动端的用户们设计了一个用例页面，现在可以在手机上玩耍啦！\x3c\/p\x3e\n\x3cp\x3e手机端例子：\x3ca href=\x22http:\/\/link.zhihu.com\/?target=http%3A\/\/htmlpreview.github.io\/%3Fhttps%3A\/\/github.com\/215566435\/React-dragger-layout\/blob\/master\/build\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDrag例子中\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e手机端的界面\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013377778?w=600\x26amp;h=375\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013377778?w=600\x26amp;h=375\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e下一个版本：\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e支持自动滚动，当拖拽鼠标到达浏览器边缘的时候，视图能够自动滚动\x3c\/li\x3e\n\x3cli\x3e列表布局，现在是全局布局，下个版本中考虑加入新的列表布局\x3c\/li\x3e\n\x3cli\x3e拖拽把手的高街组件，目前拖拽把手实现有点点蛋疼，在下个版本中，我将进行着重修改\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/215566435\/Dragact\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e仓库地址：[Dragact爽滑的拖拽组件\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e感谢大家支持，喜欢的给一点✨！～\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React组件：拖拽布局Dragact v0.1.6 发布</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013377761">https://segmentfault.com/a/1190000013377761</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/5z17uqtes6w/" target="_blank">https://alili.tech/archive/5z17uqtes6w/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>