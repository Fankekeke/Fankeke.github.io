<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用Node，Vue和ElasticSearch构建实时搜索引擎"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用Node，Vue和ElasticSearch构建实时搜索引擎 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/670f1fcf/",
				"appid": "1613049289050283", 
				"title": "使用Node，Vue和ElasticSearch构建实时搜索引擎 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-18T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4a8011f1/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3ef11629/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&text=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&text=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&title=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&is_video=false&description=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&title=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&title=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&title=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f670f1fcf%2f&title=%e4%bd%bf%e7%94%a8Node%ef%bc%8cVue%e5%92%8cElasticSearch%e6%9e%84%e5%bb%ba%e5%ae%9e%e6%97%b6%e6%90%9c%e7%b4%a2%e5%bc%95%e6%93%8e"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用Node，Vue和ElasticSearch构建实时搜索引擎</h1><div class="meta"><div class="postdate"><time datetime="2018-10-18" itemprop="datePublished">2018-10-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3e（相关阅读：\n\x3ca href=\x22https:\/\/nodejs.org\/en\/about\/\x22\x3enode.js\x3c\/a\x3e,\n\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/\x22\x3evue.js\x3c\/a\x3e,\n\x3ca href=\x22https:\/\/es.xiaoleilu.com\/010_Intro\/05_What_is_it.html\x22\x3eElasticsearch\x3c\/a\x3e）\x3c\/p\x3e\n\x3ch2\x3e介绍\x3c\/h2\x3e\n\x3cp\x3eElasticsearch是一个分布式的RESTful搜索和分析引擎，能够解决越来越多的用例。 Elasticsearch建立在Apache Lucene之上，它是一个高性能的文本搜索引擎库。\x3c\/p\x3e\n\x3ch3\x3e目录\x3c\/h3\x3e\n\x3cp\x3e在今天的课程中，您将学习如何使用Node.js，Elasticsearch和Vue.js构建实时搜索引擎。因此，需要对本教程进行基本的Vue.js和Node.js（Express）理解。\x3c\/p\x3e\n\x3ch2\x3e入门\x3c\/h2\x3e\n\x3cp\x3e让我们开始为本课设置环境。由于您将使用Node.js，因此最简单的入门方法是创建一个新文件夹并运行npm init。创建一个名为elastic-node的新文件夹，将目录更改为新文件夹，然后运行npm init：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs crmsh\x22\x3e\/\/创建一个名为elastic-\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e的新目录\nmkdir\x3c\/span\x3e elastic-\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\n\x3cspan class=\x22hljs-title\x22\x3e\/\/将目录更改为创建的新文件夹\ncd\x3c\/span\x3e elastic-\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\n\x3cspan class=\x22hljs-title\x22\x3e\/\/运行npm\x3c\/span\x3e init来创建一个package.json文件\nnpm init\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述命令将引导您完成创建package.json文件的过程，该文件是运行任何Node.js库所必需的。接下来，您需要安装实时搜索引擎所需的库。所需的库是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eExpress: 这个库将运行我们的服务器\x3c\/li\x3e\n\x3cli\x3eBody-parser: 该库与Express一起使用来分析正文请求。\x3c\/li\x3e\n\x3cli\x3eElasticsearch: 这是Elasticsearch的官方Node.js库，它是实时搜索的引擎。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e要安装这些库，执行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs mipsasm\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall \x3c\/span\x3eexpress \x3cspan class=\x22hljs-keyword\x22\x3ebody-parser \x3c\/span\x3eelasticsearch\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，您的环境的第一部分已经建立。但是，您的设置中缺少Elasticsearch。您将需要安装Elasticsearch。有不同的方法来安装Elasticsearch。如果您使用Debian Linux操作系统，则可以下载.deb文件并使用dpkg进行安装。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/下载deb包\x3c\/span\x3e\ncurl -L -O https:\x3cspan class=\x22hljs-comment\x22\x3e\/\/artifacts.elastic.co\/downloads\/elasticsearch\/elasticsearch-5.6.4.deb\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/使用dpkg安装deb包\x3c\/span\x3e\nsudo dpkg -\x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e elasticsearch-\x3cspan class=\x22hljs-number\x22\x3e5.6\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.deb\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对于其他发行版\/操作系统，您可以在 \x3ca href=\x22https:\/\/www.elastic.co\/guide\/en\/elasticsearch\/reference\/current\/_installation.html\x22\x3e这里\x3c\/a\x3e找到关于如何安装Elasticsearch的指南。\x3c\/p\x3e\n\x3cp\x3eElasticsearch安装后不会自动启动。 Elasticsearch可以使用服务命令启动和停止：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动Elasticsearch服务\x3c\/span\x3e\nsudo -\x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e service elasticsearch start\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 停止Elasticsearch服务\x3c\/span\x3e\nsudo -\x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e service elasticsearch stop\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e要将Elasticsearch配置为在系统启动时自动启动，请运行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dts\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重新加载systemctl守护进程\x3c\/span\x3e\nsudo \x3cspan class=\x22hljs-meta-keyword\x22\x3e\/bin\/\x3c\/span\x3esystemctl daemon-reload\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ enable elastic search so it can be called as a service\x3c\/span\x3e\nsudo \x3cspan class=\x22hljs-meta-keyword\x22\x3e\/bin\/\x3c\/span\x3esystemctl enable elasticsearch.service\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e运行上面的命令后，您可以运行以下命令来启动和停止Elasticsearch：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动Elasticsearch服务\x3c\/span\x3e\nsudo systemctl start elasticsearch\x3cspan class=\x22hljs-selector-class\x22\x3e.service\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 停止Elasticsearch服务\x3c\/span\x3e\nsudo systemctl stop elasticsearch\x3cspan class=\x22hljs-selector-class\x22\x3e.service\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e检查Elasticsearch的状态：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs protobuf\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Elasticsearch的状态\x3c\/span\x3e\nsudo \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eservice\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eelasticsearch\x3c\/span\x3e status\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\n\x3cp\x3e注意：\x3ca href=\x22https:\/\/chrome.google.com\/webstore\/detail\/elasticsearch-toolbox\/focdbmjgdonlpdknobfghplhmafpgfbp\x22\x3eGoogle Chrome Elastic\x3c\/a\x3e工具箱可以帮助您快速查看Elasticsearch的索引和文档。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch2\x3e在Elasticsearch中索引数据\x3c\/h2\x3e\n\x3cp\x3e在根文件夹中创建一个data.js文件并添加：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/data.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/require the Elasticsearch librray\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e elasticsearch = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27elasticsearch\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实例化一个Elasticsearch客户端\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e client = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e elasticsearch.Client({\n   \x3cspan class=\x22hljs-attr\x22\x3ehosts\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:9200\x27\x3c\/span\x3e]\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ping客户端以确保Elasticsearch已启动\x3c\/span\x3e\nclient.ping({\n     \x3cspan class=\x22hljs-attr\x22\x3erequestTimeout\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30000\x3c\/span\x3e,\n }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e) \x3c\/span\x3e{\n \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 此时，eastic搜索已关闭，请检查您的Elasticsearch服务\x3c\/span\x3e\n     \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (error) {\n         \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(\x3cspan class=\x22hljs-string\x22\x3e\x27Elasticsearch cluster is down!\x27\x3c\/span\x3e);\n     } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n         \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Everything is ok\x27\x3c\/span\x3e);\n     }\n });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e让我来解释一下你在上面的代码块中所做的事情：首先，你需要Elasticsearch库，并建立一个新的Elasticsearch客户端传入一个主机的数组。如果您注意到，主机是http：\/\/ localhost：9200。这是因为默认情况下，Elasticsearch在端口9200上监听。接下来，您ping Elasticsearch客户端以确保服务器已启动。如果你运行节点data.js，你应该得到一个消息说一切正常。\x3c\/p\x3e\n\x3ch2\x3e了解索引\x3c\/h2\x3e\n\x3cp\x3e与普通数据库不同，Elasticsearch索引是存储相关文档的地方。例如，您将创建一个名为scotch.io-tutorial的索引来存储类型为cities_list的数据。这就是Elasticsearch所做的工作：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lua\x22\x3e\/\/ data.js\n\/\/ 创建一个名为scotch.\x3cspan class=\x22hljs-built_in\x22\x3eio\x3c\/span\x3e-tutorial的新索引。如果索引已经被创建，这个函数会安全地失败\nclient.indices.\x3cspan class=\x22hljs-built_in\x22\x3ecreate\x3c\/span\x3e({\n      index: \x3cspan class=\x22hljs-string\x22\x3e\x27scotch.io-tutorial\x27\x3c\/span\x3e\n  }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(error, response, status)\x3c\/span\x3e\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eerror\x3c\/span\x3e) {\n          console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eerror\x3c\/span\x3e);\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22created a new index\x22\x3c\/span\x3e, response);\n      }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在之前编写的ping功能之后添加这段代码。现在再次运行node data.js，你应该得到两条消息：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eEverything is okay（一切正常）\x3c\/li\x3e\n\x3cli\x3eCreated a new index (with the response from Elasticsearch)（创建了一个新的索引（来自Elasticsearch的响应） ）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2\x3e将文档添加到索引\x3c\/h2\x3e\n\x3cp\x3eElasticsearch API使文档可以轻松添加到已创建的索引中。如下：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将数据添加到已创建的索引\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3eclient\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.index\x3c\/span\x3e({\n     \x3cspan class=\x22hljs-attribute\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27scotch.io-tutorial\x27\x3c\/span\x3e,\n     \x3cspan class=\x22hljs-attribute\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e,\n     \x3cspan class=\x22hljs-attribute\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27cities_list\x27\x3c\/span\x3e,\n     \x3cspan class=\x22hljs-attribute\x22\x3ebody\x3c\/span\x3e: {\n         \x3cspan class=\x22hljs-string\x22\x3e\x22Key1\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Content for key one\x22\x3c\/span\x3e,\n         \x3cspan class=\x22hljs-string\x22\x3e\x22Key2\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Content for key two\x22\x3c\/span\x3e,\n         \x3cspan class=\x22hljs-string\x22\x3e\x22key3\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22Content for key three\x22\x3c\/span\x3e,\n     }\n }, function(err, resp, status) {\n     \x3cspan class=\x22hljs-selector-tag\x22\x3econsole\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.log\x3c\/span\x3e(resp);\n });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的代码块是解释性的。正文指的是您要添加到scotch.io-tutorial索引的文档，而类型更多的是一个类别。但是，请注意，如果id键被省略，Elasticsearch将自动生成一个。\x3c\/p\x3e\n\x3cp\x3e但是，在本课中，您的文档将成为世界上所有城市的列表。如果您要逐个添加每个城市，那么需要几天时间（如果不是几周）才能完全索引所有城市。幸运的是，Elasticsearch有一个用于处理批量数据的批量函数。\x3c\/p\x3e\n\x3cp\x3e首先，抓取包含\x3ca href=\x22https:\/\/raw.githubusercontent.com\/lutangar\/cities.json\/master\/cities.json\x22\x3e世界上所有城市的\x3c\/a\x3eJSON文件，并保存到您的根文件夹中作为cities.json\x3c\/p\x3e\n\x3cp\x3e现在是时候使用批量API来导入我们大量数据了：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/data.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ require the array of cities that was downloaded\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cities = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/cities.json\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 声明一个名为bulk的空数组\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bulk = [];\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 循环遍历每个城市，并在每个循环中创建并将两个对象推入数组中\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第一个对象发送索引和类型，保存数据\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 第二个对象是你想索引的数据\x3c\/span\x3e\ncities.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecity\x3c\/span\x3e =\x26gt;\x3c\/span\x3e{\n   bulk.push({\x3cspan class=\x22hljs-attr\x22\x3eindex\x3c\/span\x3e:{ \n                 \x3cspan class=\x22hljs-attr\x22\x3e_index\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22scotch.io-tutorial\x22\x3c\/span\x3e, \n                 \x3cspan class=\x22hljs-attr\x22\x3e_type\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22cities_list\x22\x3c\/span\x3e,\n             }          \n         })\n  bulk.push(city)\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对传递的数据执行批量索引\x3c\/span\x3e\nclient.bulk({\x3cspan class=\x22hljs-attr\x22\x3ebody\x3c\/span\x3e:bulk}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e err, response  \x3c\/span\x3e)\x3c\/span\x3e{ \n         \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e( err ){ \n             \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22Failed Bulk operation\x22\x3c\/span\x3e.red, err) \n         } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e { \n             \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22Successfully imported %s\x22\x3c\/span\x3e.green, cities.length); \n         } \n}); \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里，您已经浏览了JSON文件中的所有城市，并且在每个循环中，您都会追加一个包含要索引的文档的索引和类型的对象。请注意，在循环中有两个推入数组？这是因为批量API需要首先包含索引定义的对象，然后是要索引的文档。欲了解更多信息，你可以在\x3ca href=\x22https:\/\/www.elastic.co\/guide\/en\/elasticsearch\/reference\/5.6\/docs-bulk.html\x22\x3e这里查看\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e接下来，您将传递给新的批量数组的client.bulk函数作为正文调用。这会将所有数据用scotch.io-tutorial的索引和类型cities_list索引到Elasticsearch中。\x3c\/p\x3e\n\x3ch2\x3e引入Express\x3c\/h2\x3e\n\x3cp\x3e您的Elasticsearch实例已启动并正在运行，您可以使用Node.js连接它。现在是时候使用Express来为目标页面提供服务，并使用迄今为止运行的设置。\x3c\/p\x3e\n\x3cp\x3e创建一个名为index.js的文件并添加：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 需要Elasticsearch librray\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e elasticsearch = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27elasticsearch\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实例化一个elasticsearch客户端\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e client = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e elasticsearch.Client({\n   \x3cspan class=\x22hljs-attr\x22\x3ehosts\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:9200\x27\x3c\/span\x3e]\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/require Express\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e( \x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e );\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实例化一个表达式的实例并将其保存在一个名为app的常量中\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e app     = express();\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入body-parser库。将用于解析主体请求\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bodyParser = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/require the path library\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path    = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e( \x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e );\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ping客户端以确保Elasticsearch已启动\x3c\/span\x3e\nclient.ping({\n     \x3cspan class=\x22hljs-attr\x22\x3erequestTimeout\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30000\x3c\/span\x3e,\n }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e) \x3c\/span\x3e{\n \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 此时，eastic搜索已关闭，请检查您的Elasticsearch服务\x3c\/span\x3e\n     \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (error) {\n         \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(\x3cspan class=\x22hljs-string\x22\x3e\x27elasticsearch cluster is down!\x27\x3c\/span\x3e);\n     } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n         \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Everything is ok\x27\x3c\/span\x3e);\n     }\n });\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用bodyparser作为中间件\x3c\/span\x3e\napp.use(bodyParser.json())\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置应用程序侦听的端口\x3c\/span\x3e\napp.set( \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e, process.env.PORT || \x3cspan class=\x22hljs-number\x22\x3e3001\x3c\/span\x3e );\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置路径来提供静态文件\x3c\/span\x3e\napp.use( express.static( path.join( __dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27public\x27\x3c\/span\x3e )));\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启用CORS \x3c\/span\x3e\napp.use(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n  res.header(\x3cspan class=\x22hljs-string\x22\x3e\x22Access-Control-Allow-Origin\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22*\x22\x3c\/span\x3e);\n  res.header(\x3cspan class=\x22hljs-string\x22\x3e\x27Access-Control-Allow-Methods\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27PUT, GET, POST, DELETE, OPTIONS\x27\x3c\/span\x3e);\n  res.header(\x3cspan class=\x22hljs-string\x22\x3e\x22Access-Control-Allow-Headers\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22Origin, X-Requested-With, Content-Type, Accept\x22\x3c\/span\x3e);\n  next();\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义了基本路线并返回一个名为tempate.html的HTML文件\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e)\x3c\/span\x3e{\n  res.sendFile(\x3cspan class=\x22hljs-string\x22\x3e\x27template.html\x27\x3c\/span\x3e, {\n     \x3cspan class=\x22hljs-attr\x22\x3eroot\x3c\/span\x3e: path.join( __dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27views\x27\x3c\/span\x3e )\n   });\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义应该返回弹性搜索结果的\/ search路径\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/search\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e)\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 声明查询对象以搜索弹性搜索，并从找到的第一个结果中仅返回200个结果。\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 还匹配其中名称与发送的查询字符串类似的任何数据\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e body = {\n    \x3cspan class=\x22hljs-attr\x22\x3esize\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3ematch\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: req.query[\x3cspan class=\x22hljs-string\x22\x3e\x27q\x27\x3c\/span\x3e]\n      }\n    }\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在索引中执行实际的搜索传递，搜索查询和类型\x3c\/span\x3e\n  client.search({\x3cspan class=\x22hljs-attr\x22\x3eindex\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27scotch.io-tutorial\x27\x3c\/span\x3e,  \x3cspan class=\x22hljs-attr\x22\x3ebody\x3c\/span\x3e:body, \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27cities_list\x27\x3c\/span\x3e})\n  .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresults\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    res.send(results.hits.hits);\n  })\n  .catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e=\x26gt;\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n    res.send([]);\n  });\n\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听一个指定的端口\x3c\/span\x3e\napp .listen( app.get( \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e ), \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log( \x3cspan class=\x22hljs-string\x22\x3e\x27Express server listening on port \x27\x3c\/span\x3e \x2b app.get( \x3cspan class=\x22hljs-string\x22\x3e\x27port\x27\x3c\/span\x3e ));\n} );\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看看上面的代码，注意：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e需要Express，body-parser和路径库。\x3c\/li\x3e\n\x3cli\x3e将一个新的Express实例设置为常量，命名为app。\x3c\/li\x3e\n\x3cli\x3e设置应用程序以使用bodyParser中间件。\x3c\/li\x3e\n\x3cli\x3e将应用程序的静态文件放在名为public的文件夹（我尚未创建此文件夹）。\x3c\/li\x3e\n\x3cli\x3e定义了一个将CORS头添加到应用程序的中间件。\x3c\/li\x3e\n\x3cli\x3e定义一个GET路由在根目录文件夹里，并且在此路由中，我返回了一个名为template.html的文件，该文件位于views文件夹中（我还尚未创建此文件夹和文件template.html）\x3c\/li\x3e\n\x3cli\x3e为应用程序的\/ search URL定义了一个GET路由，该路径使用查询对象来搜索通过查询字符串传递给它的数据的匹配。主要的搜索查询包含在查询对象中。您可以向此对象添加不同的搜索查询。对于这个查询，你在查询中添加一个关键字并返回一个对象，告诉它你正在查找的文档的名字应该与req.query [\x27q\x27]匹配。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs livecodeserver\x22\x3eBesides \x3cspan class=\x22hljs-keyword\x22\x3ethe\x3c\/span\x3e query object, \x3cspan class=\x22hljs-keyword\x22\x3ethe\x3c\/span\x3e search body can contain other optional properties, including size \x3cspan class=\x22hljs-keyword\x22\x3eand\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3efrom\x3c\/span\x3e. The size property determines \x3cspan class=\x22hljs-keyword\x22\x3ethe\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3enumber\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e documents \x3cspan class=\x22hljs-built_in\x22\x3eto\x3c\/span\x3e be included \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethe\x3c\/span\x3e response. If this \x3cspan class=\x22hljs-built_in\x22\x3evalue\x3c\/span\x3e is \x3cspan class=\x22hljs-keyword\x22\x3enot\x3c\/span\x3e present, \x3cspan class=\x22hljs-keyword\x22\x3eby\x3c\/span\x3e default \x3cspan class=\x22hljs-literal\x22\x3eten\x3c\/span\x3e documents are returned. The \x3cspan class=\x22hljs-built_in\x22\x3efrom\x3c\/span\x3e property determines \x3cspan class=\x22hljs-keyword\x22\x3ethe\x3c\/span\x3e starting index \x3cspan class=\x22hljs-keyword\x22\x3eof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethe\x3c\/span\x3e returned documents. This is useful \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e pagination.\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch2\x3e了解搜索API响应\x3c\/h2\x3e\n\x3cp\x3e如果您要注销搜索API的响应，则会包含大量信息。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e{ \x3cspan class=\x22hljs-attribute\x22\x3etook\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e,\n\x3cspan class=\x22hljs-attribute\x22\x3etimed_out\x3c\/span\x3e: false,\n\x3cspan class=\x22hljs-attribute\x22\x3e_shards\x3c\/span\x3e: { \x3cspan class=\x22hljs-attribute\x22\x3etotal\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-attribute\x22\x3esuccessful\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-attribute\x22\x3efailed\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e },\n\x3cspan class=\x22hljs-attribute\x22\x3ehits\x3c\/span\x3e:\n{ \x3cspan class=\x22hljs-attribute\x22\x3etotal\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e59\x3c\/span\x3e,\n \x3cspan class=\x22hljs-attribute\x22\x3emax_score\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5.9437823\x3c\/span\x3e,\n \x3cspan class=\x22hljs-attribute\x22\x3ehits\x3c\/span\x3e:\n  [ {\x3cspan class=\x22hljs-string\x22\x3e\x22_index\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22scotch.io-tutorial\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22_type\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22cities_list\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22_id\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22AV-xjywQx9urn0C4pSPv\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22_score\x22\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e5.9437823\x3c\/span\x3e,\x22\n  _source\x3cspan class=\x22hljs-string\x22\x3e\x22:{\x22\x3c\/span\x3ecountry\x3cspan class=\x22hljs-string\x22\x3e\x22:\x22\x3c\/span\x3eES\x3cspan class=\x22hljs-string\x22\x3e\x22,\x22\x3c\/span\x3ename\x3cspan class=\x22hljs-string\x22\x3e\x22:\x22\x3c\/span\x3eA Coruña\x3cspan class=\x22hljs-string\x22\x3e\x22,\x22\x3c\/span\x3elat\x3cspan class=\x22hljs-string\x22\x3e\x22:\x22\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e43.37135\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22,\x22\x3c\/span\x3elng\x3cspan class=\x22hljs-string\x22\x3e\x22:\x22\x3c\/span\x3e-\x3cspan class=\x22hljs-number\x22\x3e8.396\x3c\/span\x3e\x22}},\n    \x3cspan class=\x22hljs-selector-attr\x22\x3e[Object]\x3c\/span\x3e,\n...\n    \x3cspan class=\x22hljs-selector-attr\x22\x3e[Object]\x3c\/span\x3e ] } }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e响应中包含一个用于查找结果的毫秒数的夺取属性timed_out，如果在最大允许时间内未找到结果，则返回true; _shards用于获取有关不同节点状态的信息（如果部署为节点集群）以及包含搜索结果的匹配。\x3c\/p\x3e\n\x3cp\x3e在hits属性中，我们有一个对象具有以下属性：\x3c\/p\x3e\n\x3cp\x3e总数显示匹配项目的总数。\x3c\/p\x3e\n\x3cp\x3emax_score是找到的项目的最高分数。\x3c\/p\x3e\n\x3cp\x3e命中包含找到的项目的数组。\x3c\/p\x3e\n\x3cp\x3e以上是搜索路由的前提，您返回了response.hits.hits，其中包含找到的文档。\x3c\/p\x3e\n\x3ch2\x3e创建HTML模板\x3c\/h2\x3e\n\x3cp\x3e首先，在上面的部分中引用的名为views和public的根文件夹中创建两个新文件夹。接下来，在views文件夹中创建一个名为template.html的文件并粘贴：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs django\x22\x3e\x3cspan class=\x22xml\x22\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/maxcdn.bootstrapcdn.com\/bootstrap\/3.3.7\/css\/bootstrap.min.css\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/unpkg.com\/axios\/dist\/axios.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.jsdelivr.net\/npm\/vue\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eSearch Cities around the world\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search-form\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22sr-only\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eSearch\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form-control\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eplaceholder\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22query\x22\x3c\/span\x3e \x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                    \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.name \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e, \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.country \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e \n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3elat:\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.lat \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e, long: \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.lng \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e.\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3efloat\x3c\/span\x3e: right \x3cspan class=\x22hljs-meta\x22\x3e!important\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.35s\x3c\/span\x3e, border-radius \x3cspan class=\x22hljs-number\x22\x3e0s\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e32px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e32px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#fff\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0, 0, 0, 0.075) inset;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e solid \x3cspan class=\x22hljs-number\x22\x3e#ccc\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding-right\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e none;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: transparent;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: none;\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: block;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e::-webkit-input-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:-moz-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* Firefox 18- *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e::-moz-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* Firefox 19\x2b *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:-ms-input-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:hover\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.hover\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4px\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3espan\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control-feedback\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n        \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ez-index\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: block;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e34px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e34px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e34px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#3596e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: initial;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e14px\x3c\/span\x3e;\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的代码片段中，有两个主要部分：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3eHTML代码：在本节中，您首先需要三个不同的库，分别是1.）Bootstrap CSS，用于设置页面样式。 2.）Axios js，用于向我们的服务器发送HTTP请求，以及3）Vue.js，一个您将用于我们的视图的简约框架。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eCSS代码：在这里，您将悬停在搜索图标上的样式应用于隐藏和显示搜索输入。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e接下来，为您指定其v模型进行查询的搜索框有一个输入（这将由Vue.js使用）。在此之后，您循环遍历所有结果（此循环和结果变量将由Vue.js提供）。请注意，在此循环时，您必须访问数据的__source属性。基于弹性搜索返回的响应，这看起来很熟悉。\x3c\/p\x3e\n\x3cp\x3e运行node index.js命令，浏览到http：\/\/ localhost：3001 \/，接下来，在你的template.html文件中添加一个脚本标签，添加：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ template.html\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建一个新的Vue实例\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n    \x3cspan class=\x22hljs-attr\x22\x3eel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 声明组件的数据（容纳结果的数组以及包含当前搜索字符串的查询） search string)\x3c\/span\x3e\n    data: {\n        \x3cspan class=\x22hljs-attr\x22\x3eresults\x3c\/span\x3e: [],\n        \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这个Vue组件中声明方法。这里只定义了一种执行搜索的方法\x3c\/span\x3e\n    methods: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用当前搜索查询向服务器发出axios请求\x3c\/span\x3e\n        search: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            axios.get(\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/127.0.0.1:3001\/search?q=\x22\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query)\n                .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.results = response.data;\n\n                })\n        }\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ declare Vue watchers\x3c\/span\x3e\n    watch: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意查询字符串中的更改并调用搜索方法\x3c\/span\x3e\n        query: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.search();\n        }\n    }\n\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eVue.js代码：在本节中，您声明了一个Vue的新实例，将其挂载到具有应用程序ID的元素上。您声明了数据属性，其中包括1）查询您已附加到搜索输入，和2）结果，这是所有找到的结果的数组。\x3c\/p\x3e\n\x3cp\x3e在方法配置中，只有一个称为搜索的函数，它会触发搜索路径的GET请求，以传递搜索框中的当前输入。然后会返回一个响应，然后在HTML代码块中循环。\x3c\/p\x3e\n\x3cp\x3e最后，您使用Vue.js中的所谓观察者，在任何时候都可以监视数据以查看更改。在这里，您正在观察查询数据中的更改，并且一旦它发生更改，就会触发搜索方法。\x3c\/p\x3e\n\x3ch2\x3e从客户端搜索\x3c\/h2\x3e\n\x3cp\x3e每次搜索发生时，如果我不想将请求发送到服务器，该怎么办？我可以直接从客户端搜索Elasticsearch引擎吗？是。\x3c\/p\x3e\n\x3cp\x3e尽管上述方法有效，但有些开发人员可能并不习惯于每次搜索条件都使用他们的服务器，有些则认为从服务器端进行搜索更安全。\x3c\/p\x3e\n\x3cp\x3e但是，可以从客户端进行搜索。 Elasticsearch提供了可以进行搜索的浏览器版本。让我通过一个快速示例。\x3c\/p\x3e\n\x3cp\x3e首先，将一条新路线添加到Express文件并重新启动服务器：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs actionscript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ decare a new route. This route serves a static HTML template called template2.html\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/v2\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(req, res)\x3c\/span\x3e\x3c\/span\x3e{\n  res.sendFile(\x3cspan class=\x22hljs-string\x22\x3e\x27template2.html\x27\x3c\/span\x3e, {\n     root: path.join( __dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27views\x27\x3c\/span\x3e )\n   });\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的代码块中，您为\/ v2创建了一个新的URL路由，并且您在此路由中所做的所有操作都将返回一个名为template2.html的静态HTML文件，该文件将很快创建。\x3c\/p\x3e\n\x3cp\x3e接下来，您需要在\x3ca href=\x22https:\/\/download.elasticsearch.org\/elasticsearch\/elasticsearch-js\/elasticsearch-js-13.3.1.zip\x22\x3e这里\x3c\/a\x3e下载Elasticsearch的客户端库。下载后，将elasticsearch.min.js提取并复制到应用程序根目录中的公用文件夹。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e注意：了解您是否尝试从客户端连接Elasticsearch引擎非常重要，您可能会遇到CORS问题。为了解决这个问题，找到你的Elasticsearch配置文件（对于Debian \/ Ubuntu，可以在\/etc\/elasticsearch\/elasticsearch.yml找到它）。对于其他操作系统，找到它位于的位置，并将以下内容添加到底部文件：\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e#\/etc\/elasticsearch\/elasticsearch\x3cspan class=\x22hljs-selector-class\x22\x3e.yml\x3c\/span\x3e\n\nhttp\x3cspan class=\x22hljs-selector-class\x22\x3e.cors\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.enabled\x3c\/span\x3e : true\nhttp\x3cspan class=\x22hljs-selector-class\x22\x3e.cors\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.allow-origin\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22*\x22\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e完成之后，重新启动Elasticsearch实例\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs protobuf\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重新启动Elasticsearch服务\x3c\/span\x3e\nsudo \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eservice\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eelasticsearch\x3c\/span\x3e restart\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来，在视图文件夹中创建一个名为template2.html的文件并添加：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs django\x22\x3e\x3cspan class=\x22xml\x22\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/maxcdn.bootstrapcdn.com\/bootstrap\/3.3.7\/css\/bootstrap.min.css\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/unpkg.com\/axios\/dist\/axios.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.jsdelivr.net\/npm\/vue\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eSearch Cities around the world\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search-form\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22sr-only\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eSearch\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elabel\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form-control\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eplaceholder\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22search\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22query\x22\x3c\/span\x3e \x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eform\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                    \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.name \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e, \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.country \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e \n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3elat:\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.lat \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e, long: \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22 result._source.lng \x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e.\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\/elasticsearch.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3efloat\x3c\/span\x3e: right \x3cspan class=\x22hljs-meta\x22\x3e!important\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e0.35s\x3c\/span\x3e, border-radius \x3cspan class=\x22hljs-number\x22\x3e0s\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e32px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e32px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#fff\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ergba\x3c\/span\x3e(0, 0, 0, 0.075) inset;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e solid \x3cspan class=\x22hljs-number\x22\x3e#ccc\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3epadding-right\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e none;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebackground\x3c\/span\x3e: transparent;\n        \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: none;\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: block;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e::-webkit-input-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:-moz-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* Firefox 18- *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e::-moz-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* Firefox 19\x2b *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:-ms-input-placeholder\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: none;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:hover\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.hover\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100%\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e25px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4px\x3c\/span\x3e;\n    }\n\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.search-form\x3c\/span\x3e \x3cspan class=\x22hljs-selector-class\x22\x3e.form-group\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3espan\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.form-control-feedback\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: absolute;\n        \x3cspan class=\x22hljs-attribute\x22\x3etop\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eright\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e2px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3ez-index\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3edisplay\x3c\/span\x3e: block;\n        \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e34px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e34px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eline-height\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e34px\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3etext-align\x3c\/span\x3e: center;\n        \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#3596e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: initial;\n        \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e14px\x3c\/span\x3e;\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来，在您的template2.html文件中添加一个脚本标记并添加：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/template2.html\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 像你在客户端上那样实例化一个新的Elasticsearch客户端\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e client = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e elasticsearch.Client({\n    \x3cspan class=\x22hljs-attr\x22\x3ehosts\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/127.0.0.1:9200\x27\x3c\/span\x3e]\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建一个新的Vue实例\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n    \x3cspan class=\x22hljs-attr\x22\x3eel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 声明组件的数据（容纳结果的数组以及包含当前搜索字符串的查询）\x3c\/span\x3e\n    data: {\n        \x3cspan class=\x22hljs-attr\x22\x3eresults\x3c\/span\x3e: [],\n        \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这个Vue组件中声明方法。这里只定义了一种执行搜索的方法\x3c\/span\x3e\n    methods: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 函数调用弹性搜索。这里查询对象与服务器的设置一样。\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里查询字符串直接从Vue传递\x3c\/span\x3e\n        search: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e body = {\n                    \x3cspan class=\x22hljs-attr\x22\x3esize\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                    \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n                        \x3cspan class=\x22hljs-attr\x22\x3ematch\x3c\/span\x3e: {\n                            \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query\n                        }\n                    }\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 搜索传入索引的Elasticsearch，查询对象和类型\x3c\/span\x3e\n            client.search({ \x3cspan class=\x22hljs-attr\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27scotch.io-tutorial\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3ebody\x3c\/span\x3e: body, \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27cities_list\x27\x3c\/span\x3e })\n                .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresults\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(found ${results.hits.total} items \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e ${results.took}ms);\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将结果设置为我们拥有的结果数组\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.results = results.hits.hits;\n                })\n                .catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n\n                });\n\n        }\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ declare Vue watchers\x3c\/span\x3e\n    watch: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意查询字符串中的更改并调用搜索方法\x3c\/span\x3e\n        query: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.search();\n        }\n    }\n\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的HTML和JavaScript片段与上面的部分非常相似。唯一的区别是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e您不需要Axios，而是需要elasticsearch.js。\x3c\/li\x3e\n\x3cli\x3e在脚本标记的顶部，您启动了Elasticsearch客户端，因为它在服务器端完成。\x3c\/li\x3e\n\x3cli\x3e搜索方法不执行HTTP请求，而是像在服务器端的搜索路径中那样搜索Elasticsearch引擎。\x3c\/li\x3e\n\x3c\/ul\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/build-a-real-time-search-engine-with-node-vue-and-elasticsearch">https://www.zcfy.cc/article/build-a-real-time-search-engine-with-node-vue-and-elasticsearch</a> 原文标题: 使用Node，Vue和ElasticSearch构建实时搜索引擎 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/670f1fcf/" target="_blank">https://alili.tech/archive/670f1fcf/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>