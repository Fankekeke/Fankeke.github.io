<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="你所不了解的 Bash：关于 Bash 数组的介绍"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>你所不了解的 Bash：关于 Bash 数组的介绍 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/6df83367/",
				"appid": "1613049289050283", 
				"title": "你所不了解的 Bash：关于 Bash 数组的介绍 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-20T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/5c22904/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/414ae069/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&text=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&text=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&title=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&is_video=false&description=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f6df83367%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&title=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&title=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&title=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6df83367%2f&title=%e4%bd%a0%e6%89%80%e4%b8%8d%e4%ba%86%e8%a7%a3%e7%9a%84%20Bash%ef%bc%9a%e5%85%b3%e4%ba%8e%20Bash%20%e6%95%b0%e7%bb%84%e7%9a%84%e4%bb%8b%e7%bb%8d"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">你所不了解的 Bash：关于 Bash 数组的介绍</h1><div class="meta"><div class="postdate"><time datetime="2018-10-20" itemprop="datePublished">2018-10-20</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#你所不了解的-bash关于-bash-数组的介绍\x22\x3e\x3c\/a\x3e你所不了解的 Bash：关于 Bash 数组的介绍\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3e进入这个古怪而神奇的 Bash 数组的世界。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/22df3da6f7f8565f8f39ba6538436f7514d2cf94\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f7374796c65732f696d6167652d66756c6c2d73697a652f7075626c69632f6c6561642d696d616765732f70726f6772616d6d696e672d636f64652d6b6579626f6172642d6c6170746f702e706e673f69746f6b3d7047664566753253\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t017c72acc0ca464881.png\x22 alt=\x22\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e尽管软件工程师常常使用命令行来进行各种开发，但命令行中的数组似乎总是一个模糊的东西（虽然不像正则操作符 \x3ccode\x3e=~\x3c\/code\x3e 那么复杂隐晦）。除开隐晦和有疑问的语法，\x3ca href=\x22https:\/\/opensource.com\/article\/17\/7\/bash-prompt-tips-and-tricks\x22\x3eBash\x3c\/a\x3e 数组其实是非常有用的。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#稍等这是为什么\x22\x3e\x3c\/a\x3e稍等，这是为什么？\x3c\/h3\x3e\n\x3cp\x3e写 Bash 相关的东西很难，但如果是写一篇像手册那样注重怪异语法的文章，就会非常简单。不过请放心，这篇文章的目的就是让你不用去读该死的使用手册。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#真实通常是有用的示例\x22\x3e\x3c\/a\x3e真实（通常是有用的）示例\x3c\/h4\x3e\n\x3cp\x3e为了这个目的，想象一下真实世界的场景以及 Bash 是怎么帮忙的：你正在公司里面主导一个新工作，评估并优化内部数据管线的运行时间。首先，你要做个参数扫描分析来评估管线使用线程的状况。简单起见，我们把这个管道当作一个编译好的 C\x2b\x2b 黑盒子，这里面我们能够调整的唯一的参数是用于处理数据的线程数量：\x3ccode\x3e.\/pipeline --threads 4\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#基础\x22\x3e\x3c\/a\x3e基础\x3c\/h3\x3e\n\x3cp\x3e我们首先要做的事是定义一个数组，用来容纳我们想要测试的 \x3ccode\x3e--threads\x3c\/code\x3e 参数：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3eallThreads=(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e64\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e本例中，所有元素都是数字，但参数并不一定是数字，Bash 中的数组可以容纳数字和字符串，比如 \x3ccode\x3emyArray=(1 2 \x22three\x22 4 \x22five\x22)\x3c\/code\x3e 就是个有效的表达式。就像 Bash 中其它的变量一样，确保赋值符号两边没有空格。否则 Bash 将会把变量名当作程序来执行，把 \x3ccode\x3e=\x3c\/code\x3e 当作程序的第一个参数。\x3c\/p\x3e\n\x3cp\x3e现在我们初始化了数组，让我们解析它其中的一些元素。仅仅输入 \x3ccode\x3eecho $allThreads\x3c\/code\x3e ，你能发现，它只会输出第一个元素。\x3c\/p\x3e\n\x3cp\x3e要理解这个产生的原因，需要回到上一步，回顾我们一般是怎么在 Bash 中输出变量。考虑以下场景：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs bash\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22article\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eecho\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22Found 42 \x3cspan class=\x22hljs-variable\x22\x3e$type\x3c\/span\x3e\x22\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e假如我们得到的变量 \x3ccode\x3e$type\x3c\/code\x3e 是一个单词，我们想要添加在句子结尾一个 \x3ccode\x3es\x3c\/code\x3e。我们无法直接把 \x3ccode\x3es\x3c\/code\x3e 加到 \x3ccode\x3e$type\x3c\/code\x3e 里面，因为这会把它变成另一个变量，\x3ccode\x3e$types\x3c\/code\x3e。尽管我们可以利用像 \x3ccode\x3eecho \x22Found 42 \x22$type\x22s\x22\x3c\/code\x3e 这样的代码形变，但解决这个问题的最好方法是用一个花括号：\x3ccode\x3eecho \x22Found 42 ${type}s\x22\x3c\/code\x3e，这让我们能够告诉 Bash 变量名的起止位置（有趣的是，JavaScript\/ES6 在 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Template_literals\x22\x3etemplate literals\x3c\/a\x3e 中注入变量和表达式的语法和这里是一样的）\x3c\/p\x3e\n\x3cp\x3e事实上，尽管 Bash 变量一般不用花括号，但在数组中需要用到花括号。这反而允许我们指定要访问的索引，例如 \x3ccode\x3eecho ${allThreads[1]}\x3c\/code\x3e 返回的是数组中的第二个元素。如果不写花括号，比如 \x3ccode\x3eecho $allThreads[1]\x3c\/code\x3e，会导致 Bash 把 \x3ccode\x3e[1]\x3c\/code\x3e 当作字符串然后输出。\x3c\/p\x3e\n\x3cp\x3e是的，Bash 数组的语法很怪，但是至少他们是从 0 开始索引的，不像有些语言（说的就是你，\x3ccode\x3eR\x3c\/code\x3e 语言）。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#遍历数组\x22\x3e\x3c\/a\x3e遍历数组\x3c\/h3\x3e\n\x3cp\x3e上面的例子中我们直接用整数作为数组的索引，我们现在考虑两种其他情况：第一，如果想要数组中的第 \x3ccode\x3e$i\x3c\/code\x3e 个元素，这里 \x3ccode\x3e$i\x3c\/code\x3e 是一个代表索引的变量，我们可以这样 \x3ccode\x3eecho ${allThreads[$i]}\x3c\/code\x3e 解析这个元素。第二，要输出一个数组的所有元素，我们把数字索引换成 \x3ccode\x3e@\x3c\/code\x3e 符号（你可以把 \x3ccode\x3e@\x3c\/code\x3e 当作表示 \x3ccode\x3eall\x3c\/code\x3e 的符号）：\x3ccode\x3eecho ${allThreads[@]}\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#遍历数组元素\x22\x3e\x3c\/a\x3e遍历数组元素\x3c\/h4\x3e\n\x3cp\x3e记住上面讲过的，我们遍历 \x3ccode\x3e$allThreads\x3c\/code\x3e 数组，把每个值当作 \x3ccode\x3e--threads\x3c\/code\x3e 参数启动管线：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs bash\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e t \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-variable\x22\x3e${allThreads[@]}\x3c\/span\x3e; \x3cspan class=\x22hljs-keyword\x22\x3edo\x3c\/span\x3e\n  .\/pipeline --threads \x3cspan class=\x22hljs-variable\x22\x3e$t\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3edone\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch4\x3e\x3ca href=\x22#遍历数组索引\x22\x3e\x3c\/a\x3e遍历数组索引\x3c\/h4\x3e\n\x3cp\x3e接下来，考虑一个稍稍不同的方法。不遍历所有的数组元素，我们可以遍历所有的索引：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs bash\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e i \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-variable\x22\x3e${!allThreads[@]}\x3c\/span\x3e; \x3cspan class=\x22hljs-keyword\x22\x3edo\x3c\/span\x3e\n  .\/pipeline --threads \x3cspan class=\x22hljs-variable\x22\x3e${allThreads[$i]}\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3edone\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e一步一步看：如之前所见，\x3ccode\x3e${allThreads[@]}\x3c\/code\x3e 表示数组中的所有元素。前面加了个感叹号，变成 \x3ccode\x3e${!allThreads[@]}\x3c\/code\x3e，这会返回数组索引列表（这里是 0 到 7）。换句话说。\x3ccode\x3efor\x3c\/code\x3e 循环就遍历所有的索引 \x3ccode\x3e$i\x3c\/code\x3e 并从 \x3ccode\x3e$allThreads\x3c\/code\x3e 中读取第 \x3ccode\x3e$i\x3c\/code\x3e 个元素，当作 \x3ccode\x3e--threads\x3c\/code\x3e 选项的参数。\x3c\/p\x3e\n\x3cp\x3e这看上去很辣眼睛，你可能奇怪为什么我要一开始就讲这个。这是因为有时候在循环中需要同时获得索引和对应的值，例如，如果你想要忽视数组中的第一个元素，使用索引可以避免额外创建在循环中累加的变量。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#填充数组\x22\x3e\x3c\/a\x3e填充数组\x3c\/h3\x3e\n\x3cp\x3e到目前为止，我们已经能够用给定的 \x3ccode\x3e--threads\x3c\/code\x3e 选项启动管线了。现在假设按秒计时的运行时间输出到管线。我们想要捕捉每个迭代的输出，然后把它保存在另一个数组中，因此我们最终可以随心所欲的操作它。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#一些有用的语法\x22\x3e\x3c\/a\x3e一些有用的语法\x3c\/h4\x3e\n\x3cp\x3e在深入代码前，我们要多介绍一些语法。首先，我们要能解析 Bash 命令的输出。用这个语法可以做到：\x3ccode\x3eoutput=$( .\/my_script.sh )\x3c\/code\x3e，这会把命令的输出存储到变量 \x3ccode\x3e$output\x3c\/code\x3e 中。\x3c\/p\x3e\n\x3cp\x3e我们需要的第二个语法是如何把我们刚刚解析的值添加到数组中。完成这个任务的语法看起来很熟悉：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs makefile\x22\x3emyArray\x2b=( \x3cspan class=\x22hljs-string\x22\x3e\x22newElement1\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22newElement2\x22\x3c\/span\x3e )\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch4\x3e\x3ca href=\x22#参数扫描\x22\x3e\x3c\/a\x3e参数扫描\x3c\/h4\x3e\n\x3cp\x3e万事具备，执行参数扫描的脚步如下：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3eallThreads=(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e64\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e)\nallRuntimes=()\nfor t in ${allThreads[@]}; do\n  runtime=$(.\/pipeline --threads $t)\n  allRuntimes\x2b=( $runtime )\ndone\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e就是这个了！\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#还有什么能做的\x22\x3e\x3c\/a\x3e还有什么能做的？\x3c\/h3\x3e\n\x3cp\x3e这篇文章中，我们讲过使用数组进行参数扫描的场景。我敢保证有很多理由要使用 Bash 数组，这里就有两个例子：\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#日志警告\x22\x3e\x3c\/a\x3e日志警告\x3c\/h4\x3e\n\x3cp\x3e本场景中，把应用分成几个模块，每一个都有它自己的日志文件。我们可以编写一个 cron 任务脚本，当某个模块中出现问题标志时向特定的人发送邮件：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs perl\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e# 日志列表，发生问题时应该通知的人\x3c\/span\x3e\nlogPaths=(\x3cspan class=\x22hljs-string\x22\x3e\x22api.log\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22auth.log\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22jenkins.log\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22data.log\x22\x3c\/span\x3e)\nlogEmails=(\x3cspan class=\x22hljs-string\x22\x3e\x22jay@email\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22emma@email\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22jon@email\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22sophia@email\x22\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 在每个日志中查找问题标志\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e i in ${!logPaths[@]};\n\x3cspan class=\x22hljs-keyword\x22\x3edo\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e=${logPaths[$i]}\n  stakeholder=${logEmails[$i]}\n  numErrors=$( tail -n \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22$log\x22\x3c\/span\x3e | \x3cspan class=\x22hljs-keyword\x22\x3egrep\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22ERROR\x22\x3c\/span\x3e | wc -l )\n\n  \x3cspan class=\x22hljs-comment\x22\x3e# 如果近期发现超过 5 个错误，就警告负责人\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e [[ \x3cspan class=\x22hljs-string\x22\x3e\x22$numErrors\x22\x3c\/span\x3e -\x3cspan class=\x22hljs-keyword\x22\x3egt\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e ]];\n  then\n    emailRecipient=\x3cspan class=\x22hljs-string\x22\x3e\x22$stakeholder\x22\x3c\/span\x3e\n    emailSubject=\x3cspan class=\x22hljs-string\x22\x3e\x22WARNING: \x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e}\x3c\/span\x3e showing unusual levels of errors\x22\x3c\/span\x3e\n    emailBody=\x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-subst\x22\x3e${numErrors}\x3c\/span\x3e errors found in log \x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e}\x3c\/span\x3e\x22\x3c\/span\x3e\n    echo \x3cspan class=\x22hljs-string\x22\x3e\x22$emailBody\x22\x3c\/span\x3e | mailx -\x3cspan class=\x22hljs-keyword\x22\x3es\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22$emailSubject\x22\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22$emailRecipient\x22\x3c\/span\x3e\n  fi\ndone\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch4\x3e\x3ca href=\x22#api-查询\x22\x3e\x3c\/a\x3eAPI 查询\x3c\/h4\x3e\n\x3cp\x3e如果你想要生成一些分析数据，分析你的 Medium 帖子中用户评论最多的。由于我们无法直接访问数据库，SQL 不在我们考虑范围，但我们可以用 API！\x3c\/p\x3e\n\x3cp\x3e为了避免陷入关于 API 授权和令牌的冗长讨论，我们将会使用 \x3ca href=\x22https:\/\/github.com\/typicode\/jsonplaceholder\x22\x3eJSONPlaceholder\x3c\/a\x3e，这是一个面向公众的测试服务 API。一旦我们查询每个帖子，解析出每个评论者的邮箱，我们就可以把这些邮箱添加到我们的结果数组里：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs bash\x22\x3eendpoint=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/jsonplaceholder.typicode.com\/comments\x22\x3c\/span\x3e\nallEmails=()\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 查询前 10 个帖子\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e postId \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e {1..10};\n\x3cspan class=\x22hljs-keyword\x22\x3edo\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e# 执行 API 调用，获取该帖子评论者的邮箱\x3c\/span\x3e\n  response=$(curl \x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-variable\x22\x3e${endpoint}\x3c\/span\x3e?postId=\x3cspan class=\x22hljs-variable\x22\x3e${postId}\x3c\/span\x3e\x22\x3c\/span\x3e)\n\n  \x3cspan class=\x22hljs-comment\x22\x3e# 使用 jq 把 JSON 响应解析成数组\x3c\/span\x3e\n  allEmails\x2b=( $( jq \x3cspan class=\x22hljs-string\x22\x3e\x27.[].email\x27\x3c\/span\x3e \x26lt;\x26lt;\x26lt; \x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-variable\x22\x3e$response\x3c\/span\x3e\x22\x3c\/span\x3e ) )\n\x3cspan class=\x22hljs-keyword\x22\x3edone\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e注意这里我是用 \x3ca href=\x22https:\/\/stedolan.github.io\/jq\/\x22\x3ejq 工具\x3c\/a\x3e 从命令行里解析 JSON 数据。关于 \x3ccode\x3ejq\x3c\/code\x3e 的语法超出了本文的范围，但我强烈建议你了解它。\x3c\/p\x3e\n\x3cp\x3e你可能已经想到，使用 Bash 数组在数不胜数的场景中很有帮助，我希望这篇文章中的示例可以给你思维的启发。如果你从自己的工作中找到其它的例子想要分享出来，请在帖子下方评论。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#请等等还有很多东西\x22\x3e\x3c\/a\x3e请等等，还有很多东西！\x3c\/h3\x3e\n\x3cp\x3e由于我们在本文讲了很多数组语法，这里是关于我们讲到内容的总结，包含一些还没讲到的高级技巧：\x3c\/p\x3e\n\x3cp\x3e语法\x3c\/p\x3e\n\x3cp\x3e效果\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3earr=()\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e创建一个空数组\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3earr=(1 2 3)\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e初始化数组\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e${arr[2]}\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e取得第三个元素\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e${arr[@]}\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e取得所有元素\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e${!arr[@]}\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e取得数组索引\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e${#arr[@]}\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e计算数组长度\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3earr[0]=3\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e覆盖第 1 个元素\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3earr\x2b=(4)\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e添加值\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3estr=$(ls)\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e把 \x3ccode\x3els\x3c\/code\x3e 输出保存到字符串\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3earr=( $(ls) )\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e把 \x3ccode\x3els\x3c\/code\x3e 输出的文件保存到数组里\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e${arr[@]:s:n}\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e取得从索引 \x3ccode\x3es\x3c\/code\x3e 开始的 \x3ccode\x3en\x3c\/code\x3e 个元素\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#最后一点思考\x22\x3e\x3c\/a\x3e最后一点思考\x3c\/h3\x3e\n\x3cp\x3e正如我们所见，Bash 数组的语法很奇怪，但我希望这篇文章让你相信它们很有用。只要你理解了这些语法，你会发现以后会经常使用 Bash 数组。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#bash-还是-python\x22\x3e\x3c\/a\x3eBash 还是 Python？\x3c\/h4\x3e\n\x3cp\x3e问题来了：什么时候该用 Bash 数组而不是其他的脚本语法，比如 Python？\x3c\/p\x3e\n\x3cp\x3e对我而言，完全取决于需求——如果你可以只需要调用命令行工具就能立马解决问题，你也可以用 Bash。但有些时候，当你的脚本属于一个更大的 Python 项目时，你也可以用 Python。\x3c\/p\x3e\n\x3cp\x3e比如，我们可以用 Python 来实现参数扫描，但我们只用编写一个 Bash 的包装：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs nix\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3eimport\x3c\/span\x3e subprocess\n\n\x3cspan class=\x22hljs-attr\x22\x3eall_threads\x3c\/span\x3e = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e64\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e]\n\x3cspan class=\x22hljs-attr\x22\x3eall_runtimes\x3c\/span\x3e = []\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 用不同的线程数字启动管线\x3c\/span\x3e\nfor t \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e all_threads:\n  \x3cspan class=\x22hljs-attr\x22\x3ecmd\x3c\/span\x3e = \x27.\/pipeline --threads {}\x27.format(t)\n\n  \x3cspan class=\x22hljs-comment\x22\x3e# 使用子线程模块获得返回的输出\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attr\x22\x3ep\x3c\/span\x3e = subprocess.Popen(cmd, \x3cspan class=\x22hljs-attr\x22\x3estdout=subprocess.PIPE,\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eshell=True)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e = p.communicate()[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n  all_runtimes.append(output)\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e由于本例中没法避免使用命令行，所以可以优先使用 Bash。\x3c\/p\x3e\n\x3ch4\x3e\x3ca href=\x22#羞耻的宣传时间\x22\x3e\x3c\/a\x3e羞耻的宣传时间\x3c\/h4\x3e\n\x3cp\x3e如果你喜欢这篇文章，这里还有很多类似的文章！ \x3ca href=\x22https:\/\/conferences.oreilly.com\/oscon\/oscon-or\x22\x3e在此注册，加入 OSCON\x3c\/a\x3e，2018 年 7 月 17 号我会在这做一个主题为 \x3ca href=\x22https:\/\/conferences.oreilly.com\/oscon\/oscon-or\/public\/schedule\/detail\/67166\x22\x3e你所不了解的 Bash\x3c\/a\x3e 的在线编码研讨会。没有幻灯片，不需要门票，只有你和我在命令行里面敲代码，探索 Bash 中的奇妙世界。\x3c\/p\x3e\n\x3cp\x3e本文章由 [Medium] 首发，再发布时已获得授权。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/opensource.com\/article\/18\/5\/you-dont-know-bash-intro-bash-arrays\x22\x3ehttps:\/\/opensource.com\/article\/18\/5\/you-dont-know-bash-intro-bash-arrays\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/opensource.com\/users\/robertaboukhalil\x22\x3eRobert Aboukhalil\x3c\/a\x3e 选题：\x3ca href=\x22https:\/\/github.com\/lujun9972\x22\x3elujun9972\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/BriFuture\x22\x3eBriFuture\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/you-don-t-know-bash-an-introduction-to-bash-arrays">https://www.zcfy.cc/article/you-don-t-know-bash-an-introduction-to-bash-arrays</a> 原文标题: 你所不了解的 Bash：关于 Bash 数组的介绍 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/6df83367/" target="_blank">https://alili.tech/archive/6df83367/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>