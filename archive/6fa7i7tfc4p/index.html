<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript开发区块链只需200行代码"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript开发区块链只需200行代码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/6fa7i7tfc4p/",
				"appid": "1613049289050283", 
				"title": "JavaScript开发区块链只需200行代码 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-01T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/bpt6mn2mzce/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/531udltkjg9/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&text=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&text=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&title=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&is_video=false&description=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&title=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&title=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&title=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6fa7i7tfc4p%2f&title=JavaScript%e5%bc%80%e5%8f%91%e5%8c%ba%e5%9d%97%e9%93%be%e5%8f%aa%e9%9c%80200%e8%a1%8c%e4%bb%a3%e7%a0%81"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript开发区块链只需200行代码</h1><div class="meta"><div class="postdate"><time datetime="2018-12-01" itemprop="datePublished">2018-12-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e使用JavaScript实现简单的开发一个区块链。通过javascript这一开发区块链的实现过程，你将会真正理解区块链是什么：区块链就是一个分布式数据库，存储结构是一个不断增长的链表，链表中包含着许多有序的记录。\x3c\/p\x3e\n\x3cp\x3e然而，在通常情况下，当我们谈到区块链的时候也会谈起使用区块链来解决的问题，这两者很容易混淆。像流行的比特币和以太坊这样基于区块链的项目就是这样。“区块链”这个术语通常和像交易、智能合约、加密货币这样的概念紧紧联系在一起。\x3c\/p\x3e\n\x3cp\x3e这就令理解区块链变得不必要得复杂起来，特别是当你想理解源码的时候。下面我将通过 200 行 JS 实现的超级简单的区块链来帮助大家理解它，我给这段代码起名为 NaiveChain。你可以在\x3ca href=\x22https:\/\/github.com\/lhartikk\/naivechain\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGithub\x3c\/a\x3e 查看更多的技术细节。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e块结构\x3c\/h2\x3e\n\x3cp\x3e第一个逻辑步骤是决定块结构。为了保证事情尽可能的简单，我们只选择最必要的部分：index（下标）、timestamp（时间戳）、data（数据）、hash（哈希值）和 previous hash（前置哈希值）。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014779565?w=800\x26amp;h=187\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014779565?w=800\x26amp;h=187\x22 alt=\x22200行node.js代码让你彻底理解区块链是什么\x22 title=\x22200行node.js代码让你彻底理解区块链是什么\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个块中必须能找到前一个块的哈希值，以此来保证整条链的完整性。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Block {\n    constructor(index, previousHash, timestamp, data, hash) {\n        this.index = index;\n        this.previousHash = previousHash.toString();\n        this.timestamp = timestamp;\n        this.data = data;\n        this.hash = hash.toString();\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBlock\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(index, previousHash, timestamp, \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e, hash) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.index = index;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.previousHash = previousHash.toString();\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.timestamp = timestamp;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hash = hash.toString();\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e块哈希\x3c\/h2\x3e\n\x3cp\x3e为了保存完整的数据，必须哈希区块。SHA-256会对块的内容进行加密，记录这个值应该和“挖矿”毫无关系，因为这里不需要解决工作量证明的问题。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var calculateHash = (index, previousHash, timestamp, data) =\x3e {\n    return CryptoJS.SHA256(index \x2b previousHash \x2b timestamp \x2b data).toString();\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fortran\x22\x3e\x3ccode\x3evar calculateHash = (\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e, previousHash, timestamp, \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e CryptoJS.SHA256(\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e \x2b previousHash \x2b timestamp \x2b \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e).toString();\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e块的生成\x3c\/h2\x3e\n\x3cp\x3e要生成一个块，必须知道前一个块的哈希值，然后创造其余所需的内容（= index, hash, data and timestamp）。块的data部分是由终端用户所提供的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var generateNextBlock = (blockData) =\x3e {\n    var previousBlock = getLatestBlock();\n    var nextIndex = previousBlock.index \x2b 1;\n    var nextTimestamp = new Date().getTime() \/ 1000;\n    var nextHash = calculateHash(nextIndex, previousBlock.hash, nextTimestamp, blockData);\n    return new Block(nextIndex, previousBlock.hash, nextTimestamp, blockData, nextHash);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e generateNextBlock = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eblockData\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e previousBlock = getLatestBlock();\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nextIndex = previousBlock.index \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nextTimestamp = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().getTime() \/ \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nextHash = calculateHash(nextIndex, previousBlock.hash, nextTimestamp, blockData);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Block(nextIndex, previousBlock.hash, nextTimestamp, blockData, nextHash);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e块的存储\x3c\/h2\x3e\n\x3cp\x3e内存中的Javascript数组被用于存储区块链。区块链的第一个块通常被称为“起源块”，是硬编码的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var getGenesisBlock = () =\x3e {\n    return new Block(0, \x26quot;0\x26quot;, 1465154705, \x26quot;my genesis block!!\x26quot;, \x26quot;816534932c2b7154836da6afc367695e6337db8a921823784c14378abed4f7d7\x26quot;);\n};\n \nvar blockchain = [getGenesisBlock()];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e getGenesisBlock = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Block(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1465154705\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22my genesis block!!\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22816534932c2b7154836da6afc367695e6337db8a921823784c14378abed4f7d7\x22\x3c\/span\x3e);\n};\n \n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e blockchain = [getGenesisBlock()];\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e确认块的完整性\x3c\/h2\x3e\n\x3cp\x3e在任何时候都必须能确认一个区块或者一整条链的区块是否完整。在我们从其他节点接收到新的区块，并需要决定接受或拒绝它们时，这一点尤为重要。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var isValidNewBlock = (newBlock, previousBlock) =\x3e {\n    if (previousBlock.index \x2b 1 !== newBlock.index) {\n        console.log(\x27invalid index\x27);\n        return false;\n    } else if (previousBlock.hash !== newBlock.previousHash) {\n        console.log(\x27invalid previoushash\x27);\n        return false;\n    } else if (calculateHashForBlock(newBlock) !== newBlock.hash) {\n        console.log(\x27invalid hash: \x27 \x2b calculateHashForBlock(newBlock) \x2b \x27 \x27 \x2b newBlock.hash);\n        return false;\n    }\n    return true;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isValidNewBlock = (\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e, previousBlock) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (previousBlock.index \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e !== \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e.index) {\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27invalid index\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (previousBlock.hash !== \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e.previousHash) {\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27invalid previoushash\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (calculateHashForBlock(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e) !== \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e.hash) {\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27invalid hash: \x27\x3c\/span\x3e \x2b calculateHashForBlock(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27 \x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlock\x3c\/span\x3e.hash);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e选择最长的链\x3c\/h2\x3e\n\x3cp\x3e任何时候在链中都应该只有一组明确的块。万一冲突了（例如：两个结点都生成了72号块时），会选择有最大数目的块的链。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014779566?w=800\x26amp;h=439\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014779566?w=800\x26amp;h=439\x22 alt=\x22200行node.js代码让你彻底理解区块链是什么\x22 title=\x22200行node.js代码让你彻底理解区块链是什么\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var replaceChain = (newBlocks) =\x3e {\n    if (isValidChain(newBlocks) \x26amp;\x26amp; newBlocks.length \x3e blockchain.length) {\n        console.log(\x27Received blockchain is valid. Replacing current blockchain with received blockchain\x27);\n        blockchain = newBlocks;\n        broadcast(responseLatestMsg());\n    } else {\n        console.log(\x27Received blockchain invalid\x27);\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e replaceChain = (\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlocks\x3c\/span\x3e) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isValidChain(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlocks\x3c\/span\x3e) \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlocks\x3c\/span\x3e.length \x26gt; blockchain.length) {\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Received blockchain is valid. Replacing current blockchain with received blockchain\x27\x3c\/span\x3e);\n        blockchain = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eBlocks\x3c\/span\x3e;\n        broadcast(responseLatestMsg());\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Received blockchain invalid\x27\x3c\/span\x3e);\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e与其他结点的通信\x3c\/h2\x3e\n\x3cp\x3e结点的本质是和其他结点共享和同步区块链，下面的规则能保证网络同步。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e当一个结点生成一个新块时，它会在网络上散布这个块。\x3c\/li\x3e\n\x3cli\x3e当一个节点连接新peer时，它会查询最新的block。\x3c\/li\x3e\n\x3cli\x3e当一个结点遇到一个块，其index大于当前所有块的index时，它会添加这个块到它当前的链中，  或者到整个区块链中查询这个块。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014779567?w=800\x26amp;h=295\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014779567?w=800\x26amp;h=295\x22 alt=\x22200行node.js代码让你彻底理解区块链是什么\x22 title=\x22200行node.js代码让你彻底理解区块链是什么\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我没有采用自动发现peer的工具。peers的位置（URL）必须是手动添加的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e节点控制\x3c\/h2\x3e\n\x3cp\x3e在某种程度上用户必须能够控制节点。这一点通过搭建一个HTTP服务器可以实现。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var initHttpServer = () =\x3e {\n    var app = express();\n    app.use(bodyParser.json());\n\n    app.get(\x27\/blocks\x27, (req, res) =\x3e res.send(JSON.stringify(blockchain)));\n    app.post(\x27\/mineBlock\x27, (req, res) =\x3e {\n        var newBlock = generateNextBlock(req.body.data);\n        addBlock(newBlock);\n        broadcast(responseLatestMsg());\n        console.log(\x27block added: \x27 \x2b JSON.stringify(newBlock));\n        res.send();\n    });\n    app.get(\x27\/peers\x27, (req, res) =\x3e {\n        res.send(sockets.map(s =\x3e s._socket.remoteAddress \x2b \x27:\x27 \x2b s._socket.remotePort));\n    });\n    app.post(\x27\/addPeer\x27, (req, res) =\x3e {\n        connectToPeers([req.body.peer]);\n        res.send();\n    });\n    app.listen(http_port, () =\x3e console.log(\x27Listening http on port: \x27 \x2b http_port));\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e initHttpServer = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = express();\n    app.use(bodyParser.json());\n\n    app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/blocks\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e res.send(\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(blockchain)));\n    app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/mineBlock\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newBlock = generateNextBlock(req.body.data);\n        addBlock(newBlock);\n        broadcast(responseLatestMsg());\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27block added: \x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(newBlock));\n        res.send();\n    });\n    app.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/peers\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        res.send(sockets.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3es\x3c\/span\x3e =\x26gt;\x3c\/span\x3e s._socket.remoteAddress \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27:\x27\x3c\/span\x3e \x2b s._socket.remotePort));\n    });\n    app.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/addPeer\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        connectToPeers([req.body.peer]);\n        res.send();\n    });\n    app.listen(http_port, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Listening http on port: \x27\x3c\/span\x3e \x2b http_port));\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用户可以用下面的方法和节点互动：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e列出所有的块\x3c\/li\x3e\n\x3cli\x3e用用户提供的内容创建一个新的块\x3c\/li\x3e\n\x3cli\x3e列出或者新增peers\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e下面这个Curl的例子就是最直接的控制节点的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#get all blocks from the node\ncurl http:\/\/localhost:3001\/blocks\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs q\x22\x3e\x3ccode\x3e#\x3cspan class=\x22hljs-built_in\x22\x3eget\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eall\x3c\/span\x3e blocks \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e the node\ncurl http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/localhost:3001\/blocks\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e系统架构\x3c\/h2\x3e\n\x3cp\x3e需要指出的是，节点实际上展现了两个web服务器：一个（HTTP服务器）是让用户控制节点，另一个（Websocket HTTP服务器）。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014779568?w=389\x26amp;h=176\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014779568?w=389\x26amp;h=176\x22 alt=\x22200行node.js代码让你彻底理解区块链是什么\x22 title=\x22200行node.js代码让你彻底理解区块链是什么\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e创造 NaiveChain 的目的是为了示范和学习，因为它并没有“挖矿”算法（PoS或PoW），不能被用于公用网络，但是它实现了区块链运作的基本特性。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e如果你希望\x3cstrong\x3e高效的\x3c\/strong\x3e学习以太坊DApp开发，可以访问汇智网提供的\x3cstrong\x3e最热门\x3c\/strong\x3e在线互动教程：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/xc.hubwiz.com\/course\/5a952991adb3847553d205d1?affid=20180508sfw\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e适合区块链新手的以太坊DApp实战入门教程\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/xc.hubwiz.com\/course\/5abbb7acc02e6b6a59171dd6?affid=20180508sfw\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e区块链\x2bIPFS\x2bNode.js\x2bMongoDB\x2bExpress去中心化以太坊电商应用开发实战\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e原文也可以访问\x3ca href=\x22http:\/\/blog.hubwiz.com\/2018\/02\/06\/blockchain-diy-js\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这个以太坊博客\x3c\/a\x3e。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript开发区块链只需200行代码</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014779560">https://segmentfault.com/a/1190000014779560</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/6fa7i7tfc4p/" target="_blank">https://alili.tech/archive/6fa7i7tfc4p/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>