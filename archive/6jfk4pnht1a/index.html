<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Webpack 配置详解（含 4）——关注细节"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Webpack 配置详解（含 4）——关注细节 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/6jfk4pnht1a/",
				"appid": "1613049289050283", 
				"title": "Webpack 配置详解（含 4）——关注细节 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-02T02:30:15"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/7t76maadgqy/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/wa5obtg186f/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&text=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&text=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&title=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&is_video=false&description=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&title=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&title=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&title=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6jfk4pnht1a%2f&title=Webpack%20%e9%85%8d%e7%bd%ae%e8%af%a6%e8%a7%a3%ef%bc%88%e5%90%ab%204%ef%bc%89%e2%80%94%e2%80%94%e5%85%b3%e6%b3%a8%e7%bb%86%e8%8a%82"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Webpack 配置详解（含 4）——关注细节</h1><div class="meta"><div class="postdate"><time datetime="2018-12-02" itemprop="datePublished">2018-12-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e前言\x3c\/h1\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/toBeTheLight\/vue-webpack4-learning\/tree\/master\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源代码\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e熟悉 webpack 与 webpack4 配置。\x3c\/p\x3e\n\x3cp\x3ewebpack4 相对于 3 的最主要的区别是所谓的\x3ccode\x3e零配置\x3c\/code\x3e，但是为了满足我们的项目需求还是要自己进行配置，不过我们可以使用一些 webpack 的预设值。同时 webpack 也拆成了两部分，webpack 和 webpack-cli，都需要本地安装。 \x3c\/p\x3e\n\x3cp\x3e我们通过实现一个 vue 的开发模板（vue init webpack 模板，其实跟 vue 关系不太大）来进行一次体验。在配置过程中会尽量使用 webpack4 的相关内容。\x3c\/p\x3e\n\x3cp\x3e本文\x3cstrong\x3e不做\x3c\/strong\x3e webpack 配置的\x3cstrong\x3e完整介绍\x3c\/strong\x3e，着重介绍配置过程中需要注意的地方。查看代码注释阅读效果更佳，完整配置与详细注释可见源代码。配置位于 build 文件夹下。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e与版本 4 相关的章节会添加符号 ④\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e需要注意的一点是，我们的 webpack 代码是运行在node环境下的，这部分代码可以使用 node api，但是我们的业务代码（src下）是无法使用 node api 的。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e基本公用配置\x3c\/h1\x3e\n\x3cp\x3e由于 webpack 配置中的如 context，entry（chunk入口），output（输出）和 module.rules 中 loaders 的配置在开发模式和生产模式基本都是公用的，所以我们提取到 \x3ccode\x3ewebpack.base.js\x3c\/code\x3e 文件内，供复用。其中 output 部分如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22output: {\n  \n  path: path.resolve(__dirname, \x27..\/dist\/\x27), \/\/ 资源文件输出时写入的路径\n  filename: \x27static\/js\/[name].[chunkhash].js\x27, \/\/ 使用 chunkhash 加入文件名做文件更新和缓存处理\n  chunkFilename: \x27static\/js\/[name].[chunkhash].js\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eoutput: {\n  \n  \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 资源文件输出时写入的路径\x3c\/span\x3e\n  filename: \x3cspan class=\x22hljs-string\x22\x3e\x27static\/js\/[name].[chunkhash].js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用 chunkhash 加入文件名做文件更新和缓存处理\x3c\/span\x3e\n  chunkFilename: \x3cspan class=\x22hljs-string\x22\x3e\x27static\/js\/[name].[chunkhash].js\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的有：\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e文件名 hash\x3c\/h2\x3e\n\x3cp\x3ehash 是用在文件输出的名字中的，如 \x3ccode\x3e[name].[hash].js\x3c\/code\x3e，总的来说，webpack 提供了三种 hash：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3e[hash]\x3c\/code\x3e：此次打包的所有内容的 hash。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e[chunkhash]\x3c\/code\x3e：每一个 chunk 都根据自身的内容计算而来。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e[contenthash]\x3c\/code\x3e：由 css 提取插件提供，根据自身内容计算得来。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e三种 hash 的使用，我们在优化部分再讲，先优先使用 \x3ccode\x3e[chunkhash]\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eloader 优先级\x3c\/h2\x3e\n\x3cp\x3eloader 优先级需要注意两点，\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e同 test 配置内优先级：在同一个 test 下配置多个 loader ，\x3ca href=\x22https:\/\/webpack.js.org\/concepts\/loaders\/#loader-features\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e优先处理的 loader 放在配置数组的后面\x3c\/a\x3e，如对 less 处理，则：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  test: \/\\.less$\/,\n  use: [\n    \x27style-loader\x27, \n    \x27css-loader\x27, \n    \x27postcss-loader\x27, \n    \x27less-loader\x27\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.less$\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-string\x22\x3e\x27postcss-loader\x27\x3c\/span\x3e, \n    \x3cspan class=\x22hljs-string\x22\x3e\x27less-loader\x27\x3c\/span\x3e\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e不同 test 内优先级：如对 js 文件的处理需要两个 test 分别配置，使用 \x3ccode\x3eeslint-loader\x3c\/code\x3e 和 \x3ccode\x3ebabel-loader\x3c\/code\x3e ，但是又不能配置在一个配置对象内，可使用 \x3ca href=\x22https:\/\/webpack.js.org\/configuration\/module\/#rule-enforce\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eenforce: \x27pre\x27\x3c\/a\x3e 强调优先级，由 \x3ccode\x3eeslint-loader\x3c\/code\x3e 优先处理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  test: \/\\.(js|vue)$\/,\n  loader: \x27eslint-loader\x27,\n  enforce: \x27pre\x27,\n},\n{\n  test: \/\\.js$\/,\n  loader: \x27babel-loader\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(js|vue)$\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint-loader\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eenforce\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27pre\x27\x3c\/span\x3e,\n},\n{\n  \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3ecss 预处理器配置\x3c\/h2\x3e\n\x3cp\x3e我们以 less 文件的 loader 配置 \x3ccode\x3e[\x27vue-style-loader\x27, \x27css-loader\x27, \x27postcss-loader\x27, \x27less-loader\x27]\x3c\/code\x3e，使用 \x3ccode\x3e@import url(demo.less)\x3c\/code\x3e为例:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3eless-loader 先处理 less 语法\x3c\/li\x3e\n\x3cli\x3epostcss-loader 进行前缀添加等其他处理\x3c\/li\x3e\n\x3cli\x3ecss-loader 将内容引入 @import 所在的 css 文件内\x3c\/li\x3e\n\x3cli\x3evue-style-loader 将生成 style 标签，将 css 内容插入 HTML\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cem\x3evue-style-loader 功能类似 style-loader\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e但是由于 vue 中的单文件组件，又分为两种情况：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e.vue 文件内的 style：  \x3cbr\x3e\x3ccode\x3evue-loader\x3c\/code\x3e 会对 .vue 单文件组件进行处理，对 .vue 单文件组件内的各种 lang=\x22type\x22 我们可以在 \x3ccode\x3evue-loader\x3c\/code\x3e 的 options \x3ca href=\x22https:\/\/vue-loader-v14.vuejs.org\/zh-cn\/options.html#loaders\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e配置不同的 loader\x3c\/a\x3e，由于 \x3ccode\x3evue-loader\x3c\/code\x3e 内置了 \x3ccode\x3epostcss\x3c\/code\x3e 对 css 进行处理，所以此处我们不需要再配置 \x3ccode\x3epostcss-loader\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  test: \/\\.vue$\/,\n  loader: \x27vue-loader\x27,\n  options: {\n    loaders: {\n      less: [\x27\/\/ xxx-loaders\x27],\n      scss: [\x27\/\/ xxx-loaders\x27],\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e{\n  tes\x3cspan class=\x22hljs-variable\x22\x3et:\x3c\/span\x3e \/\\.vue$\/,\n  loader: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e,\n  option\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e {\n    loader\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e {\n      les\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27\/\/ xxx-loaders\x27\x3c\/span\x3e],\n      \x3cspan class=\x22hljs-keyword\x22\x3escs\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27\/\/ xxx-loaders\x27\x3c\/span\x3e],\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3ejs 直接引入中引入样式文件：  \x3cbr\x3e如 main.js 中 \x3ccode\x3eimport \x27demo.less\x27\x3c\/code\x3e，这种方式引入的样式文件，在 \x3ccode\x3evue-loader\x3c\/code\x3e 处理范围置之外，所以仍然需要配置 \x3ccode\x3epostcss-loader\x3c\/code\x3e。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e由于这种差异我们将 对 css 预处理器文件的配置封装为函数，由 \x3ccode\x3eusePostCss\x3c\/code\x3e 参数生成对应配置，将文件放入 \x3ccode\x3eutils.js\x3c\/code\x3e 文件内，将 \x3ccode\x3evue-loader\x3c\/code\x3e 配置放在 \x3ccode\x3evue-loader.js\x3c\/code\x3e 文件内。\x3c\/p\x3e\n\x3cp\x3e也就是对 css 预处理器的配置我们需要在 \x3ccode\x3evue-loader\x3c\/code\x3e 内和 \x3ccode\x3ewebpack\x3c\/code\x3e 内配置两遍。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e写这篇 README.md 期间 vue-loader 发布了 v15 版，需要配合插件使用，不用再进行两遍配置\x3c\/em\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3epostcss-loader\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.npmjs.com\/package\/postcss-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epostcss-loader\x3c\/a\x3e 是一个强大的 css 处理工具，我们将 postcss 的配置拆分出去，新建 \x3ccode\x3epostcss.config.js\x3c\/code\x3e 配置文件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  plugins: {\n    \/\/ 处理 @import\n    \x27postcss-import\x27: {},\n    \/\/ 处理 css 中 url\n    \x27postcss-url\x27: {},\n    \/\/ 自动前缀\n    \x27autoprefixer\x27: {\n      \x26quot;browsers\x26quot;: [\n        \x26quot;\x3e 1%\x26quot;,\n        \x26quot;last 2 versions\x26quot;\n      ]\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理 @import\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x27postcss-import\x27\x3c\/span\x3e: {},\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理 css 中 url\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x27postcss-url\x27\x3c\/span\x3e: {},\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动前缀\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x27autoprefixer\x27\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22browsers\x22\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-string\x22\x3e\x22\x26gt; 1%\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22last 2 versions\x22\x3c\/span\x3e\n      ]\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e除了注释中列出的需要的功能插件，我们还可能会用到 \x3ccode\x3enextcss\x3c\/code\x3e（新的css语法的处理），\x3ccode\x3epx2rem\/px-to-viewport\x3c\/code\x3e 移动端适配相关的插件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3ebabel-loader\x3c\/h2\x3e\n\x3cp\x3e我们使用 babel 编译浏览器不能识别的 js、类 js 语法，如转义 ES6\x2b、JSX等。同样将 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/babel-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-loader\x3c\/a\x3e 的配置拆分出去，需要创建 \x3ccode\x3e.babelrc\x3c\/code\x3e 并配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;presets\x26quot;: [\n    [\n      \/* *\n       *  babel-preset-env\n       *  可以根据配置的目标运行环境自动启用需要的 babel 插件。\n       *\/\n      \x26quot;env\x26quot;, {\n        \x26quot;modules\x26quot;: false, \/\/ 关闭 babel 对 es module 的处理\n        \x26quot;targets\x26quot;: { \/\/ 目标运行环境\n          \x26quot;browsers\x26quot;: [\x26quot;\x3e 1%\x26quot;, \x26quot;last 2 versions\x26quot;, \x26quot;not ie \x3c= 8\x26quot;]\n        }\n      }\n    ]\n  ],\n  \x26quot;plugins\x26quot;: [\n    \x26quot;syntax-dynamic-import\x26quot; \/\/ 异步加载语法编译插件\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22presets\x22\x3c\/span\x3e: [\n    [\n      \x3cspan class=\x22hljs-comment\x22\x3e\/* *\n       *  babel-preset-env\n       *  可以根据配置的目标运行环境自动启用需要的 babel 插件。\n       *\/\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x22env\x22\x3c\/span\x3e, {\n        \x3cspan class=\x22hljs-string\x22\x3e\x22modules\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关闭 babel 对 es module 的处理\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22targets\x22\x3c\/span\x3e: { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 目标运行环境\x3c\/span\x3e\n          \x3cspan class=\x22hljs-string\x22\x3e\x22browsers\x22\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22\x26gt; 1%\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22last 2 versions\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22not ie \x26lt;= 8\x22\x3c\/span\x3e]\n        }\n      }\n    ]\n  ],\n  \x3cspan class=\x22hljs-string\x22\x3e\x22plugins\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22syntax-dynamic-import\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 异步加载语法编译插件\x3c\/span\x3e\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e媒体资源 loader\x3c\/h2\x3e\n\x3cp\x3e我们还需要对图片、视频、字体等文件进行 loader 配置，以字体文件为例子，主要用到的是 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/url-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eurl-loader\x3c\/a\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \/**\n   * 末尾 \\?.* 匹配带 ? 资源路径\n   * 我们引入的第三方 css 字体样式对字体的引用路径中可能带查询字符串的版本信息\n   *\/\n  test: \/\\.(woff2|woff|eot|ttf|otf)(\\?.*)?$\/,\n  \/**\n   * url-loader\n   * 会配合 webpack 对资源引入路径进行复写，如将 css 提取成独立文件，可能出现 404 错误可查看 提取 js 中的 css 部分解决\n   * 会以 webpack 的输出路径为基本路径，以 name 配置进行具体输出\n   * limit 单位为 byte，小于这个大小的文件会编译为 base64 写进 js 或 html\n   *\/\n  loader: \x27url-loader\x27,\n  options: {\n    limit: 10000,\n    name: \x27static\/fonts\/[name].[hash:7].[ext]\x27,\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 末尾 \\?.* 匹配带 ? 资源路径\n   * 我们引入的第三方 css 字体样式对字体的引用路径中可能带查询字符串的版本信息\n   *\/\x3c\/span\x3e\n  test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(woff2|woff|eot|ttf|otf)(\\?.*)?$\/\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * url-loader\n   * 会配合 webpack 对资源引入路径进行复写，如将 css 提取成独立文件，可能出现 404 错误可查看 提取 js 中的 css 部分解决\n   * 会以 webpack 的输出路径为基本路径，以 name 配置进行具体输出\n   * limit 单位为 byte，小于这个大小的文件会编译为 base64 写进 js 或 html\n   *\/\x3c\/span\x3e\n  loader: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27static\/fonts\/[name].[hash:7].[ext]\x27\x3c\/span\x3e,\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e静态文件拷贝\x3c\/h2\x3e\n\x3cp\x3e直接引用（绝对路径）和代码执行时确定的资源路径应该是以静态文件存在的，这些资源文件不会经过 webpack 编译处理，所以我们将它们放在独立的文件夹（如 static）中，并在代码打包后拷贝到我们的输出目录，我们使用 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/copy-webpack-plugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecopy-webpack-plugin\x3c\/a\x3e 自动完成这个工作：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\n\n\/\/ 在开发模式下，会将文件写入内存\nnew CopyWebpackPlugin([\n  {\n    from: path.resolve(__dirname, \x27..\/static\x27),\n    to: \x27static\x27,\n    ignore: [\x27.*\x27]\n  }\n])\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CopyWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27copy-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在开发模式下，会将文件写入内存\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CopyWebpackPlugin([\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/static\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eignore\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27.*\x27\x3c\/span\x3e]\n  }\n])\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cem\x3e此插件在拷贝文件过多时会崩溃，不知道解决了没有。\x3c\/em\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e生产模式 production\x3c\/h1\x3e\n\x3cp\x3e我们先进行生产模式的配置。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e添加 script 脚本命令\x3c\/h2\x3e\n\x3cp\x3e在 package.json 下添加\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;scripts\x26quot;: {\n  \x26quot;build\x26quot;: \x26quot;node build\/build.js\x26quot;`\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs autohotkey\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22node build\/build.js\x22\x3c\/span\x3e`\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么使用 \x3ccode\x3enpm run build\x3c\/code\x3e 命令就可执行 \x3ccode\x3enode build\/build.js\x3c\/code\x3e，我们不直接使用 \x3ccode\x3ewebpack webpack.prod.config.js\x3c\/code\x3e 命令去执行配置文件，而是在 build.js 中，做一些文件删除的处理，再启动 webpack。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e创建 build.js 逻辑\x3c\/h2\x3e\n\x3cp\x3e主要是两个工作，引入 \x3ccode\x3erimraf\x3c\/code\x3e 模块删除 webpack 下之前产生的指定文件，启动 webpack，并在不同阶段给出不同的提示信息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 在第一行设置当前为 生产环境\nprocess.env.NODE_ENV = \x27production\x27\n\nconst webpack = require(\x27webpack\x27)\nconst rm = require(\x27rimraf\x27)\nconst webpackConfig = require(\x27.\/webpack.prod\x27)\n\/\/ 删除 webpack 输出目录下的内容，也可只删除子文件如 static 等\nrm(webpackConfig.output.path, err =\x3e {\n  \/\/ webpack 按照生产模式配置启动\n  webpack(webpackConfig, (err, stats) =\x3e {\n    \/\/ 输出一些状态信息\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在第一行设置当前为 生产环境\x3c\/span\x3e\nprocess.env.NODE_ENV = \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rm = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27rimraf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.prod\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除 webpack 输出目录下的内容，也可只删除子文件如 static 等\x3c\/span\x3e\nrm(webpackConfig.output.path, err =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 按照生产模式配置启动\x3c\/span\x3e\n  webpack(webpackConfig, (err, stats) =\x26gt; {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出一些状态信息\x3c\/span\x3e\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cem\x3e更多细节见源代码注释\x3c\/em\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e生产模式配置文件\x3c\/h2\x3e\n\x3cp\x3e新建 \x3ccode\x3ewebpack.prod.js\x3c\/code\x3e 文件，使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const merge = require(\x27webpack-merge\x27) \/\/ 专用合并 webpack 配置的包\nconst webpackBaseConfig = require(\x27.\/webpack.base\x27)\nmodule.exports = merge(webpackBaseConfig, {\n  \/\/ 生产模式配置\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 专用合并 webpack 配置的包\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpackBaseConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = merge(webpackBaseConfig, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生产模式配置\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e合并基本配置和生产模式独有配置，然后我们开始进行生产模式下的 webpack 的配置信息的填写。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e④ mode 预设\x3c\/h2\x3e\n\x3cp\x3e这是 webpack4 的新 api ，有三个预设值：\x3ccode\x3edevelopment\x3c\/code\x3e，\x3ccode\x3eproduction\x3c\/code\x3e，\x3ccode\x3enone\x3c\/code\x3e，我们在生产模式选用\x3ccode\x3emode: \x27production\x27\x3c\/code\x3e，webpack4在此配置下\x3ca href=\x22https:\/\/webpack.js.org\/concepts\/mode\/#usage\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e默认启用\x3c\/a\x3e了：\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\n\x3cp\x3e插件\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eFlagDependencyUsagePlugin：应该是删除无用代码的，其他插件依赖\x3c\/li\x3e\n\x3cli\x3eFlagIncludedChunksPlugin：应该是删除无用代码的，其他插件依赖\x3c\/li\x3e\n\x3cli\x3eModuleConcatenationPlugin：作用域提升 webpack3的scope hosting\x3c\/li\x3e\n\x3cli\x3eNoEmitOnErrorsPlugin：遇到错误代码不跳出\x3c\/li\x3e\n\x3cli\x3eOccurrenceOrderPlugin\x3c\/li\x3e\n\x3cli\x3eSideEffectsFlagPlugin\x3c\/li\x3e\n\x3cli\x3eUglifyJsPlugin：js代码压缩\x3c\/li\x3e\n\x3cli\x3eprocess.env.NODE_ENV 的值设为 production\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e所以这些默认启用的内容我们不需要再配置。\x3c\/p\x3e\n\x3cp\x3e最后一点设置 \x3ccode\x3eprocess.env.NODE_ENV 的值设为 production\x3c\/code\x3e 其实是使用 DefinePlugin 插件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.DefinePlugin({\n  \x26quot;process.env.NODE_ENV\x26quot;: JSON.stringify(\x26quot;production\x26quot;) \n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n  \x3cspan class=\x22hljs-string\x22\x3e\x22process.env.NODE_ENV\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(\x3cspan class=\x22hljs-string\x22\x3e\x22production\x22\x3c\/span\x3e) \n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从而我们可以在业务代码中通过 \x3ccode\x3eprocess.env.NODE_ENV\x3c\/code\x3e，如进行判断，使用开发接口还是线上接口。如果我们需要在 webpack 中判断当前环境，还需要单独的设置 \x3ccode\x3eprocess.env.NODE_ENV = \x27production\x27\x3c\/code\x3e，这也是我们在 \x3ccode\x3ebuild.js\x3c\/code\x3e 中第一行做的事情。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e添加 webpack 打出的 bundles 到 HTML 文件\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e我们使用 webpack 配置入口时只能配置 js 文件作为入口，webpack 打出的 bundles 并不能自动与我们项目的 HTML 文件发生关联。\x3c\/li\x3e\n\x3cli\x3e需要我们手动添加\x3ccode\x3e\x26lt;script src=\x22.\/bundles.js\x22\x26gt;\x26lt;\/script\x26gt;\x3c\/code\x3e（还可能包括后面提取出来的 css 文件）到 HTML 文件。\x3c\/li\x3e\n\x3cli\x3e我们可以使用 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/html-webpack-plugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehtml-webpack-plugin\x3c\/a\x3e 插件自动完成这个工作。\x3c\/li\x3e\n\x3cli\x3e当仅使用 webpack 对 js 进行打包，而没有 HTML文件需求时，不需要这一步。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\nplugins: [\n  new HtmlWebpackPlugin({\n    filename: path.join(__dirname, \x27..\/dist\/index.html\x27),\/\/ 文件写入路径\n    template: path.join(__dirname, \x27..\/src\/index.html\x27),\/\/ 模板文件路径\n    inject: true \/\/ js 等 bundles 插入 html 的位置 head\/body等\n  })\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\nplugins: [\n  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/index.html\x27\x3c\/span\x3e),\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件写入路径\x3c\/span\x3e\n    template: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/index.html\x27\x3c\/span\x3e),\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模板文件路径\x3c\/span\x3e\n    inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ js 等 bundles 插入 html 的位置 head\/body等\x3c\/span\x3e\n  })\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果不对 HtmlWebpackPlugin 进行配置，则其会创建一个 HTML 文件，其中 \x3ccode\x3efilename\x3c\/code\x3e 在开发模式下还是比较重要的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e④ 提取 js 中的 css 部分到单独的文件\x3c\/h2\x3e\n\x3cp\x3e使用过 webpack3 的同学应该对 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/extract-text-webpack-plugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eextract-text-webpack-plugin\x3c\/a\x3e 插件（以旧插件代称）比较熟悉，为了尝试webpack4，我并不想使用这个插件的 \x3ccode\x3e@next\x3c\/code\x3e 版本，所以选择了新的替代插件 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/mini-css-extract-plugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emini-css-extract-plugin\x3c\/a\x3e（以新插件代称）。  \x3cbr\x3e与旧插件相同，同样需要在 webpack 的 loader 部分和 plugin 部分都进行配置，不同的是新插件提供了单独的 loader，在 loader 部分与旧插件的配置方式不太相同。配置如下：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3eloader 部分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const MiniCssExtractPlugin = require(\x26quot;mini-css-extract-plugin\x26quot;)\n\/\/ \n[\n  {\n    loader: MiniCssExtractPlugin.loader,\n    options: {\n      \/\/ (segmentfault 这儿的多行注释渲染有点问题 😰，改成单行注释形式)\n      \/\/ 复写 css 文件中资源路径\n      \/\/ webpack3.x 配置在 extract-text-webpack-plugin 插件中\n      \/\/ 因为 css 文件中的外链是相对与 css 的，\n      \/\/ 我们抽离的 css 文件在可能会单独放在 css 文件夹内\n      \/\/ 引用其他如 img\/a.png 会寻址错误\n      \/\/ 这种情况下所以单独需要配置 publicPath，复写其中资源的路径\n      \/\/\n      publicPath: \x27..\/\x27 \n    }\n  },\n  {\n    loader: \x27css-loader\x27,\n    options: {}\n  },\n  {\n    loader: \x27less-loader\x27,\n    options: {}\n  }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e MiniCssExtractPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22mini-css-extract-plugin\x22\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x3c\/span\x3e\n[\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: MiniCssExtractPlugin.loader,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (segmentfault 这儿的多行注释渲染有点问题 😰，改成单行注释形式)\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 复写 css 文件中资源路径\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack3.x 配置在 extract-text-webpack-plugin 插件中\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 因为 css 文件中的外链是相对与 css 的，\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 我们抽离的 css 文件在可能会单独放在 css 文件夹内\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引用其他如 img\/a.png 会寻址错误\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这种情况下所以单独需要配置 publicPath，复写其中资源的路径\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x3c\/span\x3e\n      publicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e \n    }\n  },\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {}\n  },\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27less-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {}\n  }\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3eplugin 部分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new MiniCssExtractPlugin({\n  \/\/ 输出到单独的 css 文件夹下\n  filename: \x26quot;static\/css\/[name].[chunkhash].css\x26quot;\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e MiniCssExtractPlugin({\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出到单独的 css 文件夹下\x3c\/span\x3e\n  filename: \x3cspan class=\x22hljs-string\x22\x3e\x22static\/css\/[name].[chunkhash].css\x22\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e可以看到这个 loader 也配置在了 css 预处理器部分，在前面我们已经把 css 预处理器的配置提取到了 utils.js 文件的函数内，所以这里也是，我们使用 \x3ccode\x3eextract\x3c\/code\x3e 参数决定是否需要提取。\x3c\/p\x3e\n\x3cp\x3e回忆一下，之前使用的 \x3ccode\x3estyle-loader\x3c\/code\x3e 或 \x3ccode\x3evue-style-loader\x3c\/code\x3e 的作用，它们会创建标签将 css 的内容直接插入到 HTML中。而提取成独立的 css 文件之后，插入到 HTML 的工作由 \x3ccode\x3ehtml-webpack-plugin\x3c\/code\x3e 插件完成，两者职责的这部分职责是重复的，所以我们需要使用 \x3ccode\x3eextract\x3c\/code\x3e 参数做类似如下处理：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (options.extract) {\n  return [MiniCssExtractPlugin.loader, ...otherLoaders]\n} else {\n  return [\x27vue-style-loader\x27, ...otherLoaders]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (options.extract) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [MiniCssExtractPlugin.loader, ...otherLoaders]\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e, ...otherLoaders]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e④ 拆分 js 代码\x3c\/h2\x3e\n\x3cp\x3e这是 webpack 配置中很重要的一个环节，影响到我们使用浏览器缓存的合理性，影响页面资源的加载速度，将 js 进行合理拆分，可以有效减小我们每次更新代码影响到的文件范围。  \x3cbr\x3e使用过 webpack3 的同学一定清楚，我们一般会提取出这么几个文件 \x3ccode\x3emanifest.js\x3c\/code\x3e（webpack 运行时，即webpack解析其他bundle的代码等）、\x3ccode\x3evendor.js\x3c\/code\x3e（node_modules内的库）、app.js（真正的项目业务代码）。在 webpack3 中我们使用 \x3ccode\x3ewebpack.optimize.CommonsChunkPlugin\x3c\/code\x3e插件进行提取，webpack4 中我们可以直接使用 \x3ca href=\x22https:\/\/webpack.js.org\/plugins\/split-chunks-plugin\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eoptimization\x3c\/a\x3e 配置项进行配置（当然仍可使用插件配置）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 优化部分包括代码拆分\n * 且运行时（manifest）的代码拆分提取为了独立的 runtimeChunk 配置 \n *\/\noptimization: {\n  splitChunks: {\n    chunks: \x26quot;all\x26quot;,\n    cacheGroups: {\n      \/\/ 提取 node_modules 中代码\n      vendors: {\n        test: \/[\\\\\/]node_modules[\\\\\/]\/,\n        name: \x26quot;vendors\x26quot;,\n        chunks: \x26quot;all\x26quot;\n      },\n      commons: {\n        \/\/ async 设置提取异步代码中的公用代码\n        chunks: \x26quot;async\x26quot;\n        name: \x27commons-async\x27,\n        \/**\n         * minSize 默认为 30000\n         * 想要使代码拆分真的按照我们的设置来\n         * 需要减小 minSize\n         *\/\n        minSize: 0,\n        \/\/ 至少为两个 chunks 的公用代码\n        minChunks: 2\n      }\n    }\n  },\n  \/**\n   * 对应原来的 minchunks: Infinity\n   * 提取 webpack 运行时代码\n   * 直接置为 true 或设置 name\n   *\/\n  runtimeChunk: {\n    name: \x27manifest\x27\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 优化部分包括代码拆分\n * 且运行时（manifest）的代码拆分提取为了独立的 runtimeChunk 配置 \n *\/\x3c\/span\x3e\noptimization: {\n  \x3cspan class=\x22hljs-attr\x22\x3esplitChunks\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3echunks\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22all\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecacheGroups\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提取 node_modules 中代码\x3c\/span\x3e\n      vendors: {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/[\\\\\/]node_modules[\\\\\/]\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22vendors\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3echunks\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22all\x22\x3c\/span\x3e\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3ecommons\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ async 设置提取异步代码中的公用代码\x3c\/span\x3e\n        chunks: \x3cspan class=\x22hljs-string\x22\x3e\x22async\x22\x3c\/span\x3e\n        name: \x3cspan class=\x22hljs-string\x22\x3e\x27commons-async\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/**\n         * minSize 默认为 30000\n         * 想要使代码拆分真的按照我们的设置来\n         * 需要减小 minSize\n         *\/\x3c\/span\x3e\n        minSize: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 至少为两个 chunks 的公用代码\x3c\/span\x3e\n        minChunks: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n      }\n    }\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 对应原来的 minchunks: Infinity\n   * 提取 webpack 运行时代码\n   * 直接置为 true 或设置 name\n   *\/\x3c\/span\x3e\n  runtimeChunk: {\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也可将不会变的开发依赖配置到单独的entry中，如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22entry: {\n  app: \x27index.js\x27,\n  vendor2: [\x27vue\x27, \x27vue-router\x27, \x27axios\x27]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eentry: {\n  \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.js\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3evendor2\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vue-router\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader17\x22\x3e开发模式 development\x3c\/h1\x3e\n\x3cp\x3e开发模式与生产模式的不同是，在开发时会频繁运行代码，所以很多东西在开发模式是不推荐配置的，如css文件提取，代码压缩等。所以针对一些写入公共配置文件，但是开发模式不需要的功能，我们需要做类似修改：\x3ccode\x3eprocess.env.NODE_ENV === \x27production\x27 ? true : false\x3c\/code\x3e，如 css 预处理中是否需要配置提取 loader \x3ccode\x3eMiniCssExtractPlugin.loader\x3c\/code\x3e。此外还有一些是只配置在生产模式下的，如 \x3ccode\x3eMiniCssExtractPlugin\x3c\/code\x3e 和 js 代码拆分优化。\x3c\/p\x3e\n\x3cp\x3e开发模式我们需要一个\x3ca href=\x22https:\/\/webpack.js.org\/configuration\/dev-server\/#devserver\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e开发服务\x3c\/a\x3e，帮我们完成实时更新、接口代理等功能。我们使用 \x3ccode\x3ewebpack-dev-server\x3c\/code\x3e。需要 npm 安装。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader18\x22\x3e添加 script 脚本命令\x3c\/h2\x3e\n\x3cp\x3e同样，在 package.json 下添加\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;scripts\x26quot;: {\n  \x26quot;dev\x26quot;: \x26quot;webpack-dev-server --config .\/build\/webpack.dev.js\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22dev\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack-dev-server --config .\/build\/webpack.dev.js\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用 \x3ccode\x3e--config\x3c\/code\x3e 指定配置文件，由于命令直接调用 webpack-dev-server 运行，所以我们直接写配置就好，可以不像生产模式一样去编写调用逻辑。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3e开发模式配置文件\x3c\/h2\x3e\n\x3cp\x3e新建 \x3ccode\x3ewebpack.dev.js\x3c\/code\x3e 文件，同样使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 在第一行设置当前环境为开发环境\nprocess.env.NODE_ENV = \x27development\x27\nconst merge = require(\x27webpack-merge\x27) \/\/ 专用合并webpack配置的包\nconst webpackBaseConfig = require(\x27.\/webpack.base\x27)\nmodule.exports = merge(webpackBaseConfig, {\n  \/\/ 开发模式配置\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在第一行设置当前环境为开发环境\x3c\/span\x3e\nprocess.env.NODE_ENV = \x3cspan class=\x22hljs-string\x22\x3e\x27development\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 专用合并webpack配置的包\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpackBaseConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = merge(webpackBaseConfig, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发模式配置\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader20\x22\x3e④ mode 预设\x3c\/h2\x3e\n\x3cp\x3e同样，在开发模式下我们可以将 \x3ccode\x3emode\x3c\/code\x3e 配置为 \x3ccode\x3edevelopment\x3c\/code\x3e，同样\x3ca href=\x22https:\/\/webpack.js.org\/concepts\/mode\/#usage\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e默认启用\x3c\/a\x3e了一些功能：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e插件\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eNamedChunksPlugin：使用 entry 名做 chunk 标识\x3c\/li\x3e\n\x3cli\x3eNamedModulesPlugin：使用模块的相对路径非自增 id 做模块标识\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3eprocess.env.NODE_ENV 的值设为 development\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader21\x22\x3e开发服务配置 devServer\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/webpack.js.org\/configuration\/dev-server\/#devserver\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22devServer: {\n  clientLogLevel: \x27warning\x27,\n  inline: true,\n  \/\/ 启动热更新\n  hot: true,\n  \/\/ 在页面上全屏输出报错信息\n  overlay: {\n    warnings: true,\n    errors: true\n  },\n  \/\/ 显示 webpack 构建进度\n  progress: true,\n  \/\/ dev-server 服务路径\n  contentBase: false,\n  compress: true,\n  host: \x27localhost\x27,\n  port: \x278080\x27,\n  \/\/ 自动打开浏览器\n  open: true,\n  \/\/ 可以进行接口代理配置\n  proxy： xxx,\n  \/\/ 跟 friendly-errors-webpack-plugin 插件配合\n  quiet: true,\n  publicPath: \x27\/\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3edevServer: {\n  \x3cspan class=\x22hljs-attr\x22\x3eclientLogLevel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27warning\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3einline\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动热更新\x3c\/span\x3e\n  hot: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在页面上全屏输出报错信息\x3c\/span\x3e\n  overlay: {\n    \x3cspan class=\x22hljs-attr\x22\x3ewarnings\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eerrors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 显示 webpack 构建进度\x3c\/span\x3e\n  progress: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ dev-server 服务路径\x3c\/span\x3e\n  contentBase: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ecompress\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27localhost\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eport\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x278080\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动打开浏览器\x3c\/span\x3e\n  open: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以进行接口代理配置\x3c\/span\x3e\n  proxy： xxx,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 跟 friendly-errors-webpack-plugin 插件配合\x3c\/span\x3e\n  quiet: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader22\x22\x3e其他插件\x3c\/h2\x3e\n\x3cp\x3edevServer 使用热更新 hot 时需要使用插件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22plugins: [\n  new webpack.HotModuleReplacementPlugin()\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eplugins: [\n  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HotModuleReplacementPlugin()\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优化 webpack 输出信息，需要配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const FriendlyErrorsPlugin = require(\x27friendly-errors-webpack-plugin\x27)\nplugins: [\n  new FriendlyErrorsPlugin()\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e FriendlyErrorsPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27friendly-errors-webpack-plugin\x27\x3c\/span\x3e)\nplugins: [\n  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FriendlyErrorsPlugin()\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader23\x22\x3e注意事项\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e热更新：在使用热更新时，我们的 chunk 名中不能使用 \x3ccode\x3e[hash]\x3c\/code\x3e 做标识，文件名变化无法热更新，所以需要将原来配置在公共配置中的 output 中的文件名配置分别写入生产和开发模式配置中，开发模式去掉 \x3ccode\x3e[hash]\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22filename: \x27static\/[name].js\x27, \nchunkFilename: \x27static\/[id].js\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3efilename:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27static\/[name].js\x27\x3c\/span\x3e, \n\x3cspan class=\x22hljs-string\x22\x3echunkFilename:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27static\/[id].js\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3eHtmlWebpackPlugin：在生产模式下，我们将 html 文件写入到 dist 下，但是在开发模式下，并没有实际的写入过程，且 \x3ccode\x3edevServer\x3c\/code\x3e 启动后的服务内容与 \x3ccode\x3econtentBase\x3c\/code\x3e 有关，两者需要一致，所以我们将 \x3ccode\x3eHtmlWebpackPlugin\x3c\/code\x3e 的配置也分为 生产和开发模式，开发模式下使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new HtmlWebpackPlugin({\n  filename: \x27index.html\x27, \/\/ 文件写入路径，前面的路径与 devServer 中 contentBase 对应\n  template: path.resolve(__dirname, \x27..\/src\/index.html\x27),\/\/ 模板文件路径\n  inject: true\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3eHtmlWebpackPlugin\x3c\/span\x3e({\n  \x3cspan class=\x22hljs-attribute\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e, \/\/ 文件写入路径，前面的路径与 devServer 中 contentBase 对应\n  template: path.\x3cspan class=\x22hljs-built_in\x22\x3eresolve\x3c\/span\x3e(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/index.html\x27\x3c\/span\x3e),\/\/ 模板文件路径\n  inject: true\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader24\x22\x3e优化\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader25\x22\x3e配置提取\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e开发模式和生产模式的一些功能启用，如 css 是否提取。\x3c\/li\x3e\n\x3cli\x3e路径配置，如文件输出路径和文件名、output 中的 publicPath（代码 output 中只配置了 \x3ca href=\x22https:\/\/webpack.js.org\/configuration\/output\/#output-path\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epath\x3c\/a\x3e，没配置 \x3ca href=\x22https:\/\/webpack.js.org\/configuration\/output\/#output-publicpath\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epublicPath\x3c\/a\x3e，将这部分路径的 static 写到了各个资源的输出name中，可参考\x3ca href=\x22https:\/\/juejin.im\/post\/5ae9ae5e518825672f19b094?utm_source=gold_browser_extension\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebpack中publicPath详解\x3c\/a\x3e）、服务配置如端口等。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们可以提取到独立的 config 文件中（本代码没做）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader26\x22\x3e拆分 js 代码\x3c\/h2\x3e\n\x3cp\x3e在生产模式的 \x3ccode\x3e拆分 js 代码\x3c\/code\x3e 部分我们已经讲了如何拆分，那么为了更好的分析我们的拆分是否合理，我们可以配置一个 bundle 组成分析的插件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const BundleAnalyzer = require(\x27webpack-bundle-analyzer\x27)\nplugins: [\n  new BundleAnalyzer.BundleAnalyzerPlugin()\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BundleAnalyzer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-bundle-analyzer\x27\x3c\/span\x3e)\nplugins: [\n  \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BundleAnalyzer.BundleAnalyzerPlugin()\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader27\x22\x3ehash 固化\x3c\/h2\x3e\n\x3cp\x3e我们使用文件名中的 hash 变化来进行资源文件的更新，那么合理利用缓存时，就要求我们合理的拆分文件，在内容更新时最小限度的影响文件名中的 hash。这里就用到了\x3ccode\x3e[hash]\x3c\/code\x3e，\x3ccode\x3e[chunkhash]\x3c\/code\x3e，\x3ccode\x3e[contenthash]\x3c\/code\x3e。然而 webpack 对 hash 的默认处理并不尽如人意，这一部分的优化可以参考\x3ca href=\x22https:\/\/github.com\/pigcan\/blog\/issues\/9\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e基于 webpack 的持久化缓存方案\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader28\x22\x3e多页面\x3c\/h1\x3e\n\x3cp\x3e多页面配置代码位于 \x3ca href=\x22https:\/\/github.com\/toBeTheLight\/vue-webpack4-learning\/tree\/muilt-pages\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emuilt-pages 分支\x3c\/a\x3e。我们只需做少量修改，以目前有 entry 页和 index 页为例。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader29\x22\x3eentry 改动\x3c\/h2\x3e\n\x3cp\x3e将两个页面的 js 入口都配置在 \x3ccode\x3ewebpack\x3c\/code\x3e 的 \x3ccode\x3eentry\x3c\/code\x3e中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22entry: {\n  \/**\n    * 入口，chunkname: 路径\n    * 多入口可配置多个\n    *\/\n  main: \x27.\/src\/main.js\x27,\n  entry: \x27.\/src\/entry.js\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eentry: {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n    * 入口，chunkname: 路径\n    * 多入口可配置多个\n    *\/\x3c\/span\x3e\n  main: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/main.js\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/entry.js\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也可以自己设置项目结构，使用 node api 动态读取的方式获取目前的多页面入口。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader30\x22\x3eHtmlWebpackPlugin 改动\x3c\/h2\x3e\n\x3cp\x3e需按照页面个数配置多个 \x3ccode\x3eHtmlWebpackPlugin\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new HtmlWebpackPlugin({\n  filename: path.join(__dirname, \x27..\/dist\/main.html\x27),\/\/ 文件写入路径\n  template: path.join(__dirname, \x27..\/src\/index.html\x27),\/\/ 模板文件路径\n  inject: true, \/\/ 插入位置\n  chunks: [\x27manifest\x27, \x27vendors\x27, \x27common\x27, \x27main\x27]\n}),\nnew HtmlWebpackPlugin({\n  filename: path.join(__dirname, \x27..\/dist\/entry.html\x27),\/\/ 文件写入路径\n  template: path.join(__dirname, \x27..\/src\/index.html\x27),\/\/ 模板文件路径\n  inject: true, \/\/ 插入位置\n  chunks: [\x27manifest\x27, \x27vendors\x27, \x27common\x27, \x27entry\x27]\n}),\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n  \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/main.html\x27\x3c\/span\x3e),\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件写入路径\x3c\/span\x3e\n  template: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/index.html\x27\x3c\/span\x3e),\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模板文件路径\x3c\/span\x3e\n  inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 插入位置\x3c\/span\x3e\n  chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendors\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27common\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27main\x27\x3c\/span\x3e]\n}),\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n  \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/entry.html\x27\x3c\/span\x3e),\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件写入路径\x3c\/span\x3e\n  template: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/src\/index.html\x27\x3c\/span\x3e),\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模板文件路径\x3c\/span\x3e\n  inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 插入位置\x3c\/span\x3e\n  chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendors\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27common\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27entry\x27\x3c\/span\x3e]\n}),\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中需手动指定每个页面的插入的 chunks（同步的），否则会将其他页面的文件也一同插入当前页面。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader31\x22\x3e④ 公共js提取\x3c\/h2\x3e\n\x3cp\x3e在单页面下，一般不存在提取非异步 js 文件的公共代码（非 node_modules）的问题，在多页面下我们的页面间可能会公用 api、配置等文件，此时可以增加：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27common\x27: {\n  \/\/ initial 设置提取同步代码中的公用代码\n  chunks: \x27initial\x27,\n  \/\/ test: \x27xxxx\x27, 也可使用 test 选择提取哪些 chunks 里的代码\n  name: \x27common\x27,\n  minSize: 0,\n  minChunks: 2\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x27common\x27\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ initial 设置提取同步代码中的公用代码\x3c\/span\x3e\n  chunks: \x3cspan class=\x22hljs-string\x22\x3e\x27initial\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ test: \x27xxxx\x27, 也可使用 test 选择提取哪些 chunks 里的代码\x3c\/span\x3e\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27common\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eminSize\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e提取同步代码中的公用代码\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader32\x22\x3e参考\x3c\/h1\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/pigcan\/blog\/issues\/9\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e基于 webpack 的持久化缓存方案\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/webpack\/webpack\/issues\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack issues\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/vuejs-templates\/webpack\/issues\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evuejs-templates\/webpack\/issues\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Webpack 配置详解（含 4）——关注细节</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014685887">https://segmentfault.com/a/1190000014685887</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/6jfk4pnht1a/" target="_blank">https://alili.tech/archive/6jfk4pnht1a/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>