<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="一道小小的题目引发对javascript支持正则表达式相关方法的探讨"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>一道小小的题目引发对javascript支持正则表达式相关方法的探讨 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/6rgg1uutzbr/",
				"appid": "1613049289050283", 
				"title": "一道小小的题目引发对javascript支持正则表达式相关方法的探讨 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-24T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/wk6o5miwvma/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/byfr7wkn2e5/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&text=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&text=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&title=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&is_video=false&description=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&title=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&title=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&title=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f6rgg1uutzbr%2f&title=%e4%b8%80%e9%81%93%e5%b0%8f%e5%b0%8f%e7%9a%84%e9%a2%98%e7%9b%ae%e5%bc%95%e5%8f%91%e5%af%b9javascript%e6%94%af%e6%8c%81%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f%e7%9b%b8%e5%85%b3%e6%96%b9%e6%b3%95%e7%9a%84%e6%8e%a2%e8%ae%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">一道小小的题目引发对javascript支持正则表达式相关方法的探讨</h1><div class="meta"><div class="postdate"><time datetime="2018-12-24" itemprop="datePublished">2018-12-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e本文发布在我的博客\x3ca href=\x22https:\/\/2ue.github.io\/2017\/11\/24\/regex-to-something\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一道小小的题目引发对javascript支持正则表达式相关方法的探讨\x3c\/a\x3e\x3cbr\x3e许可协议: 署名-非商业性使用-禁止演绎 4.0 国际    转载请保留原文链接及作者。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3cblockquote\x3e\x3cp\x3e以前对于正则是非常惧怕的，因为看不懂和学不会。但最近项目中频繁的使用到了正则，因此强迫自己去学习了解，慢慢的体会到了他的魅力与强大。当然学习正则初入门的时候有些枯燥难懂，但越学越觉得轻松。本文不准备说关于正则本身的事儿，而是说一说关于javascript中关于正则的几个方法中被很多人忽略的地方。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e工具\x3c\/h2\x3e\n\x3cp\x3e说到正则，很多人都是从抄到改到自己写，这个过程可能有时候很漫长。如一些工具能帮助你快速分析和学习正则，那么学习的过程你肯定要轻松得多。下面我推荐两个我经常使用的正则在线可视化工具，正则可视化工具图解符合铁路图规律（其实不明白什么是铁路一样很容易看懂，只是一些细微的地方和我们的常规思维有点差别）。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/regexper.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregexper\x3c\/a\x3e 我最常用的一个，个人觉得UI做得比其他好\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/jex.im\/regulex\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregulex\x3c\/a\x3e 备选，他有一个很舒心的功能，可以提供一段js，嵌套到你的网站，生成正则可视化图\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e一道小小的题目\x3c\/h2\x3e\n\x3cp\x3e这道题目是在群里日常闲聊时，公司同事抛出来的，具体是出自哪里本人没去考察。先先说说题目：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e写一个方法把一个数字末尾的连续0变成9，如1230000变成1239999\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e一道很简单的题目，直接正则就能搞定，也许你会写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function zoreToNine(num){\n    return (num \x2b \x27\x27).replace(\/0\/g,9);\n}\n\/\/或者\nfunction zoreToNine(num){\n    return (num \x2b \x27\x27).replace(\/[1-9]0\x2b$\/,9);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ezoreToNine\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enum\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (num \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e).replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/0\/g\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e);\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/或者\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ezoreToNine\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enum\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (num \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e).replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\x2b$\/\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这也是此题的陷阱所在，按照上面的方法，1023000就会被转化成1923999，这样是不符合要求的，所以改进一下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function zoreToNine(num){\n    return (num \x2b \x27\x27).replace(\/[1-9]0\x2b$\/,function($1){\n        return $1.replace(\/0\/g,9);\n    });\n}\nzoreToNine(1223000); \/\/1223999\nzoreToNine(1023000); \/\/1023999\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ezoreToNine\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3enum\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (num \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e).replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\x2b$\/\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e $\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3ereplace(\x3cspan class=\x22hljs-regexp\x22\x3e\/0\/g\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e);\n    });\n}\nzoreToNine(\x3cspan class=\x22hljs-number\x22\x3e1223000\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/1223999\x3c\/span\x3e\nzoreToNine(\x3cspan class=\x22hljs-number\x22\x3e1023000\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/1023999\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e关于这个问题的解决方案\x3ca href=\x22https:\/\/segmentfault.com\/u\/jawil\x22\x3e@微醺岁月\x3c\/a\x3e同学提供了一种，位置匹配的方法，简单了很多，厉害！\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;12300100000\x26quot;.replace(\/0(?=(0\x2b$)|\\b)\/g,9); \/\/12300199999\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x2212300100000\x22\x3c\/span\x3e.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/0(?=(0\x2b$)|\\b)\/g\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/12300199999\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然解决问题的方法很多，不一定非要用正则，还完全可以使用纯算术的方法实现，大家有兴趣可以尝试，闲话少说进入这次的主题：\x3ccode\x3ejavascript\x3c\/code\x3e支持正则表达式相关方法，注意并不是正则对象的方法。\x3cbr\x3e上述方法使用了正则，有趣的是在回调函数里有一个$1，这个$1到底是什么？所有的匹配规则匹配后都有$1这个变量么？...一连串的问题，以前我从来没有去追探过，趁着昨个比较空闲，去追探了一番，并在今天整理了一下，写下此文记录。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e主角\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ejavascript\x3c\/code\x3e中正则对象有三个方法：\x3ccode\x3etest\x3c\/code\x3e、\x3ccode\x3eexec\x3c\/code\x3e和\x3ccode\x3ecompile\x3c\/code\x3e，但是此次的主角并不是它们！我们讨论的是能够使用正则表示的相关方法：\x3ccode\x3esearch\x3c\/code\x3e、\x3ccode\x3ematch\x3c\/code\x3e、\x3ccode\x3ereplace\x3c\/code\x3e和\x3ccode\x3esplit\x3c\/code\x3e，注意它们都是\x3ccode\x3eString\x3c\/code\x3e对象的方法，使用它们必须要是\x3ccode\x3eString\x3c\/code\x3e类型.\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3ereplace(rule[regexp\/substr], replacement)\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ereplace\x3c\/code\x3e是一个用于替换字符串的方法，虽然看似简单，但是它隐藏的机关也是常常被人忽略。具体分析一下它的特点:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22它接收两个参数\n无副作用不影响原始变量\n返回被改变的字符串(一定是字符串类型)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gcode\x22\x3e\x3ccode\x3e它接收两个参数\n无副作用不影响原始变量\n返回被改变的字符串\x3cspan class=\x22hljs-comment\x22\x3e(一定是字符串类型)\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e定义一些变量，方便全文取用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let a = \x2712309800\x27, b = \x2712309800[object Object]\x27, b = \x2712309800{}\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a = \x3cspan class=\x22hljs-string\x22\x3e\x2712309800\x27\x3c\/span\x3e, b = \x3cspan class=\x22hljs-string\x22\x3e\x2712309800[object Object]\x27\x3c\/span\x3e, b = \x3cspan class=\x22hljs-string\x22\x3e\x2712309800{}\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e参数rule\x3c\/h3\x3e\n\x3cp\x3e在一般情况，rule参数一般是正则、字符串、数字。\x3cbr\x3e如果是字符串，将会在匹配到第一个符合条件的目标，结束方法；\x3cbr\x3e如果是正则，则按照正则的规则进行匹配\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/匹配第一个0替换成5\na.replace(0,5); \/\/\x2712359800\x27\n\/\/匹配所有的0替换成5\na.replace(\/0\/g,5); \/\/\x2712359855\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/匹配第一个0替换成5\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2712359800\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/匹配所有的0替换成5\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/0\/g\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2712359855\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e参数replacement\x3c\/h3\x3e\n\x3cp\x3e在一般情况，replacement参数是字符串、数字、者回调。\x3c\/p\x3e\n\x3ch4\x3e包含$的字符串\x3c\/h4\x3e\n\x3cp\x3e当参数rule为正则，并且正则至少包含有一对完整的\x3ccode\x3e()\x3c\/code\x3e时，如果\x3ccode\x3ereplacement\x3c\/code\x3e包含有$的字符串，那么对于\x3ccode\x3e$n\x3c\/code\x3e(n为大于0的整数，n的长度取决于正则中括号的对数)，会被解析成一个变量。但是也仅仅只是作为一个变量，无法在字符串中进行计算，此时更类似特别的字符串模板变量。\x3c\/p\x3e\n\x3cp\x3e一般情况下，\x3ccode\x3e$n\x3c\/code\x3e中n的长度取决于正则中括号的对数，$1表示第1对括号匹配的结果，$2表示第2对匹配的结果...在正则所有的括号对中，左括号出现在第几个位置（或者说从左往右），则它就是第几对括号，以此类推。姑且我们把这种规则成为\x3ccode\x3e正则匹配分割规则\x3c\/code\x3e（ps:这完全是我自己取的一个名字，方便文章后面使用和记忆）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a.replace(0,\x27$0\x27); \/\/\x27123$09800\x27\na.replace(\/00\/g,\x27$0\x27); \/\/\x27123098$0\x27\na.replace(\/[1-9]0\x2b$\/,\x27$1\x27); \/\/\x2712309$1\x27\na.replace(\/([1-9](0\x2b$))\/,\x27$1\x27); \/\/\x2712309800\x27，此时$1为[1-9](0\x2b$)匹配到的内容，$2为0\x2b$匹配到的内容\na.replace(\/([1-9])(0\x2b$)\/,\x27$1\x27); \/\/\x27123098\x27，此时$1为[1-9]匹配到的内容，$2为0\x2b$匹配到的内容\na.replace(\/([1-9])(0\x2b$)\/,\x27$1*$2\x27); \/\/\x27123098*00\x27，此处的$1和$2不会安照期待的情况进行乘法计算，要进行计算可以用回调\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ea.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27$0\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27123$09800\x27\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/00\/g\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27$0\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27123098$0\x27\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\x2b$\/\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27$1\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2712309$1\x27\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9](0\x2b$))\/\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27$1\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2712309800\x27，此时$1为[1-9](0\x2b$)匹配到的内容，$2为0\x2b$匹配到的内容\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9])(0\x2b$)\/\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27$1\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27123098\x27，此时$1为[1-9]匹配到的内容，$2为0\x2b$匹配到的内容\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9])(0\x2b$)\/\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27$1*$2\x27\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x27123098*00\x27，此处的$1和$2不会安照期待的情况进行乘法计算，要进行计算可以用回调\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e请注意：虽然目前参数replacement中携带有$n仍然能正常使用，但是这种方式已经不被\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Deprecated_and_obsolete_features#RegExp_Properties\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e规范\x3c\/a\x3e所推荐，更应该使用回调来完成这个操作。这一点谢谢\x3ca href=\x22https:\/\/segmentfault.com\/u\/lucky4\x22\x3e@lucky4\x3c\/a\x3e同学的指出\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e如果正则中包含有全局匹配标志(g)，那么每次匹配的都符合上述规则\x3c\/p\x3e\n\x3ch4\x3e回调函数\x3c\/h4\x3e\n\x3cp\x3e先看例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a.replace(\/[1-9]0\x2b$\/,function(){\n    console.log(arguments); \/\/[\x26quot;800\x26quot;,5,\x26quot;12309800\x26quot;]、\n});\na.replace(\/([1-9])0\x2b$\/,function(){\n    console.log(arguments); \/\/[\x26quot;800\x26quot;,\x26quot;8\x26quot;,5,\x26quot;12309800\x26quot;]\n});\na.replace(\/([1-9])(0\x2b$)\/,function(){\n    console.log(arguments); \/\/[\x26quot;800\x26quot;,\x26quot;8\x26quot;,\x26quot;00\x26quot;,5,\x26quot;12309800\x26quot;]\n});\na.replace(\/(([1-9])(0\x2b$))\/,function(){\n    console.log(arguments); \/\/[\x26quot;800\x26quot;,\x26quot;800\x26quot;,\x26quot;8\x26quot;,\x26quot;00\x26quot;,5,\x26quot;12309800\x26quot;]\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ea.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\x2b$\/\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x22800\x22,5,\x2212309800\x22]、\x3c\/span\x3e\n});\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9])0\x2b$\/\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x22800\x22,\x228\x22,5,\x2212309800\x22]\x3c\/span\x3e\n});\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9])(0\x2b$)\/\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x22800\x22,\x228\x22,\x2200\x22,5,\x2212309800\x22]\x3c\/span\x3e\n});\na.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/(([1-9])(0\x2b$))\/\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x22800\x22,\x22800\x22,\x228\x22,\x2200\x22,5,\x2212309800\x22]\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e回调函数的\x3ccode\x3earguments\x3c\/code\x3e数组部分组成：[完整匹配的字符串,$1,$2,...,$n,匹配的开始位置,原始字符串],\x3ccode\x3e$1...$n\x3c\/code\x3e表示每个括号对的匹配，规则和前面的相同。\x3cbr\x3e所以有一下规律：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let arr = [...arguments], len = arr.length;\n(len \x3e= 3) === true;\narr[0] = 完整匹配的字符串;\narr[len-2] = 匹配的开始位置;\narr[len-1] = 原始字符串;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = [...arguments], len = arr.length;\n(len \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e) === \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\narr[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] = 完整匹配的字符串;\narr[len\x3cspan class=\x22hljs-number\x22\x3e-2\x3c\/span\x3e] = 匹配的开始位置;\narr[len\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e] = 原始字符串;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意：除了匹配的开始位置是\x3ccode\x3eNumber\x3c\/code\x3e类型外，其余的都是\x3ccode\x3eString\x3c\/code\x3e类型\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e非常规类型参数\x3c\/h3\x3e\n\x3cp\x3e如果参数类型不是上述两种情况，会发生什么呢？看看下面的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a.replace(0,null); \/\/123null9800\na.replace(0,undefined); \/\/123null9800\na.replace(0,[]); \/\/1239800\na.replace(0,Array); \/\/1230,3,123098009800\nb.replace({},5); \/\/123098005\nc.replace({},5); \/\/\x2712309800{}\x27\na.replace(0,{}); \/\/123[object Object]9800\na.replace(0,Object); \/\/12309800\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ea.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/123null9800\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/123null9800\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,[]); \x3cspan class=\x22hljs-comment\x22\x3e\/\/1239800\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/1230,3,123098009800\x3c\/span\x3e\nb.replace({},\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/123098005\x3c\/span\x3e\nc.replace({},\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x2712309800{}\x27\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,{}); \x3cspan class=\x22hljs-comment\x22\x3e\/\/123[object Object]9800\x3c\/span\x3e\na.replace(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/12309800\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e由上面的例子可以看出，如果非正则也非字符串，则有以下规则:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22`null`变量，则会转换成`\x27null\x27`字符串;\n`undefined`变量，则会转换成`\x27undefined\x27`字符串;\n`[]`变量，则会调用`join()`方法转换成字符串，默认以`,`分割，值得注意的是空数组将会被转换成空字符串（没有任何字符），通常会被匹配源字符串的开始位置（默认开始位置为空字符串）;\n\x27Array\x27变量，则会先转成成一个匹配的数组，形如`[完整匹配的字符串,$1,$2,...,$n,匹配的开始位置,原始字符串]`,然后对它调用`join()`方法转换成字符串，默认以`,`分割;\n`{}`变量，则会调用`Object.protype.toString.call()`方法把`{}`转换成`[object Object]`;\n`Object`变量，则貌似什么都没做\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e`null`变量，则会转换成`\x3cspan class=\x22hljs-string\x22\x3e\x27null\x27\x3c\/span\x3e`字符串;\n`undefined`变量，则会转换成`\x3cspan class=\x22hljs-string\x22\x3e\x27undefined\x27\x3c\/span\x3e`字符串;\n`[]`变量，则会调用`join()`方法转换成字符串，默认以`,`分割，值得注意的是空数组将会被转换成空字符串（没有任何字符），通常会被匹配源字符串的开始位置（默认开始位置为空字符串）;\n\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e变量，则会先转成成一个匹配的数组，形如`[完整匹配的字符串,$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,$\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,...,$n,匹配的开始位置,原始字符串]`,然后对它调用`join()`方法转换成字符串，默认以`,`分割;\n`{}`变量，则会调用`Object.protype.toString.call()`方法把`{}`转换成`[object Object]`;\n`Object`变量，则貌似什么都没做\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e虽然可以传入这些非正常参数，但大多数情况下这些类型的参数对实际是毫无意义的，所以不建议传入以上类型的参数。同上面的\x3ccode\x3e正则匹配分割规则\x3c\/code\x3e一样，为了方便使用称呼，姑且我把上面的转换规则称为\x3ccode\x3e正则匹配参数转换规则\x3c\/code\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3ematch(rule[regex\/substr])\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ematch\x3c\/code\x3e方法可在字符串内检索指定的值，或找到一个或多个正则表达式的匹配。\x3cbr\x3e该方法类似\x3ccode\x3eindexOf\x3c\/code\x3e和\x3ccode\x3elastIndexOf\x3c\/code\x3e，但是它返回指定的值，而不是字符串的位置；\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e参数\x3c\/h3\x3e\n\x3cp\x3e参数的传递除了常规的正则和字符串以外，其余所有类型的参数都会按照上述的\x3ccode\x3e正则匹配参数转换规则\x3c\/code\x3e转换成字符串形式来匹配。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e返回值\x3c\/h3\x3e\n\x3cp\x3e返回值根据传入的参数类型和规则的不同，返回的内容不同，但总体来说，它是返回一个对象，而不是索引，如果没匹配到任何符合条件的字符串，则返回\x3ccode\x3enull\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e非全局匹配正则\x3c\/h3\x3e\n\x3cp\x3e如果匹配规则是一个非全局匹配规则，那么，它此时的返回值是一个伪数组对象(likeArr)，形如:[一个展开的匹配到的字符串数组, 匹配到的字符串位置， 原始字符串]，它有如下规律：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var likeArr = a.match(regex);\nlikeArr[0] = 匹配到的字符串;\nlikeArr[1...n] = 正则匹配分割规则匹配的字符串;\nlikeArr.index = 匹配到字符串的位置\nlikeArr.inupt = 原始字符串\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e likeArr = a.match(regex);\nlikeArr[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] = 匹配到的字符串;\nlikeArr[\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e..n] = 正则匹配分割规则匹配的字符串;\nlikeArr.index = 匹配到字符串的位置\nlikeArr.inupt = 原始字符串\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a.match(\/[1-9]0\x2b$\/); \/\/[0:\x27800\x27,index:5,input:\x2712309800\x27]\na.match(\/([1-9])0\x2b$\/); \/\/[0:\x27800\x27,1:\x278\x27,index:5,input:\x2712309800\x27]\na.match(\/[1-9](0\x2b$)\/); \/\/[0:\x27800\x27,1:\x2700\x27,index:5,input:\x2712309800\x27]\na.match(\/([1-9])(0\x2b$)\/); \/\/[0:\x27800\x27,1:\x278\x27,2:\x2700\x27,index:5,input:\x2712309800\x27]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ea.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\x2b$\/\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[0:\x27800\x27,index:5,input:\x2712309800\x27]\x3c\/span\x3e\na.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9])0\x2b$\/\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[0:\x27800\x27,1:\x278\x27,index:5,input:\x2712309800\x27]\x3c\/span\x3e\na.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9](0\x2b$)\/\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[0:\x27800\x27,1:\x2700\x27,index:5,input:\x2712309800\x27]\x3c\/span\x3e\na.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/([1-9])(0\x2b$)\/\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[0:\x27800\x27,1:\x278\x27,2:\x2700\x27,index:5,input:\x2712309800\x27]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e全局匹配正则\x3c\/h3\x3e\n\x3cp\x3e如果匹配规则是一个全局匹配规则(正在携带有g标志)，那么，它此时的返回值是一个数组对象(arr)，形如:[匹配到的字符串数1,匹配到的字符串数2,匹配到的字符串数3];\x3cbr\x3e看例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a.match(\/[1-9]0\/); \/\/[0:\x2730\x27,index:2,input:\x2712309800\x27]\na.match(\/[1-9]0\/g); \/\/[0:\x2730\x27,1:\x2780\x27]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ea.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\/\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[0:\x2730\x27,index:2,input:\x2712309800\x27]\x3c\/span\x3e\na.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/[1-9]0\/g\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/[0:\x2730\x27,1:\x2780\x27]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3esearch(rule[regex\/substr])\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3esearch\x3c\/code\x3e方法用于检索字符串中指定的子字符串，或检索与正则表达式相匹配的子字符串。\x3cbr\x3e\x3ccode\x3estringObject\x3c\/code\x3e中第一个与\x3ccode\x3erule\x3c\/code\x3e相匹配的子串的起始位置。如果没有找到任何匹配的子串，则返回\x3ccode\x3e-1\x3c\/code\x3e。\x3cbr\x3e注意:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3esearch\x3c\/code\x3e方法不执行全局匹配，它将忽略标志\x3ccode\x3eg\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e忽略\x3ccode\x3eregexp\x3c\/code\x3e的\x3ccode\x3elastIndex\x3c\/code\x3e属性，总是从字符串的开始进行检索，这意味着它总是返回\x3ccode\x3estringObject\x3c\/code\x3e的第一个匹配的位置\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e同样，\x3ccode\x3esearch\x3c\/code\x3e可以传入任何参数类型，它会遵循\x3ccode\x3e正则匹配参数转换规则\x3c\/code\x3e进行转换\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3esplit(rule[regex\/substr],len)\x3c\/h2\x3e\n\x3cp\x3e这个方法就不用多说，很常用的字符串分割方法。\x3cbr\x3e第二个参数的作用就是限制返回值的长度，表示返回值的最大长度\x3c\/p\x3e\n\x3cp\x3e当然，它依然可以传入任何参数类型，会遵循\x3ccode\x3e正则匹配参数转换规则\x3c\/code\x3e进行转换\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e有一段加密的后的密码，我们需要分离出字符串\x2712a344gg333tt445656ffa6778ii99\x27中的前三组数字，通过某种计算才能得出正确的密码\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x2712a344gg333tt445656ffa6778ii99\x27.split(\/[a-zA-Z]\x2b\/g,3);\/\/[\x2712\x27,\x27334\x27,\x27333\x27]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x2712a344gg333tt445656ffa6778ii99\x27\x3c\/span\x3e.split(\x3cspan class=\x22hljs-regexp\x22\x3e\/[a-zA-Z]\x2b\/g\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\x3cspan class=\x22hljs-comment\x22\x3e\/\/[\x2712\x27,\x27334\x27,\x27333\x27]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e最后\x3c\/h2\x3e\n\x3cp\x3e写了这么多，突然发现以前仅仅是在用这些方法，了解得很不够深入。越是学习才发现其中的奥秘！学无止境，与诸君共勉！\x3cbr\x3e以上内容如有错误之处，希望诸君不吝指出！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>一道小小的题目引发对javascript支持正则表达式相关方法的探讨</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012147039">https://segmentfault.com/a/1190000012147039</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/6rgg1uutzbr/" target="_blank">https://alili.tech/archive/6rgg1uutzbr/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>