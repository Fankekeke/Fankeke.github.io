<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="更快的部署和迭代, hello ecosystem.json"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>更快的部署和迭代, hello ecosystem.json | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/71e9065a/",
				"appid": "1613049289050283", 
				"title": "更快的部署和迭代, hello ecosystem.json | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-22T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/549db21/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/bc9bb1af/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&text=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&text=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&title=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&is_video=false&description=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&title=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&title=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&title=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f71e9065a%2f&title=%e6%9b%b4%e5%bf%ab%e7%9a%84%e9%83%a8%e7%bd%b2%e5%92%8c%e8%bf%ad%e4%bb%a3%2c%20hello%20ecosystem.json"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文链接">原文链接</a></li><li><a href="#原文标题">原文标题</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">更快的部署和迭代, hello ecosystem.json</h1><div class="meta"><div class="postdate"><time datetime="2018-10-22" itemprop="datePublished">2018-10-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3eWe announced it at \x3ca href=\x22http:\/\/www.nodejsparis.fr\/meetups\x22\x3eNodeJS paris meetup\x3c\/a\x3e (here are the \x3ca href=\x22http:\/\/www.slideshare.net\/Alexandre-Strzelewicz\/keymetrics-pm2\x22\x3eslides\x3c\/a\x3e) and we did it! For the release of \x3ca href=\x22https:\/\/github.com\/Unitech\/pm2\x22\x3ePM2 0.9.x\x3c\/a\x3e, a new awesome and simple feature will make your life much easier.\x3c\/p\x3e\n\x3cp\x3e我们从Node.js Mozart，\x3ca href=\x22https:\/\/github.com\/visionmedia\x22\x3eTJ Holowaychuk\x3c\/a\x3e嵌入了\x3ca href=\x22https:\/\/github.com\/visionmedia\/deploy\x22\x3edeploy\x3c\/a\x3e 的修改版本，并且我们还重构了JSON应用程序声明。在内部，它是一个简单的bash脚本，不需要安装任何外部依赖关系。\x3c\/p\x3e\n\x3cp\x3e这是嵌入式部署系统的功能：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs vim\x22\x3e$ pm2 deploy \x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;configuration_file\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;environment\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;command\x26gt;\x3c\/span\x3e\n\n  Command\x3cspan class=\x22hljs-variable\x22\x3es:\x3c\/span\x3e\n    setup                run remote setup commands\n    \x3cspan class=\x22hljs-keyword\x22\x3eupdate\x3c\/span\x3e               \x3cspan class=\x22hljs-keyword\x22\x3eupdate\x3c\/span\x3e deploy \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e the latest release\n    revert [n]           revert \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e [n]\x3cspan class=\x22hljs-keyword\x22\x3eth\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elast\x3c\/span\x3e deployment \x3cspan class=\x22hljs-built_in\x22\x3eor\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n    curr[ent]            output current release commit\n    \x3cspan class=\x22hljs-keyword\x22\x3eprev\x3c\/span\x3e[ious]           output \x3cspan class=\x22hljs-keyword\x22\x3eprevious\x3c\/span\x3e release commit\n    exec|run \x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;cmd\x26gt;\x3c\/span\x3e       \x3cspan class=\x22hljs-keyword\x22\x3eexecute\x3c\/span\x3e the given \x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;cmd\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elist\x3c\/span\x3e                 \x3cspan class=\x22hljs-keyword\x22\x3elist\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eprevious\x3c\/span\x3e deploy commits\n    [ref]                deploy \x3cspan class=\x22hljs-keyword\x22\x3eto\x3c\/span\x3e [ref], the \x3cspan class=\x22hljs-string\x22\x3e\x22ref\x22\x3c\/span\x3e setting, \x3cspan class=\x22hljs-built_in\x22\x3eor\x3c\/span\x3e latest \x3cspan class=\x22hljs-keyword\x22\x3etag\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e您可以通过以下方式显示PM2部署帮助：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 deploy \x3cspan class=\x22hljs-built_in\x22\x3ehelp\x3c\/span\x3e\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e不要忘记，这个功能在PM2\x26gt; 0.9上可用，所以 \x3ca href=\x22https:\/\/github.com\/Unitech\/pm2#how-to-update-pm2\x22\x3e请升级至 PM2\x3c\/a\x3e.\x3c\/p\x3e\n\x3ch2\x3eecosystem.json 文件\x3c\/h2\x3e\n\x3cp\x3e现在，默认情况下调用的一个新文件ecosystem.json，该文件将允许您声明您的应用程序\/服务以及您想要将代码部署到的不同主机。\x3c\/p\x3e\n\x3cp\x3e您可以通过以下命令生成一个样本ecosystem.json：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 ecosystem\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个文件看起来像这样：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs json\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22apps\x22\x3c\/span\x3e : [{\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e      : \x3cspan class=\x22hljs-string\x22\x3e\x22API\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22script\x22\x3c\/span\x3e    : \x3cspan class=\x22hljs-string\x22\x3e\x22app.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22env\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22COMMON_ENV_VAR\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-string\x22\x3e\x22env_production\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22NODE_ENV\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22production\x22\x3c\/span\x3e,\n    }\n  },{\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e      : \x3cspan class=\x22hljs-string\x22\x3e\x22WEB\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22script\x22\x3c\/span\x3e    : \x3cspan class=\x22hljs-string\x22\x3e\x22web.js\x22\x3c\/span\x3e\n  }],\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22deploy\x22\x3c\/span\x3e : {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22production\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22user\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22node\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22host\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22212.83.163.1\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22repo\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22git@github.com:repo.git\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22ref\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-string\x22\x3e\x22origin\/master\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22path\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22\/var\/www\/production\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22post-deploy\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22pm2 startOrRestart ecosystem.json --env production\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22dev\x22\x3c\/span\x3e : {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22user\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22node\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22host\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22212.83.163.1\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22repo\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22git@github.com:repo.git\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22ref\x22\x3c\/span\x3e  : \x3cspan class=\x22hljs-string\x22\x3e\x22origin\/master\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22path\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22\/var\/www\/development\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22post-deploy\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22pm2 startOrRestart ecosystem.json --env production\x22\x3c\/span\x3e\n    }\n  }\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e应用程序部分描述了您要运行的不同应用程序\/服务，以及描述应在何处部署代码的部署部分。\x3c\/p\x3e\n\x3cp\x3e正如你所注意到的那样，还有一个env_\x26lt;ENVIRONMENT\x26gt;属性指定了专用的环境变量，具体取决于你要部署代码的位置。\x3c\/p\x3e\n\x3cp\x3e与往常一样，您可以通过以下方式在本地启动所有这些服务\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 start ecosystem.json\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3\x3e部署声明\x3c\/h3\x3e\n\x3cp\x3e在每个环境（生产，开发......）中都有一些属性可以像这些配置一样：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3ekey \/path\/to\/some\x3cspan class=\x22hljs-selector-class\x22\x3e.pem\x3c\/span\x3e  \nuser deployer  \nhost n\x3cspan class=\x22hljs-selector-class\x22\x3e.n\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.n\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.n\x3c\/span\x3e  \nrepo git@github\x3cspan class=\x22hljs-selector-class\x22\x3e.com\x3c\/span\x3e:visionmedia\/express\x3cspan class=\x22hljs-selector-class\x22\x3e.git\x3c\/span\x3e  \npath \/var\/www\/myapp\x3cspan class=\x22hljs-selector-class\x22\x3e.com\x3c\/span\x3e  \nref origin\/master  \npre-deploy .\/bin\/something  \npost-deploy \/var\/www\/myapp.com\/update\x3cspan class=\x22hljs-selector-class\x22\x3e.sh\x3c\/span\x3e  \n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e根据您的需求定制\/添加keys。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e重要提示：默认情况下，部署后设置了一些专用于PM2的逻辑。在内部，如果未设置此属性，则之后部署将调用pm2 startOrRestart ecosystem.json(\x3ca href=\x22https:\/\/github.com\/Unitech\/pm2\/blob\/master\/bin\/pm2#L142\x22\x3estartOrRestart\x3c\/a\x3e)\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch2\x3e配置部署\x3c\/h2\x3e\n\x3cp\x3e在目标服务器上，您必须已经通过以下方式安装了PM2：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs coffeescript\x22\x3e$ \x3cspan class=\x22hljs-built_in\x22\x3enpm\x3c\/span\x3e install pm2@latest -g\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同时PM2能够通过以下方式启动服务器启动：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 startup ubuntu\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e断开远程服务器的连接并确保您的远程服务器具有您的ssh密钥。您可以通过以下方式生成并复制它们\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs crmsh\x22\x3e$ ssh-keygen -t rsa\n$ ssh-copy-id \x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e@myserver\x3c\/span\x3e.com\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eOnce you have generated the ecosystem.json and edited it accordingly to your needs, you\x27re all set and ready to go!\x3c\/p\x3e\n\x3cp\x3e一旦你编辑生成了ecosystem.json，你就已经准备好了。\x3c\/p\x3e\n\x3ch2\x3e安装和部署\x3c\/h2\x3e\n\x3ch3\x3eSetup\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e重要提示\x3c\/strong\x3e：提交您的项目Git存储库上的node_modules文件夹。部署代码以保持所有环境之间的版本一致性时，这是最佳做法。\x3c\/p\x3e\n\x3cp\x3e第一台PM2必须初始化您的远程系统。要做到这一点：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 deploy \x26lt;environment_key\x26gt; setup\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这将根据路径属性创建文件夹注意：默认情况下，PM2将查找本地的ecos.json文件，如果您想要设置另一个文件，请执行$ pm2 deploy \x26lt;ecosystem_file\x26gt; \x26lt;environment_key\x26gt;设置（例如，您可以使用包.json代替！）\x3c\/p\x3e\n\x3ch3\x3e部署\x3c\/h3\x3e\n\x3cp\x3e现在，PM2必须获取最新版本的应用程序，并启动在应用程序属性下的ecos.json中配置的应用程序。要做到这一点：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 deploy \x26lt;environment_key\x26gt;\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e完成！\x3c\/p\x3e\n\x3ch2\x3e其他命令\x3c\/h2\x3e\n\x3cp\x3e使用当前文件夹中的ecosystem.json：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs shell\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e#\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e Update the code\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 deploy \x26lt;environment_key\x26gt; update\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\n#\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e Revert to [n] th commit\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 deploy \x26lt;environment_key\x26gt; revert 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e\n#\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e Execute a \x3cspan class=\x22hljs-built_in\x22\x3ecommand\x3c\/span\x3e on the server\x3c\/span\x3e\n\x3cspan class=\x22hljs-meta\x22\x3e$\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e pm2 deploy production \x3cspan class=\x22hljs-built_in\x22\x3eexec\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22pm2 restart all\x22\x3c\/span\x3e\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2\x3e结论\x3c\/h2\x3e\n\x3cp\x3e希望这会对你有所帮助！您可能感兴趣的其他一些链接：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/Unitech\/pm2-deploy\x22\x3ePM2中嵌入的pm2-deploy模块\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e关于\x3ca href=\x22https:\/\/github.com\/Unitech\/pm2#deployment\x22\x3ePM2 Readme.md\x3c\/a\x3e的部署文档 \x3c\/li\x3e\n\x3cli\x3e如果您有任何问题通过\x3ca href=\x22https:\/\/github.com\/Unitech\/pm2\/issues?state=open\x22\x3ePM2 Githubissues]\x3c\/a\x3e告诉我们\x3c\/li\x3e\n\x3c\/ul\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文链接">原文链接</h2><p><a href="https://www.zcfy.cc/article/deploy-and-iterate-faster-hello-ecosystem-json">https://www.zcfy.cc/article/deploy-and-iterate-faster-hello-ecosystem-json</a></p><h2 id="原文标题">原文标题</h2><p>更快的部署和迭代, hello ecosystem.json</p><h2>本文链接：</h2><a href="https://alili.tech/archive/71e9065a/" target="_blank">https://alili.tech/archive/71e9065a/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>