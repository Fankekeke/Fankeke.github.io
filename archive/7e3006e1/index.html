<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="底层 Linux 容器运行时之发展史"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>底层 Linux 容器运行时之发展史 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/7e3006e1/",
				"appid": "1613049289050283", 
				"title": "底层 Linux 容器运行时之发展史 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-21T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/aa138172/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/7e43fcce/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&text=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&text=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&title=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&is_video=false&description=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&title=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&title=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&title=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7e3006e1%2f&title=%e5%ba%95%e5%b1%82%20Linux%20%e5%ae%b9%e5%99%a8%e8%bf%90%e8%a1%8c%e6%97%b6%e4%b9%8b%e5%8f%91%e5%b1%95%e5%8f%b2"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">底层 Linux 容器运行时之发展史</h1><div class="meta"><div class="postdate"><time datetime="2018-10-21" itemprop="datePublished">2018-10-21</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3ch1\x3e\x3ca href=\x22#底层-linux-容器运行时之发展史\x22\x3e\x3c\/a\x3e底层 Linux 容器运行时之发展史\x3c\/h1\x3e\n\x3cblockquote\x3e\n\x3cp\x3e“容器运行时”是一个被过度使用的名词。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/camo.githubusercontent.com\/01236235216d3e4cbe8ebc3484878866f01ef589\/68747470733a2f2f6f70656e736f757263652e636f6d2f73697465732f64656661756c742f66696c65732f7374796c65732f696d6167652d66756c6c2d73697a652f7075626c69632f6c6561642d696d616765732f72756e6e696e672d636f6e7461696e6572732d74776f2d736869702d636f6e7461696e65722d62656163682e706e673f69746f6b3d7772347a4a433670\x22\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t01c7bc092abe080598.png\x22 alt=\x22\x22\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在 Red Hat，我们乐意这么说，“容器即 Linux，Linux 即容器”。下面解释一下这种说法。传统的容器是操作系统中的进程，通常具有如下 3 个特性：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3cp\x3e资源限制\x3c\/p\x3e\n\x3cp\x3e当你在系统中运行多个容器时，你肯定不希望某个容器独占系统资源，所以我们需要使用资源约束来控制 CPU、内存和网络带宽等资源。Linux 内核提供了 cgroup 特性，可以通过配置控制容器进程的资源使用。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e安全性配置\x3c\/p\x3e\n\x3cp\x3e一般而言，你不希望你的容器可以攻击其它容器或甚至攻击宿主机系统。我们使用了 Linux 内核的若干特性建立安全隔离，相关特性包括 SELinux、seccomp 和 capabilities。\x3c\/p\x3e\n\x3cp\x3e（LCTT 译注：从 2.2 版本内核开始，Linux 将特权从超级用户中分离，产生了一系列可以单独启用或关闭的 capabilities）\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e虚拟隔离\x3c\/p\x3e\n\x3cp\x3e容器外的任何进程对于容器而言都应该不可见。容器应该使用独立的网络。不同的容器对应的进程应该都可以绑定 80 端口。每个容器的内核映像image、根文件系统rootfs（rootfs）都应该相互独立。在 Linux 中，我们使用内核的名字空间namespace特性提供虚拟隔离virtual separation。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e那么，具有安全性配置并且在 cgroup 和名字空间下运行的进程都可以称为容器。查看一下 Red Hat Enterprise Linux 7 操作系统中的 PID 1 的进程 systemd，你会发现 systemd 运行在一个 cgroup 下。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs elixir\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e# tail -1 \/proc\/1\/cgroup\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:name=systemd\x3c\/span\x3e\x3cspan class=\x22hljs-symbol\x22\x3e:\/\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3ccode\x3eps\x3c\/code\x3e 命令让我们看到 systemd 进程具有 SELinux 标签：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs less\x22\x3e# \x3cspan class=\x22hljs-selector-tag\x22\x3eps\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3e-eZ\x3c\/span\x3e | \x3cspan class=\x22hljs-selector-tag\x22\x3egrep\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3esystemd\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3esystem_u\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:system_r\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:init_t\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:s0\x3c\/span\x3e             \x3cspan class=\x22hljs-selector-tag\x22\x3e1\x3c\/span\x3e ?     \x3cspan class=\x22hljs-selector-tag\x22\x3e00\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:00\x3c\/span\x3e\x3cspan class=\x22hljs-selector-pseudo\x22\x3e:48\x3c\/span\x3e \x3cspan class=\x22hljs-selector-tag\x22\x3esystemd\x3c\/span\x3e\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e以及 capabilities：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs avrasm\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e# grep Cap \/proc\/1\/status\x3c\/span\x3e\n...\n\x3cspan class=\x22hljs-symbol\x22\x3eCapEff:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0000001\x3c\/span\x3efffffffff\n\x3cspan class=\x22hljs-symbol\x22\x3eCapBnd:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e0000001\x3c\/span\x3efffffffff\n\x3cspan class=\x22hljs-symbol\x22\x3eCapBnd:\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e0000003\x3c\/span\x3efffffffff\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e最后，查看 \x3ccode\x3e\/proc\/1\/ns\x3c\/code\x3e 子目录，你会发现 systemd 运行所在的名字空间。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs tcl\x22\x3els -l \/\x3cspan class=\x22hljs-keyword\x22\x3eproc\x3c\/span\x3e\/1\/ns\x3cspan class=\x22hljs-title\x22\x3e\nlrwxrwxrwx.\x3c\/span\x3e 1\x3cspan class=\x22hljs-title\x22\x3e root\x3c\/span\x3e root 0\x3cspan class=\x22hljs-title\x22\x3e Jan\x3c\/span\x3e 11 11:46\x3cspan class=\x22hljs-title\x22\x3e mnt\x3c\/span\x3e -\x26gt;\x3cspan class=\x22hljs-title\x22\x3e mnt:[4026531840]\x3c\/span\x3e\nlrwxrwxrwx. 1\x3cspan class=\x22hljs-title\x22\x3e root\x3c\/span\x3e root 0\x3cspan class=\x22hljs-title\x22\x3e Jan\x3c\/span\x3e 11 11:46\x3cspan class=\x22hljs-title\x22\x3e net\x3c\/span\x3e -\x26gt;\x3cspan class=\x22hljs-title\x22\x3e net:[4026532009]\x3c\/span\x3e\nlrwxrwxrwx. 1\x3cspan class=\x22hljs-title\x22\x3e root\x3c\/span\x3e root 0\x3cspan class=\x22hljs-title\x22\x3e Jan\x3c\/span\x3e 11 11:46\x3cspan class=\x22hljs-title\x22\x3e pid\x3c\/span\x3e -\x26gt;\x3cspan class=\x22hljs-title\x22\x3e pid:[4026531836]\x3c\/span\x3e\n...\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e如果 PID 1 进程（实际上每个系统进程）具有资源约束、安全性配置和名字空间，那么我可以说系统上的每一个进程都运行在容器中。\x3c\/p\x3e\n\x3cp\x3e容器运行时工具也不过是修改了资源约束、安全性配置和名字空间，然后 Linux 内核运行起进程。容器启动后，容器运行时可以在容器内监控 PID 1 进程，也可以监控容器的标准输入\/输出，从而进行容器进程的生命周期管理。\x3c\/p\x3e\n\x3ch3\x3e\x3ca href=\x22#容器运行时\x22\x3e\x3c\/a\x3e容器运行时\x3c\/h3\x3e\n\x3cp\x3e你可能自言自语道，“哦，systemd 看起来很像一个容器运行时”。经过若干次关于“为何容器运行时不使用 \x3ccode\x3esystemd-nspawn\x3c\/code\x3e 工具来启动容器”的邮件讨论后，我认为值得讨论一下容器运行时及其发展史。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/docker\x22\x3eDocker\x3c\/a\x3e 通常被称为容器运行时，但“容器运行时container runtime”是一个被过度使用的词语。当用户提到“容器运行时”，他们其实提到的是为开发人员提供便利的上层high-level工具，包括 Docker，\x3ca href=\x22https:\/\/github.com\/kubernetes-incubator\/cri-o\x22\x3eCRI-O\x3c\/a\x3e 和 \x3ca href=\x22https:\/\/github.com\/rkt\/rkt\x22\x3eRKT\x3c\/a\x3e。这些工具都是基于 API 的，涉及操作包括从容器仓库拉取容器镜像、配置存储和启动容器等。启动容器通常涉及一个特殊工具，用于配置内核如何运行容器，这类工具也被称为“容器运行时”，下文中我将称其为“底层容器运行时”以作区分。像 Docker、CRI-O 这样的守护进程及形如 \x3ca href=\x22https:\/\/github.com\/projectatomic\/libpod\/tree\/master\/cmd\/podman\x22\x3ePodman\x3c\/a\x3e、\x3ca href=\x22https:\/\/github.com\/projectatomic\/buildah\x22\x3eBuildah\x3c\/a\x3e 的命令行工具，似乎更应该被称为“容器管理器”。\x3c\/p\x3e\n\x3cp\x3e早期版本的 Docker 使用 \x3ccode\x3elxc\x3c\/code\x3e 工具集启动容器，该工具出现在 \x3ccode\x3esystemd-nspawn\x3c\/code\x3e 之前。Red Hat 最初试图将 \x3ca href=\x22https:\/\/libvirt.org\/\x22\x3elibvirt\x3c\/a\x3e （\x3ccode\x3elibvirt-lxc\x3c\/code\x3e）集成到 Docker 中替代 \x3ccode\x3elxc\x3c\/code\x3e 工具，因为 RHEL 并不支持 \x3ccode\x3elxc\x3c\/code\x3e。\x3ccode\x3elibvirt-lxc\x3c\/code\x3e 也没有使用 \x3ccode\x3esystemd-nspawn\x3c\/code\x3e，在那时 systemd 团队仅将 \x3ccode\x3esystemd-nspawn\x3c\/code\x3e 视为测试工具，不适用于生产环境。\x3c\/p\x3e\n\x3cp\x3e与此同时，包括我的 Red Hat 团队部分成员在内的上游upstream Docker 开发者，认为应该采用 golang 原生的方式启动容器，而不是调用外部应用。他们的工作促成了 libcontainer 这个 golang 原生库，用于启动容器。Red Hat 工程师更看好该库的发展前景，放弃了 \x3ccode\x3elibvirt-lxc\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e后来成立 \x3ca href=\x22https:\/\/www.opencontainers.org\/\x22\x3e开放容器组织\x3c\/a\x3eOpen Container Initiative（OCI）的部分原因就是人们希望用其它方式启动容器。传统的基于名字空间隔离的容器已经家喻户晓，但人们也有虚拟机级别隔离virtual machine-level isolation的需求。Intel 和 \x3ca href=\x22https:\/\/www.hyper.sh\/\x22\x3eHyper.sh\x3c\/a\x3e 正致力于开发基于 KVM 隔离的容器，Microsoft 致力于开发基于 Windows 的容器。OCI 希望有一份定义容器的标准规范，因而产生了 \x3ca href=\x22https:\/\/github.com\/opencontainers\/runtime-spec\x22\x3eOCI 运行时规范Runtime Specification\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3eOCI 运行时规范定义了一个 JSON 文件格式，用于描述要运行的二进制，如何容器化以及容器根文件系统的位置。一些工具用于生成符合标准规范的 JSON 文件，另外的工具用于解析 JSON 文件并在该根文件系统（rootfs）上运行容器。Docker 的部分代码被抽取出来构成了 libcontainer 项目，该项目被贡献给 OCI。上游 Docker 工程师及我们自己的工程师创建了一个新的前端工具，用于解析符合 OCI 运行时规范的 JSON 文件，然后与 libcontainer 交互以便启动容器。这个前端工具就是 \x3ca href=\x22https:\/\/github.com\/opencontainers\/runc\x22\x3erunc\x3c\/a\x3e，也被贡献给 OCI。虽然 \x3ccode\x3erunc\x3c\/code\x3e 可以解析 OCI JSON 文件，但用户需要自行生成这些文件。此后，\x3ccode\x3erunc\x3c\/code\x3e 也成为了最流行的底层容器运行时，基本所有的容器管理工具都支持 \x3ccode\x3erunc\x3c\/code\x3e，包括 CRI-O、Docker、Buildah、Podman 和 \x3ca href=\x22https:\/\/github.com\/cloudfoundry\/garden\x22\x3eCloud Foundry Garden\x3c\/a\x3e 等。此后，其它工具的实现也参照 OCI 运行时规范，以便可以运行 OCI 兼容的容器。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/clearlinux.org\/containers\x22\x3eClear Containers\x3c\/a\x3e 和 Hyper.sh 的 \x3ccode\x3erunV\x3c\/code\x3e 工具都是参照 OCI 运行时规范运行基于 KVM 的容器，二者将其各自工作合并到一个名为 \x3ca href=\x22https:\/\/clearlinux.org\/containers\x22\x3eKata\x3c\/a\x3e 的新项目中。在去年，Oracle 创建了一个示例版本的 OCI 运行时工具，名为 \x3ca href=\x22https:\/\/github.com\/oracle\/railcar\x22\x3eRailCar\x3c\/a\x3e，使用 Rust 语言编写。但该 GitHub 项目已经两个月没有更新了，故无法判断是否仍在开发。几年前，Vincent Batts 试图创建一个名为 \x3ca href=\x22https:\/\/github.com\/vbatts\/nspawn-oci\x22\x3enspawn-oci\x3c\/a\x3e 的工具，用于解析 OCI 运行时规范文件并启动 \x3ccode\x3esystemd-nspawn\x3c\/code\x3e；但似乎没有引起大家的注意，而且也不是原生的实现。\x3c\/p\x3e\n\x3cp\x3e如果有开发者希望实现一个原生的 \x3ccode\x3esystemd-nspawn --oci OCI-SPEC.json\x3c\/code\x3e 并让 systemd 团队认可和提供支持，那么CRI-O、Docker 和 Podman 等容器管理工具将可以像使用 \x3ccode\x3erunc\x3c\/code\x3e 和 Clear Container\/runV （\x3ca href=\x22https:\/\/github.com\/kata-containers\x22\x3eKata\x3c\/a\x3e） 那样使用这个新的底层运行时。（目前我的团队没有人参与这方面的工作。）\x3c\/p\x3e\n\x3cp\x3e总结如下，在 3-4 年前，上游开发者打算编写一个底层的 golang 工具用于启动容器，最终这个工具就是 \x3ccode\x3erunc\x3c\/code\x3e。那时开发者有一个使用 C 编写的 \x3ccode\x3elxc\x3c\/code\x3e 工具，在 \x3ccode\x3erunc\x3c\/code\x3e 开发后，他们很快转向 \x3ccode\x3erunc\x3c\/code\x3e。我很确信，当决定构建 libcontainer 时，他们对 \x3ccode\x3esystemd-nspawn\x3c\/code\x3e 或其它非原生（即不使用 golang）的运行 namespaces 隔离的容器的方式都不感兴趣。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3evia: \x3ca href=\x22https:\/\/opensource.com\/article\/18\/1\/history-low-level-container-runtimes\x22\x3ehttps:\/\/opensource.com\/article\/18\/1\/history-low-level-container-runtimes\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e作者：\x3ca href=\x22https:\/\/opensource.com\/users\/rhatdan\x22\x3eDaniel Walsh\x3c\/a\x3e 译者：\x3ca href=\x22https:\/\/github.com\/pinewall\x22\x3epinewall\x3c\/a\x3e 校对：\x3ca href=\x22https:\/\/github.com\/wxy\x22\x3ewxy\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本文由 \x3ca href=\x22https:\/\/github.com\/LCTT\/TranslateProject\x22\x3eLCTT\x3c\/a\x3e 原创编译，\x3ca href=\x22https:\/\/linux.cn\/\x22\x3eLinux中国\x3c\/a\x3e 荣誉推出\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/a-history-of-low-level-linux-container-runtimes">底层 Linux 容器运行时之发展史</a> 原文标题: 底层 Linux 容器运行时之发展史 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/7e3006e1/" target="_blank">https://alili.tech/archive/7e3006e1/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>