<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="不到200行 JavaScript 代码如何实现富文本编辑器"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>不到200行 JavaScript 代码如何实现富文本编辑器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/7tgq65480gp/",
				"appid": "1613049289050283", 
				"title": "不到200行 JavaScript 代码如何实现富文本编辑器 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-19T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/azzww9s2tun/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/gpo783z8sre/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&text=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&text=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&title=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&is_video=false&description=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&title=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&title=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&title=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f7tgq65480gp%2f&title=%e4%b8%8d%e5%88%b0200%e8%a1%8c%20JavaScript%20%e4%bb%a3%e7%a0%81%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e5%af%8c%e6%96%87%e6%9c%ac%e7%bc%96%e8%be%91%e5%99%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">不到200行 JavaScript 代码如何实现富文本编辑器</h1><div class="meta"><div class="postdate"><time datetime="2018-12-19" itemprop="datePublished">2018-12-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e前段时间在寻找一些关于富文本编辑器的资料，然后发现了这个名为 \x3ca href=\x22https:\/\/github.com\/jaredreich\/pell\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePell\x3c\/a\x3e 的项目，它是一个所见即所得（WYSIWYG）的文本编辑器，虽然它的功能很简单，但是令人吃惊的是它只有 1kb 大小。而项目最核心的文件 \x3ca href=\x22https:\/\/github.com\/jaredreich\/pell\/blob\/master\/src\/pell.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epell.js\x3c\/a\x3e 只有130行，即使加上其它部分，总的 js 数量也不到200行。这引起了我的兴趣，决定看看它的源码是如何做到这一点的。\x3c\/p\x3e\n\x3cp\x3e项目的主要代码在 \x3ccode\x3epell.js\x3c\/code\x3e 文件中，其结构很简单，主要功能的实现依赖于以下的几个部分\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eactions\x3c\/code\x3e 对象\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eexec()\x3c\/code\x3e 函数\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3einit()\x3c\/code\x3e 函数\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eDocument.execCommand()\x3c\/h2\x3e\n\x3cp\x3e先从最简单的部分看起， \x3ccode\x3eexec()\x3c\/code\x3e 函数只有下面三行：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const exec = (command, value = null) =\x3e {\n    document.execCommand(command, false, value);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e exec = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ecommand, value = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.execCommand(command, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, value);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e它将 \x3ccode\x3edocument.execCommand()\x3c\/code\x3e 进行了一个简单的包装，\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Document\/execCommand\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDocument.execCommand()\x3c\/a\x3e 就是这个编辑器的核心，其语法如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22bool = document.execCommand(aCommandName, aShowDefaultUI, aValueArgument)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ebool = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.execCommand(aCommandName, aShowDefaultUI, aValueArgument)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eaCommandName\x3c\/code\x3e 是表示想执行的命令的字符串，比如：加粗 \x27bold\x27，创建链接 \x27createLink\x27，改变字体大小 \x27fontSize\x27 等等\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eaShowDefaultUI\x3c\/code\x3e 是否显示默认的用户界面\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eaValueArgument\x3c\/code\x3e 有些命令需要额外的输入，如插入图片、链接时需要给出地址\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e注：经过我的试验，在 Chrome 下改变 aShowDefaultUI 的值并未发现影响，\x3ca href=\x22https:\/\/stackoverflow.com\/questions\/38188015\/what-is-the-the-default-user-interface-referred-to-by-the-ashowdefaultui-param\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这个 stackoverflow 的问题\x3c\/a\x3e中提到这是一个来自于旧版 IE 的参数，所以这里设置为默认的 false 即可。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eactions 对象\x3c\/h2\x3e\n\x3cp\x3e文件中定义了一个名为 \x3ccode\x3eactions\x3c\/code\x3e 的对象，对应的是下图工具栏上的这一行按钮， \x3ccode\x3eactions\x3c\/code\x3e 中的每个子对象都保存了一个按钮的属性。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV1gwe?w=1017\x26amp;h=75\x22 src=\x22https:\/\/static.alili.tech\/img\/bV1gwe?w=1017\x26amp;h=75\x22 alt=\x222017-12-29-pell-editor-toobar.png\x22 title=\x222017-12-29-pell-editor-toobar.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e部分代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const actions = {\n    bold: {\n        icon: \x27\x3cb\x3eB\x3c\/b\x3e\x27,\n        title: \x27Bold\x27,\n        result: () =\x3e exec(\x27bold\x27)\n    },\n    italic: {\n        icon: \x27\x3ci\x3eI\x3c\/i\x3e\x27,\n        title: \x27Italic\x27,\n        result: () =\x3e exec(\x27italic\x27)\n    },\n    underline: {\n        icon: \x27\x3cu\x3eU\x3c\/u\x3e\x27,\n        title: \x27Underline\x27,\n        result: () =\x3e exec(\x27underline\x27)\n    },\n    \/\/ …\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e actions = {\n    \x3cspan class=\x22hljs-attr\x22\x3ebold\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;b\x26gt;B\x26lt;\/b\x26gt;\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Bold\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e exec(\x3cspan class=\x22hljs-string\x22\x3e\x27bold\x27\x3c\/span\x3e)\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eitalic\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;i\x26gt;I\x26lt;\/i\x26gt;\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Italic\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e exec(\x3cspan class=\x22hljs-string\x22\x3e\x27italic\x27\x3c\/span\x3e)\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eunderline\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;u\x26gt;U\x26lt;\/u\x26gt;\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Underline\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e exec(\x3cspan class=\x22hljs-string\x22\x3e\x27underline\x27\x3c\/span\x3e)\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ …\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码中显示了名为 \x3ccode\x3ebold\x3c\/code\x3e，\x3ccode\x3eitalic\x3c\/code\x3e，\x3ccode\x3eunderline\x3c\/code\x3e 的三个对象属性，对应于工具栏中前方的\x3cstrong\x3e加粗\x3c\/strong\x3e、\x3cem\x3e斜体\x3c\/em\x3e、下划线按钮，可以看出它们的结构是相同的，都有下列三个属性：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eicon\x3c\/code\x3e: 如何在工具栏中显示\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3etitle\x3c\/code\x3e: 就是 title 啦\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eresult\x3c\/code\x3e: 一个函数，会赋给按钮作为点击事件，调用之前所提到的 \x3ccode\x3eexec()\x3c\/code\x3e 函数来对文本进行操作\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e现在已有了 \x3ccode\x3eactions\x3c\/code\x3e 对象，那么如何使用它呢？这就要看看 \x3ccode\x3einit()\x3c\/code\x3e 函数了，它会根据一定的规则从 \x3ccode\x3eactions\x3c\/code\x3e 对象中选出元素组成一个数组，数组的每一项都会生成一个按钮。下面代码中的 \x3ccode\x3esettings.actions\x3c\/code\x3e 即为此数组，其中的每个元素都对应一个显示在工具栏上的按钮。\x3ccode\x3esettings.actions\x3c\/code\x3e 的生成规则会在后面进行解释。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ pell.js 中的 init() 函数\nsettings.actions.forEach(action =\x3e {\n    \/\/ 新建一个按钮元素\n    const button = document.createElement(\x27button\x27)\n    \/\/ 给按钮加上 css 样式\n    button.className = settings.classes.button\n    \/\/ 把 icon 属性作为内容显示出来\n    button.innerHTML = action.icon\n    button.title = action.title\n    \/\/ 把 result 属性赋给按钮作为点击事件\n    button.onclick = action.result\n    \/\/ 将创建的按钮添加到工具栏上\n    actionbar.appendChild(button)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ pell.js 中的 init() 函数\x3c\/span\x3e\nsettings.actions.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eaction\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 新建一个按钮元素\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e button = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27button\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 给按钮加上 css 样式\x3c\/span\x3e\n    button.className = settings.classes.button\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把 icon 属性作为内容显示出来\x3c\/span\x3e\n    button.innerHTML = action.icon\n    button.title = action.title\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把 result 属性赋给按钮作为点击事件\x3c\/span\x3e\n    button.onclick = action.result\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将创建的按钮添加到工具栏上\x3c\/span\x3e\n    actionbar.appendChild(button)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样数组中的每个元素就都生成了一个工具栏上的按钮了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3einit() 初始化函数\x3c\/h2\x3e\n\x3cp\x3e想使用 pell 编辑器时，只要调用 \x3ccode\x3einit()\x3c\/code\x3e 函数来初始化一个编辑器即可。它接收一个 \x3ccode\x3esetting\x3c\/code\x3e 对象作为参数，其中包含这样的一些属性：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eelement\x3c\/code\x3e: 编辑器的 DOM 元素\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3estyleWithCSS\x3c\/code\x3e: 设置为 true 时，将会用 \x3ccode\x3e\x26lt;span style=\x22font-weight: bold;\x22\x26gt;\x26lt;\/span\x26gt;\x3c\/code\x3e 代替 \x3ccode\x3e\x26lt;b\x26gt;\x26lt;\/b\x26gt;\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eactions\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3eonChange\x3c\/code\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e其中最重要的是 \x3ccode\x3eactions\x3c\/code\x3e，它是一个数组，包含了你想在工具栏显示的按钮列表。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eactions\x3c\/code\x3e 数组中可以有这几种元素：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e一个字符串\x3c\/li\x3e\n\x3cli\x3e一个有 \x3ccode\x3ename\x3c\/code\x3e 属性的对象\x3c\/li\x3e\n\x3cli\x3e一个对象，没有 \x3ccode\x3ename\x3c\/code\x3e 属性，但有生成一个按钮的必需属性 \x3ccode\x3eicon\x3c\/code\x3e，\x3ccode\x3eresult\x3c\/code\x3e 等\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22actions: [\n  \x27bold\x27,\n  \x27underline\x27,\n  \x27italic\x27,\n  {\n    name: \x27image\x27,\n    result: () =\x3e {\n      const url = window.prompt(\x27Enter the image URL\x27)\n      if (url) window.pell.exec(\x27insertImage\x27, ensureHTTP(url))\n    }\n  },\n  \/\/ ...\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eactions: [\n  \x3cspan class=\x22hljs-string\x22\x3e\x27bold\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27underline\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x27italic\x27\x3c\/span\x3e,\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27image\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e url = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.prompt(\x3cspan class=\x22hljs-string\x22\x3e\x27Enter the image URL\x27\x3c\/span\x3e)\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (url) \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.pell.exec(\x3cspan class=\x22hljs-string\x22\x3e\x27insertImage\x27\x3c\/span\x3e, ensureHTTP(url))\n    }\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在 \x3ccode\x3einit()\x3c\/code\x3e 函数中会把这个 \x3ccode\x3eactions\x3c\/code\x3e参数 和 pell.js 中定义的 \x3ccode\x3eactions\x3c\/code\x3e对象组合起来，可以将 \x3ccode\x3eactions\x3c\/code\x3e 对象当作一个默认设置，看以下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ pell.js 中的 init() 函数\nsettings.actions = settings.actions\n    ? settings.actions.map(action =\x3e {\n\n        if (typeof action === \x27string\x27) return actions[action]\n\n        \/\/ 如果参数中传入的 action 已经在默认设置中存在，用传入的参数覆盖默认设置\n        else if (actions[action.name]) {\n            return { ...actions[action.name], ...action }\n        }\n\n        return action\n    })\n    : Object.keys(actions).map(action =\x3e actions[action])\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ pell.js 中的 init() 函数\x3c\/span\x3e\nsettings.actions = settings.actions\n    ? settings.actions.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eaction\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e action === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e actions[action]\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果参数中传入的 action 已经在默认设置中存在，用传入的参数覆盖默认设置\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (actions[action.name]) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { ...actions[action.name], ...action }\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e action\n    })\n    : \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(actions).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eaction\x3c\/span\x3e =\x26gt;\x3c\/span\x3e actions[action])\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果参数对象 \x3ccode\x3esetting\x3c\/code\x3e 中不包含 \x3ccode\x3eactions\x3c\/code\x3e 数组,  则会默认使用之前定义的 \x3ccode\x3eactions\x3c\/code\x3e 对象来初始化。\x3c\/p\x3e\n\x3cp\x3einit() 函数里还有一个重要的部分，就是创建一个可编辑区域，这里创建了一个 \x3ccode\x3ediv\x3c\/code\x3e 元素，将其 \x3ccode\x3econtentEditable\x3c\/code\x3e 属性设为 \x3ccode\x3etrue\x3c\/code\x3e，从而可以在这里使用之前提到的 \x3ccode\x3edocument.execCommand()\x3c\/code\x3e 命令了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 创建编辑区域的元素\nsettings.element.content = document.createElement(\x27div\x27)\n\/\/ 让 div 成为可编辑状态\nsettings.element.content.contentEditable = true\nsettings.element.content.className = settings.classes.content\n\/\/ 当用户输入时，更新页面的相应部分\nsettings.element.content.oninput = event =\x3e \n    settings.onChange(event.target.innerHTML)\nsettings.element.content.onkeydown = preventTab\nsettings.element.appendChild(settings.element.content)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建编辑区域的元素\x3c\/span\x3e\nsettings.element.content = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 让 div 成为可编辑状态\x3c\/span\x3e\nsettings.element.content.contentEditable = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\nsettings.element.content.className = settings.classes.content\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当用户输入时，更新页面的相应部分\x3c\/span\x3e\nsettings.element.content.oninput = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \n    settings.onChange(event.target.innerHTML)\nsettings.element.content.onkeydown = preventTab\nsettings.element.appendChild(settings.element.content)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e流程整理\x3c\/h2\x3e\n\x3cp\x3e最后以“插入链接”为例来梳理下整个编辑器的流程：\x3c\/p\x3e\n\x3cp\x3e一、在调用 \x3ccode\x3einit()\x3c\/code\x3e 函数时，在参数对象的 \x3ccode\x3eaction\x3c\/code\x3e 数组中加入以下一项\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    name: \x27link\x27,\n    result: () =\x3e {\n        const url = window.prompt(\x27Enter the link URL\x27)\n        if (url) window.pell.exec(\x27createLink\x27, ensureHTTP(url))\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27link\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e url = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.prompt(\x3cspan class=\x22hljs-string\x22\x3e\x27Enter the link URL\x27\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (url) \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.pell.exec(\x3cspan class=\x22hljs-string\x22\x3e\x27createLink\x27\x3c\/span\x3e, ensureHTTP(url))\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e二、在 \x3ccode\x3einit()\x3c\/code\x3e 的运行过程中，会检查已定义的 \x3ccode\x3eactions\x3c\/code\x3e 对象中是否有 \x3ccode\x3elink\x3c\/code\x3e 这个属性。经检查属性确实存在\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22link: {\n    icon: \x27\x26amp;#128279;\x27,\n    title: \x27Link\x27,\n    result: () =\x3e {\n        const url = window.prompt(\x27Enter the link URL\x27)\n        if (url) exec(\x27createLink\x27, url)\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3elink: {\n    \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26amp;#128279;\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Link\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eresult\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e url = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.prompt(\x3cspan class=\x22hljs-string\x22\x3e\x27Enter the link URL\x27\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (url) exec(\x3cspan class=\x22hljs-string\x22\x3e\x27createLink\x27\x3c\/span\x3e, url)\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为传入的参数中有 \x3ccode\x3eresult\x3c\/code\x3e 这一项，所以用传入的 \x3ccode\x3eresult\x3c\/code\x3e 来代替 \x3ccode\x3elink\x3c\/code\x3e 对象中的默认值，然后将修改过的 \x3ccode\x3elink\x3c\/code\x3e 对象放入 \x3ccode\x3esettings.actions\x3c\/code\x3e 数组中。\x3c\/p\x3e\n\x3cp\x3e三、对 \x3ccode\x3esettings.actions\x3c\/code\x3e 数组进行一次迭代来生成工具栏，\x3ccode\x3elink\x3c\/code\x3e 对象作为其中的一项生成了一个“插入链接”的按钮。\x3ccode\x3eresult\x3c\/code\x3e 属性成为其点击事件。\x3c\/p\x3e\n\x3cp\x3e四、点击“插入链接”的按钮后，会让你输入一个 url，然后调用 \x3ccode\x3eexec(\x27createLink\x27, url)\x3c\/code\x3e 在编辑区域插入该链接。\x3c\/p\x3e\n\x3cp\x3e编辑器其它按钮的功能流程也类似。\x3c\/p\x3e\n\x3cp\x3e这样 Pell 编辑器的大部分内容就讲解完毕了，剩余部分还需要自己去看源码。毕竟项目的代码不长，以此作为文本编辑器的入门倒不错。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e2017年的最后一篇文章了，再见，2017。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.wukai.me\/2017\/12\/31\/rich-text-editor-in-less-than-200-lines-javascript\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e本文原地址\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>不到200行 JavaScript 代码如何实现富文本编辑器</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012655838">https://segmentfault.com/a/1190000012655838</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/7tgq65480gp/" target="_blank">https://alili.tech/archive/7tgq65480gp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>