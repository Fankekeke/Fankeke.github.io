<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【Geek议题】合理的VueSPA架构讨论（下）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【Geek议题】合理的VueSPA架构讨论（下） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/87kj87jmt38/",
				"appid": "1613049289050283", 
				"title": "【Geek议题】合理的VueSPA架构讨论（下） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-08T02:30:30"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/wjkvrbfe1t/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/06gjuq492k49/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&text=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&text=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&title=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&is_video=false&description=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&title=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&title=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&title=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f87kj87jmt38%2f&title=%e3%80%90Geek%e8%ae%ae%e9%a2%98%e3%80%91%e5%90%88%e7%90%86%e7%9a%84VueSPA%e6%9e%b6%e6%9e%84%e8%ae%a8%e8%ae%ba%ef%bc%88%e4%b8%8b%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【Geek议题】合理的VueSPA架构讨论（下）</h1><div class="meta"><div class="postdate"><time datetime="2018-12-08" itemprop="datePublished">2018-12-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e接上篇《【Geek议题】合理的VueSPA架构讨论（上）》\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000014086261\x22\x3e传送门\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e自动化维护登录状态\x3c\/h2\x3e\n\x3cp\x3e登录状态标识符跟token类似，都是需要自动维护有效期，但也有些许不同，获取过程只在用户登录或注册的时候，不需要自动获取。  \x3cbr\x3e本人比较推荐使用\x3cstrong\x3e公共状态管理vuex进行自动化管理\x3c\/strong\x3e，并配合路由钩子，减少代码编写时的顾虑。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e妙用公共状态管理维护userId\x3c\/h3\x3e\n\x3cp\x3e示例中公共状态管理中的user模块里定义了userIdObj，其中包含了userId登录状态标识符和过期时间。  \x3cbr\x3e维护userId是否过期主要是通过vuex中的getter来实现。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const getters = {\n  getUserId: (_state) =\x3e {\n    \/\/ 获取公共状态中的userIdObj\n    const userIdObj = {\n      ..._state.userIdObj,\n    };\n    \/\/ 是否过期标识\n    let isExpire = false;\n    \/\/ 判断是否过期\n    if (userIdObj \x26amp;\x26amp; userIdObj.userId) {\n      isExpire = new Date().getTime() - userIdObj.expireTime \x3e -10000;\n    }\n    \/\/ 如果过期则返回空字符串（不一定）\n    if (!userIdObj || !userIdObj.userId || isExpire) {\n      return \x27\x27;\n    }\n    \/\/ 没过期则返回userId\n    return userIdObj.userId;\n  },\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getters = {\n  \x3cspan class=\x22hljs-attr\x22\x3egetUserId\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e_state\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取公共状态中的userIdObj\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e userIdObj = {\n      ..._state.userIdObj,\n    };\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否过期标识\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e isExpire = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断是否过期\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (userIdObj \x26amp;\x26amp; userIdObj.userId) {\n      isExpire = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().getTime() - userIdObj.expireTime \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-10000\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果过期则返回空字符串（不一定）\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!userIdObj || !userIdObj.userId || isExpire) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 没过期则返回userId\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e userIdObj.userId;\n  },\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e路由钩子中处理userId\x3c\/h3\x3e\n\x3cp\x3e回顾上篇中全局的路由钩子\x3ccode\x3erouter.beforeEach\x3c\/code\x3e，当目标路由元信息requiresAuth为true则表示，这个路由必须有登录状态才能访问，这时候就会进行登录状态检查。处理思路如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e使用上面定义的getter方法获取userId；\x3c\/li\x3e\n\x3cli\x3e如果能获取到则说明有\x3cstrong\x3e有效的userId\x3c\/strong\x3e，则时候即可跳转到目标页；\x3c\/li\x3e\n\x3cli\x3e如果获取到空字符串，则说明\x3cstrong\x3euserId无效\x3c\/strong\x3e或\x3cstrong\x3euserId不存在\x3c\/strong\x3e，跳转至登录页面。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e【PS】示例这里的处理还不完美，最好跳转登录前保存好目标路由，登录成功就直接跳转去该路由。\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22router.beforeEach((to, from, next) =\x3e {\n  \/\/ ...\n  \/\/ 检查登录状态\n  if (to.meta.requiresAuth) {\n    console.log(\x27目标路由需要登录状态\x27);\n    if (!store.getters.getUserId) {\n      console.log(\x27内存无登录信息，尝试在本地存储中找\x27);\n      const localUserIdObj = JSON.parse(localStorage.getItem(\x27userIdObj\x27));\n      if (localUserIdObj) {\n        \/\/ 如果本地存储中有userIdObj，则提交到公共状态\n        store.commit(\x27setUserIdObj\x27, localUserIdObj);\n      }\n    }\n    \/\/ 再次检查公共状态里有没有userId\n    if (!store.getters.getUserId) {\n      console.log(\x27依旧无登录信息\x27);\n      router.push({\n        name: \x27userLogin\x27,\n      });\n    }\n  }\n  next();\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3erouter.beforeEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eto, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, next\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检查登录状态\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (to.meta.requiresAuth) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27目标路由需要登录状态\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!store.getters.getUserId) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27内存无登录信息，尝试在本地存储中找\x27\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e localUserIdObj = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(localStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x27userIdObj\x27\x3c\/span\x3e));\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (localUserIdObj) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果本地存储中有userIdObj，则提交到公共状态\x3c\/span\x3e\n        store.commit(\x3cspan class=\x22hljs-string\x22\x3e\x27setUserIdObj\x27\x3c\/span\x3e, localUserIdObj);\n      }\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 再次检查公共状态里有没有userId\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!store.getters.getUserId) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27依旧无登录信息\x27\x3c\/span\x3e);\n      router.push({\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27userLogin\x27\x3c\/span\x3e,\n      });\n    }\n  }\n  next();\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e”页面”中获取登录状态\x3c\/h3\x3e\n\x3cp\x3e在“页面”中获取userId也很简单，使用计算属性是最好的，返回的userId具有响应性，这做的好处也是为了实时将登录状态反应到页面上，才不会出现显示已登录，但用户刷新一下才能知道登录状态已过期的尴尬情况。\x3c\/p\x3e\n\x3cblockquote\x3e【PS】一些需要用户登录状态的api函数，也是通过这样的方法获取并使用。当然，建议在非首屏加载使用的api函数（比如提交表单），需要在调用前，检查一下userId还存不存在，以免出错。\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22computed: {\n  \/\/ 获取登录状态\n  userId() {\n    return this.$store.getters.getUserId;\n  },\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecomputed: {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取登录状态\x3c\/span\x3e\n  userId() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$store.getters.getUserId;\n  },\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e使用公共状态管理维护连接\x3c\/h2\x3e\n\x3cp\x3e有时会有需要取消请求的需求，比如上传文件耗时过长，用户不想等，这时候就必须有取消的功能。  \x3cbr\x3e上篇提到的axios已经提供了一个基于CancelToken的取消机制，这里我们要配合vuex实现对全局连接的实时监控。\x3c\/p\x3e\n\x3cblockquote\x3e【PS】示例的接口名称都是在写api函数的时候定义好的，想要更加灵活，可以每次请求都单独指定名字。\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e公共状态管理配置\x3c\/h3\x3e\n\x3cp\x3e示例中给公共状态下的com模块添加了cancelToken数组，用来保存发起的连接的名称和source（取消标记），并提供了如下三个mutations方法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 增加cancelToken\naddCancelToken(_state, cancelToken) {\n  _state.cancelToken.push(cancelToken);\n  const arr = _state.cancelToken;\n  _state.cancelToken = arr;\n},\n\/\/ 删除指定名字的cancelToken\ndeleteCancelToken(_state, name) {\n  _state.cancelToken.some((i, index) =\x3e {\n    if (i.name === name) {\n      _state.cancelToken.splice(index, 1);\n      return true;\n    }\n    return false;\n  });\n},\n\/\/ 清空cancelToken\nclearCancelToken(_state) {\n  _state.cancelToken.forEach((i) =\x3e {\n    if (i.source \x26amp;\x26amp; typeof i.source.cancel === \x27function\x27) {\n      i.source.cancel(`cancel${name}`);\n    }\n  });\n  _state.cancelToken = [];\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 增加cancelToken\x3c\/span\x3e\naddCancelToken(_state, cancelToken) {\n  _state.cancelToken.push(cancelToken);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arr = _state.cancelToken;\n  _state.cancelToken = arr;\n},\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除指定名字的cancelToken\x3c\/span\x3e\ndeleteCancelToken(_state, name) {\n  _state.cancelToken.some(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ei, index\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i.name === name) {\n      _state.cancelToken.splice(index, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n  });\n},\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 清空cancelToken\x3c\/span\x3e\nclearCancelToken(_state) {\n  _state.cancelToken.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i.source \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e i.source.cancel === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n      i.source.cancel(\x3cspan class=\x22hljs-string\x22\x3e`cancel\x3cspan class=\x22hljs-subst\x22\x3e${name}\x3c\/span\x3e`\x3c\/span\x3e);\n    }\n  });\n  _state.cancelToken = [];\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e请求拦截器配置\x3c\/h3\x3e\n\x3cp\x3e基本思路：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在“请求发起前拦截器”中获取到source（取消标记），写入请求配置，并提交名称和source到公共状态管理；\x3c\/li\x3e\n\x3cli\x3e这时候通过查询公共状态中是否有这个名字的连接就可以获取到source进行取消；\x3c\/li\x3e\n\x3cli\x3e在“响应拦截器”中我们将已经成功的请求在公共状态管理中移除。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 请求发起前拦截器\nmyAxios.interceptors.request.use((_config) =\x3e {\n  const config = _config;\n  const source = axios.CancelToken.source();\n  \/\/ 获取cancelToken\n  config.cancelToken = source.token;\n\n  \/\/ 取消请求标记保存\n  store.commit(\x27addCancelToken\x27, {\n    name: config.name,\n    source,\n  });\n\n  return config;\n}, () =\x3e {\n  \/\/ 异常处理\n  console.error(\x27请求发起前拦截器异常\x27);\n});\n\n\/\/ 响应拦截器\nmyAxios.interceptors.response.use((response) =\x3e {\n  \/\/ 删除取消标记\n  store.commit(\x27deleteCancelToken\x27, response.config.name);\n\n  console.log(response);\n  return response;\n}, (error) =\x3e {\n  console.error(error);\n  \/\/ 清理取消标记\n  store.commit(\x27clearCancelToken\x27);\n  return Promise.reject(error);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 请求发起前拦截器\x3c\/span\x3e\nmyAxios.interceptors.request.use(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e_config\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e config = _config;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e source = axios.CancelToken.source();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取cancelToken\x3c\/span\x3e\n  config.cancelToken = source.token;\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 取消请求标记保存\x3c\/span\x3e\n  store.commit(\x3cspan class=\x22hljs-string\x22\x3e\x27addCancelToken\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: config.name,\n    source,\n  });\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e config;\n}, () =\x26gt; {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 异常处理\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(\x3cspan class=\x22hljs-string\x22\x3e\x27请求发起前拦截器异常\x27\x3c\/span\x3e);\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 响应拦截器\x3c\/span\x3e\nmyAxios.interceptors.response.use(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除取消标记\x3c\/span\x3e\n  store.commit(\x3cspan class=\x22hljs-string\x22\x3e\x27deleteCancelToken\x27\x3c\/span\x3e, response.config.name);\n\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(response);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e response;\n}, (error) =\x26gt; {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(error);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 清理取消标记\x3c\/span\x3e\n  store.commit(\x3cspan class=\x22hljs-string\x22\x3e\x27clearCancelToken\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(error);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e代码中使用\x3c\/h3\x3e\n\x3cp\x3e使用计算属性获取cancelToken数组，这里是响应式的，所有我们其实可以知道现在有多少个请求还未完成了。\x3c\/p\x3e\n\x3cblockquote\x3e【PS】实时对全局请求的监控已经实现，其实可以做的扩展就很多了，比如可以全局化loading的显示，只要数组内一直不为空持续一段时间就可以判断需要显示loading，如果为空则关闭loading。\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22computed: {\n  \/\/ 获取连接列表\n  cancelToken() {\n    return this.$store.state.com.cancelToken;\n  },\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecomputed: {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取连接列表\x3c\/span\x3e\n  cancelToken() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$store.state.com.cancelToken;\n  },\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e遍历这个数组，查找到对应名字的连接就可以取消了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.cancelToken.forEach((i) =\x3e {\n  console.log(i);\n  if (i.name === \x27上传文件\x27 \x26amp;\x26amp; typeof i.source.cancel === \x27function\x27) {\n    console.log(\x27取消上传\x27);\n    i.source.cancel(`cancel${name}`);\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cancelToken.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(i);\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i.name === \x3cspan class=\x22hljs-string\x22\x3e\x27上传文件\x27\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e i.source.cancel === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27取消上传\x27\x3c\/span\x3e);\n    i.source.cancel(\x3cspan class=\x22hljs-string\x22\x3e`cancel\x3cspan class=\x22hljs-subst\x22\x3e${name}\x3c\/span\x3e`\x3c\/span\x3e);\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e其他细节技巧\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e挂载常用工具到vue原型上减少引用\x3c\/h3\x3e\n\x3cp\x3e在初始化Vue的根组件前，给Vue的原型链上添加常用的工具，可以方便在vue文件中使用。这样做会影响所有Vue示例推荐只在单页面应用中使用。  \x3cbr\x3e比如下面以我们的api集为例，这样在vue文件中\x3ccode\x3ethis.$api\x3c\/code\x3e就可以使用我们的api集，不需要重复引用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 将api模块挂载进vue方便在this调用\nVue.prototype.$api = api;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将api模块挂载进vue方便在this调用\x3c\/span\x3e\nVue.prototype.$api = api;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e批量导入过滤器\x3c\/h3\x3e\n\x3cp\x3e在util文件夹下可以新建一个专门用来存过滤器的filter.js，然后批量导入的全局过滤器中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import * as filters from \x27.\/util\/filter\x27;\nObject.keys(filters).forEach(k =\x3e Vue.filter(k, filters[k]));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e * \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e filters \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/util\/filter\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(filters).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ek\x3c\/span\x3e =\x26gt;\x3c\/span\x3e Vue.filter(k, filters[k]));\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【Geek议题】合理的VueSPA架构讨论（下）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014097786">https://segmentfault.com/a/1190000014097786</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/87kj87jmt38/" target="_blank">https://alili.tech/archive/87kj87jmt38/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>