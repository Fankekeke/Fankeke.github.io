<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="基于element的区间选择组件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>基于element的区间选择组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/92007a9e/",
				"appid": "1613049289050283", 
				"title": "基于element的区间选择组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-22T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/27b45adc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/d3549292/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&text=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&text=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&title=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&is_video=false&description=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&title=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&title=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&title=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f92007a9e%2f&title=%e5%9f%ba%e4%ba%8eelement%e7%9a%84%e5%8c%ba%e9%97%b4%e9%80%89%e6%8b%a9%e7%bb%84%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文链接">原文链接</a></li><li><a href="#原文标题">原文标题</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">基于element的区间选择组件</h1><div class="meta"><div class="postdate"><time datetime="2018-10-22" itemprop="datePublished">2018-10-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e公司的系统中，产品经理在设计时经常要求对某个字段进行区间阈值设置或者作为筛选条件。但是苦于element中没有非常契合的组件（slider组件并不支持两端均能设定），于是自己动手造了一个。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e成果\x3c\/h2\x3e\n\x3cp\x3e最终的展示效果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg src=\x22https:\/\/static.alili.tech\/img\/bVbgxrb?w=480\x26amp;h=216\x22 src=\x22https:\/\/static.alili.tech\/img\/bVbgxrb?w=480\x26amp;h=216\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e需求\x3c\/h2\x3e\n\x3cp\x3e这里以项目的需求为例，基本的需求如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e分为左右值，包含左右值，正整数\x3c\/li\x3e\n\x3cli\x3e左侧必须大于等于1，右侧不得大于100000，右侧值必须不小于左侧\x3c\/li\x3e\n\x3cli\x3e默认：左侧20，右侧100000，均必填\x3c\/li\x3e\n\x3cli\x3e失焦校验\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e页面和表单校验结构一样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cel-form ref=\x26quot;form\x26quot; :model=\x26quot;form\x26quot; :rules=\x26quot;rules\x26quot;\x3e\n    \x3cel-form-item prop=\x26quot;min\x26quot;\x3e\n        \x3cel-input v-model=\x26quot;form.min\x26quot; \/\x3e\n    \x3c\/el-form-item\x3e\n    ~\n    \x3cel-form-item prop=\x26quot;max\x26quot;\x3e\n        \x3cel-input v-model=\x26quot;form.max\x26quot; \/\x3e\n    \x3c\/el-form-item\x3e\n\x3c\/el-form\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-form\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:rules\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22rules\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-form-item\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eprop\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22min\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-input\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form.min\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-form-item\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    ~\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-form-item\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eprop\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22max\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-input\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22form.max\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-form-item\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-form\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e主要思路\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e单个表单校验：必填项校验、正整数校验、区间校验\x3c\/li\x3e\n\x3cli\x3e关联校验：右侧阈值不得小于左侧阈值\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e根据上面的思路，单个表单的校验属于公共校验方法，关联校验需要分别校验（因为对比对象不同，且提示语不同），由此在自定义校验中有了如下定义：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22rules: {\n    min: [\n        { required: true, message: \x27必填项，请维护\x27, trigger: \x27blur\x27 },\n        { validator: this.validateCom, trigger: \x27blur\x27 },\n        { validator: this.validateMin, trigger: \x27blur\x27 },\n    ],\n    max: [\n        { required: true, message: \x27必填项，请维护\x27, trigger: \x27blur\x27 },\n        { validator: this.validateCom, trigger: \x27blur\x27 },\n        { validator: this.validateMax, trigger: \x27blur\x27 },\n    ],\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3erules: {\n    \x3cspan class=\x22hljs-attr\x22\x3emin\x3c\/span\x3e: [\n        { \x3cspan class=\x22hljs-attr\x22\x3erequired\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27必填项，请维护\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3etrigger\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur\x27\x3c\/span\x3e },\n        { \x3cspan class=\x22hljs-attr\x22\x3evalidator\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.validateCom, \x3cspan class=\x22hljs-attr\x22\x3etrigger\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur\x27\x3c\/span\x3e },\n        { \x3cspan class=\x22hljs-attr\x22\x3evalidator\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.validateMin, \x3cspan class=\x22hljs-attr\x22\x3etrigger\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur\x27\x3c\/span\x3e },\n    ],\n    \x3cspan class=\x22hljs-attr\x22\x3emax\x3c\/span\x3e: [\n        { \x3cspan class=\x22hljs-attr\x22\x3erequired\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27必填项，请维护\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3etrigger\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur\x27\x3c\/span\x3e },\n        { \x3cspan class=\x22hljs-attr\x22\x3evalidator\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.validateCom, \x3cspan class=\x22hljs-attr\x22\x3etrigger\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur\x27\x3c\/span\x3e },\n        { \x3cspan class=\x22hljs-attr\x22\x3evalidator\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.validateMax, \x3cspan class=\x22hljs-attr\x22\x3etrigger\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27blur\x27\x3c\/span\x3e },\n    ],\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e公共校验方法：正整数校验、区间校验\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22validateCom(rule, value, callback) {\n    const one = Number(value);\n    if (Number.isInteger(one)) {\n        if (one \x3c MIN_NUMBER) {\n            return callback(new Error(`输入值必须大于${MIN_NUMBER}`));\n        } else if (one \x3e MAX_NUMBER) {\n            return callback(new Error(`输入值必须小于${MAX_NUMBER}`));\n        }\n        return callback();\n    }\n    return callback(new Error(\x27输入值必须为正整数\x27));\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3evalidateCom(rule, value, callback) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e one = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(value);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e.isInteger(one)) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (one \x26lt; MIN_NUMBER) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e`输入值必须大于\x3cspan class=\x22hljs-subst\x22\x3e${MIN_NUMBER}\x3c\/span\x3e`\x3c\/span\x3e));\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (one \x26gt; MAX_NUMBER) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e`输入值必须小于\x3cspan class=\x22hljs-subst\x22\x3e${MAX_NUMBER}\x3c\/span\x3e`\x3c\/span\x3e));\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback();\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27输入值必须为正整数\x27\x3c\/span\x3e));\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e注意：\x3c\/strong\x3einput输出的始终是字符串类型，需要转换成数字后进行比对\x3c\/p\x3e\n\x3cp\x3e关联校验：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22validateMin(rule, value, callback) {\n    const one = Number(value);\n    const max = Number(this.form.max);\n    if (!max || one \x3c max) {\n        return callback();\n    }\n    return callback(new Error(\x27输入值不得大于最大阈值\x27));\n},\nvalidateMax(rule, value, callback) {\n    const one = Number(value);\n    const min = Number(this.form.min);\n    if (!min || one \x3e min) {\n        return callback();\n    }\n    return callback(new Error(\x27输入值不得小于最小阈值\x27));\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3evalidateMin(rule, value, callback) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e one = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(value);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e max = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.form.max);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!max || one \x26lt; max) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback();\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27输入值不得大于最大阈值\x27\x3c\/span\x3e));\n},\nvalidateMax(rule, value, callback) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e one = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(value);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e min = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.form.min);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!min || one \x26gt; min) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback();\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27输入值不得小于最小阈值\x27\x3c\/span\x3e));\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e大概，你会想，这不就完了吗！so easy！\x3cstrong\x3e现在真正的坑才开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e填坑（重点）\x3c\/h2\x3e\n\x3cp\x3e根据上面的写法，组件的基本功能实现了，但是有一个坑！如下：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg src=\x22https:\/\/static.alili.tech\/img\/bVbgxry?w=480\x26amp;h=216\x22 del-src=\x22https:\/\/static.alili.tech\/v-5bbf1b3b\/global\/img\/squares.svg\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e很显然，左侧值是小于右侧值的，但是校验提示仍然报错。究其原因，还是关联校验的问题。既然是关联交验，改变其中一个时应该会重新校验两个。很简单，在input改变时，重新校验表单不就OK了吗\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleChange() {\n    this.$refs.form.validate();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ehandleChange() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.form.validate();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e真实表现正如我们所料，但是当我们打开console的时候，会看到\x3ccode\x3eUncaught (in promise) false\x3c\/code\x3e，这又是什么鬼，身为优秀的前端工程师，你定不会允许自己的代码里报错，即使不影响正常流程。\x3c\/p\x3e\n\x3cp\x3e经查证：Promise报错，Uncaught的意思是代表有reject状态没有被catch。究其原因，改变一个值时，校验整个表单时，改变的那个input会执行两次校验，导致异常。\x3c\/p\x3e\n\x3cp\x3e最后做如下修改：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleMinChange() {\n    this.$refs.form.validateField(\x27max\x27);\n},\nhandleMaxChange() {\n    this.$refs.form.validateField(\x27min\x27);\n},\n\n\/\/ 并对外暴露操作方法\ngetFormData() {\n    const ret = {};\n    this.$refs.form.validate((valid) =\x3e {\n        ret.valid = valid;\n        ret.form = this.form;\n    });\n    return ret;\n},\nresetForm() {\n    this.$refs.form.resetFields();\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ehandleMinChange() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.form.validateField(\x3cspan class=\x22hljs-string\x22\x3e\x27max\x27\x3c\/span\x3e);\n},\nhandleMaxChange() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.form.validateField(\x3cspan class=\x22hljs-string\x22\x3e\x27min\x27\x3c\/span\x3e);\n},\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 并对外暴露操作方法\x3c\/span\x3e\ngetFormData() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ret = {};\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.form.validate(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3evalid\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        ret.valid = valid;\n        ret.form = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.form;\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret;\n},\nresetForm() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.form.resetFields();\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e总结\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3einput表单输出值为String类型，即使设置了\x3ccode\x3etype=number\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e关联交验时需要验证其关联项，且不能重复校验\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/n\/1330000016295830\x22\x3e源码链接\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016295863">https://segmentfault.com/a/1190000016295863</a></p><h2 id="原文标题">原文标题</h2><p>基于element的区间选择组件</p><h2>本文链接：</h2><a href="https://alili.tech/archive/92007a9e/" target="_blank">https://alili.tech/archive/92007a9e/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>