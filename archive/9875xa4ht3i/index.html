<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="node博客项目开发手记"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>node博客项目开发手记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/9875xa4ht3i/",
				"appid": "1613049289050283", 
				"title": "node博客项目开发手记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-10T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/21dgtr3wspz/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/q9um4pcjud/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&text=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&text=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&title=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&is_video=false&description=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&title=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&title=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&title=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2f9875xa4ht3i%2f&title=node%e5%8d%9a%e5%ae%a2%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e6%89%8b%e8%ae%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">node博客项目开发手记</h1><div class="meta"><div class="postdate"><time datetime="2018-12-10" itemprop="datePublished">2018-12-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3eNodeJs开发个人博客项目\x3c\/h1\x3e\n\x3cp\x3e预览地址：\x3ca href=\x22http:\/\/baijiawei.top\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/baijiawei.top\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3eGitHub地址：\x3ca href=\x22https:\/\/github.com\/bjw1234\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/bjw1234\/blog\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e需要安装的模块\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3ebody-parser 解析post请求\x3c\/li\x3e\n\x3cli\x3ecookies 读写cookie\x3c\/li\x3e\n\x3cli\x3eexpress 搭建服务器\x3c\/li\x3e\n\x3cli\x3emarkdown Markdown语法解析生成器\x3c\/li\x3e\n\x3cli\x3emongoose 操作Mongodb数据库\x3c\/li\x3e\n\x3cli\x3eswig 模板解析引擎\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e目录结构\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3edb 数据库存储目录\x3c\/li\x3e\n\x3cli\x3emodels 数据库模型文件目录\x3c\/li\x3e\n\x3cli\x3epublic 公共文件目录（css,js,img）\x3c\/li\x3e\n\x3cli\x3erouters 路由文件目录\x3c\/li\x3e\n\x3cli\x3eschemas 数据库结构文件\x3c\/li\x3e\n\x3cli\x3eviews 模板视图文件目录\x3c\/li\x3e\n\x3cli\x3eapp.js 启动文件\x3c\/li\x3e\n\x3cli\x3epackage.json\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eapp.js 文件\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e 1.创建应用、监听端口 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const app = express();\n\napp.get(\x27\/\x27,(req,res,next) =\x3e {\n    res.send(\x26quot;Hello World !\x26quot;);\n});\napp.listen(3000,(req,res,next) =\x3e {\n    console.log(\x26quot;app is running at port 3000\x26quot;);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e app = express();\n\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,(req,res,next) =\x26gt; {\n    res.send(\x3cspan class=\x22hljs-string\x22\x3e\x22Hello World !\x22\x3c\/span\x3e);\n});\napp.listen(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e,(req,res,next) =\x26gt; {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22app is running at port 3000\x22\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e 2.配置应用模板 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e定义使用的模板引擎 \x3cstrong\x3e app.engine(\x27html\x27,swig.renderFile) \x3c\/strong\x3e 参数1：模板引擎的名称，同时也是模板文件的后缀  参数2：表示用于解析处理模板内容的方法\x3c\/li\x3e\n\x3cli\x3e设置模板文件存放的目录 \x3cstrong\x3e app.set(\x27views\x27,\x27.\/views\x27) \x3c\/strong\x3e\n\x3c\/li\x3e\n\x3cli\x3e注册所使用的模板引擎 \x3cstrong\x3e app.set(\x27view engine\x27,\x27html\x27) \x3c\/strong\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e 3.用模板引擎去解析文件 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 读取views目录下的指定文件，解析并返回给客户端 \n * 参数1：模板文件\n * 参数2：给模板传递的参数 \n *\/\n \nres.render(\x27index\x27,{\n    title:\x27首页 \x27,\n    content: \x27hello swig\x27\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 读取views目录下的指定文件，解析并返回给客户端 \n * 参数1：模板文件\n * 参数2：给模板传递的参数 \n *\/\x3c\/span\x3e\n \nres.render(\x3cspan class=\x22hljs-string\x22\x3e\x27index\x27\x3c\/span\x3e,{\n    \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27首页 \x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hello swig\x27\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e 4.开发过程中需要取消模板缓存的限制 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22swig.setDefaults({\n  cache: false\n});\n\napp.set(\x27view cache\x27, false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eswig.setDefaults({\n  \x3cspan class=\x22hljs-attr\x22\x3ecache\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n});\n\napp.set(\x3cspan class=\x22hljs-string\x22\x3e\x27view cache\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e 5.设置静态文件托管 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \/\/ 当用户访问的是\/public路径下的文件，那么直接返回\napp.use(\x27\/public\x27,express.static(__dirname \x2b \x27\/public\x27));\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs fsharp\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当用户访问的是\/public路径下的文件，那么直接返回\x3c\/span\x3e\napp.\x3cspan class=\x22hljs-keyword\x22\x3euse\x3c\/span\x3e(\x27\/\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e\x27,express.\x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e(__dirname \x2b \x27\/\x3cspan class=\x22hljs-keyword\x22\x3epublic\x3c\/span\x3e\x27));\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e划分模块\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e前台模块\x3c\/li\x3e\n\x3cli\x3e后台模块\x3c\/li\x3e\n\x3cli\x3eAPI模块\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 根据不同的功能划分模块\napp.use(\x27\/\x27,require(\x27.\/routers\/main\x27));\napp.use(\x27\/admin\x27,require(\x27.\/routers\/admin\x27));\napp.use(\x27\/api\x27,require(\x27.\/routers\/api\x27));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据不同的功能划分模块\x3c\/span\x3e\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routers\/main\x27\x3c\/span\x3e));\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/admin\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routers\/admin\x27\x3c\/span\x3e));\napp.use(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/routers\/api\x27\x3c\/span\x3e));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对于管理员模块 \x3cstrong\x3e admin.js \x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var express = require(\x27express\x27);\nvar router = express.Router();\n\n\/\/ 比如访问 \/admin\/user\nrouter.get(\x27\/user\x27,function(req,res,next) {\n    res.send(\x27User\x27);\n});\n\nmodule.exports = router;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e router = express.Router();\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 比如访问 \/admin\/user\x3c\/span\x3e\nrouter.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/user\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq,res,next\x3c\/span\x3e) \x3c\/span\x3e{\n    res.send(\x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e);\n});\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = router;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e前台路由 \x2b 模板\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e main 模块 \x3c\/strong\x3e\x3cbr\x3e \/ 首页\x3cbr\x3e\/view 内容页\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e api模块 \x3c\/strong\x3e\x3cbr\x3e \/ 首页\x3cbr\x3e \/register 用户注册\x3cbr\x3e\/login 用户登录\x3cbr\x3e \/comment 评论获取\x3cbr\x3e\/comment\/post 评论提交\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e后台(admin)路由\x2b模板\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e 首页 \x3c\/strong\x3e\x3cbr\x3e \/ 后台首页\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e 用户管理 \x3c\/strong\x3e\x3cbr\x3e \/user 用户列表\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e 分类管理 \x3c\/strong\x3e\x3cbr\x3e  \/category 分类列表\x3cbr\x3e \/category\/add 分类添加\x3cbr\x3e \/category\/edit 分类修改\x3cbr\x3e \/caterory\/delete 分类删除\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e 文章内容管理 \x3c\/strong\x3e\x3cbr\x3e \/article nei内容列表\x3cbr\x3e \/article\/add 内容添加\x3cbr\x3e \/article\/edit 内容修改\x3cbr\x3e \/article\/delete 内容删除\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e 评论内容管理 \x3c\/strong\x3e\x3cbr\x3e \/comment 评论列表\x3cbr\x3e \/comment\/delete 评论删除\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e功能开发顺序\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e 功能模块开发顺序 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e用户\x3c\/li\x3e\n\x3cli\x3e栏目\x3c\/li\x3e\n\x3cli\x3e内容\x3c\/li\x3e\n\x3cli\x3e评论\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e编码顺序 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e通过Schema定义设计数据存储结构\x3c\/li\x3e\n\x3cli\x3e功能逻辑\x3c\/li\x3e\n\x3cli\x3e页面展示\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e连接数据库(mongoDB)\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e 启动MongoDB服务端: \x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e mongod --dbpath=G:\\data\\db --port=27017 \x3c\/strong\x3e\x3cbr\x3e启动服务设置数据库的存储地址以及端口\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var mongoose = require(\x27mongoose\x27);\n\/\/ 数据库链接\nmongoose.connect(\x26quot;mongodb:\/\/localhost:27017\/blog\x26quot;,(err) =\x3e {\n    if(err){\n        console.log(\x26quot;数据库连接失败\x26quot;);\n    }else{\n        console.log(\x26quot;数据库连接成功\x26quot;);\n      \/\/ 启动服务器，监听端口  \n      app.listen(3000,(req,res,next) =\x3e {\n            console.log(\x26quot;app is running at port 3000\x26quot;);\n        });\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoose = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongoose\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据库链接\x3c\/span\x3e\nmongoose.connect(\x3cspan class=\x22hljs-string\x22\x3e\x22mongodb:\/\/localhost:27017\/blog\x22\x3c\/span\x3e,(err) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err){\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22数据库连接失败\x22\x3c\/span\x3e);\n    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22数据库连接成功\x22\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动服务器，监听端口  \x3c\/span\x3e\n      app.listen(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e,(req,res,next) =\x26gt; {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22app is running at port 3000\x22\x3c\/span\x3e);\n        });\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e定义数据表结构和模型\x3c\/h2\x3e\n\x3cp\x3e对于用户数据表（users.js）在schema文件夹下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var mongoose = require(\x27mongoose\x27);\nmodule.exports = new mongoose.Schema({\n    \/\/ 用户名\n   username:String,\n   \/\/ 密码\n   password:String\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoose = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongoose\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e mongoose.Schema({\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用户名\x3c\/span\x3e\n   username:\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e,\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 密码\x3c\/span\x3e\n   password:\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在models目录下创建user.js模型类\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var mongoose = require(\x27mongoose\x27);\nvar userSchema = require(\x27..\/schemas\/users\x27);\n\nmodule.exports = mongoose.model(\x27User\x27,userSchema);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoose = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongoose\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e userSchema = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/schemas\/users\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = mongoose.model(\x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e,userSchema);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e处理用户注册\x3c\/h2\x3e\n\x3cul\x3e\x3cli\x3e\x3cstrong\x3e 前端通过ajax提交用户名和密码 \x3c\/strong\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3eurl: \/api\/register\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\x3cstrong\x3e 后端对前端提交(POST)的数据解析 \x3c\/strong\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var bodyParser = require(\x27body-parser\x27);\n\/\/ bodyParser 配置\n\/\/ 通过使用这一方法，可以为req对象添加一个body属性\napp.use( bodyParser.urlencoded({extended:true}));\n\n\/\/ 在api模块中：\n\/\/ 1.可以定义一个中间件，来统一返回格式\nvar responseData;\nrouter.use( function(req,res,next){ \/\/ path默认为\x27\/\x27,当访问该目录时这个中间件被调用\n    responseData = {\n         code:0,\n       message:\x27\x27\n    };\n    next();\n});\n\nrouter.post(\x27\/register\x27,(req,res,next) =\x3e {\n    console.log(req.body);\n   \/\/ 去判断用户名、密码是否合法\n   \/\/ 判断是否用户名已经被注册\n   \/\/ 通过 res.json(responseData) 给客户端返回json数据\n   \n   \/\/ 查询数据库\n   User.findOne({    \/\/ 返回一个promise对象\n           username: username\n   }).then(function( userInfo ) {\n           if( userInfo ){ \/\/ 数据库中有该条记录\n            ...\n          res.json(responseData);\n          return;\n       }\n       \/\/ 给数据库中添加该条信息\n       var user = new User({ username:username,password:password });\n       return user.save(); \/\/ 返回promise对象\n   }).then(function( newUserInfo ){\n            console.log(newUserInfo);\n       res.json(responseData);  \/\/ 数据保存成功  \n   });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bodyParser = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ bodyParser 配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过使用这一方法，可以为req对象添加一个body属性\x3c\/span\x3e\napp.use( bodyParser.urlencoded({\x3cspan class=\x22hljs-attr\x22\x3eextended\x3c\/span\x3e:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}));\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在api模块中：\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1.可以定义一个中间件，来统一返回格式\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e responseData;\nrouter.use( \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq,res,next\x3c\/span\x3e)\x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ path默认为\x27\/\x27,当访问该目录时这个中间件被调用\x3c\/span\x3e\n    responseData = {\n         \x3cspan class=\x22hljs-attr\x22\x3ecode\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n       \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n    };\n    next();\n});\n\nrouter.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/register\x27\x3c\/span\x3e,(req,res,next) =\x26gt; {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(req.body);\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 去判断用户名、密码是否合法\x3c\/span\x3e\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断是否用户名已经被注册\x3c\/span\x3e\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过 res.json(responseData) 给客户端返回json数据\x3c\/span\x3e\n   \n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 查询数据库\x3c\/span\x3e\n   User.findOne({    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回一个promise对象\x3c\/span\x3e\n           username: username\n   }).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e userInfo \x3c\/span\x3e) \x3c\/span\x3e{\n           \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e( userInfo ){ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据库中有该条记录\x3c\/span\x3e\n            ...\n          res.json(responseData);\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n       }\n       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 给数据库中添加该条信息\x3c\/span\x3e\n       \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e user = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e:username,\x3cspan class=\x22hljs-attr\x22\x3epassword\x3c\/span\x3e:password });\n       \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e user.save(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回promise对象\x3c\/span\x3e\n   }).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e newUserInfo \x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(newUserInfo);\n       res.json(responseData);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 数据保存成功  \x3c\/span\x3e\n   });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3ecookies 模块的使用\x3c\/h2\x3e\n\x3cul\x3e\x3cli\x3e全局（app.js）注册使用\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 设置cookie\n\/\/ 只要客户端发送请求就会通过这个中间件\napp.use((req, res, next) =\x3e {\n    req.cookies = new cookies(req, res);\n\n    \/**\n     * 解析用户的cookies信息\n     * 查询数据库判断是否为管理员 isAdmin\n     * 注意：查询数据库是异步操作，next应该放在回调里边\n     *\/\n    req.userInfo = {};\n    if (req.cookies.get(\x26quot;userInfo\x26quot;)) {\n        try {\n            req.userInfo = JSON.parse(req.cookies.get(\x26quot;userInfo\x26quot;));\n            \/\/ 查询数据库判断是否为管理员\n            User.findById(req.userInfo._id).then(function (result) {\n                req.userInfo.isAdmin = Boolean(result.isAdmin);\n                next();\n            });\n        } catch (e) {\n            next();\n        }\n    } else {\n        next();\n    }\n});\n\n\/\/ 当用户登录或注册成功之后，可以为其设置cookies\nreq.cookies.set(\x26quot;userInfo\x26quot;,JSON.stringify({\n     _id:result._id,\n    username:result.username \n}));\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置cookie\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只要客户端发送请求就会通过这个中间件\x3c\/span\x3e\napp.use(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    req.cookies = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e cookies(req, res);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 解析用户的cookies信息\n     * 查询数据库判断是否为管理员 isAdmin\n     * 注意：查询数据库是异步操作，next应该放在回调里边\n     *\/\x3c\/span\x3e\n    req.userInfo = {};\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (req.cookies.get(\x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\x22\x3c\/span\x3e)) {\n        \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n            req.userInfo = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(req.cookies.get(\x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\x22\x3c\/span\x3e));\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 查询数据库判断是否为管理员\x3c\/span\x3e\n            User.findById(req.userInfo._id).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eresult\x3c\/span\x3e) \x3c\/span\x3e{\n                req.userInfo.isAdmin = \x3cspan class=\x22hljs-built_in\x22\x3eBoolean\x3c\/span\x3e(result.isAdmin);\n                next();\n            });\n        } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {\n            next();\n        }\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        next();\n    }\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当用户登录或注册成功之后，可以为其设置cookies\x3c\/span\x3e\nreq.cookies.set(\x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify({\n     \x3cspan class=\x22hljs-attr\x22\x3e_id\x3c\/span\x3e:result._id,\n    \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e:result.username \n}));\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3eswig模板引擎\x3c\/h2\x3e\n\x3cp\x3e1.变量\x3cbr\x3e\x3cstrong\x3e \x22{{\x22 name \x22}}\x22 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e2.属性\x3cbr\x3e\x3cstrong\x3e \x22{{\x22 student.name \x22}}\x22 \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e3.if判断\x3cbr\x3e\x3cstrong\x3e { % if name === \x27郭靖\x27 % } \x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e  hello 靖哥哥 \x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e { % endif % } \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e4.for循环\x3cbr\x3e\/\/ arr = [1, 2, 3]\x3cbr\x3e\x3cstrong\x3e { % for key, val in arr % } \x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e  \x26lt;p\x26gt;{ { key } } -- { { val } }\x26lt;\/p\x26gt; \x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e { % endfor % } \x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e5.set命令\x3cbr\x3e用来设置一个变量，在当前上下文中复用\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e {% set foo = [0, 1, 2, 3, 4, 5] %} \x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e {% extends \x27layout.html\x27 %} \x3c\/strong\x3e  \/\/ 继承某一个HTML模板\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e {% include \x27page.html\x27 %} \x3c\/strong\x3e  \/\/ 包含一个模板到当前位置\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e {% block main %}  xxx  {% endblock %} \x3c\/strong\x3e \/\/重写某一区块\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e6.autoescape 自动编码\x3cbr\x3e当想在某个div中显示后端生成的HTML代码，模板渲染时会自动编码，\x3cbr\x3e以字符串的形式显示。通过以下方式，可以避免这个情况：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \x3cdiv id=\x26quot;article-content\x26quot; class=\x26quot;content\x26quot;\x3e\n    {% autoescape false %}\n    \x22{{\x22 data.article_content_html \x22}}\x22\n    {% endautoescape %}\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22article-content\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    {% autoescape false %}\n    \x22{{\x22 data.article_content_html \x22}}\x22\n    {% endautoescape %}\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e用户管理和分页\x3c\/h2\x3e\n\x3cul\x3e\x3cli\x3e\x3cstrong\x3e CRUD用户数据 \x3c\/strong\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const User = require(\x27..\/models\/user\x27);\n\n\/\/ 查询所有的用户数据\nUser.find().then(function(users){\n\n});\n\n\/\/ 根据某一字段查询数据\nUser.findOne({\n    username:username\n}).then(function(result){\n\n});\n\n\/\/ 根据用户ID查询数据\nUser.findById(id).then(function(user){\n\n});\n\n\/\/ 根据ID删除数据\nUser.remove({\n    _id: id\n}).then(function(){\n\n});\n\n\/\/ 修改数据\nUser.update({\n    _id: id\n},{\n    username: name\n}).then(function(){\n    \n});\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e User = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/models\/user\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 查询所有的用户数据\x3c\/span\x3e\nUser.find().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eusers\x3c\/span\x3e)\x3c\/span\x3e{\n\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据某一字段查询数据\x3c\/span\x3e\nUser.findOne({\n    \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e:username\n}).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eresult\x3c\/span\x3e)\x3c\/span\x3e{\n\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据用户ID查询数据\x3c\/span\x3e\nUser.findById(id).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3euser\x3c\/span\x3e)\x3c\/span\x3e{\n\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据ID删除数据\x3c\/span\x3e\nUser.remove({\n    \x3cspan class=\x22hljs-attr\x22\x3e_id\x3c\/span\x3e: id\n}).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改数据\x3c\/span\x3e\nUser.update({\n    \x3cspan class=\x22hljs-attr\x22\x3e_id\x3c\/span\x3e: id\n},{\n    \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: name\n}).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \n});\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cstrong\x3e 数据分页管理 \x3c\/strong\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e两个重要方法\x3cbr\x3elimit(Number): 限制获取的数据条数\x3cbr\x3eskip(Number): 忽略数据的条数 前number条\x3c\/p\x3e\n\x3cp\x3e忽略条数：（当前页 - 1） * 每页显示的条数\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\/\/ 接收传过来的page\nlet query_page = Number(req.query.page) || 1;\nquery_page = Math.max(query_page, 1);  \/\/ 限制最小为1\nquery_page = Math.min(Math.ceil(count \/ limit), query_page); \/\/ 限制最大值 count\/limit向上取整\n\n\nvar cur_page = query_page;  \/\/ 当前页\nvar limit = 10; \/\/ 每页显示的条数\nvar skip = (cur_page - 1) * limit; \/\/忽略的条数\n\nUser.find().limit(limit).skip(skip).then(function(users){\n    ...\n  \/\/ 将当前页 page 传给页面\n  \/\/ 将最大页码 maxPage 传给页面\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接收传过来的page\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e query_page = \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(req.query.page) || \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\nquery_page = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(query_page, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 限制最小为1\x3c\/span\x3e\nquery_page = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.ceil(count \/ limit), query_page); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 限制最大值 count\/limit向上取整\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cur_page = query_page;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前页\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e limit = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每页显示的条数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e skip = (cur_page - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) * limit; \x3cspan class=\x22hljs-comment\x22\x3e\/\/忽略的条数\x3c\/span\x3e\n\nUser.find().limit(limit).skip(skip).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eusers\x3c\/span\x3e)\x3c\/span\x3e{\n    ...\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将当前页 page 传给页面\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将最大页码 maxPage 传给页面\x3c\/span\x3e\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e文章的表结构\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 对于content.js\nvar mongoose = require(\x27mongoose\x27);\nvar contentSch = require(\x27..\/schemas\/contentSch\x27);\n\nmodule.exports = mongoose.model(\x27Content\x27,contentSch);\n\n\n\/\/ contentSch.js\nmodule.exports = new mongoose.Schema({\n    \n   \/\/ 关联字段 - 分类的id\n   category:{\n        \/\/ 类型\n        type:mongoose.Schema.Types.ObjectId,\n        \/\/ 引用\n        ref:\x27Category\x27  \n    },\n    \n    \/\/ 内容标题\n    title: String,\n    \n    \/\/ 简介\n    description:{\n        type: String,\n        default: \x27\x27  \n    },\n    \n    \/\/ 内容\n    content:{\n        type:String,\n        default:\x27\x27\n    }\n});\n\n\/\/ 文章查询时关联category字段\nContent.find().populate(\x27category\x27).then(contents =\x3e {\n    \/\/ 那么通过这样的方式，我们就可以找到Content表中的\n   \/\/ 关联信息     content.category.category_name \n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对于content.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mongoose = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mongoose\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e contentSch = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/schemas\/contentSch\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = mongoose.model(\x3cspan class=\x22hljs-string\x22\x3e\x27Content\x27\x3c\/span\x3e,contentSch);\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ contentSch.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e mongoose.Schema({\n    \n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关联字段 - 分类的id\x3c\/span\x3e\n   category:{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 类型\x3c\/span\x3e\n        type:mongoose.Schema.Types.ObjectId,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引用\x3c\/span\x3e\n        ref:\x3cspan class=\x22hljs-string\x22\x3e\x27Category\x27\x3c\/span\x3e  \n    },\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 内容标题\x3c\/span\x3e\n    title: \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e,\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 简介\x3c\/span\x3e\n    description:{\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3edefault\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e  \n    },\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 内容\x3c\/span\x3e\n    content:{\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3edefault\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n    }\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文章查询时关联category字段\x3c\/span\x3e\nContent.find().populate(\x3cspan class=\x22hljs-string\x22\x3e\x27category\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3econtents\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 那么通过这样的方式，我们就可以找到Content表中的\x3c\/span\x3e\n   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关联信息     content.category.category_name \x3c\/span\x3e\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3eMarkDown语法高亮\x3c\/h2\x3e\n\x3cul\x3e\x3cli\x3e在HTML中直接使用\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3clink rel=\x26quot;stylesheet\x26quot; href=\x26quot;http:\/\/cdnjs.cloudflare.com\/ajax\/libs\/highlight.js\/9.12.0\/styles\/default.min.css\x26quot;\x3e\n\x3cscript src=\x26quot;http:\/\/cdnjs.cloudflare.com\/ajax\/libs\/highlight.js\/9.12.0\/highlight.min.js\x26quot;\x3e\x3c\/script\x3e\n\n\x3cscript src=\x26quot;https:\/\/cdn.bootcss.com\/marked\/0.3.17\/marked.min.js\x26quot;\x3e\x3c\/script\x3e\n\n\/\/ marked相关配置\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    gfm: true,\n    tables: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: true,\n    smartLists: true,\n    smartypants: false,\n    highlight: function (code) {\n        return hljs.highlightAuto(code).value;\n    }\n});\n\n\/\/ MarkDown语法解析内容预览\n$(\x27#bjw-content\x27).on(\x27keyup blur\x27, function () {\n    $(\x27#bjw-previous\x27).html(marked($(\x27#bjw-content\x27).val()));\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x26lt;link rel=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e href=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/cdnjs.cloudflare.com\/ajax\/libs\/highlight.js\/9.12.0\/styles\/default.min.css\x22\x3c\/span\x3e\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/cdnjs.cloudflare.com\/ajax\/libs\/highlight.js\/9.12.0\/highlight.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\n\x26lt;script src=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.bootcss.com\/marked\/0.3.17\/marked.min.js\x22\x3c\/span\x3e\x26gt;\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ marked相关配置\x3c\/span\x3e\nmarked.setOptions({\n    \x3cspan class=\x22hljs-attr\x22\x3erenderer\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e marked.Renderer(),\n    \x3cspan class=\x22hljs-attr\x22\x3egfm\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etables\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ebreaks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epedantic\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3esanitize\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3esmartLists\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3esmartypants\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ehighlight\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecode\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e hljs.highlightAuto(code).value;\n    }\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ MarkDown语法解析内容预览\x3c\/span\x3e\n$(\x3cspan class=\x22hljs-string\x22\x3e\x27#bjw-content\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27keyup blur\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    $(\x3cspan class=\x22hljs-string\x22\x3e\x27#bjw-previous\x27\x3c\/span\x3e).html(marked($(\x3cspan class=\x22hljs-string\x22\x3e\x27#bjw-content\x27\x3c\/span\x3e).val()));\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3enode环境中使用\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 在模板页面引入默认样式\n\x3c!--语法高亮--\x3e\n\x3clink rel=\x26quot;stylesheet\x26quot; href=\x26quot;http:\/\/cdnjs.cloudflare.com\/ajax\/libs\/highlight.js\/9.12.0\/styles\/default.min.css\x26quot;\x3e\n\nconst marked = require(\x27marked\x27);\nconst hljs = require(\x27highlight.js\x27);\n\n\/\/ marked相关配置\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    gfm: true,\n    tables: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: true,\n    smartLists: true,\n    smartypants: false,\n    highlight: function (code) {\n        return hljs.highlightAuto(code).value;\n    }\n});\n\n\/\/ 对内容进行markdown语法转换\ndata.article_content_html = marked(article.content);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在模板页面引入默认样式\x3c\/span\x3e\n\x26lt;!--语法高亮--\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/cdnjs.cloudflare.com\/ajax\/libs\/highlight.js\/9.12.0\/styles\/default.min.css\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\nconst marked = require(\x27marked\x27);\nconst hljs = require(\x27highlight.js\x27);\n\n\/\/ marked相关配置\nmarked.setOptions({\n    renderer: new marked.Renderer(),\n    gfm: true,\n    tables: true,\n    breaks: false,\n    pedantic: false,\n    sanitize: true,\n    smartLists: true,\n    smartypants: false,\n    highlight: function (code) {\n        return hljs.highlightAuto(code).value;\n    }\n});\n\n\/\/ 对内容进行markdown语法转换\ndata.article_content_html = marked(article.content);\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e使文本域支持Tab缩进\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$(\x27#bjw-content\x27).on(\x27keydown\x27,function(e){\n    if(e.keyCode === 9){ \/\/ Tab键\n         var position = this.selectionStart \x2b 2; \/\/ Tab === 俩空格\n       this.value = this.value.substr(0,this.selectionStart) \x2b \x26quot;  \x26quot; \x2b this.value.substr(this.selectionStart);\n       this.selectionStart = position;\n       this.selectionEnd = position;\n       this.focus();\n       e.preventDefault();\n    }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e$(\x3cspan class=\x22hljs-string\x22\x3e\x27#bjw-content\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27keydown\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(e.keyCode === \x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e){ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Tab键\x3c\/span\x3e\n         \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e position = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectionStart \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Tab === 俩空格\x3c\/span\x3e\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value.substr(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectionStart) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22  \x22\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value.substr(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectionStart);\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectionStart = position;\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectionEnd = position;\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.focus();\n       e.preventDefault();\n    }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3elayer 弹框\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 显示弹框\nfunction showDialog(text, icon, callback) {\n    layer.open({\n        time: 1500,\n        anim: 4,\n        offset: \x27t\x27,\n        icon: icon,\n        content: text,\n        btn: false,\n        title: false,\n        closeBtn: 0,\n        end: function () {\n            callback \x26amp;\x26amp; callback();\n        }\n    });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 显示弹框\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eshowDialog\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etext, icon, callback\x3c\/span\x3e) \x3c\/span\x3e{\n    layer.open({\n        \x3cspan class=\x22hljs-attr\x22\x3etime\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1500\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eanim\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoffset\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27t\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e: icon,\n        \x3cspan class=\x22hljs-attr\x22\x3econtent\x3c\/span\x3e: text,\n        \x3cspan class=\x22hljs-attr\x22\x3ebtn\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ecloseBtn\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eend\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            callback \x26amp;\x26amp; callback();\n        }\n    });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader18\x22\x3e随机用户头像生成\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\/\/ 引入对应的库\nconst crypto = require(\x27crypto\x27);\nconst identicon = require(\x27identicon.js\x27);\n\n\/\/ 当用户注册时，根据用户的用户名生成随机头像\nlet hash = crypto.createHash(\x27md5\x27);\nhash.update(username);\nlet imgData = new identicon(hash.digest(\x27hex\x27).toString());\nlet imgUrl = \x27data:\/image\/png;base64,\x27\x2bimgData;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入对应的库\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e crypto = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27crypto\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e identicon = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27identicon.js\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当用户注册时，根据用户的用户名生成随机头像\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e hash = crypto.createHash(\x3cspan class=\x22hljs-string\x22\x3e\x27md5\x27\x3c\/span\x3e);\nhash.update(username);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e imgData = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e identicon(hash.digest(\x3cspan class=\x22hljs-string\x22\x3e\x27hex\x27\x3c\/span\x3e).toString());\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e imgUrl = \x3cspan class=\x22hljs-string\x22\x3e\x27data:\/image\/png;base64,\x27\x3c\/span\x3e\x2bimgData;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader19\x22\x3eform表单提交的小问题\x3c\/h2\x3e\n\x3cp\x3e当使用form表单提交一些代码的时候，会出现浏览器拦截的现象，原因是：浏览器误以为客户进行xss攻击。所以呢解决这个问题也很简单，就是对提交的内容进行base64或者其他形式的编码，在服务器端进行解码，即可解决。\x3c\/p\x3e\n\x3cp\x3e项目地址：\x3ca href=\x22https:\/\/github.com\/bjw1234\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/bjw1234\/blog\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e完结 撒花 ^_^ ~\x3c\/code\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>node博客项目开发手记</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013738908">https://segmentfault.com/a/1190000013738908</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/9875xa4ht3i/" target="_blank">https://alili.tech/archive/9875xa4ht3i/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>