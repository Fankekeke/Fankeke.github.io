<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React 新 Context API"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React 新 Context API | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/a6086f2b/",
				"appid": "1613049289050283", 
				"title": "React 新 Context API | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-18T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/67b05647/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ca95dd4a/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&text=React%20%e6%96%b0%20Context%20API"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&text=React%20%e6%96%b0%20Context%20API"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&title=React%20%e6%96%b0%20Context%20API"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&is_video=false&description=React%20%e6%96%b0%20Context%20API"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20%e6%96%b0%20Context%20API&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&title=React%20%e6%96%b0%20Context%20API"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&title=React%20%e6%96%b0%20Context%20API"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&title=React%20%e6%96%b0%20Context%20API"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fa6086f2b%2f&title=React%20%e6%96%b0%20Context%20API"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React 新 Context API</h1><div class="meta"><div class="postdate"><time datetime="2018-10-18" itemprop="datePublished">2018-10-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3e\x3cem\x3e它更符合工程化, 不再是实验性的,” 现在它是一流的API! 并且它还使用了 RENDER PROP!\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e注意: 大家可以通过\x3c\/strong\x3e \x3ca href=\x22http:\/\/kcd.im\/news\x22\x3e\x3cstrong\x3enewsletter\x3c\/strong\x3e\x3c\/a\x3e\x3cstrong\x3e获取我最新的资讯.我发送每封电子邮件两周后发布到\x3c\/strong\x3e \x3ca href=\x22https:\/\/blog.kentcdodds.com\x22\x3e\x3cstrong\x3e我的博客\x3c\/strong\x3e\x3c\/a\x3e \x3cstrong\x3e. 订阅即可在收件箱中获得更早更多的内容! 💌\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e你在react官网上听说过 context API?如果你听说过, 你会像许多人那样，因为看过官网的文档，而害怕直接使用它么:\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t0170baed12f9dd0be7.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e该搜索结果第一个显示\x3ca href=\x22https:\/\/reactjs.org\/docs\/context.html#why-not-to-use-context\x22\x3e“为何不用使用Context”\x3c\/a\x3e.不会激发对context API.的大量信心 .为了使事情更加受关注，搜索结果这部分说:\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cem\x3e如果你想让你的应用更稳定，别使用context。因为这是一个实验性的API，在未来的React版本中可能会被更改。.\x3c\/em\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch3\x3e那么你为何要使用context?\x3c\/h3\x3e\n\x3cp\x3e你有没有经历过尝试在react状态树中从底部组建向顶部组建获取状态值的痛苦? 这种痛苦称作\x3cstrong\x3e“prop drilling”\x3c\/strong\x3e 并且 \x3cstrong\x3e是让人感到崩溃的\x3c\/strong\x3e. 最终你必须通过不关心数据的组件来传递props，以便将这些props发送给需要关心这些数据的组件。 并且随着你移到这些组建这些痛苦将被扩大。\x3c\/p\x3e\n\x3cp\x3e实际上你可以使用常规的JavaScript模块来避免这些问题。你可以把这些数据放在一个单独的模块中，这样你就可以随时随地的导入或者访问相关数据。 但是，在更新的时候会遇到一些麻烦 (你必须实现一个方法来保证实时更新), 并且服务器端的渲染也可能对单例有 \x3ca href=\x22https:\/\/stackoverflow.com\/a\/40974748\/971592\x22\x3e问题\x3c\/a\x3e 。\x3c\/p\x3e\n\x3cp\x3e如此，这就需要 \x3ca href=\x22https:\/\/redux.js.org\/\x22\x3eredux\x3c\/a\x3e这种状态管理库参与进来的地方了 . redux允许您轻松地从store(状态树)中的任何位置获取数据.你所要做的就是使用这个叫做 \x3ccode\x3e\x26lt;Provider \/\x26gt;\x3c\/code\x3e 用法，的东西，神奇的是你的store(状态树)可以被任何“连接”的组件所访问\x3c\/p\x3e\n\x3cp\x3e如果我告诉你 Redux用法之 \x3ccode\x3e\x26lt;Provider \/\x26gt;\x3c\/code\x3e 正在使用context的特性，那该怎么办？确实是这样！ provider组件将数据放入context中，并且“连接”高阶组件将数据从context中提取出来。 因此，实际上，Redux并不允许您的数据在任何地方访问......context是就是这样！\x3c\/p\x3e\n\x3cp\x3e那么，为什么你应该使用context? 那么，你可能早已经爱上了它了 ！即使你不直接使用context, 但是你的app已经通过\x3ccode\x3ereact-redux\x3c\/code\x3e，\x3ccode\x3eMobX-react\x3c\/code\x3e，\x3ccode\x3ereact-router\x3c\/code\x3e，\x3ccode\x3eglamorous\x3c\/code\x3e等来使用它！\x3c\/p\x3e\n\x3ch3\x3eContext的重生\x3c\/h3\x3e\n\x3cp\x3e所以我们爱上了\x3ccode\x3econtext\x3c\/code\x3e, 但是要记住官方的警告“它又可能在之后的react版本中被摒弃掉? 现在context正式发布了! 你将会喜欢上它!\x3c\/p\x3e\n\x3cp\x3e在一个月以前, the  React团队从 \x3ca href=\x22https:\/\/github.com\/yarnpkg\/rfcs\x22\x3eYarn\x3c\/a\x3e, \x3ca href=\x22https:\/\/github.com\/rust-lang\/rfcs\x22\x3eRust\x3c\/a\x3e, 和 \x3ca href=\x22https:\/\/github.com\/emberjs\/rfcs\x22\x3eEmber\x3c\/a\x3e 的 rfcs 仓库中受到了启发，创建了一个新的自己的\x3ca href=\x22https:\/\/github.com\/reactjs\/rfcs\x22\x3eRFCs 仓库\x3c\/a\x3e . 第一个从仓库拉代码的是 \x3ca href=\x22https:\/\/twitter.com\/acdlite\x22\x3eAndrew Clark\x3c\/a\x3e (react核心团队成员) 它被称为\x3ca href=\x22https:\/\/github.com\/reactjs\/rfcs\/pull\/2\x22\x3e“新版的 context”\x3c\/a\x3e.其中， Andrew 描述了新版的context 将会是什么样的. 在这仓库里有些很有趣的讨论。 几天后, Andrew 就向 React 仓库提了一个\x3ca href=\x22https:\/\/github.com\/facebook\/react\/pull\/11818\x22\x3e“New context API”\x3c\/a\x3e的PR.\x3c\/p\x3e\n\x3cp\x3e所以呢它看起来怎么样?肉眼估计新的 API 与之前的 API 存在百万级别的差异. 这是我做的一个简单实用的: \n\x3ca href=\x22https:\/\/cdn.embedly.com\/widgets\/media.html?src=https%3A%2F%2Fcodesandbox.io%2Fembed%2Fn4r0qq898j\x26amp;url=https%3A%2F%2Fcodesandbox.io%2Fs%2Fn4r0qq898j\x26amp;image=https%3A%2F%2Fcodesandbox.io%2Fapi%2Fv1%2Fsandboxes%2Fn4r0qq898j%2Fscreenshot.png\x26amp;key=a19fcc184b9711e1b4764040d3dc5c07\x26amp;type=text%2Fhtml\x26amp;schema=codesandbox\x22\x3e实例\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e这是一个更简单的版本，所以你不必另外打开代码链接：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs scala\x22\x3econst \x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e = \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.createContext(\x3cspan class=\x22hljs-symbol\x22\x3e\x27ligh\x3c\/span\x3et\x27)\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eThemeProvider\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  state = {theme: \x3cspan class=\x22hljs-symbol\x22\x3e\x27ligh\x3c\/span\x3et\x27}\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eProvider\x3c\/span\x3e value={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.theme}\x26gt;`\n        {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.children}\n      `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eProvider\x3c\/span\x3e\x26gt;`\n    )\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eThemeProvider\x3c\/span\x3e\x26gt;`\n        `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eConsumer\x3c\/span\x3e\x26gt;`\n          {\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e =\x26gt; `\x26lt;div\x26gt;`{\x3cspan class=\x22hljs-keyword\x22\x3eval\x3c\/span\x3e}`\x26lt;\/div\x26gt;`}\n        `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eConsumer\x3c\/span\x3e\x26gt;`\n      `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eThemeProvider\x3c\/span\x3e\x26gt;`\n    )\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cem\x3e在我的代码例子中你或许注意到了， 我正在使用render prop Consumer组件（最好！）, 如果你不喜欢用这种方式, 您可以使用 context API （这就是为什么它是最好的）轻松实现更高阶组件或其他内容\x3c\/em\x3e\n最新的  context API 由3个主要部分组成:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ccode\x3eReact.createContext\x3c\/code\x3e 用于传递初始值(可选择 \x3ca href=\x22https:\/\/twitter.com\/acdlite\/status\/957446433656864768\x22\x3ea fancy opt-out function that uses a bitmask\x3c\/a\x3e). ,返回一个包含 provider 和 consumer 的对象\x3c\/li\x3e\n\x3cli\x3eThe \x3ccode\x3eProvider\x3c\/code\x3e 组件在树中内更深层次的值，并接受一个名为值的prop（可以是任何东西）。.\x3c\/li\x3e\n\x3cli\x3eThe \x3ccode\x3eConsumer\x3c\/code\x3e 函数在 provider 之后任何地方使用，并传递一个返回 JSX 的函数.\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我对这个 API 充满了期待.React 团队 也将会移除 context 是实验性 API 的警告，因为，它现在是框架 \x3ca href=\x22https:\/\/twitter.com\/acdlite\/status\/957445801302618112\x22\x3e“一级棒的特性”\x3c\/a\x3e . 这就意味着开发者不要再担心使用 context 来解决应用中 prop-drilling 的问题了，对 Redux 也将不再那么依赖，对 React 将更加喜欢 (或许 \x3ca href=\x22https:\/\/medium.com\/@thejameskyle\x22\x3eJames Kyle\x3c\/a\x3e的 \x3ca href=\x22https:\/\/github.com\/thejameskyle\/unstated\x22\x3eUnstated\x3c\/a\x3e  是我们一直所期待的).\x3c\/p\x3e\n\x3cp\x3e我最近 \x3ca href=\x22https:\/\/twitter.com\/kentcdodds\/status\/911276059051438082\x22\x3e看到的\x3c\/a\x3e:\x3c\/p\x3e\n\x3cp\x3e我认为，如果我们能避免过早和任意打断 render 方法，那么我们就更少的会感受到这种痛苦。但是，即使我们感受到了，我们也有一个坚实的核心 React API来帮助我们避免这个问题。\x3c\/p\x3e\n\x3ch3\x3eContext 实践\x3c\/h3\x3e\n\x3cp\x3e我多次遇见一个关于 context API （或普通的 render prop pattern）的问题，就是如何组合 providers 和 consumers.当在一个 render 方法中把一堆 render prop 组件放在一起时，就会像这样 \x3ca href=\x22https:\/\/twitter.com\/acdlite\/status\/955955121979969537\x22\x3e嵌套\x3c\/a\x3e:\x3c\/p\x3e\n\x3cp\x3e所以我们怎么避免这种情况你? 如果这样很麻烦，你可以用常规的方法来解决: utility  函数\/组件. 这有个例子:\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs scala\x22\x3econst \x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e = \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.createContext(\x3cspan class=\x22hljs-symbol\x22\x3e\x27ligh\x3c\/span\x3et\x27)\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eThemeProvider\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\x3cspan class=\x22hljs-comment\x22\x3e\/* code *\/\x3c\/span\x3e}\nconst \x3cspan class=\x22hljs-type\x22\x3eThemeConsumer\x3c\/span\x3e = \x3cspan class=\x22hljs-type\x22\x3eThemeContext\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eConsumer\x3c\/span\x3e\nconst \x3cspan class=\x22hljs-type\x22\x3eLanguageContext\x3c\/span\x3e = \x3cspan class=\x22hljs-type\x22\x3eReact\x3c\/span\x3e.createContext(\x3cspan class=\x22hljs-symbol\x22\x3e\x27e\x3c\/span\x3en\x27)\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eLanguageProvider\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\x3cspan class=\x22hljs-comment\x22\x3e\/* code *\/\x3c\/span\x3e}\nconst \x3cspan class=\x22hljs-type\x22\x3eLanguageConsumer\x3c\/span\x3e = \x3cspan class=\x22hljs-type\x22\x3eLanguageContext\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eConsumer\x3c\/span\x3e\n\nfunction \x3cspan class=\x22hljs-type\x22\x3eAppProviders\x3c\/span\x3e({children}) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n    `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eLanguageProvider\x3c\/span\x3e\x26gt;`\n      `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eThemeProvider\x3c\/span\x3e\x26gt;`\n        {children}\n      `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eThemeProvider\x3c\/span\x3e\x26gt;`\n    `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eLanguageProvider\x3c\/span\x3e\x26gt;`\n  )\n}\n\nfunction \x3cspan class=\x22hljs-type\x22\x3eThemeAndLanguageConsumer\x3c\/span\x3e({children}) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n    `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eLanguageConsumer\x3c\/span\x3e\x26gt;`\n      {language =\x26gt; (\n        `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eThemeConsumer\x3c\/span\x3e\x26gt;`\n          {theme =\x26gt; children({language, theme})}\n        `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eThemeConsumer\x3c\/span\x3e\x26gt;`\n      )}\n    `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eLanguageConsumer\x3c\/span\x3e\x26gt;`\n  )\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eAppProviders\x3c\/span\x3e\x26gt;`\n        `\x26lt;\x3cspan class=\x22hljs-type\x22\x3eThemeAndLanguageConsumer\x3c\/span\x3e\x26gt;`\n          {({theme, language}) =\x26gt; `\x26lt;div\x26gt;`{theme} and {language}`\x26lt;\/div\x26gt;`}\n        `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eThemeAndLanguageConsumer\x3c\/span\x3e\x26gt;`\n      `\x26lt;\/\x3cspan class=\x22hljs-type\x22\x3eAppProviders\x3c\/span\x3e\x26gt;`\n    )\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e在这里的目的是为了使用常见的案例，结合特殊功能的函数\/组件，使案例更加 工程化! 有道理么? 我希望它确实如此 😅\n我这有另外一个例子，在这真实的展示出嵌套有多糟糕以及怎样使用一个\x3ca href=\x22https:\/\/medium.com\/@jmeas\x22\x3ejmeas\x3c\/a\x3e 的一个称为\x3ccode\x3ereact-composer\x3c\/code\x3e utility 方法 来实现它\x3ca href=\x22https:\/\/codesandbox.io\/embed\/92pj14134y?referrer=https%3A%2F%2Fmedium.com%2Fmedia%2F4bcc13014bc56311fdb9440b6e28a050%3FpostId%3D70c9fe01596b\x22\x3e链接\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我应该提到的是，我不希望你需要在实践中嵌套 render props 组建。无论何时，你都可以创建一个简单的组建，将它们组合在一起并使用该组件。\x3c\/p\x3e\n\x3ch3\x3e总结\x3c\/h3\x3e\n\x3cp\x3e正如我之前所说的，我对于这个新的API 非常的振奋。这个API 目前没有发布，但是一个会包含在下一个发布的  React minor版本中。\n不同担心，之前的 API 会继续正常工作，直到下一个 major 版本发布。所以，每个人都有时间迁移。还有不要忘了，React 团队在 Facebook 有超过 50,000 个 React components 需要维护，所以，将来很有可能会发布一个 codemod 去自动更新大多数人的代码（就像之前的版本一样）。\x3c\/p\x3e\n\x3cp\x3e我对这个新API所能提供的东西感到兴奋。正如\x3ca href=\x22https:\/\/twitter.com\/kentcdodds\/status\/956675313966239745\x22\x3e我最近在Twitter上提到的\x3c\/a\x3e (回应 \x3ca href=\x22https:\/\/medium.com\/@dan_abramov\x22\x3eDan Abramov\x3c\/a\x3e的 \x3ca href=\x22https:\/\/twitter.com\/dan_abramov\/status\/956674265104953344\x22\x3e推文\x3c\/a\x3e):\n有太多的期待了！祝你好运！ 👍\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e不容错过的事\x3c\/strong\x3e:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ccode\x3ereact-broadcast\x3c\/code\x3e是 \x3ca href=\x22https:\/\/medium.com\/@mjackson\x22\x3eMichael Jackson\x3c\/a\x3e 的一个库,提供与context同样的功能. \x3ca href=\x22https:\/\/github.com\/ReactTraining\/react-broadcast\/tree\/next\x22\x3e下一个版本\x3c\/a\x3e 将是对于\x3ccode\x3eReact.createContext\x3c\/code\x3e (对e\x3ca href=\x22https:\/\/medium.com\/@thejameskyle\x22\x3eJames Kyle\x3c\/a\x3e的shoutout 以及创建 \x3ccode\x3ecreate-react-context\x3c\/code\x3e).我实际上使用react-broadcast \x3ca href=\x22https:\/\/egghead.io\/courses\/advanced-react-component-patterns\x22\x3e在我的高级react课程中\x3c\/a\x3e当新的contextAPI正式发布时我将不得不更新 😅.\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3ereact-fns\x3c\/code\x3e: 浏览器API由\x3ca href=\x22https:\/\/medium.com\/@jaredpalmer\x22\x3eJared Palmer\x3c\/a\x3e 转变为声明性React组件和HoC\x27s👏\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3ereact-composer\x3c\/code\x3e: 由 \x3ca href=\x22https:\/\/medium.com\/@jmeas\x22\x3ejmeas\x3c\/a\x3e撰写渲染道具组件（我在上面的代码框中使用的）\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3ereact-contextual\x3c\/code\x3e: \x3ca href=\x22https:\/\/medium.com\/@drcmda\x22\x3ePaul Henschel\x3c\/a\x3ePaul Henschel的Reacts新context API的小助手\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e上周的一些推文:\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e附 如果你喜欢这些, 确保 \x3c\/strong\x3e \x3ca href=\x22http:\/\/kcd.im\/news\x22\x3e\x3cstrong\x3e邮箱订阅\x3c\/strong\x3e\x3c\/a\x3e\x3cstrong\x3e, \x3c\/strong\x3e\x3ca href=\x22https:\/\/twitter.com\/kentcdodds\x22\x3e\x3cstrong\x3e_在twitter上关注我\x3c\/strong\x3e\x3c\/a\x3e\x3cstrong\x3e, \x3c\/strong\x3e \x3ca href=\x22http:\/\/kcd.im\/donate\x22\x3e\x3cstrong\x3e_帮我买午餐\x3c\/strong\x3e\x3c\/a\x3e\x3cstrong\x3e,  \x3c\/strong\x3e \x3ca href=\x22http:\/\/kcd.im\/patreon\x22\x3e\x3cstrong\x3e\x3cem\x3e在patreon支持我\x3c\/em\x3e\x3c\/strong\x3e\x3c\/a\x3e\x3cstrong\x3e, 并且 \x3c\/strong\x3e\x3ca href=\x22http:\/\/kcd.im\/news\x22\x3e\x3cstrong\x3e\x3cem\x3e和你的朋友分享这些\x3c\/em\x3e\x3c\/strong\x3e\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e并且，转发这是与朋友分享这个不错的方法:\x3c\/p\x3e\n\x3cp\x3e👋 大家好！我叫\x3ca href=\x22https:\/\/kentcdodds.com\/\x22\x3eKent C. Dodds\x3c\/a\x3e. 我是一名工作在\x3ca href=\x22https:\/\/www.paypal.com\/\x22\x3ePayPal\x3c\/a\x3e 的全栈工程师. 我在PayPal 我职级是 \x3ca href=\x22https:\/\/github.com\/tc39\x22\x3ethe TC39\x3c\/a\x3e. 我比较热衷于 \x3ca href=\x22https:\/\/github.com\/kentcdodds\x22\x3e开源社区\x3c\/a\x3e. 我在 \x3ca href=\x22https:\/\/egghead.io\/instructors\/kentcdodds\x22\x3eegghead.io\x3c\/a\x3e, \x3ca href=\x22https:\/\/frontendmasters.com\/\x22\x3eFrontend Masters\x3c\/a\x3e, and \x3ca href=\x22https:\/\/workshop.me\/?a=kent\x22\x3eWorkshop.me\x3c\/a\x3e上是一名讲师. 并且我还是一名 \x3ca href=\x22https:\/\/developers.google.com\/experts\/people\/kent-c-dodds\x22\x3e谷歌开发者\x3c\/a\x3e. I’m 我幸福地结婚了，还有四个孩子的父亲。 我喜欢我的家人，喜欢编码，JavaScript和React.\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/react-s-new-context-api">https://www.zcfy.cc/article/react-s-new-context-api</a> 原文标题: React 新 Context API 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/a6086f2b/" target="_blank">https://alili.tech/archive/a6086f2b/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>