<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用Canvas操作像素"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用Canvas操作像素 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/b06c3a33/",
				"appid": "1613049289050283", 
				"title": "使用Canvas操作像素 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-18T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/6a382fec/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/855c5353/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&text=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&text=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&title=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&is_video=false&description=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&title=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&title=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&title=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb06c3a33%2f&title=%e4%bd%bf%e7%94%a8Canvas%e6%93%8d%e4%bd%9c%e5%83%8f%e7%b4%a0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用Canvas操作像素</h1><div class="meta"><div class="postdate"><time datetime="2018-10-18" itemprop="datePublished">2018-10-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3e现代浏览器支持通过\x3ccode\x3e\x26lt;video\x26gt;\x3c\/code\x3e元素播放视频。大多数浏览器也可以通过\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/MediaDevices\/getUserMedia\x22\x3eMediaDevices.getUserMedia()\x3c\/a\x3e API访问摄像头。但即使这两件事结合起来，我们也无法直接访问和操纵这些像素。\x3c\/p\x3e\n\x3cp\x3e幸运的是，浏览器有一个\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Canvas_API\x22\x3eCanvas API\x3c\/a\x3e，允许我们使用JavaScript绘制图形。实际上，我们可以从视频本身将图像绘制到\x3ccode\x3e\x26lt;canvas\x26gt;\x3c\/code\x3e，这使我们能够操作和展示这些像素。\x3c\/p\x3e\n\x3cp\x3e您在此学到的关于如何操作像素的方法，将成为您提供处理任何种类或任何来源的图像和视频的基础，而不仅仅是 canvas。\x3c\/p\x3e\n\x3ch3\x3e将图像添加到画布\x3c\/h3\x3e\n\x3cp\x3e在我们开始播放视频之前，让我们看看如何将图像添加到画布。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Canvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22video\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们创建了一个图像元素来表示要在画布上绘制的图像。或者，我们可以在JavaScript中使用Image对象。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs maxima\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e canvas;\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e;\n\nfunction init() {\n  \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e = document.getElementById(\x27SourceImage\x27);\n  canvas = document.getElementById(\x27Canvas\x27);\n  \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e = canvas.getContext(\x272d\x27);\n\n  drawImage(\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e);\n  \/\/ Or\n  \/\/ \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e Image();\n  \/\/ \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.onload = function () {\n  \/\/    drawImage(\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e);\n  \/\/ }\n  \/\/ \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.src = \x27\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.jpg\x27;\n}\n\nfunction drawImage(\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e) {\n  \/\/ Set the canvas the same \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eand\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e of the \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e\n  canvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n  canvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.drawImage(\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\nwindow.addEventListener(\x27\x3cspan class=\x22hljs-built_in\x22\x3eload\x3c\/span\x3e\x27, init);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的代码将整个图像绘制到画布上。\x3c\/p\x3e\n\x3cp\x3e通过\x3ca href=\x22https:\/\/codepen.io\x22\x3eCodePen\x3c\/a\x3e上的Welling Guzman（(\x3ca href=\x22https:\/\/codepen.io\/wellingguzman\x22\x3e@wellingguzman\x3c\/a\x3e）查看画布上的 \x3ca href=\x22https:\/\/codepen.io\/wellingguzman\/pen\/yjEYYX\/\x22\x3ePaint image on canvas\x3c\/a\x3e 图像。\x3c\/p\x3e\n\x3cp\x3e现在我们可以开始玩这些像素了！\x3c\/p\x3e\n\x3ch3\x3e更新图像数据\x3c\/h3\x3e\n\x3cp\x3e画布上的图像数据允许我们操纵和更改像素。\x3c\/p\x3e\n\x3cp\x3edata属性是一个\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/ImageData\x22\x3eImageData\x3c\/a\x3e 对象，它具有三个属性 - 宽度，高度和数据\/所有这些都代表基于原始图像的东西。所有这些属性都是只读的。我们关心的是数据，一个由\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Uint8ClampedArray\x22\x3eUint8ClampedArray\x3c\/a\x3e 对象表示的一维数组，包含RGBA格式中每个像素的数据。\x3c\/p\x3e\n\x3cp\x3e尽管数据属性是只读的，但并不意味着我们无法更改其值。这意味着我们不能将另一个数组分配给此属性。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs arduino\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Get the canvas image data\x3c\/span\x3e\nvar imageData = context.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e, canvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.data = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Uint8ClampedArray(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ WRONG\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e.data[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ CORRECT\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你可能会问，Uint8ClampedArray对象代表什么值。以下是来自MDN的描述：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e\x3cstrong\x3e Uint8ClampedArray \x3c\/strong\x3e 类型数组表示一个8位无符号整数的数组，它被钳位到0-255;如果您指定的值超出[0,255]的范围，则将设置0或255;如果你指定一个非整数，最近的整数将被设置。内容初始化为0.一旦建立，就可以使用对象的方法引用数组中的元素，或使用标准数组索引语法（即使用括号表示法）\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e简而言之，这个数组在每个位置存储范围从0到255的值，这使得它成为RGBA格式的完美解决方案，因为每个部分都由0到255个值表示。\x3c\/p\x3e\n\x3ch4\x3eRGBA颜色\x3c\/h4\x3e\n\x3cp\x3e颜色可以用RGBA格式表示，它是红色，绿色和蓝色的组合。 A表示颜色不透明度的α值。\x3c\/p\x3e\n\x3cp\x3e数组中的每个位置代表一个颜色（像素）通道值。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e第一个位置是红色值\x3c\/li\x3e\n\x3cli\x3e第二个位置是绿色值\x3c\/li\x3e\n\x3cli\x3e第三个位置是蓝色值\x3c\/li\x3e\n\x3cli\x3e第四个位置是Alpha值\x3c\/li\x3e\n\x3cli\x3e第5个位置是下一个像素红色值\x3c\/li\x3e\n\x3cli\x3e第6个位置是下一个像素的绿色值\x3c\/li\x3e\n\x3cli\x3e第7个位置是下一个像素的蓝色值\x3c\/li\x3e\n\x3cli\x3e第8个位置是下一个像素Alpha值\x3c\/li\x3e\n\x3cli\x3e等等...\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e如果您有2x2图像，那么我们有一个16位阵列（每个2x2像素x 4值）。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22http:\/\/s0.qhres.com\/static\/7cc6f407b21e4a93.css\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e2x2图像缩小了\x3c\/p\x3e\n\x3cp\x3e该数组将如下所示：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ RED                 GREEN                BLUE                 WHITE\x3c\/span\x3e\n[ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e,      \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e,      \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e,      \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e]\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e更改像素数据\x3c\/h4\x3e\n\x3cp\x3e我们可以做的最快的事情之一是通过将所有RGBA值更改为255来将所有像素设置为白色。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Use a button to trigger the \x22effect\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e button = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27Button\x27\x3c\/span\x3e);\n\nbutton.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, onClick);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3echangeToWhite\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edata\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; data.length; i\x2b\x2b) {\n    data[i] = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e;\n  }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eonClick\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e imageData = context.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n  changeToWhite(imageData.data);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Update the canvas with the new data\x3c\/span\x3e\n  context.putImageData(imageData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e数据将作为参考传递，这意味着我们对它做出的任何修改，它都会改变传递参数的值。\x3c\/p\x3e\n\x3ch4\x3e反转颜色\x3c\/h4\x3e\n\x3cp\x3e不需要太多计算的好效果就是反转图像的颜色。\x3c\/p\x3e\n\x3cp\x3e可以使用XOR运算符（^）或此公式255 - 值（值必须介于0-255之间）来反转颜色值。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3efunction invertColors(data) {\n  for (var i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; data.length; i\x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n    data[i] = data[i] ^ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Invert Red\x3c\/span\x3e\n    data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] ^ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Invert Green\x3c\/span\x3e\n    data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] ^ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Invert Blue\x3c\/span\x3e\n  }\n}\n\nfunction onClick() {\n  var imageData = context.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n  invertColors(imageData.data);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Update the canvas with the new data\x3c\/span\x3e\n  context.putImageData(imageData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们正在像前面那样将循环增加4而不是1，所以我们可以从像素到像素，每个像素填充数组中的4个元素。\x3c\/p\x3e\n\x3cp\x3ealpha值对反转颜色没有影响，所以我们跳过它。\x3c\/p\x3e\n\x3ch4\x3e亮度和对比度\x3c\/h4\x3e\n\x3cp\x3e使用下面的公式可以调整图像的亮度：newValue = currentValue \x2b 255 *（brightness \/ 100）。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e亮度必须介于-100和100之间\x3c\/li\x3e\n\x3cli\x3ecurrentValue是红色，绿色或蓝色的当前光照值。\x3c\/li\x3e\n\x3cli\x3enewValue是当前颜色灯加亮度的结果\x3c\/li\x3e\n\x3cli\x3e调整图像的对比度可以用这个\x3ca href=\x22http:\/\/www.dfstudios.co.uk\/articles\/image-processing-algorithms-part-5\x22\x3e公式\x3c\/a\x3e来完成：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lisp\x22\x3efactor = (\x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e * (contrast \x2b 255)) \/ (255 * (\x3cspan class=\x22hljs-number\x22\x3e259\x3c\/span\x3e - contrast))\ncolor = GetPixelColor(\x3cspan class=\x22hljs-name\x22\x3ex\x3c\/span\x3e, y)\nnewRed   = Truncate(\x3cspan class=\x22hljs-name\x22\x3efactor\x3c\/span\x3e * (Red(color)   - 128) \x2b 128)\nnewGreen = Truncate(factor * (\x3cspan class=\x22hljs-name\x22\x3eGreen\x3c\/span\x3e(\x3cspan class=\x22hljs-name\x22\x3ecolor\x3c\/span\x3e) - \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e)\nnewBlue  = Truncate(\x3cspan class=\x22hljs-name\x22\x3efactor\x3c\/span\x3e * (Blue(color)  - 128) \x2b 128)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e主要计算是获取将应用于每个颜色值的对比度因子。截断是一个确保值保持在0到255之间的函数。\x3c\/p\x3e\n\x3cp\x3e让我们将这些函数写入JavaScript：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3efunction applyBrightness(data, brightness) {\n  for (var i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; data.length; i\x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n    data[i] \x2b= \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e * (brightness \/ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n    data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x2b= \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e * (brightness \/ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n    data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] \x2b= \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e * (brightness \/ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n  }\n}\n\nfunction truncateColor(value) {\n  if (value \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n    value = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  } else if (value \x26gt; \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e) {\n    value = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e;\n  }\n\n  return value;\n}\n\nfunction applyContrast(data, contrast) {\n  var factor = (\x3cspan class=\x22hljs-number\x22\x3e259.0\x3c\/span\x3e * (contrast \x2b \x3cspan class=\x22hljs-number\x22\x3e255.0\x3c\/span\x3e)) \/ (\x3cspan class=\x22hljs-number\x22\x3e255.0\x3c\/span\x3e * (\x3cspan class=\x22hljs-number\x22\x3e259.0\x3c\/span\x3e - contrast));\n\n  for (var i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; data.length; i\x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n    data[i] = truncateColor(factor * (data[i] - \x3cspan class=\x22hljs-number\x22\x3e128.0\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-number\x22\x3e128.0\x3c\/span\x3e);\n    data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = truncateColor(factor * (data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] - \x3cspan class=\x22hljs-number\x22\x3e128.0\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-number\x22\x3e128.0\x3c\/span\x3e);\n    data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = truncateColor(factor * (data[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] - \x3cspan class=\x22hljs-number\x22\x3e128.0\x3c\/span\x3e) \x2b \x3cspan class=\x22hljs-number\x22\x3e128.0\x3c\/span\x3e);\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这种情况下，您不需要truncateColor函数，因为Uint8ClampedArray会截断这些值，但为了翻译我们在其中添加的算法。\x3c\/p\x3e\n\x3cp\x3e需要记住的一点是，如果应用亮度或对比度，则图像数据被覆盖后无法回到之前的状态。如果我们想要重置为原始状态，则原始图像数据必须单独存储以供参考。保持图像变量对其他函数可访问将会很有帮助，因为您可以使用该图像来重绘画布和原始图像。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e image = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27SourceImage\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eredrawImage\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  context.drawImage(image, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3\x3e使用视频\x3c\/h3\x3e\n\x3cp\x3e为了使它适用于视频，我们将采用我们的初始图像脚本和HTML代码并做一些小的修改。\x3c\/p\x3e\n\x3ch4\x3eHTML\x3c\/h4\x3e\n\x3cp\x3e通过替换以下行来更改视频元素的Image元素：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs stylus\x22\x3e\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e src\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e...with this:\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs apache\x22\x3e\x3cspan class=\x22hljs-section\x22\x3e\x26lt;video src\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-section\x22\x3e\x26lt;\/video\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eJavaScript\x3c\/h4\x3e\n\x3cp\x3e替换这一行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dart\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e image = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27SourceImage\x27\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e...添加这行：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dart\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e video = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27SourceVideo\x27\x3c\/span\x3e);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e要开始处理视频，我们必须等到视频可以播放。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs actionscript\x22\x3evideo.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27canplay\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Set the canvas the same width and height of the video\x3c\/span\x3e\n    canvas.width = video.videoWidth;\n    canvas.height = video.videoHeight;    \n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Play the video\x3c\/span\x3e\n    video.play();\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ start drawing the frames  \x3c\/span\x3e\n    drawFrame(video);\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当有足够的数据可以播放媒体时，至少在几帧内播放事件播放。\x3c\/p\x3e\n\x3cp\x3e我们无法看到画布上显示的任何视频，因为我们只显示第一帧。我们必须每n毫秒执行一次drawFrame以跟上视频帧速率。\x3c\/p\x3e\n\x3cp\x3e在drawFrame内部，我们每10ms再次调用drawFrame。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs actionscript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(video)\x3c\/span\x3e \x3c\/span\x3e{\n  context.drawImage(video, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\n  setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    drawFrame(video);\n  }, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在执行drawFrame之后，我们创建一个循环，每10ms执行一次drawFrame - 足够的时间让视频在画布中保持同步。\x3c\/p\x3e\n\x3ch4\x3e将效果添加到视频\x3c\/h4\x3e\n\x3cp\x3e我们可以使用我们之前创建的相同函数来反转颜色：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs kotlin\x22\x3efunction invertColors(\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e) {\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.length; i\x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i] = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i] ^ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Invert Red\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] ^ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Invert Green\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] ^ \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Invert Blue\x3c\/span\x3e\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e并将其添加到drawFrame函数中：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs mipsasm\x22\x3efunction drawFrame(video) {\n  \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.drawImage(video, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n  var imageData = \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  invertColors(imageData\x3cspan class=\x22hljs-meta\x22\x3e.data\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.putImageData(imageData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n  setTimeout(function () {\n    drawFrame(video)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  }, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以添加一个按钮并切换效果：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs mipsasm\x22\x3efunction drawFrame(video) {\n  \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.drawImage(video, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n\n  if (applyEffect) {\n    var imageData = \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    invertColors(imageData\x3cspan class=\x22hljs-meta\x22\x3e.data\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.putImageData(imageData, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  }\n\n  setTimeout(function () {\n    drawFrame(video)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n  }, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3\x3e使用 camera\x3c\/h3\x3e\n\x3cp\x3e我们将保留我们用于视频的相同代码，唯一不同的是我们将使用MediaDevices.getUserMedia将视频流从文件更改为相机流。\x3c\/p\x3e\n\x3cp\x3eMediaDevices.getUserMedia是弃用先前API MediaDevices.getUserMedia（）的新API。浏览器仍旧支持旧版本，并且某些浏览器不支持新版本，我们必须求助于polyfill以确保浏览器支持其中一种。\x3c\/p\x3e\n\x3cp\x3e首先，从视频元素中删除src属性：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs php\x22\x3e\x26lt;video\x26gt;\x26lt;code\x26gt;\x26lt;\/pre\x26gt;\n\n\x26lt;pre\x26gt;\x26lt;code\x26gt;\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Set the source of the video to the camera stream\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einitCamera\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(stream)\x3c\/span\x3e \x3c\/span\x3e{\n    video.src = window.URL.createObjectURL(stream);\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (navigator.mediaDevices.getUserMedia) {\n  navigator.mediaDevices.getUserMedia({video: \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, audio: \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e})\n    .then(initCamera)\n    .\x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(console.error)\n  );\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/wellingguzman\/pen\/MGXGQR\x22\x3eLive Demo\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3\x3e效果\x3c\/h3\x3e\n\x3cp\x3e到目前为止，我们所介绍的所有内容都是我们需要的基础，以便为视频或图像创建不同的效果。我们可以通过独立转换每种颜色来使用很多不同的效果。\x3c\/p\x3e\n\x3ch4\x3e灰阶\x3c\/h4\x3e\n\x3cp\x3e将颜色转换为灰度可以使用不同的公式\/技巧以不同的方式完成，以避免陷入太深的问题我将向您展示基于 \x3ca href=\x22https:\/\/docs.gimp.org\/2.6\/en\/gimp-tool-desaturate.html\x22\x3eGIMP desaturate tool\x3c\/a\x3e去饱和工具和\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Grayscale#Luma_coding_in_video_systems\x22\x3eLuma\x3c\/a\x3e的五个公式：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3eGray = \x3cspan class=\x22hljs-number\x22\x3e0.21\x3c\/span\x3eR \x2b \x3cspan class=\x22hljs-number\x22\x3e0.72\x3c\/span\x3eG \x2b \x3cspan class=\x22hljs-number\x22\x3e0.07\x3c\/span\x3eB \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Luminosity\x3c\/span\x3e\nGray = (R \x2b G \x2b B) ÷ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Average Brightness\x3c\/span\x3e\nGray = \x3cspan class=\x22hljs-number\x22\x3e0.299\x3c\/span\x3eR \x2b \x3cspan class=\x22hljs-number\x22\x3e0.587\x3c\/span\x3eG \x2b \x3cspan class=\x22hljs-number\x22\x3e0.114\x3c\/span\x3eB \x3cspan class=\x22hljs-comment\x22\x3e\/\/ rec601 standard\x3c\/span\x3e\nGray = \x3cspan class=\x22hljs-number\x22\x3e0.2126\x3c\/span\x3eR \x2b \x3cspan class=\x22hljs-number\x22\x3e0.7152\x3c\/span\x3eG \x2b \x3cspan class=\x22hljs-number\x22\x3e0.0722\x3c\/span\x3eB \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ITU-R BT.709 standard\x3c\/span\x3e\nGray = \x3cspan class=\x22hljs-number\x22\x3e0.2627\x3c\/span\x3eR \x2b \x3cspan class=\x22hljs-number\x22\x3e0.6780\x3c\/span\x3eG \x2b \x3cspan class=\x22hljs-number\x22\x3e0.0593\x3c\/span\x3eB \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ITU-R BT.2100 standard\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们想要使用这些公式找到的是每个像素颜色的亮度等级。该值的范围从0（黑色）到255（白色）。这些值将创建灰度（黑白）效果。\x3c\/p\x3e\n\x3cp\x3e这意味着最亮的颜色将最接近255，最暗的颜色最接近0。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/wellingguzman\/pen\/oybBOb\x22\x3eLive Demo\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e双色调\x3c\/h4\x3e\n\x3cp\x3e双色调效果和灰度效果的区别在于使用了两种颜色。在灰度上，您有一个从黑色到白色的渐变色，而在双色调中，您可以从任何颜色到任何其他颜色（从蓝色到粉红色）都有一个渐变。\x3c\/p\x3e\n\x3cp\x3e使用灰度的强度值，我们可以将其替换为梯度值。\x3c\/p\x3e\n\x3cp\x3e我们需要创建一个从ColorA到ColorB的渐变。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateGradient\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecolorA, colorB\x3c\/span\x3e) \x3c\/span\x3e{   \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Values of the gradient from colorA to colorB\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gradient = [];\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ the maximum color value is 255\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e maxValue = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Convert the hex color values to RGB object\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e = getRGBColor(colorA);\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e to = getRGBColor(colorB);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Creates 256 colors from Color A to Color B\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt;= maxValue; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ IntensityB will go from 0 to 255\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ IntensityA will go from 255 to 0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ IntensityA will decrease intensity while instensityB will increase\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ What this means is that ColorA will start solid and slowly transform into ColorB\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ If you look at it in other way the transparency of color A will increase and the transparency of color B will decrease\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e intensityB = i;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e intensityA = maxValue - intensityB;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ The formula below combines the two color based on their intensity\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (IntensityA * ColorA \x2b IntensityB * ColorB) \/ maxValue\x3c\/span\x3e\n    gradient[i] = {\n      \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: (intensityA*\x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e.r \x2b intensityB*to.r) \/ maxValue,\n      \x3cspan class=\x22hljs-attr\x22\x3eg\x3c\/span\x3e: (intensityA*\x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e.g \x2b intensityB*to.g) \/ maxValue,\n      \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: (intensityA*\x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e.b \x2b intensityB*to.b) \/ maxValue\n    };\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e gradient;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Helper function to convert 6digit hex values to a RGB color object\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetRGBColor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ehex\x3c\/span\x3e)\n\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e colorValue;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (hex[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27#\x27\x3c\/span\x3e) {\n    hex = hex.substr(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  }\n\n  colorValue = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(hex, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e);\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: colorValue \x26gt;\x26gt; \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eg\x3c\/span\x3e: (colorValue \x26gt;\x26gt; \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e) \x26amp; \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: colorValue \x26amp; \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简而言之，我们从颜色A创建一组颜色值，降低强度，同时转到颜色B并增加强度。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e从 #0096ff 到 #ff00f0\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e缩放颜色过渡的表示\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs groovy\x22\x3evar gradients = [\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e144\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e254\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e41\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e125\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e253\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e65\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e112\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e251\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e91\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e96\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e118\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e81\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e248\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e145\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e65\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e246\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e172\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e49\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e245\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e197\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e34\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e244\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e220\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e21\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e242\x3c\/span\x3e},\n  {\x3cspan class=\x22hljs-string\x22\x3er:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e241\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3eb:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e242\x3c\/span\x3e},\n];\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面有一个从＃0096ff到＃ff00f0的10个颜色值的渐变示例。\x3c\/p\x3e\n\x3cp\x3e\x3cimg src=\x22\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3cp\x3e颜色过渡的灰度表示\x3c\/p\x3e\n\x3cp\x3e现在我们已经有了图像的灰度表示，我们可以使用它将其映射到双色调渐变值。\x3c\/p\x3e\n\x3cp\x3eThe duotone gradient has 256 colors while the grayscale has also 256 colors ranging from black (0) to white (255). That means a grayscale color value will map to a gradient element index.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs kotlin\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e gradientColors = createGradient(\x3cspan class=\x22hljs-string\x22\x3e\x27#0096ff\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#ff00f0\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e imageData = context.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\napplyGradient(imageData.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.length; i \x2b= \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Get the each channel color value\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e redValue = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i];\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e greenValue = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e blueValue = \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Mapping the color values to the gradient index\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Replacing the grayscale color value with a color for the duotone gradient\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i] = gradientColors[redValue].r;\n  \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = gradientColors[greenValue].g;\n  \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] = gradientColors[blueValue].b;\n  \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e[i\x2b\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e] = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/codepen.io\/wellingguzman\/pen\/GGoWaY\x22\x3eLive Demo\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3\x3e结论\x3c\/h3\x3e\n\x3cp\x3e这个主题可以更深入或解释更多的影响。为你做的功课是找到可以应用于这些骨架示例的不同算法。\x3c\/p\x3e\n\x3cp\x3e了解像素在画布上的结构将允许您创建无限数量的效果，如棕褐色，混色，绿色屏幕效果，图像闪烁\/毛刺等。\x3c\/p\x3e\n\x3cp\x3e您甚至可以在不使用图像或视频的情况下即时创建效果：\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/manipulating-pixels-using-canvas">https://www.zcfy.cc/article/manipulating-pixels-using-canvas</a> 原文标题: 使用Canvas操作像素 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/b06c3a33/" target="_blank">https://alili.tech/archive/b06c3a33/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>