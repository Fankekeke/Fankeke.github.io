<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vuejs2.0 高级实战 全网稀缺 独立开发专属音乐WebAPP 更新中。。。"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vuejs2.0 高级实战 全网稀缺 独立开发专属音乐WebAPP 更新中。。。 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/b588ec07/",
				"appid": "1613049289050283", 
				"title": "vuejs2.0 高级实战 全网稀缺 独立开发专属音乐WebAPP 更新中。。。 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-11-15T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/3cff5f71/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/355c0120/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&text=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&text=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&title=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&is_video=false&description=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&title=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&title=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&title=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb588ec07%2f&title=vuejs2.0%20%e9%ab%98%e7%ba%a7%e5%ae%9e%e6%88%98%20%e5%85%a8%e7%bd%91%e7%a8%80%e7%bc%ba%20%e7%8b%ac%e7%ab%8b%e5%bc%80%e5%8f%91%e4%b8%93%e5%b1%9e%e9%9f%b3%e4%b9%90WebAPP%20%e6%9b%b4%e6%96%b0%e4%b8%ad%e3%80%82%e3%80%82%e3%80%82"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vuejs2.0 高级实战 全网稀缺 独立开发专属音乐WebAPP 更新中。。。</h1><div class="meta"><div class="postdate"><time datetime="2018-11-15" itemprop="datePublished">2018-11-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016137167?w=1013\x26amp;h=573\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016137167?w=1013\x26amp;h=573\x22 alt=\x22\x26#x8FD9;\x26#x91CC;\x26#x5199;\x26#x56FE;\x26#x7247;\x26#x63CF;\x26#x8FF0;\x22 title=\x22\x26#x8FD9;\x26#x91CC;\x26#x5199;\x26#x56FE;\x26#x7247;\x26#x63CF;\x26#x8FF0;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3cp\x3e\x3cstrong\x3e\x26#x8BCD;\x26#x6761;\x3c\/strong\x3e\x3c\/p\x3e\x3cp\x3e\x26#x76EE;\x26#x524D;\x26#x5E02;\x26#x9762;\x26#x4E0A;\x26#x8FD8;\x26#x6CA1;\x26#x6709;\x26#x4E00;\x26#x4E2A;Vue 2.0 \x26#x7684;\x26#x9AD8;\x26#x7EA7;\x26#x6559;\x26#x5B66;\x26#xFF0C;\x26#x90FD;\x26#x662F;\x26#x4E00;\x26#x4E9B;\x26#x57FA;\x26#x7840;\x26#x7684;\x26#x5165;\x26#x95E8;\x26#x8BFE;\x26#x7A0B;\x26#xFF0C;\x26#x4F60;\x26#x5F88;\x26#x96BE;\x26#x627E;\x26#x5230;\x26#x4E00;\x26#x4E2A;\x26#x57FA;\x26#x4E8E;Vue.js\x26#x7684;\x26#x590D;\x26#x6742;\x26#x5E94;\x26#x7528;\x26#x7684;\x26#x6559;\x26#x5B66;\x26#xFF0C; \x26#x4F46;\x26#x662F;\x26#xFF0C;\x26#x6211;\x26#x4EEC;\x26#x4E3A;\x26#x4F60;\x26#x51C6;\x26#x5907;\x26#x4E86;\x26#x8FD9;\x26#x95E8;\x26#x72EC;\x26#x4E00;\x26#x65E0;\x26#x4E8C;\x26#x7684;Vue 2.0 \x26#x9AD8;\x26#x7EA7;\x26#x5B9E;\x26#x6218;\x26#x8BFE;\x26#x7A0B;\x3c\/p\x3e\x3chr\x3e\x3cp\x3e\x3cstrong\x3esrc\x26#x7B80;\x26#x5355;\x26#x7684;\x26#x4ECB;\x26#x7ECD;\x3c\/strong\x3e\x3c\/p\x3e\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000016137168?w=267\x26amp;h=451\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000016137168?w=267\x26amp;h=451\x22 alt=\x22\x26#x8FD9;\x26#x91CC;\x26#x5199;\x26#x56FE;\x26#x7247;\x26#x63CF;\x26#x8FF0;\x22 title=\x22\x26#x8FD9;\x26#x91CC;\x26#x5199;\x26#x56FE;\x26#x7247;\x26#x63CF;\x26#x8FF0;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\x3cp\x3e\x3cstrong\x3e\x26#x5165;\x26#x53E3;\x26#x6587;\x26#x4EF6;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3eimport \x26apos;babel-polyfill\x26apos;  \/\/\x26#x5199;\x26#x5728;\x26#x7B2C;\x26#x4E00;\x26#x4F4D;\nimport Vue from \x26apos;vue\x26apos;\nimport App from \x26apos;.\/App\x26apos;\nimport router from \x26apos;.\/router\x26apos;\nimport fastclick from \x26apos;fastclick\x26apos;\nimport VueLazyload from \x26apos;vue-lazyload\x26apos;\nimport store from \x26apos;.\/store\x26apos;\n\nimport \x26apos;common\/stylus\/index.styl\x26apos;\n\n\/* eslint-disable no-unused-vars *\/\n\/\/ import vConsole from \x26apos;vconsole\x26apos;\n\nfastclick.attach(document.body)\n\nVue.use(VueLazyload, {\n  loading: require(\x26apos;common\/image\/default.png\x26apos;)  \/\/\x26#x4F20;\x26#x4E00;\x26#x4E2A;\x26#x9ED8;\x26#x8BA4;\x26#x53C2;\x26#x6570;\n})\n\n\/* eslint-disable no-new *\/\nnew Vue({\n  el: \x26apos;#app\x26apos;,\n  router,\n  store,\n  render: h =\x26gt; h(App)\n})\n\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3ebabel-polyfill\x26#x662F;es6\x26#x5E95;\x26#x5C42;\x26#x94FA;\x26#x57AB;\x26#x5373;\x26#x652F;\x26#x6301;\x26#x4E00;\x26#x4E9B;API\x26#xFF0C;\x26#x6BD4;\x26#x5982;promise\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3eTab\x26#x9875;\x26#x9762;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;tab\x26quot;\x26gt;\n    \x26lt;router-link tag=\x26quot;div\x26quot; class=\x26quot;tab-item\x26quot; to=\x26quot;\/recommend\x26quot;\x26gt;\n      \x26lt;span class=\x26quot;tab-link\x26quot;\x26gt;\x26#x63A8;\x26#x8350;\x26lt;\/span\x26gt;\n    \x26lt;\/router-link\x26gt;\n    \x26lt;router-link tag=\x26quot;div\x26quot; class=\x26quot;tab-item\x26quot; to=\x26quot;\/singer\x26quot;\x26gt;\n      \x26lt;span class=\x26quot;tab-link\x26quot;\x26gt;\x26#x6B4C;\x26#x624B;\x26lt;\/span\x26gt;\n    \x26lt;\/router-link\x26gt;\n    \x26lt;router-link tag=\x26quot;div\x26quot; class=\x26quot;tab-item\x26quot; to=\x26quot;\/rank\x26quot;\x26gt;\n      \x26lt;span class=\x26quot;tab-link\x26quot;\x26gt;\x26#x6392;\x26#x884C;\n      \x26lt;\/span\x26gt;\n    \x26lt;\/router-link\x26gt;\n    \x26lt;router-link tag=\x26quot;div\x26quot; class=\x26quot;tab-item\x26quot; to=\x26quot;\/search\x26quot;\x26gt;\n      \x26lt;span class=\x26quot;tab-link\x26quot;\x26gt;\x26#x641C;\x26#x7D22;\x26lt;\/span\x26gt;\n    \x26lt;\/router-link\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  export default {}\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e`router-link\x26#x9ED8;\x26#x8BA4;\x26#x662F;a\x26#x6807;\x26#x7B7E;\x26#xFF0C;\x26#x6211;\x26#x4EEC;\x26#x901A;\x26#x8FC7;tag\x26#x6307;\x26#x5B9A;\x26#x4E3A;div\x3cbr\x3e.router-link-active\x26#x8FD9;\x26#x4E2A;class\x26#x662F;\x26#x7EC4;\x26#x4EF6;\x26#x81EA;\x26#x5E26;\x26#x7684;`\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3eAPP.vue\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div id=\x26quot;app\x26quot; @touchmove.prevent\x26gt;\n    \x26lt;m-header\x26gt;\x26lt;\/m-header\x26gt;\n    \x26lt;tab\x26gt;\x26lt;\/tab\x26gt;\n    \x26lt;keep-alive\x26gt;\n      \x26lt;router-view\x26gt;\x26lt;\/router-view\x26gt;\n    \x26lt;\/keep-alive\x26gt;\n    \x26lt;player\x26gt;\x26lt;\/player\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  import MHeader from \x26apos;components\/m-header\/m-header\x26apos;\n  import Player from \x26apos;components\/player\/player\x26apos;\n  import Tab from \x26apos;components\/tab\/tab\x26apos;\n\n  export default {\n    components: {\n      MHeader,\n      Tab,\n      Player\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x4ED4;\x26#x7EC6;\x26#x7684;\x26#x770B;\x26#x4E00;\x26#x4E0B;\x26#x5F15;\x26#x5165;\x26#x7684;\x26#x7EC4;\x26#x4EF6;Tab\x26#x4EE5;\x26#x53CA;\x26#x4E00;\x26#x4E2A;\x26#x5E03;\x26#x5C40;\x26#x65B9;\x26#x5F0F;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3ejsonp\x26#x7684;\x26#x5C01;\x26#x88C5;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3eimport originJsonp from \x26apos;jsonp\x26apos;   \/\/jsonp \x26#x7ED3;\x26#x5408;promise \x26#x5C01;\x26#x88C5;\n\nexport default function jsonp(url, data, option) {\n  url \x2b= (url.indexOf(\x26apos;?\x26apos;) \x26lt; 0 ? \x26apos;?\x26apos; : \x26apos;\x26amp;\x26apos;) \x2b param(data)\n\n  return new Promise((resolve, reject) =\x26gt; {\n    originJsonp(url, option, (err, data) =\x26gt; {\n      if (!err) {\n        resolve(data)\n      } else {\n        reject(err)\n      }\n    })\n  })\n}\n\nexport function param(data) {\n  let url = \x26apos;\x26apos;\n  for (var k in data) {\n    let value = data[k] !== undefined ? data[k] : \x26apos;\x26apos;\n    url \x2b= \x26apos;\x26amp;\x26apos; \x2b k \x2b \x26apos;=\x26apos; \x2b encodeURIComponent(value)\n    \/\/\x26#x89C6;\x26#x9891;\x26#x4EE3;\x26#x7801; \n    \/\/url \x2b= `\x26amp;${k}=${encodeURIComponent(value)}`   es6\x26#x8BED;\x26#x6CD5;\n  }\n  return url ? url.substring(1) : \x26apos;\x26apos;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x91CD;\x26#x70B9;\x26#x5173;\x26#x6CE8;\x26#x4E00;\x26#x4E0B;URL\x26#x7684;\x26#x62FC;\x26#x63A5;\x26#x53EF;\x26#x4EE5;\x26#x7528;\x26#x5230;\x26#x9879;\x26#x76EE;\x26#x4E2D;\x3c\/code\x3e\x3c\/blockquote\x3e\x3chr\x3e\x3cp\x3e\x3cstrong\x3eAPI\/recommend.js \x26#x4F7F;\x26#x7528;jsonp \x26#x8C03;\x26#x53D6;\x26#x8F6E;\x26#x64AD;\x26#x56FE;\x26#x7684;\x26#x6570;\x26#x636E;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3eimport jsonp from \x26apos;common\/js\/jsonp\x26apos;\nimport {commonParams, options} from \x26apos;.\/config\x26apos;\n\nexport function getRecommend() {\n  const url = \x26apos;https:\/\/c.y.qq.com\/musichall\/fcgi-bin\/fcg_yqqhomepagerecommend.fcg\x26apos;\n\n  const data = Object.assign({}, commonParams, {  \/\/assign es6\x26#x8BED;\x26#x6CD5;\n    platform: \x26apos;h5\x26apos;,\n    uin: 0,\n    needNewCode: 1\n  })\n\n  return jsonp(url, data, options)\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x7528;\x26#x5230;\x26#x4E86;es6\x26#x5BF9;\x26#x8C61;\x26#x7684;\x26#x5408;\x26#x5E76;\x26#x65B9;\x26#x6CD5;Object.assign\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3econfig.js\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3eexport const commonParams = {\n  g_tk: 1928093487,\n  inCharset: \x26apos;utf-8\x26apos;,\n  outCharset: \x26apos;utf-8\x26apos;,\n  notice: 0,\n  format: \x26apos;jsonp\x26apos;\n}\n\nexport const options = {\n  param: \x26apos;jsonpCallback\x26apos;\n}\n\nexport const ERR_OK = 0\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x5B9A;\x26#x4E49;\x26#x4E00;\x26#x4E9B;\x26#x516C;\x26#x5171;\x26#x53C2;\x26#x6570;\x26#xFF0C;\x26#x4E0D;\x26#x7528;\x26#x6BCF;\x26#x6B21;\x26#x518D;\x26#x53BB;\x26#x91CD;\x26#x5199;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3ecomponents\/recommend.vue \x26#x5728;\x26#x7EC4;\x26#x4EF6;\x26#x4E2D;\x26#x8C03;\x26#x7528;\x26#x63A5;\x26#x53E3;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;div v-if=\x26quot;recommends.length\x26quot; class=\x26quot;slider-wrapper\x26quot; ref=\x26quot;sliderWrapper\x26quot;\x26gt;\n          \x26lt;slider\x26gt;\n            \x26lt;div v-for=\x26quot;item in recommends\x26quot;\x26gt;\n              \x26lt;a :href=\x26quot;item.linkUrl\x26quot;\x26gt;\n                \x26lt;img class=\x26quot;needsclick\x26quot; @load=\x26quot;loadImage\x26quot; :src=\x26quot;item.picUrl\x26quot;\x26gt;\n                \x26lt;!-- \x26#x5982;\x26#x679C;fastclick\x26#x76D1;\x26#x542C;\x26#x5230;\x26#x6709;class\x26#x4E3A;needsclick\x26#x5C31;\x26#x4E0D;\x26#x4F1A;\x26#x62E6;\x26#x622A; --\x26gt;\n              \x26lt;\/a\x26gt;\n            \x26lt;\/div\x26gt;\n          \x26lt;\/slider\x26gt;\n        \x26lt;\/div\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e`\x26#x8FD9;\x26#x91CC;\x26#x7528;\x26#x5230;\x26#x4E86;slider\x26#x7EC4;\x26#x4EF6;\x26#x4EE5;\x26#x53CA;slot\x26#x7684;\x26#x77E5;\x26#x8BC6;\x26#xFF0C;\x26#x4E5F;\x26#x9047;\x26#x5230;\x26#x4E86;\x26#x4E00;\x26#x4E2A;\x26#x5751;\x26#xFF0C;\x26#x56E0;\x26#x4E3A;\x26#x6570;\x26#x636E;\x26#x54CD;\x26#x5E94;\x3cbr\x3e\x26#x5FC5;\x26#x987B;\x26#x786E;\x26#x5B9A;\x26#x6709;\x26#x6570;\x26#x636E;v-if=\x26quot;recommends.length\x26quot;\x26#x624D;\x26#x80FD;\x26#x4FDD;\x26#x8BC1;\x26#x63D2;\x26#x69FD;\x26#x7684;\x26#x6B63;\x26#x786E;\x26#x663E;\x26#x793A;`\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3eexport default {\n    data() {\n      return {\n        recommends: []\n      }\n    },\n    created() {\n      this._getRecommend()\n    },\n    methods: {\n      \n      _getRecommend() {\n        getRecommend().then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.recommends = res.data.slider\n          }\n        })\n      }\n    },\n    components: {\n      Slider\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;div class=\x26quot;recommend-list\x26quot;\x26gt;\n          \x26lt;h1 class=\x26quot;list-title\x26quot;\x26gt;\x26#x70ED;\x26#x95E8;\x26#x6B4C;\x26#x5355;\x26#x63A8;\x26#x8350;\x26lt;\/h1\x26gt;\n          \x26lt;ul\x26gt;\n            \x26lt;li @click=\x26quot;selectItem(item)\x26quot; v-for=\x26quot;item in discList\x26quot; class=\x26quot;item\x26quot;\x26gt;\n              \x26lt;div class=\x26quot;icon\x26quot;\x26gt;\n                \x26lt;img width=\x26quot;60\x26quot; height=\x26quot;60\x26quot; v-lazy=\x26quot;item.imgurl\x26quot;\x26gt;\n              \x26lt;\/div\x26gt;\n              \x26lt;div class=\x26quot;text\x26quot;\x26gt;\n                \x26lt;h2 class=\x26quot;name\x26quot; v-html=\x26quot;item.creator.name\x26quot;\x26gt;\x26lt;\/h2\x26gt;\n                \x26lt;p class=\x26quot;desc\x26quot; v-html=\x26quot;item.dissname\x26quot;\x26gt;\x26lt;\/p\x26gt;\n              \x26lt;\/div\x26gt;\n            \x26lt;\/li\x26gt;\n          \x26lt;\/ul\x26gt;\n        \x26lt;\/div\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  import Slider from \x26apos;base\/slider\/slider\x26apos;\n  import Loading from \x26apos;base\/loading\/loading\x26apos;\n  import Scroll from \x26apos;base\/scroll\/scroll\x26apos;\n  import {getRecommend, getDiscList} from \x26apos;api\/recommend\x26apos;\n\n  import {ERR_OK} from \x26apos;api\/config\x26apos;\n  \n\n  export default {\n\n    data() {\n      return {\n        recommends: [],\n        discList: []\n      }\n    },\n    created() {\n      this._getRecommend()\n\n      this._getDiscList()  \/\/\x26#x70ED;\x26#x95E8;\x26#x6B4C;\x26#x5355;\x26#x83B7;\x26#x53D6;\n    },\n    methods: {\n      \n     \n      _getRecommend() {\n        getRecommend().then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.recommends = res.data.slider\n          }\n        })\n      },\n      _getDiscList() {\n        getDiscList().then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.discList = res.data.list\n          }\n        })\n      },\n     \n    },\n    components: {\n      Slider,\n      Loading,\n      Scroll\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x5728;\x26#x8FD9;\x26#x91CC;\x26#x6CA1;\x26#x6709;\x26#x7528;jsonp\x26#x800C;\x26#x662F;\x26#x7528;\x26#x4E86;axios,\x26#x662F;\x26#x56E0;\x26#x4E3A;\x26#x63A5;\x26#x53E3;\x26#x6709;host\x26#x3001;referer\x26#x6821;\x26#x9A8C;\x26#x4E0D;\x26#x5F97;\x26#x4F7F;\x26#x7528;\x26#x540E;\x26#x7AEF;\x26#x4EE3;\x26#x7406;\x26#x63A5;\x26#x53E3;\x26#x7684;\x26#x65B9;\x26#x5F0F;\x26#x53BB;\x26#x5904;\x26#x7406;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3ebulid\x26#x76EE;\x26#x5F55;\x26#x4E0B;dev-server.js\x26#x5904;\x26#x7406;\x26#x4EE3;\x26#x7406;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3erequire(\x26apos;.\/check-versions\x26apos;)()\n\nvar config = require(\x26apos;..\/config\x26apos;)\nif (!process.env.NODE_ENV) {\n  process.env.NODE_ENV = JSON.parse(config.dev.env.NODE_ENV)\n}\n\nvar opn = require(\x26apos;opn\x26apos;)\nvar path = require(\x26apos;path\x26apos;)\nvar express = require(\x26apos;express\x26apos;)\nvar webpack = require(\x26apos;webpack\x26apos;)\nvar proxyMiddleware = require(\x26apos;http-proxy-middleware\x26apos;)\nvar webpackConfig = require(\x26apos;.\/webpack.dev.conf\x26apos;)\nvar axios = require(\x26apos;axios\x26apos;) \/\/\x26#x7B2C;\x26#x4E00;\x26#x6B65;\n\n\/\/ default port where dev server listens for incoming traffic\nvar port = process.env.PORT || config.dev.port\n\/\/ automatically open browser, if not set will be false\nvar autoOpenBrowser = !!config.dev.autoOpenBrowser\n\/\/ Define HTTP proxies to your custom API backend\n\/\/ https:\/\/github.com\/chimurai\/http-proxy-middleware\nvar proxyTable = config.dev.proxyTable\n\nvar app = express()\n\nvar apiRoutes = express.Router()   \/\/\x26#x4EE5;\x26#x4E0B;\x26#x662F;\x26#x540E;\x26#x7AEF;\x26#x4EE3;\x26#x7406;\x26#x63A5;\x26#x53E3; \x26#x7B2C;\x26#x4E8C;\x26#x6B65;\n\napiRoutes.get(\x26apos;\/getDiscList\x26apos;, function (req, res) {\n  var url = \x26apos;https:\/\/c.y.qq.com\/splcloud\/fcgi-bin\/fcg_get_diss_by_tag.fcg\x26apos;\n  axios.get(url, {\n    headers: {\n      referer: \x26apos;https:\/\/c.y.qq.com\/\x26apos;,\n      host: \x26apos;c.y.qq.com\x26apos;\n    },\n    params: req.query\n  }).then((response) =\x26gt; {\n    res.json(response.data)  \/\/\x26#x8F93;\x26#x51FA;\x26#x5230;\x26#x6D4F;\x26#x89C8;\x26#x5668;\x26#x7684;res\n  }).catch((e) =\x26gt; {\n    console.log(e)\n  })\n})\n\napiRoutes.get(\x26apos;\/lyric\x26apos;, function (req, res) {  \/\/\x26#x8FD9;\x26#x662F;\x26#x53E6;\x26#x4E00;\x26#x4E2A;\x26#x63A5;\x26#x53E3;\x26#x4E0B;\x26#x8282;\x26#x5C06;\x26#x7528;\x26#x5230;\n  var url = \x26apos;https:\/\/c.y.qq.com\/lyric\/fcgi-bin\/fcg_query_lyric_new.fcg\x26apos;\n\n  axios.get(url, {\n    headers: {\n      referer: \x26apos;https:\/\/c.y.qq.com\/\x26apos;,\n      host: \x26apos;c.y.qq.com\x26apos;\n    },\n    params: req.query\n  }).then((response) =\x26gt; {\n    var ret = response.data\n    if (typeof ret === \x26apos;string\x26apos;) {\n      var reg = \/^\\w\x2b\\(({[^()]\x2b})\\)$\/\n      var matches = ret.match(reg)\n      if (matches) {\n        ret = JSON.parse(matches[1])\n      }\n    }\n    res.json(ret)\n  }).catch((e) =\x26gt; {\n    console.log(e)\n  })\n})\n\napp.use(\x26apos;\/api\x26apos;, apiRoutes)   \/\/\x26#x6700;\x26#x540E;\x26#x4E00;\x26#x6B65;\n\nvar compiler = webpack(webpackConfig)\n\nvar devMiddleware = require(\x26apos;webpack-dev-middleware\x26apos;)(compiler, {\n  publicPath: webpackConfig.output.publicPath,\n  quiet: true\n})\n\nvar hotMiddleware = require(\x26apos;webpack-hot-middleware\x26apos;)(compiler, {\n  log: () =\x26gt; {}\n})\n\/\/ force page reload when html-webpack-plugin template changes\ncompiler.plugin(\x26apos;compilation\x26apos;, function (compilation) {\n  compilation.plugin(\x26apos;html-webpack-plugin-after-emit\x26apos;, function (data, cb) {\n    hotMiddleware.publish({ action: \x26apos;reload\x26apos; })\n    cb()\n  })\n})\n\n\/\/ proxy api requests\nObject.keys(proxyTable).forEach(function (context) {\n  var options = proxyTable[context]\n  if (typeof options === \x26apos;string\x26apos;) {\n    options = { target: options }\n  }\n  app.use(proxyMiddleware(options.filter || context, options))\n})\n\n\/\/ handle fallback for HTML5 history API\napp.use(require(\x26apos;connect-history-api-fallback\x26apos;)())\n\n\/\/ serve webpack bundle output\napp.use(devMiddleware)\n\n\/\/ enable hot-reload and state-preserving\n\/\/ compilation error display\napp.use(hotMiddleware)\n\n\/\/ serve pure static assets\nvar staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)\napp.use(staticPath, express.static(\x26apos;.\/static\x26apos;))\n\nvar uri = \x26apos;http:\/\/localhost:\x26apos; \x2b port\n\nvar _resolve\nvar readyPromise = new Promise(resolve =\x26gt; {\n  _resolve = resolve\n})\n\nconsole.log(\x26apos;\x26gt; Starting dev server...\x26apos;)\ndevMiddleware.waitUntilValid(() =\x26gt; {\n  console.log(\x26apos;\x26gt; Listening at \x26apos; \x2b uri \x2b \x26apos;\\n\x26apos;)\n  \/\/ when env is testing, don\x26apos;t need open it\n  if (autoOpenBrowser \x26amp;\x26amp; process.env.NODE_ENV !== \x26apos;testing\x26apos;) {\n    opn(uri)\n  }\n  _resolve()\n})\n\nvar server = app.listen(port)\n\nmodule.exports = {\n  ready: readyPromise,\n  close: () =\x26gt; {\n    server.close()\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3eAPI\/recommend.js \x26#x4F7F;\x26#x7528;jsonp \x26#x8C03;\x26#x53D6;\x26#x70ED;\x26#x95E8;\x26#x6B4C;\x26#x5355;\x26#x7684;\x26#x6570;\x26#x636E;\x3c\/strong\x3e\x3c\/p\x3e\x3cpre\x3e\x3ccode\x3eexport function getDiscList() {\n  const url = \x26apos;\/api\/getDiscList\x26apos;\n\n  const data = Object.assign({}, commonParams, {\n    platform: \x26apos;yqq\x26apos;,\n    hostUin: 0,\n    sin: 0,\n    ein: 29,\n    sortId: 5,\n    needNewCode: 0,\n    categoryId: 10000000,\n    rnd: Math.random(),\n    format: \x26apos;json\x26apos;\n  })\n\n  return axios.get(url, {\n    params: data\n  }).then((res) =\x26gt; {\n    return Promise.resolve(res.data)\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x63A5;\x26#x4E0B;\x26#x6765;\x26#x5F00;\x26#x53D1;\x26#x63A8;\x26#x8350;\x26#x9875;\x26#x9762;\x26#x6EDA;\x26#x52A8;\x26#x5217;\x26#x8868;--\x26#x56E0;\x26#x4E3A;\x26#x5F88;\x26#x591A;\x26#x9875;\x26#x9762;\x26#x90FD;\x26#x652F;\x26#x6301;\x26#x6EDA;\x26#x52A8;\x26#xFF0C;\x26#x6240;\x26#x4EE5;\x26#x62BD;\x26#x51FA;\x26#x6765;\x26#x4E00;\x26#x4E2A;\x26#x516C;\x26#x7528;\x26#x7EC4;\x26#x4EF6;Scroll.vue\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div ref=\x26quot;wrapper\x26quot;\x26gt;\n    \x26lt;slot\x26gt;\x26lt;\/slot\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  import BScroll from \x26apos;better-scroll\x26apos;\n\n  export default {\n    props: {\n      probeType: {\n        type: Number,\n        default: 1\n      },\n      click: {\n        type: Boolean,\n        default: true\n      },\n      listenScroll: {\n        type: Boolean,\n        default: false\n      },\n      data: {\n        type: Array,\n        default: null\n      },\n      pullup: {\n        type: Boolean,\n        default: false\n      },\n      beforeScroll: {\n        type: Boolean,\n        default: false\n      },\n      refreshDelay: {\n        type: Number,\n        default: 20\n      }\n    },\n    mounted() {\n      setTimeout(() =\x26gt; {\n        this._initScroll()\n      }, 20)\n    },\n    methods: {\n      _initScroll() {\n        if (!this.$refs.wrapper) {\n          return\n        }\n        this.scroll = new BScroll(this.$refs.wrapper, {\n          probeType: this.probeType,\n          click: this.click\n        })\n\n        if (this.listenScroll) {\n          let me = this  \/\/\x26#x6CE8;\x26#x610F;\x26#x8FD9;\x26#x5757;\n          this.scroll.on(\x26apos;scroll\x26apos;, (pos) =\x26gt; {\n            me.$emit(\x26apos;scroll\x26apos;, pos)\n          })\n        }\n\n        if (this.pullup) {\n          this.scroll.on(\x26apos;scrollEnd\x26apos;, () =\x26gt; {\n            if (this.scroll.y \x26lt;= (this.scroll.maxScrollY \x2b 50)) {\n              this.$emit(\x26apos;scrollToEnd\x26apos;)\n            }\n          })\n        }\n\n        if (this.beforeScroll) {\n          this.scroll.on(\x26apos;beforeScrollStart\x26apos;, () =\x26gt; {\n            this.$emit(\x26apos;beforeScroll\x26apos;)\n          })\n        }\n      },\n      disable() {\n        this.scroll \x26amp;\x26amp; this.scroll.disable()\n      },\n      enable() {\n        this.scroll \x26amp;\x26amp; this.scroll.enable()\n      },\n      refresh() {\n        this.scroll \x26amp;\x26amp; this.scroll.refresh()\n      },\n      scrollTo() {\n        this.scroll \x26amp;\x26amp; this.scroll.scrollTo.apply(this.scroll, arguments)\n      },\n      scrollToElement() {\n        this.scroll \x26amp;\x26amp; this.scroll.scrollToElement.apply(this.scroll, arguments)\n      }\n    },\n    watch: {\n      data() {\n        setTimeout(() =\x26gt; {\n          this.refresh()\n        }, this.refreshDelay)\n      }\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3erecommend.vue\x3c\/strong\x3e\x3c\/p\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x53EF;\x26#x80FD;\x26#x4F1A;\x26#x9047;\x26#x5230;\x26#x4E00;\x26#x4E2A;\x26#x95EE;\x26#x9898;\x26#xFF0C;\x26#x521D;\x26#x59CB;\x26#x5316;\x26#x540E;\x26#x4E0D;\x26#x80FD;\x26#x6EDA;\x26#x52A8;\x26#xFF0C;\x26#x662F;\x26#x56E0;\x26#x4E3A;\x26#x9AD8;\x26#x5EA6;\x26#x7684;\x26#x95EE;\x26#x9898;\x26#xFF0C;\x26#x6240;\x26#x4EE5;\x26#x7ED9;img\x26#x52A0;\x26#x4E86;\x26#x4E00;\x26#x4E2A;\x26#x65B9;\x26#x6CD5;\x26#xFF0C;\x26#x8FD9;\x26#x91CC;\x26#x63D0;\x26#x5230;\x26#x4E86;vuex\x26#x7684;\x26#x4F7F;\x26#x7528;\x26#xFF0C;\x26#x90A3;\x26#x600E;\x26#x4E48;\x26#x7ED9;vuex\x26#x63D0;\x26#x4EA4;\x26#x6570;\x26#x636E;\x26#x7EC6;\x26#x5FC3;\x26#x7684;\x26#x540C;\x26#x5B66;\x26#x53EF;\x26#x80FD;\x26#x4F1A;\x26#x53D1;\x26#x73B0;\x26#x2193;\x26#x2193;\x26#x2193;\x26#x2193;\x26#x2193;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;recommend\x26quot; ref=\x26quot;recommend\x26quot;\x26gt;\n    \x26lt;scroll ref=\x26quot;scroll\x26quot; class=\x26quot;recommend-content\x26quot; :data=\x26quot;discList\x26quot;\x26gt;\n      \x26lt;div\x26gt;\n        \x26lt;div v-if=\x26quot;recommends.length\x26quot; class=\x26quot;slider-wrapper\x26quot; ref=\x26quot;sliderWrapper\x26quot;\x26gt;\n          \x26lt;slider\x26gt;\n            \x26lt;div v-for=\x26quot;item in recommends\x26quot;\x26gt;\n              \x26lt;a :href=\x26quot;item.linkUrl\x26quot;\x26gt;\n                \x26lt;img class=\x26quot;needsclick\x26quot; @load=\x26quot;loadImage\x26quot; :src=\x26quot;item.picUrl\x26quot;\x26gt;\n                \x26lt;!-- \x26#x5982;\x26#x679C;fastclick\x26#x76D1;\x26#x542C;\x26#x5230;\x26#x6709;class\x26#x4E3A;needsclick\x26#x5C31;\x26#x4E0D;\x26#x4F1A;\x26#x62E6;\x26#x622A; --\x26gt;\n              \x26lt;\/a\x26gt;\n            \x26lt;\/div\x26gt;\n          \x26lt;\/slider\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;recommend-list\x26quot;\x26gt;\n          \x26lt;h1 class=\x26quot;list-title\x26quot;\x26gt;\x26#x70ED;\x26#x95E8;\x26#x6B4C;\x26#x5355;\x26#x63A8;\x26#x8350;\x26lt;\/h1\x26gt;\n          \x26lt;ul\x26gt;\n            \x26lt;li @click=\x26quot;selectItem(item)\x26quot; v-for=\x26quot;item in discList\x26quot; class=\x26quot;item\x26quot;\x26gt;\n              \x26lt;div class=\x26quot;icon\x26quot;\x26gt;\n                \x26lt;img width=\x26quot;60\x26quot; height=\x26quot;60\x26quot; v-lazy=\x26quot;item.imgurl\x26quot;\x26gt;\n              \x26lt;\/div\x26gt;\n              \x26lt;div class=\x26quot;text\x26quot;\x26gt;\n                \x26lt;h2 class=\x26quot;name\x26quot; v-html=\x26quot;item.creator.name\x26quot;\x26gt;\x26lt;\/h2\x26gt;\n                \x26lt;p class=\x26quot;desc\x26quot; v-html=\x26quot;item.dissname\x26quot;\x26gt;\x26lt;\/p\x26gt;\n              \x26lt;\/div\x26gt;\n            \x26lt;\/li\x26gt;\n          \x26lt;\/ul\x26gt;\n        \x26lt;\/div\x26gt;\n      \x26lt;\/div\x26gt;\n      \x26lt;div class=\x26quot;loading-container\x26quot; v-show=\x26quot;!discList.length\x26quot;\x26gt;\n        \x26lt;loading\x26gt;\x26lt;\/loading\x26gt;\n      \x26lt;\/div\x26gt;\n    \x26lt;\/scroll\x26gt;\n   \n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  import Slider from \x26apos;base\/slider\/slider\x26apos;\n  import Loading from \x26apos;base\/loading\/loading\x26apos;\n  import Scroll from \x26apos;base\/scroll\/scroll\x26apos;\n  import {getRecommend, getDiscList} from \x26apos;api\/recommend\x26apos;\n \n  import {ERR_OK} from \x26apos;api\/config\x26apos;\n  import {mapMutations} from \x26apos;vuex\x26apos;\n\n  export default {\n    \n    data() {\n      return {\n        recommends: [],\n        discList: []\n      }\n    },\n    created() {\n      this._getRecommend()\n\n      this._getDiscList()\n    },\n    methods: {\n      \n      loadImage() {\n        if (!this.checkloaded) {\n          this.checkloaded = true\n          this.$refs.scroll.refresh()\n        }\n      },\n      selectItem(item) {\n        this.$router.push({\n          path: `\/recommend\/${item.dissid}`\n        })\n        this.setDisc(item)\n      },\n      _getRecommend() {\n        getRecommend().then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.recommends = res.data.slider\n          }\n        })\n      },\n      _getDiscList() {\n        getDiscList().then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.discList = res.data.list\n          }\n        })\n      },\n      ...mapMutations({\n        setDisc: \x26apos;SET_DISC\x26apos;\n      })\n    },\n    components: {\n      Slider,\n      Loading,\n      Scroll\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x63A5;\x26#x4E0B;\x26#x6765;\x26#x662F;\x26#x6B4C;\x26#x624B;\x26#x9875;\x26#x9762;\x26#xFF0C;\x26#x7531;\x26#x4E8E;\x26#x8003;\x26#x8651;\x26#x5230;\x26#x4E8C;\x26#x7EA7;\x26#x8DEF;\x26#x7531;\x26#x8981;\x26#x8DF3;\x26#x5230;\x26#x6B4C;\x26#x624B;\x26#x8BE6;\x26#x60C5;\x26#xFF0C;\x26#x6240;\x26#x4EE5;\x26#x62BD;\x26#x51FA;\x26#x4E00;\x26#x4E2A;\x26#x72EC;\x26#x7ACB;\x26#x7EC4;\x26#x4EF6;listview.vue\x26#xFF0C;\x26#x6D89;\x26#x53CA;\x26#x5230;\x26#x6570;\x26#x636E;\x26#x7ED3;\x26#x6784;\x26#x5904;\x26#x7406;\x26#x3001;\x26#x7C7B;\x26#x7684;\x26#x521B;\x26#x5EFA;\x26#x3001;es6\x26#x7684;\x26#x5B57;\x26#x7B26;\x26#x62FC;\x26#x63A5;\x26#x3001;\x26#x6570;\x26#x7EC4;map\x26#x65B9;\x26#x6CD5;\x26#x3001;\x26#x81EA;\x26#x5B9A;\x26#x4E49;data\x26#x5C5E;\x26#x6027;\x26#x83B7;\x26#x53D6;\x26#x65B9;\x26#x6CD5;\x26#x7684;\x26#x5C01;\x26#x88C5;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;scroll @scroll=\x26quot;scroll\x26quot;\n          :listen-scroll=\x26quot;listenScroll\x26quot;\n          :probe-type=\x26quot;probeType\x26quot;\n          :data=\x26quot;data\x26quot;\n          class=\x26quot;listview\x26quot;\n          ref=\x26quot;listview\x26quot;\x26gt;\n    \x26lt;ul\x26gt;\n      \x26lt;li v-for=\x26quot;group in data\x26quot; class=\x26quot;list-group\x26quot; ref=\x26quot;listGroup\x26quot;\x26gt;\n        \x26lt;h2 class=\x26quot;list-group-title\x26quot;\x26gt;{{group.title}}\x26lt;\/h2\x26gt;\n        \x26lt;uL\x26gt;\n          \x26lt;li @click=\x26quot;selectItem(item)\x26quot; v-for=\x26quot;item in group.items\x26quot; class=\x26quot;list-group-item\x26quot;\x26gt;\n            \x26lt;img class=\x26quot;avatar\x26quot; v-lazy=\x26quot;item.avatar\x26quot;\x26gt;\n            \x26lt;span class=\x26quot;name\x26quot;\x26gt;{{item.name}}\x26lt;\/span\x26gt;\n          \x26lt;\/li\x26gt;\n        \x26lt;\/uL\x26gt;\n      \x26lt;\/li\x26gt;\n    \x26lt;\/ul\x26gt;\n    \x26lt;div class=\x26quot;list-shortcut\x26quot; @touchstart.stop.prevent=\x26quot;onShortcutTouchStart\x26quot; @touchmove.stop.prevent=\x26quot;onShortcutTouchMove\x26quot;\n         @touchend.stop\x26gt;\n      \x26lt;ul\x26gt;\n        \x26lt;li v-for=\x26quot;(item, index) in shortcutList\x26quot; :data-index=\x26quot;index\x26quot; class=\x26quot;item\x26quot;\n            :class=\x26quot;{\x26apos;current\x26apos;:currentIndex===index}\x26quot;\x26gt;{{item}}\n        \x26lt;\/li\x26gt;\n      \x26lt;\/ul\x26gt;\n    \x26lt;\/div\x26gt;\n    \x26lt;div class=\x26quot;list-fixed\x26quot; ref=\x26quot;fixed\x26quot; v-show=\x26quot;fixedTitle\x26quot;\x26gt;\n      \x26lt;div class=\x26quot;fixed-title\x26quot;\x26gt;{{fixedTitle}} \x26lt;\/div\x26gt;\n    \x26lt;\/div\x26gt;\n    \x26lt;div v-show=\x26quot;!data.length\x26quot; class=\x26quot;loading-container\x26quot;\x26gt;\n      \x26lt;loading\x26gt;\x26lt;\/loading\x26gt;\n    \x26lt;\/div\x26gt;\n  \x26lt;\/scroll\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script\x26gt;\n  import Scroll from \x26apos;base\/scroll\/scroll\x26apos;\n  import Loading from \x26apos;base\/loading\/loading\x26apos;\n  import {getData} from \x26apos;common\/js\/dom\x26apos;\n\n  const TITLE_HEIGHT = 30\n  const ANCHOR_HEIGHT = 18  \/\/\x26#x6837;\x26#x5F0F;\x26#x7684;\x26#x9AD8;\x26#x5EA6;\n\n  export default {\n    props: {\n      data: {\n        type: Array,\n        default: []\n      }\n    },\n    computed: {\n      shortcutList() {\n        return this.data.map((group) =\x26gt; {\n          return group.title.substr(0, 1)\n        })\n      },\n      fixedTitle() {\n        if (this.scrollY \x26gt; 0) {\n          return \x26apos;\x26apos;\n        }\n        return this.data[this.currentIndex] ? this.data[this.currentIndex].title : \x26apos;\x26apos;\n      }\n    },\n    data() {\n      return {\n        scrollY: -1,\n        currentIndex: 0,\n        diff: -1\n      }\n    },\n    created() {\n      this.probeType = 3\n      this.listenScroll = true\n      this.touch = {}\n      this.listHeight = []\n    },\n    methods: {\n      selectItem(item) {\n        this.$emit(\x26apos;select\x26apos;, item)\n      },\n      onShortcutTouchStart(e) {\n        let anchorIndex = getData(e.target, \x26apos;index\x26apos;)\n        let firstTouch = e.touches[0] \/\/\x26#x7B2C;\x26#x4E00;\x26#x4E2A;\x26#x624B;\x26#x6307;\x26#x7684;\x26#x4F4D;\x26#x7F6E;\n        this.touch.y1 = firstTouch.pageY  \n        this.touch.anchorIndex = anchorIndex\n\n        this._scrollTo(anchorIndex)\n      },\n      onShortcutTouchMove(e) {\n        let firstTouch = e.touches[0]\n        this.touch.y2 = firstTouch.pageY\n        let delta = (this.touch.y2 - this.touch.y1) \/ ANCHOR_HEIGHT | 0  \/\/\x26#x6216;0 \x26#x76F8;\x26#x5F53;\x26#x4E8E;\x26#x5411;\x26#x4E0B;\x26#x53D6;\x26#x6574;\n        let anchorIndex = parseInt(this.touch.anchorIndex) \x2b delta\n\n        this._scrollTo(anchorIndex)\n      },\n      refresh() {\n        this.$refs.listview.refresh()\n      },\n      scroll(pos) {\n        this.scrollY = pos.y\n      },\n      _calculateHeight() {\n        this.listHeight = []\n        const list = this.$refs.listGroup\n        let height = 0\n        this.listHeight.push(height)\n        for (let i = 0; i \x26lt; list.length; i\x2b\x2b) {\n          let item = list[i]\n          height \x2b= item.clientHeight\n          this.listHeight.push(height)\n        }  \/\/\x26#x83B7;\x26#x53D6;\x26#x5230;\x26#x4ECE;\x26#x7B2C;\x26#x4E00;\x26#x4E2A;\x26#x5230;\x26#x6700;\x26#x540E;\x26#x4E00;\x26#x4E2A;\x26#x6BCF;\x26#x4E00;\x26#x4E2A;\x26#x7684;height\n      },\n      _scrollTo(index) {\n        if (!index \x26amp;\x26amp; index !== 0) {\n          return\n        }\n        if (index \x26lt; 0) {\n          index = 0\n        } else if (index \x26gt; this.listHeight.length - 2) {\n          index = this.listHeight.length - 2\n        }\n        this.scrollY = -this.listHeight[index]\n        this.$refs.listview.scrollToElement(this.$refs.listGroup[index], 0)\n      }\n    },\n    watch: {\n      data() {\n        setTimeout(() =\x26gt; {\n          this._calculateHeight()\n        }, 20)\n      },\n      scrollY(newY) {\n        const listHeight = this.listHeight\n        \/\/ \x26#x5F53;\x26#x6EDA;\x26#x52A8;\x26#x5230;\x26#x9876;\x26#x90E8;\x26#xFF0C;newY\x26gt;0\n        if (newY \x26gt; 0) {\n          this.currentIndex = 0\n          return\n        }\n        \/\/ \x26#x5728;\x26#x4E2D;\x26#x95F4;\x26#x90E8;\x26#x5206;\x26#x6EDA;\x26#x52A8;\n        for (let i = 0; i \x26lt; listHeight.length - 1; i\x2b\x2b) {\n          let height1 = listHeight[i]\n          let height2 = listHeight[i \x2b 1]\n          if (-newY \x26gt;= height1 \x26amp;\x26amp; -newY \x26lt; height2) { \/\/newY\x26#x5F80;\x26#x4E0A;\x26#x6ED1;\x26#x662F;\x26#x8D1F;\x26#x503C; --\x26#x53D8;\x26#x6B63;\n            this.currentIndex = i\n            this.diff = height2 \x2b newY\n            return\n          }\n        }\n        \/\/ \x26#x5F53;\x26#x6EDA;\x26#x52A8;\x26#x5230;\x26#x5E95;\x26#x90E8;\x26#xFF0C;\x26#x4E14;-newY\x26#x5927;\x26#x4E8E;\x26#x6700;\x26#x540E;\x26#x4E00;\x26#x4E2A;\x26#x5143;\x26#x7D20;\x26#x7684;\x26#x4E0A;\x26#x9650;\n        this.currentIndex = listHeight.length - 2\n      },\n      diff(newVal) {\n        let fixedTop = (newVal \x26gt; 0 \x26amp;\x26amp; newVal \x26lt; TITLE_HEIGHT) ? newVal - TITLE_HEIGHT : 0\n        if (this.fixedTop === fixedTop) {\n          return\n        }\n        this.fixedTop = fixedTop\n        this.$refs.fixed.style.transform = `translate3d(0,${fixedTop}px,0)`\n      }\n    },\n    components: {\n      Scroll,\n      Loading\n    }\n  }\n\n\x26lt;\/script\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e\x3cstrong\x3esinger.vue\x3c\/strong\x3e\x3c\/p\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x5F15;\x26#x5165;listview\x26#x7EC4;\x26#x4EF6;\x26#xFF0C;\x26#x6709;\x26#x4E00;\x26#x4E2A;20\x26#x6BEB;\x26#x79D2;\x26#x7684;\x26#x5B9A;\x26#x65F6;\x26#x5668;\x26#xFF0C;\x26#x5173;\x26#x952E;\x26#x5728;\x26#x4E8E;\x26#x5DE6;\x26#x53F3;\x26#x8054;\x26#x52A8;\x26#x7684;\x26#x601D;\x26#x8DEF;\x26#x5F88;\x26#x91CD;\x26#x8981;\x26#xFF0C;\x26#x4EE5;\x26#x53CA;\x26#x5173;\x26#x4E8E;diff\x26#x7684;\x26#x5904;\x26#x7406;\x26#x589E;\x26#x5F3A;\x26#x7528;\x26#x6237;\x26#x4F53;\x26#x9A8C;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;singer\x26quot; ref=\x26quot;singer\x26quot;\x26gt;\n    \x26lt;list-view @select=\x26quot;selectSinger\x26quot; :data=\x26quot;singers\x26quot; ref=\x26quot;list\x26quot;\x26gt;\x26lt;\/list-view\x26gt;\n    \x26lt;router-view\x26gt;\x26lt;\/router-view\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script\x26gt;\n  import ListView from \x26apos;base\/listview\/listview\x26apos;\n  import {getSingerList} from \x26apos;api\/singer\x26apos;\n  import {ERR_OK} from \x26apos;api\/config\x26apos;\n  import Singer from \x26apos;common\/js\/singer\x26apos;\n  import {mapMutations} from \x26apos;vuex\x26apos;  \/\/\x26#x5BF9;Mutations\x26#x7684;\x26#x5C01;\x26#x88C5;\n  import {playlistMixin} from \x26apos;common\/js\/mixin\x26apos;\n\n  const HOT_SINGER_LEN = 10\n  const HOT_NAME = \x26apos;\x26#x70ED;\x26#x95E8;\x26apos;\n\n  export default {\n    mixins: [playlistMixin],\n    data() {\n      return {\n        singers: []\n      }\n    },\n    created() {\n      this._getSingerList()\n    },\n    methods: {\n      handlePlaylist(playlist) {\n        const bottom = playlist.length \x26gt; 0 ? \x26apos;60px\x26apos; : \x26apos;\x26apos;\n        this.$refs.singer.style.bottom = bottom\n        this.$refs.list.refresh()\n      },\n      selectSinger(singer) {\n        this.$router.push({\n          path: `\/singer\/${singer.id}`\n        })\n        this.setSinger(singer)\n      },\n      _getSingerList() {\n        getSingerList().then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.singers = this._normalizeSinger(res.data.list)\n          }\n        })\n      },\n      _normalizeSinger(list) {\n        let map = {\n          hot: {\n            title: HOT_NAME,\n            items: []\n          }\n        }\n        list.forEach((item, index) =\x26gt; {\n          if (index \x26lt; HOT_SINGER_LEN) {\n            map.hot.items.push(new Singer({\n              name: item.Fsinger_name,\n              id: item.Fsinger_mid\n            }))\n          }\n          const key = item.Findex\n          if (!map[key]) {\n            map[key] = {\n              title: key,\n              items: []\n            }\n          }\n          map[key].items.push(new Singer({\n            name: item.Fsinger_name,\n            id: item.Fsinger_mid\n          }))\n        })\n        \/\/ \x26#x4E3A;\x26#x4E86;\x26#x5F97;\x26#x5230;\x26#x6709;\x26#x5E8F;\x26#x5217;\x26#x8868;\x26#xFF0C;\x26#x6211;\x26#x4EEC;\x26#x9700;\x26#x8981;\x26#x5904;\x26#x7406; map\n        let ret = []\n        let hot = []\n        for (let key in map) {\n          let val = map[key]\n          if (val.title.match(\/[a-zA-Z]\/)) {\n            ret.push(val)\n          } else if (val.title === HOT_NAME) {\n            hot.push(val)\n          }\n        }\n        ret.sort((a, b) =\x26gt; {\n          return a.title.charCodeAt(0) - b.title.charCodeAt(0)\n        })\n        return hot.concat(ret)\n      },\n      ...mapMutations({\n        setSinger: \x26apos;SET_SINGER\x26apos;\n      })\n    },\n    components: {\n      ListView\n    }\n  }\n\n\x26lt;\/script\x26gt;\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x6B4C;\x26#x624B;\x26#x8BE6;\x26#x60C5;\x26#x9875;\x26#xFF0C;\x26#x4E3A;\x26#x4E86;\x26#x7EC4;\x26#x4EF6;\x26#x91CD;\x26#x7528;\x26#x62BD;\x26#x51FA;\x26#x6765;\x26#x4E00;\x26#x4E2A;music-list.vue,\x26#x5728;\x26#x6B64;\x26#x57FA;\x26#x7840;\x26#x53C8;\x26#x62BD;\x26#x51FA;\x26#x6765;\x26#x4E00;\x26#x4E2A;song-list.vue\x26#xFF0C;\x26#x7528;\x26#x5230;\x26#x4E86;v-html\x26#x6765;\x26#x8F6C;\x26#x4E49;\x26#x5B57;\x26#x7B26;\x26#x3001;\x26#x8BA1;\x26#x7B97;\x26#x5C5E;\x26#x6027;\x26#x91CC;\x26#x8FD4;\x26#x56DE;\x26#x5BF9;\x26#x8C61;\x26#x7684;\x26#x67D0;\x26#x51E0;\x26#x4E2A;key\x26#x6BD4;\x26#x5982;\x26#x53EA;\x26#x4F20;\x26#x5165;name\x26#x6216;\x26#x8005;\x26#x5934;\x26#x50CF;\x26#x3001;mapGetters\x26#x83B7;\x26#x53D6;vuex\x26#x7684;\x26#x6570;\x26#x636E;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;song-list\x26quot;\x26gt;\n    \x26lt;ul\x26gt;\n      \x26lt;li @click=\x26quot;selectItem(song, index)\x26quot; class=\x26quot;item\x26quot; v-for=\x26quot;(song, index) in songs\x26quot;\x26gt;\n        \x26lt;div class=\x26quot;rank\x26quot; v-show=\x26quot;rank\x26quot;\x26gt;\n          \x26lt;span :class=\x26quot;getRankCls(index)\x26quot; v-text=\x26quot;getRankText(index)\x26quot;\x26gt;\x26lt;\/span\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;content\x26quot;\x26gt;\n          \x26lt;h2 class=\x26quot;name\x26quot;\x26gt;{{song.name}}\x26lt;\/h2\x26gt;\n          \x26lt;p class=\x26quot;desc\x26quot;\x26gt;{{getDesc(song)}}\x26lt;\/p\x26gt;\n        \x26lt;\/div\x26gt;\n      \x26lt;\/li\x26gt;\n    \x26lt;\/ul\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script \x26gt;\n  export default {\n    props: {\n      songs: {\n        type: Array,\n        default: []\n      },\n      rank: {\n        type: Boolean,\n        default: false\n      }\n    },\n    methods: {\n      selectItem(item, index) {\n        this.$emit(\x26apos;select\x26apos;, item, index)\n      },\n      getDesc(song) {\n        return `${song.singer}\x26#xB7;${song.album}`\n      },\n      getRankCls(index) {\n        if (index \x26lt;= 2) {\n          return `icon icon${index}`\n        } else {\n          return \x26apos;text\x26apos;\n        }\n      },\n      getRankText(index) {\n        if (index \x26gt; 2) {\n          return index \x2b 1\n        }\n      }\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3chr\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;music-list\x26quot;\x26gt;\n    \x26lt;div class=\x26quot;back\x26quot; @click=\x26quot;back\x26quot;\x26gt;\n      \x26lt;i class=\x26quot;icon-back\x26quot;\x26gt;\x26lt;\/i\x26gt;\n    \x26lt;\/div\x26gt;\n    \x26lt;h1 class=\x26quot;title\x26quot; v-html=\x26quot;title\x26quot;\x26gt;\x26lt;\/h1\x26gt;\n    \x26lt;div class=\x26quot;bg-image\x26quot; :style=\x26quot;bgStyle\x26quot; ref=\x26quot;bgImage\x26quot;\x26gt;\n      \x26lt;div class=\x26quot;play-wrapper\x26quot;\x26gt;\n        \x26lt;div ref=\x26quot;playBtn\x26quot; v-show=\x26quot;songs.length\x26gt;0\x26quot; class=\x26quot;play\x26quot; @click=\x26quot;random\x26quot;\x26gt;\x26lt;!-- \x26#x5F53;\x26#x6570;\x26#x636E;\x26#x6709;\x26#x4E86;\x26#x4EE5;\x26#x540E;\x26#x518D;\x26#x663E;\x26#x793A;v-show --\x26gt;\n          \x26lt;i class=\x26quot;icon-play\x26quot;\x26gt;\x26lt;\/i\x26gt;\n          \x26lt;span class=\x26quot;text\x26quot;\x26gt;\x26#x968F;\x26#x673A;\x26#x64AD;\x26#x653E;\x26#x5168;\x26#x90E8;\x26lt;\/span\x26gt;\n        \x26lt;\/div\x26gt;\n      \x26lt;\/div\x26gt;\n      \x26lt;div class=\x26quot;filter\x26quot; ref=\x26quot;filter\x26quot;\x26gt;\x26lt;\/div\x26gt;\n    \x26lt;\/div\x26gt;\n    \x26lt;div class=\x26quot;bg-layer\x26quot; ref=\x26quot;layer\x26quot;\x26gt;\x26lt;\/div\x26gt;\n    \x26lt;scroll :data=\x26quot;songs\x26quot; @scroll=\x26quot;scroll\x26quot;\n            :listen-scroll=\x26quot;listenScroll\x26quot; :probe-type=\x26quot;probeType\x26quot; class=\x26quot;list\x26quot; ref=\x26quot;list\x26quot;\x26gt;\n      \x26lt;div class=\x26quot;song-list-wrapper\x26quot;\x26gt;\n        \x26lt;song-list :songs=\x26quot;songs\x26quot; :rank=\x26quot;rank\x26quot; @select=\x26quot;selectItem\x26quot;\x26gt;\x26lt;\/song-list\x26gt;\n      \x26lt;\/div\x26gt;\n      \x26lt;div v-show=\x26quot;!songs.length\x26quot; class=\x26quot;loading-container\x26quot;\x26gt;\n        \x26lt;loading\x26gt;\x26lt;\/loading\x26gt;\n      \x26lt;\/div\x26gt;\n    \x26lt;\/scroll\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script \x26gt;\n  import Scroll from \x26apos;base\/scroll\/scroll\x26apos;\n  import Loading from \x26apos;base\/loading\/loading\x26apos;\n  import SongList from \x26apos;base\/song-list\/song-list\x26apos;\n  import {prefixStyle} from \x26apos;common\/js\/dom\x26apos;\n  import {playlistMixin} from \x26apos;common\/js\/mixin\x26apos;\n  import {mapActions} from \x26apos;vuex\x26apos;\n\n  const RESERVED_HEIGHT = 40\n  const transform = prefixStyle(\x26apos;transform\x26apos;)\n  const backdrop = prefixStyle(\x26apos;backdrop-filter\x26apos;)\n\n  export default {\n    mixins: [playlistMixin],\n    props: {\n      bgImage: {\n        type: String,\n        default: \x26apos;\x26apos;\n      },\n      songs: {\n        type: Array,\n        default: []\n      },\n      title: {\n        type: String,\n        default: \x26apos;\x26apos;\n      },\n      rank: {\n        type: Boolean,\n        default: false\n      }\n    },\n    data() {\n      return {\n        scrollY: 0\n      }\n    },\n    computed: {\n      bgStyle() {\n        return `background-image:url(${this.bgImage})`\n      }\n    },\n    created() {\n      this.probeType = 3\n      this.listenScroll = true\n    },\n    mounted() {\n      this.imageHeight = this.$refs.bgImage.clientHeight\n      this.minTransalteY = -this.imageHeight \x2b RESERVED_HEIGHT\n      this.$refs.list.$el.style.top = `${this.imageHeight}px`\n    },\n    methods: {\n      handlePlaylist(playlist) {\n        const bottom = playlist.length \x26gt; 0 ? \x26apos;60px\x26apos; : \x26apos;\x26apos;\n        this.$refs.list.$el.style.bottom = bottom\n        this.$refs.list.refresh()\n      },\n      scroll(pos) {\n        this.scrollY = pos.y\n      },\n      back() {\n        this.$router.back()\n      },\n      selectItem(item, index) {\n        this.selectPlay({\n          list: this.songs,\n          index\n        })\n      },\n      random() {\n        this.randomPlay({\n          list: this.songs\n        })\n      },\n      ...mapActions([\n        \x26apos;selectPlay\x26apos;,\n        \x26apos;randomPlay\x26apos;\n      ])\n    },\n    watch: {\n      scrollY(newVal) {\n        let translateY = Math.max(this.minTransalteY, newVal) \/\/\x26#x6700;\x26#x8FDC;\x26#x6EDA;\x26#x52A8;\x26#x4F4D;\x26#x7F6E;\n        let scale = 1\n        let zIndex = 0\n        let blur = 0\n        const percent = Math.abs(newVal \/ this.imageHeight)\n        if (newVal \x26gt; 0) {\n          scale = 1 \x2b percent\n          zIndex = 10\n        } else {\n          blur = Math.min(20, percent * 20)\n        }\n\n        this.$refs.layer.style[transform] = `translate3d(0,${translateY}px,0)`\n        this.$refs.filter.style[backdrop] = `blur(${blur}px)`\n        if (newVal \x26lt; this.minTransalteY) {\n          zIndex = 10\n          this.$refs.bgImage.style.paddingTop = 0\n          this.$refs.bgImage.style.height = `${RESERVED_HEIGHT}px`\n          this.$refs.playBtn.style.display = \x26apos;none\x26apos;\n        } else { \/\/\x26#x8FD8;\x26#x6CA1;\x26#x6EDA;\x26#x52A8;\x26#x5230;\x26#x90A3;\x26#x4E2A;\x26#x4F4D;\x26#x7F6E;\n          this.$refs.bgImage.style.paddingTop = \x26apos;70%\x26apos;\n          this.$refs.bgImage.style.height = 0\n          this.$refs.playBtn.style.display = \x26apos;\x26apos;\n        }\n        this.$refs.bgImage.style[transform] = `scale(${scale})`\n        this.$refs.bgImage.style.zIndex = zIndex\n      }\n    },\n    components: {\n      Scroll,\n      Loading,\n      SongList\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3chr\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x4E0B;\x26#x9762;\x26#x662F;\x26#x7236;\x26#x7EC4;\x26#x4EF6;\x26#x6B4C;\x26#x624B;\x26#x8BE6;\x26#x60C5;\x26#xFF0C;\x26#x5C01;\x26#x88C5;\x26#x4E86;\x26#x4E00;\x26#x4E2A;createSong\x26#x7684;\x26#x7C7B;\x26#xFF0C;\x26#x53EF;\x26#x5728;\x26#x6E90;\x26#x7801;\x26#x4E2D;\x26#x67E5;\x26#x770B;\x26#x63D0;\x26#x9AD8;\x26#x4E86;\x26#x4EE3;\x26#x7801;\x26#x7684;\x26#x91CD;\x26#x7528;\x26#x6027;\x26#x3001;\x26#x6269;\x26#x5C55;\x26#x6027;\x26#x56E0;\x26#x4E3A;\x26#x662F;\x26#x9762;\x26#x5411;\x26#x5BF9;\x26#x8C61;\x26#x7684;\x26#x65B9;\x26#x5F0F;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;transition name=\x26quot;slide\x26quot;\x26gt;\n    \x26lt;music-list :title=\x26quot;title\x26quot; :bg-image=\x26quot;bgImage\x26quot; :songs=\x26quot;songs\x26quot;\x26gt;\x26lt;\/music-list\x26gt;\n  \x26lt;\/transition\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  import MusicList from \x26apos;components\/music-list\/music-list\x26apos;\n  import {getSingerDetail} from \x26apos;api\/singer\x26apos;\n  import {ERR_OK} from \x26apos;api\/config\x26apos;\n  import {createSong} from \x26apos;common\/js\/song\x26apos;\n  import {mapGetters} from \x26apos;vuex\x26apos;\n\n  export default {\n    computed: {\n      title() {\n        return this.singer.name\n      },\n      bgImage() {\n        return this.singer.avatar\n      },\n      ...mapGetters([\n        \x26apos;singer\x26apos;\n      ])\n    },\n    data() {\n      return {\n        songs: []\n      }\n    },\n    created() {\n      this._getDetail()\n    },\n    methods: {\n      _getDetail() {\n        if (!this.singer.id) {\n          this.$router.push(\x26apos;\/singer\x26apos;)\n          return\n        }       \/\/\x26#x5904;\x26#x7406;\x26#x8FB9;\x26#x95F4;\x26#x7684;\x26#x4F8B;\x26#x5B50;\n        getSingerDetail(this.singer.id).then((res) =\x26gt; {\n          if (res.code === ERR_OK) {\n            this.songs = this._normalizeSongs(res.data.list)\n          }\n        })\n      },\n      _normalizeSongs(list) {\n        let ret = []\n        list.forEach((item) =\x26gt; {\n          let {musicData} = item\n          if (musicData.songid \x26amp;\x26amp; musicData.albummid) {\n            ret.push(createSong(musicData))\n          }\n        })\n        return ret\n      }\n    },\n    components: {\n      MusicList\n    }\n  }\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x64AD;\x26#x653E;\x26#x5668;\x26#x5185;\x26#x7F6E;\x26#x7EC4;\x26#x4EF6; player.vue\x26#xFF0C;\x26#x901A;\x26#x8FC7;actions\x26#x7684;\x26#x65B9;\x26#x6CD5;--selectPlay,\x26#x5728;\x26#x6B64;\x26#x7EC4;\x26#x4EF6;\x26#x62FF;\x26#x5230;currentSong\x26#xFF0C;\x26#x8FD9;\x26#x91CC;\x26#x518D;\x26#x91CD;\x26#x70B9;\x26#x8BF4;\x26#x4E00;\x26#x4E0B;mutations\x26#x548C;\x26#x5B83;\x26#x7684;type\x26#x8981;\x26#x505A;\x26#x5230;\x26#x547D;\x26#x540D;\x26#x4E00;\x26#x81F4;\x26#xFF0C;nutations\x26#x672C;\x26#x8D28;\x26#x5C31;\x26#x662F;\x26#x51FD;\x26#x6570;\x26#xFF0C;\x26#x7B2C;\x26#x4E00;\x26#x4E2A;\x26#x53C2;\x26#x6570;\x26#x662F;state\x26#x7B2C;\x26#x4E8C;\x26#x4E2A;\x26#x53C2;\x26#x6570;\x26#x662F;\x26#x8981;\x26#x4FEE;\x26#x6539;\x26#x7684;\x26#x5BF9;\x26#x8C61;\x26#x503C;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3eplayer\x26#x7EC4;\x26#x4EF6;\x26#x5B9A;\x26#x4E49;\x26#x5230;\x26#x4E86;app.vue\x26#xFF0C;\x26#x56E0;\x26#x4E3A;\x26#x5B83;\x26#x4E0D;\x26#x5C5E;\x26#x4E8E;\x26#x67D0;\x26#x4E00;\x26#x4E2A;\x26#x9875;\x26#x9762;\x26#x662F;\x26#x5168;\x26#x5C40;\x26#x7684;\x26#xFF0C;mapgetters\x26#x662F;\x26#x4E00;\x26#x4E2A;\x26#x6570;\x26#x7EC4;\x26#xFF0C;\x26#x591A;\x26#x6B21;\x26#x6279;\x26#x91CF;\x26#x4FEE;\x26#x6539;mutation\x26#x5C31;\x26#x8981;\x26#x7528;\x26#x5230;actions\x3c\/strong\x3e\x3c\/p\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x91CD;\x26#x70B9;\x26#x662F;\x26#x52A8;\x26#x753B;\x26#x7684;\x26#x8FC7;\x26#x5EA6;\x26#x6548;\x26#x679C;\x26#xFF0C;\x26#x7ED3;\x26#x5408;\x26#x94A9;\x26#x5B50;\x26#x51FD;\x26#x6570;\x26#x5B9E;\x26#x73B0;\x26#x98DE;\x26#x5165;\x26#x98DE;\x26#x51FA;\x26#x52A8;\x26#x753B;\x26#xFF0C;\x26#x7528;\x26#x5230;\x26#x4E86;\x26#x5F00;\x26#x6E90;\x26#x52A8;\x26#x753B;\x26#x5E93;\x26#xFF0C;create-key-animation\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3e\x26#x97F3;\x26#x4E50;\x26#x64AD;\x26#x653E;\x26#x4E8B;\x26#x4EF6;togglePlaying\x26#xFF0C;\x26#x56E0;\x26#x4E3A;\x26#x64AD;\x26#x653E;\x26#x7684;\x26#x6682;\x26#x505C;\x26#x5F00;\x26#x59CB;\x26#x8981;\x26#x8C03;\x26#x7528;audio\x26#x7684;\x26#x65B9;\x26#x6CD5;\x26#xFF0C;\x26#x53EF;\x26#x80FD;\x26#x4F1A;\x26#x51FA;\x26#x73B0;\x26#x62FF;\x26#x4E0D;\x26#x5230;\x26#x5143;\x26#x7D20;\x26#x62A5;\x26#x9519;\x26#xFF0C;\x26#x8FD9;\x26#x662F;\x26#x7528;\x26#x5230;\x26#x4E86;nextTic\x26#x5EF6;\x26#x65F6;\x26#x51FD;\x26#x6570;\x26#xFF0C;\x26#x6DFB;\x26#x52A0;class\x26#x53EF;\x26#x4EE5;\x26#x7528;\x26#x5230;\x26#x8BA1;\x26#x7B97;\x26#x5C5E;\x26#x6027;\x26#xFF0C;\x26#x6B4C;\x26#x66F2;\x26#x7684;\x26#x524D;\x26#x8FDB;\x26#x540E;\x26#x9000;\x26#x901A;\x26#x8FC7;currentIndex\x26#xFF0C;\x26#x6709;\x26#x4E00;\x26#x4E2A;\x26#x5C0F;\x26#x95EE;\x26#x9898;\x26#xFF0C;\x26#x6682;\x26#x505C;\x26#x540E;\x26#x5207;\x26#x6362;\x26#x5230;\x26#x4E0B;\x26#x4E00;\x26#x9996;\x26#x6B4C;\x26#x8981;\x26#x81EA;\x26#x52A8;\x26#x64AD;\x26#x653E;\x26#xFF0C;\x26#x5FEB;\x26#x901F;\x26#x70B9;\x26#x51FB;\x26#x7684;\x26#x65F6;\x26#x5019;\x26#x7ED3;\x26#x5408; ready err\x26#x65B9;\x26#x6CD5;\x26#x907F;\x26#x514D;\x26#x5FEB;\x26#x901F;\x26#x70B9;\x26#x51FB;\x26#x9875;\x26#x9762;\x26#x62A5;\x26#x9519;\x3c\/strong\x3e\x3c\/p\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x6761;\x26#x5F62;\x26#x8FDB;\x26#x5EA6;\x26#x6761;\x26#xFF0C;\x26#x901A;\x26#x8FC7;audio\x26#x83B7;\x26#x53D6;\x26#x53EF;\x26#x4EE5;\x26#x8BFB;\x26#x5199;\x26#x7684;\x26#x5F53;\x26#x524D;\x26#x64AD;\x26#x653E;\x26#x65F6;\x26#x95F4;\x26#xFF0C;\x26#x5C06;\x26#x5176;\x26#x65F6;\x26#x95F4;\x26#x6233;\x26#x8F6C;\x26#x4E3A;\x26#x65F6;\x26#x5206;\x26#x79D2;\x26#x683C;\x26#x5F0F;\x26#xFF0C;\x26#x901A;\x26#x8FC7;_pad\x26#x7ED9;\x26#x79D2;\x26#x4F4D;\x26#x524D;\x26#x8865;\x26#x96F6;\x26#xFF0C;\x26#x505A;\x26#x5230;\x26#x4E0E;\x26#x8BBE;\x26#x8BA1;\x26#x56FE;\x26#x4E00;\x26#x81F4;\x26#xFF0C;\x26#x5B9A;\x26#x4E49;\x26#x57FA;\x26#x7840;\x26#x7EC4;\x26#x4EF6;progress-bar\x26#xFF0C;\x26#x4E8B;\x26#x4EF6;\x26#x62D6;\x26#x52A8;\x26#x548C;\x26#x70B9;\x26#x51FB;\x26#x6EDA;\x26#x52A8;\x26#x6761;\x26#x7684;\x26#x4EA4;\x26#x4E92;\x26#x5B9E;\x26#x73B0;\x26#xFF0C;\x26#x4E5F;\x26#x5C31;\x26#x662F;\x26#x8BF4;\x26#x62D6;\x26#x52A8;\x26#x65E0;\x26#x975E;\x26#x5C31;\x26#x662F;\x26#x4E09;\x26#x4E2A;\x26#x4E8B;\x26#x4EF6;\x26#xFF0C;start move end\x26#xFF0C;\x26#x62D6;\x26#x52A8;\x26#x5F00;\x26#x59CB;\x26#x524D;\x26#x52A0;\x26#x4E00;\x26#x4E2A;\x26#x5F00;\x26#x5173;\x26#x8868;\x26#x793A;\x26#x521D;\x26#x59CB;\x26#x5316;\x26#x5B8C;\x26#x6210;\x26#xFF0C;\x26#x5982;\x26#x679C;\x26#x62D6;\x26#x52A8;\x26#x524D;\x26#x662F;\x26#x6682;\x26#x505C;\x26#x72B6;\x26#x6001;\x26#xFF0C;\x26#x62D6;\x26#x52A8;\x26#x540E;\x26#x518D;\x26#x8BA9;\x26#x5176;\x26#x64AD;\x26#x653E;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cp\x3e\x3cstrong\x3e\x26#x5706;\x26#x5F62;\x26#x8FDB;\x26#x5EA6;\x26#x6761;\x26#xFF0C;\x26#x7528;\x26#x5230;\x26#x4E86;SVG\x26#x518D;\x26#x901A;\x26#x8FC7;\x26#x4E24;\x26#x4E2A;circle\x26#x5B9E;\x26#x73B0;\x26#xFF0C;\x26#x5B8C;\x26#x5168;\x26#x53EF;\x26#x4EE5;\x26#x5E94;\x26#x7528;\x26#x5230;\x26#x5B9E;\x26#x9645;\x26#x5DE5;\x26#x4F5C;\x26#x4E2D;\x3c\/strong\x3e\x3c\/p\x3e\x3cblockquote\x3e\x3ccode\x3e\x26#x64AD;\x26#x653E;\x26#x6A21;\x26#x5F0F;\x26#xFF0C;\x26#x7528;\x26#x5230;util\x26#x91CC;\x26#x9762;\x26#x7684;shuttle\x26#x51FD;\x26#x6570;\x26#x628A;\x26#x6570;\x26#x7EC4;\x26#x6253;\x26#x4E71;\x26#xFF0C;\x26#x7528;\x26#x5230;es6\x26#x7684;findindex\x26#x51FD;\x26#x6570;\x26#xFF0C;\x26#x7531;\x26#x4E8E;\x26#x8981;\x26#x5B9E;\x26#x65F6;\x26#x6539;\x26#x53D8;currentSong\x26#xFF0C;\x26#x7236;\x26#x7EC4;\x26#x4EF6;\x26#x76D1;\x26#x542C;\x26#x4E8B;\x26#x4EF6;\x26#x4F1A;\x26#x88AB;\x26#x89E6;\x26#x53D1;\x26#x6240;\x26#x4EE5;\x26#x505A;\x26#x4E86;\x26#x4E00;\x26#x4E2A;\x26#x5224;\x26#x65AD;\x26#xFF0C;\x26#x5982;\x26#x679C;id\x26#x76F8;\x26#x540C;\x26#x4EC0;\x26#x4E48;\x26#x90FD;\x26#x4E0D;\x26#x9519;\x26#xFF0C;\x26#x56E0;\x26#x4E3A;\x26#x8FD9;\x26#x4E2A;\x26#x65F6;\x26#x5019;\x26#x8FD8;\x26#x6CA1;\x26#x89E6;\x26#x53D1;\x26#x4E8B;\x26#x4EF6;\x3c\/code\x3e\x3c\/blockquote\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;progress-bar\x26quot; ref=\x26quot;progressBar\x26quot; @click=\x26quot;progressClick\x26quot;\x26gt;\n    \x26lt;div class=\x26quot;bar-inner\x26quot;\x26gt;\n      \x26lt;div class=\x26quot;progress\x26quot; ref=\x26quot;progress\x26quot;\x26gt;\x26lt;\/div\x26gt;\n      \x26lt;div class=\x26quot;progress-btn-wrapper\x26quot; ref=\x26quot;progressBtn\x26quot;\n           @touchstart.prevent=\x26quot;progressTouchStart\x26quot;\n           @touchmove.prevent=\x26quot;progressTouchMove\x26quot;\n           @touchend=\x26quot;progressTouchEnd\x26quot;\n      \x26gt;\n        \x26lt;div class=\x26quot;progress-btn\x26quot;\x26gt;\x26lt;\/div\x26gt;\n      \x26lt;\/div\x26gt;\n    \x26lt;\/div\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script\x26gt;\n  import {prefixStyle} from \x26apos;common\/js\/dom\x26apos;\n\n  const progressBtnWidth = 16\n  const transform = prefixStyle(\x26apos;transform\x26apos;)\n\n  export default {\n    props: {\n      percent: {\n        type: Number,\n        default: 0\n      }\n    },\n    created() {\n      this.touch = {}\n    },\n    methods: {\n      progressTouchStart(e) {\n        this.touch.initiated = true\n        this.touch.startX = e.touches[0].pageX\n        this.touch.left = this.$refs.progress.clientWidth\n      },\n      progressTouchMove(e) {\n        if (!this.touch.initiated) {\n          return\n        }\n        const deltaX = e.touches[0].pageX - this.touch.startX\n        const offsetWidth = Math.min(this.$refs.progressBar.clientWidth - progressBtnWidth, Math.max(0, this.touch.left \x2b deltaX))\n        this._offset(offsetWidth)\n      },\n      progressTouchEnd() {\n        this.touch.initiated = false\n        this._triggerPercent()\n      },\n      progressClick(e) {\n        const rect = this.$refs.progressBar.getBoundingClientRect()\n        const offsetWidth = e.pageX - rect.left\n        this._offset(offsetWidth)\n        \/\/ \x26#x8FD9;\x26#x91CC;\x26#x5F53;\x26#x6211;\x26#x4EEC;\x26#x70B9;\x26#x51FB; progressBtn \x26#x7684;\x26#x65F6;\x26#x5019;\x26#xFF0C;e.offsetX \x26#x83B7;\x26#x53D6;\x26#x4E0D;\x26#x5BF9;\n        \/\/ this._offset(e.offsetX)\n        this._triggerPercent()\n      },\n      _triggerPercent() {\n        const barWidth = this.$refs.progressBar.clientWidth - progressBtnWidth\n        const percent = this.$refs.progress.clientWidth \/ barWidth\n        this.$emit(\x26apos;percentChange\x26apos;, percent)\n      },\n      _offset(offsetWidth) {\n        this.$refs.progress.style.width = `${offsetWidth}px`\n        this.$refs.progressBtn.style[transform] = `translate3d(${offsetWidth}px,0,0)`\n      }\n    },\n    watch: {\n      percent(newPercent) {\n        if (newPercent \x26gt;= 0 \x26amp;\x26amp; !this.touch.initiated) {\n          const barWidth = this.$refs.progressBar.clientWidth - progressBtnWidth\n          const offsetWidth = newPercent * barWidth\n          this._offset(offsetWidth)\n        }\n      }\n    }\n  }\n\x26lt;\/script\x26gt;\n\n\x26lt;style scoped lang=\x26quot;stylus\x26quot; rel=\x26quot;stylesheet\/stylus\x26quot;\x26gt;\n  @import \x26quot;~common\/stylus\/variable\x26quot;\n\n  .progress-bar\n    height: 30px\n    .bar-inner\n      position: relative\n      top: 13px\n      height: 4px\n      background: rgba(0, 0, 0, 0.3)\n      .progress\n        position: absolute\n        height: 100%\n        background: $color-theme\n      .progress-btn-wrapper\n        position: absolute\n        left: -8px\n        top: -13px\n        width: 30px\n        height: 30px\n        .progress-btn\n          position: relative\n          top: 7px\n          left: 7px\n          box-sizing: border-box\n          width: 16px\n          height: 16px\n          border: 3px solid $color-text\n          border-radius: 50%\n          background: $color-theme\n\x26lt;\/style\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;progress-circle\x26quot;\x26gt;\n    \x26lt;svg :width=\x26quot;radius\x26quot; :height=\x26quot;radius\x26quot; viewBox=\x26quot;0 0 100 100\x26quot; version=\x26quot;1.1\x26quot; xmlns=\x26quot;http:\/\/www.w3.org\/2000\/svg\x26quot;\x26gt;\n      \x26lt;circle class=\x26quot;progress-background\x26quot; r=\x26quot;50\x26quot; cx=\x26quot;50\x26quot; cy=\x26quot;50\x26quot; fill=\x26quot;transparent\x26quot;\/\x26gt;\n      \x26lt;circle class=\x26quot;progress-bar\x26quot; r=\x26quot;50\x26quot; cx=\x26quot;50\x26quot; cy=\x26quot;50\x26quot; fill=\x26quot;transparent\x26quot; :stroke-dasharray=\x26quot;dashArray\x26quot;\n              :stroke-dashoffset=\x26quot;dashOffset\x26quot;\/\x26gt;\n    \x26lt;\/svg\x26gt;\n    \x26lt;slot\x26gt;\x26lt;\/slot\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;text\/ecmascript-6\x26quot;\x26gt;\n  export default {\n    props: {\n      radius: {\n        type: Number,\n        default: 100\n      },\n      percent: {\n        type: Number,\n        default: 0\n      }\n    },\n    data() {\n      return {\n        dashArray: Math.PI * 100\n      }\n    },\n    computed: {\n      dashOffset() {\n        return (1 - this.percent) * this.dashArray\n      }\n    }\n  }\n\x26lt;\/script\x26gt;\n\n\x26lt;style scoped lang=\x26quot;stylus\x26quot; rel=\x26quot;stylesheet\/stylus\x26quot;\x26gt;\n  @import \x26quot;~common\/stylus\/variable\x26quot;\n\n  .progress-circle\n    position: relative\n    circle\n      stroke-width: 8px\n      transform-origin: center\n      \x26amp;.progress-background\n        transform: scale(0.9)\n        stroke: $color-theme-d\n      \x26amp;.progress-bar\n        transform: scale(0.9) rotate(-90deg)\n        stroke: $color-theme\n\x26lt;\/style\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\x3cpre\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;div class=\x26quot;player\x26quot; v-show=\x26quot;playlist.length\x26gt;0\x26quot;\x26gt;\n    \x26lt;transition name=\x26quot;normal\x26quot;\n                @enter=\x26quot;enter\x26quot;\n                @after-enter=\x26quot;afterEnter\x26quot;\n                @leave=\x26quot;leave\x26quot;\n                @after-leave=\x26quot;afterLeave\x26quot;\n    \x26gt;\n      \x26lt;div class=\x26quot;normal-player\x26quot; v-show=\x26quot;fullScreen\x26quot;\x26gt;\n        \x26lt;div class=\x26quot;background\x26quot;\x26gt;\n          \x26lt;img width=\x26quot;100%\x26quot; height=\x26quot;100%\x26quot; :src=\x26quot;currentSong.image\x26quot;\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;top\x26quot;\x26gt;\n          \x26lt;div class=\x26quot;back\x26quot; @click=\x26quot;back\x26quot;\x26gt;\n            \x26lt;i class=\x26quot;icon-back\x26quot;\x26gt;\x26lt;\/i\x26gt;\n          \x26lt;\/div\x26gt;\n          \x26lt;h1 class=\x26quot;title\x26quot; v-html=\x26quot;currentSong.name\x26quot;\x26gt;\x26lt;\/h1\x26gt;\n          \x26lt;h2 class=\x26quot;subtitle\x26quot; v-html=\x26quot;currentSong.singer\x26quot;\x26gt;\x26lt;\/h2\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;middle\x26quot;\n             @touchstart.prevent=\x26quot;middleTouchStart\x26quot;\n             @touchmove.prevent=\x26quot;middleTouchMove\x26quot;\n             @touchend=\x26quot;middleTouchEnd\x26quot;\n        \x26gt;\n          \x26lt;div class=\x26quot;middle-l\x26quot; ref=\x26quot;middleL\x26quot;\x26gt;\n            \x26lt;div class=\x26quot;cd-wrapper\x26quot; ref=\x26quot;cdWrapper\x26quot;\x26gt;\n              \x26lt;div class=\x26quot;cd\x26quot; :class=\x26quot;cdCls\x26quot;\x26gt;\n                \x26lt;img class=\x26quot;image\x26quot; :src=\x26quot;currentSong.image\x26quot;\x26gt;\n              \x26lt;\/div\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;div class=\x26quot;playing-lyric-wrapper\x26quot;\x26gt;\n              \x26lt;div class=\x26quot;playing-lyric\x26quot;\x26gt;{{playingLyric}}\x26lt;\/div\x26gt;\n            \x26lt;\/div\x26gt;\n          \x26lt;\/div\x26gt;\n          \x26lt;scroll class=\x26quot;middle-r\x26quot; ref=\x26quot;lyricList\x26quot; :data=\x26quot;currentLyric \x26amp;\x26amp; currentLyric.lines\x26quot;\x26gt;\n            \x26lt;div class=\x26quot;lyric-wrapper\x26quot;\x26gt;\n              \x26lt;div v-if=\x26quot;currentLyric\x26quot;\x26gt;\n                \x26lt;p ref=\x26quot;lyricLine\x26quot;\n                   class=\x26quot;text\x26quot;\n                   :class=\x26quot;{\x26apos;current\x26apos;: currentLineNum ===index}\x26quot;\n                   v-for=\x26quot;(line,index) in currentLyric.lines\x26quot;\x26gt;{{line.txt}}\x26lt;\/p\x26gt;\n              \x26lt;\/div\x26gt;\n            \x26lt;\/div\x26gt;\n          \x26lt;\/scroll\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;bottom\x26quot;\x26gt;\n          \x26lt;div class=\x26quot;dot-wrapper\x26quot;\x26gt;\n            \x26lt;span class=\x26quot;dot\x26quot; :class=\x26quot;{\x26apos;active\x26apos;:currentShow===\x26apos;cd\x26apos;}\x26quot;\x26gt;\x26lt;\/span\x26gt;\n            \x26lt;span class=\x26quot;dot\x26quot; :class=\x26quot;{\x26apos;active\x26apos;:currentShow===\x26apos;lyric\x26apos;}\x26quot;\x26gt;\x26lt;\/span\x26gt;\n          \x26lt;\/div\x26gt;\n          \x26lt;div class=\x26quot;progress-wrapper\x26quot;\x26gt;\n            \x26lt;span class=\x26quot;time time-l\x26quot;\x26gt;{{format(currentTime)}}\x26lt;\/span\x26gt;\n            \x26lt;div class=\x26quot;progress-bar-wrapper\x26quot;\x26gt;\n              \x26lt;progress-bar :percent=\x26quot;percent\x26quot; @percentChange=\x26quot;onProgressBarChange\x26quot;\x26gt;\x26lt;\/progress-bar\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;span class=\x26quot;time time-r\x26quot;\x26gt;{{format(currentSong.duration)}}\x26lt;\/span\x26gt;\n          \x26lt;\/div\x26gt;\n          \x26lt;div class=\x26quot;operators\x26quot;\x26gt;\n            \x26lt;div class=\x26quot;icon i-left\x26quot; @click=\x26quot;changeMode\x26quot;\x26gt;\n              \x26lt;i :class=\x26quot;iconMode\x26quot;\x26gt;\x26lt;\/i\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;div class=\x26quot;icon i-left\x26quot; :class=\x26quot;disableCls\x26quot;\x26gt;\n              \x26lt;i @click=\x26quot;prev\x26quot; class=\x26quot;icon-prev\x26quot;\x26gt;\x26lt;\/i\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;div class=\x26quot;icon i-center\x26quot; :class=\x26quot;disableCls\x26quot;\x26gt;\n              \x26lt;i @click=\x26quot;togglePlaying\x26quot; :class=\x26quot;playIcon\x26quot;\x26gt;\x26lt;\/i\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;div class=\x26quot;icon i-right\x26quot; :class=\x26quot;disableCls\x26quot;\x26gt;\n              \x26lt;i @click=\x26quot;next\x26quot; class=\x26quot;icon-next\x26quot;\x26gt;\x26lt;\/i\x26gt;\n            \x26lt;\/div\x26gt;\n            \x26lt;div class=\x26quot;icon i-right\x26quot;\x26gt;\n              \x26lt;i @click=\x26quot;toggleFavorite(currentSong)\x26quot; class=\x26quot;icon\x26quot; :class=\x26quot;getFavoriteIcon(currentSong)\x26quot;\x26gt;\x26lt;\/i\x26gt;\n            \x26lt;\/div\x26gt;\n          \x26lt;\/div\x26gt;\n        \x26lt;\/div\x26gt;\n      \x26lt;\/div\x26gt;\n    \x26lt;\/transition\x26gt;\n    \x26lt;transition name=\x26quot;mini\x26quot;\x26gt;\n      \x26lt;div class=\x26quot;mini-player\x26quot; v-show=\x26quot;!fullScreen\x26quot; @click=\x26quot;open\x26quot;\x26gt;\n        \x26lt;div class=\x26quot;icon\x26quot;\x26gt;\n          \x26lt;img :class=\x26quot;cdCls\x26quot; width=\x26quot;40\x26quot; height=\x26quot;40\x26quot; :src=\x26quot;currentSong.image\x26quot;\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;text\x26quot;\x26gt;\n          \x26lt;h2 class=\x26quot;name\x26quot; v-html=\x26quot;currentSong.name\x26quot;\x26gt;\x26lt;\/h2\x26gt;\n          \x26lt;p class=\x26quot;desc\x26quot; v-html=\x26quot;currentSong.singer\x26quot;\x26gt;\x26lt;\/p\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;control\x26quot;\x26gt;\n          \x26lt;progress-circle :radius=\x26quot;radius\x26quot; :percent=\x26quot;percent\x26quot;\x26gt;\n            \x26lt;i @click.stop=\x26quot;togglePlaying\x26quot; class=\x26quot;icon-mini\x26quot; :class=\x26quot;miniIcon\x26quot;\x26gt;\x26lt;\/i\x26gt;\n          \x26lt;\/progress-circle\x26gt;\n        \x26lt;\/div\x26gt;\n        \x26lt;div class=\x26quot;control\x26quot; @click.stop=\x26quot;showPlaylist\x26quot;\x26gt;\n          \x26lt;i class=\x26quot;icon-playlist\x26quot;\x26gt;\x26lt;\/i\x26gt;\n        \x26lt;\/div\x26gt;\n      \x26lt;\/div\x26gt;\n    \x26lt;\/transition\x26gt;\n    \x26lt;playlist ref=\x26quot;playlist\x26quot;\x26gt;\x26lt;\/playlist\x26gt;\n    \x26lt;audio ref=\x26quot;audio\x26quot; :src=\x26quot;currentSong.url\x26quot; @play=\x26quot;ready\x26quot; @error=\x26quot;error\x26quot; @timeupdate=\x26quot;updateTime\x26quot;\n           @ended=\x26quot;end\x26quot;\x26gt;\x26lt;\/audio\x26gt;\n  \x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\n\x26lt;script type=\x26quot;\x26quot;\x26gt;\n  import {mapGetters, mapMutations, mapActions} from \x26apos;vuex\x26apos;\n  import animations from \x26apos;create-keyframe-animation\x26apos;\n  import {prefixStyle} from \x26apos;common\/js\/dom\x26apos;\n  import ProgressBar from \x26apos;base\/progress-bar\/progress-bar\x26apos;\n  import ProgressCircle from \x26apos;base\/progress-circle\/progress-circle\x26apos;\n  import {playMode} from \x26apos;common\/js\/config\x26apos;\n  import Lyric from \x26apos;lyric-parser\x26apos;\n  import Scroll from \x26apos;base\/scroll\/scroll\x26apos;\n  import {playerMixin} from \x26apos;common\/js\/mixin\x26apos;\n  import Playlist from \x26apos;components\/playlist\/playlist\x26apos;\n\n  const transform = prefixStyle(\x26apos;transform\x26apos;)\n  const transitionDuration = prefixStyle(\x26apos;transitionDuration\x26apos;)\n\n  export default {\n    mixins: [playerMixin],\n    data() {\n      return {\n        songReady: false,\n        currentTime: 0,\n        radius: 32,\n        currentLyric: null,\n        currentLineNum: 0,\n        currentShow: \x26apos;cd\x26apos;,\n        playingLyric: \x26apos;\x26apos;\n      }\n    },\n    computed: {\n      cdCls() {\n        return this.playing ? \x26apos;play\x26apos; : \x26apos;play pause\x26apos;\n      },\n      playIcon() {\n        return this.playing ? \x26apos;icon-pause\x26apos; : \x26apos;icon-play\x26apos;\n      },\n      miniIcon() {\n        return this.playing ? \x26apos;icon-pause-mini\x26apos; : \x26apos;icon-play-mini\x26apos;\n      },\n      disableCls() {\n        return this.songReady ? \x26apos;\x26apos; : \x26apos;disable\x26apos;\n      },\n      percent() {\n        return this.currentTime \/ this.currentSong.duration\n      },\n      ...mapGetters([\n        \x26apos;currentIndex\x26apos;,\n        \x26apos;fullScreen\x26apos;,\n        \x26apos;playing\x26apos;\n      ])\n    },\n    created() {\n      this.touch = {}\n    },\n    methods: {\n      back() {\n        this.setFullScreen(false)\n      },\n      open() {\n        this.setFullScreen(true)\n      },\n      enter(el, done) {\n        const {x, y, scale} = this._getPosAndScale()\n\n        let animation = {\n          0: {\n            transform: `translate3d(${x}px,${y}px,0) scale(${scale})`\n          },\n          60: {\n            transform: `translate3d(0,0,0) scale(1.1)`\n          },\n          100: {\n            transform: `translate3d(0,0,0) scale(1)`\n          }\n        }\n\n        animations.registerAnimation({\n          name: \x26apos;move\x26apos;,\n          animation,\n          presets: {\n            duration: 400,\n            easing: \x26apos;linear\x26apos;\n          }\n        })\n\n        animations.runAnimation(this.$refs.cdWrapper, \x26apos;move\x26apos;, done)\n      },\n      afterEnter() {\n        animations.unregisterAnimation(\x26apos;move\x26apos;)\n        this.$refs.cdWrapper.style.animation = \x26apos;\x26apos;\n      },\n      leave(el, done) {\n        this.$refs.cdWrapper.style.transition = \x26apos;all 0.4s\x26apos;\n        const {x, y, scale} = this._getPosAndScale()\n        this.$refs.cdWrapper.style[transform] = `translate3d(${x}px,${y}px,0) scale(${scale})`\n        this.$refs.cdWrapper.addEventListener(\x26apos;transitionend\x26apos;, done)\n      },\n      afterLeave() {\n        this.$refs.cdWrapper.style.transition = \x26apos;\x26apos;\n        this.$refs.cdWrapper.style[transform] = \x26apos;\x26apos;\n      },\n      togglePlaying() {\n        if (!this.songReady) {\n          return\n        }\n        this.setPlayingState(!this.playing)\n        if (this.currentLyric) {\n          this.currentLyric.togglePlay()\n        }\n      },\n      end() {\n        if (this.mode === playMode.loop) {\n          this.loop()\n        } else {\n          this.next()\n        }\n      },\n      loop() {\n        this.$refs.audio.currentTime = 0\n        this.$refs.audio.play()\n        this.setPlayingState(true)\n        if (this.currentLyric) {\n          this.currentLyric.seek(0)\n        }\n      },\n      next() {\n        if (!this.songReady) {\n          return\n        }\n        if (this.playlist.length === 1) {\n          this.loop()\n          return\n        } else {\n          let index = this.currentIndex \x2b 1\n          if (index === this.playlist.length) {\n            index = 0\n          }\n          this.setCurrentIndex(index)\n          if (!this.playing) {\n            this.togglePlaying()\n          }\n        }\n        this.songReady = false\n      },\n      prev() {\n        if (!this.songReady) {\n          return\n        }\n        if (this.playlist.length === 1) {\n          this.loop()\n          return\n        } else {\n          let index = this.currentIndex - 1\n          if (index === -1) {\n            index = this.playlist.length - 1\n          }\n          this.setCurrentIndex(index)\n          if (!this.playing) {\n            this.togglePlaying()\n          }\n        }\n        this.songReady = false\n      },\n      ready() {\n        this.songReady = true\n        this.savePlayHistory(this.currentSong)\n      },\n      error() {\n        this.songReady = true\n      },\n      updateTime(e) {\n        this.currentTime = e.target.currentTime\n      },\n      format(interval) {\n        interval = interval | 0\n        const minute = interval \/ 60 | 0\n        const second = this._pad(interval % 60)\n        return `${minute}:${second}`\n      },\n      onProgressBarChange(percent) {\n        const currentTime = this.currentSong.duration * percent\n        this.$refs.audio.currentTime = currentTime\n        if (!this.playing) {\n          this.togglePlaying()\n        }\n        if (this.currentLyric) {\n          this.currentLyric.seek(currentTime * 1000)\n        }\n      },\n      getLyric() {\n        this.currentSong.getLyric().then((lyric) =\x26gt; {\n          if (this.currentSong.lyric !== lyric) {\n            return\n          }\n          this.currentLyric = new Lyric(lyric, this.handleLyric)\n          if (this.playing) {\n            this.currentLyric.play()\n          }\n        }).catch(() =\x26gt; {\n          this.currentLyric = null\n          this.playingLyric = \x26apos;\x26apos;\n          this.currentLineNum = 0\n        })\n      },\n      handleLyric({lineNum, txt}) {\n        this.currentLineNum = lineNum\n        if (lineNum \x26gt; 5) {\n          let lineEl = this.$refs.lyricLine[lineNum - 5]\n          this.$refs.lyricList.scrollToElement(lineEl, 1000)\n        } else {\n          this.$refs.lyricList.scrollTo(0, 0, 1000)\n        }\n        this.playingLyric = txt\n      },\n      showPlaylist() {\n        this.$refs.playlist.show()\n      },\n      middleTouchStart(e) {\n        this.touch.initiated = true\n        \/\/ \x26#x7528;\x26#x6765;\x26#x5224;\x26#x65AD;\x26#x662F;\x26#x5426;\x26#x662F;\x26#x4E00;\x26#x6B21;\x26#x79FB;\x26#x52A8;\n        this.touch.moved = false\n        const touch = e.touches[0]\n        this.touch.startX = touch.pageX\n        this.touch.startY = touch.pageY\n      },\n      middleTouchMove(e) {\n        if (!this.touch.initiated) {\n          return\n        }\n        const touch = e.touches[0]\n        const deltaX = touch.pageX - this.touch.startX\n        const deltaY = touch.pageY - this.touch.startY\n        if (Math.abs(deltaY) \x26gt; Math.abs(deltaX)) {\n          return\n        }\n        if (!this.touch.moved) {\n          this.touch.moved = true\n        }\n        const left = this.currentShow === \x26apos;cd\x26apos; ? 0 : -window.innerWidth\n        const offsetWidth = Math.min(0, Math.max(-window.innerWidth, left \x2b deltaX))\n        this.touch.percent = Math.abs(offsetWidth \/ window.innerWidth)\n        this.$refs.lyricList.$el.style[transform] = `translate3d(${offsetWidth}px,0,0)`\n        this.$refs.lyricList.$el.style[transitionDuration] = 0\n        this.$refs.middleL.style.opacity = 1 - this.touch.percent\n        this.$refs.middleL.style[transitionDuration] = 0\n      },\n      middleTouchEnd() {\n        if (!this.touch.moved) {\n          return\n        }\n        let offsetWidth\n        let opacity\n        if (this.currentShow === \x26apos;cd\x26apos;) {\n          if (this.touch.percent \x26gt; 0.1) {\n            offsetWidth = -window.innerWidth\n            opacity = 0\n            this.currentShow = \x26apos;lyric\x26apos;\n          } else {\n            offsetWidth = 0\n            opacity = 1\n          }\n        } else {\n          if (this.touch.percent \x26lt; 0.9) {\n            offsetWidth = 0\n            this.currentShow = \x26apos;cd\x26apos;\n            opacity = 1\n          } else {\n            offsetWidth = -window.innerWidth\n            opacity = 0\n          }\n        }\n        const time = 300\n        this.$refs.lyricList.$el.style[transform] = `translate3d(${offsetWidth}px,0,0)`\n        this.$refs.lyricList.$el.style[transitionDuration] = `${time}ms`\n        this.$refs.middleL.style.opacity = opacity\n        this.$refs.middleL.style[transitionDuration] = `${time}ms`\n        this.touch.initiated = false\n      },\n      _pad(num, n = 2) {\n        let len = num.toString().length\n        while (len \x26lt; n) {\n          num = \x26apos;0\x26apos; \x2b num\n          len\x2b\x2b\n        }\n        return num\n      },\n      _getPosAndScale() {\n        const targetWidth = 40\n        const paddingLeft = 40\n        const paddingBottom = 30\n        const paddingTop = 80\n        const width = window.innerWidth * 0.8\n        const scale = targetWidth \/ width\n        const x = -(window.innerWidth \/ 2 - paddingLeft)\n        const y = window.innerHeight - paddingTop - width \/ 2 - paddingBottom\n        return {\n          x,\n          y,\n          scale\n        }\n      },\n      ...mapMutations({\n        setFullScreen: \x26apos;SET_FULL_SCREEN\x26apos;\n      }),\n      ...mapActions([\n        \x26apos;savePlayHistory\x26apos;\n      ])\n    },\n    watch: {\n      currentSong(newSong, oldSong) {\n        if (!newSong.id) {\n          return\n        }\n        if (newSong.id === oldSong.id) {\n          return\n        }\n        if (this.currentLyric) {\n          this.currentLyric.stop()\n          this.currentTime = 0\n          this.playingLyric = \x26apos;\x26apos;\n          this.currentLineNum = 0\n        }\n        clearTimeout(this.timer)\n        this.timer = setTimeout(() =\x26gt; {\n          this.$refs.audio.play()\n          this.getLyric()\n        }, 1000)\n      },\n      playing(newPlaying) {\n        const audio = this.$refs.audio\n        this.$nextTick(() =\x26gt; {\n          newPlaying ? audio.play() : audio.pause()\n        })\n      },\n      fullScreen(newVal) {\n        if (newVal) {\n          setTimeout(() =\x26gt; {\n            this.$refs.lyricList.refresh()\n          }, 20)\n        }\n      }\n    },\n    components: {\n      ProgressBar,\n      ProgressCircle,\n      Scroll,\n      Playlist\n    }\n  }\n\x26lt;\/script\x26gt;\n\n\x26lt;style scoped lang=\x26quot;stylus\x26quot; rel=\x26quot;stylesheet\/stylus\x26quot;\x26gt;\n  @import \x26quot;~common\/stylus\/variable\x26quot;\n  @import \x26quot;~common\/stylus\/mixin\x26quot;\n\n  .player\n    .normal-player\n      position: fixed\n      left: 0\n      right: 0\n      top: 0\n      bottom: 0\n      z-index: 150\n      background: $color-background\n      .background\n        position: absolute\n        left: 0\n        top: 0\n        width: 100%\n        height: 100%\n        z-index: -1\n        opacity: 0.6\n        filter: blur(20px)\n      .top\n        position: relative\n        margin-bottom: 25px\n        .back\n          position absolute\n          top: 0\n          left: 6px\n          z-index: 50\n          .icon-back\n            display: block\n            padding: 9px\n            font-size: $font-size-large-x\n            color: $color-theme\n            transform: rotate(-90deg)\n        .title\n          width: 70%\n          margin: 0 auto\n          line-height: 40px\n          text-align: center\n          no-wrap()\n          font-size: $font-size-large\n          color: $color-text\n        .subtitle\n          line-height: 20px\n          text-align: center\n          font-size: $font-size-medium\n          color: $color-text\n      .middle\n        position: fixed\n        width: 100%\n        top: 80px\n        bottom: 170px\n        white-space: nowrap\n        font-size: 0\n        .middle-l\n          display: inline-block\n          vertical-align: top\n          position: relative\n          width: 100%\n          height: 0\n          padding-top: 80%\n          .cd-wrapper\n            position: absolute\n            left: 10%\n            top: 0\n            width: 80%\n            height: 100%\n            .cd\n              width: 100%\n              height: 100%\n              box-sizing: border-box\n              border: 10px solid rgba(255, 255, 255, 0.1)\n              border-radius: 50%\n              \x26amp;.play\n                animation: rotate 20s linear infinite\n              \x26amp;.pause\n                animation-play-state: paused\n              .image\n                position: absolute\n                left: 0\n                top: 0\n                width: 100%\n                height: 100%\n                border-radius: 50%\n\n          .playing-lyric-wrapper\n            width: 80%\n            margin: 30px auto 0 auto\n            overflow: hidden\n            text-align: center\n            .playing-lyric\n              height: 20px\n              line-height: 20px\n              font-size: $font-size-medium\n              color: $color-text-l\n        .middle-r\n          display: inline-block\n          vertical-align: top\n          width: 100%\n          height: 100%\n          overflow: hidden\n          .lyric-wrapper\n            width: 80%\n            margin: 0 auto\n            overflow: hidden\n            text-align: center\n            .text\n              line-height: 32px\n              color: $color-text-l\n              font-size: $font-size-medium\n              \x26amp;.current\n                color: $color-text\n      .bottom\n        position: absolute\n        bottom: 50px\n        width: 100%\n        .dot-wrapper\n          text-align: center\n          font-size: 0\n          .dot\n            display: inline-block\n            vertical-align: middle\n            margin: 0 4px\n            width: 8px\n            height: 8px\n            border-radius: 50%\n            background: $color-text-l\n            \x26amp;.active\n              width: 20px\n              border-radius: 5px\n              background: $color-text-ll\n        .progress-wrapper\n          display: flex\n          align-items: center\n          width: 80%\n          margin: 0px auto\n          padding: 10px 0\n          .time\n            color: $color-text\n            font-size: $font-size-small\n            flex: 0 0 30px\n            line-height: 30px\n            width: 30px\n            \x26amp;.time-l\n              text-align: left\n            \x26amp;.time-r\n              text-align: right\n          .progress-bar-wrapper\n            flex: 1\n        .operators\n          display: flex\n          align-items: center\n          .icon\n            flex: 1\n            color: $color-theme\n            \x26amp;.disable\n              color: $color-theme-d\n            i\n              font-size: 30px\n          .i-left\n            text-align: right\n          .i-center\n            padding: 0 20px\n            text-align: center\n            i\n              font-size: 40px\n          .i-right\n            text-align: left\n          .icon-favorite\n            color: $color-sub-theme\n      \x26amp;.normal-enter-active, \x26amp;.normal-leave-active\n        transition: all 0.4s\n        .top, .bottom\n          transition: all 0.4s cubic-bezier(0.86, 0.18, 0.82, 1.32)\n      \x26amp;.normal-enter, \x26amp;.normal-leave-to\n        opacity: 0\n        .top\n          transform: translate3d(0, -100px, 0)\n        .bottom\n          transform: translate3d(0, 100px, 0)\n    .mini-player\n      display: flex\n      align-items: center\n      position: fixed\n      left: 0\n      bottom: 0\n      z-index: 180\n      width: 100%\n      height: 60px\n      background: $color-highlight-background\n      \x26amp;.mini-enter-active, \x26amp;.mini-leave-active\n        transition: all 0.4s\n      \x26amp;.mini-enter, \x26amp;.mini-leave-to\n        opacity: 0\n      .icon\n        flex: 0 0 40px\n        width: 40px\n        padding: 0 10px 0 20px\n        img\n          border-radius: 50%\n          \x26amp;.play\n            animation: rotate 10s linear infinite\n          \x26amp;.pause\n            animation-play-state: paused\n      .text\n        display: flex\n        flex-direction: column\n        justify-content: center\n        flex: 1\n        line-height: 20px\n        overflow: hidden\n        .name\n          margin-bottom: 2px\n          no-wrap()\n          font-size: $font-size-medium\n          color: $color-text\n        .desc\n          no-wrap()\n          font-size: $font-size-small\n          color: $color-text-d\n      .control\n        flex: 0 0 30px\n        width: 30px\n        padding: 0 10px\n        .icon-play-mini, .icon-pause-mini, .icon-playlist\n          font-size: 30px\n          color: $color-theme-d\n        .icon-mini\n          font-size: 32px\n          position: absolute\n          left: 0\n          top: 0\n\n  @keyframes rotate\n    0%\n      transform: rotate(0)\n    100%\n      transform: rotate(360deg)\n\x26lt;\/style\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vuejs2.0 高级实战 全网稀缺 独立开发专属音乐WebAPP 更新中。。。</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000016137164">https://segmentfault.com/a/1190000016137164</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/b588ec07/" target="_blank">https://alili.tech/archive/b588ec07/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>