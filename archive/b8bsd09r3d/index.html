<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="指尖一点歌声来--微信小程序之仿网易云音乐心得"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>指尖一点歌声来--微信小程序之仿网易云音乐心得 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/b8bsd09r3d/",
				"appid": "1613049289050283", 
				"title": "指尖一点歌声来--微信小程序之仿网易云音乐心得 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-22T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/cyi6oc58okq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/80944qygww/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&text=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&text=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&title=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&is_video=false&description=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&title=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&title=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&title=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fb8bsd09r3d%2f&title=%e6%8c%87%e5%b0%96%e4%b8%80%e7%82%b9%e6%ad%8c%e5%a3%b0%e6%9d%a5--%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e4%b9%8b%e4%bb%bf%e7%bd%91%e6%98%93%e4%ba%91%e9%9f%b3%e4%b9%90%e5%bf%83%e5%be%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">指尖一点歌声来--微信小程序之仿网易云音乐心得</h1><div class="meta"><div class="postdate"><time datetime="2018-12-22" itemprop="datePublished">2018-12-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e为了提高自己，最近在学习微信小程序，选题是仿网易云音乐。期间踩过了大把的坑，bug出现的难受和解决bug欢喜，一直是伴随我阶段性学习这个项目的心情。初步完成了项目的主要功能，来分享一下自己的心路历程。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e实现功能\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e列表式渲染数据\x3c\/li\x3e\n\x3cli\x3e图片轮播\x3c\/li\x3e\n\x3cli\x3e传参页面跳转\x3c\/li\x3e\n\x3cli\x3e按钮点击弹窗\x3c\/li\x3e\n\x3cli\x3e音乐播放、暂停、上一曲、下一曲\x3c\/li\x3e\n\x3cli\x3e选歌播放\x3c\/li\x3e\n\x3cli\x3e嵌套template页及传递数据\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e项目展示\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e首屏\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439707?w=520\x26amp;h=769\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439707?w=520\x26amp;h=769\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（图一）\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e页面的切换\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439708?w=520\x26amp;h=769\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439708?w=520\x26amp;h=769\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（图二）\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e播放效果\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439709?w=520\x26amp;h=769\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439709?w=520\x26amp;h=769\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（图三）\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e暂停、上一首、下一首\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439710?w=537\x26amp;h=773\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439710?w=537\x26amp;h=773\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（图四）\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e弹窗及选歌\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439711?w=537\x26amp;h=773\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439711?w=537\x26amp;h=773\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（图五）\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e项目实现\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e项目思想\x3c\/h3\x3e\n\x3cp\x3e*\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22小程序的开发模式是MVVM模式。简单的讲就是页面绑定的值改变，页面就发生改变；页面改变，页面的绑定的值改变。这样的话，列表式渲染就十分好用。只用写一个通用的骨架，然后使用列表渲染生成页面，这样非常省时间省力气。所以这个项目，大量充斥着列表渲染。\n\n有的页面部分可能会出现在好几个页面上。在这个项目里，页面顶部的部分出现在多个部分中，同时小程序里很多地方需要用到**弹性布局居中效果**于是我便把常用css样式写在app.wxss中，这样可以复用。\n\n页面右上角的四根竖线出现在多个页面中，那变可以单独拿出来写，然后在通过template，导入至不同的页面中去。\n\n选歌很需要解决的一点就是怎么才知道选择的是哪一首歌，歌单是哪一个歌单。一个页面获取到其他页面想传递过来的数据的方式有很多。其一、可以通过url跳转的时候，传参跳转，再通过跳转页面中onload事件添加options参数获得。其二、可以通过点击事件改变全局属性globalData的某项的值，然后再跳转页面中得到globalData中相应的值，便能知道页面跳转中想传递的值。这个项目使用了这两种方式，url传参获取播放第几首歌曲，全局属性globalData传递歌单。\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e小程序的开发模式是MVVM模式。简单的讲就是页面绑定的值改变，页面就发生改变；页面改变，页面的绑定的值改变。这样的话，列表式渲染就十分好用。只用写一个通用的骨架，然后使用列表渲染生成页面，这样非常省时间省力气。所以这个项目，大量充斥着列表渲染。\n\n有的页面部分可能会出现在好几个页面上。在这个项目里，页面顶部的部分出现在多个部分中，同时小程序里很多地方需要用到**弹性布局居中效果**于是我便把常用css样式写在app.wxss中，这样可以复用。\n\n页面右上角的四根竖线出现在多个页面中，那变可以单独拿出来写，然后在通过template，导入至不同的页面中去。\n\n选歌很需要解决的一点就是怎么才知道选择的是哪一首歌，歌单是哪一个歌单。一个页面获取到其他页面想传递过来的数据的方式有很多。其一、可以通过url跳转的时候，传参跳转，再通过跳转页面中onload事件添加options参数获得。其二、可以通过点击事件改变全局属性\x3cspan class=\x22hljs-keyword\x22\x3eglobal\x3c\/span\x3eData的某项的值，然后再跳转页面中得到\x3cspan class=\x22hljs-keyword\x22\x3eglobal\x3c\/span\x3eData中相应的值，便能知道页面跳转中想传递的值。这个项目使用了这两种方式，url传参获取播放第几首歌曲，全局属性\x3cspan class=\x22hljs-keyword\x22\x3eglobal\x3c\/span\x3eData传递歌单。\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e项目资源\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e后台数据使用的是\x3ca href=\x22https:\/\/www.easy-mock.com\/login\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eEasy  Mock\x3c\/a\x3e假数据，一个方便的数据构建平台。\x3cbr\x3e当然还有方便的weui框架了，这个框架可以去github上拷贝，然后再根据weui示例，找到想要的想过，再去下载好了的文件里找到对应的代码，试一试便知道要如何使用了。\x3cbr\x3e图片和音乐的话，因为使用的是网络地址。如果直接从网站上，按F12找到资源然后提取的话，通常提取的资源过几天便会失效。所以我们需要百度音乐外链、图片外链，然后会有相应的网站，可以生成一个长期不失效的链接，供我们下载图片和音乐。\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e踩过的坑与爬坑路\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e坑爹的图片问题：\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e项目起步第一个问题便是图片存放与加载。一些需要推送的消息以图片的形式展示，那么这个图是千万不能存在本地，需要通过src链接网络地址然后下载显示。那么问题来了：\x3cstrong\x3e首页结构已经出来，图片却要延迟出来\x3c\/strong\x3e。页面则会出现这种情况：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439712?w=425\x26amp;h=344\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439712?w=425\x26amp;h=344\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e经过思考，发现首页图片轮播条有很多张图片，他们会同时加载。而需求最急的是显示好第一张图片，第一张图片加载完成后，再加载其他图片。这样能减少页面首加载中，图片加载的将近一半的网速占用。查文档发现，小程序中图片加载完成后，有一个加载完成事件\x3ccode\x3ebindload\x3c\/code\x3e。\x3cbr\x3e  因为使用的是列表渲染来填充页面，所以便可以让绑定渲染图片的数据showImage起始为空，这样页面就先不会渲染，然后第一张图加载完后，再给showImage赋值，然后就会自动渲染页面，加载其他图片了。这样就能提高页面的加载速度。\x3cbr\x3e  （备注:这里有些像懒加载的味道，在用户需要的时候加载图片）\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439713?w=1560\x26amp;h=366\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439713?w=1560\x26amp;h=366\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439714?w=517\x26amp;h=229\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439714?w=517\x26amp;h=229\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e这里有一个小小的\x3cstrong\x3e技巧\x3c\/strong\x3e，第一张图的swiper-item不参与页面渲染，这样第一张图就一定会进行加载。在第一张图加载完成后，再进行页面渲染。同时让swiper开始轮播效果和生成指示点。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e播放页面动画和还原\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e音频的后台播放\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e在播放界面时，一开始使用的\x3ccode\x3e\x26lt;audio\x26gt;\x3c\/code\x3e组件，洋洋洒洒敲下了一连串的代码，播放音乐，一切正常。但当我们前往另一个页面时，播放的音乐就没声音了。查了文档才知道\x3ccode\x3eaudio\x3c\/code\x3e并不能实现后台播放，实现后台播放的是\x3ccode\x3ewx.getBackgroundAudioPlayerState()\x3c\/code\x3e和\x3ccode\x3ewx.getBackgroundAudioManager()\x3c\/code\x3e两个api。前者在微信客户端1.2.0版本就不开始维护了，后者低版本需做兼容处理。这个项目我使用的是第二个api。\x3cbr\x3e（备注：\x3ca href=\x22https:\/\/mp.weixin.qq.com\/debug\/wxadoc\/dev\/api\/getBackgroundAudioManager.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewx.getBackgroundAudioManager()官方文档\x3c\/a\x3e）\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439715?w=633\x26amp;h=118\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439715?w=633\x26amp;h=118\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e值得注意的是，当音频对象的src取得链接时，就自动开始播放。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e播放状态。\x3cp\x3e歌曲播放时页面动起来，歌曲未播放时静止\x3c\/p\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439716?w=537\x26amp;h=773\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439716?w=537\x26amp;h=773\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22看见动画了，第一个反应是css的animation，后来经过思考，如果不进行dom操作就要控制动画的进行与否需要做的数据绑定就会很多，不方便使用。于是查文档发现`wx.createAnimation(OBJECT)`这个api，但使用这个api，如果需要做到动画的循环播放，要写的js也很多很麻烦。经过了各种踩坑，根据小程序中的`progress`进度条组件，发现一个很棒的方法，那就是行内样式绑定数据。\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs autohotkey\x22\x3e\x3ccode\x3e看见动画了，第一个反应是css的animation，后来经过思考，如果不进行dom操作就要控制动画的进行与否需要做的数据绑定就会很多，不方便使用。于是查文档发现`wx.createAnimation(OBJECT)`这个api，但使用这个api，如果需要做到动画的循环播放，要写的js也很多很麻烦。经过了各种踩坑，根据小程序中的`progress`进度条组件，发现一个很棒的方法，那就是行内样式绑定数据。\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（备注：指针动画简单，进行一次就结束，这里不提。。）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439717?w=730\x26amp;h=120\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439717?w=730\x26amp;h=120\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439718?w=822\x26amp;h=113\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439718?w=822\x26amp;h=113\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439719?w=499\x26amp;h=142\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439719?w=499\x26amp;h=142\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439720?w=775\x26amp;h=61\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439720?w=775\x26amp;h=61\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e（备注：进度条是小程序自带的组件，已播放时间完成方式和进度条相似，这里与动画效果一并提出）\x3c\/p\x3e\n\x3cp\x3e这样，只用在播放时，设计计时器，定时的按比列更改rotata、left、progress、的值，页面就会有相关改变。这个函数中，一开始便是清除计时器，因为有一个\x3cstrong\x3e坑点\x3c\/strong\x3e：点击下一曲或上一曲时，计时器并未清除，那么，便会有两个计时器同时作用于一个值得改变（这种头疼的情况相信很多人都遇到过）。把三个计时器（转盘、按钮、进度条）在函数运行的开始就做清除，这样就让每次调用函数时，都先清除上一层的计时器，做到只有一个计时器作用于一个值。这种方式，用少量的代码，形成了可控的动画效果，很是方便。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22（我在这收获了另一种写动画效果的方式，哈哈）\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e（我在这收获了另一种写动画效果的方式，哈哈）\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22next: function () {\n        \/\/ 全局定义了proSet rotSet timeSet，因为需要清除计时器\n        var timeCount;\n        clearInterval(proSet);\n        clearInterval(rotSet);\n        clearInterval(timeSet);\n        proSet = setInterval(() =\x3e {\n            if (this.data.progress \x3e= 100) {\n                i\x2b\x2b;\n                if(i==this.data.music.length){\n                    i=0;\n                }\n                app.globalData.i=i;\n                backgroundAudioManager.stop();                            \n                this.nameBackMusic();\n                timeCount = 0;\n                this.setData({\n                    progress: 0,\n                    left: 0,\n                    songTime: this.data.music[i].songTime,\n                    songer: this.data.music[i].songer,\n                    songName: this.data.music[i].songName,\n                    time: secondToDate(this.data.music[i].songTime)\n                });\n            }\n            else if (this.data.run == 0) {\n                clearInterval(proSet);\n                clearInterval(rotSet);\n                clearInterval(timeSet);\n            }\n            this.setData({\n                progress: 0.01 \x2b this.data.progress,\n                left: 0.0458 \x2b this.data.left\n            });\n        }, this.data.music[i].songTime \/ 10);\n        rotSet = setInterval(() =\x3e {\n            this.setData({\n                rotate: 1 \x2b this.data.rotate,\n            });\n        }, 24);\n        timeCount = backgroundAudioManager.currentTime;\n        if (typeof (backgroundAudioManager.currentTime) === \x26quot;undefined\x26quot;)\n        {\n            timeCount = 0;\n        }\n        timeSet = setInterval(()=\x3e{\n            timeCount\x2b\x2b;\n            this.setData({\n                currentTime: secondToDate(timeCount), \n                \/\/secondToDate用来把n秒转换为xx:xx的显示形式\n            });\n        },1000)\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3enext: function () {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局定义了proSet rotSet timeSet，因为需要清除计时器\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timeCount;\n        clearInterval(proSet);\n        clearInterval(rotSet);\n        clearInterval(timeSet);\n        proSet = setInterval(() =\x26gt; {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.progress \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e) {\n                i\x2b\x2b;\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(i==\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.music.length){\n                    i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                }\n                app.globalData.i=i;\n                backgroundAudioManager.stop();                            \n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.nameBackMusic();\n                timeCount = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n                    progress: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                    left: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                    songTime: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.music[i].songTime,\n                    songer: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.music[i].songer,\n                    songName: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.music[i].songName,\n                    time: secondToDate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.music[i].songTime)\n                });\n            }\n            \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.run == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                clearInterval(proSet);\n                clearInterval(rotSet);\n                clearInterval(timeSet);\n            }\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n                progress: \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.progress,\n                left: \x3cspan class=\x22hljs-number\x22\x3e0.0458\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.left\n            });\n        }, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.music[i].songTime \/ \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n        rotSet = setInterval(() =\x26gt; {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n                rotate: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.rotate,\n            });\n        }, \x3cspan class=\x22hljs-number\x22\x3e24\x3c\/span\x3e);\n        timeCount = backgroundAudioManager.currentTime;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (typeof (backgroundAudioManager.currentTime) === \x3cspan class=\x22hljs-string\x22\x3e\x22undefined\x22\x3c\/span\x3e)\n        {\n            timeCount = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n        timeSet = setInterval(()=\x26gt;{\n            timeCount\x2b\x2b;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n                currentTime: secondToDate(timeCount), \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/secondToDate用来把n秒转换为xx:xx的显示形式\x3c\/span\x3e\n            });\n        },\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e)\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e页面还原\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e在播放界面中，设计一个值\x3ccode\x3erun\x3c\/code\x3e初始值为0，用来记录是否播放，播放时run为1，暂停时run为0。在页面跳转在返回播放页面时，之前因为播放设置的data值会全部还原，导致页面静态显示（进度条不动、时间不增加等）。这个时候，全局属性globalData就上场了。不论是在选歌、播放、暂停的时候，globalData中的变量记录播放的状态（是否播放、播放哪一首歌等）。而播放页面重新打开会执行\x3ccode\x3eonShow()\x3c\/code\x3e生命周期函数，这个时候变可以从全局变量中得到播放的状态，然后决定播放页面是否要动起来和相应的数据）。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012439721\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012439721\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e因为页面第一次加载也会执行\x3ccode\x3eonShow()\x3c\/code\x3e函数，而暂停音乐时\x3ccode\x3ebackgroundAudioManager.paused\x3c\/code\x3e返回true，播放时放回fals，没有音乐播放时返回undefined，如果单纯的用:\x3ccode\x3eif(backgroundAudioManager.paused)\x3c\/code\x3e则会判断无音乐和音乐播放时都为假，这样两种不同的情况执行相同的操作，则会发生意外，所以需要添加这样的判断\x3cbr\x3e\x3ccode\x3eif (typeof (backgroundAudioManager.paused) !== \x22undefined\x22) \x3c\/code\x3e用以区分播放和无音乐事件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e一路学习过来，期间碰到的大大小小的问题数不胜数，收获很大。目前还有一些功能暂未实现，会在以后继续完善项目，继续学习。\x3c\/p\x3e\n\x3cp\x3e这个项目给我最大的启示就是文档是一个好东西，锻炼看文档的能力会自己接受新东西的速度变快。再就是很多时候解决问题的方法多种多样，写代码时可以多做几次考虑用哪种方式实现一个功能，这样既让项目变得更高校，也让自己变得更优秀。\x3c\/p\x3e\n\x3cp\x3e个人邮箱：QiuShuiZC@163.com\x3c\/p\x3e\n\x3cp\x3egithub地址：\x3ca href=\x22https:\/\/github.com\/QiuShuiBai\/wx_music\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e秋水白\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3ewx: zcfusheng\x3c\/p\x3e\n\x3cp\x3e大家可以一起交流学习，如果觉得这个项目不错的话，用star来砸我吧。\x3c\/p\x3e\n\x3cp\x3e（备注：我给项目里放的音乐都是周董和姿妈的，哈哈，毕竟男杰伦，女燕姿）\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>指尖一点歌声来&ndash;微信小程序之仿网易云音乐心得</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012439704">https://segmentfault.com/a/1190000012439704</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/b8bsd09r3d/" target="_blank">https://alili.tech/archive/b8bsd09r3d/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>