<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【30分钟学完】canvas动画|游戏基础(3)：速度与加速度"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【30分钟学完】canvas动画|游戏基础(3)：速度与加速度 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/bfcc9f4zmsp/",
				"appid": "1613049289050283", 
				"title": "【30分钟学完】canvas动画|游戏基础(3)：速度与加速度 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-08T02:30:31"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/v1cavj267/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/uqxg388lyyo/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&text=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&text=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&is_video=false&description=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbfcc9f4zmsp%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%283%29%ef%bc%9a%e9%80%9f%e5%ba%a6%e4%b8%8e%e5%8a%a0%e9%80%9f%e5%ba%a6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【30分钟学完】canvas动画|游戏基础(3)：速度与加速度</h1><div class="meta"><div class="postdate"><time datetime="2018-12-08" itemprop="datePublished">2018-12-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e上一篇基本已经对canvas打好了基础，本篇主要将引入经典物理概念速度和加速度，探讨他们在编程动画中的应用。  \x3cbr\x3e在阅读之前请先自行了解速度和加速度的基础知识，以及向量与向量加法。  \x3cbr\x3e本人能力有限，欢迎牛人共同讨论，批评指正。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e速度\x3c\/h2\x3e\n\x3cblockquote\x3e【科普】速度是描述物体运动快慢和方向的物理量。物理学中提到物体的速度通常是指其瞬时速度。速度在国际单位制中的单位是米每秒，国际符号是m\/s，中文符号是米\/秒。相对论框架中，物体的速度上限是光速。\x3c\/blockquote\x3e\n\x3cp\x3e在动画编程中，速度是最基础的要素，在本系列教程的第2篇讲到三角函数时就有所体现。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e动画编程中的速度\x3c\/h3\x3e\n\x3cp\x3e见下图，我们这里要讨论的计算机动画中的速度跟物理学上概念相似，都是矢量，也就是\x3cstrong\x3e既有大小又有方向\x3c\/strong\x3e，而方向的体现就是其值的正负，回顾系列第1篇中讲到的坐标系，沿着正半轴运动速度就是正，沿着负半轴运动速度就是负。  \x3cbr\x3e另外一点不同就是单位，不一定会以时间为单位，可能是\x3cstrong\x3e以帧为单位\x3c\/strong\x3e，比如“像素\/帧”。  \x3cbr\x3e也正因为速度是矢量，那任何一个速度都可以分解为x轴和y轴上的速度，这就是编程动画基本思想。  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6SKX?w=944\x26amp;h=588\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6SKX?w=944\x26amp;h=588\x22 alt=\x22速度分解图\x22 title=\x22速度分解图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e实例应用\x3c\/h3\x3e\n\x3cp\x3e将系列第2篇的“一个会跟踪鼠标位置的箭头”改造成“跟随鼠标的箭头”。代码很基础，看注释就行，基本思路：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e计算目标点与物体的夹角；\x3c\/li\x3e\n\x3cli\x3e依据夹角分解速度到x轴和y轴；\x3c\/li\x3e\n\x3cli\x3e分别将每条轴上的速度与物体的位置坐标相加。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e特别说明，因为这个例子中的动画循环是基于帧，所以速度单位是\x3cstrong\x3e像素每帧\x3c\/strong\x3e。  \x3cbr\x3e完整例子：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part4\/04-follow-mouse.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e跟随鼠标的箭头\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 跟随鼠标的箭头\n * *\/\nwindow.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const mouse = utils.captureMouse(canvas);\n  const arrow = new Arrow();\n  \/\/ 设定速度\n  const speed = 3;\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    \/\/ 计算鼠标与箭头的相对距离\n    const dx = mouse.x - arrow.x;\n    const dy = mouse.y - arrow.y;\n    \/\/ 求箭头指向鼠标的夹角\n    const angle = Math.atan2(dy, dx);\n    \/\/ 将速度分解到x轴和y轴\n    const vx = Math.cos(angle) * speed;\n    const vy = Math.sin(angle) * speed;\n    \/\/ 设置箭头的角度\n    arrow.rotation = angle;\n    \/\/ 将分解后的速度加到箭头的两轴位置上\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \/\/ 重新绘制箭头\n    arrow.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 跟随鼠标的箭头\n * *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mouse = utils.captureMouse(canvas);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arrow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Arrow();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设定速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e speed = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算鼠标与箭头的相对距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx = mouse.x - arrow.x;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy = mouse.y - arrow.y;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 求箭头指向鼠标的夹角\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e angle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan2(dy, dx);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将速度分解到x轴和y轴\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vx = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(angle) * speed;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vy = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(angle) * speed;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置箭头的角度\x3c\/span\x3e\n    arrow.rotation = angle;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将分解后的速度加到箭头的两轴位置上\x3c\/span\x3e\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重新绘制箭头\x3c\/span\x3e\n    arrow.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e加速度\x3c\/h2\x3e\n\x3cblockquote\x3e【科普】加速度是物理学中的一个物理量，是一个矢量，主要应用于经典物理当中，一般用字母a表示，在国际单位制中的单位为米每二次方秒。加速度是速度矢量对于时间的变化率，描述速度的方向和大小变化的快慢。\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e动画编程中的加速度\x3c\/h3\x3e\n\x3cp\x3e计算机动画中的加速度就是\x3cstrong\x3e速度的变化量\x3c\/strong\x3e，跟前面的速度一样是矢量，也可以分解为x轴和y轴上的加速度，方法同上。单位可以是像素每二次方帧，与“力学”有很大联系。  \x3cbr\x3e加速度可以让运动更加自然，在计算机动画中模拟真实运动是必要的基础。  \x3cbr\x3e请明确加速度是速度的变化量，也就是加速度的方向与速度相同即加速，方向相反即减速，如果加速度为零，速度将恒定，物体做匀速直线运动。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e实例应用\x3c\/h3\x3e\n\x3cp\x3e继续改造前面的例子\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part4\/04-follow-mouse.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e跟随鼠标的箭头\x3c\/a\x3e为“往鼠标方向加速的箭头”。改造量不大，就是把加速度分解后叠加给速度，基本思路：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e计算目标点与物体的夹角；\x3c\/li\x3e\n\x3cli\x3e将加速度同样分解到x，y轴上；\x3c\/li\x3e\n\x3cli\x3e分别将每条轴上的加速度与速度相加；\x3c\/li\x3e\n\x3cli\x3e再分别将每条轴上的速度与物体的位置坐标相加。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e完整例子：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part4\/10-follow-mouse-2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e往鼠标方向加速的箭头\x3c\/a\x3e  \x3cbr\x3e观察实例，你会发现这个箭头虽然运动比前面例子自然了不少，但却永远都不会停下，这是由于这里的加速度不变的，而现实中由于摩擦力等因素加速度是会被削减的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 往鼠标方向加速的箭头\n * *\/\nwindow.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const mouse = utils.captureMouse(canvas);\n  const arrow = new Arrow();\n  \/\/ 初始化速度\n  let vx = 0;\n  let vy = 0;\n  \/\/ 设定加速度\n  const force = 0.02;\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    \/\/ 计算鼠标与箭头的相对距离\n    const dx = mouse.x - arrow.x;\n    const dy = mouse.y - arrow.y;\n    \/\/ 求箭头指向鼠标的夹角\n    const angle = Math.atan2(dy, dx);\n    \/\/ 将加速度分解到x轴和y轴\n    const ax = Math.cos(angle) * force;\n    const ay = Math.sin(angle) * force;\n    \/\/ 设置箭头的角度\n    arrow.rotation = angle;\n    \/\/ 将分解后的加速度加到箭头的两轴速度上\n    vx \x2b= ax;\n    vy \x2b= ay;\n    \/\/ 将分解后的速度加到箭头的两轴位置上\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \/\/ 重新绘制箭头\n    arrow.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 往鼠标方向加速的箭头\n * *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mouse = utils.captureMouse(canvas);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arrow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Arrow();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 初始化速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vx = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vy = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设定加速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e force = \x3cspan class=\x22hljs-number\x22\x3e0.02\x3c\/span\x3e;\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算鼠标与箭头的相对距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx = mouse.x - arrow.x;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy = mouse.y - arrow.y;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 求箭头指向鼠标的夹角\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e angle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan2(dy, dx);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将加速度分解到x轴和y轴\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ax = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(angle) * force;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ay = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(angle) * force;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置箭头的角度\x3c\/span\x3e\n    arrow.rotation = angle;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将分解后的加速度加到箭头的两轴速度上\x3c\/span\x3e\n    vx \x2b= ax;\n    vy \x2b= ay;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将分解后的速度加到箭头的两轴位置上\x3c\/span\x3e\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重新绘制箭头\x3c\/span\x3e\n    arrow.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e比例运动\x3c\/h2\x3e\n\x3cp\x3e这里会介绍两个较高级的常见技术，缓动和弹动。  \x3cbr\x3e所谓比例运动，就是运动程度与目标点距离是成正比，简单来说就是“距离越远，运动程度越大”，这里的运动程度是\x3cstrong\x3e指但不局限于速度和加速度\x3c\/strong\x3e的与运动有关的变量。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e缓动\x3c\/h3\x3e\n\x3cp\x3e缓动是指\x3cstrong\x3e物体的速度与它到目标点的距离成比例\x3c\/strong\x3e，即基于距离的比例速度，这个比例会影响速度的大小。  \x3cbr\x3e缓动的运动特质不止一种，你可以先快后慢，也可以先慢后快，还可以先慢后快再慢等，我们这里只以最简单的先快后慢为例，即\x3cstrong\x3e距离越大，速度越大，距离缩进到0，速度也为0\x3c\/strong\x3e。  \x3c\/p\x3e\n\x3cp\x3e还是改造前面的\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part4\/04-follow-mouse.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e跟随鼠标的箭头\x3c\/a\x3e，代码如下，基本思路：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e确定一个比例系数，这是一个0~1之间的小数；\x3c\/li\x3e\n\x3cli\x3e确定目标点，并计算相对距离；\x3c\/li\x3e\n\x3cli\x3e计算速度，速度=距离×比例系数；\x3c\/li\x3e\n\x3cli\x3e用当前位置加上速度来计算新的位置；\x3c\/li\x3e\n\x3cli\x3e重复第2~4步，直到物体到达目标点。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e完整例子：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part7\/04-ease-tomouse\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e缓动到鼠标位置的箭头\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 往鼠标方向缓动的箭头\n * *\/\nwindow.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const mouse = utils.captureMouse(canvas);\n  const arrow = new Arrow();\n  \/\/ 比例系数\n  const easing = 0.05;\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    \/\/ 计算鼠标与箭头的相对距离\n    const dx = mouse.x - arrow.x;\n    const dy = mouse.y - arrow.y;\n    \/\/ 求箭头指向鼠标的夹角\n    const angle = Math.atan2(dy, dx);\n    \/\/ 根据距离缓动\n    const vx = dx * easing;\n    const vy = dy * easing;\n    \/\/ 设置箭头的角度\n    arrow.rotation = angle;\n    \/\/ 将分解后的速度加到箭头的两轴位置上\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \/\/ 重新绘制箭头\n    arrow.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 往鼠标方向缓动的箭头\n * *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mouse = utils.captureMouse(canvas);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arrow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Arrow();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 比例系数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e easing = \x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e;\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算鼠标与箭头的相对距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx = mouse.x - arrow.x;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy = mouse.y - arrow.y;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 求箭头指向鼠标的夹角\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e angle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan2(dy, dx);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据距离缓动\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vx = dx * easing;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vy = dy * easing;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置箭头的角度\x3c\/span\x3e\n    arrow.rotation = angle;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将分解后的速度加到箭头的两轴位置上\x3c\/span\x3e\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重新绘制箭头\x3c\/span\x3e\n    arrow.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e弹动\x3c\/h3\x3e\n\x3cp\x3e弹动是指\x3cstrong\x3e物体的加速度与它到目标点的距离成比例\x3c\/strong\x3e，即基于距离的比例加速度，这个比例会影响加速度的大小。  \x3cbr\x3e弹动会使运动自然且有灵性，你会发现物体会冲过目标点，然后开始回弹，往复。这样就能模拟出弹簧或橡皮筋的效果。  \x3cbr\x3e特别注意，距离为0时加速度也为0，但速度不一定为0。  \x3c\/p\x3e\n\x3cp\x3e还是改造前面的\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part4\/10-follow-mouse-2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e往鼠标方向加速的箭头\x3c\/a\x3e，代码如下，你会发现这个跟前面的加速度例子很像，都是不断的往复运动，其原因都是加速度和速度很难同时为0导致的，这里我们加了削减系数让它停下来，基本思路：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e确定一个比例系数，这是一个0~1之间的小数；\x3c\/li\x3e\n\x3cli\x3e确定目标点，并计算相对距离；\x3c\/li\x3e\n\x3cli\x3e计算速度，加速度=距离×比例系数；\x3c\/li\x3e\n\x3cli\x3e用当前速度加上加速度；\x3c\/li\x3e\n\x3cli\x3e用当前位置加上速度来计算新的位置；\x3c\/li\x3e\n\x3cli\x3e重复第2~5步。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e完整例子：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part7\/08-spring-4.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e往鼠标方向弹动的箭头\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 往鼠标方向弹动的箭头\n * *\/\nwindow.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const mouse = utils.captureMouse(canvas);\n  const arrow = new Arrow();\n  \/\/ 设定弹动系数\n  const spring = 0.02;\n  \/\/ 初始化速度\n  let vx = 0;\n  let vy = 0;\n  \/\/ 削减系数\n  const friction = 0.95;\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    \/\/ 计算鼠标与箭头的相对距离\n    const dx = mouse.x - arrow.x;\n    const dy = mouse.y - arrow.y;\n    \/\/ 求箭头指向鼠标的夹角\n    const angle = Math.atan2(dy, dx);\n    \/\/ 根据距离弹动\n    const ax = dx * spring;\n    const ay = dy * spring;\n    \/\/ 设置箭头的角度\n    arrow.rotation = angle;\n    \/\/ 将分解后的加速度加到箭头的两轴速度上\n    vx \x2b= ax;\n    vy \x2b= ay;\n    \/\/ 削减速度\n    vx *= friction;\n    vy *= friction;\n    \/\/ 将分解后的速度加到箭头的两轴位置上\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \/\/ 重新绘制箭头\n    arrow.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 往鼠标方向弹动的箭头\n * *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mouse = utils.captureMouse(canvas);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e arrow = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Arrow();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设定弹动系数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e spring = \x3cspan class=\x22hljs-number\x22\x3e0.02\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 初始化速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vx = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vy = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 削减系数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e friction = \x3cspan class=\x22hljs-number\x22\x3e0.95\x3c\/span\x3e;\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算鼠标与箭头的相对距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx = mouse.x - arrow.x;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy = mouse.y - arrow.y;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 求箭头指向鼠标的夹角\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e angle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan2(dy, dx);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据距离弹动\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ax = dx * spring;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ay = dy * spring;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置箭头的角度\x3c\/span\x3e\n    arrow.rotation = angle;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将分解后的加速度加到箭头的两轴速度上\x3c\/span\x3e\n    vx \x2b= ax;\n    vy \x2b= ay;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 削减速度\x3c\/span\x3e\n    vx *= friction;\n    vy *= friction;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将分解后的速度加到箭头的两轴位置上\x3c\/span\x3e\n    arrow.x \x2b= vx;\n    arrow.y \x2b= vy;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重新绘制箭头\x3c\/span\x3e\n    arrow.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【30分钟学完】canvas动画|游戏基础(3)：速度与加速度</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013994486">https://segmentfault.com/a/1190000013994486</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/bfcc9f4zmsp/" target="_blank">https://alili.tech/archive/bfcc9f4zmsp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>