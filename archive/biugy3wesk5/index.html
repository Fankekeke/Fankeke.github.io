<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React 中常见的动画实现方式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React 中常见的动画实现方式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/biugy3wesk5/",
				"appid": "1613049289050283", 
				"title": "React 中常见的动画实现方式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-18T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/3pm9oscbkjg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/f5ncci9t2mw/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&text=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&text=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&title=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&is_video=false&description=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&title=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&title=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&title=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbiugy3wesk5%2f&title=React%20%e4%b8%ad%e5%b8%b8%e8%a7%81%e7%9a%84%e5%8a%a8%e7%94%bb%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React 中常见的动画实现方式</h1><div class="meta"><div class="postdate"><time datetime="2018-12-18" itemprop="datePublished">2018-12-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e现在，用户对于前端页面的要求已经不能满足于实现功能，更要有颜值，有趣味。除了整体 UI 的美观，在合适的地方添加合适的动画效果往往比静态页面更具有表现力，达到更自然的效果。比如，一个简单的 loading 动画或者页面切换效果不仅能缓解用户的等待情绪，甚至通过使用品牌 logo 等形式，默默达到品牌宣传的效果。\x3c\/p\x3e\n\x3cp\x3eReact 作为最近几年比较流行的前端开发框架，提出了虚拟 DOM 概念，所有 DOM 的变化都先发生在虚拟 DOM 上，通过 DOM diff 来分析网页的实际变化，然后反映在真实 DOM 上，从而极大地提升网页性能。然而，在动画实现方面，React 作为框架并不会直接给组件提供动画效果，需要开发者自行实现，而传统 web 动画大多数都通过直接操作实际 DOM 元素来实现，这在 React 中显然是不被提倡的。那么，在 React 中动画都是如何实现的呢？\x3c\/p\x3e\n\x3cp\x3e所有动画的本质都是连续修改 DOM 元素的一个或者多个属性，使其产生连贯的变化效果，从而形成动画。在 React 中实现动画本质上与传统 web 动画一样，仍然是两种方式： 通过 css3 动画实现和通过 js 修改元素属性。只不过在具体实现时，要更为符合 React 的框架特性，可以概括为几类：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e基于定时器或 requestAnimationFrame(RAF) 的间隔动画；\x3c\/li\x3e\n\x3cli\x3e基于 css3 的简单动画；\x3c\/li\x3e\n\x3cli\x3eReact 动画插件 \x3ccode\x3eCssTransitionGroup\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e结合 hook 实现复杂动画；\x3c\/li\x3e\n\x3cli\x3e其他第三方动画库。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e一、基于定时器或 RAF 的间隔动画\x3c\/h1\x3e\n\x3cp\x3e最早，动画的实现都是依靠定时器 \x3ccode\x3esetInterval\x3c\/code\x3e，\x3ccode\x3esetTimeout\x3c\/code\x3e 或者 \x3ccode\x3erequestAnimationFrame\x3c\/code\x3e(RAF) 直接修改 DOM 元素的属性。不熟悉 React 特性的开发者可能会习惯性地通过 \x3ccode\x3eref\x3c\/code\x3e 或者 \x3ccode\x3efindDOMNode()\x3c\/code\x3e 获取真实的 DOM 节点，直接修改其样式。然而，通过 \x3ccode\x3eref\x3c\/code\x3e 直接获取真实 DOM 并对其操作是是不被提倡使用，应当尽量避免这种操作。\x3c\/p\x3e\n\x3cp\x3e因此，我们需要将定时器或者 RAF 等方法与 DOM 节点属性通过 \x3ccode\x3estate\x3c\/code\x3e 联系起来。首先，需要提取出与变化样式相关的属性，替换为 \x3ccode\x3estate\x3c\/code\x3e，然后在合适的生命周期函数中添加定时器或者 \x3ccode\x3erequestAnimationFrame\x3c\/code\x3e 不断修改 \x3ccode\x3estate\x3c\/code\x3e，触发组件更新，从而实现动画效果。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e示例\x3c\/h2\x3e\n\x3cp\x3e以一个进度条为例，代码如下所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 使用requestAnimationFrame改变state\nimport React, { Component } from \x27react\x27;\n\nexport default class Progress extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            percent: 10\n        };\n    }\n\n    increase = () =\x3e {\n        const percent = this.state.percent;\n        const targetPercent = percent \x3e= 90 ? 100 : percent \x2b 10;\n        const speed = (targetPercent - percent) \/ 400;\n        let start = null;\n        const animate = timestamp =\x3e {\n            if (!start) start = timestamp;\n            const progress = timestamp - start;\n            const currentProgress = Math.min(parseInt(speed * progress \x2b percent, 10), targetPercent);\n            this.setState({\n                percent: currentProgress\n            });\n            if (currentProgress \x3c targetPercent) {\n                window.requestAnimationFrame(animate);\n            }\n        };\n        window.requestAnimationFrame(animate);\n    }\n\n    decrease = () =\x3e {\n        const percent = this.state.percent;\n        const targetPercent = percent \x3c 10 ? 0 : percent - 10;\n        const speed = (percent - targetPercent) \/ 400;\n        let start = null;\n        const animate = timestamp =\x3e {\n            if (!start) start = timestamp;\n            const progress = timestamp - start;\n            const currentProgress = Math.max(parseInt(percent - speed * progress, 10), targetPercent);\n            this.setState({\n                    percent: currentProgress\n                });\n            if (currentProgress \x3e targetPercent) {\n                window.requestAnimationFrame(animate);\n            }\n        };\n        window.requestAnimationFrame(animate);\n    }\n\n    render() {\n        const { percent } = this.state;\n\n        return (\n            \x3cdiv\x3e\n                \x3cdiv className=\x26quot;progress\x26quot;\x3e\n                    \x3cdiv className=\x26quot;progress-wrapper\x26quot; \x3e\n                        \x3cdiv className=\x26quot;progress-inner\x26quot; style = \x22{{\x22width: `${percent}%`\x22}}\x22 \x3e\x3c\/div\x3e\n                    \x3c\/div\x3e\n                    \x3cdiv className=\x26quot;progress-info\x26quot; \x3e{percent}%\x3c\/div\x3e\n                \x3c\/div\x3e\n                \x3cdiv className=\x26quot;btns\x26quot;\x3e\n                    \x3cbutton onClick={this.decrease}\x3e-\x3c\/button\x3e\n                    \x3cbutton onClick={this.increase}\x3e\x2b\x3c\/button\x3e\n                \x3c\/div\x3e\n            \x3c\/div\x3e\n        );\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用requestAnimationFrame改变state\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProgress\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n        };\n    }\n\n    increase = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e percent = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.percent;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e targetPercent = percent \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e90\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e : percent \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e speed = (targetPercent - percent) \/ \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e start = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e animate = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3etimestamp\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!start) start = timestamp;\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e progress = timestamp - start;\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e currentProgress = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(speed * progress \x2b percent, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e), targetPercent);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n                \x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e: currentProgress\n            });\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (currentProgress \x26lt; targetPercent) {\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(animate);\n            }\n        };\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(animate);\n    }\n\n    decrease = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e percent = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.percent;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e targetPercent = percent \x26lt; \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : percent - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e speed = (percent - targetPercent) \/ \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e start = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e animate = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3etimestamp\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!start) start = timestamp;\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e progress = timestamp - start;\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e currentProgress = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(percent - speed * progress, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e), targetPercent);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n                    \x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e: currentProgress\n                });\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (currentProgress \x26gt; targetPercent) {\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(animate);\n            }\n        };\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(animate);\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { percent } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22progress\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22progress-wrapper\x22\x3c\/span\x3e \x26gt;\x3c\/span\x3e\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22progress-inner\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22width:\x3c\/span\x3e `${\x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e}%`\x22}}\x22 \x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22progress-info\x22\x3c\/span\x3e \x26gt;\x3c\/span\x3e{percent}%\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btns\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.decrease}\x3c\/span\x3e\x26gt;\x3c\/span\x3e-\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.increase}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        );\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在示例中，我们在 \x3ccode\x3eincrease\x3c\/code\x3e 和 \x3ccode\x3edecrease\x3c\/code\x3e 函数中构建线性过渡函数 \x3ccode\x3eanimation\x3c\/code\x3e，\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e 在浏览器每次重绘前执行会执行过渡函数，计算当前进度条\x3ccode\x3ewidth\x3c\/code\x3e 属性并更新该 \x3ccode\x3estate\x3c\/code\x3e，使得进度条重新渲染。该示例的效果如下所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783444?w=599\x26amp;h=62\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783444?w=599\x26amp;h=62\x22 alt=\x22RAF实现进度条效果\x22 title=\x22RAF实现进度条效果\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这种实现方式在使用 \x3ccode\x3erequestAnimationFrame\x3c\/code\x3e 时性能不错，完全使用纯 js 实现，不依赖于 css，使用定时器时可能出现掉帧卡顿现象。此外，还需要开发者根据速度函数自己计算状态，比较复杂。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e二、基于 css3 的简单动画\x3c\/h1\x3e\n\x3cp\x3e当 css3 中的 \x3ccode\x3eanimation\x3c\/code\x3e 和 \x3ccode\x3etransition\x3c\/code\x3e 出现和普及后，我们可以轻松地利用 css 实现元素样式的变化，而不用通过人为计算实时样式。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e示例\x3c\/h2\x3e\n\x3cp\x3e我们仍以上面的进度条为例，使用 css3 实现进度条动态效果，代码如下所示：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, { Component } from \x27react\x27;\n\nexport default class Progress extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            percent: 10\n        };\n    }\n\n    increase = () =\x3e {\n        const percent = this.state.percent \x2b 10;\n        this.setState({\n            percent: percent \x3e 100 ? 100 : percent,\n        })\n    }\n\n    decrease = () =\x3e {\n        const percent = this.state.percent - 10;\n        this.setState({\n            percent: percent \x3c 0 ? 0 : percent,\n        })\n    }\n\n    render() {\n        \/\/ 同上例， 省略\n        ....\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProgress\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n        };\n    }\n\n    increase = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e percent = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.percent \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n            \x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e: percent \x26gt; \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e : percent,\n        })\n    }\n\n    decrease = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e percent = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.percent - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n            \x3cspan class=\x22hljs-attr\x22\x3epercent\x3c\/span\x3e: percent \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : percent,\n        })\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 同上例， 省略\x3c\/span\x3e\n        ....\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.progress-inner {\n  transition: width 400ms cubic-bezier(0.08, 0.82, 0.17, 1);\n  \/\/ 其他样式同上，省略\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.progress-inner\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: width \x3cspan class=\x22hljs-number\x22\x3e400ms\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ecubic-bezier\x3c\/span\x3e(0.08, 0.82, 0.17, 1);\n  \/\/ 其他样式同上，省略\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在示例中，\x3ccode\x3eincrease\x3c\/code\x3e 和 \x3ccode\x3edecrease\x3c\/code\x3e 函数中不再计算 \x3ccode\x3ewidth\x3c\/code\x3e，而是直接设置增减后的宽度。需要注意的是，在 css 样式中设置了 \x3ccode\x3etransition\x3c\/code\x3e 属性，当 width 属性发生变化时自动实现样式的动态变化效果，并且可以设置不同的速度效果的速度曲线。该示例的效果如下图所示，可以发现，与上一个例子不同的是，右侧的进度数据是直接变化为目标数字，没有具体的变化过程，而进度条的动态效果因为不再是线性变化，效果更为生动。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783445?w=599\x26amp;h=66\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783445?w=599\x26amp;h=66\x22 alt=\x22进度条效果\x22 title=\x22进度条效果\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e基于 css3 的实现方式具有较高的性能，代码量少，但是只能依赖于 css 效果，对于复杂动画也很难实现。此外，通过修改 \x3ccode\x3estate\x3c\/code\x3e 实现动画效果，只能作用于已经存在于 DOM 树中的节点。如果想用这种方式为组件添加入场和离场动画，需要维持至少两个 \x3ccode\x3estate\x3c\/code\x3e 来实现入场和离场动画，其中一个 \x3ccode\x3estate\x3c\/code\x3e 用于控制元素是否显示，另一个 \x3ccode\x3estate\x3c\/code\x3e 用于控制元素在动画中的变化属性。在这种情况下，开发者需要花费大量精力来维护组件的动画逻辑，十分复杂繁琐。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3e三、React 动画插件 \x3ccode\x3eCssTransitionGroup\x3c\/code\x3e\n\x3c\/h1\x3e\n\x3cp\x3eReact 曾为开发者提供过动画插件 \x3ca href=\x22https:\/\/reactjs.org\/docs\/animation.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ereact-addons-css-transition-group\x3c\/code\x3e\x3c\/a\x3e，后交由社区维护，形成现在的 \x3ca href=\x22https:\/\/github.com\/reactjs\/react-transition-group\/tree\/v1-stable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ereact-transition-group\x3c\/code\x3e\x3c\/a\x3e，该插件可以方便地实现组件的入场和离场动画，使用时需要开发者额外安装。\x3ccode\x3ereact-transition-group\x3c\/code\x3e 包含 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 和 \x3ccode\x3eTransitionGroup\x3c\/code\x3e 两个动画插件，其中，后者是底层 api，前者是后者的进一步封装，可以较为便捷地实现 css 动画。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e示例\x3c\/h2\x3e\n\x3cp\x3e以一个动态增加tab的为例，代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, { Component } from \x27react\x27;\nimport { CSSTransitionGroup } from \x27react-transition-group\x27;\n\nlet uid = 2;\nexport default class Tabs extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            activeId: 1,\n            tabData: [{\n                id: 1,\n                panel: \x27选项1\x27\n            }, {\n                id: 2,\n                panel: \x27选项2\x27\n            }]\n        };\n    }\n\n    addTab = () =\x3e {\n        \/\/ 添加tab代码\n        ...\n    }\n\n    deleteTab = (id) =\x3e {\n        \/\/ 删除tab代码\n        ...\n    }\n\n    render() {\n        const { tabData, activeId } = this.state;\n\n        const renderTabs = () =\x3e {\n            return tabData.map((item, index) =\x3e {\n                return (\n                    \x3cdiv\n                        className={`tab-item${item.id === activeId ? \x27 tab-item-active\x27 : \x27\x27}`}\n                        key={`tab${item.id}`}\n                    \x3e\n                        {item.panel}\n                        \x3cspan className=\x26quot;btns btn-delete\x26quot; onClick={() =\x3e this.deleteTab(item.id)}\x3e✕\x3c\/span\x3e\n                    \x3c\/div\x3e\n                );\n            })\n        }\n\n        return (\n            \x3cdiv\x3e\n                \x3cdiv className=\x26quot;tabs\x26quot; \x3e\n                    \x3cCSSTransitionGroup\n                      transitionName=\x26quot;tabs-wrap\x26quot;\n                      transitionEnterTimeout={500}\n                      transitionLeaveTimeout={500}\n                    \x3e\n                      {renderTabs()}\n                    \x3c\/CSSTransitionGroup\x3e\n                    \x3cspan className=\x26quot;btns btn-add\x26quot; onClick={this.addTab}\x3e\x2b\x3c\/span\x3e\n                \x3c\/div\x3e\n                \x3cdiv className=\x26quot;tab-cont\x26quot;\x3e\n                    cont\n                \x3c\/div\x3e\n            \x3c\/div\x3e\n        );\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { CSSTransitionGroup } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-transition-group\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e uid = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTabs\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3eactiveId\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3etabData\x3c\/span\x3e: [{\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3epanel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27选项1\x27\x3c\/span\x3e\n            }, {\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3epanel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27选项2\x27\x3c\/span\x3e\n            }]\n        };\n    }\n\n    addTab = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加tab代码\x3c\/span\x3e\n        ...\n    }\n\n    deleteTab = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eid\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除tab代码\x3c\/span\x3e\n        ...\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { tabData, activeId } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e renderTabs = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e tabData.map(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem, index\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n                    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\n                        \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e`\x3cspan class=\x22hljs-attr\x22\x3etab-item\x3c\/span\x3e${\x3cspan class=\x22hljs-attr\x22\x3eitem.id\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3eactiveId\x3c\/span\x3e ? \x27 \x3cspan class=\x22hljs-attr\x22\x3etab-item-active\x3c\/span\x3e\x27 \x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x27\x27}`}\n                        \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e`\x3cspan class=\x22hljs-attr\x22\x3etab\x3c\/span\x3e${\x3cspan class=\x22hljs-attr\x22\x3eitem.id\x3c\/span\x3e}`}\n                    \x26gt;\x3c\/span\x3e\n                        {item.panel}\n                        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btns btn-delete\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.deleteTab(item.id)}\x26gt;✕\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n                );\n            })\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tabs\x22\x3c\/span\x3e \x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eCSSTransitionGroup\x3c\/span\x3e\n                      \x3cspan class=\x22hljs-attr\x22\x3etransitionName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tabs-wrap\x22\x3c\/span\x3e\n                      \x3cspan class=\x22hljs-attr\x22\x3etransitionEnterTimeout\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{500}\x3c\/span\x3e\n                      \x3cspan class=\x22hljs-attr\x22\x3etransitionLeaveTimeout\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{500}\x3c\/span\x3e\n                    \x26gt;\x3c\/span\x3e\n                      {renderTabs()}\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eCSSTransitionGroup\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22btns btn-add\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.addTab}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tab-cont\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                    cont\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        );\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/* tab动态增加动画 *\/\n.tabs-wrap-enter {\n  opacity: 0.01;\n}\n\n.tabs-wrap-enter.tabs-wrap-enter-active {\n  opacity: 1;\n  transition: all 500ms ease-in;\n}\n\n.tabs-wrap-leave {\n  opacity: 1;\n}\n\n.tabs-wrap-leave.tabs-wrap-leave-active {\n  opacity: 0.01;\n  transition: all 500ms ease-in;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22css hljs\x22\x3e\x3ccode class=\x22css\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/* tab动态增加动画 *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-class\x22\x3e.tabs-wrap-enter\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e;\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.tabs-wrap-enter\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.tabs-wrap-enter-active\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e500ms\x3c\/span\x3e ease-in;\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.tabs-wrap-leave\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n}\n\n\x3cspan class=\x22hljs-selector-class\x22\x3e.tabs-wrap-leave\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.tabs-wrap-leave-active\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attribute\x22\x3eopacity\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e: all \x3cspan class=\x22hljs-number\x22\x3e500ms\x3c\/span\x3e ease-in;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 可以为其子节点添加额外的 css 类，然后通过 css 动画达到入场和离场动画效果。为了给每个 tab 节点添加动画效果，需要先将它们包裹在 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 组件中。 当设定 \x3ccode\x3etransitionName\x3c\/code\x3e 属性为 \x3ccode\x3e\x27tabs-wrapper\x27\x3c\/code\x3e，\x3ccode\x3etransitionEnterTimeout\x3c\/code\x3e 为400毫秒后，一旦 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 中新增节点，该新增节点会在出现时被添加上 css 类 \x3ccode\x3e\x27tabs-wrapper-enter\x27\x3c\/code\x3e，然后在下一帧时被添加上 css 类 \x3ccode\x3e\x27tabs-wrapper-enter-active\x27\x3c\/code\x3e。由于这两个 css 类中设定了不同的透明度和 css3 transition 属性，所以节点实现了透明度由小到大的入场效果。400毫秒后 css 类 \x3ccode\x3e\x27tabs-wrapper-enter\x27\x3c\/code\x3e 和 \x3ccode\x3e\x27tabs-wrapper-enter-active\x27\x3c\/code\x3e 将会同时被移除，节点完成整个入场动画过程。离场动画的实现类似于入场动画，只不过被添加的 css 类名为 \x3ccode\x3e\x27tabs-wrapper-leave\x27\x3c\/code\x3e 和 \x3ccode\x3e\x27tabs-wrapper-leave-active\x27\x3c\/code\x3e。该示例效果如下图所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783446?w=600\x26amp;h=72\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783446?w=600\x26amp;h=72\x22 alt=\x22动态增加tab效果\x22 title=\x22动态增加tab效果\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 支持以下7个属性：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783447?w=1404\x26amp;h=546\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783447?w=1404\x26amp;h=546\x22 alt=\x22CSSTransitionGroup 属性\x22 title=\x22CSSTransitionGroup 属性\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其中，入场和离场动画是默认开启的，使用时需要设置 \x3ccode\x3etransitionEnterTimeout\x3c\/code\x3e 和 \x3ccode\x3etransitionLeaveTimeout\x3c\/code\x3e。值得注意的是，\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 还提供出现动画（appear），使用时需要设置 \x3ccode\x3etransitionAppearTimeout\x3c\/code\x3e。那么，出现动画和入场动画有什么区别呢？当设定 \x3ccode\x3etransitionAppear\x3c\/code\x3e 为 \x3ccode\x3etrue\x3c\/code\x3e 时，\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 在\x3cstrong\x3e初次渲染\x3c\/strong\x3e时，会添加一个出现阶段。在该阶段中，\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 的已有子节点都会被相继添加 css 类  \x3ccode\x3e\x27tabs-wrapper-appear\x27\x3c\/code\x3e 和 \x3ccode\x3e\x27tabs-wrapper-appear-active\x27\x3c\/code\x3e，实现出现动画效果。因此，\x3cstrong\x3e出现动画仅适用于 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 在初次渲染时就存在的子节点\x3c\/strong\x3e，一旦 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 完成渲染，其子节点就只可能有入场动画（enter），不可能有出现动画（appear）。\x3c\/p\x3e\n\x3cp\x3e此外，使用 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 需要注意以下几点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 默认在 DOM 树中生成一个 \x3ccode\x3espan\x3c\/code\x3e 标签包裹其子节点，如果想要使用其他 html 标签，可设定 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 的 \x3ccode\x3ecomponent\x3c\/code\x3e 属性；\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 的子元素必须添加 \x3ccode\x3ekey\x3c\/code\x3e 值才会在节点发生变化时，准确地计算出哪些节点需要添加入场动画，哪些节点需要添加离场动画；\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 的动画效果只作用于直接子节点，不作用于其孙子节点；\x3c\/li\x3e\n\x3cli\x3e动画的结束时间不以 css 中 transition-duration 为准，而是以 \x3ccode\x3etransitionEnterTimeout\x3c\/code\x3e，\x3ccode\x3etransitionLeaveTimeout\x3c\/code\x3e，\x3ccode\x3eTransitionAppearTimeout\x3c\/code\x3e 为准，因为某些情况下 transitionend 事件不会被触发，详见\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/Events\/transitionend\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN transitionend\x3c\/a\x3e。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 实现动画的优点是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e简单易用，可以方便快捷地实现元素的入场和离场动画；\x3c\/li\x3e\n\x3cli\x3e与 React 结合，性能比较好。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 缺点也十分明显：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e局限于出现动画，入场动画和离场动画；\x3c\/li\x3e\n\x3cli\x3e由于需要制定 \x3ccode\x3etransitionName\x3c\/code\x3e，灵活性不够；\x3c\/li\x3e\n\x3cli\x3e只能依靠 css 实现简单的动画。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3e四、结合 hook 实现复杂动画\x3c\/h1\x3e\n\x3cp\x3e在实际项目中，可能需要一些更炫酷的动画效果，这些效果仅依赖于 css3 往往较难实现。此时，我们不妨借助一些成熟的第三方库，如 jQuery 或 GASP，结合 React 组件中的生命周期钩子方法 hook 函数，实现复杂动画效果。除了 React 组件正常的生命周期外，\x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 的底层 api \x3ccode\x3eTransitonGroup\x3c\/code\x3e 还为其子元素额外提供了一系列特殊的生命周期 hook 函数，在这些 hook 函数中结合第三方动画库可以实现丰富的入场、离场动画效果。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eTransisitonGroup\x3c\/code\x3e 分别提供一下六个生命周期 hook 函数：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ecomponentWillAppear(callback)\x3c\/li\x3e\n\x3cli\x3ecomponentDidAppear()\x3c\/li\x3e\n\x3cli\x3ecomponentWillEnter(callback)\x3c\/li\x3e\n\x3cli\x3ecomponentDidEnter()\x3c\/li\x3e\n\x3cli\x3ecomponentWillLeave(callback)\x3c\/li\x3e\n\x3cli\x3ecomponentDidLeave()\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e它们的触发时机如图所示：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783448?w=1442\x26amp;h=890\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783448?w=1442\x26amp;h=890\x22 alt=\x22TransitionGroup组件生命周期与自组件生命周期的关系\x22 title=\x22TransitionGroup组件生命周期与自组件生命周期的关系\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e示例\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/greensock.com\/gsap\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGASP\x3c\/a\x3e 是一个 flash 时代发展至今的动画库，借鉴视频帧的概念，特别适合做长时间的序列动画效果。本文中，我们用 \x3ccode\x3eTransitonGroup\x3c\/code\x3e 和 \x3ca href=\x22https:\/\/github.com\/azazdeaz\/react-gsap-enhancer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3ccode\x3ereact-gsap-enhancer\x3c\/code\x3e\x3c\/a\x3e（一个可以将 GSAP 应用于 React 的增强库）完成一个图片画廊，代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, { Component } from \x27react\x27;\nimport { TransitionGroup } from \x27react-transition-group\x27;\nimport GSAP from \x27react-gsap-enhancer\x27\nimport { TimelineMax, Back, Sine } from \x27gsap\x27;\n\nclass Photo extends Component {\n    constructor(props) {\n        super(props);\n    }\n\n    componentWillEnter(callback) {\n        this.addAnimation(this.enterAnim, {callback: callback})\n    }\n\n    componentWillLeave(callback) {\n        this.addAnimation(this.leaveAnim, {callback: callback})\n    }\n\n    enterAnim = (utils) =\x3e {\n        const { id } = this.props;\n        return new TimelineMax()\n            .from(utils.target, 1, {\n                x: `\x2b=${( 4 - id ) * 60}px`,\n                autoAlpha: 0,\n                onComplete: utils.options.callback,\n            }, id * 0.7);\n    }\n\n    leaveAnim = (utils) =\x3e {\n        const { id } = this.props;\n        return new TimelineMax()\n            .to(utils.target, 0.5, {\n                scale: 0,\n                ease: Sine.easeOut,\n                onComplete: utils.options.callback,\n            }, (4 - id) * 0.7);\n    }\n\n    render() {\n        const { url } = this.props;\n        return (\n            \x3cdiv className=\x26quot;photo\x26quot;\x3e\n                \x3cimg src={url} \/\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\n\nconst WrappedPhoto = GSAP()(Photo);\n\nexport default class Gallery extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: false,\n            photos: [{\n                id: 1,\n                url: \x27http:\/\/img4.imgtn.bdimg.com\/it\/u=1032683424,3204785822\x26amp;fm=214\x26amp;gp=0.jpg\x27\n            }, {\n                id: 2,\n                url: \x27http:\/\/imgtu.5011.net\/uploads\/content\/20170323\/7488001490262119.jpg\x27\n            }, {\n                id: 3,\n                url: \x27http:\/\/tupian.enterdesk.com\/2014\/lxy\/2014\/12\/03\/18\/10.jpg\x27\n            }, {\n                id: 4,\n                url: \x27http:\/\/img4.imgtn.bdimg.com\/it\/u=360498760,1598118672\x26amp;fm=27\x26amp;gp=0.jpg\x27\n            }]\n        };\n    }\n\n    toggle = () =\x3e {\n        this.setState({\n            show: !this.state.show\n        })\n    }\n\n    render() {\n        const { show, photos } = this.state;\n\n        const renderPhotos = () =\x3e {\n            return photos.map((item, index) =\x3e {\n                return \x3cWrappedPhoto id={item.id} url={item.url} key={`photo${item.id}`} \/\x3e;\n            })\n        }\n\n        return (\n            \x3cdiv\x3e\n                \x3cbutton onClick={this.toggle}\x3etoggle\x3c\/button\x3e\n                \x3cTransitionGroup component=\x26quot;div\x26quot;\x3e\n                    {show \x26amp;\x26amp; renderPhotos()}\n                \x3c\/TransitionGroup\x3e\n            \x3c\/div\x3e\n        );\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { TransitionGroup } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-transition-group\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e GSAP \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-gsap-enhancer\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { TimelineMax, Back, Sine } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27gsap\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePhoto\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    }\n\n    componentWillEnter(callback) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.addAnimation(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.enterAnim, {\x3cspan class=\x22hljs-attr\x22\x3ecallback\x3c\/span\x3e: callback})\n    }\n\n    componentWillLeave(callback) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.addAnimation(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.leaveAnim, {\x3cspan class=\x22hljs-attr\x22\x3ecallback\x3c\/span\x3e: callback})\n    }\n\n    enterAnim = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eutils\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { id } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e TimelineMax()\n            .from(utils.target, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, {\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\x2b=\x3cspan class=\x22hljs-subst\x22\x3e${( \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e - id ) * \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e}\x3c\/span\x3epx`\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eautoAlpha\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eonComplete\x3c\/span\x3e: utils.options.callback,\n            }, id * \x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e);\n    }\n\n    leaveAnim = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eutils\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { id } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e TimelineMax()\n            .to(utils.target, \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e, {\n                \x3cspan class=\x22hljs-attr\x22\x3escale\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eease\x3c\/span\x3e: Sine.easeOut,\n                \x3cspan class=\x22hljs-attr\x22\x3eonComplete\x3c\/span\x3e: utils.options.callback,\n            }, (\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e - id) * \x3cspan class=\x22hljs-number\x22\x3e0.7\x3c\/span\x3e);\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { url } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;div className=\x22photo\x22\x26gt;\n                \x26lt;img src={url} \/\x26gt;\n            \x26lt;\/div\x26gt;\n        )\n    }\n}\n\nconst WrappedPhoto = GSAP()(Photo);\n\nexport default class Gallery extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            show: false,\n            photos: [{\n                id: 1,\n                url: \x27http:\/\/img4.imgtn.bdimg.com\/it\/u=1032683424,3204785822\x26amp;fm=214\x26amp;gp=0.jpg\x27\n            }, {\n                id: 2,\n                url: \x27http:\/\/imgtu.5011.net\/uploads\/content\/20170323\/7488001490262119.jpg\x27\n            }, {\n                id: 3,\n                url: \x27http:\/\/tupian.enterdesk.com\/2014\/lxy\/2014\/12\/03\/18\/10.jpg\x27\n            }, {\n                id: 4,\n                url: \x27http:\/\/img4.imgtn.bdimg.com\/it\/u=360498760,1598118672\x26amp;fm=27\x26amp;gp=0.jpg\x27\n            }]\n        };\n    }\n\n    toggle = () =\x26gt; {\n        this.setState({\n            show: !this.state.show\n        })\n    }\n\n    render() {\n        const { show, photos } = this.state;\n\n        const renderPhotos = () =\x26gt; {\n            return photos.map((item, index) =\x26gt; {\n                return \x26lt;WrappedPhoto id={item.id} url={item.url} key={`photo${item.id}`} \/\x26gt;;\n            })\n        }\n\n        return (\n            \x26lt;div\x26gt;\n                \x26lt;button onClick={this.toggle}\x26gt;toggle\x26lt;\/button\x26gt;\n                \x26lt;TransitionGroup component=\x22div\x22\x26gt;\n                    {show \x26amp;\x26amp; renderPhotos()}\n                \x26lt;\/TransitionGroup\x26gt;\n            \x26lt;\/div\x26gt;\n        );\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在该示例中，我们在子组件 \x3ccode\x3ePhoto\x3c\/code\x3e 的 \x3ccode\x3ecomponentWillEnter\x3c\/code\x3e 和 \x3ccode\x3ecomponentWillLeave\x3c\/code\x3e 两个 hook 函数中为每个子组件添加了入场动画 \x3ccode\x3eenterAnim\x3c\/code\x3e 和 离场动画 \x3ccode\x3eLeaveAnim\x3c\/code\x3e。在入场动画中，使用 \x3ccode\x3eTimeLineMax.from(target, duration, vars, delay)\x3c\/code\x3e 方式建立时间轴动画，指定了每个子组件的动画移动距离随 \x3ccode\x3eid\x3c\/code\x3e 增大而减小，延期时间随着 \x3ccode\x3eid\x3c\/code\x3e 增大而增大，离场动画中每个子组件的延期时间随着 \x3ccode\x3eid\x3c\/code\x3e 增大而减小，从而实现根据组件 \x3ccode\x3eid\x3c\/code\x3e 不同具有不同的动画效果。实际使用时，你可以根据需求对任一子组件添加不同的效果。该示例的效果如下图所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783449?w=600\x26amp;h=181\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783449?w=600\x26amp;h=181\x22 alt=\x22图片画廊效果\x22 title=\x22图片画廊效果\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在使用 \x3ccode\x3eTransitionGroup\x3c\/code\x3e 时，在 \x3ccode\x3ecomponentnWillAppear(callback)\x3c\/code\x3e，\x3ccode\x3ecomponentnWillEntercallback)\x3c\/code\x3e，\x3ccode\x3ecomponentnWillLeave(callback)\x3c\/code\x3e 函数中一定要\x3cstrong\x3e在函数逻辑结束后调用 \x3ccode\x3ecallback\x3c\/code\x3e，以保证 \x3ccode\x3eTransitionGroup\x3c\/code\x3e 能正确维护子节点的状态序列\x3c\/strong\x3e。关于 GASP 的详细使用方法可参考\x3ca href=\x22https:\/\/greensock.com\/gsap\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGASP官方文档\x3c\/a\x3e和博文\x3ca href=\x22http:\/\/acgtofe.com\/posts\/2016\/05\/gsap-for-animation-pro\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGSAP，专业的Web动画库\x3c\/a\x3e，本文不再赘述。\x3c\/p\x3e\n\x3cp\x3e结合 hook 实现动画可以支持各种复杂动画，如时间序列动画等，由于依赖第三方库，往往动画效果比较流畅，用户体验较好。但是第三方库的引入，需要开发者额外学习对应的 api，也提升了代码复杂度。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader8\x22\x3e五、其他第三方动画库\x3c\/h1\x3e\n\x3cp\x3e此外，还有很多优秀的第三方动画库，如 \x3ca href=\x22https:\/\/github.com\/chenglou\/react-motion\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-motion\x3c\/a\x3e，Animated，\x3ca href=\x22https:\/\/github.com\/google-fabric\/velocity-react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evelocity-react\x3c\/a\x3e等，这些动画库在使用时也各有千秋。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eAnimated\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/animatedjs\/animated\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAnimated\x3c\/a\x3e 是一个跨平台的动画库，兼容 React 和 React Native。由于在动画过程中，我们只关心动画的初始状态、结束状态和变化函数，并不关心每个时刻元素属性的具体值，所以 Animated 采用声明式的动画，通过它提供的特定方法计算 css 对象，并传入 \x3ccode\x3eAnimated.div\x3c\/code\x3e 实现动画效果。\x3c\/p\x3e\n\x3ch4\x3e示例\x3c\/h4\x3e\n\x3cp\x3e我们使用 Animated 实现一个图片翻转的效果，代码如下。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, { Component } from \x27react\x27;\nimport Animated from \x27animated\/lib\/targets\/react-dom\x27;\n\nexport default class PhotoPreview extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            anim: new Animated.Value(0)\n        };\n    }\n\n    handleClick = () =\x3e {\n        const { anim } = this.state;\n        anim.stopAnimation(value =\x3e {\n            Animated.spring(anim, {\n                toValue: Math.round(value) \x2b 1\n            }).start();\n        });\n    }\n\n    render() {\n        const { anim } = this.state;\n\n        const rotateDegree = anim.interpolate({\n            inputRange: [0, 4],\n            outputRange: [\x270deg\x27, \x27360deg\x27]\n        });\n\n        return (\n            \x3cdiv\x3e\n                \x3cbutton onClick={this.handleClick}\x3e向右翻转\x3c\/button\x3e\n                \x3cAnimated.div\n                    style=\x22{{\x22\n                        transform: [{\n                            rotate: rotateDegree\n                        }]\n                    \x22}}\x22\n                    className=\x26quot;preivew-wrapper\x26quot;\n                \x3e\n                    \x3cimg\n                        alt=\x26quot;img\x26quot;\n                        src=\x26quot;http:\/\/img4.imgtn.bdimg.com\/it\/u=1032683424,3204785822\x26amp;fm=214\x26amp;gp=0.jpg\x26quot;\n                    \/\x3e\n                \x3c\/Animated.div\x3e\n            \x3c\/div\x3e\n        );\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Animated \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27animated\/lib\/targets\/react-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePhotoPreview\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3eanim\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Animated.Value(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)\n        };\n    }\n\n    handleClick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { anim } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n        anim.stopAnimation(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3evalue\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            Animated.spring(anim, {\n                \x3cspan class=\x22hljs-attr\x22\x3etoValue\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.round(value) \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n            }).start();\n        });\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { anim } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rotateDegree = anim.interpolate({\n            \x3cspan class=\x22hljs-attr\x22\x3einputRange\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e],\n            \x3cspan class=\x22hljs-attr\x22\x3eoutputRange\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x270deg\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27360deg\x27\x3c\/span\x3e]\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;div\x26gt;\n                \x26lt;button onClick={this.handleClick}\x26gt;向右翻转\x26lt;\/button\x26gt;\n                \x26lt;Animated.div\n                    style=\x22{{\x22\n                        transform: [{\n                            rotate: rotateDegree\n                        }]\n                    \x22}}\x22\n                    className=\x22preivew-wrapper\x22\n                \x26gt;\n                    \x26lt;img\n                        alt=\x22img\x22\n                        src=\x22http:\/\/img4.imgtn.bdimg.com\/it\/u=1032683424,3204785822\x26amp;fm=214\x26amp;gp=0.jpg\x22\n                    \/\x26gt;\n                \x26lt;\/Animated.div\x26gt;\n            \x26lt;\/div\x26gt;\n        );\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在该示例中，我们希望实现每点击一次按钮，图片向右旋转90°。在组件初始化时新建了一个初始值为 0 的 \x3ccode\x3eAnimated\x3c\/code\x3e 对象 \x3ccode\x3ethis.state.anim\x3c\/code\x3e。\x3ccode\x3eAnimated\x3c\/code\x3e 对象中有插值函数 \x3ccode\x3einterpolate\x3c\/code\x3e，当设定输入区间 \x3ccode\x3einputRange\x3c\/code\x3e 和输出区间 \x3ccode\x3eoutputRange\x3c\/code\x3e 后，插值函数可以根据 \x3ccode\x3eAnimated\x3c\/code\x3e 对象的当前值进行线性插值，计算得到对应的映射值。\x3c\/p\x3e\n\x3cp\x3e在本例中，我们假设每点击一次按钮，\x3ccode\x3ethis.state.anim\x3c\/code\x3e 的值加 1，图像需要转动90°。在 render 函数中，我们设置插值函数 \x3ccode\x3ethis.state.anim.interpolate\x3c\/code\x3e 的输入区间为[0, 4]，输出区间为[\x270deg\x27, \x27360deg\x27]。当执行动画时，\x3ccode\x3ethis.state.anim\x3c\/code\x3e 的值发生变化，插值函数根据 \x3ccode\x3ethis.state.anim\x3c\/code\x3e 当前值，计算得到旋转角度 \x3ccode\x3erotateDegree\x3c\/code\x3e，触发组件的重新渲染。因此，如果 \x3ccode\x3eAnimated\x3c\/code\x3e 对象当前值为 2，对应的旋转角度就是 180deg。在组件渲染结构中，需要使用 \x3ccode\x3eAnimated.div\x3c\/code\x3e 包裹动画节点，并将 \x3ccode\x3erotateDegree\x3c\/code\x3e 封装为 css 对象作为 stlye 传入 \x3ccode\x3eAnimated.div\x3c\/code\x3e 中，实现节点 css 属性的变化。\x3c\/p\x3e\n\x3cp\x3e在点击事件中，考虑到按钮可能连续多次点击，我们首先使用 \x3ccode\x3estopAnimation\x3c\/code\x3e 停止当前正在进行的动画，该函数会在回调函数中返回一个 \x3ccode\x3e{value : number}\x3c\/code\x3e 对象，\x3ccode\x3evalue\x3c\/code\x3e 对应最后一刻的动画属性值。根据获取的 \x3ccode\x3evalue\x3c\/code\x3e 值，随后使用 \x3ccode\x3eAnimated.spring\x3c\/code\x3e 函数开启一次新的弹簧动画过程，从而实现一个流畅的动画效果。由于每次转动停止时，我们希望图片的翻转角度都是90°的整数倍，所以需要对 \x3ccode\x3eAnimated.spring\x3c\/code\x3e 的终止值进行取整。最终我们实现了如下效果:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012783450?w=599\x26amp;h=404\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012783450?w=599\x26amp;h=404\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e使用时需要注意一下几点：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eAnimated\x3c\/code\x3e 对象的值和其插值结果只能作用于 \x3ccode\x3eAnimated.div\x3c\/code\x3e 节点；\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3einterpolate\x3c\/code\x3e 默认会根据输入区间和输出区间进行线性插值，如果输入值超出输入区间不受影响，插值结果默认会根据输出区间向外延展插值，可以通过设置 \x3ccode\x3eextrapolate\x3c\/code\x3e 属性限制插值结果区间。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eAnimated 在动画过程中不直接修改组件 \x3ccode\x3estate\x3c\/code\x3e，而是通过其新建对象的组件和方法直接修改元素的属性，不会重复触发 render 函数，是 React Native 中非常稳定的动画库。但是在 React 中存在低版本浏览器兼容问题，且具有一定学习成本。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader10\x22\x3e结语\x3c\/h1\x3e\n\x3cp\x3e当我们在 React 中实现动画时，首先要考量动画的难易程度和使用场景，对于简单动画，优先使用 css3 实现，其次是基于 js 的时间间隔动画。如果是元素入场动画和离场动画，则建议结合 \x3ccode\x3eCSSTransitionGroup\x3c\/code\x3e 或者 \x3ccode\x3eTransitionGroup\x3c\/code\x3e 实现。当要实现的动画效果较为复杂时，不妨尝试一些优秀的第三方库，打开精彩的动效大门。\x3c\/p\x3e\n\x3cp\x3ePs. 本文所有示例代码可访问 \x3ca href=\x22https:\/\/github.com\/fairyaierl\/react-animation-demos\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e 查看\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3e参考资料：\x3c\/h1\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/reactjs\/react-transition-group\/tree\/v1-stable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-transition-group\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/azazdeaz.github.io\/react-gsap-enhancer\/#\/demo\/using-transition-group?_k=n0lcbb\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-gsap-enhancer\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/css-tricks.com\/comparison-animation-technologies\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eA Comparison of Animation Technologies\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/medium.com\/react-native-training\/react-animations-in-depth-433e2b3f0e8e\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact Animations in Depth\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e本文首发于\x3ca href=\x22https:\/\/tech.youzan.com\/react-animations\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e有赞技术博客\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React 中常见的动画实现方式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012783439">https://segmentfault.com/a/1190000012783439</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/biugy3wesk5/" target="_blank">https://alili.tech/archive/biugy3wesk5/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>