<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="希望做浏览器长缓存？关于Webpack生成的Hash，你应该知道这些"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>希望做浏览器长缓存？关于Webpack生成的Hash，你应该知道这些 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/bjrz1gl2tmr/",
				"appid": "1613049289050283", 
				"title": "希望做浏览器长缓存？关于Webpack生成的Hash，你应该知道这些 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-26T02:30:14"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ukjzk74300f/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/u53u6ttxdcd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&text=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&text=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&title=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&is_video=false&description=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&title=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&title=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&title=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbjrz1gl2tmr%2f&title=%e5%b8%8c%e6%9c%9b%e5%81%9a%e6%b5%8f%e8%a7%88%e5%99%a8%e9%95%bf%e7%bc%93%e5%ad%98%ef%bc%9f%e5%85%b3%e4%ba%8eWebpack%e7%94%9f%e6%88%90%e7%9a%84Hash%ef%bc%8c%e4%bd%a0%e5%ba%94%e8%af%a5%e7%9f%a5%e9%81%93%e8%bf%99%e4%ba%9b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">希望做浏览器长缓存？关于Webpack生成的Hash，你应该知道这些</h1><div class="meta"><div class="postdate"><time datetime="2018-12-26" itemprop="datePublished">2018-12-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e童鞋，你看到这篇文章的时候很可能你只是在找一篇webpack的配置文章教学，但是听老哥说一句，别去搜什么\x3cem\x3estartkit\x3c\/em\x3e或者\x3cem\x3ebest practice\x3c\/em\x3e文章，特别是中文的，如果你找到了，也记得看一下文章啥时候写的，超过半年的文章就别看了，百分之92.6里面的内容已经过期了。你想学webpack相关的姿势，最好的办法就是：\x3cstrong\x3e看文档\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e言归正传，这篇文章并不教你怎么配置webpack，内容全部都是关于webpack生成文件的\x3ccode\x3ehash\x3c\/code\x3e的。在打包出来的文件名上加上文件内容的\x3ccode\x3ehash\x3c\/code\x3e是目前最常见的有效使用浏览器长缓存的方法，js文件如果有内容更新，\x3ccode\x3ehash\x3c\/code\x3e就会更新，浏览器请求路径变化所以更新缓存，如果js内容不变，\x3ccode\x3ehash\x3c\/code\x3e不变，直接用缓存，\x3cstrong\x3ePERFECT！\x3c\/strong\x3e所以所有的问题就留给如何更好得控制文件的\x3ccode\x3ehash\x3c\/code\x3e了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e基本\x3c\/h2\x3e\n\x3cp\x3e首先我们弄一个最简单的webpack配置：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const path = require(\x27path\x27)\n\nmodule.exports = {\n  entry: {\n    app: path.join(__dirname, \x27src\/foo.js\x27)\n  },\n  output: {\n    filename: \x27[name].[chunkhash].js\x27,\n    path: path.join(__dirname, \x27dist\x27)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo.js\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而我们foo.js如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\nconsole.log(React.toString())\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(React.toString())\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意这里的\x3ccode\x3eoutput.filename\x3c\/code\x3e你也可以用\x3ccode\x3e[hash]\x3c\/code\x3e而不是\x3ccode\x3e[chunkhash]\x3c\/code\x3e，但是这两种生成的hash码是不一样的\x3cbr\x3e使用hash如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.03700a98484e0f02c914.js  70.4 kB       0  [emitted]  app\n   [6] .\/src\/foo.js 55 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3eapp\x3cspan class=\x22hljs-number\x22\x3e.03700\x3c\/span\x3ea98484e0f02c914.js  \x3cspan class=\x22hljs-number\x22\x3e70.4\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  app\n   [\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用chunkhash如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.f2f78b37e74027320ebf.js  70.4 kB       0  [emitted]  app\n   [6] .\/src\/foo.js 55 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3eapp.f2f78b37e74027320ebf.js  \x3cspan class=\x22hljs-number\x22\x3e70.4\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  app\n   [\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对于单个entry来说用哪个都没有问题，做例子期间使用的是\x3ccode\x3ewebpack@3.8.1\x3c\/code\x3e版本，这个版本webpack对于源码没有改动的情况，已经修复了hash串会变的问题。但是在之前的版本有可能会出现\x3cstrong\x3e对于同一份没有修改的代码进行修改，hash不一致的问题\x3c\/strong\x3e，所以不管你使用的版本会不会有问题，都建议使用接下去的配置。\x3cstrong\x3e之后的配置都是用chunkhash\x3c\/strong\x3e作为hash生成\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3ehash vs chunkhash\x3c\/h2\x3e\n\x3cp\x3e因为webpack要处理不同模块的依赖关系，所以他内置了一个js模板用来处理依赖关系（后面称为runtime），这段js因此也会被打包的我们最后bundle里面。在实际项目中我们常常需要将这部分代码分离出来，比如我们要把类库分开打包的情况，如果不单独给runtime单独生成一个js，那么他会和类库一起打包，而这部分代码会随着业务代码改变而改变，导致类库的hash也每次都改变，那么我们分离出类库就没有意义了。所以这里我们需要给runtime单独提供一个js。\x3c\/p\x3e\n\x3cp\x3e修改配置如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  entry: {\n    app: path.join(__dirname, \x27src\/foo.js\x27)\n  },\n  output: {\n    filename: \x27[name].[chunkhash].js\x27,\n    path: path.join(__dirname, \x27dist\x27)\n  },\n  plugins: [\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27runtime\x27\n    })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo.js\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27runtime\x27\x3c\/span\x3e\n    })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ewebpack的文档中说明，如果给\x3ccode\x3ewebpack.optimize.CommonsChunkPlugin\x3c\/code\x3e的name指定一个在entry中没有声明的名字，那么他会把runtime代码打包到这个文件中，所以你这里可以任意指定你喜欢的name (ゝ∀･)b\x3c\/p\x3e\n\x3cp\x3e那么现在打包出来会是神马样的呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.aed80e077eb0a6c42e65.js    68 kB       0  [emitted]  app\nruntime.ead626e4060b3a0ecb1f.js  5.82 kB       1  [emitted]  runtime\n   [6] .\/src\/foo.js 55 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3eapp.aed80e077eb0a6c42e65.js    \x3cspan class=\x22hljs-number\x22\x3e68\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  app\nruntime.ead626e4060b3a0ecb1f.js  \x3cspan class=\x22hljs-number\x22\x3e5.82\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  runtime\n   [\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以看到，app和runtime的hash是不一样的。那么如果我们使用hash而不是chunkhash呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.357eff03ae011d688ac3.js    68 kB       0  [emitted]  app\nruntime.357eff03ae011d688ac3.js  5.81 kB       1  [emitted]  runtime\n   [6] .\/src\/foo.js 55 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3eapp\x3cspan class=\x22hljs-number\x22\x3e.357\x3c\/span\x3eeff03ae011d688ac3.js    \x3cspan class=\x22hljs-number\x22\x3e68\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  app\nruntime\x3cspan class=\x22hljs-number\x22\x3e.357\x3c\/span\x3eeff03ae011d688ac3.js  \x3cspan class=\x22hljs-number\x22\x3e5.81\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  runtime\n   [\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从这里就可以看出hash和chunkhash的区别了，chunkhash会包含每个chunk的区别（chunk可以理解为每个entry），而hash则是所有打包出来的文件都是一样的，所以一旦你的打包输出有多个文件，你势必需要使用chunkhash。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e类库文件单独打包\x3c\/h2\x3e\n\x3cp\x3e在一般的项目中，我们的类库文件都不会经常更新，比如react，更多的时候我们更新的是业务代码。那么我们肯定希望类库代码能够尽可能长的在浏览器进行缓存，这就需要我们单独给类库文件打包了，怎么做呢？\x3c\/p\x3e\n\x3cp\x3e修改配置文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  entry: {\n    app: path.join(__dirname, \x27src\/foo.js\x27),\n    vendor: [\x27react\x27]  \/\/ 所有类库都可以在这里声明\n  },\n  output: {\n    filename: \x27[name].[chunkhash].js\x27,\n    path: path.join(__dirname, \x27dist\x27)\n  },\n  plugins: [\n    \/\/ 单独打包，app中就不会出现类库代码\n    \/\/ 必须放在runtime之前\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27runtime\x27\n    })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo.js\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e]  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所有类库都可以在这里声明\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单独打包，app中就不会出现类库代码\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 必须放在runtime之前\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27runtime\x27\x3c\/span\x3e\n    })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们来执行以下打包：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 vendor.72d208b8e74b753cf09c.js    67.7 kB       0  [emitted]  vendor\n    app.fdc2c0fe8694c1690cb3.js  494 bytes       1  [emitted]  app\nruntime.035d95805255d39272ba.js    5.85 kB       2  [emitted]  runtime\n   [7] .\/src\/foo.js 55 bytes {1} [built]\n  [12] multi react 28 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3e vendor\x3cspan class=\x22hljs-number\x22\x3e.72\x3c\/span\x3ed208b8e74b753cf09c.js    \x3cspan class=\x22hljs-number\x22\x3e67.7\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  vendor\n    app.fdc2c0fe8694c1690cb3.js  \x3cspan class=\x22hljs-number\x22\x3e494\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  app\nruntime\x3cspan class=\x22hljs-number\x22\x3e.035\x3c\/span\x3ed95805255d39272ba.js    \x3cspan class=\x22hljs-number\x22\x3e5.85\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]  runtime\n   [\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n  [\x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3evendor和app分开了，而且hash都不一样，看上去很美好是不是？高兴太早了年轻人。我们再新建一个文件，叫\x3ccode\x3ebar.js\x3c\/code\x3e，代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27\n\nexport default function() {\n  console.log(React.toString())\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(React.toString())\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后修改\x3ccode\x3efoo.js\x3c\/code\x3e如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import bar from \x27.\/bar.js\x27\nconsole.log(bar())\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e bar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/bar.js\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(bar())\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从这个修改中可以看出，我们并没有修改类库相关的内容，我们的vendor中应该依然只有\x3ccode\x3ereact\x3c\/code\x3e，那么vendor的hash应该是不会变的，那么结果如我们所愿吗？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22vendor.424ef301d6c78a447180.js    67.7 kB       0  [emitted]  vendor\n    app.0dfe0411d4a47ce89c61.js  845 bytes       1  [emitted]  app\nruntime.e90ad557ba577934a75f.js    5.85 kB       2  [emitted]  runtime\n   [7] .\/src\/foo.js 45 bytes {1} [built]\n   [8] .\/src\/bar.js 88 bytes {1} [built]\n  [13] multi react 28 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3evendor\x3cspan class=\x22hljs-number\x22\x3e.424\x3c\/span\x3eef301d6c78a447180.js    \x3cspan class=\x22hljs-number\x22\x3e67.7\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  vendor\n    app\x3cspan class=\x22hljs-number\x22\x3e.0\x3c\/span\x3edfe0411d4a47ce89c61.js  \x3cspan class=\x22hljs-number\x22\x3e845\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  app\nruntime.e90ad557ba577934a75f.js    \x3cspan class=\x22hljs-number\x22\x3e5.85\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]  runtime\n   [\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e45\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e] .\/src\/bar.js \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n  [\x3cspan class=\x22hljs-number\x22\x3e13\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很遗憾，webpack狠狠打了我们的脸╮(╯_╰)╭\x3c\/p\x3e\n\x3cp\x3e这是什么原因呢？这是因为我们多加入了一个文件，对于webpack来说就是多了一个模块，\x3cstrong\x3e默认情况下webpack的模块都是以一个有序数列命名的，也就是\x3ccode\x3e[0,1,2....]\x3c\/code\x3e\x3c\/strong\x3e，我们中途加了一个模块导致每个模块的顺序变了，vendor里面的模块的模块id变了，所以hash也就变了。总结一下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3eapp变化是因为内容发生了变化\x3c\/li\x3e\n\x3cli\x3evendor变化时因为他的module.id发生了变化\x3c\/li\x3e\n\x3cli\x3eruntime变化时因为它本身就是维护模块依赖关系的\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e那么怎么解决呢？\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eNamedModulePlugin和HashedModuleIdsPlugin\x3c\/h2\x3e\n\x3cp\x3e这两个plugin让webpack不再使用数字给我们的模块进行命名，这样每个模块都会有一个独有的名字，也就不会出现增删模块导致模块id变化引起最终的hash变化了。如何使用？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  plugins: [\n    new webpack.NamedModulesPlugin(),\n    \/\/ new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27runtime\x27\n    })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NamedModulesPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ new webpack.HashedModuleIdsPlugin(),\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27runtime\x27\x3c\/span\x3e\n    })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eNamedModulePlugin一般用在开发时，能让我们看到模块的名字，可读性更高，但是性能相对较差。HashedModuleIdsPlugin更建议在正式环境中使用。\x3c\/p\x3e\n\x3cp\x3e我们来看一下使用这个插件后，两次打包的结果，修改前：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 vendor.91148d0e2f4041ef2280.js      69 kB       0  [emitted]  vendor\n    app.0228a43edf0a32a59426.js  551 bytes       1  [emitted]  app\nruntime.8ed369e8c4ff541ad301.js    5.85 kB       2  [emitted]  runtime\n[.\/src\/foo.js] .\/src\/foo.js 56 bytes {1} [built]\n   [0] multi react 28 bytes {0} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3e vendor\x3cspan class=\x22hljs-number\x22\x3e.91148\x3c\/span\x3ed0e2f4041ef2280.js      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  vendor\n    app\x3cspan class=\x22hljs-number\x22\x3e.0228\x3c\/span\x3ea43edf0a32a59426.js  \x3cspan class=\x22hljs-number\x22\x3e551\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  app\nruntime\x3cspan class=\x22hljs-number\x22\x3e.8\x3c\/span\x3eed369e8c4ff541ad301.js    \x3cspan class=\x22hljs-number\x22\x3e5.85\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]  runtime\n[.\/src\/foo.js] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e56\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改后：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 vendor.91148d0e2f4041ef2280.js      69 kB       0  [emitted]  vendor\n    app.f64e232e4b6d6a59e617.js  917 bytes       1  [emitted]  app\nruntime.c12d50e9a1902f12a9f4.js    5.85 kB       2  [emitted]  runtime\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {1} [built]\n   [0] multi react 28 bytes {0} [built]\n[.\/src\/foo.js] .\/src\/foo.js 43 bytes {1} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode class=\x22txt\x22\x3e vendor\x3cspan class=\x22hljs-number\x22\x3e.91148\x3c\/span\x3ed0e2f4041ef2280.js      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]  vendor\n    app.f64e232e4b6d6a59e617.js  \x3cspan class=\x22hljs-number\x22\x3e917\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  app\nruntime.c12d50e9a1902f12a9f4.js    \x3cspan class=\x22hljs-number\x22\x3e5.85\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]  runtime\n[.\/src\/bar.js] .\/src\/bar.js \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n[.\/src\/foo.js] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e43\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到vendor的hash没有变化，HashedModuleIdsPlugin也是一样的效果。貌似世界变得更和谐了d(`･∀･)b，是吗？哈哈，\x3cstrong\x3e并不是！\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3easync module\x3c\/h2\x3e\n\x3cp\x3e随着我们的系统变得越来越大，模块变得很多，如果所有模块一次性打包到一起，那么首次加载就会变得很慢。这时候我们会考虑做异步加载，webpack原生支持异步加载，用起来很方便。\x3c\/p\x3e\n\x3cp\x3e我们再创建一个js叫做\x3ccode\x3easync-bar.js\x3c\/code\x3e，在\x3ccode\x3efoo.js\x3c\/code\x3e中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import(\x27.\/async-bar\x27).then(a =\x3e console.log(a))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/async-bar\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e打包：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      0.1415eebc42d74a3dc01d.js  131 bytes       0  [emitted]\n vendor.19a637337ab59d16fb34.js      69 kB       1  [emitted]  vendor\n    app.f7e5ecde27458097680e.js    1.04 kB       2  [emitted]  app\nruntime.c4caa7f9859faa94b02e.js    5.88 kB       3  [emitted]  runtime\n[.\/src\/async-bar.js] .\/src\/async-bar.js 32 bytes {0} [built]\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {2} [built]\n   [0] multi react 28 bytes {1} [built]\n[.\/src\/foo.js] .\/src\/foo.js 92 bytes {2} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e      \x3cspan class=\x22hljs-number\x22\x3e0.1415\x3c\/span\x3eeebc42d74a3dc01d.js  \x3cspan class=\x22hljs-number\x22\x3e131\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]\n vendor\x3cspan class=\x22hljs-number\x22\x3e.19\x3c\/span\x3ea637337ab59d16fb34.js      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]  vendor\n    app.f7e5ecde27458097680e.js    \x3cspan class=\x22hljs-number\x22\x3e1.04\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]  app\nruntime.c4caa7f9859faa94b02e.js    \x3cspan class=\x22hljs-number\x22\x3e5.88\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  [emitted]  runtime\n[.\/src\/\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e-bar.js] .\/src\/\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e-bar.js \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n[.\/src\/bar.js] .\/src\/bar.js \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n[.\/src\/foo.js] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e92\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e恩，这时候我们已经看到，我们的vendor变了，但是更可怕的还在后头，我们再建了一个模块叫\x3ccode\x3easync-baz.js\x3c\/code\x3e，一样的在\x3ccode\x3efoo.js\x3c\/code\x3e引用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import(\x27.\/async-baz\x27).then(a =\x3e console.log(a))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/async-baz\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后再打包：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      0.eb2218a5fc67e9cc73e4.js  131 bytes       0  [emitted]\n      1.61c2f5620a41b50b31eb.js  131 bytes       1  [emitted]\n vendor.1eada47dd979599cc3e5.js      69 kB       2  [emitted]  vendor\n    app.1f82033832b8a5dd6e3b.js    1.17 kB       3  [emitted]  app\nruntime.615d429d080c11c1979f.js     5.9 kB       4  [emitted]  runtime\n[.\/src\/async-bar.js] .\/src\/async-bar.js 32 bytes {1} [built]\n[.\/src\/async-baz.js] .\/src\/async-baz.js 32 bytes {0} [built]\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {3} [built]\n   [0] multi react 28 bytes {2} [built]\n[.\/src\/foo.js] .\/src\/foo.js 140 bytes {3} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e      \x3cspan class=\x22hljs-number\x22\x3e0.\x3c\/span\x3eeb2218a5fc67e9cc73e4.js  \x3cspan class=\x22hljs-number\x22\x3e131\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  [emitted]\n      \x3cspan class=\x22hljs-number\x22\x3e1.61\x3c\/span\x3ec2f5620a41b50b31eb.js  \x3cspan class=\x22hljs-number\x22\x3e131\x3c\/span\x3e bytes       \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  [emitted]\n vendor\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3eeada47dd979599cc3e5.js      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  [emitted]  vendor\n    app\x3cspan class=\x22hljs-number\x22\x3e.1\x3c\/span\x3ef82033832b8a5dd6e3b.js    \x3cspan class=\x22hljs-number\x22\x3e1.17\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  [emitted]  app\nruntime\x3cspan class=\x22hljs-number\x22\x3e.615\x3c\/span\x3ed429d080c11c1979f.js     \x3cspan class=\x22hljs-number\x22\x3e5.9\x3c\/span\x3e kB       \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e  [emitted]  runtime\n[.\/src\/async-bar.js] .\/src\/async-bar.js \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e} [built]\n[.\/src\/async-baz.js] .\/src\/async-baz.js \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e} [built]\n[.\/src\/bar.js] .\/src\/bar.js \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e} [built]\n[.\/src\/foo.js] .\/src\/foo.js \x3cspan class=\x22hljs-number\x22\x3e140\x3c\/span\x3e bytes {\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e恩，我能说脏话吗？不能？(╯‵□′)╯︵┻━┻\x3c\/p\x3e\n\x3cp\x3e为啥每个模块的hash都变了啊？！！为啥模块又变成数字ID了啊？！！\x3c\/p\x3e\n\x3cp\x3e好吧，言归正传，决绝办法还是有的，那就是NamedChunksPlugin，之前是用来处理每个chunk名字的，似乎在最新的版本中不需要这个也能正常打包普通模块的名字。但是这里我们可以用来处理异步模块的名字，在webpack的plugins中加入如下代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.NamedChunksPlugin((chunk) =\x3e { \n  if (chunk.name) { \n    return chunk.name; \n  } \n  return chunk.mapModules(m =\x3e path.relative(m.context, m.request)).join(\x26quot;_\x26quot;); \n}),\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NamedChunksPlugin(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3echunk\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e { \n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (chunk.name) { \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e chunk.name; \n  } \n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e chunk.mapModules(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3em\x3c\/span\x3e =\x26gt;\x3c\/span\x3e path.relative(m.context, m.request)).join(\x3cspan class=\x22hljs-string\x22\x3e\x22_\x22\x3c\/span\x3e); \n}),\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再执行打包，两次结果如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22         app.5faeebb6da84bedaac0a.js    1.11 kB           app  [emitted]  app\nasync-bar.js.457b1711c7e8c6b6914c.js  144 bytes  async-bar.js  [emitted]\n     runtime.f263e4cd58ad7b17a4bf.js     5.9 kB       runtime  [emitted]  runtime\n      vendor.05493d3691191b049e65.js      69 kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar.js 32 bytes {async-bar.js} [built]\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {app} [built]\n   [0] multi react 28 bytes {vendor} [built]\n[.\/src\/foo.js] .\/src\/foo.js 143 bytes {app} [built]\n    \x2b 11 hidden modules\n\n\n         app.55e3f40adacf95864a96.js     1.2 kB           app  [emitted]  app\nasync-bar.js.457b1711c7e8c6b6914c.js  144 bytes  async-bar.js  [emitted]\nasync-baz.js.a85440cf862a8ad3a984.js  144 bytes  async-baz.js  [emitted]\n     runtime.deeb657e46f5f7c0da42.js    5.94 kB       runtime  [emitted]  runtime\n      vendor.05493d3691191b049e65.js      69 kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar.js 32 bytes {async-bar.js} [built]\n[.\/src\/async-baz.js] .\/src\/async-baz.js 32 bytes {async-baz.js} [built]\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {app} [built]\n   [0] multi react 28 bytes {vendor} [built]\n[.\/src\/foo.js] .\/src\/foo.js 140 bytes {app} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22txt\x22\x3e         app.\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3efaeebb6da84bedaac0a\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e1.11\x3c\/span\x3e kB           app  [emitted]  app\nasync-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e457\x3c\/span\x3eb1711c7e8c6b6914c\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e144\x3c\/span\x3e bytes  async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  [emitted]\n     runtime\x3cspan class=\x22hljs-selector-class\x22\x3e.f263e4cd58ad7b17a4bf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e     \x3cspan class=\x22hljs-number\x22\x3e5.9\x3c\/span\x3e kB       runtime  [emitted]  runtime\n      vendor.\x3cspan class=\x22hljs-number\x22\x3e05493\x3c\/span\x3ed3691191b049e65\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {async-bar.js} [built]\n[.\/src\/bar.js] .\/src\/bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {app} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {vendor} [built]\n[.\/src\/foo.js] .\/src\/foo\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e143\x3c\/span\x3e bytes {app} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\n\n\n         app.\x3cspan class=\x22hljs-number\x22\x3e55\x3c\/span\x3ee3f40adacf95864a96\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e     \x3cspan class=\x22hljs-number\x22\x3e1.2\x3c\/span\x3e kB           app  [emitted]  app\nasync-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e457\x3c\/span\x3eb1711c7e8c6b6914c\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e144\x3c\/span\x3e bytes  async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  [emitted]\nasync-baz\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.a85440cf862a8ad3a984\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e144\x3c\/span\x3e bytes  async-baz\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  [emitted]\n     runtime\x3cspan class=\x22hljs-selector-class\x22\x3e.deeb657e46f5f7c0da42\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e5.94\x3c\/span\x3e kB       runtime  [emitted]  runtime\n      vendor.\x3cspan class=\x22hljs-number\x22\x3e05493\x3c\/span\x3ed3691191b049e65\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {async-bar.js} [built]\n[.\/src\/async-baz.js] .\/src\/async-baz\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {async-baz.js} [built]\n[.\/src\/bar.js] .\/src\/bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {app} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {vendor} [built]\n[.\/src\/foo.js] .\/src\/foo\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e140\x3c\/span\x3e bytes {app} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到结果都是用名字而不是id了，而且不改改变的地方也都没有改变\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e注意生成chunk名字的逻辑代码你可以根据自己的需求去改\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e使用上面的方式会有一些问题，比如使用.vue文件开发模式，m.request是一大串vue-loader生成的代码，所以打包会报错。当然大家可以自己找对应的命名方式，在这里我推荐一个webpack原生支持的方式，在使用import的时候，写如下注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import(\/* webpackChunkName: \x26quot;views-home\x26quot; *\/ \x27..\/views\/Home\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-comment\x22\x3e\/* webpackChunkName: \x22views-home\x22 *\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/views\/Home\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后配置文件只要使用\x3ccode\x3enew NamedChunksPlugin()\x3c\/code\x3e就可以了，不需要自己再拼写名字，因为这个时候我们的异步chunk已经有名字了。\x3c\/p\x3e\n\x3cp\x3e所以到这就结束了是吗？真的，求你快结束吧，我想去吃我两小时前买的烤鸭了。\x3c\/p\x3e\n\x3cp\x3e好\x3cdel\x3e~\x3c\/del\x3e~~的吧，我们还得搞点事情\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e增加更多的entry\x3c\/h2\x3e\n\x3cp\x3e修改\x3ccode\x3ewebpack.config.js\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  ...\n  entry: {\n    app: path.join(__dirname, \x27src\/foo.js\x27),\n    vendor: [\x27react\x27],\n    two: path.join(__dirname, \x27src\/foo-two.js\x27)\n  },\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  ...\n  entry: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo.js\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-attr\x22\x3etwo\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo-two.js\x27\x3c\/span\x3e)\n  },\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e增加的enrty如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import bar from \x27.\/bar.js\x27\nconsole.log(bar)\n\nimport(\x27.\/async-bar\x27).then(a =\x3e console.log(a))\n\/\/ import(\x27.\/async-baz\x27).then(a =\x3e console.log(a))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e bar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/bar.js\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(bar)\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/async-bar\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a))\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ import(\x27.\/async-baz\x27).then(a =\x26gt; console.log(a))\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是的跟\x3ccode\x3efoo.js\x3c\/code\x3e一模一样，当然你可以改逻辑，只需要记得引用\x3ccode\x3ebar.js\x3c\/code\x3e就可以。\x3c\/p\x3e\n\x3cp\x3e然后我们打包，结果会让你想再次(╯‵□′)╯︵┻━┻\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22         app.77b13a56bbc0579ca35c.js  612 bytes           app  [emitted]  app\nasync-bar.js.457b1711c7e8c6b6914c.js  144 bytes  async-bar.js  [emitted]\n     runtime.bbe8e813f5e886e7134a.js    5.93 kB       runtime  [emitted]  runtime\n         two.9e4ce5a54b4f73b2ed60.js  620 bytes           two  [emitted]  two\n      vendor.8ad1e07bfa18dd78ad0f.js    69.5 kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar.js 32 bytes {async-bar.js} [built]\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {vendor} [built]\n   [0] multi react 28 bytes {vendor} [built]\n[.\/src\/foo-two.js] .\/src\/foo-two.js 143 bytes {two} [built]\n[.\/src\/foo.js] .\/src\/foo.js 143 bytes {app} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e         app.\x3cspan class=\x22hljs-number\x22\x3e77\x3c\/span\x3eb13a56bbc0579ca35c\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e612\x3c\/span\x3e bytes           app  [emitted]  app\nasync-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e457\x3c\/span\x3eb1711c7e8c6b6914c\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e144\x3c\/span\x3e bytes  async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  [emitted]\n     runtime\x3cspan class=\x22hljs-selector-class\x22\x3e.bbe8e813f5e886e7134a\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e5.93\x3c\/span\x3e kB       runtime  [emitted]  runtime\n         two.\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3ee4ce5a54b4f73b2ed60\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e620\x3c\/span\x3e bytes           two  [emitted]  two\n      vendor.\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3ead1e07bfa18dd78ad0f\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e69.5\x3c\/span\x3e kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {async-bar.js} [built]\n[.\/src\/bar.js] .\/src\/bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {vendor} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {vendor} [built]\n[.\/src\/foo-two.js] .\/src\/foo-two\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e143\x3c\/span\x3e bytes {two} [built]\n[.\/src\/foo.js] .\/src\/foo\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e143\x3c\/span\x3e bytes {app} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为毛所有文件的hash都变化了啊？！！！逗我玩呢？\x3c\/p\x3e\n\x3cp\x3e好吧，原因是vendor作为common chunk并不只是包含我们在entry中声明的部分，他还会包含每个entry中引用的公共代码，有些时候你可能希望这样的结果，但在我们这里，这就是我要解决的一个问题啊ლ(ﾟдﾟლ)\x3c\/p\x3e\n\x3cp\x3e所以这里怎么做呢，在CommonsChunkPlugin里面有一个参数，可以用来告诉webpack我们的vendor真的只想包含我们声明的内容：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  plugins: [\n    ...\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n      minChunks: Infinity\n    }),\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    ...\n    new webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eInfinity\x3c\/span\x3e\n    }),\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个参数的意思是尽可能少的把公用代码包含到vendor里面。于是我们又打包：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22         app.5faeebb6da84bedaac0a.js    1.13 kB           app  [emitted]  app\nasync-bar.js.457b1711c7e8c6b6914c.js  144 bytes  async-bar.js  [emitted]\n     runtime.b0406822caa4d1898cb8.js    5.93 kB       runtime  [emitted]  runtime\n         two.9be2d4a28265bfc9d947.js    1.13 kB           two  [emitted]  two\n      vendor.05493d3691191b049e65.js      69 kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar.js 32 bytes {async-bar.js} [built]\n[.\/src\/bar.js] .\/src\/bar.js 88 bytes {app} {two} [built]\n   [0] multi react 28 bytes {vendor} [built]\n[.\/src\/foo-two.js] .\/src\/foo-two.js 143 bytes {two} [built]\n[.\/src\/foo.js] .\/src\/foo.js 143 bytes {app} [built]\n    \x2b 11 hidden modules\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e         app.\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3efaeebb6da84bedaac0a\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e1.13\x3c\/span\x3e kB           app  [emitted]  app\nasync-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e457\x3c\/span\x3eb1711c7e8c6b6914c\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e144\x3c\/span\x3e bytes  async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e  [emitted]\n     runtime\x3cspan class=\x22hljs-selector-class\x22\x3e.b0406822caa4d1898cb8\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e5.93\x3c\/span\x3e kB       runtime  [emitted]  runtime\n         two.\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3ebe2d4a28265bfc9d947\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e1.13\x3c\/span\x3e kB           two  [emitted]  two\n      vendor.\x3cspan class=\x22hljs-number\x22\x3e05493\x3c\/span\x3ed3691191b049e65\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e      \x3cspan class=\x22hljs-number\x22\x3e69\x3c\/span\x3e kB        vendor  [emitted]  vendor\n[.\/src\/async-bar.js] .\/src\/async-bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e bytes {async-bar.js} [built]\n[.\/src\/bar.js] .\/src\/bar\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e88\x3c\/span\x3e bytes {app} {two} [built]\n   [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] multi react \x3cspan class=\x22hljs-number\x22\x3e28\x3c\/span\x3e bytes {vendor} [built]\n[.\/src\/foo-two.js] .\/src\/foo-two\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e143\x3c\/span\x3e bytes {two} [built]\n[.\/src\/foo.js] .\/src\/foo\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e143\x3c\/span\x3e bytes {app} [built]\n    \x2b \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e hidden modules\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e恩，熟悉的味道。\x3c\/p\x3e\n\x3cp\x3e到这里我们跟webpack的\x3cstrong\x3ehash变化之战\x3c\/strong\x3e算是告一段落，大部分webpack打包出现问题的原因是模块命名的问题，所以解决办法其实也就是给每个模块一个固定的名字。\x3c\/p\x3e\n\x3cp\x3e最后我们的配置如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const path = require(\x27path\x27)\nconst webpack = require(\x27webpack\x27)\n\nmodule.exports = {\n  entry: {\n    app: path.join(__dirname, \x27src\/foo.js\x27),\n    vendor: [\x27react\x27],\n    two: path.join(__dirname, \x27src\/foo-two.js\x27)\n  },\n  externals: {\n    jquery: \x27jQuery\x27\n  },\n  output: {\n    filename: \x27[name].[chunkhash].js\x27,\n    path: path.join(__dirname, \x27dist\x27)\n  },\n  plugins: [\n    new webpack.NamedChunksPlugin((chunk) =\x3e { \n      if (chunk.name) { \n        return chunk.name; \n      } \n      return chunk.mapModules(m =\x3e path.relative(m.context, m.request)).join(\x26quot;_\x26quot;); \n    }),\n    new webpack.NamedModulesPlugin(),\n    \/\/ new webpack.HashedModuleIdsPlugin(),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n      minChunks: Infinity\n    }),\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27runtime\x27\n    })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo.js\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-attr\x22\x3etwo\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/foo-two.js\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eexternals\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jQuery\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NamedChunksPlugin(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3echunk\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e { \n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (chunk.name) { \n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e chunk.name; \n      } \n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e chunk.mapModules(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3em\x3c\/span\x3e =\x26gt;\x3c\/span\x3e path.relative(m.context, m.request)).join(\x3cspan class=\x22hljs-string\x22\x3e\x22_\x22\x3c\/span\x3e); \n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NamedModulesPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ new webpack.HashedModuleIdsPlugin(),\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eminChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eInfinity\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27runtime\x27\x3c\/span\x3e\n    })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你遇到了其他问题，你可以给我留言，我会去尝试解决，希望大家看完能有一些收获( σ՞ਊ ՞)σ \x3c\/p\x3e\n\x3cp\x3e参考文章：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/webpack.js.org\/guides\/caching\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/webpack.js.org\/guides\/caching\/\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/medium.com\/webpack\/predictable-long-term-caching-with-webpack-d3eee1d3fa31\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e一篇牛逼的blog\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>希望做浏览器长缓存？关于Webpack生成的Hash，你应该知道这些</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011980729">https://segmentfault.com/a/1190000011980729</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/bjrz1gl2tmr/" target="_blank">https://alili.tech/archive/bjrz1gl2tmr/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>