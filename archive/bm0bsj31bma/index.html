<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue.js前后端分离后台，该如何根据用户权限处理前端显示和后台接口访问"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue.js前后端分离后台，该如何根据用户权限处理前端显示和后台接口访问 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/bm0bsj31bma/",
				"appid": "1613049289050283", 
				"title": "vue.js前后端分离后台，该如何根据用户权限处理前端显示和后台接口访问 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-09T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/i29w2gqb0ib/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/s1ir7xcr9ja/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&text=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&text=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&title=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&is_video=false&description=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&title=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&title=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&title=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbm0bsj31bma%2f&title=vue.js%e5%89%8d%e5%90%8e%e7%ab%af%e5%88%86%e7%a6%bb%e5%90%8e%e5%8f%b0%ef%bc%8c%e8%af%a5%e5%a6%82%e4%bd%95%e6%a0%b9%e6%8d%ae%e7%94%a8%e6%88%b7%e6%9d%83%e9%99%90%e5%a4%84%e7%90%86%e5%89%8d%e7%ab%af%e6%98%be%e7%a4%ba%e5%92%8c%e5%90%8e%e5%8f%b0%e6%8e%a5%e5%8f%a3%e8%ae%bf%e9%97%ae"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue.js前后端分离后台，该如何根据用户权限处理前端显示和后台接口访问</h1><div class="meta"><div class="postdate"><time datetime="2018-12-09" itemprop="datePublished">2018-12-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e索引\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22#\x22\x3e概述\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22#vue.js\x22\x3evue.js动态路由\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22#\x22\x3e模块切换\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22#\x22\x3e处理浏览器刷新\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22#\x22\x3e有选择的生成菜单\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22#\x22\x3e项目完成进度\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e概述\x3c\/h2\x3e\n\x3cp\x3e传统的后台系统，直接根据用户的权限，于服务器端生成不同的html画面，呈现给用户。前后端分离项目中，画面大多数情况下于用户浏览器完成渲染，即用户在登录前，客户端即获取了完整的可用于用户操作的画面代码。\x3cbr\x3e这时，如果想根据用户的权限来处理菜单或画面元素的呈现，有两种方式来处理：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e在用户登录后，使用自定义指令，把用户无权处理的菜单或项目从画面上remove掉\x3c\/li\x3e\n\x3cli\x3e根据权限动态处理路由和菜单，并结合自定义指令，处理画面元素的呈现\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e下面结合vue.js的动态路由，来说明一下如何来管理权限及菜单甚至接口。其中代码开源至（未完）\x3ca href=\x22https:\/\/github.com\/ccfish86\/jvue-admin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejvue-admin\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e下图为实现效果：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e不同的业务模块，菜单不一样，避免单个模块菜单过长，另外授权时，根据模块处理权限更方便\x3c\/li\x3e\n\x3cli\x3e画面用element-ui\x3c\/li\x3e\n\x3cli\x3e使用了vuet代替vuex做数据的持久化\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6o2k?w=1329\x26amp;h=678\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6o2k?w=1329\x26amp;h=678\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3evue.js动态路由\x3c\/h2\x3e\n\x3cp\x3evue.js路由需要的几个属性：path,name,component,children,meta。动态路由需要服务器端提供这些数据，所以需要在用户登录成功后，由接口返回类似的数据。如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[{\n  \x26quot;id\x26quot;: 30,\n  \x26quot;component\x26quot;: \x26quot;common-main\x26quot;,\n  \x26quot;enabled\x26quot;: 1,\n  \x26quot;iconClass\x26quot;: null,\n  \x26quot;moduleId\x26quot;: 2,\n  \x26quot;name\x26quot;: \x26quot;用户LAYOUT\x26quot;,\n  \x26quot;path\x26quot;: \x26quot;\/user\x26quot;,\n  \x26quot;type\x26quot;: 1,\n  \x26quot;showNav\x26quot;: 1,\n  \x26quot;parentId\x26quot;: null,\n  \x26quot;children\x26quot;: [\n    {\n      \x26quot;id\x26quot;: 32,\n      \x26quot;component\x26quot;: \x26quot;user-index\x26quot;,\n      \x26quot;enabled\x26quot;: 1,\n      \x26quot;iconClass\x26quot;: null,\n      \x26quot;moduleId\x26quot;: 2,\n      \x26quot;name\x26quot;: \x26quot;用户列表\x26quot;,\n      \x26quot;path\x26quot;: \x26quot;\/user\/list\x26quot;,\n      \x26quot;type\x26quot;: 1,\n      \x26quot;showNav\x26quot;: 1,\n      \x26quot;parentId\x26quot;: 30,\n      \x26quot;children\x26quot;: []\n    }\n  ]\n},\n{\n  \x26quot;id\x26quot;: 42,\n  \x26quot;component\x26quot;: \x26quot;common-main\x26quot;,\n  \x26quot;enabled\x26quot;: 1,\n  \x26quot;iconClass\x26quot;: null,\n  \x26quot;moduleId\x26quot;: 10,\n  \x26quot;name\x26quot;: \x26quot;测试L\x26quot;,\n  \x26quot;path\x26quot;: \x26quot;\/test\x26quot;,\n  \x26quot;type\x26quot;: 2,\n  \x26quot;showNav\x26quot;: 1,\n  \x26quot;parentId\x26quot;: null,\n  \x26quot;children\x26quot;: [\n    {\n      \x26quot;id\x26quot;: 43,\n      \x26quot;component\x26quot;: \x26quot;test-ll\x26quot;,\n      \x26quot;enabled\x26quot;: 1,\n      \x26quot;iconClass\x26quot;: null,\n      \x26quot;moduleId\x26quot;: 10,\n      \x26quot;name\x26quot;: \x26quot;测试LL\x26quot;,\n      \x26quot;path\x26quot;: \x26quot;\/test\/ll\x26quot;,\n      \x26quot;type\x26quot;: 1,\n      \x26quot;showNav\x26quot;: 1,\n      \x26quot;parentId\x26quot;: 42,\n      \x26quot;children\x26quot;: []\n    }\n  ]\n}]\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e[{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22id\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22component\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22common-main\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22enabled\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22iconClass\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22moduleId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22用户LAYOUT\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22path\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/user\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22showNav\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22parentId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22children\x22\x3c\/span\x3e: [\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22id\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22component\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22user-index\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22enabled\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22iconClass\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22moduleId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22用户列表\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22path\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/user\/list\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22showNav\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22parentId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22children\x22\x3c\/span\x3e: []\n    }\n  ]\n},\n{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22id\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e42\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22component\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22common-main\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22enabled\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22iconClass\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22moduleId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22测试L\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22path\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/test\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22showNav\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22parentId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22children\x22\x3c\/span\x3e: [\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22id\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e43\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22component\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22test-ll\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22enabled\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22iconClass\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22moduleId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22测试LL\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22path\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/test\/ll\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22showNav\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22parentId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e42\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22children\x22\x3c\/span\x3e: []\n    }\n  ]\n}]\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在用户登录后：\x3cbr\x3e转换为vue.js可识别的路由对象后追加后vue路由\x3ccode\x3e$router.addRoutes(userRouters)\x3c\/code\x3e\x3cbr\x3e处理上述menu数据至vue.js路由的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22toRoutes (menus) {\n    let userRouters = []\n    menus.forEach(menu =\x3e {\n      let {\n        id,\n        moduleId,\n        path,\n        component,\n        name,\n        meta = {},\n        iconCls,\n        children,\n        showNav\n      } = menu\n      if (children \x26amp;\x26amp; children instanceof Array) {\n        children = utils.toRoutes(children)\n      }\n      meta.moduleId = moduleId\n      meta.id = id\n      meta.name = name\n      meta.showNav = showNav\n\n      let userRouter = {\n        path: path,\n        component (resolve) {\n          let vfile = component.replace(\/(-)\/g, (v) =\x3e \x27\/\x27)\n          require([\x27@\/pages\/\x27 \x2b vfile \x2b \x27.vue\x27], resolve)\n        },\n        name: name,\n        iconCls: iconCls,\n        meta: meta,\n        children: children\n      }\n      userRouters.push(userRouter)\n    })\n    return userRouters\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3etoRoutes (menus) {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userRouters = []\n    menus.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3emenu\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e {\n        id,\n        moduleId,\n        path,\n        component,\n        name,\n        meta = {},\n        iconCls,\n        children,\n        showNav\n      } = menu\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (children \x26amp;\x26amp; children \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e) {\n        children = utils.toRoutes(children)\n      }\n      meta.moduleId = moduleId\n      meta.id = id\n      meta.name = name\n      meta.showNav = showNav\n\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userRouter = {\n        path: path,\n        component (resolve) {\n          \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vfile = component.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/(-)\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ev\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e)\n          \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x27@\/pages\/\x27\x3c\/span\x3e \x2b vfile \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27.vue\x27\x3c\/span\x3e], resolve)\n        },\n        name: name,\n        iconCls: iconCls,\n        meta: meta,\n        children: children\n      }\n      userRouters.push(userRouter)\n    })\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e userRouters\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是，每个父画面对应的vue文件，需要\x26lt;router-view\x26gt;\x26lt;\/router-view\x26gt;来渲染子画面，这个在做画面管理时，可以做相应的标识。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e模块切换\x3c\/h2\x3e\n\x3cp\x3e模块列表放置于顶部导航，在点击模块名时，调用changeModule处理。同样，在处理页面切换时，在全局路由钩子，也需要判断跳转前后的moduleId是否一致，以使跨模块的页面跳转后，对应的导航能正常处理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 详见\/src\/vuet\/modules\/user.js\nasync changeModule (moduleId = 0) {\nif (this.moduleId !== moduleId) {\n  this.moduleId = moduleId\n  this.leftRoutes = []\n  this.openeds = []\n  \/\/ 只需要处理第一层，第二层\n  this.routers.forEach(router =\x3e {\n    if (router.meta \x26amp;\x26amp; router.meta.moduleId === moduleId \x26amp;\x26amp; router.meta.showNav === 1) {\n      \/\/ console.info(`router.meta.showNav = ${router.meta.showNav}`)\n      let nrouter = Object.assign(router)\n      if (nrouter.children) {\n        this.openeds.push(router.path)\n        nrouter.children = nrouter.children.filter((r) =\x3e r.meta \x26amp;\x26amp; r.meta.showNav === 1)\n      }\n      this.leftRoutes.push(nrouter)\n    } else {\n      return\n    }\n  })\n  \/\/  FIXME 处理模块后，需要切换到对应的页面\n}\n},\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 详见\/src\/vuet\/modules\/user.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e changeModule (moduleId = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.moduleId !== moduleId) {\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.moduleId = moduleId\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.leftRoutes = []\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.openeds = []\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只需要处理第一层，第二层\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.routers.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3erouter\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (router.meta \x26amp;\x26amp; router.meta.moduleId === moduleId \x26amp;\x26amp; router.meta.showNav === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.info(`router.meta.showNav = ${router.meta.showNav}`)\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e nrouter = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(router)\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (nrouter.children) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.openeds.push(router.path)\n        nrouter.children = nrouter.children.filter(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3er\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e r.meta \x26amp;\x26amp; r.meta.showNav === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.leftRoutes.push(nrouter)\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n    }\n  })\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/  FIXME 处理模块后，需要切换到对应的页面\x3c\/span\x3e\n}\n},\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e处理浏览器刷新\x3c\/h2\x3e\n\x3cp\x3evuet支持store模式的规则，来持久化用户登录数据及前端的路由和菜单数据，这里保存到\x3ccode\x3evuet#user-self\x3c\/code\x3e，暂时部分细节尚待处理（如：直接URL访问或刷新时登录超时的验证，敏感数据如密码等加密(或不保存)处理）。\x3cbr\x3e用户刷新浏览器后，依赖vuet依然可以得到之前保存过的menus和路由等信息，但动态路由需要重新生成并调用\x3ccode\x3e$router.addRoutes(userRouters)\x3c\/code\x3e追加至vue，这一部分处理，详见\/src\/vuet\/modules\/user.js\x3c\/p\x3e\n\x3cp\x3e在刷新时，会执行到router.onReady，从本地的localstorage里取路由元(后台返回的用于创建路由的数据)数据，生成动态路由。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ \/src\/router\/index.js\nrouter.onReady(() =\x3e {\n  \/\/ 处理刷新后，router重加载\n  let userSelf = vuet.getModule(\x27user-self\x27)\n  if (userSelf \x26amp;\x26amp; userSelf.user) {\n    userSelf.reloadRouters()\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \/src\/router\/index.js\x3c\/span\x3e\nrouter.onReady(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理刷新后，router重加载\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userSelf = vuet.getModule(\x3cspan class=\x22hljs-string\x22\x3e\x27user-self\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (userSelf \x26amp;\x26amp; userSelf.user) {\n    userSelf.reloadRouters()\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ \/src\/vuet\/modules\/user.js\n  reloadRouters () {\n    if (this.menus \x26amp;\x26amp; this.menus.length \x3e 0) {\n      let userRoutes = utils.toRoutes(this.menus)\n      \/\/ 追加404\n      userRoutes.push({\n        path: \x27*\x27,\n        meta: {auth: false},\n        hidden: true,\n        redirect: {path: \x27\/error\/404\x27}\n      })\n      this.app.$router.addRoutes(userRoutes)\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \/src\/vuet\/modules\/user.js\x3c\/span\x3e\n  reloadRouters () {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.menus \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.menus.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userRoutes = utils.toRoutes(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.menus)\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 追加404\x3c\/span\x3e\n      userRoutes.push({\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3emeta\x3c\/span\x3e: {\x3cspan class=\x22hljs-attr\x22\x3eauth\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n        \x3cspan class=\x22hljs-attr\x22\x3ehidden\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eredirect\x3c\/span\x3e: {\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/error\/404\x27\x3c\/span\x3e}\n      })\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.app.$router.addRoutes(userRoutes)\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e有选择的生成菜单\x3c\/h2\x3e\n\x3cp\x3e因为一些编译或详情画面，需要根据用户点击来获取ID参数，如果直接放到菜单里也无法使用，这里在后台的API里，通过返回showNav来区分，即动态生成vue.js路由，但不生成菜单。暂时在模块下，支持两层菜单，如果更多的话，稍加修改即可支持。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cel-menu :default-active=\x26quot;String(userSelf.active)\x26quot; router theme=\x26quot;dark\x26quot; @open=\x26quot;handleOpen\x26quot; @close=\x26quot;handleClose\x26quot; :default-openeds=\x26quot;userSelf.openeds\x26quot;\x3e\n  \x3ctemplate v-for=\x26quot;router in userSelf.leftRoutes\x26quot;\x3e\n    \x3cel-submenu :index=\x26quot;router.path\x26quot; :key=\x26quot;router.path\x26quot;\n                v-if=\x26quot;router.children \x26amp;\x26amp; router.children instanceof Array \x26amp;\x26amp; router.children.length \x3e 0\x26quot;\x3e\n      \x3ctemplate slot=\x26quot;title\x26quot;\x3e\x22{{\x22router.name\x22}}\x22\x3c\/template\x3e\n      \x3cel-menu-item v-for=\x26quot;child in router.children\x26quot; :key=\x26quot;child.name\x26quot; :index=\x26quot;child.path\x26quot;\x3e\x22{{\x22child.meta.name\x22}}\x22\n      \x3c\/el-menu-item\x3e\n    \x3c\/el-submenu\x3e\n    \x3cel-menu-item :index=\x26quot;router.path\x26quot; :key=\x26quot;router.path\x26quot; v-else\x3e\x22{{\x22router.meta.name\x22}}\x22\x3c\/el-menu-item\x3e\n  \x3c\/template\x3e\n\x3c\/el-menu\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-menu\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:default-active\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22String(userSelf.active)\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erouter\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etheme\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22dark\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eopen\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22handleOpen\x22\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eclose\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22handleClose\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:default-openeds\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22userSelf.openeds\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22router in userSelf.leftRoutes\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-submenu\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:index\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22router.path\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22router.path\x22\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22router.children \x26amp;\x26amp; router.children instanceof Array \x26amp;\x26amp; router.children.length \x26gt; 0\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eslot\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22title\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22router.name\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-menu-item\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22child in router.children\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22child.name\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:index\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22child.path\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22child.meta.name\x22}}\x22\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-menu-item\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-submenu\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-menu-item\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:index\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22router.path\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22router.path\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-else\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22router.meta.name\x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-menu-item\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-menu\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e项目完成进度\x3c\/h2\x3e\n\x3cp\x3e上述只是简单描述了前端的部分处理，另外配合前端后台API也开发了部分接口。后台使用的是Spring boot基本上配置下数据库就可以执行起来，有时间的话，另起一篇再说。\x3c\/p\x3e\n\x3cp\x3e模块和菜单的前后端管理基本上是完成了，API的描述信息后台已有相应的机制自动收集。后续陆续追加角色，和角色与API和画面的管理(授权)，及后端API的权限拦截。\x3c\/p\x3e\n\x3cp\x3e更多其他功能，如后台的权限发生变更，即时影响客户端菜单或画面重新渲染的处理可能需要下一个版本引入websocket后来实现。另外后端会使用hazelcast，以角色为单位把API\/菜单权限缓存至内存中，避免每个用户加载相同的角色数据，占用比较多的内存资源和DB-IO，也解决方便授权相关数据更新后的前端响应问题。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue.js前后端分离后台，该如何根据用户权限处理前端显示和后台接口访问</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013883117">https://segmentfault.com/a/1190000013883117</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/bm0bsj31bma/" target="_blank">https://alili.tech/archive/bm0bsj31bma/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>