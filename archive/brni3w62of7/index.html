<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="如何让一个vue项目支持多语言（vue-i18n）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>如何让一个vue项目支持多语言（vue-i18n） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/brni3w62of7/",
				"appid": "1613049289050283", 
				"title": "如何让一个vue项目支持多语言（vue-i18n） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-11-29T09:34:56"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jfupnfxx5hf/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/t3g6imqxoxk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&text=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&text=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&title=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&is_video=false&description=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&title=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&title=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&title=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fbrni3w62of7%2f&title=%e5%a6%82%e4%bd%95%e8%ae%a9%e4%b8%80%e4%b8%aavue%e9%a1%b9%e7%9b%ae%e6%94%af%e6%8c%81%e5%a4%9a%e8%af%ad%e8%a8%80%ef%bc%88vue-i18n%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">如何让一个vue项目支持多语言（vue-i18n）</h1><div class="meta"><div class="postdate"><time datetime="2018-11-29" itemprop="datePublished">2018-11-29</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e这两天手头的一个任务是给一个五六年的老项目添加多语言。这个项目庞大且复杂，早期是用jQuery实现的，两年前引入Vue并逐渐用组件替换了之前的Mustache风格模板。要添加多语言，不可避免存在很多文本替换的工作，这么庞杂的一个项目，怎么才能使文本替换变得高效且不会引入bug是这篇文章主要要写的东西。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e引入vue-i18n\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/kazupon.github.io\/vue-i18n\/en\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-i18n\x3c\/a\x3e是一个vue插件，主要作用就是让项目支持国际化多语言。首先我们引入这个插件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport VueI18n from \x27vue-i18n\x27\n\nVue.use(VueI18n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VueI18n \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-i18n\x27\x3c\/span\x3e\n\nVue.use(VueI18n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里注意的就是vue插件的使用方法，通过全局方法 \x3ccode\x3eVue.use()\x3c\/code\x3e 使用插件。\x3c\/p\x3e\n\x3cblockquote\x3e插件通常会为 Vue 添加全局功能。插件的范围没有限制——一般有下面几种：添加全局方法或者属性；添加全局资源：指令\/过滤器\/过渡等；通过全局 mixin 方法添加一些组件选项；添加 Vue 实例方法，通过把它们添加到 Vue.prototype 上实现。\x3c\/blockquote\x3e\n\x3cp\x3eVue.js 的插件应当有一个公开方法 install, 通过代码可以更直观的看出插件提供的功能:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22MyPlugin.install = function (Vue, options) {\n  \/\/ 1. 添加全局方法或属性\n  Vue.myGlobalMethod = function () {\n    \/\/ 逻辑...\n  }\n\n  \/\/ 2. 添加全局资源\n  Vue.directive(\x27my-directive\x27, {\n    bind (el, binding, vnode, oldVnode) {\n      \/\/ 逻辑...\n    }\n    ...\n  })\n\n  \/\/ 3. 注入组件\n  Vue.mixin({\n    created: function () {\n      \/\/ 逻辑...\n    }\n    ...\n  })\n\n  \/\/ 4. 添加实例方法\n  Vue.prototype.$myMethod = function (methodOptions) {\n    \/\/ 逻辑...\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3eMyPlugin.install = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(Vue, options)\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1. 添加全局方法或属性\x3c\/span\x3e\n  Vue.myGlobalMethod = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 逻辑...\x3c\/span\x3e\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2. 添加全局资源\x3c\/span\x3e\n  Vue.directive(\x3cspan class=\x22hljs-string\x22\x3e\x27my-directive\x27\x3c\/span\x3e, {\n    bind (el, binding, vnode, oldVnode) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 逻辑...\x3c\/span\x3e\n    }\n    ...\n  })\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 3. 注入组件\x3c\/span\x3e\n  Vue.mixin({\n    created: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 逻辑...\x3c\/span\x3e\n    }\n    ...\n  })\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 4. 添加实例方法\x3c\/span\x3e\n  Vue.prototype.$myMethod = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(methodOptions)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 逻辑...\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e了解vue插件的install方法对我们等会查看i18n源码有很大帮助。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e使用vue-i18n\x3c\/h2\x3e\n\x3cp\x3e我们先看官方提供的最简单的使用模板：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/HTML\n\x3cdiv id=\x26quot;app\x26quot;\x3e\n  \x3cp\x3e\x22{{\x22 $t(\x26quot;message.hello\x26quot;) \x22}}\x22\x3c\/p\x3e\n\x3c\/div\x3e\n\n\/\/JAVASCRIPT\nconst messages = {\n  en: {\n    message: {\n      hello: \x27hello world\x27\n    }\n  },\n  ja: {\n    message: {\n      hello: \x27こんにちは、世界\x27\n    }\n  }\n}\n\nconst i18n = new VueI18n({\n  locale: \x27ja\x27, \/\/ set locale\n  messages, \/\/ set locale messages\n})\n\n\nnew Vue({ i18n }).$mount(\x27#app\x27)\n\n\/\/OUTPUT\n\x3cdiv id=\x26quot;#app\x26quot;\x3e\n  \x3cp\x3eこんにちは、世界\x3c\/p\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs axapta\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/HTML\x3c\/span\x3e\n\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\n  \x26lt;p\x26gt;\x22{{\x22 $t(\x3cspan class=\x22hljs-string\x22\x3e\x22message.hello\x22\x3c\/span\x3e) \x22}}\x22\x26lt;\/p\x26gt;\n\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/JAVASCRIPT\x3c\/span\x3e\nconst messages = {\n  en: {\n    message: {\n      hello: \x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e\n    }\n  },\n  ja: {\n    message: {\n      hello: \x3cspan class=\x22hljs-string\x22\x3e\x27こんにちは、世界\x27\x3c\/span\x3e\n    }\n  }\n}\n\nconst i18n = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e VueI18n({\n  locale: \x3cspan class=\x22hljs-string\x22\x3e\x27ja\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ set locale\x3c\/span\x3e\n  messages, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ set locale messages\x3c\/span\x3e\n})\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({ i18n }).$mount(\x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/OUTPUT\x3c\/span\x3e\n\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22#app\x22\x3c\/span\x3e\x26gt;\n  \x26lt;p\x26gt;こんにちは、世界\x26lt;\/p\x26gt;\n\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，我们在实例化Vue的时候，将i18n当做一个option传了进去。之后我们就可以在vue的组件里使用i18n了，使用方法主要是两种：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e在组件的template中，调用\x3ccode\x3e$t()\x3c\/code\x3e方法\x3c\/li\x3e\n\x3cli\x3e在组件的script中，调用\x3ccode\x3ethis.$i18n.t()\x3c\/code\x3e方法\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e添加locales文件夹\x3c\/h2\x3e\n\x3cp\x3e上节的\x3ccode\x3emessages\x3c\/code\x3e是一个包含了多语言的的对象，它就像我们的字典。既然是字典，我希望它只有一本。所以我只会\x3ccode\x3enew VueI18n()\x3c\/code\x3e一次，并将实例化得到的i18n对象作为唯一的字典。\x3c\/p\x3e\n\x3cp\x3e所以新建一个locales文件夹，存放所有跟多语言相关的代码。目前包含三个文件：index.js, en.json, zh.json。\x3c\/p\x3e\n\x3cp\x3een.json和zh.json就是我们的语言包，是一个json形式。这里为了对照方便，我们必须保证语言包的内容是一一对应的。然后我们在index.js中完成设置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport VueI18n from \x27vue-i18n\x27\n\nVue.use(VueI18n)\n\nconst DEFAULT_LANG = \x27zh\x27\nconst LOCALE_KEY = \x27localeLanguage\x27\n\nconst locales = {\n  zh: require(\x27.\/zh.json\x27),\n  en: require(\x27.\/en.json\x27),\n}\n\nconst i18n = new VueI18n({\n  locale: DEFAULT_LANG,\n  messages: locales,\n})\n\nexport const setup = lang =\x3e {\n  if (lang === undefined) {\n    lang = window.localStorage.getItem(LOCALE_KEY)\n    if (locales[lang] === undefined) {\n      lang = DEFAULT_LANG\n    }\n  }\n  window.localStorage.setItem(LOCALE_KEY, lang)\n\n  Object.keys(locales).forEach(lang =\x3e {\n    document.body.classList.remove(`lang-${lang}`)\n  })\n  document.body.classList.add(`lang-${lang}`)\n  document.body.setAttribute(\x27lang\x27, lang)\n\n  Vue.config.lang = lang\n  i18n.locale = lang\n}\n\nsetup()\nexport default i18n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VueI18n \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-i18n\x27\x3c\/span\x3e\n\nVue.use(VueI18n)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e DEFAULT_LANG = \x3cspan class=\x22hljs-string\x22\x3e\x27zh\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e LOCALE_KEY = \x3cspan class=\x22hljs-string\x22\x3e\x27localeLanguage\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e locales = {\n  \x3cspan class=\x22hljs-attr\x22\x3ezh\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/zh.json\x27\x3c\/span\x3e),\n  \x3cspan class=\x22hljs-attr\x22\x3een\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/en.json\x27\x3c\/span\x3e),\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e i18n = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e VueI18n({\n  \x3cspan class=\x22hljs-attr\x22\x3elocale\x3c\/span\x3e: DEFAULT_LANG,\n  \x3cspan class=\x22hljs-attr\x22\x3emessages\x3c\/span\x3e: locales,\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e setup = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3elang\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (lang === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n    lang = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.localStorage.getItem(LOCALE_KEY)\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (locales[lang] === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n      lang = DEFAULT_LANG\n    }\n  }\n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.localStorage.setItem(LOCALE_KEY, lang)\n\n  \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(locales).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3elang\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e`lang-\x3cspan class=\x22hljs-subst\x22\x3e${lang}\x3c\/span\x3e`\x3c\/span\x3e)\n  })\n  \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.classList.add(\x3cspan class=\x22hljs-string\x22\x3e`lang-\x3cspan class=\x22hljs-subst\x22\x3e${lang}\x3c\/span\x3e`\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.setAttribute(\x3cspan class=\x22hljs-string\x22\x3e\x27lang\x27\x3c\/span\x3e, lang)\n\n  Vue.config.lang = lang\n  i18n.locale = lang\n}\n\nsetup()\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e i18n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们对外提供了一个\x3ccode\x3esetup()\x3c\/code\x3e的方法，给使用者修改当前使用语种的能力。同时，我们在setup里还做了三件事：\x3cbr\x3e将当前语种存到 localStorage中，保存用户的使用习惯；给body添加语种相关的class，因为不同语言可能导致排版出现差异，我们需要适配；将当前语种存到Vue的全局配置中，以便未来可能的使用。\x3c\/p\x3e\n\x3cp\x3e最后我们在\x3ccode\x3emain.js\x3c\/code\x3e中引入这个Index.js即可。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\n\nimport App from \x27.\/app.vue\x27\nimport store from \x27.\/store\x27\nimport router from \x27.\/router\x27\n...\nimport i18n from \x27@crm\/locales\x27\n...\n\nnew Vue({\n  i18n,\n  router,\n  store,\n  render: h =\x3e h(App),\n}).$mount(\x27#app\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/app.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/store\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\x27\x3c\/span\x3e\n...\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e i18n \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@crm\/locales\x27\x3c\/span\x3e\n...\n\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n  i18n,\n  router,\n  store,\n  render: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eh\x3c\/span\x3e =\x26gt;\x3c\/span\x3e h(App),\n}).$mount(\x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样看起来，我们的国际化已经完成了，然而之后马上就有新的问题出现了！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e问题一：vue实例外的js代码中的文本怎么替换？\x3c\/h2\x3e\n\x3cp\x3e前面说到，vue实例中我们可以使用\x3ccode\x3ethis.$i18n.t\x3c\/code\x3e，这里的this是vue的实例。那项目中很多js代码在vue的实例之外，我们要怎么办？\x3c\/p\x3e\n\x3cp\x3e最简单的解决方法是这样的，我们的locales\/index.js这个文件已经export了\x3ccode\x3ei18n\x3c\/code\x3e这个对象，那我们只需要在每次要使用的时候手动将i18n导入进来就可以了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript\x3e\nimport i18n from \x27@crm\/locales\x27\n\n\/\/const test = \x26quot;测试数据\x26quot;\nconst test = i18n.t(\x27message.test\x27)\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e i18n \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@crm\/locales\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/const test = \x22测试数据\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e test = i18n.t(\x3cspan class=\x22hljs-string\x22\x3e\x27message.test\x27\x3c\/span\x3e)\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可是这样一来，我们之后做诸如上面的文本替换时，就得小心翼翼的区别是否在vue实例中。如果是，我们用\x3ccode\x3ethis.$i18n.t\x3c\/code\x3e，否则先import然后用\x3ccode\x3ei18n.t\x3c\/code\x3e。这显然增加了复杂性！\x3c\/p\x3e\n\x3cp\x3e为了解决这个问题，只直接的解决办法就是将i18n挂到window下，变成全局变量。我们就不必再Import进来，同时只使用统一方法:\x3ccode\x3ei18n.t\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e我们在main.js中添加这行代码:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\n\nimport App from \x27.\/app.vue\x27\nimport store from \x27.\/store\x27\nimport router from \x27.\/router\x27\n...\nimport i18n from \x27@crm\/locales\x27\n...\n\nwindow.i18n = i18n\n\nnew Vue({\n  i18n,\n  router,\n  store,\n  render: h =\x3e h(App),\n}).$mount(\x27#app\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/app.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/store\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\x27\x3c\/span\x3e\n...\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e i18n \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@crm\/locales\x27\x3c\/span\x3e\n...\n\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.i18n = i18n\n\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n  i18n,\n  router,\n  store,\n  render: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eh\x3c\/span\x3e =\x26gt;\x3c\/span\x3e h(App),\n}).$mount(\x3cspan class=\x22hljs-string\x22\x3e\x27#app\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们兴高采烈的将组件中的\x3ccode\x3eimport i18n\x3c\/code\x3e全去掉，并将\x3ccode\x3ethis.$i18n.t\x3c\/code\x3e改为\x3ccode\x3ei18n.t\x3c\/code\x3e。然后项目跑起来就报错了：i18n is not defined。\x3c\/p\x3e\n\x3cp\x3e问题出在哪里？显示是组件调用i18n的时候，i18n还没有挂载到window上，所以是执行顺序出了问题。我们先来看一下下面代码的执行顺序：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\/\/假设webpack的入口文件是```main.js```\n \n\/\/main.js\nimport moduleA from \x27moduleA\x27\nconsole.log(1)\n \nimport moduleB from \x27moduleB\x27\nconsole.log(2)\n \n\/\/moduleA.js\nconsole.log(3)\n \n\/\/moduleB.js\nconsole.log(4)\n \n\/\/最终在浏览器中打印出的数字顺序是: \n3\n4\n1\n2\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/假设webpack的入口文件是```main.js```\x3c\/span\x3e\n \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/main.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e moduleA \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27moduleA\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n \n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e moduleB \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27moduleB\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)\n \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/moduleA.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e)\n \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/moduleB.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e)\n \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/最终在浏览器中打印出的数字顺序是: \x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为什么会这样呢？跟ES6 module的机制有关系。import命令具有提升效果，会提升到整个模块的头部，首先执行。这种行为的本质是，import命令是编译阶段执行的，在代码运行之前。\x3c\/p\x3e\n\x3cp\x3e这样我们就找出之前报错的原因了，我们先import了App, router这些视图，然后Import的i18n并挂载到window。所以组件的script中的代码会最先执行，而此时i18n并未开始。所以我们首先将\x3ccode\x3ewindow.i18n = i18n\x3c\/code\x3e移到locales\/index中，然后调整main.js中import的顺序:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/locales\/index\n...\nsetup()\nwindow.i18n = i18n\n\nexport default i18n\n\n\/\/main.js\nimport Vue from \x27vue\x27\n\nimport i18n from \x27@crm\/locales\x27\nimport App from \x27.\/app.vue\x27\nimport store from \x27.\/store\x27\nimport router from \x27.\/router\x27\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/locales\/index\x3c\/span\x3e\n...\nsetup()\nwindow.i18n = i18n\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e default i18n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/main.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e i18n \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27@crm\/locales\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/app.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/store\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\x27\x3c\/span\x3e\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e问题二：假如存在很多个new Vue()怎么办？\x3c\/h2\x3e\n\x3cp\x3e前面我们在main.js的\x3ccode\x3enew Vue({i18n, ...})\x3c\/code\x3e中将i18n作为option放了进去，但很快我发现这个项目并只有一个Vue的实例。全局搜索发现一共有70多个。\x3c\/p\x3e\n\x3cp\x3e项目中很的诸如弹窗之类的组件，都是直接自己实例化一个Vue然后自己\x3ccode\x3e$mount()\x3c\/code\x3e到DOM中。这些组件在实例化的过程中并没有混入i18n选项，所以他们的template上自然找不到\x3ccode\x3e$t()\x3c\/code\x3e方法。\x3c\/p\x3e\n\x3cp\x3e怎么办？难道给每一个new Vue()都手动添加i18n选项吗？肯定不行，首先我们要给添加70多次，其次如果未来又有人写了新的new Vue()忘了添加Ii8n，那又回导致报错。所以我们要想一个万全的法子。\x3c\/p\x3e\n\x3cp\x3e官方文档里找不到解决办法，看来我们得hack一下了。首先我们来查vue-i18n的\x3ca href=\x22https:\/\/github.com\/kazupon\/vue-i18n\/blob\/7c5fd95805dbcc6620cccf5343040f2cc515756c\/dist\/vue-i18n.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e，找到\x3ccode\x3e$t()\x3c\/code\x3e方法是怎么工作的。\x3c\/p\x3e\n\x3cp\x3e全局搜索$t，找到定义它的地方：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  Object.defineProperty(Vue.prototype, \x27$t\x27, {\n    get: function get () {\n      var this$1 = this;\n\n      return function (key) {\n        var values = [], len = arguments.length - 1;\n        while ( len-- \x3e 0 ) values[ len ] = arguments[ len \x2b 1 ];\n\n        var i18n = this$1.$i18n;\n        return i18n._t.apply(i18n, [ key, i18n.locale, i18n._getMessages(), this$1 ].concat( values ))\n      }\n    }\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty(Vue.prototype, \x3cspan class=\x22hljs-string\x22\x3e\x27$t\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-attr\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eget\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ekey\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e values = [], len = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e ( len-- \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ) values[ len ] = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[ len \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ];\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i18n = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e$i18n;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e i18n._t.apply(i18n, [ key, i18n.locale, i18n._getMessages(), \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ].concat( values ))\n      }\n    }\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到$t挂载在Vue.prototype上，每当我们在实例中调用$t时，其实我们是在调用this.$i18n对象上的_t方法。现在问题变成，实例上的$i18n是什么是时候定义的。\x3c\/p\x3e\n\x3cp\x3e全局搜索$i18n，我们找到了前面提到过的每个插件必须提供的install方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function install (_Vue) {\n  Vue = _Vue;\n  \n  ...\n\n  Object.defineProperty(Vue.prototype, \x27$i18n\x27, {\n    get: function get () { return this._i18n }\n  });\n\n  extend(Vue);\n  Vue.mixin(mixin);\n  Vue.directive(\x27t\x27, { bind: bind, update: update });\n  Vue.component(component.name, component);\n\n  \/\/ use object-based merge strategy\n  var strats = Vue.config.optionMergeStrategies;\n  strats.i18n = strats.methods;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einstall\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(_Vue)\x3c\/span\x3e \x3c\/span\x3e{\n  Vue = _Vue;\n  \n  ...\n\n  Object.defineProperty(Vue.prototype, \x3cspan class=\x22hljs-string\x22\x3e\x27$i18n\x27\x3c\/span\x3e, {\n    \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eget\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{ \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._i18n }\n  });\n\n  extend(Vue);\n  Vue.mixin(mixin);\n  Vue.directive(\x3cspan class=\x22hljs-string\x22\x3e\x27t\x27\x3c\/span\x3e, { bind: bind, update: update });\n  Vue.component(component.name, component);\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ use object-based merge strategy\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e strats = Vue.config.optionMergeStrategies;\n  strats.i18n = strats.methods;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到$i18n一开始就被定义在了Vue.prototype上，每次调用的时候其实我们是在调用this._i18n，所以现在问题变成实例的_i18n在哪里。同时可以看到在Install中我们还混入了mixin, directive, component，这些在上面都有提过它的作用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var mixin = {\n  beforeCreate: function beforeCreate () {\n    var options = this.$options;\n    options.i18n = options.i18n || (options.__i18n ? {} : null);\n\n    if (options.i18n) {\n      if (options.i18n instanceof VueI18n) {\n        ...\n        this._i18n = options.i18n;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gradle\x22\x3e\x3ccode\x3evar mixin = {\n  beforeCreate: function beforeCreate () {\n    var \x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$\x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e.i18n = \x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e.i18n || (\x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e.__i18n ? {} : \x3cspan class=\x22hljs-keyword\x22\x3enull\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e.i18n) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e.i18n \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e VueI18n) {\n        ...\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._i18n = \x3cspan class=\x22hljs-keyword\x22\x3eoptions\x3c\/span\x3e.i18n;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在mixin中找到了this._i18n的来源，前面提到mixin会被注入到组件中。在每个组件创建前，我们将this.$options的i18n给了this._i18n。\x3c\/p\x3e\n\x3cp\x3e这个this.$options是什么？它的使用方式是\x3ccode\x3eVue.mixin(mixin)\x3c\/code\x3e，所以我们看一下vue的文档:\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/mixins.html#%E5%85%A8%E5%B1%80%E6%B7%B7%E5%85%A5\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e全局混入\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 为自定义的选项 \x27myOption\x27 注入一个处理器。\nVue.mixin({\n  created: function () {\n    var myOption = this.$options.myOption\n    if (myOption) {\n      console.log(myOption)\n    }\n  }\n})\n\nnew Vue({\n  myOption: \x27hello!\x27\n})\n\/\/ =\x3e \x26quot;hello!\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 为自定义的选项 \x27myOption\x27 注入一个处理器。\x3c\/span\x3e\nVue.mixin({\n  \x3cspan class=\x22hljs-attr\x22\x3ecreated\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e myOption = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$options.myOption\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (myOption) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(myOption)\n    }\n  }\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n  \x3cspan class=\x22hljs-attr\x22\x3emyOption\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hello!\x27\x3c\/span\x3e\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ =\x26gt; \x22hello!\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以this.$options就是我们new Vue时提供的选项对象。\x3c\/p\x3e\n\x3cp\x3e所以问题的根源就是除了main.js中的new Vue外，其余70多个new Vue我们没有混入i18n这个选项。怎样才可以让每次new Vue时自动将i18n混入选项呢？看上去我们只能修改Vue的\x3ca href=\x22https:\/\/github.com\/vuejs\/vue\/blob\/dev\/dist\/vue.esm.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Vue (options) {\n  if (process.env.NODE_ENV !== \x27production\x27 \x26amp;\x26amp;\n    !(this instanceof Vue)\n  ) {\n    warn(\x27Vue is a constructor and should be called with the `new` keyword\x27);\n  }\n  this._init(options);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eVue\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(options)\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (process.env.NODE_ENV !== \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e \x26amp;\x26amp;\n    !(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e Vue)\n  ) {\n    warn(\x3cspan class=\x22hljs-string\x22\x3e\x27Vue is a constructor and should be called with the `new` keyword\x27\x3c\/span\x3e);\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._init(options);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到每次Vue实例化时，会调用_init方法，这个方法从哪里来呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function initMixin (Vue) {\n  Vue.prototype._init = function (options) {\n    ...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einitMixin\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(Vue)\x3c\/span\x3e \x3c\/span\x3e{\n  Vue.prototype._init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(options)\x3c\/span\x3e \x3c\/span\x3e{\n    ...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在Vue.prototype上，所以我们只需要修改Vue.prototype就好了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/locales\/index\nconst init = Vue.prototype._init\nVue.prototype._init = function(options) {\n  init.call(this, {\n    i18n,\n    ...options,\n  })\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/locales\/index\x3c\/span\x3e\nconst init = Vue\x3cspan class=\x22hljs-selector-class\x22\x3e.prototype\x3c\/span\x3e._init\nVue\x3cspan class=\x22hljs-selector-class\x22\x3e.prototype\x3c\/span\x3e._init = function(options) {\n  init.call(this, {\n    i18n,\n    ..\x3cspan class=\x22hljs-selector-class\x22\x3e.options\x3c\/span\x3e,\n  })\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样我们在任何时候new Vue()就自动添加了i18n选项，问题解决！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>如何让一个vue项目支持多语言（vue-i18n）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000015008808">https://segmentfault.com/a/1190000015008808</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/brni3w62of7/" target="_blank">https://alili.tech/archive/brni3w62of7/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>