<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="webpack4升级指北"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>webpack4升级指北 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/c3wx67873h/",
				"appid": "1613049289050283", 
				"title": "webpack4升级指北 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-12T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/hyxrnqnpq9o/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/eq7xzdb56lk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&text=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&text=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&title=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&is_video=false&description=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&title=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&title=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&title=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fc3wx67873h%2f&title=webpack4%e5%8d%87%e7%ba%a7%e6%8c%87%e5%8c%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">webpack4升级指北</h1><div class="meta"><div class="postdate"><time datetime="2018-12-12" itemprop="datePublished">2018-12-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e最近发现还是有听过人看这篇文章，所以再来更新一下。首先现在webpack4已经稳定，各个插件和loader基本上直接装都可以版本匹配，比如\x3ccode\x3ehtml-webpack-plugin\x3c\/code\x3e，如果有不匹配的看\x3ccode\x3epeerDependencies\x3c\/code\x3e提醒，会提示你需要安装新的版本。还有就是\x3ccode\x3eextract-text-webpack-plugin\x3c\/code\x3e作者好像不想维护了，现在可以用\x3ccode\x3emini-css-extract-plugin\x3c\/code\x3e，webpack5据说会集成css打包，就不需要插件了\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e2018年2月25日，刚过完年webpack就给了一个加班红包。webpack4经过1个月的缓冲期，终于发布了正式版，那么抛给广大开发者的问题又来了，我是不是要升级了呢？本文就站在一个之前用webpack3开发项目，现在打算升级到4的角度上，来讲一讲需要升级的内容。\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e安装\x3c\/h1\x3e\n\x3cp\x3e首先你要重新安装以下的依赖包：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3ewebpack4\x3c\/li\x3e\n\x3cli\x3ewebpack-cli（用来启动webpack）\x3c\/li\x3e\n\x3cli\x3ehtml-webpack-plugin还没有更新，会出现\x3ccode\x3ecompilation.templatesPlugin is not a function\x3c\/code\x3e的错误，目前需要\x3ccode\x3enpm i webpack-contrib\/html-webpack-plugin -D\x3c\/code\x3e安装，官方说法是因为作者这段时间没空更新，所以他们自己fork了一份改了，现在先用这种方式用着，等作者有空了再合并进去。\x3c\/li\x3e\n\x3cli\x3e其他各种配件升级，dev-server升级到3，各种loader你们自己看着办，如果是新装的应该是已经支持了的，如果在编译过程中报\x3ccode\x3ecan not find xxx\x3c\/code\x3e的错误，说明xxx对应的loader可能需要升级了，因为webpack4去掉了\x3ccode\x3ethis.options\x3c\/code\x3e的支持\x3c\/li\x3e\n\x3cli\x3e看一下有没有peerDependencies的提醒，有的话升级以下插件。目前来说我剩下一个\x3ccode\x3eajv-keywords@3.1.0 requires a peer of ajv@^6.0.0 but none is installed. You must install peer dependencies yourself.\x3c\/code\x3e的莫名其妙提醒，暂时没什么影响，也没查到解决方法，所以先放着，你们如果重新安装包可能就没这个错了。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e以上这些就是安装包的工作，基本就差不多了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e配置\x3c\/h1\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3emode\x3c\/h3\x3e\n\x3cp\x3ewebpack加了一个\x3ccode\x3emode\x3c\/code\x3e配置，只有两个值\x3ccode\x3edevelopment | production\x3c\/code\x3e，对不同的环境他会提供不同的一些默认配置，比如开发环境下面默认启用\x3ccode\x3eoptimization.namedModules\x3c\/code\x3e（原NamedModulesPlugin，现已弃用），而生产环境默认使用\x3ccode\x3eoptimization.noEmitOnErrors\x3c\/code\x3e（原NoEmitOnErrorsPlugin，现已弃用）。\x3c\/p\x3e\n\x3cp\x3e不同模式下的默认配置如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e生产环境默认开启了很多代码优化（minify，splite等）\x3c\/li\x3e\n\x3cli\x3e开发时开启注视和验证，并且自动加上了eval devtool\x3c\/li\x3e\n\x3cli\x3e生产环境不支持watching，开发环境优化了重新打包的速度\x3c\/li\x3e\n\x3cli\x3e生产环境开启模块串联（原ModuleConcatenationPlugin），没用过不多说\x3c\/li\x3e\n\x3cli\x3e自动设置\x3ccode\x3eprocess.env.NODE_ENV\x3c\/code\x3e到不同环境，也就是不需要\x3ccode\x3eDefinePlugin\x3c\/code\x3e来做这个了\x3c\/li\x3e\n\x3cli\x3e如果你给mode设置为\x3ccode\x3enone\x3c\/code\x3e，所有默认配置都去掉了\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e如果不加这个配置webpack会出现提醒，所以还是加上吧\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eCommonsChunkPlugin\x3c\/h3\x3e\n\x3cp\x3e相信大家如果听说过webpack4的更新，最大的感触应该就是去除了CommonsChunkPlugin，毕竟官方\x3ccode\x3echange log\x3c\/code\x3e写的篇幅最多的就是这个\x3c\/p\x3e\n\x3cp\x3eCommonsChunkPlugin删除之后，改成使用\x3ccode\x3eoptimization.splitChunks\x3c\/code\x3e进行模块划分，详细文档\x3ca href=\x22https:\/\/gist.github.com\/sokra\/1522d586b8e5c0f5072d7565c2bee693\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看这里\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22sokra\/1522d586b8e5c0f5072d7565c2bee693\x22 data-typeid=\x221\x22\x3e点击预览\x3c\/button\x3e\x3c\/p\x3e\n\x3cp\x3e官方的说法是默认设置已经对大部分用户来说非常棒了，但是需要注意一个问题，默认配置只会对异步请求的模块进行提取拆分，如果要对entry进行拆分，需要设置\x3ccode\x3eoptimization.splitChunks.chunks = \x27all\x27\x3c\/code\x3e。其他的内容大家就自己研究吧。\x3c\/p\x3e\n\x3cp\x3e对应之前我们拆分runtime的情况，现在也有一个配置\x3ccode\x3eoptimization.runtimeChunk\x3c\/code\x3e，设置为true就会自动拆分runtime文件\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eUglifyJsPlugin\x3c\/h3\x3e\n\x3cp\x3e现在也不需要使用这个plugin了，只需要使用\x3ccode\x3eoptimization.minimize\x3c\/code\x3e为true就行，production mode下面自动为true\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eoptimization.minimizer\x3c\/code\x3e可以配置你自己的压缩程序\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e其他\x3c\/h3\x3e\n\x3cp\x3e还有很多是我们平时使用不太到的升级，更多的是一些性能上的优化和功能上的升级，附上官方\x3ca href=\x22https:\/\/github.com\/webpack\/webpack\/releases\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echange log\x3c\/a\x3e，希望官方文档赶紧出来吧。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>webpack4升级指北</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013420383">https://segmentfault.com/a/1190000013420383</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/c3wx67873h/" target="_blank">https://alili.tech/archive/c3wx67873h/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>