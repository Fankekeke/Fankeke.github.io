<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Lodash 源码分析（一）“Function” Methods"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Lodash 源码分析（一）“Function” Methods | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/caza8go4bn/",
				"appid": "1613049289050283", 
				"title": "Lodash 源码分析（一）“Function” Methods | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-03T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/hy68c9soav/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/d0223z1j1tq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&text=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&text=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&title=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&is_video=false&description=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&title=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&title=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&title=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcaza8go4bn%2f&title=Lodash%20%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90%ef%bc%88%e4%b8%80%ef%bc%89%e2%80%9cFunction%e2%80%9d%20Methods"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Lodash 源码分析（一）“Function” Methods</h1><div class="meta"><div class="postdate"><time datetime="2019-01-03" itemprop="datePublished">2019-01-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3eLodash一直是我很喜欢用的一个库，代码也十分简洁优美，一直想抽时间好好分析一下Lodash的源代码。最近抽出早上的一些时间来分析一下Lodash的一些我觉得比较好的源码。因为函数之间可能会有相互依赖，所以不会按照文档顺序进行分析，而是根据依赖关系和简易程度由浅入深地进行分析。因为个人能力有限，如果理解有偏差，还请直接指出，以便我及时修改。\x3c\/p\x3e\n\x3cp\x3e源码都是针对\x3ccode\x3e4.17.4\x3c\/code\x3e版本的，\x3ca href=\x22https:\/\/lodash.com\/docs\/4.17.4#after\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源docs\x3c\/a\x3e写得也很好，还有很多样例。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e\x3ccode\x3e_.after\x3c\/code\x3e\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3e_.after\x3c\/code\x3e函数几乎是Lodash中最容易理解的一个函数了，它一共有两个参数，第一个参数是调用次数\x3ccode\x3en\x3c\/code\x3e,第二个参数是\x3ccode\x3en\x3c\/code\x3e次调用之后执行的函数\x3ccode\x3efunc\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function after(n, func) {\n      if (typeof func != \x27function\x27) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      return function() {\n        if (--n \x3c 1) {\n          return func.apply(this, arguments);\n        }\n      };\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eafter\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3en, func\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e func != \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eTypeError\x3c\/span\x3e(FUNC_ERROR_TEXT);\n      }\n      n = toInteger(n);\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (--n \x26lt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e func.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\n        }\n      };\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个函数的核心代码就是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22func.apply(this,arguments);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3efunc.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e,\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是一定要注意，这个函数中有闭包的应用，就是这个参数\x3ccode\x3en\x3c\/code\x3e。\x3ccode\x3en\x3c\/code\x3e本应该在函数\x3ccode\x3e_.after\x3c\/code\x3e返回的时候就应该从栈空间回收，但事实上它还被返回的函数引用着，一直在内存中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22return function() {\n        if (--n \x3c 1) {\n          return func.apply(this, arguments);\n        }\n      };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (--n \x26lt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e func.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\n        }\n      };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以一直到返回的函数执行完毕，\x3ccode\x3en\x3c\/code\x3e所占用的内存空间都无法被回收。\x3c\/p\x3e\n\x3cp\x3e我们再来看看这个\x3ccode\x3eapply\x3c\/code\x3e函数，我们知道\x3ccode\x3eapply\x3c\/code\x3e函数可以改变函数运行时的作用域，那么问题来了，\x3ccode\x3e_.after\x3c\/code\x3e中\x3ccode\x3efunc.apply\x3c\/code\x3e函数的\x3ccode\x3ethis\x3c\/code\x3e到底是谁呢？其实这个东西我们没有办法从源码中看出来，因为\x3ccode\x3ethis\x3c\/code\x3e是在运行时决定的。那么\x3ccode\x3ethis\x3c\/code\x3e会变吗？如果会的话怎么变呢？要知道这个问题的答案，我们需要先弄懂\x3ccode\x3e_.after\x3c\/code\x3e函数怎么用。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e_.after\x3c\/code\x3e函数调用后返回了另一个函数，所以对于\x3ccode\x3e_.after\x3c\/code\x3e函数的返回值，我们是需要再次调用的。所以最好的场景可能是在延迟加载等场景中。当然为了简单起见我给出一个很简单的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const _ = require(\x26quot;lodash\x26quot;);\n\nfunction foo(func ){\n    console.log(\x26quot;invoked foo.\x26quot;);\n    func();\n}\n\n\nvar done = _.after(2,function bar(){\n    console.log(\x26quot;invoke bar\x26quot;);\n});\n\nfor( var i = 0; i \x3c  4; i\x2b\x2b ){\n   foo(done);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc \x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22invoked foo.\x22\x3c\/span\x3e);\n    func();\n}\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e done = _.after(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebar\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22invoke bar\x22\x3c\/span\x3e);\n});\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e( \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt;  \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e; i\x2b\x2b ){\n   foo(done);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e正如我们前面说的，\x3ccode\x3en\x3c\/code\x3e的作用域是\x3ccode\x3e_.after\x3c\/code\x3e函数内部，所以在执行过程中\x3ccode\x3en\x3c\/code\x3e会一直递减，因此输出结果应该是在调用两次\x3ccode\x3efoo\x3c\/code\x3e之后调用一次\x3ccode\x3ebar\x3c\/code\x3e，之后每次调用\x3ccode\x3efoo\x3c\/code\x3e，都会调用一次\x3ccode\x3ebar\x3c\/code\x3e。结果和我们预期的一致：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22invoked foo\ninvoked foo\ninvoke bar\ninvoked foo\ninvoke bar\ninvoked foo\ninvoke bar\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3einvoked foo\ninvoked foo\ninvoke bar\ninvoked foo\ninvoke bar\ninvoked foo\ninvoke bar\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么我们再看看\x3ccode\x3ethis\x3c\/code\x3e指向的问题，我们修改一下上面的调用函数，让\x3ccode\x3ebar\x3c\/code\x3e函数输出一下内部的\x3ccode\x3ethis\x3c\/code\x3e的一些属性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const _ = require(\x26quot;lodash\x26quot;);\n\nfunction foo(func ){\n    this.name = \x26quot;foo\x26quot;;\n    console.log(\x26quot;invoked foo: \x26quot; \x2b this.name );\n    func();\n}\n\n\nvar done = _.after(2,function bar(){\n    console.log(\x26quot;invoke bar: \x26quot; \x2b this.name);\n});\n\nfor( var i = 0; i \x3c  4; i\x2b\x2b ){\n   foo(done);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc \x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x22foo\x22\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22invoked foo: \x22\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name );\n    func();\n}\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e done = _.after(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebar\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22invoke bar: \x22\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name);\n});\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e( \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt;  \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e; i\x2b\x2b ){\n   foo(done);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其实想来大家也应该能够猜到，在\x3ccode\x3ebar\x3c\/code\x3e函数中输出的\x3ccode\x3ethis.name\x3c\/code\x3e也是\x3ccode\x3efoo\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22invoked foo: foo\ninvoked foo: foo\ninvoke bar: foo\ninvoked foo: foo\ninvoke bar: foo\ninvoked foo: foo\ninvoke bar: foo\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3einvoked foo: foo\ninvoked foo: foo\ninvoke bar: foo\ninvoked foo: foo\ninvoke bar: foo\ninvoked foo: foo\ninvoke bar: foo\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这是因为\x3ccode\x3ebar\x3c\/code\x3e的\x3ccode\x3ethis\x3c\/code\x3e应该指向的是\x3ccode\x3e_.after\x3c\/code\x3e创建的函数的\x3ccode\x3ethis\x3c\/code\x3e,而这个函数是window调用的，因此\x3ccode\x3ethis\x3c\/code\x3e实际上指向就是\x3ccode\x3ewindow\x3c\/code\x3e，但是为什么会输出\x3ccode\x3efoo\x3c\/code\x3e呢?因为foo函数的调用者也是window，而在foo函数中，将window.name设置成了\x3ccode\x3efoo\x3c\/code\x3e，所以\x3ccode\x3ebar\x3c\/code\x3e函数输出的也是\x3ccode\x3efoo\x3c\/code\x3e(多谢评论指出！)。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e\x3ccode\x3e_.map\x3c\/code\x3e\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3e_.map\x3c\/code\x3e函数我们几乎随处可见，这个函数应用也相当广泛。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function map(collection, iteratee) {\n      var func = isArray(collection) ? arrayMap : baseMap;\n      return func(collection, getIteratee(iteratee, 3));\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecollection, iteratee\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e func = isArray(collection) ? arrayMap : baseMap;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e func(collection, getIteratee(iteratee, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e));\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了简化问题，我们分析比较简单的情况：用一个func函数处理数组。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22_.map([1,2,3],func);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e_.map([\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e],func);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在处理数组的时候，lodash是分开处理的，对于\x3ccode\x3eArray\x3c\/code\x3e采用\x3ccode\x3earrayMap\x3c\/code\x3e进行处理，对于对象则采用\x3ccode\x3ebaseMap\x3c\/code\x3e进行处理。\x3c\/p\x3e\n\x3cp\x3e我们先看数组\x3ccode\x3earrayMap\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (\x2b\x2bindex \x3c length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3earrayMap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earray, iteratee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e,\n        length = array == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : array.length,\n        result = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(length);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x2b\x2bindex \x26lt; length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个函数是一个私有函数，第一个参数是一个需要遍历的数组，第二个参数是在遍历过程当中进行处理的函数；返回一个进行map处理之后的函数。\x3c\/p\x3e\n\x3cp\x3e在看我们需要进行遍历处理的函数\x3ccode\x3eiteratee\x3c\/code\x3e，这个函数式通过\x3ccode\x3egetIteratee\x3c\/code\x3e函数得到的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function getIteratee() {\n      var result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetIteratee\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = lodash.iteratee || iteratee;\n      result = result === iteratee ? baseIteratee : result;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length ? result(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]) : result;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果\x3ccode\x3elodash.iteratee\x3c\/code\x3e被重新定义,则使用用户定义的\x3ccode\x3eiteratee\x3c\/code\x3e，否则就用官方定义的\x3ccode\x3ebaseIteratee\x3c\/code\x3e。需要强调的是，\x3ccode\x3eresult(arguments[0],arguments[1])\x3c\/code\x3e是柯里化的函数返回，返回的仍旧是一个函数。不可避免地，我们需要看看官方定义的\x3ccode\x3ebaseIteratee\x3c\/code\x3e的实现：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   function baseIteratee(value) {\n      \/\/ Don\x27t store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n      \/\/ See https:\/\/bugs.webkit.org\/show_bug.cgi?id=156034 for more details.\n      if (typeof value == \x27function\x27) {\n        return value;\n      }\n      if (value == null) {\n        return identity;\n      }\n      if (typeof value == \x27object\x27) {\n        return isArray(value)\n          ? baseMatchesProperty(value[0], value[1])\n          : baseMatches(value);\n      }\n      return property(value);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e   \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebaseIteratee\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3evalue\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Don\x27t store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ See https:\/\/bugs.webkit.org\/show_bug.cgi?id=156034 for more details.\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e value == \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e value;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (value == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e identity;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e value == \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e isArray(value)\n          ? baseMatchesProperty(value[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], value[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e])\n          : baseMatches(value);\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e property(value);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以看出来，这个\x3ccode\x3eiteratee\x3c\/code\x3e迭代者其实就是一个函数，在\x3ccode\x3e_.map\x3c\/code\x3e中\x3ccode\x3egetIteratee(iteratee, 3)\x3c\/code\x3e，给了两个参数，按照逻辑，最终返回的是一个\x3ccode\x3ebaseIteratee\x3c\/code\x3e，\x3ccode\x3ebaseIteratee\x3c\/code\x3e的第一个参数\x3ccode\x3evalue\x3c\/code\x3e就是\x3ccode\x3eiteratee\x3c\/code\x3e,这是一个函数，所以，\x3ccode\x3ebaseIteratee\x3c\/code\x3e函数在第一个判断就返回了。\x3c\/p\x3e\n\x3cp\x3e所以我们可以将map函数简化为如下版本:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function map(collection,iteratee){\n    return arrayMap(collection,getIteratee(iteratee,3));\n}\n\nfunction arrayMap(array, iteratee) {\n    var index = -1,\n        length = array == null ? 0 : array.length,\n        result = Array(length);\n\n    while (\x2b\x2bindex \x3c length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    return result;\n}\n\nfunction getIteratee() {\n      var result =  baseIteratee;\n      return arguments.length ? result(arguments[0], arguments[1]) : result;\n}\n\nfunction baseIteratee(value) {\n      if (typeof value == \x27function\x27) {\n        return value;\n      }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecollection,iteratee\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e arrayMap(collection,getIteratee(iteratee,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e));\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3earrayMap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earray, iteratee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e,\n        length = array == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : array.length,\n        result = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(length);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (\x2b\x2bindex \x26lt; length) {\n      result[index] = iteratee(array[index], index, array);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetIteratee\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result =  baseIteratee;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length ? result(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e], \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]) : result;\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebaseIteratee\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3evalue\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e value == \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e value;\n      }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，最终调用函数\x3ccode\x3efunc\x3c\/code\x3e的时候会传入3个参数。\x3ccode\x3earray[index],index,array\x3c\/code\x3e。我们可以实验，将\x3ccode\x3efunc\x3c\/code\x3e实现如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function func(){\n   console.log(“arguments[0] ” \x2b arguments[0]);\n   console.log(“arguments[1] ” \x2b arguments[1]);\n   console.log(“arguments[2] ” \x2b arguments[2]);\n   console.log(\x26quot;-----\x26quot;)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efunc\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n   \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(“\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] ” \x2b \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n   \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(“\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] ” \x2b \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]);\n   \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(“\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] ” \x2b \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e]);\n   \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22-----\x22\x3c\/span\x3e)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e输出的结果也和我们的预期一样，输出的第一个参数是该列表元素本身，第二个参数是数组下标，第三个参数是整个列表：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22arguments[0] 6\narguments[1] 0\narguments[2] 6,8,10\n-----\narguments[0] 8\narguments[1] 1\narguments[2] 6,8,10\n-----\narguments[0] 10\narguments[1] 2\narguments[2] 6,8,10\n-----\n[ undefined, undefined, undefined ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n-----\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n-----\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e] \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n-----\n[ \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的分析就是抛砖引玉，先给出数组的分析，别的非数组，例如对象的遍历处理则会走到别的分支进行处理，各位看官有兴趣可以深入研究。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e\x3ccode\x3e_.ary\x3c\/code\x3e\x3c\/h2\x3e\n\x3cp\x3e这个函数是用来限制参数个数的。这个函数咋一看好像没有什么用，但我们考虑如下场景，将一个字符列表\x3ccode\x3e[\x276\x27,\x278\x27,\x2710\x27]\x3c\/code\x3e转为整型列表\x3ccode\x3e[6,8,10]\x3c\/code\x3e，用\x3ccode\x3e_.map\x3c\/code\x3e实现，我们自然而然会写出这样的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const _ = require(\x26quot;lodash\x26quot;);\n_.map([\x276\x27,\x278\x27,\x2710\x27],parseInt);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e);\n_.map([\x3cspan class=\x22hljs-string\x22\x3e\x276\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x278\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x2710\x27\x3c\/span\x3e],\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好像很完美，我们输出看看：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[ 6, NaN, 2 ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e[ \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eNaN\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e很诡异是不是，看看内部到底发生了什么？其实看了上面的\x3ccode\x3e-.map\x3c\/code\x3e函数的分析，其实原因已经很明显了。对于\x3ccode\x3eparseInt\x3c\/code\x3e函数而言，其接收两个参数，第一个是需要处理的字符串，第二个是进制：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n* @param string    必需。要被解析的字符串。\n* @param radix    \n* 可选。表示要解析的数字的基数。该值介于 2 ~ 36 之间。\n* 如果省略该参数或其值为 0，则数字将以 10 为基础来解析。如果它以 “0x” 或 “0X” 开头，将以 16 为基数。\n* 如果该参数小于 2 或者大于 36，则 parseInt() 将返回 NaN\n*\/\nparseInt(string, radix)\n\/**\n当参数 radix 的值为 0，或没有设置该参数时，parseInt() 会根据 string 来判断数字的基数。\n\n举例，如果 string 以 \x26quot;0x\x26quot; 开头，parseInt() 会把 string 的其余部分解析为十六进制的整数。如果 string 以 0 开头，那么 ECMAScript v3 允许 parseInt() 的一个实现把其后的字符解析为八进制或十六进制的数字。如果 string 以 1 ~ 9 的数字开头，parseInt() 将把它解析为十进制的整数。\n*\/\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n* @param string    必需。要被解析的字符串。\n* @param radix    \n* 可选。表示要解析的数字的基数。该值介于 2 ~ 36 之间。\n* 如果省略该参数或其值为 0，则数字将以 10 为基础来解析。如果它以 “0x” 或 “0X” 开头，将以 16 为基数。\n* 如果该参数小于 2 或者大于 36，则 parseInt() 将返回 NaN\n*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(string, radix)\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n当参数 radix 的值为 0，或没有设置该参数时，parseInt() 会根据 string 来判断数字的基数。\n\n举例，如果 string 以 \x220x\x22 开头，parseInt() 会把 string 的其余部分解析为十六进制的整数。如果 string 以 0 开头，那么 ECMAScript v3 允许 parseInt() 的一个实现把其后的字符解析为八进制或十六进制的数字。如果 string 以 1 ~ 9 的数字开头，parseInt() 将把它解析为十进制的整数。\n*\/\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么这样的输出也就不难理解了：\x3c\/p\x3e\n\x3cp\x3e处理第一个数组元素6的时候，\x3ccode\x3eparseInt\x3c\/code\x3e实际传入参数\x3ccode\x3e(6,0)\x3c\/code\x3e,那么按照十进制解析，会得到\x3ccode\x3e6\x3c\/code\x3e,处理第二个数组元素的时候传入的实际参数是\x3ccode\x3e(8,1)\x3c\/code\x3e，返回\x3ccode\x3eNaN\x3c\/code\x3e,对于第三个数组元素，按照2进制处理，则\x3ccode\x3e10\x3c\/code\x3e返回的是\x3ccode\x3e2\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e所以在上述需求的时候我们需要限制参数的个数，这个时候\x3ccode\x3e_.ary\x3c\/code\x3e函数就登场了，上面的函数这样处理就没有问题了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const _ = require(\x26quot;lodash\x26quot;);\n_.map([\x276\x27,\x278\x27,\x2710\x27],_.ary(parseInt,1));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e);\n_.map([\x3cspan class=\x22hljs-string\x22\x3e\x276\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x278\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x2710\x27\x3c\/span\x3e],_.ary(\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们看看这个函数是怎么实现的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 function ary(func, n, guard) {\n      n = guard ? undefined : n;\n      n = (func \x26amp;\x26amp; n == null) ? func.length : n;\n      return createWrap(func, WRAP_ARY_FLAG, undefined, undefined, undefined, undefined, n);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eary\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, n, guard\x3c\/span\x3e) \x3c\/span\x3e{\n      n = guard ? \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e : n;\n      n = (func \x26amp;\x26amp; n == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) ? func.length : n;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e createWrap(func, WRAP_ARY_FLAG, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, n);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个函数先检查\x3ccode\x3en\x3c\/code\x3e的值，需要说明的是\x3ccode\x3efunc.length\x3c\/code\x3e返回的是函数的声明参数个数。然后返回了一个\x3ccode\x3ecreateWrap\x3c\/code\x3e包裹函数，这个函数可以说是脏活累活处理工厂了，负责很多函数的包裹处理工作，而且为了提升性能，还将不同的判断用\x3ccode\x3ebitflag\x3c\/code\x3e进行与\/非处理，可以说是很用尽心机了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind` 1                      0b0000000000000001\n     *    2 - `_.bindKey`                       0b0000000000000010\n     *    4 - `_.curry` or `_.curryRight`...  0b0000000000000100\n     *    8 - `_.curry`                       0b0000000000001000\n     *   16 - `_.curryRight`                  0b0000000000010000\n     *   32 - `_.partial`                     0b0000000000100000\n     *   64 - `_.partialRight`                0b0000000001000000\n     *  128 - `_.rearg`                       0b0000000010000000\n     *  256 - `_.ary`                            0b0000000100000000\n     *  512 - `_.flip`                           0b0000001000000000\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     *\/\n    function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      var isBindKey = bitmask \x26amp; WRAP_BIND_KEY_FLAG;\n      if (!isBindKey \x26amp;\x26amp; typeof func != \x27function\x27) {\n        throw new TypeError(FUNC_ERROR_TEXT);\n      }\n      var length = partials ? partials.length : 0;\n      if (!length) {\n        bitmask \x26amp;= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = undefined;\n      }\n      ary = ary === undefined ? ary : nativeMax(toInteger(ary), 0);\n      arity = arity === undefined ? arity : toInteger(arity);\n      length -= holders ? holders.length : 0;\n\n      if (bitmask \x26amp; WRAP_PARTIAL_RIGHT_FLAG) {\n        var partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = undefined;\n      }\n      var data = isBindKey ? undefined : getData(func);\n\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? (isBindKey ? 0 : func.length)\n        : nativeMax(newData[9] - length, 0);\n\n      if (!arity \x26amp;\x26amp; bitmask \x26amp; (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask \x26amp;= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      if (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        var result = createBind(func, bitmask, thisArg);\n      } else if (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } else if ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) \x26amp;\x26amp; !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } else {\n        result = createHybrid.apply(undefined, newData);\n      }\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * Creates a function that either curries or invokes `func` with optional\n     * `this` binding and partially applied arguments.\n     *\n     * @private\n     * @param {Function|string} func The function or method name to wrap.\n     * @param {number} bitmask The bitmask flags.\n     *    1 - `_.bind` 1                      0b0000000000000001\n     *    2 - `_.bindKey`                       0b0000000000000010\n     *    4 - `_.curry` or `_.curryRight`...  0b0000000000000100\n     *    8 - `_.curry`                       0b0000000000001000\n     *   16 - `_.curryRight`                  0b0000000000010000\n     *   32 - `_.partial`                     0b0000000000100000\n     *   64 - `_.partialRight`                0b0000000001000000\n     *  128 - `_.rearg`                       0b0000000010000000\n     *  256 - `_.ary`                            0b0000000100000000\n     *  512 - `_.flip`                           0b0000001000000000\n     * @param {*} [thisArg] The `this` binding of `func`.\n     * @param {Array} [partials] The arguments to be partially applied.\n     * @param {Array} [holders] The `partials` placeholder indexes.\n     * @param {Array} [argPos] The argument positions of the new function.\n     * @param {number} [ary] The arity cap of `func`.\n     * @param {number} [arity] The arity of `func`.\n     * @returns {Function} Returns the new wrapped function.\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateWrap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, bitmask, thisArg, partials, holders, argPos, ary, arity\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isBindKey = bitmask \x26amp; WRAP_BIND_KEY_FLAG;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!isBindKey \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e func != \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eTypeError\x3c\/span\x3e(FUNC_ERROR_TEXT);\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e length = partials ? partials.length : \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!length) {\n        bitmask \x26amp;= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n        partials = holders = \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n      }\n      ary = ary === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e ? ary : nativeMax(toInteger(ary), \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n      arity = arity === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e ? arity : toInteger(arity);\n      length -= holders ? holders.length : \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (bitmask \x26amp; WRAP_PARTIAL_RIGHT_FLAG) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e partialsRight = partials,\n            holdersRight = holders;\n\n        partials = holders = \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = isBindKey ? \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e : getData(func);\n\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (data) {\n        mergeData(newData, data);\n      }\n      func = newData[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n      bitmask = newData[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n      thisArg = newData[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n      partials = newData[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n      holders = newData[\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e];\n      arity = newData[\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e] = newData[\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e] === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e\n        ? (isBindKey ? \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e : func.length)\n        : nativeMax(newData[\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e] - length, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!arity \x26amp;\x26amp; bitmask \x26amp; (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG)) {\n        bitmask \x26amp;= ~(WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG);\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!bitmask || bitmask == WRAP_BIND_FLAG) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e result = createBind(func, bitmask, thisArg);\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (bitmask == WRAP_CURRY_FLAG || bitmask == WRAP_CURRY_RIGHT_FLAG) {\n        result = createCurry(func, bitmask, arity);\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ((bitmask == WRAP_PARTIAL_FLAG || bitmask == (WRAP_BIND_FLAG | WRAP_PARTIAL_FLAG)) \x26amp;\x26amp; !holders.length) {\n        result = createPartial(func, bitmask, thisArg, partials);\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        result = createHybrid.apply(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, newData);\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e setter = data ? baseSetData : setData;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e setWrapToString(setter(result, newData), func, bitmask);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e看上去太复杂了，把无关的代码削减掉：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function createWrap(func, bitmask, thisArg, partials, holders, argPos, ary, arity) {\n      \/\/      0000000100000000 \x26amp; 0000000000000010\n      \/\/ var isBindKey = bitmask \x26amp; WRAP_BIND_KEY_FLAG;\n      var isBindKey = 0;\n      var length =  0;\n      \/\/ if (!length) {\n        \/\/              0000000000100000 | 0000000001000000\n        \/\/            ~(0000000001100000)\n        \/\/              1111111110011111\n        \/\/             \x26amp;0000000100000000\n        \/\/              0000000100000000 = WRAP_ARY_FLAG \n        \/\/ bitmask \x26amp;= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\n      \/\/  bitmask = WRAP_ARY_FLAG;\n      \/\/  partials = holders = undefined;\n      \/\/ }\n      bitmask = WRAP_ARY_FLAG;\n      partials = holders = undefined;\n      ary = undefined;\n      arity = arity === undefined ? arity : toInteger(arity);\n      \/\/ because holders == undefined\n      \/\/length -= 0;\n      \/\/ because isBindKey  == 0\n      \/\/ var data = isBindKey ? undefined : getData(func);\n      var data = getData(func);\n      var newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n      if (data) {\n        mergeData(newData, data);\n      }\n      func = newData[0];\n      bitmask = newData[1];\n      thisArg = newData[2];\n      partials = newData[3];\n      holders = newData[4];\n      arity = newData[9] = newData[9] === undefined\n        ? func.length : newData[9];\n      result = createHybrid.apply(undefined, newData);\n      var setter = data ? baseSetData : setData;\n      return setWrapToString(setter(result, newData), func, bitmask);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateWrap\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, bitmask, thisArg, partials, holders, argPos, ary, arity\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/      0000000100000000 \x26amp; 0000000000000010\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ var isBindKey = bitmask \x26amp; WRAP_BIND_KEY_FLAG;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isBindKey = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e length =  \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ if (!length) {\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/              0000000000100000 | 0000000001000000\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/            ~(0000000001100000)\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/              1111111110011111\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/             \x26amp;0000000100000000\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/              0000000100000000 = WRAP_ARY_FLAG \x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ bitmask \x26amp;= ~(WRAP_PARTIAL_FLAG | WRAP_PARTIAL_RIGHT_FLAG);\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/  bitmask = WRAP_ARY_FLAG;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/  partials = holders = undefined;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ }\x3c\/span\x3e\n      bitmask = WRAP_ARY_FLAG;\n      partials = holders = \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n      ary = \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n      arity = arity === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e ? arity : toInteger(arity);\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ because holders == undefined\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/length -= 0;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ because isBindKey  == 0\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ var data = isBindKey ? undefined : getData(func);\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = getData(func);\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newData = [\n        func, bitmask, thisArg, partials, holders, partialsRight, holdersRight,\n        argPos, ary, arity\n      ];\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (data) {\n        mergeData(newData, data);\n      }\n      func = newData[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n      bitmask = newData[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n      thisArg = newData[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n      partials = newData[\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n      holders = newData[\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e];\n      arity = newData[\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e] = newData[\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e] === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e\n        ? func.length : newData[\x3cspan class=\x22hljs-number\x22\x3e9\x3c\/span\x3e];\n      result = createHybrid.apply(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, newData);\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e setter = data ? baseSetData : setData;\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e setWrapToString(setter(result, newData), func, bitmask);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简化了一些之后我们来到了\x3ccode\x3ecreateHybrid\x3c\/code\x3e函数，这个函数也巨复杂，所以我们还是按照简化方法，把我们用不到的逻辑给简化:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = bitmask \x26amp; WRAP_ARY_FLAG,\n          isBind = bitmask \x26amp; WRAP_BIND_FLAG,\n          isBindKey = bitmask \x26amp; WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask \x26amp; (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask \x26amp; WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? undefined : createCtor(func);\n\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        if (isCurried) {\n          var placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        if (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        if (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        if (isCurried \x26amp;\x26amp; length \x3c arity) {\n          var newHolders = replaceHolders(args, placeholder);\n          return createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        var thisBinding = isBind ? thisArg : this,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        if (argPos) {\n          args = reorder(args, argPos);\n        } else if (isFlip \x26amp;\x26amp; length \x3e 1) {\n          args.reverse();\n        }\n        if (isAry \x26amp;\x26amp; ary \x3c length) {\n          args.length = ary;\n        }\n        if (this \x26amp;\x26amp; this !== root \x26amp;\x26amp; this instanceof wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e   \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateHybrid\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isAry = bitmask \x26amp; WRAP_ARY_FLAG,\n          isBind = bitmask \x26amp; WRAP_BIND_FLAG,\n          isBindKey = bitmask \x26amp; WRAP_BIND_KEY_FLAG,\n          isCurried = bitmask \x26amp; (WRAP_CURRY_FLAG | WRAP_CURRY_RIGHT_FLAG),\n          isFlip = bitmask \x26amp; WRAP_FLIP_FLAG,\n          Ctor = isBindKey ? \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e : createCtor(func);\n\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewrapper\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e length = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length,\n            args = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(length),\n            index = length;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (index--) {\n          args[index] = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[index];\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isCurried) {\n          \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e placeholder = getHolder(wrapper),\n              holdersCount = countHolders(args, placeholder);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (partials) {\n          args = composeArgs(args, partials, holders, isCurried);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (partialsRight) {\n          args = composeArgsRight(args, partialsRight, holdersRight, isCurried);\n        }\n        length -= holdersCount;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isCurried \x26amp;\x26amp; length \x26lt; arity) {\n          \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newHolders = replaceHolders(args, placeholder);\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e createRecurry(\n            func, bitmask, createHybrid, wrapper.placeholder, thisArg,\n            args, newHolders, argPos, ary, arity - length\n          );\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e thisBinding = isBind ? thisArg : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e,\n            fn = isBindKey ? thisBinding[func] : func;\n\n        length = args.length;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (argPos) {\n          args = reorder(args, argPos);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isFlip \x26amp;\x26amp; length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n          args.reverse();\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isAry \x26amp;\x26amp; ary \x26lt; length) {\n          args.length = ary;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e !== root \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e wrapper) {\n          fn = Ctor || createCtor(fn);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e fn.apply(thisBinding, args);\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e wrapper;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e把不需要的逻辑削减掉：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   function createHybrid(func, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity) {\n      var isAry = 1;\n      function wrapper() {\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n        while (index--) {\n          args[index] = arguments[index];\n        }\n        var thisBinding = this, fn = func;\n        length = args.length;\n        if (isAry \x26amp;\x26amp; ary \x3c length) {\n          args.length = ary;\n        }\n        return fn.apply(thisBinding, args);\n      }\n      return wrapper;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e   \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecreateHybrid\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc, bitmask, thisArg, partials, holders, partialsRight, holdersRight, argPos, ary, arity\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isAry = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ewrapper\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e length = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length,\n            args = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(length),\n            index = length;\n        \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (index--) {\n          args[index] = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[index];\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e thisBinding = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, fn = func;\n        length = args.length;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isAry \x26amp;\x26amp; ary \x26lt; length) {\n          args.length = ary;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e fn.apply(thisBinding, args);\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e wrapper;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好了，绕了一大圈，终于看到最终的逻辑了，\x3ccode\x3e_.ary\x3c\/code\x3e函数其实就是把参数列表重新赋值了一下，并进行了长度限制。想想这个函数实在是太麻烦了，我们自己可以根据这个逻辑实现一个简化版的\x3ccode\x3e_.ary\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function ary(func,n){\n    return function(){\n        var length = arguments.length,\n            args = Array(length),\n            index = length;\n          while(index--){\n            args[index] = arguments[index];\n        }\n        args.length = n;\n        return func.apply(this,args);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eary\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efunc,n\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e length = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e.length,\n            args = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(length),\n            index = length;\n          \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(index--){\n            args[index] = \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[index];\n        }\n        args.length = n;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e func.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e,args);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e试试效果：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(_.map([\x276\x27,\x278\x27,\x2710\x27],ary(parseInt,1)));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(_.map([\x3cspan class=\x22hljs-string\x22\x3e\x276\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x278\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x2710\x27\x3c\/span\x3e],ary(\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e工作得很不错：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[ 6, 8, 10 ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e[ \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e小结\x3c\/h2\x3e\n\x3cp\x3e今天分析这三个函数就花了一整天的时间，但是收获颇丰，能够静下心来好好分析一个著名的开源库，并能够理解透里面的一些逻辑，确实是一件很有意思的事情。我会在有时间的时候把Lodash这个我很喜欢的库都好好分析一遍，尽我最大的努力将里面的逻辑表述清楚，希望能够简明易懂。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e敬请期待\x3c\/h2\x3e\n\x3cp\x3e最后，最晚下周一将会更新第二篇分析文章，敬请期待。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e© 版权所有，未经允许不得转载，宣传一下个人博客 \x3ca href=\x22https:\/\/chenquan.me\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echenquan.me\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Lodash 源码分析（一）“Function” Methods</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010775719">https://segmentfault.com/a/1190000010775719</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/caza8go4bn/" target="_blank">https://alili.tech/archive/caza8go4bn/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>