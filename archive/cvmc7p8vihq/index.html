<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="微信小游戏体验之打飞机改造计划"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>微信小游戏体验之打飞机改造计划 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/cvmc7p8vihq/",
				"appid": "1613049289050283", 
				"title": "微信小游戏体验之打飞机改造计划 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-19T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/smttpu2k0xk/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/8qckoik0fqm/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&text=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&text=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&is_video=false&description=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcvmc7p8vihq%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e4%bd%93%e9%aa%8c%e4%b9%8b%e6%89%93%e9%a3%9e%e6%9c%ba%e6%94%b9%e9%80%a0%e8%ae%a1%e5%88%92"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">微信小游戏体验之打飞机改造计划</h1><div class="meta"><div class="postdate"><time datetime="2018-12-19" itemprop="datePublished">2018-12-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e微信小游戏推出已有几天了，这个功能对小程序和小游戏的推动影响不用多说，大家赶紧摩拳擦掌往上撸就可以了。关于如何开发官方文档已经说明了，这篇则是对官方的\x3ccode\x3e打飞机\x3c\/code\x3edemo一些小改造。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e开发预备式\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e下载最新版本的\x3ccode\x3e微信开发者工具\x3c\/code\x3e(v1.02.1712280)\x3c\/li\x3e\n\x3cli\x3e根据官方文档说明，\x3cstrong\x3e目前不提供公开注册\x3c\/strong\x3e。因此目前只能使用\x3cstrong\x3e无AppID\x3c\/strong\x3e模式进行体验\x3c\/li\x3e\n\x3cli\x3e为了让\x3ccode\x3eHTML5\x3c\/code\x3e游戏轻松接入，官方提供了\x3ccode\x3eAdapter\x3c\/code\x3e。这个的作用就是提供\x3ccode\x3eHTML5\x3c\/code\x3e写法和\x3ccode\x3ewx\x3c\/code\x3e写法的全局转换层。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e打飞机小游戏\x3c\/h3\x3e\n\x3cp\x3e使用\x3ccode\x3e无AppID\x3c\/code\x3e模式创建一个微信小游戏后可以看到官方demo，其中入口文件和配置文件：\x3ccode\x3egame.js\x3c\/code\x3e和\x3ccode\x3egame.json\x3c\/code\x3e。\x3ccode\x3egame.js\x3c\/code\x3e引入并初始化包含整个\x3ccode\x3e打飞机\x3c\/code\x3e的游戏场景、参与者（玩家飞机和敌方飞机）、游戏逻辑的主函数的\x3ccode\x3emain.js\x3c\/code\x3e。在\x3ccode\x3emain.js\x3c\/code\x3e中我们可以发现由于\x3ccode\x3eAdapter\x3c\/code\x3e的存在，这里的代码和我们平常的代码写法没什么差异了。游戏的主逻辑如下图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012656218?w=606\x26amp;h=898\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012656218?w=606\x26amp;h=898\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在loop中，玩家每隔20帧射一次，每隔60帧生成新的敌机。每帧检查玩家和敌机是否死亡，玩家死亡游戏结束，敌机死亡分数\x2b1。只有玩家可以射击，且射击方式固定，通过躲避敌机生存。接下来我们针对这些进行改造，提升游戏的可玩性和挑战性。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e玩家升级计划\x3c\/h3\x3e\n\x3col\x3e\n\x3cli\x3e玩家初始等级为1，玩家可通过击杀敌机升级，每击落30敌机升级一次\x3c\/li\x3e\n\x3cli\x3e玩家每升级一次，增加一个射击口\x3c\/li\x3e\n\x3cli\x3e玩家最多升级两次\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e首先用编辑器打开\x3ccode\x3eplayer\/index.js\x3c\/code\x3e，将等级逻辑加入到玩家的类中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class Player extends Sprite {\n  constructor() {\n    super(PLAYER_IMG_SRC, PLAYER_WIDTH, PLAYER_HEIGHT)\n\n    \/\/ 玩家默认处于屏幕底部居中位置\n    this.x = screenWidth \/ 2 - this.width \/ 2\n    this.y = screenHeight - this.height - 30\n\n    \/\/ 用于在手指移动的时候标识手指是否已经在飞机上了\n    this.touched = false\n\n    this.bullets = []\n\n    \/\/ 初始化事件监听\n    this.initEvent()\n\n    this.playerLevel = 1;\n  }\n\n  get level () {\n    return this.playerLevel;\n  }\n  set level (level) {\n    this.playerLevel = Math.min(level, 3);\n  }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3eexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePlayer\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSprite\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e() {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(PLAYER_IMG_SRC, PLAYER_WIDTH, PLAYER_HEIGHT)\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 玩家默认处于屏幕底部居中位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = screenWidth \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = screenHeight - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height - \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用于在手指移动的时候标识手指是否已经在飞机上了\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touched = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bullets = []\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 初始化事件监听\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initEvent()\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.playerLevel = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e level () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.playerLevel;\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e level (level) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.playerLevel = Math.min(level, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n  }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来在\x3ccode\x3emain.js\x3c\/code\x3e的\x3ccode\x3eupdate\x3c\/code\x3e函数加入升级逻辑。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 其他代码...\n\n    update() {\n        this.bg.update();\n\n        databus.bullets.concat(databus.enemys).forEach(item =\x3e {\n            item.update();\n        });\n\n        this.enemyGenerate();\n\n        this.player.level = Math.max(1, Math.ceil(databus.score \/ 30));\n\n        this.collisionDetection();\n    }\n\n\/\/ 其他代码...\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n\n    update() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bg.update();\n\n        databus.bullets.concat(databus.enemys).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            item.update();\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.enemyGenerate();\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.player.level = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.ceil(databus.score \/ \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e));\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.collisionDetection();\n    }\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好的，到此玩家已经可以正常升级了。那么该给予玩家奖励品了。在\x3ccode\x3eplayer\/index.js\x3c\/code\x3e的\x3ccode\x3eshoot\x3c\/code\x3e函数中我们修改射击的逻辑。玩家1级时只有中间的射击口，2级有左边和中间的射击口，3级有左中右三个射击口。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ ...其他代码\n\n    \/**\n     * 玩家射击操作\n     * 射击时机由外部决定\n     *\/\n    shoot() {\n\n\n      for(let i = 0; i \x3c this.level; i\x2b\x2b) {\n        const bullet = databus.pool.getItemByClass(\x27bullet\x27, Bullet);\n        const middle = this.x \x2b this.width \/ 2 - bullet.width \/ 2;\n        const x = !i ? middle : (i % 2 === 0 ? middle \x2b 30 : middle - 30);\n        bullet.init(\n          x,\n          this.y - 10,\n          10\n        )\n\n        databus.bullets.push(bullet)\n      }\n    }\n\n\/\/ ...其他代码\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...其他代码\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 玩家射击操作\n     * 射击时机由外部决定\n     *\/\x3c\/span\x3e\n    shoot() {\n\n\n      \x3cspan class=\x22hljs-built_in\x22\x3efor\x3c\/span\x3e(let i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.level; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bullet = databus.pool.getItemByClass(\x3cspan class=\x22hljs-string\x22\x3e\x27bullet\x27\x3c\/span\x3e, Bullet);\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e middle = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - bullet.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e x = !i ? middle : (i % \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ? middle \x2b \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e : middle - \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e);\n        bullet.init(\n          x,\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n        )\n\n        databus.bullets.push(bullet)\n      }\n    }\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...其他代码\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e武器的最终形态如图, 这时候的玩家已经可以为所欲为了\x26lt;_\x26lt;，实际上都不需要躲避了。。。：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012656219?w=750\x26amp;h=1338\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012656219?w=750\x26amp;h=1338\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e敌人的反击号角\x3c\/h3\x3e\n\x3cp\x3e为了对抗愚昧的玩家，不让他们为所欲为，最后没兴趣玩下去～～，敌机装备武器，反击开始。\x3c\/p\x3e\n\x3cp\x3e首先敌机的子弹是向下，所以复制一份\x3ccode\x3eimages\/bullet.png\x3c\/code\x3e，并颠倒保存为\x3ccode\x3eimages\/bullet-down.png\x3c\/code\x3e, 然后我们重用\x3ccode\x3ejs\/player\/bullet.js\x3c\/code\x3e，在构造函数处增加敌机的子弹配置项，并修改敌人子弹更新逻辑。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const BULLET_IMG_SRC = \x27images\/bullet.png\x27\nconst BULLET_DOWN_IMG_SRC = \x27images\/bullet-down.png\x27\nconst BULLET_WIDTH   = 16\nconst BULLET_HEIGHT  = 30\n\nconst __ = {\n    speed: Symbol(\x27speed\x27)\n}\n\nlet databus = new DataBus()\n\nexport default class Bullet extends Sprite {\n    constructor({ direction } = { direction: \x27up\x27 }) {\n        super(direction === \x27up\x27 ? BULLET_IMG_SRC : BULLET_DOWN_IMG_SRC, BULLET_WIDTH, BULLET_HEIGHT)\n       \n        this.direction = direction;\n\n\/\/ 其他代码...\n\n    \/\/ 每一帧更新子弹位置\n    update() {\n        if (this.direction === \x27up\x27) {\n            this.y -= this[__.speed] \n            \n            \/\/ 超出屏幕外回收自身\n            if ( this.y \x3c -this.height )\n                databus.removeBullets(this)\n        } else {\n            this.y \x2b= this[__.speed]\n\n            \/\/ 超出屏幕外回收自身\n            if ( this.y \x3e window.innerHeight \x2b this.height )\n                databus.removeBullets(this)\n        }\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BULLET_IMG_SRC = \x3cspan class=\x22hljs-string\x22\x3e\x27images\/bullet.png\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BULLET_DOWN_IMG_SRC = \x3cspan class=\x22hljs-string\x22\x3e\x27images\/bullet-down.png\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BULLET_WIDTH   = \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BULLET_HEIGHT  = \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e __ = {\n    \x3cspan class=\x22hljs-attr\x22\x3espeed\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eSymbol\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27speed\x27\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e databus = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e DataBus()\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBullet\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSprite\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e({ direction } = { \x3cspan class=\x22hljs-attr\x22\x3edirection\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27up\x27\x3c\/span\x3e }) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(direction === \x3cspan class=\x22hljs-string\x22\x3e\x27up\x27\x3c\/span\x3e ? BULLET_IMG_SRC : BULLET_DOWN_IMG_SRC, BULLET_WIDTH, BULLET_HEIGHT)\n       \n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.direction = direction;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每一帧更新子弹位置\x3c\/span\x3e\n    update() {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.direction === \x3cspan class=\x22hljs-string\x22\x3e\x27up\x27\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y -= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[__.speed] \n            \n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 超出屏幕外回收自身\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x26lt; -\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height )\n                databus.removeBullets(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[__.speed]\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 超出屏幕外回收自身\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x26gt; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.innerHeight \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height )\n                databus.removeBullets(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n        }\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接着在\x3ccode\x3ejs\/npc\/enemy.js\x3c\/code\x3e结尾部分为敌人装备武器, 子弹速度为敌人自身速度\x3ccode\x3e\x2b5\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Animation from \x27..\/base\/animation\x27\nimport DataBus   from \x27..\/databus\x27\nimport Bullet from \x27..\/player\/bullet\x27;\n\nconst ENEMY_IMG_SRC = \x27images\/enemy.png\x27\n\/\/ 其他代码...\n\n  update() {\n    this.y \x2b= this[__.speed]\n\n    \/\/ 对象回收\n    if ( this.y \x3e window.innerHeight \x2b this.height )\n      databus.removeEnemey(this)\n  }\n\n  \/**\n   * 敌机射击操作\n   * 射击时机由外部决定\n   *\/\n  shoot() {\n      const bullet = databus.pool.getItemByClass(\x27bullet\x27, Bullet);\n      bullet.init(\n          this.x \x2b this.width \/ 2 - bullet.width \/ 2,\n          this.y \x2b 10,\n          this[__.speed] \x2b 5\n      );\n\n      databus.bullets.push(bullet);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Animation from \x3cspan class=\x22hljs-string\x22\x3e\x27..\/base\/animation\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e DataBus   from \x3cspan class=\x22hljs-string\x22\x3e\x27..\/databus\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Bullet from \x3cspan class=\x22hljs-string\x22\x3e\x27..\/player\/bullet\x27\x3c\/span\x3e;\n\nconst ENEMY_IMG_SRC = \x3cspan class=\x22hljs-string\x22\x3e\x27images\/enemy.png\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n\n  update() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x2b= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[__.speed]\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对象回收\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x26gt; window.innerHeight \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.height )\n      databus.removeEnemey(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e)\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 敌机射击操作\n   * 射击时机由外部决定\n   *\/\x3c\/span\x3e\n  shoot() {\n      const bullet = databus.pool.getItemByClass(\x3cspan class=\x22hljs-string\x22\x3e\x27bullet\x27\x3c\/span\x3e, Bullet);\n      bullet.init(\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - bullet.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[__.speed] \x2b \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e\n      );\n\n      databus.bullets.push(bullet);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来，在\x3ccode\x3ejs\/main.js\x3c\/code\x3e中加入敌机的射击逻辑，敌机移动5次、60次时设计。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 其他代码...\n let ctx = canvas.getContext(\x26quot;2d\x26quot;);\n let databus = new DataBus();\n\nconst ENEMY_SPEED = 6;\n\/\/ 其他代码...\n\n    \/**\n     * 随着帧数变化的敌机生成逻辑\n     * 帧数取模定义成生成的频率\n     *\/\n    enemyGenerate(playerLevel) {\n        if (databus.frame % 60 === 0) {\n            let enemy = databus.pool.getItemByClass(\x26quot;enemy\x26quot;, Enemy);\n            enemy.init(ENEMY_SPEED);\n            databus.enemys.push(enemy);\n        }\n    }\n\n\/\/ 其他代码...\n\n    \/\/ 实现游戏帧循环\n    loop() {\n        databus.frame\x2b\x2b;\n\n        this.update();\n        this.render();\n\n        if (databus.frame % 20 === 0) {\n            this.player.shoot();\n            this.music.playShoot();\n        }\n\n        databus.enemys.forEach(enemy =\x3e {\n            const enemyShootPositions = [\n                -enemy.height \x2b ENEMY_SPEED * 5,\n                -enemy.height \x2b ENEMY_SPEED * 60\n            ];\n            if (enemyShootPositions.indexOf(enemy.y) !== -1) {\n                enemy.shoot();\n                this.music.playShoot();\n            }\n        });\n\n        \/\/ 游戏结束停止帧循环\n        if (databus.gameOver) {\n            this.touchHandler = this.touchEventHandler.bind(this);\n          canvas.addEventListener(\x26quot;touchstart\x26quot;, this.touchHandler);\n            this.gameinfo.renderGameOver(ctx, databus.score);\n\n            return;\n        }\n\n        window.requestAnimationFrame(this.loop.bind(this), canvas);\n    }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n let ctx = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x222d\x22\x3c\/span\x3e);\n let databus = new DataBus();\n\nconst ENEMY_SPEED = \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 随着帧数变化的敌机生成逻辑\n     * 帧数取模定义成生成的频率\n     *\/\x3c\/span\x3e\n    enemyGenerate(playerLevel) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (databus.frame % \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            let enemy = databus.pool.getItemByClass(\x3cspan class=\x22hljs-string\x22\x3e\x22enemy\x22\x3c\/span\x3e, Enemy);\n            enemy.init(ENEMY_SPEED);\n            databus.enemys.push(enemy);\n        }\n    }\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他代码...\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实现游戏帧循环\x3c\/span\x3e\n    loop() {\n        databus.frame\x2b\x2b;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.update();\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.render();\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (databus.frame % \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.player.shoot();\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.music.playShoot();\n        }\n\n        databus.enemys.forEach(enemy =\x26gt; {\n            const enemyShootPositions = [\n                -enemy.height \x2b ENEMY_SPEED * \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e,\n                -enemy.height \x2b ENEMY_SPEED * \x3cspan class=\x22hljs-number\x22\x3e60\x3c\/span\x3e\n            ];\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (enemyShootPositions.indexOf(enemy.y) !== \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n                enemy.shoot();\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.music.playShoot();\n            }\n        });\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 游戏结束停止帧循环\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (databus.gameOver) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touchHandler = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touchEventHandler.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n          canvas.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22touchstart\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.touchHandler);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.gameinfo.renderGameOver(ctx, databus.score);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n\n        window.requestAnimationFrame(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.loop.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e), canvas);\n    }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这时候我们发现，由于不明宇宙的干扰射线的影响，玩家和敌机的子弹不受控制的乱飞。接下来我们就来恢复世界的秩序吧 \x3cem\x3e;\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e经侦测发现是对象池\x3ccode\x3epool\x3c\/code\x3e的获取逻辑问题导致子弹不受控问题，我们需要区分获取玩家、每个敌机的子弹\x3c\/p\x3e\n\x3cp\x3e首先，对象获取我们加入对象属性的判断，当有传入对象属性时，我们获取所有属性值一致的已回收对象，若没有找到或者对象池为空时，则用属性创建新对象\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/**\n   * 根据传入的对象标识符，查询对象池\n   * 对象池为空创建新的类，否则从对象池中取\n   *\/\n  getItemByClass(name, className, properties) {\n    let pool = this.getPoolBySign(name)\n\n    if (pool.length === 0) return new className(properties);\n   \n    if (!properties) return pool.shift();\n   \n    const index = pool.findIndex(item =\x3e {\n        return Object.keys(properties).every(property =\x3e {\n            return item[property] === properties[property];\n        });\n    });\n    return index !== -1 ? pool.splice(index, 1)[0] : new className(properties)\n  }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 根据传入的对象标识符，查询对象池\n   * 对象池为空创建新的类，否则从对象池中取\n   *\/\x3c\/span\x3e\n  getItemByClass(name, className, \x3cspan class=\x22hljs-built_in\x22\x3eproperties\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-built_in\x22\x3elet\x3c\/span\x3e pool = this.getPoolBySign(name)\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (pool.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e className(\x3cspan class=\x22hljs-built_in\x22\x3eproperties\x3c\/span\x3e);\n   \n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-built_in\x22\x3eproperties\x3c\/span\x3e) \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e pool.shift();\n   \n    const index = pool.findIndex(item =\x26gt; {\n        \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e Object.keys(\x3cspan class=\x22hljs-built_in\x22\x3eproperties\x3c\/span\x3e).\x3cspan class=\x22hljs-built_in\x22\x3eevery\x3c\/span\x3e(property =\x26gt; {\n            \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e item[property] === \x3cspan class=\x22hljs-built_in\x22\x3eproperties\x3c\/span\x3e[property];\n        });\n    });\n    \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e index !== -\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ? pool.\x3cspan class=\x22hljs-built_in\x22\x3esplice\x3c\/span\x3e(index, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] : \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e className(\x3cspan class=\x22hljs-built_in\x22\x3eproperties\x3c\/span\x3e)\n  }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e相应的我们需要给每个子弹设置归属，在\x3ccode\x3ejs\/player\/bullet.js\x3c\/code\x3e中\x3ccode\x3eBullet\x3c\/code\x3e类修改\x3ccode\x3econstructor\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class Bullet extends Sprite {\n    constructor({ direction, owner } = { direction: \x27up\x27 }) {\n        super(direction === \x27up\x27 ? BULLET_IMG_SRC : BULLET_DOWN_IMG_SRC, BULLET_WIDTH, BULLET_HEIGHT)\n\n        this.direction = direction;\n\n        this.owner = owner;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3eexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBullet\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSprite\x3c\/span\x3e \x3c\/span\x3e{\n    constructor({ direction, owner } = { direction: \x3cspan class=\x22hljs-symbol\x22\x3e\x27u\x3c\/span\x3ep\x27 }) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(direction === \x3cspan class=\x22hljs-symbol\x22\x3e\x27u\x3c\/span\x3ep\x27 ? \x3cspan class=\x22hljs-type\x22\x3eBULLET_IMG_SRC\x3c\/span\x3e : \x3cspan class=\x22hljs-type\x22\x3eBULLET_DOWN_IMG_SRC\x3c\/span\x3e, \x3cspan class=\x22hljs-type\x22\x3eBULLET_WIDTH\x3c\/span\x3e, \x3cspan class=\x22hljs-type\x22\x3eBULLET_HEIGHT\x3c\/span\x3e)\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.direction = direction;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.owner = owner;\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接着修改\x3ccode\x3ejs\/player\/index.js\x3c\/code\x3e的\x3ccode\x3eshoot\x3c\/code\x3e，为其中创建的\x3ccode\x3ebullets\x3c\/code\x3e提供归属\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/**\n     * 玩家射击操作\n     * 射击时机由外部决定\n     *\/\n    shoot() {\n      for(let i = 0; i \x3c this.level; i\x2b\x2b) {\n        const bullet = databus.pool.getItemByClass(\x27bullet\x27, Bullet, { direction: \x27up\x27, owner: this });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 玩家射击操作\n     * 射击时机由外部决定\n     *\/\x3c\/span\x3e\n    shoot() {\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.level; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bullet = databus.pool.getItemByClass(\x3cspan class=\x22hljs-string\x22\x3e\x27bullet\x27\x3c\/span\x3e, Bullet, { direction: \x3cspan class=\x22hljs-string\x22\x3e\x27up\x27\x3c\/span\x3e, owner: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样处理\x3ccode\x3ejs\/npc\/enemy.js\x3c\/code\x3e的\x3ccode\x3eshoot\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/**\n   * 敌机射击操作\n   * 射击时机由外部决定\n   *\/\n  shoot() {\n      const bullet = databus.pool.getItemByClass(\x27bullet\x27, Bullet, { direction: \x27down\x27, owner: this });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 敌机射击操作\n   * 射击时机由外部决定\n   *\/\x3c\/span\x3e\n  shoot() {\n      const bullet = databus\x3cspan class=\x22hljs-selector-class\x22\x3e.pool\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.getItemByClass\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27bullet\x27\x3c\/span\x3e, Bullet, { \x3cspan class=\x22hljs-attribute\x22\x3edirection\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27down\x27\x3c\/span\x3e, owner: this });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后处理\x3ccode\x3ejs\/databus.js\x3c\/code\x3e中\x3ccode\x3eremoveBullets\x3c\/code\x3e的回收逻辑\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/**\n   * 回收子弹，进入对象池\n   * 此后不进入帧循环\n   *\/\n  removeBullets(bullet) {\n    const index = this.bullets.findIndex(b =\x3e b === bullet);\n\n    bullet.visible = false\n\n    this.bullets.splice(index, 1);\n\n    this.pool.recover(\x27bullet\x27, bullet)\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/**\n   * 回收子弹，进入对象池\n   * 此后不进入帧循环\n   *\/\x3c\/span\x3e\n  removeBullets(bullet) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e index = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bullets.findIndex(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eb\x3c\/span\x3e =\x26gt;\x3c\/span\x3e b === bullet);\n\n    bullet.visible = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bullets.splice(index, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pool.recover(\x3cspan class=\x22hljs-string\x22\x3e\x27bullet\x27\x3c\/span\x3e, bullet)\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这时候敌我的子弹就恢复正常了。不过这时候玩家中弹并不会死亡，现在来让玩家\x3ccode\x3eGo Die\x3c\/code\x3e吧。在\x3ccode\x3ejs\/main.js\x3c\/code\x3e的\x3ccode\x3ecollisionDetection\x3c\/code\x3e我们判断增加每一颗子弹如果是敌方的，就判断其是否打中玩家，是则游戏结束。玩家的子弹判断保持不变。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ 全局碰撞检测\n    collisionDetection() {\n        let that = this;\n\n        databus.bullets.forEach(bullet =\x3e {\n            for (let i = 0, il = databus.enemys.length; i \x3c il; i\x2b\x2b) {\n                let enemy = databus.enemys[i];\n                if (bullet.owner instanceof Enemy) {\n                    databus.gameOver = this.player.isCollideWith(bullet);\n                } else if (!enemy.isPlaying \x26amp;\x26amp; enemy.isCollideWith(bullet)) {\n                    enemy.playAnimation();\n                    that.music.playExplosion();\n\n                    bullet.visible = false;\n                    databus.score \x2b= 1;\n\n                    break;\n                }\n            }\n        });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局碰撞检测\x3c\/span\x3e\n    collisionDetection() {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e that = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n\n        databus.bullets.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ebullet\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, il = databus.enemys.length; i \x26lt; il; i\x2b\x2b) {\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e enemy = databus.enemys[i];\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (bullet.owner \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e Enemy) {\n                    databus.gameOver = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.player.isCollideWith(bullet);\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!enemy.isPlaying \x26amp;\x26amp; enemy.isCollideWith(bullet)) {\n                    enemy.playAnimation();\n                    that.music.playExplosion();\n\n                    bullet.visible = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n                    databus.score \x2b= \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\n                    \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n                }\n            }\n        });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到此整个简单改造计划就结束了，以后还可以添加武器系统，boss战等等。下面是改造后的游戏动图录屏\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012660323?w=318\x26amp;h=566\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012660323?w=318\x26amp;h=566\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e本文始发于本人的公众号：枫之叶。公众号二维码\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV1gCE?w=258\x26amp;h=258\x22 src=\x22https:\/\/static.alili.tech\/img\/bV1gCE?w=258\x26amp;h=258\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>微信小游戏体验之打飞机改造计划</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012656215">https://segmentfault.com/a/1190000012656215</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/cvmc7p8vihq/" target="_blank">https://alili.tech/archive/cvmc7p8vihq/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>