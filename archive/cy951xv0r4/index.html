<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用fjpublish发布前端项目（基础篇）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用fjpublish发布前端项目（基础篇） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/cy951xv0r4/",
				"appid": "1613049289050283", 
				"title": "使用fjpublish发布前端项目（基础篇） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-27T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xkjn3o95ha9/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/z4npqsk2bth/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&text=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&text=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&title=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&is_video=false&description=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&title=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&title=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&title=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fcy951xv0r4%2f&title=%e4%bd%bf%e7%94%a8fjpublish%e5%8f%91%e5%b8%83%e5%89%8d%e7%ab%af%e9%a1%b9%e7%9b%ae%ef%bc%88%e5%9f%ba%e7%a1%80%e7%af%87%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用fjpublish发布前端项目（基础篇）</h1><div class="meta"><div class="postdate"><time datetime="2018-12-27" itemprop="datePublished">2018-12-27</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e本系列文章共分为基础篇，安全篇，拓展篇。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e曾几何时，我相信部分Web Developer（包括我）使用的项目发布方式比较传统（使用xftp或者sublime text的插件sftp等），发布方式简单又粗暴，想发布哪个目录就直接上传覆盖...\x3c\/p\x3e\n\x3cp\x3e但是这种方式对于现在的前端项目有些弊端：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e若项目包含webpackgulp等构建工具，则每次发布都需要等待构建完成后再手动上传，效率低；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e若项目为前端的服务端渲染项目，例如vue的服务端渲染，那么项目上传服务器后还得登录服务器重启进程；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e发布时由于选错文件或者选错发布环境导致的上传(＞﹏＜)悲剧，可没有后悔药吃。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我知道你想告诉我还可以使用git webhook等自动化工具，的确这是一种比较高级的用法，也非常可靠，但是搭建过程对于新手还是比较麻烦的，而且前端还是不太同于服务端，前端项目大多需要构建，那么构建过程究竟放在服务端还是本地，这是一个问题。\x3c\/p\x3e\n\x3cp\x3e我理想中的发布器应该是易于搭建，通过配置文件就能选择发布到不同的环境，敲完一行发布命令就可以去泡杯茶，让它自己完成整个发布流程。\x3c\/p\x3e\n\x3cp\x3e于是，\x3ca href=\x22https:\/\/github.com\/zczhangchao51\/fjpublish\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efjpublish\x3c\/a\x3e就诞生了。它是一个不同于git webhook的发布思路，基于nodejs的能力自动化整个发布流程，顺便把git提交一下...\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e安装\x3c\/h2\x3e\n\x3cp\x3e如果你已经安装了nodejs (6.0\x2b)，那么只需要一个命令就能完成fjpublish的安装\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install fjpublish -g\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cmake\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e fjpublish -g\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e全局安装就可以在任意路径下使用fjpublish这个命令了。\x3cbr\x3e\x3cstrong\x3e注意: fjpublish依赖一份配置文件，默认是fjpublish.config.js，如果不想在版本库中提交服务器安全信息，请千万记得把它加入忽略文件中，如.gitignore\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e配置文件结构\x3c\/h2\x3e\n\x3cp\x3efjpublish命令行默认会读取当前工作目录下的\x3cstrong\x3efjpublish.config.js\x3c\/strong\x3e文件，该文件返回一个对象，结构如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n    \/\/modules开始\n    modules: [{\n        name: \x27测试环境\x27, \/\/标识要发布的环境描述\n        env: \x27test\x27, \/\/发布环境的唯一标识\n        ssh: {\n            host: \x2712.23.345.678\x27, \/\/远程服务器ip\n            username: \x27root\x27, \/\/登录服务器的用户名\n            \/\/rc版本的user选项和userName选项请在未来统一配置为username\n            password: \x2712345678\x27, \/\/登录服务器的密码\n        },\n        buildCommand: \x27build\x27, \/\/要进行构建的命令build =\x3e npm run build\n        localPath: \x27example\x27, \/\/项目中要发布的目录\n        remotePath: \x27\/www\/example\x27, \/\/项目中要发布到远程服务器的目录\n        tag: \x27123\x27 \/\/标注发布的版本，可不设置\n    }, { ... }],\n    \/\/modules结束\n    nobuild: true, \/\/modules外的字段可用于每一个module继承,这里仅用于举例\n    tag: \x27v1\x27, \/\/modules外的字段可用于每一个module继承,这里仅用于举例\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/modules开始\x3c\/span\x3e\n    modules: [{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27测试环境\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/标识要发布的环境描述\x3c\/span\x3e\n        env: \x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/发布环境的唯一标识\x3c\/span\x3e\n        ssh: {\n            \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2712.23.345.678\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/远程服务器ip\x3c\/span\x3e\n            username: \x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/登录服务器的用户名\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/rc版本的user选项和userName选项请在未来统一配置为username\x3c\/span\x3e\n            password: \x3cspan class=\x22hljs-string\x22\x3e\x2712345678\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/登录服务器的密码\x3c\/span\x3e\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3ebuildCommand\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/要进行构建的命令build =\x26gt; npm run build\x3c\/span\x3e\n        localPath: \x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/项目中要发布的目录\x3c\/span\x3e\n        remotePath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/www\/example\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/项目中要发布到远程服务器的目录\x3c\/span\x3e\n        tag: \x3cspan class=\x22hljs-string\x22\x3e\x27123\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/标注发布的版本，可不设置\x3c\/span\x3e\n    }, { ... }],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/modules结束\x3c\/span\x3e\n    nobuild: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/modules外的字段可用于每一个module继承,这里仅用于举例\x3c\/span\x3e\n    tag: \x3cspan class=\x22hljs-string\x22\x3e\x27v1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/modules外的字段可用于每一个module继承,这里仅用于举例\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上展示了一个简单的配置，关于使用fjpublish和阅读本文档，还需明白以下几个概念：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3emodules数组中每一个对象（也称\x3cstrong\x3emodule\x3c\/strong\x3e）代表一个发布环境，在本文档中\x3cstrong\x3emodule\x3c\/strong\x3e指在配置文件中任意一个环境配置module\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e在本文档中\x3cstrong\x3econfig\x3c\/strong\x3e指代module.exports输出的所有字段（包含modules在内）的对象。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3econfig\x3c\/strong\x3e中modules字段外的字段在初始后将并入每一个\x3cstrong\x3emodule\x3c\/strong\x3e，优先级为\x3cstrong\x3emodule\x3c\/strong\x3e \x26gt; \x3cstrong\x3econfig\x3c\/strong\x3e，也可以理解为\x3cstrong\x3emodule\x3c\/strong\x3e继承自\x3cstrong\x3econfig\x3c\/strong\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3econfig\x3c\/strong\x3e中modules字段外的字段不仅仅为了继承给\x3cstrong\x3emodule实例\x3c\/strong\x3e也可以是为了定义某些全局的配置字段。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e听起来好像一头雾水，建议看完例子再重新理解以上内容\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e例子\x3c\/h2\x3e\n\x3cp\x3e让我们闲话少说，先上几个例子来了解fjpublish能做什么。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e1. 简单例子\x3c\/h3\x3e\n\x3cp\x3e发布一个项目文件到远程环境，并备份旧文件。\x3c\/p\x3e\n\x3ch4\x3e任务描述\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e以提示器的方式选择发布到测试环境\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch4\x3e配置文件\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 项目根目录下fjpublish.config.js\nmodule.exports = {\n    modules: [{\n        name: \x27测试环境\x27,\n        env: \x27test\x27,\n        ssh: {\n            host: \x27192.168.0.xxx\x27,\n            username: \x27root\x27, \/\/登录服务器的用户名\n            \/\/rc版本的user选项和userName选项请在未来统一配置为username\n            password: \x27xxxxxx\x27,\n        },\n        buildCommand: \x27webpack\x27,\n        localPath: \x27example\x27,\n        remotePath: \x27\/www\/manman\/test\x27,\n    },{\n        name: \x27预发布环境\x27,\n        env: \x27pre_release\x27,\n        \/\/剩余配置参考‘测试环境’\n    },{\n        name: \x27正式环境\x27,\n        env: \x27pre_release\x27,\n        \/\/剩余配置参考‘测试环境’\n    }]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 项目根目录下fjpublish.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27测试环境\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3essh\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27192.168.0.xxx\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/登录服务器的用户名\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/rc版本的user选项和userName选项请在未来统一配置为username\x3c\/span\x3e\n            password: \x3cspan class=\x22hljs-string\x22\x3e\x27xxxxxx\x27\x3c\/span\x3e,\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3ebuildCommand\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3elocalPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eremotePath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/www\/manman\/test\x27\x3c\/span\x3e,\n    },{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27预发布环境\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27pre_release\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/剩余配置参考‘测试环境’\x3c\/span\x3e\n    },{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27正式环境\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27pre_release\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/剩余配置参考‘测试环境’\x3c\/span\x3e\n    }]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 项目根目录下package.json\n\/\/ 用于使用构建命令npm run webpack来调用webpack\n...\n\x26quot;scripts\x26quot;: {\n    \x26quot;webpack\x26quot;: \x26quot;webpack --config example\/webpack\/build\/build.js\x26quot;\n},\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e\/\/ 项目根目录下package.json\n\/\/ 用于使用构建命令npm run webpack来调用webpack\n...\n\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22webpack\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack --config example\/webpack\/build\/build.js\x22\x3c\/span\x3e\n},\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e发布命令\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fjpublish env -s\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs bash\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3efjpublish env \x3cspan class=\x22hljs-_\x22\x3e-s\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e动态图\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/80c8180971c076fc21e03905b5d58eb3\x22 src=\x22https:\/\/static.alili.techhttps:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/80c8180971c076fc21e03905b5d58eb3\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x26lt;center\x26gt;\x26lt;font color=\x22#999\x22 size=1\x26gt;简单例子\x26lt;\/font\x26gt;\x26lt;\/center\x26gt;\x3c\/p\x3e\n\x3ch4\x3e更多内容\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e可以使用命令\x3ccode\x3efjpublish env \x26lt;env\x26gt; --diff\x3c\/code\x3e开启差异化发布，每次发布只上传有改动的文件，极大的缩短上传时间。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e对于不需要构建的项目，不需要准备package.json，并在配置文件中设置\x3ccode\x3enobuild\x3c\/code\x3e选项；\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22nobuild: true\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enobuild: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e对于某次发布临时不需要构建的，请在命令中使用\x3ccode\x3e--nobuild\x3c\/code\x3e选项\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fjpublish env \x3cenv\x3e --nobuild\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dockerfile\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3efjpublish \x3cspan class=\x22hljs-keyword\x22\x3eenv\x3c\/span\x3e \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eenv\x3c\/span\x3e\x26gt; --nobuild\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e2. 多目录发布\x3c\/h3\x3e\n\x3cp\x3e有些时候我们的项目需要发布的文件夹不止一个，或者需要忽略某些文件，那么就需要调整发布方式。\x3c\/p\x3e\n\x3ch4\x3e任务描述\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e使用\x3cstrong\x3emodule\x3c\/strong\x3e的\x3ccode\x3elocalPathEntries\x3c\/code\x3e来发布多个目录；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用\x3cstrong\x3emodule\x3c\/strong\x3e的\x3ccode\x3elocalPathIgnore\x3c\/code\x3e忽略所有txt结尾的文件。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e项目文件结构\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/072a8f7cb13142de9e417127cf0253cd\x22 src=\x22https:\/\/static.alili.techhttps:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/072a8f7cb13142de9e417127cf0253cd\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e配置文件\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 项目根目录下fjpublish.config.js\nmodule.exports = {\n    modules: [{\n        name: \x27测试环境\x27,\n        env: \x27test\x27,\n        ssh: {\n            host: \x27192.168.0.xxx\x27,\n            username: \x27root\x27, \/\/登录服务器的用户名\n            \/\/rc版本的user选项和userName选项请在未来统一配置为username\n            password: \x27xxxxx\x27,\n        },\n        buildCommand: \x27webpack\x27,\n        localPathEntries: [\x27example\x27, \x27lib\x27],\n        localPathIgnore: \x27**\/*.txt\x27,\n        remotePath: \x27\/www\/manman\/multiple\x27,\n    }],\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 项目根目录下fjpublish.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27测试环境\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3essh\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27192.168.0.xxx\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/登录服务器的用户名\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/rc版本的user选项和userName选项请在未来统一配置为username\x3c\/span\x3e\n            password: \x3cspan class=\x22hljs-string\x22\x3e\x27xxxxx\x27\x3c\/span\x3e,\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3ebuildCommand\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3elocalPathEntries\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27lib\x27\x3c\/span\x3e],\n        \x3cspan class=\x22hljs-attr\x22\x3elocalPathIgnore\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27**\/*.txt\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eremotePath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/www\/manman\/multiple\x27\x3c\/span\x3e,\n    }],\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e发布命令\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fjpublish env test\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs bash\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3efjpublish env \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e动态图\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/9aa47d92c9cf63a1fe65424a128b6cc9\x22 src=\x22https:\/\/static.alili.techhttps:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/9aa47d92c9cf63a1fe65424a128b6cc9\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x26lt;center\x26gt;\x26lt;font color=\x22#999\x22 size=1\x26gt;多目录发布\x26lt;\/font\x26gt;\x26lt;\/center\x26gt;\x3c\/p\x3e\n\x3ch4\x3e更多\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e如果把配置改一下，那么发布的项目结构将完全不同，那么聪明的你猜猜修改上文配置的\x3ccode\x3elocalPath\x3c\/code\x3e和\x3ccode\x3elocalPathEntries\x3c\/code\x3e会发生什么吧；\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nlocalPath: \x27example\/webpack\x27, \/\/当localPathEntries存在时localPath可不填，不填意味着项目根目录\nlocalPathEntries: [\x27build\x27, \x27dist\x27],\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e...\nlocalPath: \x3cspan class=\x22hljs-string\x22\x3e\x27example\/webpack\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/当localPathEntries存在时localPath可不填，不填意味着项目根目录\x3c\/span\x3e\nlocalPathEntries: [\x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e],\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e若项目为多目录发布，则远程目录的备份规则也将变为以这些子目录为备份源。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/36d49819112439b05c7492b7842187c4\x22 src=\x22https:\/\/static.alili.techhttps:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/36d49819112439b05c7492b7842187c4\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e3. 远程后置命令\x3c\/h3\x3e\n\x3cp\x3e对于需要重启服务的项目，fjpublish也是支持的。\x3c\/p\x3e\n\x3ch4\x3e任务描述\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e使用\x3cstrong\x3emodule\x3c\/strong\x3e的配置项\x3ccode\x3epostCommands\x3c\/code\x3e在项目发布后重启pm2进程；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e忽略当次构建过程并提交一次git；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e使用\x3cstrong\x3emodule\x3c\/strong\x3e的配置项\x3ccode\x3essh2shell\x3c\/code\x3e设置每个远程命令超时时间为20秒。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e配置文件\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 项目根目录下fjpublish.config.js\nmodule.exports = {\n    modules: [{\n        name: \x27测试环境\x27,\n        env: \x27test\x27,\n        ssh: {\n            host: \x27192.168.0.xxx\x27,\n            username: \x27root\x27, \/\/登录服务器的用户名\n            \/\/rc版本的user选项和userName选项请在未来统一配置为username\n            password: \x27xxxxxx\x27,\n        },\n        ssh2shell: {\n            idleTimeOut: 20000\n        },\n        postCommands: [\x27pm2 reload xxx\x27],\n        buildCommand: \x27build\x27,\n        localPath: \x27example\x27,\n        remotePath: \x27\/www\/manman\/test\x27,\n    }]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 项目根目录下fjpublish.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27测试环境\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3essh\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27192.168.0.xxx\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27root\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/登录服务器的用户名\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/rc版本的user选项和userName选项请在未来统一配置为username\x3c\/span\x3e\n            password: \x3cspan class=\x22hljs-string\x22\x3e\x27xxxxxx\x27\x3c\/span\x3e,\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3essh2shell\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3eidleTimeOut\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20000\x3c\/span\x3e\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3epostCommands\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27pm2 reload xxx\x27\x3c\/span\x3e],\n        \x3cspan class=\x22hljs-attr\x22\x3ebuildCommand\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27build\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3elocalPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eremotePath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/www\/manman\/test\x27\x3c\/span\x3e,\n    }]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e发布命令\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fjpublish env test --nobuild --commit \x27远程后置命令\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dsconfig\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-string\x22\x3efjpublish \x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3eenv \x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3etest \x3c\/span\x3e\x3cspan class=\x22hljs-built_in\x22\x3e--nobuild\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3e--commit\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27远程后置命令\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e动态图\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/4d606e2ba8b3b6a1ac3bdae49c46c236\x22 src=\x22https:\/\/static.alili.techhttps:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/4d606e2ba8b3b6a1ac3bdae49c46c236\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x26lt;center\x26gt;\x26lt;font color=\x22#999\x22 size=1\x26gt;远程后置命令\x26lt;\/font\x26gt;\x26lt;\/center\x26gt;\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e4.快速还原\x3c\/h3\x3e\n\x3cp\x3e有备份项目的功能那当然得有还原的办法啦。\x3c\/p\x3e\n\x3ch4\x3e任务描述\x3c\/h4\x3e\n\x3cul\x3e\x3cli\x3e\x3cp\x3e还原版本预发布环境至\x3ccode\x3etag\x3c\/code\x3e标记为‘自定义tag的版本’的版本；\x3c\/p\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch4\x3e配置文件\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 项目根目录下fjpublish.config.js\nmodule.exports = {\n    modules: [{\n        name: \x27预发布环境\x27,\n        env: \x27pre_release\x27,\n        ssh: {\n            \/\/略\n        },\n        localPath: \x27example\x27,\n        remotePath: \x27\/www\/zhangchao\/pre_release\x27,\n    }],\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 项目根目录下fjpublish.config.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27预发布环境\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27pre_release\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3essh\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/略\x3c\/span\x3e\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3elocalPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27example\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eremotePath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/www\/zhangchao\/pre_release\x27\x3c\/span\x3e,\n    }],\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e还原命令\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fjpublish recover pre_release\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dos\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3efjpublish \x3cspan class=\x22hljs-built_in\x22\x3erecover\x3c\/span\x3e pre_release\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e动态图\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22https:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/cffca278b9eca7c3c1feb2c7b2b39133\x22 src=\x22https:\/\/static.alili.techhttps:\/\/user-gold-cdn.xitu.io\/2017\/10\/29\/cffca278b9eca7c3c1feb2c7b2b39133\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x26lt;center\x26gt;\x26lt;font color=\x22#999\x22 size=1\x26gt;快速还原\x26lt;\/font\x26gt;\x26lt;\/center\x26gt;\x3c\/p\x3e\n\x3ch4\x3e更多\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e可以使用命令\x3ccode\x3efjpublish recover pre_release -p, --previous\x3c\/code\x3e 快速还原至上个版本而不需要选择；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e可以使用选项\x3ccode\x3erecoverTemplate\x3c\/code\x3e自定义版本列表模板；\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e快速还原一样也会执行\x3ccode\x3epostCommands\x3c\/code\x3e配置的后置命令。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e以上的例子描述了\x3ca href=\x22https:\/\/github.com\/zczhangchao51\/fjpublish\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3efjpublish\x3c\/a\x3e中最基本的功能，fjpublish也有强大拓展能力，感兴趣的童鞋可以直接移步\x3ca href=\x22http:\/\/fjpublish.manman.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e了解更多，别忘了在github上给我点个\x3ca href=\x22http:\/\/fjpublish.manman.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3estar\x3c\/a\x3e哦。\x3c\/p\x3e\n\x3cp\x3e下一期我们将谈论如何使用fjpublish进行安全发布，拜拜∩__∩y。\x3cbr\x3e下一期地址：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000012060917\x22\x3e使用fjpublish发布前端项目（安全篇）\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3efjpublish官方交流群：608809145\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用fjpublish发布前端项目（基础篇）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011769402">https://segmentfault.com/a/1190000011769402</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/cy951xv0r4/" target="_blank">https://alili.tech/archive/cy951xv0r4/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>