<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="正则从零到简单分析html标签"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>正则从零到简单分析html标签 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/d6bg8mqt7ku/",
				"appid": "1613049289050283", 
				"title": "正则从零到简单分析html标签 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-03T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/jsamjiiac5r/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ck7ls5eo97/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&text=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&text=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&title=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&is_video=false&description=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&title=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&title=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&title=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd6bg8mqt7ku%2f&title=%e6%ad%a3%e5%88%99%e4%bb%8e%e9%9b%b6%e5%88%b0%e7%ae%80%e5%8d%95%e5%88%86%e6%9e%90html%e6%a0%87%e7%ad%be"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">正则从零到简单分析html标签</h1><div class="meta"><div class="postdate"><time datetime="2018-12-03" itemprop="datePublished">2018-12-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e对于正则之前一直是一个\x22百度程序员\x22, 也许超过一半甚至更多的程序员也是, 那么这次来学习一下正则表达式.\x3c\/p\x3e\n\x3ch2\x3e事出有因\x3c\/h2\x3e\n\x3cp\x3e这部分介绍一下需求的由来, 与主要内容无关.\x3c\/p\x3e\n\x3cp\x3e工作上有了这样的需求: \x3c\/p\x3e\n\x3cp\x3eweb端从ueditor来的数据格式是html, 也就是\x3ccode\x3e\x26lt;p\x26gt;文章内容\x26lt;\/p\x26gt;\x3c\/code\x3e, 并夹杂着诸多标签和嵌套. \x3c\/p\x3e\n\x3cp\x3e然而正在开发的是react-native项目, rn的标签和html完全不兼容, 是\x3ccode\x3eView, Text, Image\x3c\/code\x3e等. \x3c\/p\x3e\n\x3cp\x3e那么把从web存入的数据读取到rn上就出了大麻烦, 甚至有些地方要进行跳转, 有些图片要显示, 那么怎么办呢.\x3c\/p\x3e\n\x3cp\x3e通过百度\x22js如何验证邮箱\x22已经无法满足需求了, 只能学一下了.\x3c\/p\x3e\n\x3ch2\x3e目标\x3c\/h2\x3e\n\x3cp\x3e万事有目标, 我们要把一下内容转换成rn的内容:\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22html\x22\x3e\x26lt;p\x26gt;嘿嘿嘿\x26lt;img class=\x22currentImg\x22 id=\x22currentImg\x22 src=\x22https:\/\/timgsa.baidu.com\/timg?image\x26amp;quality=80\x26amp;size=b9999_10000\x26amp;sec=1524647151050\x26amp;di=d488d0e93e72f13643d843066ef26836\x26amp;imgtype=0\x26amp;src=http%3A%2F%2Fimg02.imgcdc.com%2Fgame%2Fzh_cn%2Fpicnews%2F11128819%2F20160518%2F22678501_20160518152946632994008.jpg\x22 width=\x22201.33333333333\x22 height=\x22302\x22 title=\x22点击查看源网页\x22\/\x26gt;拖过来的图片哦\x26lt;img class=\x22currentImg\x22 id=\x22currentImg\x22 src=\x22https:\/\/timgsa.baidu.com\/timg?image\x26amp;quality=80\x26amp;size=b9999_10000\x26amp;sec=1524647205890\x26amp;di=5bf77e1d35941def729d2059d91deba8\x26amp;imgtype=0\x26amp;src=http%3A%2F%2Fnds.tgbus.com%2FUploadFiles%2F201208%2F20120817142937519.jpg\x22 width=\x22201.17405063291\x22 height=\x22302\x22 title=\x22点击查看源网页\x22\/\x26gt;\x26lt;br\/\x26gt;a\x26lt;img src=‘test1’ \/\x26gt;b\x26lt;img src=‘test2’ \/\x26gt;c\x26lt;img src=‘test3’ \/\x26gt;d\x26lt;\/p\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e转换结果是:\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22html\x22\x3e\x26lt;Text\x26gt;嘿嘿嘿\x26lt;\/Text\x26gt;\n\x26lt;Image source=\x22{{\x22uri: \x27https:\/\/timgsa.baxxxx\x27\x22}}\x22\x26gt;\x26lt;\/Image\x26gt;\n\x26lt;Text\x26gt;拖过来的图片哦\x26lt;\/Text\x26gt;\n\x26lt;Image source=\x22{{\x22uri: \x27https:\/\/txx\x27\x22}}\x22\x26gt;\x26lt;\/Image\x26gt;\n\x26lt;Text\x26gt;a\x26lt;\/Text\x26gt;\n\x26lt;Image source=\x22{{\x22uri: \x27test1\x27\x22}}\x22\x26gt;\x26lt;\/Image\x26gt;\n\x26lt;Text\x26gt;b\x26lt;\/Text\x26gt;\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e本文会从零基础出发达成这个目标.\x3c\/p\x3e\n\x3cp\x3e讲解顺序: 正则介绍 =\x26gt; 正则语法系统 =\x26gt; 简单的例子讲解 =\x26gt; 尝试实现目标以及碰到的问题 =\x26gt; 实现目标\x3c\/p\x3e\n\x3ch2\x3e什么是正则\x3c\/h2\x3e\n\x3cp\x3e初中时候学的通配符, 用\x3ccode\x3e?\x3c\/code\x3e代表一个任意字符, 用\x3ccode\x3e*\x3c\/code\x3e代表任意个任意字符来进行搜索, 正则也是如此. 比如:\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e123[abc]\x3c\/code\x3e匹配以下哪组字符?\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e123c\x3c\/li\x3e\n\x3cli\x3e123d\x3c\/li\x3e\n\x3cli\x3e123e\x3c\/li\x3e\n\x3cli\x3e123f\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e选了1的朋友你已经知道正则是什么了. \x3ccode\x3e123[abc]\x3c\/code\x3e就是正则, 代表匹配内容为: 前三个字符分别为123, 第四个字符是abc中的一个, 这个正则遇到\x3ccode\x3e123a\x3c\/code\x3e, \x3ccode\x3e123b\x3c\/code\x3e, \x3ccode\x3e123c\x3c\/code\x3e都可以匹配成功, 其他任何都匹配失败.\x3c\/p\x3e\n\x3ch2\x3e正则语法\x3c\/h2\x3e\n\x3cp\x3e百度了正则表达式看到的东西都用了很多术语, 让人有点犯浑. 我经过学习把正则抽象为两个部分: \x3ccode\x3e内容\x3c\/code\x3e和\x3ccode\x3e修饰\x3c\/code\x3e.\x3c\/p\x3e\n\x3cp\x3e看到一长串正则觉得稀里哗啦, 但是里面的每个符号一定都属于\x3ccode\x3e内容\x3c\/code\x3e或是\x3ccode\x3e修饰\x3c\/code\x3e.\x3c\/p\x3e\n\x3ch3\x3e内容\x3c\/h3\x3e\n\x3cp\x3e内容的形式有3种:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e直接匹配: 举例就是刚才的\x3ccode\x3e123[abc]\x3c\/code\x3e中的\x3ccode\x3e123\x3c\/code\x3e, 这种匹配需要完全吻合才能匹配, \x3ccode\x3e123\x3c\/code\x3e就唯一匹配\x3ccode\x3e123\x3c\/code\x3e.\x3c\/li\x3e\n\x3cli\x3e范围匹配: 用中括号表示, 也就是刚才例子中的\x3ccode\x3e[abc]\x3c\/code\x3e. 这种情况也就是三选一. 任意匹配\x3ccode\x3ea\x3c\/code\x3e或\x3ccode\x3eb\x3c\/code\x3e或\x3ccode\x3ec\x3c\/code\x3e, 而不是匹配\x3ccode\x3eabc\x3c\/code\x3e. 还有两种形式: 加\x3ccode\x3e-\x3c\/code\x3e来表示范围, 比如\x3ccode\x3e[a-z]\x3c\/code\x3e; 表示排除范围内的\x3ccode\x3e^\x3c\/code\x3e, 比如\x3ccode\x3e[^abc]\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e匹配并选择缓存到子匹配: 用圆括号表示, 圆括号中的内容语法是\x22直接匹配\x22但会被记入缓存作为子匹配, 我记得我最初接触正则就是url rewrite, 写了url正则之后用\x3ccode\x3e$1, $2\x3c\/code\x3e来重写url.\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e在范围匹配中, 我们经常会用: 数字\/字母, 也就是\x3ccode\x3e[0-9]\x3c\/code\x3e, \x3ccode\x3e[a-zA-Z]\x3c\/code\x3e, 但是经常用到重复地写麻烦又看不能装逼了, 所以产生了一些快捷方式: \x3ccode\x3e\\d\x3c\/code\x3e代表\x3ccode\x3e[0-9]\x3c\/code\x3e, \x3ccode\x3e\\w\x3c\/code\x3e代表\x3ccode\x3e[0-9a-zA-Z_]\x3c\/code\x3e这正好是常用的用户名和密码的规则.\x3c\/p\x3e\n\x3cp\x3e这里深入一下圆括号匹配的两个点. 作为拓展, 可以先不看一下的内容直接到下一部分.\x3c\/p\x3e\n\x3cp\x3e因为圆括号中可以用\x3ccode\x3e|\x3c\/code\x3e符号来表示或的关系, 但有时候又不想被加入缓存. 于是可以用\x3ccode\x3e?:\x3c\/code\x3e来表示不需要缓存. 例子:\x3ccode\x3ehello (?:world|regular expression)\x3c\/code\x3e, 用来匹配\x3ccode\x3ehello world\x3c\/code\x3e或者\x3ccode\x3ehello regular expression\x3c\/code\x3e, 但又不需要把\x3ccode\x3eworld\x3c\/code\x3e储存为缓存.\x3c\/p\x3e\n\x3cp\x3e如果之前已经用圆括号, 那么期望之后出现同样的内容, 可以用\x3ccode\x3e\\1\x3c\/code\x3e这样\x3ccode\x3e\\\x3c\/code\x3e加数字来表示. 举个例子: 单引号和双引号, 我们要匹配\x3ccode\x3e\x27123\x27\x3c\/code\x3e或者\x3ccode\x3e\x22123\x22\x3c\/code\x3e, 但是要保持引号一致.  \x3ccode\x3e(\x27|\x22)123\\1\x3c\/code\x3e就可以解决问题.\x3c\/p\x3e\n\x3ch3\x3e修饰\x3c\/h3\x3e\n\x3cp\x3e我把修饰部分分为数量修饰和边界修饰.\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e数量修饰: 符号为{}, 想到了谷歌: \x3ccode\x3ego{2,4}gle\x3c\/code\x3e这个正则可以匹配\x3ccode\x3egoogle\x3c\/code\x3e, \x3ccode\x3egooogle\x3c\/code\x3e, \x3ccode\x3egoooogle\x3c\/code\x3e, 代表这个\x3ccode\x3eo\x3c\/code\x3e可以匹配2或者4次. 当然只是为了举例可以枚举, 因为\x3ccode\x3ego{2,}gle\x3c\/code\x3e代表可以无限个\x3ccode\x3eo\x3c\/code\x3e, 这样举例不方便.\x3cp\x3e与之前的范围匹配一样, 数量修饰也有快捷符号: \x3ccode\x3e?\x3c\/code\x3e代表{0,1}, \x3ccode\x3e*\x3c\/code\x3e代表{0,}, \x3ccode\x3e\x2b\x3c\/code\x3e代表{1,}. 都很形象, 不用死记, 就像刚才的d for digital, w for word. 看过一个例子: \x3ccode\x3ecolou?r\x3c\/code\x3e 这里的\x3ccode\x3e?\x3c\/code\x3e表示可有可无, 美式和英式的拼写都可以匹配.\x3c\/p\x3e\n\x3cp\x3e另外在\x22无上限\x22的数量的右边加\x3ccode\x3e?\x3c\/code\x3e代表不贪婪匹配, 会匹配数量最少的内容. 举例: \x3ccode\x3ea\x2b\x3c\/code\x3e匹配\x3ccode\x3eaaaaa\x3c\/code\x3e的结果为\x3ccode\x3eaaaaa\x3c\/code\x3e, \x3ccode\x3ea\x2b?\x3c\/code\x3e匹配\x3ccode\x3eaaaaa\x3c\/code\x3e的结果为\x3ccode\x3ea\x3c\/code\x3e.\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e边界修饰: \x3ccode\x3e^\x3c\/code\x3e表示字符串的头, \x3ccode\x3e$\x3c\/code\x3e表示字符串的尾, \x3ccode\x3e\\b\x3c\/code\x3e表示字母与空格间的位置. 用来给匹配定位, 具体用法在实际中操作就会有具体感受了.\x3cp\x3e另外, 正则有一种匹配模式是\x3ccode\x3em\x3c\/code\x3e, 多行匹配模式, 这个情况里\x3ccode\x3e^\x3c\/code\x3e和\x3ccode\x3e$\x3c\/code\x3e也能匹配每一行的开头和结尾.\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2\x3ejavascript相关函数\x3c\/h2\x3e\n\x3cp\x3e首先明确正则是\x22正则表达式\x22与\x22字符串\x22发生的匹配关系.\x3c\/p\x3e\n\x3cp\x3ejs有个对象是\x3ccode\x3eRegExp\x3c\/code\x3e, 使用方法是\x3ccode\x3enew RegExp(pattern, mode)\x3c\/code\x3e, 或者是用\x3ccode\x3e\/\x3c\/code\x3e包裹的字面量: \x3ccode\x3e\/pattern\/mode\x3c\/code\x3e.\x3c\/p\x3e\n\x3cp\x3e这里发现提到了\x3ccode\x3emode\x3c\/code\x3e匹配模式, 一共三种:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3eg: 全局匹配, 匹配到一次不会停止, \x3ccode\x3e\/a\/\x3c\/code\x3e匹配\x3ccode\x3eaaa\x3c\/code\x3e, 如果没有g结果是一个\x3ccode\x3ea\x3c\/code\x3e, 有g结果是3个\x3ccode\x3ea\x3c\/code\x3e.\x3c\/li\x3e\n\x3cli\x3ei: 忽略大小写.\x3c\/li\x3e\n\x3cli\x3em: 多行模式. 和之前提到的\x3ccode\x3e\\b\x3c\/code\x3e有联动.\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e三个模式不互斥, 叠加的, 也就是可以\x3ccode\x3enew RegExp(patter, \x27gin\x27)\x3c\/code\x3e.\x3c\/p\x3e\n\x3cp\x3e正则的方法有:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3e.test()\x3c\/code\x3e: 返回是否匹配成功, true或者false.\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e.exec()\x3c\/code\x3e: 失败返回null, 成功返回数组, 位置0是匹配内容, 之后是圆括号匹配的内容. 要注意的是exec是忽略\x27g\x27模式的.\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e字符串的方法:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3e.replace(pattern, replacement)\x3c\/code\x3e: replacement可以字符串或方法, 方法的话参数是匹配到的内容.\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e.match(pattern)\x3c\/code\x3e: 返回数组, 所有匹配到的内容.\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2\x3e分析一些简单常用的例子\x3c\/h2\x3e\n\x3ch3\x3e是否小数\x3c\/h3\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3efunction isDecimal(strValue )  {  \n   var  objRegExp= \/^\\d\x2b\\.\\d\x2b$\/;\n   return  objRegExp.test(strValue);  \n}  \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3e\\d\x3c\/code\x3e代表数字, \x3ccode\x3e\x2b\x3c\/code\x3e代表至少有1个数字,  \x3ccode\x3e\\.\x3c\/code\x3e转移小数点.\x3c\/p\x3e\n\x3cp\x3e连起来看就是: 至少一个数字(\x3ccode\x3e\\d\x2b\x3c\/code\x3e) 小数点(\x3ccode\x3e\\.\x3c\/code\x3e) 至少一个数字(\x3ccode\x3e\\d\x2b\x3c\/code\x3e) .\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e^\x3c\/code\x3e和\x3ccode\x3e$\x3c\/code\x3e代表头尾, 真个字符串是小数的全部, 而不是包含小数.\x3c\/p\x3e\n\x3ch3\x3e是否中文名\x3c\/h3\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3efunction ischina(str) {\n    var reg=\/^[\\u4E00-\\u9FA5]{2,4}$\/;   \/*定义验证表达式*\/\n    return reg.test(str);     \/*进行验证*\/\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个范围是中文的编码范围: \x3ccode\x3e[\\u4E00-\\u9FA5]\x3c\/code\x3e, \x3ccode\x3e{2,4}\x3c\/code\x3e匹配2~4个. 也就是匹配2~4个中文.\x3c\/p\x3e\n\x3ch3\x3e是否八位数字\x3c\/h3\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3efunction isStudentNo(str) {\n    var reg=\/^\\d{8}$\/;   \/*定义验证表达式*\/\n    return reg.test(str);     \/*进行验证*\/\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3\x3e是否电话号码\x3c\/h3\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3efunction isTelCode(str) {\n    var reg= \/^((0\\d{2,3}-\\d{7,8})|(1[3584]\\d{9}))$\/;\n    return reg.test(str);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e分两个部分: 座机号和手机号, 用\x3ccode\x3e|\x3c\/code\x3e隔开了.\x3c\/p\x3e\n\x3cp\x3e座机号: 0开头的三位数或四位数 短杠 7~8位数字.\x3c\/p\x3e\n\x3cp\x3e手机号: 第一位1, 第二位3584的一个, 剩下由9个数字凑满11位电话.\x3c\/p\x3e\n\x3ch3\x3e邮箱地址\x3c\/h3\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3efunction IsEmail(str) {\n    var reg=\/^([a-zA-Z0-9_-])\x2b@([a-zA-Z0-9_-])\x2b(\\.[a-zA-Z0-9_-])\x2b$\/;\n    return reg.test(str);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2\x3e迈向目标\x3c\/h2\x3e\n\x3cp\x3e这个章节开始整理实现需求的思路.\x3c\/p\x3e\n\x3cp\x3e先回忆一下正则的规则, 其实很简单, 和加减乘除一样, 有各种符号: [], (), |, -, {}, \x2b, *, ?. 当然也可以很复杂, 因为也和加减乘除一样, 可以嵌套, 而正则的符号本来就多, 嵌套起来更是晕, 有一些符号在不同地方有不同作用, 比如\x3ccode\x3e\\\x3c\/code\x3e和\x3ccode\x3e^\x3c\/code\x3e.(思考题: 分析一下这两个符号有哪些作用, 在什么场景).\x3c\/p\x3e\n\x3cp\x3e那么我们的目标是: 把一段html分析称rn的标签.\x3c\/p\x3e\n\x3cp\x3e因为rn没有parse的功能, 所以不可以使用replace. (replace是代码高亮的常用手段).\x3c\/p\x3e\n\x3cp\x3e所以我们必须把html分解成js对象, 再从js对象里去分析输出rn标签.\x3c\/p\x3e\n\x3cp\x3e因为html标签分为多种, 为了保证完整性和可维护性, 要把各个标签的正则分开写, 也便于之后在分析每个片段的时候来取子匹配, 比如img标签的src, a标签的href.\x3c\/p\x3e\n\x3cp\x3e经过研究, 正则是不可以拼接的, 只有字符串可以拼接. 所以我们要把不同标签的正则写成字符串, 再在需要的时候拼接. \x3ccode\x3enew RegExp(pattern)\x3c\/code\x3e的pattern参数是可以接受字符串的.\x3c\/p\x3e\n\x3ch2\x3e匹配text的难题与正则匹配的动作分析\x3c\/h2\x3e\n\x3cp\x3e众所周知, 在html里的text是可以光秃秃的(在rn里必须加上Text标签). 那么如何匹配这光秃秃的东西呢, 我开始想了一个办法: 因为text都在标签之外, 也就是\x22夹在\x26gt;和\x26lt;中的字符\x22, 或者在开头(^)和\x26lt;间的, 或者\x26gt;和结尾($)间的. 结果标签全都匹配不到了.\x3c\/p\x3e\n\x3cp\x3e原因是这样的, 如果有\x27g\x27的模式, 匹配的过程是这样的:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e进行第一次匹配, 匹配成功后把匹配部分排除待匹配内容.\x3c\/li\x3e\n\x3cli\x3e进行第二次匹配, 匹配成功后把匹配部分排除待匹配内容.\x3c\/li\x3e\n\x3cli\x3e直到匹配失败, 返回所有结果.\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e举个例子:\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3e\x27applebananaapple\x27.match(\/(apple|banana)\/g)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e结果是\x3ccode\x3e[\x22apple\x22, \x22banana\x22, \x22apple\x22]\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e如果把banana的最后一个字母和apple的第一个字母写成一个:\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3e\x27applebananapple\x27.match(\/(apple|banana)\/g)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么结果就是\x3ccode\x3e[\x22apple\x22, \x22banana\x22]\x3c\/code\x3e了.\x3c\/p\x3e\n\x3cp\x3e反而利用了这个特点, 把text的正则写成: 不包含\x3ccode\x3e\x26lt;\x26gt;\/\x3c\/code\x3e (\x3ccode\x3e[^\x26lt;\x26gt;\/]\x2b\x3c\/code\x3e), 并添加在最后一个匹配, 就能正确地匹配出text啦.\x3c\/p\x3e\n\x3ch2\x3e揭晓答案\x3c\/h2\x3e\n\x3cp\x3e写得急促也许有遗漏, 最后贴上完成需求的代码, 语言是rn, 在map输出的时候带着一些项目业务的逻辑请无视.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3eimport React, {Component} from \x27react\x27\nimport {Text, View, Image, Platform, StyleSheet, TouchableOpacity} from \x27react-native\x27\nimport {ENVS} from \x27..\/..\/config\/apiHost\x27\n\n\/*\n    必须props: @html: html内容\n    可选props:  @style: 字体style; @magnifyImg: 显示大图\n *\/\n\nconst regex = {  \/\/ \x27_\x27 for close tag\n    p: `\x26lt;p[^\x26gt;]*?\x26gt;`,\n    _p: `\x26lt;\\\/p\x26gt;`,\n    span: `\x26lt;span[^\x26gt;]*?\x26gt;`,\n    _span: `\x26lt;\\\/span\x26gt;`,\n    br: `\x26lt;br\\\/\x26gt;`,\n    a: `\x26lt;a[^\x26gt;]*?href=(\\\x27|\x22)([^\x26gt;]\x2b?)\\\\1[^\x26gt;]*?\x26gt;([^\x26lt;]\x2b?)\x26lt;\\\\\/a\x26gt;`, \/\/ $1 是标点符号用来处理匹配 $2 href的带引号的内容 $3 文件名(a标签的innerText),\n    img: `\x26lt;img[^\x26gt;]*?src=(\x27|\x22)([^\x26gt;]\x2b?)\\\\1[^\x26gt;]*?\\\\\/\x26gt;`, \/\/ $1 标点符号 $2 src的内容\n    text: `[^\x26lt;\x26gt;\/]\x2b`, \/\/ 匹配剩下的, 一定要放在最后\n}\n\nconst tobeRemoved = new RegExp(`(?:${[regex.p, regex._p, regex.span, regex._span, regex.br].join(\x27|\x27)})`, \x27g\x27)\n\nconst parseToAst = new RegExp(`(?:${[regex.a, regex.img, regex.text].join(\x27|\x27)})`, \x27g\x27)\n\nexport default class Parsed extends Component {\n    render () {\n        let str = this.props.html.trim()\n        if (!str) {\n            return (\n                \x26lt;Text\x26gt;html attr not passed to component \x27parseHtml\x27\x26lt;\/Text\x26gt;\n            )\n        }\n        matches = str.replace(tobeRemoved, \x27\x27).match(parseToAst)\n        return (\n            \x26lt;View\x26gt;\n                {matches.map((block, index) =\x26gt; {\n                    for (let [key, value] of Object.entries(regex)) {\n                        let res = new RegExp(value).exec(block)\n                        if (res) {\n                            if (key === \x27text\x27) {\n                                return (\n                                    \x26lt;Text style={this.props.style} key={index}\x26gt;{block}\x26lt;\/Text\x26gt;\n                                )\n                            }\n                            if (key === \x27a\x27) {\n                                if (res[2].includes(\x27files\x27)) { \/\/ 判断附件\n                                    if (\/[jpg|png|jpeg]\/i.test(res[3])) { \/\/ 判断图片\n                                        let imgId = res[2].match(\/\\d\x2b\/)[0]\n                                        return (\n                                            \x26lt;TouchableOpacity key={index} onPress={() =\x26gt; {this.props.magnifyImg \x26amp;\x26amp; this.props.magnifyImg(ENVS.production.api_base_url \x2b \x27\/files\/\x27 \x2b imgId)\x22}}\x22 \x26gt;\n                                                \x26lt;Image style=\x22{{\x22width: 100, height: 100, margin: 10\x22}}\x22 source=\x22{{\x22uri: ENVS.production.api_base_url \x2b \x27\/files\/\x27 \x2b imgId\x22}}\x22\x26gt;\x26lt;\/Image\x26gt;\n                                            \x26lt;\/TouchableOpacity\x26gt;\n                                        )\n                                    }\n                                }\n                            }\n                            if (key === \x27img\x27) {\n                                return (\n                                    \x26lt;TouchableOpacity key={index} onPress={() =\x26gt; {this.props.magnifyImg \x26amp;\x26amp; this.props.magnifyImg(res[2])\x22}}\x22\x26gt;\n                                        \x26lt;Image style=\x22{{\x22width: 100, height: 100, margin: 10\x22}}\x22 source=\x22{{\x22uri: res[2]\x22}}\x22\x26gt;\x26lt;\/Image\x26gt;\n                                    \x26lt;\/TouchableOpacity\x26gt;\n                                )\n                            }\n                        }\n                    }\n                })}\n            \x26lt;\/View\x26gt;\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>正则从零到简单分析html标签</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014658277">https://segmentfault.com/a/1190000014658277</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/d6bg8mqt7ku/" target="_blank">https://alili.tech/archive/d6bg8mqt7ku/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>