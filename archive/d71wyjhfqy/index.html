<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="flutter笔记6：试玩flutter的HTTP请求和VScode调试工具"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>flutter笔记6：试玩flutter的HTTP请求和VScode调试工具 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/d71wyjhfqy/",
				"appid": "1613049289050283", 
				"title": "flutter笔记6：试玩flutter的HTTP请求和VScode调试工具 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-10T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/edc0zkvict/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/z9skhjhbaqq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&text=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&text=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&title=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&is_video=false&description=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&title=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&title=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&title=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd71wyjhfqy%2f&title=flutter%e7%ac%94%e8%ae%b06%ef%bc%9a%e8%af%95%e7%8e%a9flutter%e7%9a%84HTTP%e8%af%b7%e6%b1%82%e5%92%8cVScode%e8%b0%83%e8%af%95%e5%b7%a5%e5%85%b7"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">flutter笔记6：试玩flutter的HTTP请求和VScode调试工具</h1><div class="meta"><div class="postdate"><time datetime="2018-12-10" itemprop="datePublished">2018-12-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3eFlutter集成了使用起来极其简洁的HTTP请求对象，参考\x3ca href=\x22https:\/\/flutter.io\/networking\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方资料\x3c\/a\x3e，今天就找个调试工具来试试HTTP请求，如果想了解更丰富的信息，请参考\x3ca href=\x22https:\/\/docs.flutter.io\/flutter\/dart-io\/dart-io-library.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方API dart:io\x3c\/a\x3e，API列表在页面的右边。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e第一步\x3c\/h2\x3e\n\x3cp\x3e到免费开放http请求API的网站，如\x3ca href=\x22https:\/\/www.juhe.cn\/docs\/api\/id\/39\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e聚合数据查询天气\x3c\/a\x3e，注册一个账号，然后申请这个免费的接口，当然你也可以申请别的免费API，比如我就申请了俩免费接口：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013712173\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013712173\x22 alt=\x22免费HTTP接口\x22 title=\x22免费HTTP接口\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e第二步\x3c\/h2\x3e\n\x3cp\x3e打开VScode，到终端找一个存放项目代码的目录，输入命令：\x3c\/p\x3e\n\x3cblockquote\x3eflutter create myhttptest\x3c\/blockquote\x3e\n\x3cp\x3e项目文件夹初始化完毕后，用VScode打开项目文件夹-\x26gt;打开main.dart，然后用以下代码覆盖初始化的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import \x27dart:convert\x27;    \/\/集成了支持json、utf-8等数据格式的编码和解码器\nimport \x27dart:io\x27;        \/\/集成了File, socket, HTTP等服务应用的IO库\n\nimport \x27package:flutter\/material.dart\x27;\n\nvoid main() {\n  runApp(new MyApp()); \n}\n\nclass MyApp extends StatelessWidget {\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      home: new MyHomePage(),\n    );\n  }\n}\n\nclass MyHomePage extends StatefulWidget {\n  MyHomePage({Key key}) : super(key: key);\n\n  @override\n  _MyHomePageState createState() =\x3e new _MyHomePageState();\n}\n\nclass _MyHomePageState extends State\x3cMyHomePage\x3e {\n  var _ipAddress = \x27Unknown\x27;  \/\/为啥要定义这个变量呢？为了后面只需要写一次setState()\n\n  \/\/异步执行用到async关键字\n  _getIPAddress() async { \n    \/*接口url地址，包含了请求地址http:\/\/op.juhe.cn\/onebox\/weather\/query和两个参数cityname、AppKey*\/\n    var url = \x27http:\/\/op.juhe.cn\/onebox\/weather\/query?cityname=上海\x26amp;key=[替换成你的AppKey]\x27;  \n    var httpClient = new HttpClient();\n\n    String result;\n    \/\/如同JAVA一样的语法：\n    try {\n      var request = await httpClient.postUrl(Uri.parse(url));  \/*也可以使用httpClient.getUrl，注意根据接口要求改变两种请求方式的参数格式*\/\n      var response = await request.close();\n      if (response.statusCode == HttpStatus.OK) {\n        var json = await response.transform(UTF8.decoder).join();\n        var data = JSON.decode(json);\n        result = data[\x27result\x27][\x27data\x27][\x27realtime\x27].toString();    \/\/多维数组，请根据自己请求接口的结果对json数据结构进行拆解\n      } else {\n        result =\n            \x27Error get:\\nHttp status ${response.statusCode}\x27;    \/\/连接错误提示\n      }\n    } catch (exception) {\n      result = \x27Failed getting data\x27;  \/\/代码执行异常，抛出错误信息\n    }\n    \/\/如果当前控件已经被注销掉，则当前控件内置状态为mounted。\n    \/*由于是前面的HTTP异步请求，如果网络卡住，而当前控件因为其他原因注销掉了，\n      此时不必调让代码走到后面的setState()方法，否则会报错，所以这里直接return，避免报错。*\/\n    if (!mounted) return;\n\n    setState(() {\n      _ipAddress = result;    \/\/显示请求结果\n    });\n  }\n\n  @override\n  Widget build(BuildContext context) {\n    var spacer = new SizedBox(height: 32.0);\n\n    return new Scaffold(\n      body: new Center(\n        child: new Column(\n          mainAxisAlignment: MainAxisAlignment.center,\n          children: \x3cWidget\x3e[\n            new RaisedButton(\n              onPressed: _getIPAddress,\n              child: new Text(\x27获取天气预报\x27),\n            ),\n            new Text(\x27$_ipAddress.\x27),\n            spacer,\n          ],\n        ),\n      ),\n    );\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x27dart\x3c\/span\x3e:convert\x27;    \x3cspan class=\x22hljs-comment\x22\x3e\/\/集成了支持json、utf-8等数据格式的编码和解码器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x27dart\x3c\/span\x3e:io\x27;        \x3cspan class=\x22hljs-comment\x22\x3e\/\/集成了File, socket, HTTP等服务应用的IO库\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x27package\x3c\/span\x3e:flutter\/material.dart\x27;\n\nvoid main() {\n  runApp(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eMyApp\x3c\/span\x3e()); \n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMyApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eStatelessWidget\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-meta\x22\x3e@override\x3c\/span\x3e\n  \x3cspan class=\x22hljs-type\x22\x3eWidget\x3c\/span\x3e build(\x3cspan class=\x22hljs-type\x22\x3eBuildContext\x3c\/span\x3e context) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eMaterialApp\x3c\/span\x3e(\n      home: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eMyHomePage\x3c\/span\x3e(),\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMyHomePage\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eStatefulWidget\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-type\x22\x3eMyHomePage\x3c\/span\x3e({\x3cspan class=\x22hljs-type\x22\x3eKey\x3c\/span\x3e key}) : \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(key: key);\n\n  \x3cspan class=\x22hljs-meta\x22\x3e@override\x3c\/span\x3e\n  _MyHomePageState createState() =\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e _MyHomePageState();\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3e_MyHomePageState\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eState\x26lt;MyHomePage\x26gt;\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _ipAddress = \x3cspan class=\x22hljs-symbol\x22\x3e\x27Unknow\x3c\/span\x3en\x27;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/为啥要定义这个变量呢？为了后面只需要写一次setState()\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/异步执行用到async关键字\x3c\/span\x3e\n  _getIPAddress() async { \n    \x3cspan class=\x22hljs-comment\x22\x3e\/*接口url地址，包含了请求地址http:\/\/op.juhe.cn\/onebox\/weather\/query和两个参数cityname、AppKey*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e url = \x3cspan class=\x22hljs-symbol\x22\x3e\x27http\x3c\/span\x3e:\x3cspan class=\x22hljs-comment\x22\x3e\/\/op.juhe.cn\/onebox\/weather\/query?cityname=上海\x26amp;key=[替换成你的AppKey]\x27;  \x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e httpClient = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eHttpClient\x3c\/span\x3e();\n\n    \x3cspan class=\x22hljs-type\x22\x3eString\x3c\/span\x3e result;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如同JAVA一样的语法：\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = await httpClient.postUrl(\x3cspan class=\x22hljs-type\x22\x3eUri\x3c\/span\x3e.parse(url));  \x3cspan class=\x22hljs-comment\x22\x3e\/*也可以使用httpClient.getUrl，注意根据接口要求改变两种请求方式的参数格式*\/\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e response = await request.close();\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (response.statusCode == \x3cspan class=\x22hljs-type\x22\x3eHttpStatus\x3c\/span\x3e.\x3cspan class=\x22hljs-type\x22\x3eOK\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e json = await response.transform(\x3cspan class=\x22hljs-type\x22\x3eUTF8\x3c\/span\x3e.decoder).join();\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = \x3cspan class=\x22hljs-type\x22\x3eJSON\x3c\/span\x3e.decode(json);\n        result = data[\x3cspan class=\x22hljs-symbol\x22\x3e\x27resul\x3c\/span\x3et\x27][\x3cspan class=\x22hljs-symbol\x22\x3e\x27dat\x3c\/span\x3ea\x27][\x3cspan class=\x22hljs-symbol\x22\x3e\x27realtim\x3c\/span\x3ee\x27].toString();    \x3cspan class=\x22hljs-comment\x22\x3e\/\/多维数组，请根据自己请求接口的结果对json数据结构进行拆解\x3c\/span\x3e\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        result =\n            \x3cspan class=\x22hljs-symbol\x22\x3e\x27Error\x3c\/span\x3e get:\\nHttp status ${response.statusCode}\x27;    \x3cspan class=\x22hljs-comment\x22\x3e\/\/连接错误提示\x3c\/span\x3e\n      }\n    } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (exception) {\n      result = \x3cspan class=\x22hljs-symbol\x22\x3e\x27Failed\x3c\/span\x3e getting data\x27;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/代码执行异常，抛出错误信息\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/如果当前控件已经被注销掉，则当前控件内置状态为mounted。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*由于是前面的HTTP异步请求，如果网络卡住，而当前控件因为其他原因注销掉了，\n      此时不必调让代码走到后面的setState()方法，否则会报错，所以这里直接return，避免报错。*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!mounted) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n\n    setState(() {\n      _ipAddress = result;    \x3cspan class=\x22hljs-comment\x22\x3e\/\/显示请求结果\x3c\/span\x3e\n    });\n  }\n\n  \x3cspan class=\x22hljs-meta\x22\x3e@override\x3c\/span\x3e\n  \x3cspan class=\x22hljs-type\x22\x3eWidget\x3c\/span\x3e build(\x3cspan class=\x22hljs-type\x22\x3eBuildContext\x3c\/span\x3e context) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e spacer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eSizedBox\x3c\/span\x3e(height: \x3cspan class=\x22hljs-number\x22\x3e32.0\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eScaffold\x3c\/span\x3e(\n      body: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eCenter\x3c\/span\x3e(\n        child: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eColumn\x3c\/span\x3e(\n          mainAxisAlignment: \x3cspan class=\x22hljs-type\x22\x3eMainAxisAlignment\x3c\/span\x3e.center,\n          children: \x26lt;\x3cspan class=\x22hljs-type\x22\x3eWidget\x3c\/span\x3e\x26gt;[\n            \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eRaisedButton\x3c\/span\x3e(\n              onPressed: _getIPAddress,\n              child: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eText\x3c\/span\x3e(\x27获取天气预报\x27),\n            ),\n            \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eText\x3c\/span\x3e(\x27$_ipAddress.\x27),\n            spacer,\n          ],\n        ),\n      ),\n    );\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意看上面代码中的注释，用到了mounted，参考\x3ca href=\x22https:\/\/docs.flutter.io\/flutter\/widgets\/State\/mounted.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAPI\x3c\/a\x3e，意思是如果\x3cstrong\x3estate\x3c\/strong\x3e对象实例创建后在执行\x3ccode\x3einitState\x3c\/code\x3e动作前，会关联上\x3cstrong\x3eBuildContext\x3c\/strong\x3e对象（对本篇内容好像没什么用），此时内置状态\x3cstrong\x3emounted\x3c\/strong\x3e标记为true，如果\x3cstrong\x3estate\x3c\/strong\x3e对象实例执行了\x3ccode\x3edispose\x3c\/code\x3e动作，此时mounted=false，意味着此\x3cstrong\x3estate\x3c\/strong\x3e对象实例已消亡，代码走到\x3ccode\x3esetState()\x3c\/code\x3e方法时就会报错。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e第三步\x3c\/h2\x3e\n\x3cp\x3e手机连接好电脑后，记得打开WIFI或移动网络。\x3c\/p\x3e\n\x3cp\x3e启用VScode的Debug工具，调试代码，如图所示：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013712174\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013712174\x22 alt=\x22调试APP图解\x22 title=\x22调试APP图解\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e相信有过开发经验的小伙伴理解上图应该没有什么难度，请尽情把玩吧，APP测试效果：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013712175\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013712175\x22 alt=\x22运行效果\x22 title=\x22运行效果\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e关闭WIFI后，请求失败的响应非常快，不会像浏览器卡一下才弹出出错页面，猜测应该是flutter能够从硬件层探测WIFI或移动网络是否启用吧。\x3c\/p\x3e\n\x3cp\x3e可以看到Dart2语法下的HTTP请求代码非常简洁，比起ES5的回调函数用起来方便多了，其外还支持\x3cstrong\x3epromise\x3c\/strong\x3e，对熟悉ES6语法的同学有福啦，参考\x3ca href=\x22https:\/\/docs.flutter.io\/flutter\/dart-io\/HttpClient-class.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方API\x3c\/a\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22HttpClient client = new HttpClient();\nclient.getUrl(Uri.parse(\x26quot;http:\/\/www.example.com\/\x26quot;))\n    .then((HttpClientRequest request) {\n      \/\/ Optionally set up headers...\n      \/\/ Optionally write to the request object...\n      \/\/ Then call close.\n      ...\n      return request.close();\n    })\n    .then((HttpClientResponse response) {\n      \/\/ Process the response.\n      ...\n    });\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3eHttpClient\x3c\/span\x3e client = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eHttpClient\x3c\/span\x3e();\nclient.getUrl(Uri.parse(\x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/www.example.com\/\x22\x3c\/span\x3e))\n    .then((HttpClientRequest request) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Optionally set up headers...\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Optionally write to the request object...\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Then call close.\x3c\/span\x3e\n      ...\n      \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e request.\x3cspan class=\x22hljs-built_in\x22\x3eclose\x3c\/span\x3e();\n    })\n    .then((HttpClientResponse response) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Process the response.\x3c\/span\x3e\n      ...\n    });\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好啦，今天就介绍到这里，本篇比较简单，嫌太少的同学可以去文中引用的官方网站练练英语，偷个懒，哈哈哈，感谢大家捧场~\x3cbr\x3e\x3cstrong\x3eflutter 中文社区（官方QQ群：338252156）\x3c\/strong\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>flutter笔记6：试玩flutter的HTTP请求和VScode调试工具</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013712168">https://segmentfault.com/a/1190000013712168</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/d71wyjhfqy/" target="_blank">https://alili.tech/archive/d71wyjhfqy/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>