<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="express简单总结"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>express简单总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/d9a7smtos8/",
				"appid": "1613049289050283", 
				"title": "express简单总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-17T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/g6uc6q1k5zs/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/5fbwi5brngm/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&text=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&text=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&title=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&is_video=false&description=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&title=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&title=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&title=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fd9a7smtos8%2f&title=express%e7%ae%80%e5%8d%95%e6%80%bb%e7%bb%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">express简单总结</h1><div class="meta"><div class="postdate"><time datetime="2018-12-17" itemprop="datePublished">2018-12-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3eexpress介绍\x3c\/h2\x3e\n\x3cp\x3e如有不详细或者不正确的地方多多指正。\x3c\/p\x3e\n\x3cp\x3e我们可以拿js与jquery关系来类比一下：\x3c\/p\x3e\n\x3cp\x3ejQuery是JS在浏览器环境下的封装库，把DOM操作，ajax等封装成了兼容性好，方便使用的方法\x3cbr\x3enode是JS的一个非浏览器运行平台，里面提供API进行web服务器开发，封装了node关于web的一些API\x3c\/p\x3e\n\x3cp\x3e两者有相同之处，express和jQuery都是对自己平台（node，DOM API）进行了封装\x3cbr\x3e两者有不同之处，功能范畴完全不一样。express开发服务器，jquery做浏览器端操作。\x3c\/p\x3e\n\x3cp\x3eexpress可以通过官方提供的命令行进行安装，官方目前默认的界面文件用jade格式，建议修改为pug格式的文件（\x3ca href=\x22https:\/\/www.zhihu.com\/question\/46418330\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejade版权问题\x3c\/a\x3e） ，同时要在package.json中安装对应的npm包和app.js \x3ccode\x3eapp.set(\x27view engine\x27, \x27pug\x27)\x3c\/code\x3e设置对应的界面引擎解释器。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e路由\x3c\/h2\x3e\n\x3ch4\x3eget请求\x3c\/h4\x3e\n\x3cp\x3e路由的使用首先要引入express的路由模块，express官网的一个简单的get请求路由示例\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var express = require(\x27express\x27);\nvar app = express();\n\n\/\/ respond with \x26quot;hello world\x26quot; when a GET request is made to the homepage\napp.get(\x27\/\x27, function(req, res) {\n  res.send(\x27hello world\x27);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = express();\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ respond with \x22hello world\x22 when a GET request is made to the homepage\x3c\/span\x3e\napp.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res\x3c\/span\x3e) \x3c\/span\x3e{\n  res.send(\x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3epost请求\x3c\/h4\x3e\n\x3cp\x3epost请求首先要引入bodyparse中间件，它用于解析客户端请求中的body中的内容,\x3cbr\x3e使用express应用生成器生成一个网站，它默认已经使用了 bodyParser.json 与 bodyParser.urlencoded 的解析功能，除了这两个，bodyParser还支持对text、raw的解析。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eapp.use(bodyParser.json())\x3c\/code\x3ebodyParser.json是用来解析json数据格式的\x3cbr\x3e\x3ccode\x3eapp.use(bodyParser.urlencoded({ extended: false }))\x3c\/code\x3ebodyParser.urlencoded则是用来解析我们通常的form表单提交的数据，也就是请求头中包含这样的信息： Content-Type: application\/x-www-form-urlencoded;\x3c\/p\x3e\n\x3cp\x3eextended:如果设置为false，那么对URL-encoded的数据的解析采用querystring库，如果设置为true那么采用qs库(（\x3ca href=\x22https:\/\/segmentfault.com\/q\/1010000012370558\/\x22\x3equerystring和qs的不同\x3c\/a\x3e）)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ home.pug\n$.ajax({\n    url:userPath\x2b\x26quot;\/userinfo-company\x26quot;,\n    data:{\n        module:\x27user\x27,\n        userId:userId\n    },\n    type:\x26quot;POST\x26quot;,\n    success:function(res){\n        alert(res);\n    },\n    error:function(error){\n        console.log(error);\n    }\n});\n\n\/\/ index.js\n\nvar bodyParser = require(\x27body-parser\x27);  \/\/ bodyparser中间件\n\x3c!--app.use(bodyParser.json());--\x3e   \/\/ bodyParser.json是用来解析json数据格式的\n\x3c!--app.use(bodyParser.urlencoded({ extended: false })); --\x3e   \/\/ bodyParser.urlencoded则是用来解析我们通常的form表单提交的数据，也就是请求头中包含这样的信息： Content-Type: application\/x-www-form-urlencoded\nrouter.post(\x27\/userinfo-company\x27, function(req, res, next) {\n    var module = req.body.module;\n    var userid = req.body.userId;\n    request(\n        { \n            url: nodeApi \x2b \x27\/menu\/getInfo\x27,\n            method: \x27POST\x27,\n            form: {\n                module: module,\n                userId: userid\n            }\n        },\n        function(error,response,body) {\n            if( response.statusCode == 200 ) {\n                var tempArr = JSON.parse(body);\n            }\n        }\n    );\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ home.pug\x3c\/span\x3e\n$.ajax({\n    \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e:userPath\x2b\x3cspan class=\x22hljs-string\x22\x3e\x22\/userinfo-company\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e:{\n        \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3euserId\x3c\/span\x3e:userId\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x22POST\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3esuccess\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e)\x3c\/span\x3e{\n        alert(res);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(error);\n    }\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ index.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e bodyParser = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27body-parser\x27\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ bodyparser中间件\x3c\/span\x3e\n\x26lt;!--app.use(bodyParser.json());--\x26gt;   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ bodyParser.json是用来解析json数据格式的\x3c\/span\x3e\n\x26lt;!--app.use(bodyParser.urlencoded({ \x3cspan class=\x22hljs-attr\x22\x3eextended\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e })); --\x26gt;   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ bodyParser.urlencoded则是用来解析我们通常的form表单提交的数据，也就是请求头中包含这样的信息： Content-Type: application\/x-www-form-urlencoded\x3c\/span\x3e\nrouter.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/userinfo-company\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e = req.body.module;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e userid = req.body.userId;\n    request(\n        { \n            \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: nodeApi \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/menu\/getInfo\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27POST\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eform\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3euserId\x3c\/span\x3e: userid\n            }\n        },\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror,response,body\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e( response.statusCode == \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e ) {\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tempArr = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(body);\n            }\n        }\n    );\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e安全性问题后台无法读取到cookie，后面将请求菜单的方法放在了js中，然后在将菜单传到路由中，通过res.render进行动态渲染\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22router.post(\x27\/menu\x27, function(req, res, next) {\n    menuArr = JSON.parse(req.body.menuArr);\n    res.send(\x27OK\x27);\n    \n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3erouter.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/menu\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ereq, res, next\x3c\/span\x3e) \x3c\/span\x3e{\n    menuArr = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(req.body.menuArr);\n    res.send(\x3cspan class=\x22hljs-string\x22\x3e\x27OK\x27\x3c\/span\x3e);\n    \n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e后面发现可以传递cookie，但未在项目中使用\x3c\/p\x3e\n\x3cp\x3e默认情况下，cookies是禁用的。在defaults或options将jar设为true，使后续的请求都使用cookie.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var request = request.defaults({jar: true})\nrequest(\x27http:\/\/www.google.com\x27, function () {\n    request(\x27http:\/\/images.google.com\x27)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e request = request.defaults({jar: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e})\nrequest(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.google.com\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    request(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/images.google.com\x27\x3c\/span\x3e)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过创建request.jar()的新实例，可以使用定制的cookie，而不是request全局的cookie jar。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var j = request.jar()\nvar request = request.defaults({jar:j})\nrequest(\x27http:\/\/www.google.com\x27, function () {\n    request(\x27http:\/\/images.google.com\x27)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e j = request.jar()\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e request = request.defaults({jar:j})\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3erequest\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.google.com\x27\x3c\/span\x3e, function ()\x3c\/span\x3e\x3c\/span\x3e {\n    request(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/images.google.com\x27\x3c\/span\x3e)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var j = request.jar()\nvar cookie = request.cookie(\x27your_cookie_here\x27)\nj.setCookie(cookie, uri, function (err, cookie){})\nrequest({url: \x27http:\/\/www.google.com\x27, jar: j}, function () {\n    request(\x27http:\/\/images.google.com\x27)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = request.jar()\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cookie = request.cookie(\x3cspan class=\x22hljs-string\x22\x3e\x27your_cookie_here\x27\x3c\/span\x3e)\nj.setCookie(cookie, uri, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(err, cookie)\x3c\/span\x3e\x3c\/span\x3e{})\nrequest({url: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.google.com\x27\x3c\/span\x3e, jar: j}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    request(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/images.google.com\x27\x3c\/span\x3e)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意，setCookie至少需要三个参数，最后一个是回调函数。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e中间件\x3c\/h2\x3e\n\x3cp\x3eExpress 是一个自身功能极简，完全是由路由和中间件构成一个的web开发框架：从本质上来说，一个 Express 应用就是在调用各种中间件。中间件（Middleware）是一个函数，如果当前中间件没有终结请求-响应循环，则必须调用next()方法将控制权交给下一个中间件，否则请求就会挂起。\x3c\/p\x3e\n\x3cp\x3e中间件分为：应用级中间件，路由级中间件，错误处理中间件，内置中间件，第三方中间件。\x3c\/p\x3e\n\x3cp\x3e上面用的bodyParser是应用级的中间件，router是路由级的中间件，有关中间件更详细的内容参见express官网（\x3ca href=\x22http:\/\/www.expressjs.com.cn\/guide\/using-middleware.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexpress中间件\x3c\/a\x3e）\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e一些小的注意点\x3c\/h2\x3e\n\x3cp\x3e模板引擎前面的缩进要么是空格或者是tab，如果两者混用会报错。\x3c\/p\x3e\n\x3cp\x3eexpress更改路由中的内容的时候必须要重启本地服务器。只需要全局安装supervisor，然后命令行supervisor app.js就可以自动重启。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>express简单总结</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012875705">https://segmentfault.com/a/1190000012875705</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/d9a7smtos8/" target="_blank">https://alili.tech/archive/d9a7smtos8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>