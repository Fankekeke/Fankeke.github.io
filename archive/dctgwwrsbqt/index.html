<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="记一次 Weex 的 iPhone X 适配"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>记一次 Weex 的 iPhone X 适配 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/dctgwwrsbqt/",
				"appid": "1613049289050283", 
				"title": "记一次 Weex 的 iPhone X 适配 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-23T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/y3hmumwy0tk/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ieb727ehnvj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&text=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&text=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&is_video=false&description=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fdctgwwrsbqt%2f&title=%e8%ae%b0%e4%b8%80%e6%ac%a1%20Weex%20%e7%9a%84%20iPhone%20X%20%e9%80%82%e9%85%8d"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">记一次 Weex 的 iPhone X 适配</h1><div class="meta"><div class="postdate"><time datetime="2018-12-23" itemprop="datePublished">2018-12-23</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3eiPhone X 上市也一月有余了，「齐刘海」的设计给全世界的 IOS 和 M 站开发人员出了一道兼容题目，默认效果问题虽不严重，但是足以逼疯强迫症患者。幸得项目「空窗期」，实践下 iPhone X 的适配。还记得之前的一篇文章吗？\x3ca href=\x22https:\/\/github.com\/zwwill\/blog\/issues\/3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《【Weex】网易严选 App 感受 Weex 开发》\x3c\/a\x3e，此处将以此 demo 为基础做展开 Weex 适配。Native 和 H5 的适配此处就不再做赘述了。「专业 IOS 开发同学就当个笑话看看吧，反正你都会，此文是写给不会原生的朋友的」\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e默认的样子\x3c\/h2\x3e\n\x3cp\x3e如果不仔细看，还以为是 iPhone 7 的效果，这也是官方「故意为之」的。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336141?w=936\x26amp;h=858\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336141?w=936\x26amp;h=858\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如果你用惯了 iPhone X，无意识地打开了一个类似上图的 app，着实会有点难以接受。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e全屏操作\x3c\/h2\x3e\n\x3cp\x3e打开 iPhone X 的全屏模式其实很简单，只需要在 \x3cstrong\x3eXcode\x3c\/strong\x3e 里配置 iPhone X 的 \x3cstrong\x3eLaunchImage\x3c\/strong\x3e 即可，也可以直接改配置文件。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336142?w=960\x26amp;h=666\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336142?w=960\x26amp;h=666\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可能 Weex Toolkit 构建出来的 Platform 内不含这两个配置图片，不过没关系，右击选择「Show in Finder」，更改 「Contents.json」 配置文件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    \x26quot;images\x26quot; : [\n        {\n            \x26quot;extent\x26quot; : \x26quot;full-screen\x26quot;,\n            \x26quot;idiom\x26quot; : \x26quot;iphone\x26quot;,\n            \x26quot;subtype\x26quot; : \x26quot;2436h\x26quot;,\n            \x26quot;filename\x26quot; : \x26quot;Default2@3x-1.png\x26quot;,\n            \x26quot;minimum-system-version\x26quot; : \x26quot;11.0\x26quot;,\n            \x26quot;orientation\x26quot; : \x26quot;portrait\x26quot;,\n            \x26quot;scale\x26quot; : \x26quot;3x\x26quot;\n        },\n        {\n            \x26quot;extent\x26quot; : \x26quot;full-screen\x26quot;,\n            \x26quot;idiom\x26quot; : \x26quot;iphone\x26quot;,\n            \x26quot;subtype\x26quot; : \x26quot;2436h\x26quot;,\n            \x26quot;filename\x26quot; : \x26quot;Default2@3x.png\x26quot;,\n            \x26quot;minimum-system-version\x26quot; : \x26quot;11.0\x26quot;,\n            \x26quot;orientation\x26quot; : \x26quot;landscape\x26quot;,\n            \x26quot;scale\x26quot; : \x26quot;3x\x26quot;\n        },\n        {\n            \/\/ other conf\n        }\n    ],\n    \x26quot;info\x26quot; : {\n        \x26quot;version\x26quot; : 1,\n        \x26quot;author\x26quot; : \x26quot;xcode\x26quot;\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clojure\x22\x3e\x3ccode\x3e{\n    \x3cspan class=\x22hljs-string\x22\x3e\x22images\x22\x3c\/span\x3e : [\n        {\n            \x3cspan class=\x22hljs-string\x22\x3e\x22extent\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22full-screen\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22idiom\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22iphone\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22subtype\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x222436h\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22filename\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22Default2@3x-1.png\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22minimum-system-version\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x2211.0\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22orientation\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22portrait\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22scale\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x223x\x22\x3c\/span\x3e\n        },\n        {\n            \x3cspan class=\x22hljs-string\x22\x3e\x22extent\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22full-screen\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22idiom\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22iphone\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22subtype\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x222436h\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22filename\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22Default2@3x.png\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22minimum-system-version\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x2211.0\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22orientation\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22landscape\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x22scale\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x223x\x22\x3c\/span\x3e\n        },\n        {\n            \/\/ other conf\n        }\n    ],\n    \x3cspan class=\x22hljs-string\x22\x3e\x22info\x22\x3c\/span\x3e : {\n        \x3cspan class=\x22hljs-string\x22\x3e\x22version\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22author\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22xcode\x22\x3c\/span\x3e\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再添加两张 \x3ccode\x3e1125×2436\x3c\/code\x3e 的图片，记得名字需要和 \x3ccode\x3efilename\x3c\/code\x3e 匹配，然后重新构建，你就会发现，他全屏啦！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336143?w=936\x26amp;h=858\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336143?w=936\x26amp;h=858\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e同 native 适配有何不同\x3c\/h2\x3e\n\x3cp\x3eWeex 针对 iPhone X 的兼容直接发生在前端开发层面。\x3c\/p\x3e\n\x3cp\x3e「不会搞 Native 是前提」,有了这个前提，我们就只能自己动手了。\x3c\/p\x3e\n\x3cp\x3e动手的原则就是，「合理利用每寸空间，将内容展示在安全区内」。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e什么是安全区\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e安全区\x3c\/strong\x3e是苹果用来描述 iPhone X 的合理显示区域。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e手机纵向持握状态下，安全区是从屏幕最顶端往下 44 pt 开始计算的，要注意的是，它并不是和「齐刘海」完全齐平的，而是要再往下一点。「下巴」位置上，从下往上推 34 pt 以上的部分开始才被视为安全区。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336144?w=3360\x26amp;h=1890\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336144?w=3360\x26amp;h=1890\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e至于横向就不好描述了，直接上图吧。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336145?w=3360\x26amp;h=1890\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336145?w=3360\x26amp;h=1890\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e更多关于 iPhone X UI 适配的概念可以看看\x3ca href=\x22https:\/\/www.zhihu.com\/question\/65286874\/answer\/230195437\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这篇文章\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e方向\x3c\/h2\x3e\n\x3cp\x3e原则上，我们是将内容显示在安全区内，但一定是在「自然过度」的前提下。\x3c\/p\x3e\n\x3cp\x3e此 demo 没有横屏模式，所有，唯一需要适配的就是，竖屏模式下安全区外的界面遮挡处理。\x3c\/p\x3e\n\x3cp\x3e也就是上下两个部分内收处理。空出来的部分用同色色块填充。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336146?w=936\x26amp;h=858\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336146?w=936\x26amp;h=858\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e识别 iPhone X\x3c\/h2\x3e\n\x3cp\x3e既要适配 iPhone X 又不能影响其他系统，那就需要做「特殊识别处理」。\x3c\/p\x3e\n\x3cp\x3e怎么识别 iPhone X？\x3c\/p\x3e\n\x3cp\x3e幸运的是，Weex 官方有 API 提供平台消息，\x3ccode\x3eweex.config\x3c\/code\x3e，\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eweex.config\x3c\/p\x3e\n\x3cp\x3e该变量包含了当前 Weex 页面的所有环境信息，包括不仅限于：\x3c\/p\x3e\n\x3cp\x3ebundleUrl: JS bundle 的 URL，和页面的 URL 一致。\x3c\/p\x3e\n\x3cp\x3eenv: Object: 环境对象。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eweexVersion: string: Weex sdk 版本。\x3c\/li\x3e\n\x3cli\x3eappName: string: 应用名字。\x3c\/li\x3e\n\x3cli\x3eappVersion: string: 应用版本。\x3c\/li\x3e\n\x3cli\x3eplatform: string: 平台信息，是 iOS、Android 还是 Web。\x3c\/li\x3e\n\x3cli\x3eosName: string: iOS或者android，表示操作系统的名称.\x3c\/li\x3e\n\x3cli\x3eosVersion: string: 系统版本。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e\x3cem\x3edeviceModel: string: 设备型号 (仅原生应用)\x3c\/em\x3e\x3c\/strong\x3e 。\x3c\/li\x3e\n\x3cli\x3edeviceWidth: number: 设备宽度。Weex 默认以宽度为 750px 做适配渲染，要获得750px下的屏幕高度，可以通过height = 750\/deviceWidth*deviceHeight 公式获得，可以使用到 CSS 中，用来设置全屏尺寸\x3c\/li\x3e\n\x3cli\x3edeviceHeight: number: 设备高度。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3eiPhone X 环境下，\x3ccode\x3eweex.config.env.deviceModel\x3c\/code\x3e 将返回 iPhone X 的特有标识 \x3ccode\x3e\x27iPhone10,3 or iPhone10,6\x27\x3c\/code\x3e，「注意 Xcode 虚拟机拿到的未必是正确的标识」\x3c\/p\x3e\n\x3cp\x3eiPhone 5 - X 的标示\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22center\x22\x3eiPhone\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3emodels\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e5\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone5,1 和 iPhone5,2\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e5c\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone5,3 和 iPhone5,4\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e5s\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone6,1 和 iPhone6,2\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e6\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone7,2\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e6 Plus\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone7,1\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e6s\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone8,1\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e6s Plus\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone8,2\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eSE\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone8,4\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e7\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone9,1 和 iPhone9,3\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e7 Plus\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone9,2 和 iPhone9,4\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e8\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone10,1 和 iPhone10,4\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e8 Plus\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3eiPhone10,2 和 iPhone10,5\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3eipX\x3c\/td\x3e\n\x3ctd align=\x22center\x22\x3e\x3cstrong\x3eiPhone10,3 和 iPhone10,6\x3c\/strong\x3e\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e更多关于 iPhone 的信息可\x3ca href=\x22https:\/\/www.theiphonewiki.com\/wiki\/List_of_iPhones#iPhone_X\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e参考这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e或者根据 \x3ccode\x3e操作系统 \x26amp; 像素比 \x26amp; 屏幕尺寸\x3c\/code\x3e 组合判断是否是「刘海屏」。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e留白\x3c\/h2\x3e\n\x3cp\x3e在识别到 iPhone X 的标识后，做相应的留白即可，就这么简单，复杂度由你的项目决定，一般情况下，Weex 构建的项目还是很好适配的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e计算属性和 class 绑定\x3c\/h3\x3e\n\x3cp\x3e最基本的做法就是使用计算属性得到是否为 iPhone X 标记，在配合 class 绑定的「数组语法」可以轻松实现适配。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n    \x3cdiv :class=\x26quot;[\x27wrapper\x27, isipx?\x27w-ipx\x27:\x27\x27]\x26quot;\x3e\n    \x3c\/div\x3e\n\x3c\/template\x3e\n\x3cscript\x3e\n    export default {\n        data () {},\n        computed:{\n            isipx:function () {\n                return weex \x26amp;\x26amp; (weex.config.env.deviceModel === \x27iPhone10,3\x27 || weex.config.env.deviceModel === \x27iPhone10,6\x27);\n            }\n        },\n    }\n\x3c\/script\x3e\n\x3cstyle scoped\x3e\n    .wrapper{\n        \/* 正常样式 *\/\n    }\n    .w-ipx{\n        \/* iPhone X 样式 *\/\n    }\n\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22[\x27wrapper\x27, isipx?\x27w-ipx\x27:\x27\x27]\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n        data () {},\n        \x3cspan class=\x22hljs-attr\x22\x3ecomputed\x3c\/span\x3e:{\n            \x3cspan class=\x22hljs-attr\x22\x3eisipx\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e weex \x26amp;\x26amp; (weex.config.env.deviceModel === \x3cspan class=\x22hljs-string\x22\x3e\x27iPhone10,3\x27\x3c\/span\x3e || weex.config.env.deviceModel === \x3cspan class=\x22hljs-string\x22\x3e\x27iPhone10,6\x27\x3c\/span\x3e);\n            }\n        },\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3escoped\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.wrapper\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* 正常样式 *\/\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.w-ipx\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* iPhone X 样式 *\/\x3c\/span\x3e\n    }\n\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此处需要注意，在初始化时计算属性的作用域内未必每次都能拿到 weex 实例，所以必须做好容错。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3emixin 配合 router\x3c\/h3\x3e\n\x3cp\x3e如果是使用了 \x3ccode\x3evue-router\x3c\/code\x3e 可以使用 mixin 函数混入，非常方便。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n    \x3cdiv :class=\x26quot;[\x27wrapper\x27, isIpxFuc()?\x27w-ipx\x27:\x27\x27]\x26quot;\x3e\n    \x3c\/div\x3e\n\x3c\/template\x3e\n\x3cscript\x3e\n    export default {\n        data () {}\n    }\n\x3c\/script\x3e\n\x3cstyle scoped\x3e\n    .wrapper{\n        \/* 正常样式 *\/\n    }\n    .w-ipx{\n        \/* iPhone X 样式 *\/\n    }\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22[\x27wrapper\x27, isIpxFuc()?\x27w-ipx\x27:\x27\x27]\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n        data () {}\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3escoped\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.wrapper\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* 正常样式 *\/\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-selector-class\x22\x3e.w-ipx\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* iPhone X 样式 *\/\x3c\/span\x3e\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012336147?w=936\x26amp;h=858\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012336147?w=936\x26amp;h=858\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从最终效果图上看，还可以，至少满足了我的需求。只不过实现起来有些麻烦，Weex 是单页的结构，每个页面都需要单独做适配，如果从 Native 上做处理，就需要有一定的 Native 开发技能，加之良好的架构和协议设计。但是，Native 的处理远没有 UI 处理来的灵活。\x3c\/p\x3e\n\x3cp\x3e总的来讲，Native 层和 UI 层的方法各有利弊，具体实施还需结合项目。\x3c\/p\x3e\n\x3cp\x3e「没有最好的锤子，只有最适合钉子的锤子?」\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e转载请标明出处\x3cbr\x3e作者： \x3ca href=\x22https:\/\/github.com\/zwwill\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e木羽 zwwill\x3c\/a\x3e\x3cbr\x3e首发地址：\x3ca href=\x22https:\/\/github.com\/zwwill\/blog\/issues\/15\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/zwwill\/blog\/issues\/15\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>记一次 Weex 的 iPhone X 适配</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012336135">https://segmentfault.com/a/1190000012336135</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/dctgwwrsbqt/" target="_blank">https://alili.tech/archive/dctgwwrsbqt/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>