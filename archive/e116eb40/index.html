<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="离屏Canvas — 使用Web Worker提高你的Canvas运行速度"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>离屏Canvas — 使用Web Worker提高你的Canvas运行速度 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/e116eb40/",
				"appid": "1613049289050283", 
				"title": "离屏Canvas — 使用Web Worker提高你的Canvas运行速度 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-18T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/45bb437a/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/52a4b9a5/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&text=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&text=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&title=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&is_video=false&description=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&title=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&title=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&title=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe116eb40%2f&title=%e7%a6%bb%e5%b1%8fCanvas%20%e2%80%94%20%e4%bd%bf%e7%94%a8Web%20Worker%e6%8f%90%e9%ab%98%e4%bd%a0%e7%9a%84Canvas%e8%bf%90%e8%a1%8c%e9%80%9f%e5%ba%a6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">离屏Canvas — 使用Web Worker提高你的Canvas运行速度</h1><div class="meta"><div class="postdate"><time datetime="2018-10-18" itemprop="datePublished">2018-10-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3e现在因为有了离屏Canvas，你可以不用在你的主线程中绘制图像了！\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTML\/Element\/canvas\x22\x3eCanvas\x3c\/a\x3e 是一个非常受欢迎的表现方式，同时也是WebGL的入口。它能绘制图形，图片，展示动画，甚至是处理视频内容。它经常被用来在富媒体web应用中创建炫酷的用户界面或者是制作在线（web）游戏。\x3c\/p\x3e\n\x3cp\x3e它是非常灵活的，这意味着绘制在Canvas的内容可以被编程。举个🌰，JavaScript就提供了Canvas的系列API。这些给了Canvas非常好的灵活度。\x3c\/p\x3e\n\x3cp\x3e但同时，在一些现代化的web站点，脚本解析运行是实现流畅用户反馈的最大的问题之一。因为Canvas计算和渲染和用户操作响应都发生在同一个线程中，在动画中（有时候很耗时）的计算操作将会导致App卡顿，降低用户体验。\x3c\/p\x3e\n\x3cp\x3e幸运的是, \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/OffscreenCanvas\x22\x3eOffscreenCanvas\x3c\/a\x3e 离屏Canvas可以非常棒的解决这个麻烦！\x3c\/p\x3e\n\x3cp\x3e到目前为止，Canvas的绘制功能都与\x3ccode\x3e\x26lt;canvas\x26gt;\x3c\/code\x3e标签绑定在一起，这意味着Canvas API和DOM是耦合的。而OffscreenCanvas，正如它的名字一样，通过将Canvas移出屏幕来解耦了DOM和Canvas API。\x3c\/p\x3e\n\x3cp\x3e由于这种解耦，OffscreenCanvas的渲染与DOM完全分离了开来，并且比普通Canvas速度提升了一些，而这只是因为两者（Canvas和DOM）之间没有同步。但更重要的是，将两者分离后，Canvas将可以在Web Worker中使用，即使在Web Worker中没有DOM。这给Canvas提供了更多的可能性。\x3c\/p\x3e\n\x3ch2\x3e在Worker中使用OffscreenCanvas\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Web_Workers_API\/Using_web_workers\x22\x3eWorkers\x3c\/a\x3e 是一个Web版的线程——它允许你在幕后运行你的代码。将你的一部分代码放到Worker中可以给你的主线程更多的空闲时间，这可以提高你的用户体验度。就像其没有DOM一样，直到现在，在Worker中都没有Canvas API。\x3c\/p\x3e\n\x3cp\x3e而OffscreenCanvas并不依赖DOM，所以在Worker中Canvas API可以被某种方法来代替。下面是我在Worker中用OffscreenCanvas来计算渐变颜色的🌰：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs lsl\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ file: worker.js\x3c\/span\x3e\n\nfunction getGradientColor(percent) {\n    const canvas = new OffscreenCanvas(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n    const ctx = canvas.getContext(\x27\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3ed\x27);\n    const gradient = ctx.createLinearGradient(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n    gradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x27red\x27);\n    gradient.addColorStop(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x27blue\x27);\n    ctx.fillStyle = gradient;\n    ctx.fillRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, ctx.canvas.width, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n    const imgd = ctx.getImageData(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, ctx.canvas.width, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n    const colors = imgd.data.slice(percent * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, percent * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n    return rgba(${colors[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]}, ${colors[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]}, ${colors[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e]}, ${colors[]);\n}\n\ngetGradientColor(\x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ rgba(152, 0, 104, 255 )\x3c\/span\x3e\n\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3ch2\x3e不要阻塞主线程\x3c\/h2\x3e\n\x3cp\x3e当我们将大量的计算移到Worker中运行时，可以释放主线程上的资源，这很有意思。我们可以使用transferControlToOffscreen 方法将常规的Canvas映射到OffscreenCanvas实例上。之后所有应用于OffscreenCanvas的操作将自动呈现在在源Canvas上。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dart\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e offscreen = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3equerySelector\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e).transferControlToOffscreen();\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e worker = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Worker(\x3cspan class=\x22hljs-string\x22\x3e\x27myworkerurl.js\x27\x3c\/span\x3e);\nworker.postMessage({ canvas: offscreen }, [offscreen]);\n\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3eOffscreenCanvas 是 [可转移的](\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Transferable\x22\x3ehttps:\/\/developer.mozilla.org\/en-US\/docs\/Web\/API\/Transferable)\x3c\/a\x3e)。除了将其指定为传递信息中的字段之一以外，还需要将其作为postMessage（传递信息给Worker的方法）中的第二个参数传递出去，以便可以在Worker线程的context（上下文）中使用它。\x3c\/p\x3e\n\x3cp\x3e在下面的🌰中，当颜色主题发生变化时会发生“复杂的计算”，这个计算即使在高性能的台式机上也要花费几毫秒。而你可以选择在主线程或Worker上运行这段动画。在主线程下，当复杂计算开始运行时，你将无法与按钮交互 - 线程被阻塞掉了。而在Worker下，UI的响应并没有被影响。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/devnook.github.io\/OffscreenCanvasDemo\/keep-ui-responsive.html\x22\x3eDemo\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e它也是另一种解释方式：任务繁忙的主线程也不会影响在Worker上运行的动画。所以即使主线程非常繁忙，你也可以通过此功能来避免掉帧并保证流畅的动画：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/devnook.github.io\/OffscreenCanvasDemo\/index.html\x22\x3eDemo\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e上例展示了在普通Canvas的下，当主线程被添加繁忙任务时动画被阻塞了，而基于Worker的OffscreenCanvas播放却很流利。\x3c\/p\x3e\n\x3ch2\x3e与流行库一起使用\x3c\/h2\x3e\n\x3cp\x3e得益于OffscreenCanvas API一般情况下与常规Canvas元素的相API兼容，你可以很轻松地渐进地使用它，也可以使用社区里的一些优秀的图形处理的库\/框架。\x3c\/p\x3e\n\x3cp\x3e举个🌰，你可以对其进行特征检测，如果可用的话，可通过在渲染的构造函数中指定canvas的配置项，然后实现与Three.js一起使用的功能：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22hljs dart\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvasEl = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3equerySelector\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = (\x3cspan class=\x22hljs-string\x22\x3e\x27OffscreenCanvas\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e) ? canvasEl.transferControlToOffscreen() : canvasEl;\ncanvas.style = { width: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, height: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e }\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({ canvas: canvas });\n\n\n\x3c\/code\x3e\x3c\/pre\x3e\x3cp\x3e上例的问题是Three.js需要Canvas具有style.width和style.height属性。而OffscreenCanvas是与DOM完全分离的，没有这些属性。所以你需要自己提供这些属性，或者通过将其从three.js逻辑中删除或者自行编写这些值与初始Canvas尺寸相关联的逻辑。\x3c\/p\x3e\n\x3cp\x3e下面是一个运行基本Three.js动画的demo：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/devnook.github.io\/OffscreenCanvasDemo\/use-with-lib.html\x22\x3eDemo\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e但是请记住，有一些与DOM相关的API在Worker中并不容易获得，因此如果你想使用更高级的Three.js功能（比如纹理）的话，可能需要更多变通的方法。有关这方面已经开始尝试的一些想法，请查看 \x3ca href=\x22https:\/\/www.youtube.com\/watch?v=wkDd-x0EkFU\x22\x3eGoogle I\/O 2017的视频\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e此视频的示例中出现的commit()方法我们并不推荐。请改用worker.requestAnimationFrame。\x3c\/p\x3e\n\x3ch2\x3e结论\x3c\/h2\x3e\n\x3cp\x3e如果你对图像绘画使用得非常多，OffscreenCanvas可以有效的提高你APP的性能。它使得Worker可以处理canvas的渲染绘制，让你的APP更好地利用了多核系统。\x3c\/p\x3e\n\x3cp\x3eOffscreenCanvas在Chrome 69中已经不需要开启flag（实验性功能）就可以使用了。它也正在被 Firefox 实现。由于其API与普通canvas元素非常相似，所以你可以轻松地对其进行特征检测并循序渐进地使用它，而不会破坏现有的APP或库的运行逻辑。OffscreenCanvas在任何涉及到图形计算以及动画表现且与DOM关系并不密切（即依赖DOM API不多）的情况下，它都具有性能优势。\x3c\/p\x3e\n\x3ch2\x3e其它资源\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/html.spec.whatwg.org\/#the-offscreencanvas-interface\x22\x3eW3c spec\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22https:\/\/www.chromestatus.com\/feature\/4691191559880704\x22\x3echromestatus.com entry\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/offscreencanvas-speed-up-your-canvas-operations-with-a-web-worker">https://www.zcfy.cc/article/offscreencanvas-speed-up-your-canvas-operations-with-a-web-worker</a> 原文标题: 离屏Canvas — 使用Web Worker提高你的Canvas运行速度 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/e116eb40/" target="_blank">https://alili.tech/archive/e116eb40/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>