<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="深入理解WebRTC"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>深入理解WebRTC | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/e2bvcc790gb/",
				"appid": "1613049289050283", 
				"title": "深入理解WebRTC | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-30T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/2a9ostt2ahq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/1ckdle5ov3p/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&text=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&text=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&is_video=false&description=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fe2bvcc790gb%2f&title=%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3WebRTC"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">深入理解WebRTC</h1><div class="meta"><div class="postdate"><time datetime="2018-12-30" itemprop="datePublished">2018-12-30</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3eWeb Real-Time Communication（Web实时通信，WebRTC）由一组标准、协议和JavaScript API组成，用于实现浏览器之间（端到端）的音频、视频及数据共享。\x3c\/p\x3e\n\x3cp\x3eWebRTC使得实时通信变成一种标准功能，任何Web应用都无需借助第三方插件和专有软件，而是通过简单地JavaScript API即可完成。\x3c\/p\x3e\n\x3cp\x3e在WebRTC中，有三个主要的知识点，理解了这三个知识点，也就理解了WebRTC的底层实现原理。这三个知识点分别是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eMediaStream：获取音频和视频流\x3c\/li\x3e\n\x3cli\x3eRTCPeerConnection：音频和视频数据通信\x3c\/li\x3e\n\x3cli\x3eRTCDataChannel：任意应用数据通信\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eMediaStream\x3c\/h3\x3e\n\x3cp\x3e如上所说，MediaStream主要是用于获取音频和视频流。其JS实现也比较简单，代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27;\n\nnavigator.getUserMedia = navigator.getUserMedia ||\n    navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\nvar constraints = { \/\/ 音频、视频约束\n  audio: true, \/\/ 指定请求音频Track\n  video: {  \/\/ 指定请求视频Track\n      mandatory: { \/\/ 对视频Track的强制约束条件\n          width: {min: 320},\n          height: {min: 180}\n      },\n      optional: [ \/\/ 对视频Track的可选约束条件\n          {frameRate: 30}\n      ]\n  }\n};\n\nvar video = document.querySelector(\x27video\x27);\n\nfunction successCallback(stream) {\n  if (window.URL) {\n    video.src = window.URL.createObjectURL(stream);\n  } else {\n    video.src = stream;\n  }\n}\n\nfunction errorCallback(error) {\n  console.log(\x27navigator.getUserMedia error: \x27, error);\n}\n\nnavigator.getUserMedia(constraints, successCallback, errorCallback);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e;\n\nnavigator.getUserMedia = navigator.getUserMedia ||\n    navigator.webkitGetUserMedia || navigator.mozGetUserMedia;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e constraints = { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 音频、视频约束\x3c\/span\x3e\n  audio: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指定请求音频Track\x3c\/span\x3e\n  video: {  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指定请求视频Track\x3c\/span\x3e\n      mandatory: { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对视频Track的强制约束条件\x3c\/span\x3e\n          width: {\x3cspan class=\x22hljs-attr\x22\x3emin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e320\x3c\/span\x3e},\n          \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e: {\x3cspan class=\x22hljs-attr\x22\x3emin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e}\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3eoptional\x3c\/span\x3e: [ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对视频Track的可选约束条件\x3c\/span\x3e\n          {\x3cspan class=\x22hljs-attr\x22\x3eframeRate\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e}\n      ]\n  }\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e video = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e\x27video\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esuccessCallback\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estream\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.URL) {\n    video.src = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.URL.createObjectURL(stream);\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    video.src = stream;\n  }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eerrorCallback\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27navigator.getUserMedia error: \x27\x3c\/span\x3e, error);\n}\n\nnavigator.getUserMedia(constraints, successCallback, errorCallback);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在JS中，我们通过getUserMedia函数来处理音频和视频，该函数接收三个参数，分别是音视频的约束，成功的回调以及失败的回调。\x3c\/p\x3e\n\x3cp\x3e在底层，浏览器通过音频和视频引擎对捕获的原始音频和视频流加以处理，除了对画质和音质增强之外，还得保证音频和视频的同步。\x3c\/p\x3e\n\x3cp\x3e由于音频和视频是用来传输的，因此，发送方还要适应不断变化的带宽和客户端之间的网络延迟调整输出的比特率。\x3c\/p\x3e\n\x3cp\x3e对于接收方来说，则必须实时解码音频和视频流，并适应网络抖动和时延。其工作原理如下图所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0JO?w=990\x26amp;h=692\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0JO?w=990\x26amp;h=692\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如上成功回调的stream对象中携带者一个或多个同步的Track，如果你同时在约束中设置了音频和视频为true，则在stream中会携带有音频Track和视频Track，每个Track在时间上是同步的。\x3c\/p\x3e\n\x3cp\x3estream的输出可以被发送到一或多个目的地：本地的音频或视频元素、后期处理的JavaScript代理，或者远程另一端。如下图所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0Ki?w=874\x26amp;h=580\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0Ki?w=874\x26amp;h=580\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eRTCPeerConnection\x3c\/h3\x3e\n\x3cp\x3e在获取到音频和视频流后，下一步要做的就是将其发送出去。但这个跟client-server模式不同，这是client-client之间的传输，因此，在协议层面就必须解决NAT穿透问题，否则传输就无从谈起。\x3c\/p\x3e\n\x3cp\x3e另外，由于WebRTC主要是用来解决实时通信的问题，可靠性并不是很重要，因此，WebRTC使用UDP作为传输层协议：低延迟和及时性才是关键。\x3c\/p\x3e\n\x3cp\x3e在更深入讲解之前，我们先来思考一下，是不是只要打开音频、视频，然后发送UDP包就搞定了？\x3c\/p\x3e\n\x3cp\x3e当然没那么简单，除了要解决我们上面说的NAT穿透问题之外，还需要为每个流协商参数，对用户数据进行加密，并且需要实现拥塞和流量控制。\x3c\/p\x3e\n\x3cp\x3e我们来看一张WebRTC的分层协议图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0Kl?w=922\x26amp;h=432\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0Kl?w=922\x26amp;h=432\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eICE、STUN和TURN是通过UDP建立并维护端到端连接所必需的；SDP 是一种数据格式，用于端到端连接时协商参数；DTLS用于保障传输数据的安全；SCTP和SRTP属于应用层协议，用于在UDP之上提供不同流的多路复用、拥塞和流量控制，以及部分可靠的交付和其他服务。\x3c\/p\x3e\n\x3cp\x3eICE（Interactive Connectivity Establishment，交互连接建立）：由于端与端之间存在多层防火墙和NAT设备阻隔，因此我们需要一种机制来收集两端之间公共线路的IP，而ICE则是干这件事的好帮手。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eICE代理向操作系统查询本地IP地址\x3c\/li\x3e\n\x3cli\x3e如果配置了STUN服务器，ICE代理会查询外部STUN服务器，以取得本地端的公共IP和端口\x3c\/li\x3e\n\x3cli\x3e如果配置了TURN服务器，ICE则会将TURN服务器作为一个候选项，当端到端的连接失败，数据将通过指定的中间设备转发。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eWebRTC使用SDP（Session Description Protocol，会话描述协议）描述端到端连接的参数。\x3cbr\x3eSDP不包含媒体本身的任何信息，仅用于描述\x22会话状况\x22，表现为一系列的连接属性：要交换的媒体类型（音频、视频及应用数据）、网络传输协议、使用的编解码器及其设置、带宽及其他元数据。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0Kn?w=1552\x26amp;h=1210\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0Kn?w=1552\x26amp;h=1210\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0Kx?w=1478\x26amp;h=1098\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0Kx?w=1478\x26amp;h=1098\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eDTLS对TLS协议进行了扩展，为每条握手记录明确添加了偏移字段和序号，这样就满足了有序交付的条件，也能让大记录可以被分段成多个分组并在另一端再进行组装。\x3cbr\x3eDTLS握手记录严格按照TLS协议规定的顺序传输，顺序不对就报错。最后，DTLS还要处理丢包问题：两端都是用计时器，如果预定时间没有收到应答，就重传握手记录。\x3cbr\x3e为保证过程完整，两端都要生成自己签名的证书，然后按照常规的TLS握手协议走。但这样的证书不能用于验证身份，因为没有要验证的信任链。因此，在必要情况下，\x3cbr\x3e应用必须自己参与各端的身份验证：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e应用可以通过登录来验证用户\x3c\/li\x3e\n\x3cli\x3e每一端也可以在生成SDP提议\/应答时指定各自的\x22身份颁发机构\x22，等对端接收到SDP消息后，可以联系指定的身份颁发机构验证收到的证书\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eSRTP为通过IP网络交付音频和视频定义了标准的分组格式。SRTP本身并不对传输数据的及时性、可靠性或数据恢复提供任何保证机制，\x3cbr\x3e它只负责把数字化的音频采样和视频帧用一些元数据封装起来，以辅助接收方处理这些流。\x3c\/p\x3e\n\x3cp\x3eSCTP是一个传输层协议，直接在IP协议上运行，这一点跟TCP和UDP类似。不过在WebRTC这里，SCTP是在一个安全的DTLS信道中运行，而这个信道又运行在UDP之上。\x3cbr\x3e由于WebRTC支持通过DataChannel API在端与端之间传输任意应用数据，而DataChannel就依赖于SCTP。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0Kz?w=1224\x26amp;h=308\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0Kz?w=1224\x26amp;h=308\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e以上讲了这么多，终于到我们的主角RTCPeerConnection，RTCPeerConnection接口负责维护每一个端到端连接的完整生命周期：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eRTCPeerConnection管理穿越NAT的完整ICE工作流\x3c\/li\x3e\n\x3cli\x3eRTCPeerConnection发送自动（STUN）持久化信号\x3c\/li\x3e\n\x3cli\x3eRTCPeerConnection跟踪本地流\x3c\/li\x3e\n\x3cli\x3eRTCPeerConnection跟踪远程流\x3c\/li\x3e\n\x3cli\x3eRTCPeerConnection按需触发自动流协商\x3c\/li\x3e\n\x3cli\x3eRTCPeerConnection提供必要的API，以生成连接提议，接收应答，允许我们查询连接的当前状态，等等\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0KG?w=962\x26amp;h=826\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0KG?w=962\x26amp;h=826\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们来看一下示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var signalingChannel = new SignalingChannel();\nvar pc = null;\nvar ice = {\n    \x26quot;iceServers\x26quot;: [\n        { \x26quot;url\x26quot;: \x26quot;stun:stun.l.google.com:19302\x26quot; }, \/\/使用google公共测试服务器\n        { \x26quot;url\x26quot;: \x26quot;turn:user@turnserver.com\x26quot;, \x26quot;credential\x26quot;: \x26quot;pass\x26quot; } \/\/ 如有turn服务器，可在此配置\n    ]\n};\nsignalingChannel.onmessage = function (msg) {\n    if (msg.offer) { \/\/ 监听并处理通过发信通道交付的远程提议\n        pc = new RTCPeerConnection(ice);\n        pc.setRemoteDescription(msg.offer);\n        navigator.getUserMedia({ \x26quot;audio\x26quot;: true, \x26quot;video\x26quot;: true }, gotStream, logError);\n    } else if (msg.candidate) { \/\/ 注册远程ICE候选项以开始连接检查\n        pc.addIceCandidate(msg.candidate);\n    }\n}\nfunction gotStream(evt) {\n    pc.addstream(evt.stream);\n    var local_video = document.getElementById(\x27local_video\x27);\n    local_video.src = window.URL.createObjectURL(evt.stream);\n    pc.createAnswer(function (answer) { \/\/ 生成描述端连接的SDP应答并发送到对端\n        pc.setLocalDescription(answer);\n        signalingChannel.send(answer.sdp);\n    });\n}\npc.onicecandidate = function (evt) {\n    if (evt.candidate) {\n        signalingChannel.send(evt.candidate);\n    }\n}\npc.onaddstream = function (evt) {\n    var remote_video = document.getElementById(\x27remote_video\x27);\n    remote_video.src = window.URL.createObjectURL(evt.stream);\n}\nfunction logError() { ... }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e signalingChannel = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e SignalingChannel();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pc = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ice = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22iceServers\x22\x3c\/span\x3e: [\n        { \x3cspan class=\x22hljs-string\x22\x3e\x22url\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22stun:stun.l.google.com:19302\x22\x3c\/span\x3e }, \x3cspan class=\x22hljs-comment\x22\x3e\/\/使用google公共测试服务器\x3c\/span\x3e\n        { \x3cspan class=\x22hljs-string\x22\x3e\x22url\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22turn:user@turnserver.com\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22credential\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22pass\x22\x3c\/span\x3e } \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如有turn服务器，可在此配置\x3c\/span\x3e\n    ]\n};\nsignalingChannel.onmessage = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3emsg\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (msg.offer) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听并处理通过发信通道交付的远程提议\x3c\/span\x3e\n        pc = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e RTCPeerConnection(ice);\n        pc.setRemoteDescription(msg.offer);\n        navigator.getUserMedia({ \x3cspan class=\x22hljs-string\x22\x3e\x22audio\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22video\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }, gotStream, logError);\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (msg.candidate) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注册远程ICE候选项以开始连接检查\x3c\/span\x3e\n        pc.addIceCandidate(msg.candidate);\n    }\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egotStream\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n    pc.addstream(evt.stream);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e local_video = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27local_video\x27\x3c\/span\x3e);\n    local_video.src = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.URL.createObjectURL(evt.stream);\n    pc.createAnswer(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eanswer\x3c\/span\x3e) \x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成描述端连接的SDP应答并发送到对端\x3c\/span\x3e\n        pc.setLocalDescription(answer);\n        signalingChannel.send(answer.sdp);\n    });\n}\npc.onicecandidate = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (evt.candidate) {\n        signalingChannel.send(evt.candidate);\n    }\n}\npc.onaddstream = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e remote_video = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27remote_video\x27\x3c\/span\x3e);\n    remote_video.src = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.URL.createObjectURL(evt.stream);\n}\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elogError\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{ ... }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eDataChannel\x3c\/h3\x3e\n\x3cp\x3eDataChannel支持端到端的任意应用数据交换，就像WebSocket一样，但是是端到端的。\x3cbr\x3e建立RTCPeerConnection连接之后，两端可以打开一或多个信道交换文本或二进制数据。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVV0KJ?w=1156\x26amp;h=388\x22 src=\x22https:\/\/static.alili.tech\/img\/bVV0KJ?w=1156\x26amp;h=388\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其示例demo如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ice = {\n    \x27iceServers\x27: [\n        {\x27url\x27: \x27stun:stun.l.google.com:19302\x27},   \/\/ google公共测试服务器\n        \/\/ {\x26quot;url\x26quot;: \x26quot;turn:user@turnservera.com\x26quot;, \x26quot;credential\x26quot;: \x26quot;pass\x26quot;}\n    ]\n};\n\n\/\/ var signalingChannel =  new SignalingChannel();\n\nvar pc = new RTCPeerConnection(ice);\n\nnavigator.getUserMedia({\x27audio\x27: true}, gotStream, logError);\n\nfunction gotStream(stram) {\n    pc.addStream(stram);\n\n    pc.createOffer().then(function(offer){\n        pc.setLocalDescription(offer);\n    });\n}\n\npc.onicecandidate = function(evt) {\n    \/\/ console.log(evt);\n    if(evt.target.iceGatheringState == \x27complete\x27) {\n        pc.createOffer().then(function(offer){\n            \/\/ console.log(offer.sdp);\n            \/\/ signalingChannel.send(sdp);\n        })\n    }\n}\n\nfunction handleChannel(chan) {\n    console.log(chan);\n    chan.onerror = function(err) {}\n    chan.onclose = function() {}\n    chan.onopen = function(evt) {\n        console.log(\x27established\x27);\n        chan.send(\x27DataChannel connection established.\x27);\n    }\n\n    chan.onmessage = function(msg){\n        \/\/ do something\n    }\n}\n\n\n\/\/ 以合适的交付语义初始化新的DataChannel\nvar dc = pc.createDataChannel(\x27namedChannel\x27, {reliable: false});\n\nhandleChannel(dc);\npc.onDataChannel = handleChannel;\n\n\nfunction logError(){\n    console.log(\x27error\x27);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ice = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27iceServers\x27\x3c\/span\x3e: [\n        {\x3cspan class=\x22hljs-string\x22\x3e\x27url\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27stun:stun.l.google.com:19302\x27\x3c\/span\x3e},   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ google公共测试服务器\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ {\x22url\x22: \x22turn:user@turnservera.com\x22, \x22credential\x22: \x22pass\x22}\x3c\/span\x3e\n    ]\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ var signalingChannel =  new SignalingChannel();\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pc = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e RTCPeerConnection(ice);\n\nnavigator.getUserMedia({\x3cspan class=\x22hljs-string\x22\x3e\x27audio\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}, gotStream, logError);\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egotStream\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estram\x3c\/span\x3e) \x3c\/span\x3e{\n    pc.addStream(stram);\n\n    pc.createOffer().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoffer\x3c\/span\x3e)\x3c\/span\x3e{\n        pc.setLocalDescription(offer);\n    });\n}\n\npc.onicecandidate = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(evt);\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(evt.target.iceGatheringState == \x3cspan class=\x22hljs-string\x22\x3e\x27complete\x27\x3c\/span\x3e) {\n        pc.createOffer().then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoffer\x3c\/span\x3e)\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ console.log(offer.sdp);\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ signalingChannel.send(sdp);\x3c\/span\x3e\n        })\n    }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ehandleChannel\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echan\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chan);\n    chan.onerror = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{}\n    chan.onclose = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n    chan.onopen = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27established\x27\x3c\/span\x3e);\n        chan.send(\x3cspan class=\x22hljs-string\x22\x3e\x27DataChannel connection established.\x27\x3c\/span\x3e);\n    }\n\n    chan.onmessage = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emsg\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ do something\x3c\/span\x3e\n    }\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 以合适的交付语义初始化新的DataChannel\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dc = pc.createDataChannel(\x3cspan class=\x22hljs-string\x22\x3e\x27namedChannel\x27\x3c\/span\x3e, {\x3cspan class=\x22hljs-attr\x22\x3ereliable\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e});\n\nhandleChannel(dc);\npc.onDataChannel = handleChannel;\n\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3elogError\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>深入理解WebRTC</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011403597">https://segmentfault.com/a/1190000011403597</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/e2bvcc790gb/" target="_blank">https://alili.tech/archive/e2bvcc790gb/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>