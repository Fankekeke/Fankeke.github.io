<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React 高阶组件浅析"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React 高阶组件浅析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ejcjhjmgt8/",
				"appid": "1613049289050283", 
				"title": "React 高阶组件浅析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-03T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/4ndfffsgc6j/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ylawigkj9bo/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&text=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&text=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&title=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&is_video=false&description=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&title=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&title=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&title=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fejcjhjmgt8%2f&title=React%20%e9%ab%98%e9%98%b6%e7%bb%84%e4%bb%b6%e6%b5%85%e6%9e%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React 高阶组件浅析</h1><div class="meta"><div class="postdate"><time datetime="2019-01-03" itemprop="datePublished">2019-01-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e背景\x3c\/h2\x3e\n\x3cp\x3e高阶组件的这种写法的诞生来自于社区的实践，目的是解决一些交叉问题(Cross-Cutting Concerns)。而最早时候 \x3ccode\x3eReact\x3c\/code\x3e 官方给出的解决方案是使用 \x3ccode\x3emixin\x3c\/code\x3e 。而 React 也在官网中写道：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eWe previously recommended mixins as a way to handle cross-cutting concerns. We\x27ve since realized that mixins create more trouble than they are worth.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e官方明显也意识到了使用\x3ccode\x3emixins\x3c\/code\x3e技术来解决此类问题所带来的困扰远高于其本身的价值。\x3ca href=\x22https:\/\/react.bootcss.com\/react\/blog\/2016\/07\/13\/mixins-considered-harmful.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e更多资料\x3c\/a\x3e可以查阅官方的说明。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e高阶函数的定义\x3c\/h2\x3e\n\x3cp\x3e说到高阶组件，就不得不先简单的介绍一下高阶函数。下面展示一个最简单的高阶函数\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const add = (x,y,f) =\x3e f(x)\x2bf(y)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e add = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ex,y,f\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e f(x)\x2bf(y)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们调用\x3ccode\x3eadd(-5, 6, Math.abs)\x3c\/code\x3e时，参数 x，y 和f 分别接收 -5，6 和 \x3ccode\x3eMath.abs\x3c\/code\x3e，根据函数定义，我们可以推导计算过程为：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22x ==\x3e -5\ny ==\x3e 6\nf ==\x3e abs\nf(x) \x2b f(y) ==\x3e Math.abs(-5) \x2b Math.abs(6) ==\x3e 11\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3ex\x3c\/span\x3e ==\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3ey\x3c\/span\x3e ==\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3ef\x3c\/span\x3e ==\x26gt;\x3c\/span\x3e abs\nf(x) \x2b f(y) =\x3cspan class=\x22hljs-function\x22\x3e=\x26gt;\x3c\/span\x3e Math.abs(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e) \x2b Math.abs(\x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e) =\x3cspan class=\x22hljs-function\x22\x3e=\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用代码验证一下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22add(-5, 6, Math.abs); \/\/11\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eadd(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs); \x3cspan class=\x22hljs-comment\x22\x3e\/\/11\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e高阶在维基百科的定义如下\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e高阶函数是至少满足下列一个条件的函数：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e接受一个或多个函数作为输入\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e输出一个函数\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e高阶组件的定义\x3c\/h2\x3e\n\x3cp\x3e那么，什么是高阶组件呢？类比高阶函数的定义，\x3cstrong\x3e高阶组件就是接受一个组件作为参数并返回一个新组件的函数\x3c\/strong\x3e。这里需要注意\x3cstrong\x3e高阶组件是一个函数\x3c\/strong\x3e，并不是组件，这一点一定要注意。\x3cbr\x3e同时这里强调一点高阶组件本身并不是 \x3ccode\x3eReact\x3c\/code\x3e API。它只是一种模式，这种模式是由 \x3ccode\x3eReact\x3c\/code\x3e 自身的组合性质必然产生的。\x3cbr\x3e更加通俗的讲，高阶组件通过包裹（wrapped）被传入的React组件，经过一系列处理，最终返回一个相对增强（enhanced）的 React 组件，供其他组件调用。\x3c\/p\x3e\n\x3cp\x3e\x26lt;!-- more --\x26gt;\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e一个简单的高阶组件\x3c\/h2\x3e\n\x3cp\x3e下面我们来实现一个简单的高阶组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default WrappedComponent =\x3e class HOC extends Component {\n  render() {\n    return (\n      \x3cfieldset\x3e\n        \x3clegend\x3e默认标题\x3c\/legend\x3e\n        \x3cWrappedComponent {...this.props} \/\x3e\n      \x3c\/fieldset\x3e\n    );\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e WrappedComponent =\x26gt; \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e默认标题\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eWrappedComponent\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...this.props\x3c\/span\x3e} \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n};\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在其他组件中，我们引用这个高阶组件来强化它\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class Demo extends Component {\n  render() {\n    return (\n      \x3cdiv\x3e\n        我是一个普通组件\n      \x3c\/div\x3e\n    );\n  }\n}\n\nconst WithHeaderDemo = withHeader(Demo);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eDemo\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        我是一个普通组件\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e WithHeaderDemo = withHeader(Demo);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面我们来看一下\x3ccode\x3eReact DOM Tree\x3c\/code\x3e，调用了高阶组件之后，发生了什么：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010845415\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010845415\x22 alt=\x22图片\x22 title=\x22图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，\x3ccode\x3eDemo\x3c\/code\x3e 被 \x3ccode\x3eHOC\x3c\/code\x3e 包裹(wrapped)了之后添加了一个标题默认标题。但是同样会发现，如果调用了多个 \x3ccode\x3eHOC\x3c\/code\x3e 之后，我们会看到很多的\x3ccode\x3eHOC\x3c\/code\x3e，所以应\x3cbr\x3e该做一些优化，也就是在高阶组件包裹(wrapped)以后，应该保留原有的名称。\x3c\/p\x3e\n\x3cp\x3e我们改写一下上述的高阶组件代码，增加一个 \x3ccode\x3egetDisplayName\x3c\/code\x3e 函数，之后为\x3ccode\x3eDemo\x3c\/code\x3e 添加一个静态属性 \x3ccode\x3edisplayName\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const getDisplayName = component =\x3e component.displayName || component.name || \x27Component\x27;\n\nexport default WrappedComponent =\x3e class HOC extends Component {\n  static displayName = `HOC(${getDisplayName(WrappedComponent)})`;\n\n  render() {\n    return (\n      \x3cfieldset\x3e\n        \x3clegend\x3e默认标题\x3c\/legend\x3e\n        \x3cWrappedComponent {...this.props} \/\x3e\n      \x3c\/fieldset\x3e\n    );\n  }\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getDisplayName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecomponent\x3c\/span\x3e =\x26gt;\x3c\/span\x3e component.displayName || component.name || \x3cspan class=\x22hljs-string\x22\x3e\x27Component\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e WrappedComponent =\x26gt; \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`HOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e默认标题\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eWrappedComponent\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...this.props\x3c\/span\x3e} \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n};\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再次观察\x3ccode\x3eReact DOM Tree\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010845416\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010845416\x22 alt=\x22图片\x22 title=\x22图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，该组件原本的名称已经显示在\x3ccode\x3eReact DOM Tree\x3c\/code\x3e上了。\x3cbr\x3e这个HOC 的功能是为原有的组件添加一个标题，也就是说所有需要添加标题的组件都可以通过调用此 HOC 进行包裹(wrapped) 后实现此功能。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e为高阶组件传参\x3c\/h2\x3e\n\x3cp\x3e现在，我们的 \x3ccode\x3eHOC\x3c\/code\x3e 已经可以为其他任意组件提供标题了，但是我们还希望可以修改标题中的字段。由于我们的高阶组件是一个函数，所以可以为其添加一个参数\x3ccode\x3etitle\x3c\/code\x3e。下面我们对\x3ccode\x3eHOC\x3c\/code\x3e进行改写：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default (WrappedComponent, title = \x27默认标题\x27) =\x3e class HOC extends Component {\n  static displayName = `HOC(${getDisplayName(WrappedComponent)})`;\n\n  render() {\n    return (\n      \x3cfieldset\x3e\n        \x3clegend\x3e{title}\x3c\/legend\x3e\n        \x3cWrappedComponent {...this.props} \/\x3e\n      \x3c\/fieldset\x3e\n    );\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (WrappedComponent, title = \x3cspan class=\x22hljs-string\x22\x3e\x27默认标题\x27\x3c\/span\x3e) =\x26gt; \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`HOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e{title}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eWrappedComponent\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...this.props\x3c\/span\x3e} \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n};\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e之后我们进行调用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const WithHeaderDemo = withHeader(Demo,\x27高阶组件添加标题\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e WithHeaderDemo = withHeader(Demo,\x3cspan class=\x22hljs-string\x22\x3e\x27高阶组件添加标题\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此时观察\x3ccode\x3eReact DOM Tree\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010845417\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010845417\x22 alt=\x22图片\x22 title=\x22图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到，标题已经正确的进行了设置。\x3c\/p\x3e\n\x3cp\x3e当然我们也可以对其进行柯里化：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default (title = \x27默认标题\x27) =\x3e WrappedComponent =\x3e class HOC extends Component {\n  static displayName = `HOC(${getDisplayName(WrappedComponent)})`;\n\n  render() {\n    return (\n      \x3cfieldset\x3e\n        \x3clegend\x3e{title}\x3c\/legend\x3e\n        \x3cWrappedComponent {...this.props} \/\x3e\n      \x3c\/fieldset\x3e\n    );\n  }\n};\n\nconst WithHeaderDemo = withHeader(\x27高阶组件添加标题\x27)(Demo);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (title = \x3cspan class=\x22hljs-string\x22\x3e\x27默认标题\x27\x3c\/span\x3e) =\x26gt; \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eWrappedComponent\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`HOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e{title}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eWrappedComponent\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...this.props\x3c\/span\x3e} \/\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n};\n\nconst WithHeaderDemo = withHeader(\x27高阶组件添加标题\x27)(Demo);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e常见的HOC 实现方式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e基于属性代理（Props Proxy）的方式\x3c\/h3\x3e\n\x3cp\x3e属性代理是最常见的高阶组件的使用方式，上面所说的高阶组件就是这种方式。\x3cbr\x3e它通过做一些操作，将被包裹组件的\x3ccode\x3eprops\x3c\/code\x3e和新生成的\x3ccode\x3eprops\x3c\/code\x3e一起传递给此组件，这称之为属性代理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default function GenerateId(WrappedComponent) {\n  return class HOC extends Component {\n    static displayName = `PropsBorkerHOC(${getDisplayName(WrappedComponent)})`;\n\n    render() {\n      const newProps = {\n        id: Math.random().toString(36).substring(2).toUpperCase()\n      };\n\n      return createElement(WrappedComponent, {\n        ...this.props,\n        ...newProps\n      });\n    }\n  };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eGenerateId\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eWrappedComponent\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`PropsBorkerHOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n    render() {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e newProps = {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random().toString(\x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e).substring(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e).toUpperCase()\n      };\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e createElement(WrappedComponent, {\n        ...this.props,\n        ...newProps\n      });\n    }\n  };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e调用\x3ccode\x3eGenerateId\x3c\/code\x3e:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const PropsBorkerDemo = GenerateId(Demo);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e PropsBorkerDemo = GenerateId(Demo);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e之后我们观察\x3ccode\x3eReact Dom Tree\x3c\/code\x3e：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010845418\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010845418\x22 alt=\x22图片\x22 title=\x22图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可以看到我们通过 \x3ccode\x3eGenerateId\x3c\/code\x3e 顺利的为 \x3ccode\x3eDemo\x3c\/code\x3e 添加了 \x3ccode\x3eid\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e基于反向继承（Inheritance Inversion）的方式\x3c\/h3\x3e\n\x3cp\x3e首先来看一个简单的反向继承的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default function (WrappedComponent) {\n  return class Enhancer extends WrappedComponent {\n    static displayName = `InheritanceHOC(${getDisplayName(WrappedComponent)})`;\n\n    componentWillMount() {\n      \/\/ 可以方便地得到state，做一些更深入的修改。\n      this.setState({\n        innerText: \x27我被Inheritance修改了值\x27\n      });\n    }\n\n    render() {\n      return super.render();\n    }\n  };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eWrappedComponent\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eEnhancer\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eWrappedComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`InheritanceHOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n    componentWillMount() {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以方便地得到state，做一些更深入的修改。\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n        \x3cspan class=\x22hljs-attr\x22\x3einnerText\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27我被Inheritance修改了值\x27\x3c\/span\x3e\n      });\n    }\n\n    render() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e.render();\n    }\n  };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如你所见返回的高阶组件类（\x3ccode\x3eEnhancer\x3c\/code\x3e）继承了 \x3ccode\x3eWrappedComponent\x3c\/code\x3e。而之所以被称为反向继承是因为 \x3ccode\x3eWrappedComponent\x3c\/code\x3e 被动地被 \x3ccode\x3eEnhancer\x3c\/code\x3e \x3cbr\x3e继承，而不是 \x3ccode\x3eWrappedComponent\x3c\/code\x3e 去继承 \x3ccode\x3eEnhancer\x3c\/code\x3e。通过这种方式他们之间的关系倒转了。\x3c\/p\x3e\n\x3cp\x3e反向继承允许高阶组件通过 \x3ccode\x3ethis\x3c\/code\x3e 关键词获取 \x3ccode\x3eWrappedComponent\x3c\/code\x3e，意味着它可以获取到 \x3ccode\x3estate\x3c\/code\x3e，\x3ccode\x3eprops\x3c\/code\x3e，组件生命周期（Component Lifecycle）钩子，以及渲染方法（render）。\x3ca href=\x22http:\/\/www.jianshu.com\/p\/0aae7d4d9bc1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入了解\x3c\/a\x3e可以阅读__@Wenliang__文章中\x3ccode\x3eInheritance Inversion（II）\x3c\/code\x3e这一节的内容。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e使用高阶组件遇到的问题\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e静态方法丢失\x3c\/h3\x3e\n\x3cp\x3e当使用高阶组件包装组件，原始组件被容器组件包裹，也就意味着新组件会丢失原始组件的所有静态方法。\x3cbr\x3e下面为 Demo 添加一个静态方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Demo.getDisplayName = () =\x3e \x27Demo\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eDemo.getDisplayName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Demo\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e之后调用 \x3ccode\x3eHOC\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 使用高阶组件\nconst WithHeaderDemo = HOC(Demo);\n\n\/\/ 调用后的组件是没有 `getDisplayName` 方法的\ntypeof WithHeaderDemo.getDisplayName === \x27undefined\x27 \/\/ true\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用高阶组件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e WithHeaderDemo = HOC(Demo);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 调用后的组件是没有 `getDisplayName` 方法的\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e WithHeaderDemo.getDisplayName === \x3cspan class=\x22hljs-string\x22\x3e\x27undefined\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ true\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e解决这个问题最简单(Yǘ Chǚn)的方法就是，将原始组件的所有静态方法全部拷贝给新组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default (title = \x27默认标题\x27) =\x3e (WrappedComponent) =\x3e {\n  class HOC extends Component {\n    static displayName = `HOC(${getDisplayName(WrappedComponent)})`;\n\n    render() {\n      return (\n        \x3cfieldset\x3e\n          \x3clegend\x3e{title}\x3c\/legend\x3e\n          \x3cWrappedComponent {...this.props} \/\x3e\n        \x3c\/fieldset\x3e\n      );\n    }\n  }\n\n HOC.getDisplayName = WrappedComponent.getDisplayName;\n\n  return HOC;\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (title = \x3cspan class=\x22hljs-string\x22\x3e\x27默认标题\x27\x3c\/span\x3e) =\x26gt; \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eWrappedComponent\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`HOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n    render() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n        \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e{title}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eWrappedComponent\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...this.props\x3c\/span\x3e} \/\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      );\n    }\n  }\n\n HOC.getDisplayName = WrappedComponent.getDisplayName;\n\n  return HOC;\n};\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样做，就需要你清楚的知道都有哪些静态方法需要拷贝的。或者你也可是使用\x3ca href=\x22https:\/\/github.com\/mridgway\/hoist-non-react-statics\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehoist-non-react-statics\x3c\/a\x3e来帮你自动处理，它会自动拷贝所有非React的静态方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import hoistNonReactStatic from \x27hoist-non-react-statics\x27;\n\nexport default (title = \x27默认标题\x27) =\x3e (WrappedComponent) =\x3e {\n  class HOC extends Component {\n    static displayName = `HOC(${getDisplayName(WrappedComponent)})`;\n\n    render() {\n      return (\n        \x3cfieldset\x3e\n          \x3clegend\x3e{title}\x3c\/legend\x3e\n          \x3cWrappedComponent {...this.props} \/\x3e\n        \x3c\/fieldset\x3e\n      );\n    }\n  }\n\n  \/\/ 拷贝静态方法\n  hoistNonReactStatic(HOC, WrappedComponent);\n\n  return HOC;\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e hoistNonReactStatic \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27hoist-non-react-statics\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e (title = \x3cspan class=\x22hljs-string\x22\x3e\x27默认标题\x27\x3c\/span\x3e) =\x26gt; \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eWrappedComponent\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHOC\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e displayName = \x3cspan class=\x22hljs-string\x22\x3e`HOC(\x3cspan class=\x22hljs-subst\x22\x3e${getDisplayName(WrappedComponent)}\x3c\/span\x3e)`\x3c\/span\x3e;\n\n    render() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n        \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e{title}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3elegend\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eWrappedComponent\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...this.props\x3c\/span\x3e} \/\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3efieldset\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      );\n    }\n  }\n\n  \/\/ 拷贝静态方法\n  hoistNonReactStatic(HOC, WrappedComponent);\n\n  return HOC;\n};\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3eRefs属性不能传递\x3c\/h3\x3e\n\x3cp\x3e一般来说，高阶组件可以传递所有的props属性给包裹的组件，但是不能传递 \x3ccode\x3erefs\x3c\/code\x3e 引用。因为并不是像 \x3ccode\x3ekey\x3c\/code\x3e 一样，\x3ccode\x3erefs\x3c\/code\x3e 是一个伪属性，\x3ccode\x3eReact\x3c\/code\x3e 对它进行了特殊处理。\x3cbr\x3e如果你向一个由高级组件创建的组件的元素添加 \x3ccode\x3eref\x3c\/code\x3e 应用，那么 \x3ccode\x3eref\x3c\/code\x3e 指向的是最外层容器组件实例的，而不是包裹组件。\x3cbr\x3e但有的时候，我们不可避免要使用 \x3ccode\x3erefs\x3c\/code\x3e，官方给出的解决方案是：\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e传递一个ref回调函数属性，也就是给ref应用一个不同的名字\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e同时还强调道：\x3cstrong\x3eReact在任何时候都不建议使用 ref应用\x3c\/strong\x3e\x3cbr\x3e改写 \x3ccode\x3eDemo\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Demo extends Component {\n  static propTypes = {\n    getRef: PropTypes.func\n  }\n\n  static getDisplayName() {\n    return \x27Demo\x27;\n  }\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      innerText: \x27我是一个普通组件\x27\n    };\n  }\n\n  render() {\n    const { getRef, ...props } = this.props;\n    return (\n      \x3cdiv ref={getRef} {...props}\x3e\n        {this.state.innerText}\n      \x3c\/div\x3e\n    );\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eDemo\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e propTypes = {\n    \x3cspan class=\x22hljs-attr\x22\x3egetRef\x3c\/span\x3e: PropTypes.func\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e getDisplayName() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27Demo\x27\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n      \x3cspan class=\x22hljs-attr\x22\x3einnerText\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27我是一个普通组件\x27\x3c\/span\x3e\n    };\n  }\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { getRef, ...props } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{getRef}\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3e...props\x3c\/span\x3e}\x26gt;\x3c\/span\x3e\n        {this.state.innerText}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e之后我们进行调用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cWithHeaderDemo\n  getRef={(ref) =\x3e {\n    \/\/ 该回调函数被作为常规的props属性传递\n    this.headerDemo = ref;\n  \x22}}\x22\n\/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;WithHeaderDemo\n  getRef={(ref) =\x26gt; {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 该回调函数被作为常规的props属性传递\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.headerDemo = ref;\n  \x22}}\x22\n\/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e虽然这并不是最完美的解决方案，但是\x3ccode\x3eReact\x3c\/code\x3e官方说他们正在探索解决这个问题的方法，能够让我们安心的使用高阶组件而不必关注这个问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e这篇文章只是简单的介绍了高阶组件的两种最常见的使用方式：\x3ccode\x3e属性代理\x3c\/code\x3e和\x3ccode\x3e反向继承\x3c\/code\x3e。以及高阶组件的常见问题。希望通过本文的阅读使你对高阶组件有一个基本的认识。\x3cbr\x3e写本文所产生的代码在\x3ca href=\x22https:\/\/github.com\/hiyangguo\/study-hoc\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3estudy-hoc\x3c\/a\x3e中。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e本文作者：\x3ca href=\x22https:\/\/github.com\/hiyangguo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGodfery\x3c\/a\x3e\x3cbr\x3e本文同步发表于：\x3ca href=\x22http:\/\/blog.hypers.io\/2017\/08\/24\/react-hoc-simple-analysis\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHYPERS 前端博客\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e参考文章:\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ca href=\x22https:\/\/facebook.github.io\/react\/docs\/higher-order-components.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHigher-Order Components\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/mp.weixin.qq.com\/s\/AdP-3oA9ofv9hQfDc2r7KA\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入浅出React高阶组件\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/59818a485188255694568ff2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e带着三个问题一起深入浅出React高阶组件\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/t.cn\/RKWUqko\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e阮一峰 - 高阶函数\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.jianshu.com\/p\/0aae7d4d9bc1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入理解高阶组件\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React 高阶组件浅析</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010845410">https://segmentfault.com/a/1190000010845410</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ejcjhjmgt8/" target="_blank">https://alili.tech/archive/ejcjhjmgt8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>