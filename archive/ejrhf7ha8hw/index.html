<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Electron应用使用electron-builder配合electron-updater实现自动更新"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Electron应用使用electron-builder配合electron-updater实现自动更新 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ejrhf7ha8hw/",
				"appid": "1613049289050283", 
				"title": "Electron应用使用electron-builder配合electron-updater实现自动更新 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-17T02:30:06"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/2jn5bi4s0jc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/65rhejkqvpq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&text=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&text=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&title=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&is_video=false&description=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&title=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&title=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&title=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fejrhf7ha8hw%2f&title=Electron%e5%ba%94%e7%94%a8%e4%bd%bf%e7%94%a8electron-builder%e9%85%8d%e5%90%88electron-updater%e5%ae%9e%e7%8e%b0%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Electron应用使用electron-builder配合electron-updater实现自动更新</h1><div class="meta"><div class="postdate"><time datetime="2018-12-17" itemprop="datePublished">2018-12-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e开发客户端一定要做的就是自动更新模块，否则每次版本升级都是一个头疼的事。\x3cbr\x3e下面是Electron应用使用electron-builder配合electron-updater实现自动更新的解决方案。\x3c\/p\x3e\n\x3cp\x3e1.安装 electron-updater 包模块\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install electron-updater --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e electron-updater \x3cspan class=\x22hljs-comment\x22\x3e--save\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.配置package.json文件\x3cbr\x3e2.1 为了打包时生成latest.yml文件，需要在 build 参数中添加 publish 配置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \x26quot;build\x26quot;: {\n    \x26quot;productName\x26quot;: \x26quot;***\x26quot;,\/\/隐藏软件名称\n    \x26quot;appId\x26quot;: \x26quot;**\x26quot;,\/\/隐藏appid\n    \x26quot;directories\x26quot;: {\n      \x26quot;output\x26quot;: \x26quot;build\x26quot;\n    },\n    \x26quot;publish\x26quot;: [\n      {\n        \x26quot;provider\x26quot;: \x26quot;generic\x26quot;,\n        \x26quot;url\x26quot;: \x26quot;http:\/\/**.**.**.**:3002\/download\/\x26quot;,\/\/隐藏版本服务器地址\n      }\n    ],\n    \x26quot;files\x26quot;: [\n      \x26quot;dist\/electron\/**\/*\x26quot;\n    ],\n    \x26quot;dmg\x26quot;: {\n      \x26quot;contents\x26quot;: [\n        {\n          \x26quot;x\x26quot;: 410,\n          \x26quot;y\x26quot;: 150,\n          \x26quot;type\x26quot;: \x26quot;link\x26quot;,\n          \x26quot;path\x26quot;: \x26quot;\/Applications\x26quot;\n        },\n        {\n          \x26quot;x\x26quot;: 130,\n          \x26quot;y\x26quot;: 150,\n          \x26quot;type\x26quot;: \x26quot;file\x26quot;\n        }\n      ]\n    },\n    \x26quot;mac\x26quot;: {\n      \x26quot;icon\x26quot;: \x26quot;build\/icons\/icon.icns\x26quot;,\n      \x26quot;artifactName\x26quot;: \x26quot;${productName}_setup_${version}.${ext}\x26quot;\n    },\n    \x26quot;win\x26quot;: {\n      \x26quot;icon\x26quot;: \x26quot;build\/icons\/icon.ico\x26quot;,\n      \x26quot;artifactName\x26quot;: \x26quot;${productName}_setup_${version}.${ext}\x26quot;\n    },\n    \x26quot;linux\x26quot;: {\n      \x26quot;icon\x26quot;: \x26quot;build\/icons\x26quot;,\n      \x26quot;artifactName\x26quot;: \x26quot;${productName}_setup_${version}.${ext}\x26quot;\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22productName\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22***\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/隐藏软件名称\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22appId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22**\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/隐藏appid\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e\x22directories\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22output\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22publish\x22\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-string\x22\x3e\x22provider\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22generic\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22url\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/**.**.**.**:3002\/download\/\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/隐藏版本服务器地址\x3c\/span\x3e\n      }\n    ],\n    \x3cspan class=\x22hljs-string\x22\x3e\x22files\x22\x3c\/span\x3e: [\n      \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/electron\/**\/*\x22\x3c\/span\x3e\n    ],\n    \x3cspan class=\x22hljs-string\x22\x3e\x22dmg\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22contents\x22\x3c\/span\x3e: [\n        {\n          \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e410\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e150\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-string\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22link\x22\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-string\x22\x3e\x22path\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\/Applications\x22\x3c\/span\x3e\n        },\n        {\n          \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e130\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-string\x22\x3e\x22y\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e150\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-string\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22file\x22\x3c\/span\x3e\n        }\n      ]\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22mac\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22icon\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22build\/icons\/icon.icns\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22artifactName\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-subst\x22\x3e${productName}\x3c\/span\x3e_setup_\x3cspan class=\x22hljs-subst\x22\x3e${version}\x3c\/span\x3e.\x3cspan class=\x22hljs-subst\x22\x3e${ext}\x3c\/span\x3e\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22win\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22icon\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22build\/icons\/icon.ico\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22artifactName\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-subst\x22\x3e${productName}\x3c\/span\x3e_setup_\x3cspan class=\x22hljs-subst\x22\x3e${version}\x3c\/span\x3e.\x3cspan class=\x22hljs-subst\x22\x3e${ext}\x3c\/span\x3e\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22linux\x22\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22icon\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22build\/icons\x22\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x22artifactName\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x3cspan class=\x22hljs-subst\x22\x3e${productName}\x3c\/span\x3e_setup_\x3cspan class=\x22hljs-subst\x22\x3e${version}\x3c\/span\x3e.\x3cspan class=\x22hljs-subst\x22\x3e${ext}\x3c\/span\x3e\x22\x3c\/span\x3e\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e\x3cem\x3e注意：配置了publish才会生成latest.yml文件，用于自动更新的配置信息；latest.yml文件是打包过程生成的文件，为避免自动更新出错，打包后禁止对latest.yml文件做任何修改。如果文件有误，必须重新打包获取新的latest.yml文件！！！\x3c\/em\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e2.2 增加nsis配置（可省略）\x3cbr\x3ensis配置不会影响自动更新功能，但是可以优化用户体验，比如是否允许用户自定义安装位置、是否添加桌面快捷方式、安装完成是否立即启动、配置安装图标等。nsis 配置也是添加在 build 参数中。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;nsis\x26quot;: {\n      \x26quot;oneClick\x26quot;: true,\n      \x26quot;perMachine\x26quot;: true,\n      \x26quot;allowElevation\x26quot;: true,\n      \x26quot;allowToChangeInstallationDirectory\x26quot;: true,\n      \x26quot;createDesktopShortcut\x26quot;: true,\n      \x26quot;runAfterFinish\x26quot;: true,\n      \x26quot;installerIcon\x26quot;: \x26quot;.\/build\/icon.ico\x26quot;,\n      \x26quot;uninstallerIcon\x26quot;: \x26quot;.\/build\/icon.ico\x26quot;\n    },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-attr\x22\x3e\x22nsis\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22oneClick\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22perMachine\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22allowElevation\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22allowToChangeInstallationDirectory\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22createDesktopShortcut\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22runAfterFinish\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22installerIcon\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22.\/build\/icon.ico\x22\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e      \x22uninstallerIcon\x22:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22.\/build\/icon.ico\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.配置主进程main.js文件（或主进程main中的index.js文件），引入 electron-updater 文件，添加自动更新检测和事件监听：\x3cbr\x3e\x3cstrong\x3e注意：一定要是主进程main.js文件（或主进程main中的index.js文件），否则会报错。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { app, BrowserWindow, ipcMain } from \x27electron\x27\n\n\/\/ 注意这个autoUpdater不是electron中的autoUpdater\nimport { autoUpdater } from \x26quot;electron-updater\x26quot;\nimport {uploadUrl} from \x26quot;..\/renderer\/config\/config\x26quot;;\n\n\/\/ 检测更新，在你想要检查更新的时候执行，renderer事件触发后的操作自行编写\nfunction updateHandle() {\n  let message = {\n    error: \x27检查更新出错\x27,\n    checking: \x27正在检查更新……\x27,\n    updateAva: \x27检测到新版本，正在下载……\x27,\n    updateNotAva: \x27现在使用的就是最新版本，不用更新\x27,\n  };\n  const os = require(\x27os\x27);\n\n  autoUpdater.setFeedURL(uploadUrl);\n  autoUpdater.on(\x27error\x27, function (error) {\n    sendUpdateMessage(message.error)\n  });\n  autoUpdater.on(\x27checking-for-update\x27, function () {\n    sendUpdateMessage(message.checking)\n  });\n  autoUpdater.on(\x27update-available\x27, function (info) {\n    sendUpdateMessage(message.updateAva)\n  });\n  autoUpdater.on(\x27update-not-available\x27, function (info) {\n    sendUpdateMessage(message.updateNotAva)\n  });\n\n  \/\/ 更新下载进度事件\n  autoUpdater.on(\x27download-progress\x27, function (progressObj) {\n    mainWindow.webContents.send(\x27downloadProgress\x27, progressObj)\n  })\n  autoUpdater.on(\x27update-downloaded\x27, function (event, releaseNotes, releaseName, releaseDate, updateUrl, quitAndUpdate) {\n\n    ipcMain.on(\x27isUpdateNow\x27, (e, arg) =\x26amp;gt; {\n      console.log(arguments);\n      console.log(\x26quot;开始更新\x26quot;);\n      \/\/some code here to handle event\n      autoUpdater.quitAndInstall();\n    });\n\n    mainWindow.webContents.send(\x27isUpdateNow\x27)\n  });\n\n  ipcMain.on(\x26quot;checkForUpdate\x26quot;,()=\x26amp;gt;{\n      \/\/执行自动更新检查\n      autoUpdater.checkForUpdates();\n  })\n}\n\n\/\/ 通过main进程发送事件给renderer进程，提示更新信息\nfunction sendUpdateMessage(text) {\n  mainWindow.webContents.send(\x27message\x27, text)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { app, BrowserWindow, ipcMain } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意这个autoUpdater不是electron中的autoUpdater\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { autoUpdater } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22electron-updater\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {uploadUrl} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22..\/renderer\/config\/config\x22\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检测更新，在你想要检查更新的时候执行，renderer事件触发后的操作自行编写\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eupdateHandle\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e message = {\n    \x3cspan class=\x22hljs-attr\x22\x3eerror\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27检查更新出错\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3echecking\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27正在检查更新……\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eupdateAva\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27检测到新版本，正在下载……\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eupdateNotAva\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27现在使用的就是最新版本，不用更新\x27\x3c\/span\x3e,\n  };\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e os = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27os\x27\x3c\/span\x3e);\n\n  autoUpdater.setFeedURL(uploadUrl);\n  autoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e) \x3c\/span\x3e{\n    sendUpdateMessage(message.error)\n  });\n  autoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27checking-for-update\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    sendUpdateMessage(message.checking)\n  });\n  autoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27update-available\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3einfo\x3c\/span\x3e) \x3c\/span\x3e{\n    sendUpdateMessage(message.updateAva)\n  });\n  autoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27update-not-available\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3einfo\x3c\/span\x3e) \x3c\/span\x3e{\n    sendUpdateMessage(message.updateNotAva)\n  });\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更新下载进度事件\x3c\/span\x3e\n  autoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27download-progress\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eprogressObj\x3c\/span\x3e) \x3c\/span\x3e{\n    mainWindow.webContents.send(\x3cspan class=\x22hljs-string\x22\x3e\x27downloadProgress\x27\x3c\/span\x3e, progressObj)\n  })\n  autoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27update-downloaded\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent, releaseNotes, releaseName, releaseDate, updateUrl, quitAndUpdate\x3c\/span\x3e) \x3c\/span\x3e{\n\n    ipcMain.on(\x3cspan class=\x22hljs-string\x22\x3e\x27isUpdateNow\x27\x3c\/span\x3e, (e, arg) =\x26amp;gt; {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22开始更新\x22\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/some code here to handle event\x3c\/span\x3e\n      autoUpdater.quitAndInstall();\n    });\n\n    mainWindow.webContents.send(\x3cspan class=\x22hljs-string\x22\x3e\x27isUpdateNow\x27\x3c\/span\x3e)\n  });\n\n  ipcMain.on(\x3cspan class=\x22hljs-string\x22\x3e\x22checkForUpdate\x22\x3c\/span\x3e,()=\x26amp;gt;{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/执行自动更新检查\x3c\/span\x3e\n      autoUpdater.checkForUpdates();\n  })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过main进程发送事件给renderer进程，提示更新信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esendUpdateMessage\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etext\x3c\/span\x3e) \x3c\/span\x3e{\n  mainWindow.webContents.send(\x3cspan class=\x22hljs-string\x22\x3e\x27message\x27\x3c\/span\x3e, text)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注：在添加自动更新检测和事件监听之后，在主进程createWindow中需要调用一下updateHandle()。如下图所示：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV8CQ2?w=712\x26amp;h=756\x22 src=\x22https:\/\/static.alili.tech\/img\/bV8CQ2?w=712\x26amp;h=756\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e4.在视图（View）层中触发自动更新，并添加自动更新事件的监听。\x3cbr\x3e触发自动更新：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ipcRenderer.send(\x26quot;checkForUpdate\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs abnf\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eipcRenderer.send(\x3cspan class=\x22hljs-string\x22\x3e\x22checkForUpdate\x22\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e监听自动更新事件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  import { ipcRenderer } from \x26quot;electron\x26quot;;\n  ipcRenderer.on(\x26quot;message\x26quot;, (event, text) =\x26amp;gt; {\n            console.log(arguments);\n            this.tips = text;\n        });\n        \/\/注意：“downloadProgress”事件可能存在无法触发的问题，只需要限制一下下载网速就好了\n        ipcRenderer.on(\x26quot;downloadProgress\x26quot;, (event, progressObj)=\x26amp;gt; {\n            console.log(progressObj);\n            this.downloadPercent = progressObj.percent || 0;\n        });\n        ipcRenderer.on(\x26quot;isUpdateNow\x26quot;, () =\x26amp;gt; {\n            ipcRenderer.send(\x26quot;isUpdateNow\x26quot;);\n        });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { ipcRenderer } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22electron\x22\x3c\/span\x3e;\n  ipcRenderer.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22message\x22\x3c\/span\x3e, (event, text) =\x26amp;gt; {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(arguments);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.tips = text;\n        });\n        \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e注意：“downloadProgress”事件可能存在无法触发的问题，只需要限制一下下载网速就好了\n        ipcRenderer.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22downloadProgress\x22\x3c\/span\x3e, (event, progressObj)=\x26amp;gt; {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(progressObj);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.downloadPercent = progressObj.percent || \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        });\n        ipcRenderer.\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22isUpdateNow\x22\x3c\/span\x3e, () =\x26amp;gt; {\n            ipcRenderer.send(\x3cspan class=\x22hljs-string\x22\x3e\x22isUpdateNow\x22\x3c\/span\x3e);\n        });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e注意：子进程中“downloadProgress”事件可能出现无法触发的问题，那是因为下载速度很快，就会跳过“downloadProgress”事件；只需要限制一下本地下载网速就好了！\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e为避免多次切换页面造成监听的滥用，切换页面前必须移除监听事件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/组件销毁前移除所有事件监听channel\n        ipcRenderer.removeAll([\x26quot;message\x26quot;, \x26quot;downloadProgress\x26quot;, \x26quot;isUpdateNow\x26quot;]);\/\/remove只能移除单个事件，单独封装removeAll移除所有事件\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/组件销毁前移除所有事件监听channel\x3c\/span\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3eipcRenderer\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.removeAll\x3c\/span\x3e([\x3cspan class=\x22hljs-string\x22\x3e\x22message\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22downloadProgress\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22isUpdateNow\x22\x3c\/span\x3e]);\x3cspan class=\x22hljs-comment\x22\x3e\/\/remove只能移除单个事件，单独封装removeAll移除所有事件\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e5.项目打包\x3cbr\x3e执行electron-builder进行打包，windows下会生成安装包exe和latest.yml等文件，执行exe安装软件；Mac下会生成安装包dmg、zip和latest-mac.yml文件，执行dmg安装软件。\x3cbr\x3e\x3cstrong\x3e注意：mac上不签名也可以打包成功，但是涉及到自动更新等需要身份认证的功能则不能用，也不能发布到mac app store中。所以说经过代码签名的MAC包才是完整的包。我们这里一定是经过代码签名的完整包！切记！\x3c\/strong\x3e\x3cbr\x3e具体打包流程请参考：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000012899824\x22\x3eElectron 桌面应用打包（npm run build）简述(windows \x2b mac)\x3c\/a\x3e\x3cbr\x3eMAC打包中报Error: Could not get code signature for running application错误可参考：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000012902525\x22 target=\x22_blank\x22\x3eElectron 打包Mac安装包代码签名问题解决方案\x3c\/a\x3e\x3cbr\x3ewindows打包生成文件：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2jdI?w=1185\x26amp;h=653\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2jdI?w=1185\x26amp;h=653\x22 alt=\x22TIM%E6%88%AA%E5%9B%BE20180117165614.png\x22 title=\x22TIM%E6%88%AA%E5%9B%BE20180117165614.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eMac打包生成文件：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2jdP?w=1542\x26amp;h=874\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2jdP?w=1542\x26amp;h=874\x22 alt=\x22TIM%E6%88%AA%E5%9B%BE20180117165401.png\x22 title=\x22TIM%E6%88%AA%E5%9B%BE20180117165401.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e6.软件升级版本，修改package.json中的version属性，例如：改为 version: “1.1.0” (之前为1.0.0)；\x3cbr\x3e7.再次执行electron-builder打包，Windows下将新版本latest.yml文件和exe文件（MAC下将latest-mac.yml,zip和dmg文件）放到package.json中build -\x26gt; publish中的url对应的地址下；\x3cbr\x3e8.在应用中触发更新检查，electron-updater自动会通过对应url下的yml文件检查更新；\x3c\/p\x3e\n\x3cp\x3ewindows上自动更新示例：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2qb8?w=866\x26amp;h=598\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2qb8?w=866\x26amp;h=598\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2qen?w=868\x26amp;h=620\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2qen?w=868\x26amp;h=620\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3emac上自动更新示例：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2qck?w=800\x26amp;h=548\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2qck?w=800\x26amp;h=548\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2qcr?w=800\x26amp;h=548\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2qcr?w=800\x26amp;h=548\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e附：项目目录层次：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV45Rc?w=279\x26amp;h=909\x22 src=\x22https:\/\/static.alili.tech\/img\/bV45Rc?w=279\x26amp;h=909\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3cem\x3e如果这篇文章对你的工作或者学习有帮助的话，请收藏或点个赞。如果对其中有什么不明白的或者报错，可以留言或者加\x3ca href=\x22https:\/\/jq.qq.com\/?_wv=1027\x26amp;k=5OOFkES\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eQQ群140455228\x3c\/a\x3e交流\x3c\/em\x3e\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e注意：请支持原创，本文谢绝转载，确有需要可链接到本文。本文链接地址：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000012904543\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Electron应用使用electron-builder配合electron-updater实现自动更新</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012904543">https://segmentfault.com/a/1190000012904543</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ejrhf7ha8hw/" target="_blank">https://alili.tech/archive/ejrhf7ha8hw/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>