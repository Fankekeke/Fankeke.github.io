<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="动态Axios配置"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>动态Axios配置 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/eqi20eb84jn/",
				"appid": "1613049289050283", 
				"title": "动态Axios配置 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-18T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/33ah9rwnzfw/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/mudh5dadbeg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&text=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&text=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&title=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&is_video=false&description=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&title=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&title=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&title=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2feqi20eb84jn%2f&title=%e5%8a%a8%e6%80%81Axios%e9%85%8d%e7%bd%ae"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">动态Axios配置</h1><div class="meta"><div class="postdate"><time datetime="2018-12-18" itemprop="datePublished">2018-12-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e推荐使用Vue-cli工具来创建和管理项目，就算刚开始不熟悉，用着用着便可知晓其中的奥妙。前一段时间官方所推荐的数据请求插件还是\x3ccode\x3eVue-resource\x3c\/code\x3e，但现在已经变了，变成了\x3ccode\x3eAxios\x3c\/code\x3e,不用知道为什么变了，反正这个用起来比那个好一些，用就是了，下面是一些封装\x3ccode\x3eaxios\x3c\/code\x3e请求的一些经验，不对之处，还望多多指教！\x3c\/blockquote\x3e\n\x3ch4\x3e01\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e创建文件\x3c\/strong\x3e，Vue项目初始化之后，在\x3ccode\x3esrc\x3c\/code\x3e目录下再创建一个\x3ccode\x3eutil\x3c\/code\x3e工具文件夹，一般就是用来存放一些封装的函数方法，现在让我们在\x3ccode\x3eutil\x3c\/code\x3e文件目录下创建一个\x3ccode\x3ehttp.js\x3c\/code\x3e文件，封装\x3ccode\x3eaxios\x3c\/code\x3e方法。\x3c\/p\x3e\n\x3ch4\x3e02\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e直接上代码（常规版）\x3c\/strong\x3e，代码中有详细的注释\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import axios from \x27axios\x27 \/\/引用axios\nimport {Promise} from \x27es6-promise\x27   \/\/引入Promise\n\n\/\/ axios 配置\naxios.defaults.timeout = 5000;  \/\/设置超时时间\naxios.defaults.baseURL = \x27http:\/\/localhost:4000\/api\/v1\/\x27; \/\/这是调用数据接口\n\n\/\/ http request 拦截器（所有发送的请求都要从这儿过一次），通过这个，我们就可以把token传到后台，我这里是使用sessionStorage来存储token等权限信息和用户信息，若要使用cookie可以自己封装一个函数并import便可使用\naxios.interceptors.request.use(\n    config =\x3e {\n        const token = sessionStorage.getItem(\x26quot;token\x26quot;); \/\/获取存储在本地的token\n        config.data = JSON.stringify(config.data);\n        config.headers = {\n            \x27Content-Type\x27:\x27application\/json\x27 \/\/设置跨域头部,虽然很多浏览器默认都是使用json传数据，但咱要考虑IE浏览器。\n        };\n        if (token) {\n            config.headers.Authorization = \x26quot;Token \x26quot; \x2b token; \/\/携带权限参数\n        }\n        return config;\n    },\n    err =\x3e {\n        return Promise.reject(err);\n    }\n);\n\n\n\/\/ http response 拦截器（所有接收到的请求都要从这儿过一次）\naxios.interceptors.response.use(\n    response =\x3e {\n\/\/response.status===401是我和后台约定的权限丢失或者权限不够返回的状态码，这个可以自己和后台约定，约定返回某个自定义字段也是可以的\n        if(response.status == 401) {\n            router.push({ \/\/push后面是一个参数对象，可以携带很多参数，具体可以去vue-router上查看，例如query字段表示携带的参数\n                path: \x27\/login\x27 \n            })\n        }\n        return response;\n    },\n    error =\x3e {\n        return Promise.reject(error.response.data)\n    });\n\nexport default axios;\n\n\/**\n * fetch 请求方法\n * @param url\n * @param params\n * @returns {Promise}\n *\/\nexport function fetch(url, params = {}) {\n\n    return new Promise((resolve, reject) =\x3e {\n        axios.get(url, {\n            params: params\n        })\n        .then(response =\x3e {\n            resolve(response.data);\n        })\n        .catch(err =\x3e {\n            reject(err)\n        })\n    })\n}\n\n\/**\n * post 请求方法\n * @param url\n * @param data\n * @returns {Promise}\n *\/\nexport function post(url, data = {}) {\n    return new Promise((resolve, reject) =\x3e {\n        axios.post(url, data)\n            .then(response =\x3e {\n                resolve(response.data);\n            }, err =\x3e {\n                reject(err);\n            })\n    })\n}\n\n\/**\n * patch 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\nexport function patch(url, data = {}) {\n    return new Promise((resolve, reject) =\x3e {\n        axios.patch(url, data)\n            .then(response =\x3e {\n                resolve(response.data);\n            }, err =\x3e {\n                reject(err);\n            })\n    })\n}\n\n\/**\n * put 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\nexport function put(url, data = {}) {\n    return new Promise((resolve, reject) =\x3e {\n        axios.put(url, data)\n            .then(response =\x3e {\n                resolve(response.data);\n            }, err =\x3e {\n                reject(err);\n            })\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/引用axios\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {\x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27es6-promise\x27\x3c\/span\x3e   \x3cspan class=\x22hljs-comment\x22\x3e\/\/引入Promise\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ axios 配置\x3c\/span\x3e\naxios.defaults.timeout = \x3cspan class=\x22hljs-number\x22\x3e5000\x3c\/span\x3e;  \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置超时时间\x3c\/span\x3e\naxios.defaults.baseURL = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:4000\/api\/v1\/\x27\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/这是调用数据接口\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ http request 拦截器（所有发送的请求都要从这儿过一次），通过这个，我们就可以把token传到后台，我这里是使用sessionStorage来存储token等权限信息和用户信息，若要使用cookie可以自己封装一个函数并import便可使用\x3c\/span\x3e\naxios.interceptors.request.use(\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3econfig\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e token = sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x22token\x22\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取存储在本地的token\x3c\/span\x3e\n        config.data = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(config.data);\n        config.headers = {\n            \x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置跨域头部,虽然很多浏览器默认都是使用json传数据，但咱要考虑IE浏览器。\x3c\/span\x3e\n        };\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (token) {\n            config.headers.Authorization = \x3cspan class=\x22hljs-string\x22\x3e\x22Token \x22\x3c\/span\x3e \x2b token; \x3cspan class=\x22hljs-comment\x22\x3e\/\/携带权限参数\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e config;\n    },\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(err);\n    }\n);\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ http response 拦截器（所有接收到的请求都要从这儿过一次）\x3c\/span\x3e\naxios.interceptors.response.use(\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/response.status===401是我和后台约定的权限丢失或者权限不够返回的状态码，这个可以自己和后台约定，约定返回某个自定义字段也是可以的\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(response.status == \x3cspan class=\x22hljs-number\x22\x3e401\x3c\/span\x3e) {\n            router.push({ \x3cspan class=\x22hljs-comment\x22\x3e\/\/push后面是一个参数对象，可以携带很多参数，具体可以去vue-router上查看，例如query字段表示携带的参数\x3c\/span\x3e\n                path: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e \n            })\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e response;\n    },\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(error.response.data)\n    });\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e axios;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * fetch 请求方法\n * @param url\n * @param params\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efetch\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, params = {}\x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.get(url, {\n            params: params\n        })\n        .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            resolve(response.data);\n        })\n        .catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            reject(err)\n        })\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * post 请求方法\n * @param url\n * @param data\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epost\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, data = {}\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.post(url, data)\n            .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                resolve(response.data);\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                reject(err);\n            })\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * patch 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epatch\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, data = {}\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.patch(url, data)\n            .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                resolve(response.data);\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                reject(err);\n            })\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * put 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eput\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, data = {}\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.put(url, data)\n            .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                resolve(response.data);\n            }, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                reject(err);\n            })\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e03\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e（动态版）\x3c\/strong\x3e，\x3ccode\x3eaxios\x3c\/code\x3e的拦截器不是必要的，不是每个项目都需要，而且\x3ccode\x3eheaders\x3c\/code\x3e里面的\x3ccode\x3eContent-Type\x3c\/code\x3e和\x3ccode\x3eAuthorization\x3c\/code\x3e不止一种，这时就需要使用另一种方法。\x3c\/p\x3e\n\x3cblockquote\x3eutil\/http.js\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import axios from \x27axios\x27 \/\/引用axios\nimport {Promise} from \x27es6-promise\x27   \/\/引入Promise\n\n\/\/ axios 配置和拦截器都不用了，这里我使用了一个动态配置数据请求地址，在App.vue中，代码在下面，这个也不是必须的。\n\n\n\/\/^_^下面都设置一个默认的头部，使用的时候可以传入数据覆盖^_^,例如使用fetch(GET)方法时，没有请求数据，但是请求头有变化，则应写成 fetch(\x26quot;地址\x26quot;, {}, {\x26quot;这里写头部的内容\x26quot;})   记住没数据用一个空对象占位置\n\/**\n * fetch 请求方法\n * @param url\n * @param params\n * @returns {Promise}\n *\/\nexport function fetch(url, params = {}, headers = {\n    \x27Content-Type\x27: \x27application\/json\x27, \/\/设置跨域头部\n    \x26quot;Authorization\x26quot;: \x27JWT \x27 \x2b sessionStorage.getItem(\x26quot;authToken\x26quot;)\n}) {\n\n    return new Promise((resolve, reject) =\x3e {\n        axios.get(url, {\n            params: params,\n            headers: headers\n        })\n        .then(response =\x3e {\n            resolve(response.data);\n        })\n        .catch(err =\x3e {\n            reject(err.response)\n        })\n    })\n}\n\n\/**\n * post 请求方法\n * @param url\n * @param data\n * @returns {Promise}\n *\/\nexport function post(url, data = {}, config = {\n    \x26quot;headers\x26quot;: {\n        \x27Content-Type\x27: \x27application\/json\x27, \/\/设置跨域头部\n        \x26quot;Authorization\x26quot;: \x27JWT \x27 \x2b sessionStorage.getItem(\x26quot;authToken\x26quot;)\n    }\n}) {\n    return new Promise((resolve, reject) =\x3e {\n        axios.post(url, data, config)\n            .then(response =\x3e {\n                resolve(response.data);\n            }, err =\x3e {\n                reject(err.response);\n            })\n    })\n}\n\n\/**\n * patch 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\nexport function patch(url, data = {}, config = {\n    \x26quot;headers\x26quot;: {\n        \x27Content-Type\x27: \x27application\/json\x27, \/\/设置跨域头部\n        \x26quot;Authorization\x26quot;: \x27JWT \x27 \x2b sessionStorage.getItem(\x26quot;authToken\x26quot;)\n    }\n}) {\n    return new Promise((resolve, reject) =\x3e {\n        axios.patch(url, data, config)\n            .then(response =\x3e {\n                resolve(response.data);\n            }, err =\x3e {\n                reject(err.response);\n            })\n    })\n}\n\n\/**\n * put 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\nexport function put(url, data = {}, config = {\n    \x26quot;headers\x26quot;: {\n        \x27Content-Type\x27: \x27application\/json\x27, \/\/设置跨域头部\n        \x26quot;Authorization\x26quot;: \x27JWT \x27 \x2b sessionStorage.getItem(\x26quot;authToken\x26quot;)\n    }\n}) {\n    return new Promise((resolve, reject) =\x3e {\n        axios.put(url, data, config)\n            .then(response =\x3e {\n                resolve(response.data);\n            }, err =\x3e {\n                reject(err.response);\n            })\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/引用axios\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {\x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27es6-promise\x27\x3c\/span\x3e   \x3cspan class=\x22hljs-comment\x22\x3e\/\/引入Promise\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ axios 配置和拦截器都不用了，这里我使用了一个动态配置数据请求地址，在App.vue中，代码在下面，这个也不是必须的。\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/^_^下面都设置一个默认的头部，使用的时候可以传入数据覆盖^_^,例如使用fetch(GET)方法时，没有请求数据，但是请求头有变化，则应写成 fetch(\x22地址\x22, {}, {\x22这里写头部的内容\x22})   记住没数据用一个空对象占位置\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * fetch 请求方法\n * @param url\n * @param params\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efetch\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, params = {}, headers = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e设置跨域头部\n    \x3cspan class=\x22hljs-string\x22\x3e\x22Authorization\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JWT \x27\x3c\/span\x3e \x2b sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x22authToken\x22\x3c\/span\x3e\x3c\/span\x3e)\n}) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.get(url, {\n            \x3cspan class=\x22hljs-attr\x22\x3eparams\x3c\/span\x3e: params,\n            \x3cspan class=\x22hljs-attr\x22\x3eheaders\x3c\/span\x3e: headers\n        })\n        .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            resolve(response.data);\n        })\n        .catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            reject(err.response)\n        })\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * post 请求方法\n * @param url\n * @param data\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epost\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, data = {}, config = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22headers\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e设置跨域头部\n        \x3cspan class=\x22hljs-string\x22\x3e\x22Authorization\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JWT \x27\x3c\/span\x3e \x2b sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x22authToken\x22\x3c\/span\x3e\x3c\/span\x3e)\n    }\n}) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.post(url, data, config)\n            .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                resolve(response.data);\n            }, err =\x26gt; {\n                reject(err.response);\n            })\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * patch 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epatch\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, data = {}, config = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22headers\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e设置跨域头部\n        \x3cspan class=\x22hljs-string\x22\x3e\x22Authorization\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JWT \x27\x3c\/span\x3e \x2b sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x22authToken\x22\x3c\/span\x3e\x3c\/span\x3e)\n    }\n}) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.patch(url, data, config)\n            .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                resolve(response.data);\n            }, err =\x26gt; {\n                reject(err.response);\n            })\n    })\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * put 方法封装\n * @param url\n * @param data\n * @returns {Promise}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eput\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl, data = {}, config = {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22headers\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e设置跨域头部\n        \x3cspan class=\x22hljs-string\x22\x3e\x22Authorization\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27JWT \x27\x3c\/span\x3e \x2b sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x22authToken\x22\x3c\/span\x3e\x3c\/span\x3e)\n    }\n}) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        axios.put(url, data, config)\n            .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                resolve(response.data);\n            }, err =\x26gt; {\n                reject(err.response);\n            })\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3eApp.vue(这是在\x3ccode\x3esrc\x3c\/code\x3e目录下的程序入口文件)\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv id=\x26quot;app\x26quot;\x3e\n    \x3crouter-view\/\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\nimport axios from \x27axios\x27;\nlet protocol = window.location.protocol; \/\/协议\nlet host = window.location.host; \/\/主机\nlet reg = \/^localhost\x2b\/;\nif(reg.test(host)) {\n  \/\/若本地项目调试使用\n  axios.defaults.baseURL = \x27http:\/\/10.0.xx.xxx:xxxx\/api\/\x27;\n} else {\n  \/\/动态请求地址\n  axios.defaults.baseURL = protocol \x2b \x26quot;\/\/\x26quot; \x2b host \x2b \x26quot;\/api\/\x26quot;;\n}\naxios.defaults.timeout = 30000;\nexport default {\n  name: \x27app\x27,\n  axios   \/\/这里记得导出，若请求地址永久固定一个，则就按照`普通版`配置一个baserURL就可以了\n}\n\x3c\/script\x3e\n\n\x3cstyle lang=\x26quot;scss\x26quot;\x3e  \/\/这里我使用的是scss\n@import \x27~@\/style\/style\x27\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3erouter-view\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e protocol = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.location.protocol; \x3cspan class=\x22hljs-comment\x22\x3e\/\/协议\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e host = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.location.host; \x3cspan class=\x22hljs-comment\x22\x3e\/\/主机\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e reg = \x3cspan class=\x22hljs-regexp\x22\x3e\/^localhost\x2b\/\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(reg.test(host)) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/若本地项目调试使用\x3c\/span\x3e\n  axios.defaults.baseURL = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/10.0.xx.xxx:xxxx\/api\/\x27\x3c\/span\x3e;\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/动态请求地址\x3c\/span\x3e\n  axios.defaults.baseURL = protocol \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22\/\/\x22\x3c\/span\x3e \x2b host \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22\/api\/\x22\x3c\/span\x3e;\n}\naxios.defaults.timeout = \x3cspan class=\x22hljs-number\x22\x3e30000\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e,\n  axios   \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里记得导出，若请求地址永久固定一个，则就按照`普通版`配置一个baserURL就可以了\x3c\/span\x3e\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22scss\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e  \/\/这里我使用的是scss\n@import \x27~@\/style\/style\x27\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e04\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e总结\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e常见问题\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e在使用动态版时，为什么称为动态呢，是因为访问地址和请求地址是同一个地址可端口号，例如我通过\x3ccode\x3ehttp:\/\/www.cmgos.com\x3c\/code\x3e(默认端口80)访问项目，那么我的\x3ccode\x3ebaseURL\x3c\/code\x3e会自动的变为\x3ccode\x3ehttp:www.cmgos.com:80\/api\/\x3c\/code\x3e，这么做的原因是当某一天项目迁移或者\x3ccode\x3ehttp\x3c\/code\x3e改为\x3ccode\x3ehttps\x3c\/code\x3e时，不用你再去更改请求地址，程序自动就完成了\x3c\/li\x3e\n\x3cli\x3e数据请求地址配置不正确？如果你配置了\x3ccode\x3ebaseURL\x3c\/code\x3e，那么你封装的函数在使用时仅需传入基于\x3ccode\x3ebaseURL\x3c\/code\x3e的请求地址，例如传入\x3ccode\x3elogin\/\x3c\/code\x3e那么请求地址会自动变为\x3ccode\x3ehttp:www.cmgos.com:80\/api\/login\/\x3c\/code\x3e，若未配置，那么可以直接传入整个请求地址\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e注意事项\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e在使用动态版时，由于没有使用拦截器，所以下面封装的函数在返回错误的时候需要写成\x3ccode\x3eerr.response.data\x3c\/code\x3e来获取返回的数据，但我写的是\x3ccode\x3eerr.response\x3c\/code\x3e，因为这样可以拿到\x3ccode\x3e(status)状态码\x3c\/code\x3e等信息，若不需要判断返回的状态码，则改为\x3ccode\x3eerr.response.data\x3c\/code\x3e便可\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>动态Axios配置</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012805726">https://segmentfault.com/a/1190000012805726</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/eqi20eb84jn/" target="_blank">https://alili.tech/archive/eqi20eb84jn/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>