<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="puppeteer新手入门(chromium下载跳坑)"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>puppeteer新手入门(chromium下载跳坑) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/erj5ndpwll9/",
				"appid": "1613049289050283", 
				"title": "puppeteer新手入门(chromium下载跳坑) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-20T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lwt87tgsga/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/wqrz1f0gshl/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&text=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&text=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&title=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&is_video=false&description=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&title=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&title=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&title=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ferj5ndpwll9%2f&title=puppeteer%e6%96%b0%e6%89%8b%e5%85%a5%e9%97%a8%28chromium%e4%b8%8b%e8%bd%bd%e8%b7%b3%e5%9d%91%29"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">puppeteer新手入门(chromium下载跳坑)</h1><div class="meta"><div class="postdate"><time datetime="2018-12-20" itemprop="datePublished">2018-12-20</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3epuppeteer简介\x3c\/h1\x3e\n\x3cp\x3epuppeteer 翻译是操纵木偶的人，利用这个工具，我们能做一个操纵页面的人。puppeteer是一个nodejs的库，支持调用Chrome的API来操纵Web，相比较Selenium或是PhantomJs,它最大的特点就是它的操作Dom可以完全在内存中进行模拟既在V8引擎中处理而不打开浏览器，而且关键是这个是Chrome团队在维护，会拥有更好的兼容性和前景。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3epuppeteer功能\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e生成页面的截图和PDF。\x3c\/li\x3e\n\x3cli\x3e抓取SPA并生成预先呈现的内容（即“SSR”）。\x3c\/li\x3e\n\x3cli\x3e从网站抓取你需要的内容。\x3c\/li\x3e\n\x3cli\x3e自动表单提交，UI测试，键盘输入等\x3c\/li\x3e\n\x3cli\x3e创建一个最新的自动化测试环境。使用最新的JavaScript和浏览器功能，直接在最新版本的Chrome中运行测试。\x3c\/li\x3e\n\x3cli\x3e捕获您的网站的时间线跟踪，以帮助诊断性能问题。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3epuppeteer轻松入门\x3c\/h1\x3e\n\x3ch4\x3e1. 环境和安装\x3c\/h4\x3e\n\x3cp\x3ePuppeteer 至少需要 Node v6.4.0，如要使用 async \/ await，只有 Node v7.6.0 或更高版本才支持。 node下载地址： \x3ca href=\x22https:\/\/nodejs.org\/zh-cn\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/nodejs.org\/zh-cn\/\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e2. 创建项目\x3c\/h4\x3e\n\x3ch5\x3e2.1 创建test目录，进入目录执行npm init\x3c\/h5\x3e\n\x3ch5\x3e2.2 安装 puppeteer\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22yarn add puppeteer 或者 npm i puppeteer\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dockerfile\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3eyarn \x3cspan class=\x22hljs-keyword\x22\x3eadd\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e puppeteer 或者 npm i puppeteer\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可能会出现以下报错:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ERROR: Failed to download Chromium r515411! Set \x26quot;PUPPETEER_SKIP_CHROMIUM_DOWNLOA\nD\x26quot; env variable to skip download.\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs subunit\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eERROR: \x3c\/span\x3eFailed to download Chromium r515411! Set \x22PUPPETEER_SKIP_CHROMIUM_DOWNLOA\nD\x22 env variable to skip download.\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是因为在执行安装的过程中需要执行install.js，这里会下载Chromium,官网建议是进行跳过，我们可以执行 —ignore-scripts 忽略这个js执行。也可以通过设置环境变量set PUPPETEER_SKIP_CHROMIUM_DOWNLOAD=1阻止下载 Chromium （因为封网，直接下载会失败）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i --save puppeteer --ignore-scripts\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs brainfuck\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3enpm\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3ei\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3esave\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3epuppeteer\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eignore\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3escripts\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e2.3 手动下载Chromium\x3c\/h5\x3e\n\x3cp\x3e下载地址：\x3ca href=\x22https:\/\/download-chromium.appspot.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/download-chromium.appspot.com\/\x3c\/a\x3e  (打开蓝灯翻墙软件...)\x3c\/p\x3e\n\x3cp\x3e把下载刚刚下载的文件解压出来会有chrome-win32文件夹，把里面的文件拷贝到项目新建的chromium文件夹中\x3c\/p\x3e\n\x3ch5\x3e2.4 新建index.js（截图功能）, 代码如下：\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const puppeteer = require(\x27puppeteer\x27);\n\n(async () =\x3e {\n    const browser = await puppeteer.launch();\n    const page = await browser.newPage();\n    await page.goto(\x27https:\/\/y.qq.com\x27);\n    await page.screenshot({path: \x27yqq.png\x27});\n    browser.close();\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e puppeteer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27puppeteer\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e browser = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e puppeteer.launch(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e page = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e browser.newPage(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.goto(\x3cspan class=\x22hljs-params\x22\x3e\x27https:\x3cspan class=\x22hljs-comment\x22\x3e\/\/y.qq.com\x27);\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.screenshot(\x3cspan class=\x22hljs-params\x22\x3e{path: \x27yqq.png\x27}\x3c\/span\x3e);\n    browser.close(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\n}\x3c\/span\x3e)(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e打开cmd执行index.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22node index.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eindex\x3c\/span\x3e.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这时候可能出现以下错误：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(node:8672) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejec\ntion id: 1): AssertionError [ERR_ASSERTION]: Chromium revision is not downloaded\n. Run \x26quot;npm install\x26quot;\n(node:8672) [DEP0018] DeprecationWarning: Unhandled promise rejections are depre\ncated. In the future, promise rejections that are not handled will terminate the\n Node.js process with a non-zero exit code.\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3e(\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e:8672\x3c\/span\x3e) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejec\ntion id: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e): AssertionError [ERR_ASSERTION]: Chromium revision is not downloaded\n. Run \x3cspan class=\x22hljs-string\x22\x3e\x22npm install\x22\x3c\/span\x3e\n(\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e:8672\x3c\/span\x3e) [DEP0018] DeprecationWarning: Unhandled promise rejections are depre\ncated. \x3cspan class=\x22hljs-keyword\x22\x3eIn\x3c\/span\x3e the future, promise rejections that are not handled will terminate the\n \x3cspan class=\x22hljs-keyword\x22\x3eNode\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3ejs\x3c\/span\x3e process with a non-zero exit code.\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e显示chromium 未下载错误，因为chromium默认的下载路径是在node_modules\/puppeteer\/.local-chromium\/目录，这时候我们的chromium是在项目根目录，所以需要配置指定路径，修改index.js文件()：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const puppeteer = require(\x27puppeteer\x27);\n\n(async () =\x3e {\n      const browser = await puppeteer.launch({\n        executablePath: \x27.\/chromium\/chrome.exe\x27,\n        headless: false\n      });\n      const page = await browser.newPage();\n      await page.goto(\x27http:\/\/music.163.com\/\x27);\n      await page.screenshot({path: \x27music.png\x27});\n      browser.close();\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e puppeteer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27puppeteer\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) =\x26gt; {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e browser = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e puppeteer.launch(\x3cspan class=\x22hljs-params\x22\x3e{\n        executablePath: \x27.\/chromium\/chrome.exe\x27,\n        headless: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n      }\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e page = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e browser.newPage(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.goto(\x3cspan class=\x22hljs-params\x22\x3e\x27http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/music.163.com\/\x27);\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.screenshot(\x3cspan class=\x22hljs-params\x22\x3e{path: \x27music.png\x27}\x3c\/span\x3e);\n      browser.close(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\n}\x3c\/span\x3e)(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e);\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3epuppeteer launch参数说明：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eexecutablePath： 运行Chromium或Chrome可执行文件的路径\x3c\/li\x3e\n\x3cli\x3eheadless： 是否运行在浏览器headless模式，true为不打开浏览器执行，默认为true\x3c\/li\x3e\n\x3cli\x3etimeout： 等待浏览器实例启动的最长时间（以毫秒为单位）。默认为30000（30秒）。通过0禁用超时\x3c\/li\x3e\n\x3cli\x3eargs： 传递给浏览器实例的其他参数\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e更多参数请参照\x3ca href=\x22https:\/\/github.com\/GoogleChrome\/puppeteer\/blob\/master\/docs\/api.md#class-browser\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官网\x3c\/a\x3e，再次执行index.js可能出现以下错误：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Error: Protocol error (Page.getFrameTree): \x27Page.getFrameTree\x27 wasn \x27t found undefined\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs subunit\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eError: \x3c\/span\x3eProtocol error (Page.getFrameTree): \x27Page.getFrameTree\x27 wasn \x27t found undefined\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e刚开始找了好久没找到答案，然后上万能的Google找了下，发现了类似的问题\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012606621\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012606621\x22 alt=\x22image.png\x22 title=\x22image.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可能是chromium的版本存在差异，然后重新在\x3ca href=\x22https:\/\/download-chromium.appspot.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echromium官网\x3c\/a\x3e下载最新版本解压到项目（要注意下相应系统chromium）\x3c\/p\x3e\n\x3cp\x3e执行index.js， 脚本运行chromium浏览器跳转到界面，截图保存到项目中，这样就成功了...\x3c\/p\x3e\n\x3ch5\x3e2.5 puppeteer相关地址\x3c\/h5\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/GoogleChrome\/puppeteer\/blob\/master\/docs\/api.md#class-browser\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3epuppeteer神器官方文档\x3c\/a\x3e，可以进行其他强大的功能开发...\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>puppeteer新手入门(chromium下载跳坑)</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012606616">https://segmentfault.com/a/1190000012606616</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/erj5ndpwll9/" target="_blank">https://alili.tech/archive/erj5ndpwll9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>