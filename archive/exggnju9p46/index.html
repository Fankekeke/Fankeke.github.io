<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Reactjs 列表优化的一些心得。"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Reactjs 列表优化的一些心得。 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/exggnju9p46/",
				"appid": "1613049289050283", 
				"title": "Reactjs 列表优化的一些心得。 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-31T02:30:30"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/fh5nz9oaxak/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/1xgotagqxfp/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&text=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&text=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&title=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&is_video=false&description=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&title=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&title=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&title=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fexggnju9p46%2f&title=Reactjs%20%e5%88%97%e8%a1%a8%e4%bc%98%e5%8c%96%e7%9a%84%e4%b8%80%e4%ba%9b%e5%bf%83%e5%be%97%e3%80%82"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Reactjs 列表优化的一些心得。</h1><div class="meta"><div class="postdate"><time datetime="2018-12-31" itemprop="datePublished">2018-12-31</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e在应用开发中，列表是我们使用频率非常高的一种展现形式，在\x3ccode\x3ereactjs\x3c\/code\x3e项目中更是如此。无处不在的使用更是需要我们小心触发性能瓶颈的深水炸弹。\x3c\/p\x3e\n\x3cp\x3e下面就我最近的总结出的几点心得分享给大家，有什么问题欢迎批评指正。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e不要用索引当\x3ccode\x3ekey\x3c\/code\x3e值\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ereactjs\x3c\/code\x3e要求我们对列表中的每一项设置一个唯一的\x3ccode\x3ekey\x3c\/code\x3e值，这个虚拟dom的\x3cstrong\x3ediff\x3c\/strong\x3e算法有很大关系。简单的说，在同一级dom树中，有2种情况会引起元素（这里的元素指的是虚拟dom，而不是真正的dom元素）的增删。\x3c\/p\x3e\n\x3cp\x3e1.元素的类型改变\x3cbr\x3e2.\x3ccode\x3ekey\x3c\/code\x3e值变化\x3c\/p\x3e\n\x3cp\x3e在列表中，元素类型一般是相同的，所以我们需要根据唯一的\x3ccode\x3ekey\x3c\/code\x3e值来给当前元素加上标记，这样\x3ccode\x3ereactjs\x3c\/code\x3e才能感知元素是否需要增加或删除了。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ereactjs\x3c\/code\x3e采用的非常直接粗暴的算法来判断元素的增删，比如\x3c\/p\x3e\n\x3cp\x3e旧的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cli key={1}\x3ea\x3c\/li\x3e\n\x3cli key={2}\x3eb\x3c\/li\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e\x26gt;\x3c\/span\x3ea\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cli key={1}\x3ea\x3c\/li\x3e\n\x3cli key={2}\x3eb\x3c\/li\x3e\n\x3cli key={3}\x3ec\x3c\/li\x3e\n\x3cli key={4}\x3ed\x3c\/li\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e\x26gt;\x3c\/span\x3ea\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{3}\x3c\/span\x3e\x26gt;\x3c\/span\x3ec\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{4}\x3c\/span\x3e\x26gt;\x3c\/span\x3ed\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们来分析下这种情况下的流程：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e对比第一项\x3ccode\x3ekey\x3c\/code\x3e都是1，内容不变，不处理\x3c\/li\x3e\n\x3cli\x3e对比第二项\x3ccode\x3ekey\x3c\/code\x3e都是2，内容不变，不处理\x3c\/li\x3e\n\x3cli\x3e第三项\x3ccode\x3ekey\x3c\/code\x3e为3的是新的，新增\x3c\/li\x3e\n\x3cli\x3e第四项\x3ccode\x3ekey\x3c\/code\x3e为4的是新的，新增\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e这个例子中我们使用索引(\x2b1)作为\x3ccode\x3ekey\x3c\/code\x3e，没有什么问题，完全符合我们的预期。接下我们看第二个\x3c\/p\x3e\n\x3cp\x3e假设我们的的列表数据从\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[\n    {id:2,text:\x27b\x27},\n    {id:3,text:\x27c\x27},\n    {id:5,text:\x27e\x27}\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e[\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27c\x27\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27e\x27\x3c\/span\x3e}\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e变成了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[\n    {id:1,text:\x27a\x27},\n    {id:2,text:\x27b\x27},\n    {id:3,text:\x27c\x27},\n    {id:4,text:\x27d\x27}\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e[\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27c\x27\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27d\x27\x3c\/span\x3e}\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e仍然使用索引作为\x3ccode\x3ekey\x3c\/code\x3e，那么渲染出来的应该是\x3c\/p\x3e\n\x3cp\x3e旧的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cli key={1}\x3eb\x3c\/li\x3e\n\x3cli key={2}\x3ec\x3c\/li\x3e\n\x3cli key={3}\x3ee\x3c\/li\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3ec\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{3}\x3c\/span\x3e\x26gt;\x3c\/span\x3ee\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cli key={1}\x3ea\x3c\/li\x3e\n\x3cli key={2}\x3eb\x3c\/li\x3e\n\x3cli key={3}\x3ec\x3c\/li\x3e\n\x3cli key={4}\x3ed\x3c\/li\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e\x26gt;\x3c\/span\x3ea\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{3}\x3c\/span\x3e\x26gt;\x3c\/span\x3ec\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{4}\x3c\/span\x3e\x26gt;\x3c\/span\x3ed\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种情况下的流程：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e对比第一项\x3ccode\x3ekey\x3c\/code\x3e都是1，但是内容变了，替换文本\x3c\/li\x3e\n\x3cli\x3e对比第二项\x3ccode\x3ekey\x3c\/code\x3e都是2，但是内容变了，替换文本\x3c\/li\x3e\n\x3cli\x3e对比第三项\x3ccode\x3ekey\x3c\/code\x3e都是3，但是内容变了，替换文本\x3c\/li\x3e\n\x3cli\x3e第四项\x3ccode\x3ekey\x3c\/code\x3e为4是新的，新增\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e这个和我们想的就有区别了，因为我们只是想做两步操作，即替换第1个和添加第4个。而现在做了四步操作。\x3c\/p\x3e\n\x3cp\x3e也许这个例子显得没有那么糟糕，但是想象一下，如果是在一个50项的列表中插入1个新的到头部，那么后面的50项将都会进行\x3ccode\x3edom\x3c\/code\x3e更新渲染，\x3cstrong\x3e如果每一项内容是复杂的组件，那么代价更加高昂\x3c\/strong\x3e，而我们其实只是想在第一个元素前插入一条。\x3c\/p\x3e\n\x3cp\x3e那么如果解决上面的问题呢，其实很简单，\x3cstrong\x3e我们的列表数据都有唯一的\x3ccode\x3eid\x3c\/code\x3e值，而实际开发中我们列表中一般都会存在这样的唯一值，我们只需要把它复制给\x3ccode\x3ekey\x3c\/code\x3e即可\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e那么我们的列表会变成这样\x3c\/p\x3e\n\x3cp\x3e旧的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cli key={2}\x3eb\x3c\/li\x3e\n\x3cli key={3}\x3ec\x3c\/li\x3e\n\x3cli key={5}\x3ee\x3c\/li\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{3}\x3c\/span\x3e\x26gt;\x3c\/span\x3ec\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{5}\x3c\/span\x3e\x26gt;\x3c\/span\x3ee\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新的\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cli key={1}\x3ea\x3c\/li\x3e\n\x3cli key={2}\x3eb\x3c\/li\x3e\n\x3cli key={3}\x3ec\x3c\/li\x3e\n\x3cli key={4}\x3ed\x3c\/li\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{1}\x3c\/span\x3e\x26gt;\x3c\/span\x3ea\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{2}\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{3}\x3c\/span\x3e\x26gt;\x3c\/span\x3ec\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{4}\x3c\/span\x3e\x26gt;\x3c\/span\x3ed\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种情况下的流程：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e第一项\x3ccode\x3ekey\x3c\/code\x3e为1是新的，新增，节点变成4个\x3c\/li\x3e\n\x3cli\x3e对比第二项\x3ccode\x3ekey\x3c\/code\x3e都是2，内容不变，不处理\x3c\/li\x3e\n\x3cli\x3e对比第三项\x3ccode\x3ekey\x3c\/code\x3e都是3，内容不变，不处理\x3c\/li\x3e\n\x3cli\x3e第四项\x3ccode\x3ekey\x3c\/code\x3e为4，旧的是5，替换节点\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e将列表和列表项单独写成纯组件\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e为什么？\x3c\/h3\x3e\n\x3cp\x3e我们可能已经习惯这样写列表\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render(){\n    render (\n        \x3cul\x3e\n            {this.state.list.map(item=\x3e\x3cli key={item.id}\x3e{item.text}\x3cli\x3e)}\n        \x3c\/ul\x3e\n    )\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3erender\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    render (\n        \x26lt;ul\x26gt;\n            {this\x3cspan class=\x22hljs-selector-class\x22\x3e.state\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.list\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.map\x3c\/span\x3e(item=\x26gt;\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3eli\x3c\/span\x3e key={item.id}\x26gt;{item.text}\x26lt;li\x26gt;)}\n        \x26lt;\/ul\x26gt;\n    )\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在大多数情况下，这样写没有什么问题，\x3ccode\x3ereactjs\x3c\/code\x3e执行速度很快，但是有些情况下，这样写可能成为导致网页卡顿的罪魁祸首。\x3c\/p\x3e\n\x3cp\x3e每当我们改变组件状态的时候，\x3ccode\x3ereactjs\x3c\/code\x3e都会重建当前组件的整个虚拟dom树，也就是说不管你的\x3ccode\x3estate.list\x3c\/code\x3e是否有改变，整个树都会重建，而这个时候列表的渲染是不必要的，当列表过长，组件状态更新频繁，甚至手机性能不佳的情况下，不断的重新创建虚拟dom树很有可能会导致页面帧数下降。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e\x3ccode\x3ePureComponent\x3c\/code\x3e\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/facebook.github.io\/react\/docs\/react-api.html#react.purecomponent\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePureComponent\x3c\/a\x3e和\x3ccode\x3eComponent\x3c\/code\x3e没什么什么区别，除了它默认在\x3ccode\x3eshouldUpdateComponent\x3c\/code\x3e里面默认做了\x3cstrong\x3e浅比较\x3c\/strong\x3e，如果相同，则不会触发更新渲染。\x3c\/p\x3e\n\x3cp\x3e在\x3ccode\x3ereactjs\x3c\/code\x3e中，数据推荐处理成\x3cstrong\x3e不可变数据\x3c\/strong\x3e(这里不是指\x3ccode\x3eimmutable.js\x3c\/code\x3e，而是说对象始终是不变的，如果数据有变了，必须是新的对象)，配合\x3ccode\x3eredux\x3c\/code\x3e的时候更是如此。所以如果\x3ccode\x3elist\x3c\/code\x3e发生改变时，传入的必然是新的对象，这个时候会触发列表组件更新。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e使用\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class List extends PureComponent{\n    render(){\n        return (\n            \x3cul\x3e\n            {this.props.list.map(item=\x3e\x3cli key={item.id}\x3e{item.text}\x3cli\x3e)}\n        \x3c\/ul\x3e\n        )\n    }\n}\n\n\/*** parent ***\/\n\/\/ .....\nrender(){\n    render (\n        \x3cList list = {this.state.list}\/\x3e\n    )\n}\n\/\/ ...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eList\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePureComponent\x3c\/span\x3e\x3c\/span\x3e{\n    render(){\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x26lt;ul\x26gt;\n            {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.list.map(item=\x26gt;\x26lt;li key={item.id}\x26gt;{item.text}\x26lt;li\x26gt;)}\n        \x26lt;\/ul\x26gt;\n        )\n    }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*** parent ***\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ .....\x3c\/span\x3e\nrender(){\n    render (\n        \x26lt;\x3cspan class=\x22hljs-type\x22\x3eList\x3c\/span\x3e list = {\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.list}\/\x26gt;\n    )\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e子组件\x3c\/h3\x3e\n\x3cp\x3e当我们列表的子元素是复杂的组建时，我们也应该单独提取成\x3ccode\x3ePureComponent\x3c\/code\x3e，以避免不必要的渲染，事实上，我觉得大多数组件都可以使用\x3ccode\x3ePureComponent\x3c\/code\x3e替换\x3ccode\x3eComponent\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e不要在属性上箭头函数\x3c\/h2\x3e\n\x3cp\x3e箭头函数很方便，不仅写法简单还能保持\x3ccode\x3ethis\x3c\/code\x3e指向父级作用域。\x3c\/p\x3e\n\x3cp\x3e为了维护事件处理函数的\x3ccode\x3ethis\x3c\/code\x3e，我们经常在组件中看到它类似这样的使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cComponent onClick={()=\x3e{alert(11)} \/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eComponent\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e=\x26gt;\x3c\/span\x3e{alert(11)} \/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是这样写会有几个问题\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e每次\x3ccode\x3erender\x3c\/code\x3e都会重新创建一个新的函数，浏览器创建和回收对象都会有开销，如果是列表，那么每个列表项都会创建和销毁。\x3c\/li\x3e\n\x3cli\x3e因为每次\x3ccode\x3erender\x3c\/code\x3e都是传入新的函数，\x3ccode\x3eshouldUpdateComponent\x3c\/code\x3e\x3cstrong\x3e浅比较\x3c\/strong\x3e必然不相等，会导致\x3ccode\x3ePureComponent\x3c\/code\x3e组件失去应有效果。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e正确的做法\x3c\/h3\x3e\n\x3cp\x3e如果使用了\x3ccode\x3etransform-class-properties\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleClick = ()=\x3e{\n    alert(1)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3ehandleClick\x3c\/span\x3e = \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e=\x26gt;\x3c\/span\x3e{\n    alert(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cComponent onClick={this.handleClick} \/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22jsx\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eComponent\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{this.handleClick}\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22constructor(){\n    super(...arguments)\n    this.handleClick = this.handleClick.bind(this)\n}\n\nhandleClick = ()=\x3e{\n    alert(1)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode class=\x22jsx\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e{\n    super(...arguments)\n    this.handleClick = this.handleClick.bind(this)\n}\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-title\x22\x3ehandleClick\x3c\/span\x3e = \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e=\x26gt;\x3cspan class=\x22hljs-comment\x22\x3e{\n    alert(1)\n}\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e结束语\x3c\/h2\x3e\n\x3cp\x3e暂时就总结了这些吧，以后有新的心得再更新，欢迎交流留言。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Reactjs 列表优化的一些心得。</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011191890">https://segmentfault.com/a/1190000011191890</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/exggnju9p46/" target="_blank">https://alili.tech/archive/exggnju9p46/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>