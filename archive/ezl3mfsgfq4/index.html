<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="ES6时代，你真的会克隆对象吗？"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>ES6时代，你真的会克隆对象吗？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ezl3mfsgfq4/",
				"appid": "1613049289050283", 
				"title": "ES6时代，你真的会克隆对象吗？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-15T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lb50z5az8cq/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/b8d05fzct99/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&text=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&text=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&title=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&is_video=false&description=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&title=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&title=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&title=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fezl3mfsgfq4%2f&title=ES6%e6%97%b6%e4%bb%a3%ef%bc%8c%e4%bd%a0%e7%9c%9f%e7%9a%84%e4%bc%9a%e5%85%8b%e9%9a%86%e5%af%b9%e8%b1%a1%e5%90%97%ef%bc%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">ES6时代，你真的会克隆对象吗？</h1><div class="meta"><div class="postdate"><time datetime="2018-12-15" itemprop="datePublished">2018-12-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e原文：\x3ca href=\x22https:\/\/github.com\/Alvin-Liu\/Blog\/issues\/8\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e你真的会克隆对象吗\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e开始之前\x3c\/h2\x3e\n\x3cp\x3e在开始聊克隆之前，我们还是先来看看js数据类型。js的数据类型分为\x3cstrong\x3e基本数据类型\x3c\/strong\x3e和\x3cstrong\x3e复杂数据类型\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e基本数据类型：Number、Boolean、String、Null、String、Symbol（ES6 新增）\x3c\/li\x3e\n\x3cli\x3e复杂数据类型：Object，其他引用类型（Array、Date、RegExp、Function、基本包装类型（Boolean、String、Number）、Math等）都是Object类型的实例对象\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e克隆:基本数据 =\x26gt; 复制这个变量；复杂数据 =\x26gt; 拷贝引用（网上的介绍很多，不深入了）\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e常见浅拷贝\x3c\/h2\x3e\n\x3cp\x3e对于对象的克隆，应该大多数人都能实现出来，可能深、浅拷贝都能想出好几种方式，我们先来聊聊浅拷贝。\x3c\/p\x3e\n\x3cp\x3e一个常见的浅拷贝一般是下面这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function shallowCopy (obj) {\n  if (typeof obj !== \x27object\x27) {\n    return\n  }\n  var newObj = obj instanceof Array ? [] : {}\n  for (var key in obj) {\n    if (obj.hasOwnProperty(key)) {\n      newObj[key] = obj[key]\n    }\n  }\n  return newObj\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eshallowCopy\x3c\/span\x3e \x3c\/span\x3e(obj) {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (typeof obj !== \x3cspan class=\x22hljs-string\x22\x3e\x27object\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eObj\x3c\/span\x3e = obj instanceof \x3cspan class=\x22hljs-keyword\x22\x3eArray\x3c\/span\x3e ? [] : \x3cspan class=\x22hljs-type\x22\x3e\x3c\/span\x3e{}\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e obj) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (obj.hasOwnProperty(key)) {\n      \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eObj\x3c\/span\x3e[key] = obj[key]\n    }\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e\x3cspan class=\x22hljs-type\x22\x3eObj\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者更严谨一点的实现数组的判断：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Object.prototype.toString.call(arr) === \x27[object Array]\x27\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs elm\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-type\x22\x3eObject\x3c\/span\x3e.proto\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e.toString.call(arr) === \x27[object \x3cspan class=\x22hljs-type\x22\x3eArray\x3c\/span\x3e]\x27\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好像是没什么问题呢，毕竟经过了好多项目的检测，网上一搜就能出现一大堆。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e但是\x3c\/strong\x3e，我们开头介绍数据类型的时候就已经说过了，ES6新增了\x3ccode\x3eSymbol\x3c\/code\x3e类型，情况好像就有点不一样了\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3eSymbol\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eSymbol\x3c\/code\x3e是ES6中引入的原始数据类型。\x3ccode\x3eSymbol\x3c\/code\x3e值通过\x3ccode\x3eSymbol\x3c\/code\x3e函数生成，是独一无二的。同时，ES6中规定了对象的属性名有两种类型，一种是字符串，另一种就是 \x3ccode\x3eSymbol\x3c\/code\x3e 类型。凡是属性名属于 Symbol 类型，就不会与其他属性名产生冲突。但是，随之而来的问题是，我们的\x3ccode\x3efor...in\x3c\/code\x3e循环不能遍历出该属性\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3ccode\x3eSymbol\x3c\/code\x3e 作为属性名，该属性不会出现在\x3ccode\x3efor...in\x3c\/code\x3e、\x3ccode\x3efor...of\x3c\/code\x3e循环中，也不会被\x3ccode\x3eObject.keys()\x3c\/code\x3e、\x3ccode\x3eObject.getOwnPropertyNames()\x3c\/code\x3e、\x3ccode\x3eJSON.stringify()\x3c\/code\x3e返回。但是，它也不是私有属性，有一个\x3ccode\x3eObject.getOwnPropertySymbols\x3c\/code\x3e方法，可以获取指定对象的所有 Symbol 属性名。\x3c\/blockquote\x3e\n\x3cp\x3e有\x3ccode\x3eSymbol\x3c\/code\x3e类型，自然有遍历\x3ccode\x3eSymbol\x3c\/code\x3e类型的方法。\x3ccode\x3eObject.getOwnPropertySymbols\x3c\/code\x3e \x2b \x3ccode\x3efor...in\x3c\/code\x3e的组合起来好像是能满足我们要求的了。嗯，看起来还不错，但是似乎有点麻烦了，有没有更便捷一点的方式呢？或许新时代的男人---\x3ccode\x3eReflect.ownKeys\x3c\/code\x3e，要闪亮登场了，这个既能遍历字符串，又能遍历\x3ccode\x3eSymbol\x3c\/code\x3e的死变态（请允许我这么夸他）。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3ccode\x3eReflect.ownKeys\x3c\/code\x3e返回一个数组，包含对象自身的所有属性，不管是属性名是\x3ccode\x3eSymbol\x3c\/code\x3e或字符串，也不管是否可枚举\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eObject.assign\x3c\/h2\x3e\n\x3cp\x3e这个时候熟悉ES6的人或许开始有疑问了，我们已经开始讨论\x3ccode\x3eSymbol\x3c\/code\x3e和\x3ccode\x3eReflect.ownKeys\x3c\/code\x3e，为什么浅克隆不直接用\x3ccode\x3eObject.assign\x3c\/code\x3e或者展开运算符（\x3ccode\x3e...\x3c\/code\x3e）呢？\x3c\/p\x3e\n\x3cp\x3e嗯，待我吃根火腿冷静冷静，好像你说的很对！\x3ccode\x3eObject.assign\x3c\/code\x3e的确是能拷贝\x3ccode\x3eSymbol\x3c\/code\x3e类型的呢。但是呢，但是呢，我们是一个有追求的猿类，多一种实现方式不是能让我们多了解一些坑吗？而且这种方式不是能让我们更灵活的实现不可预知的需求吗？对，没错，是这样子的...\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eObject.assign\x3c\/code\x3e这个更完美的男人出来之后，好像浅拷贝部分也该结束了，正常来说，的确是这样。不过我们再仔细想想上面的两种方式，好像还是有点区别的呢。我们再来看看这两个男人：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eReflect.ownKeys\x3c\/code\x3e返回一个数组，包含对象自身的所有属性，不管是属性名是Symbol或字符串，也不管是否可枚举\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eObject.assign\x3c\/code\x3e拷贝的属性是有限制的，只拷贝源对象的自身属性（不拷贝继承属性），也不拷贝不可枚举的属性\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e注意到了吗？这里面有一个是否可枚举的概念，这个时候是不是应该感慨我们知道怎么实现不可预知的需求了呢。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e不可枚举\x3c\/h2\x3e\n\x3cp\x3e我们先看个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var obj = Object.create({ foo: 1 }, {\n  [Symbol()]: {\n    value: 1,\n    enumerable: false\n  },\n  bar: {\n    value: 2,\n    enumerable: false\n  },\n  [Symbol()]: {\n    value: 3,\n    enumerable: true\n  },\n  baz: {\n    value: 4,\n    enumerable: true\n  }\n})\n\nObject.assign({}, obj)  \/\/ {baz: 4, Symbol(): 3}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eobj\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e=\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eObject.create({\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efoo:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e[Symbol()]:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    value:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    enumerable:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e  bar:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    value:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    enumerable:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e[Symbol()]:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    value:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    enumerable:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e},\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e  baz:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    value:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    enumerable:\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  \x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e})\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-string\x22\x3eObject.assign({},\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eobj)\x3c\/span\x3e  \x3cspan class=\x22hljs-string\x22\x3e\/\/\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e{baz:\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3eSymbol():\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e唉，的确是这样呢！看来\x3ccode\x3eObject.assign\x3c\/code\x3e也不是我们的理想归宿啊。我们再回过头来看看\x3ccode\x3eReflect.ownKeys\x3c\/code\x3e，上面挖的坑也该填了，我们在讲\x3ccode\x3eSymbol\x3c\/code\x3e的时候，\x3ccode\x3eObject.getOwnPropertySymbols\x3c\/code\x3e \x2b \x3ccode\x3efor...in\x3c\/code\x3e直接用\x3ccode\x3eReflect.ownKeys\x3c\/code\x3e替代了，在从可枚举的角度出发看看，好像哪里不对，\x3ccode\x3efor...in\x3c\/code\x3e只能循环遍历对象自身的和继承的可枚举的属性，且不含 \x3ccode\x3eSymbol\x3c\/code\x3e。头都大了吗？来来来，喝完这杯，还有一杯，继续接着来。这么多循环，我们来缕缕头绪：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3efor...in\x3c\/code\x3e循环遍历对象自身的和继承的可枚举属性（不含 \x3ccode\x3eSymbol\x3c\/code\x3e 属性）。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eObject.keys()\x3c\/code\x3e返回一个数组，包括对象自身的（不含继承的）所有可枚举属性（不含 \x3ccode\x3eSymbol\x3c\/code\x3e 属性）的键名。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eObject.getOwnPropertyNames()\x3c\/code\x3e返回一个数组，包含对象自身的所有属性（不含 \x3ccode\x3eSymbol\x3c\/code\x3e 属性，但是包括不可枚举属性）的键名。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eObject.getOwnPropertySymbols()\x3c\/code\x3e返回一个数组，包含对象自身的所有 \x3ccode\x3eSymbol\x3c\/code\x3e 属性的键名。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eReflect.ownKeys()\x3c\/code\x3e返回一个数组，包含对象自身的所有键名，不管键名是 \x3ccode\x3eSymbol\x3c\/code\x3e 或字符串，也不管是否可枚举。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e终于清晰了，或许也该结束了吧。\x3c\/p\x3e\n\x3cp\x3e慢着，好像上面的例子让我想到了什么！！！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e属性描述符\x3c\/h2\x3e\n\x3cp\x3e我们在来思考一个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const source = {\n  get foo() { return 1 }\n};\nconst target = {};\n\nObject.assign(target, source) \/\/ { foo: 1 }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs aspectj\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e source = {\n  \x3cspan class=\x22hljs-function\x22\x3eget \x3cspan class=\x22hljs-title\x22\x3efoo\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{ \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n};\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etarget\x3c\/span\x3e = {};\n\nObject.assign(\x3cspan class=\x22hljs-keyword\x22\x3etarget\x3c\/span\x3e, source) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { foo: 1 }\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好像并不是我们想要的呢，遍历的方式好像也不适用了，这可怎么办。别急，还有\x3ccode\x3eObject.getOwnPropertyDescriptors\x3c\/code\x3e可以用。\x3c\/p\x3e\n\x3cblockquote\x3eES2017 引入了\x3ccode\x3eObject.getOwnPropertyDescriptors\x3c\/code\x3e方法，返回指定对象所有自身属性（非继承属性）的描述对象\x3c\/blockquote\x3e\n\x3cp\x3e仔细阅读下文档，终于用\x3ccode\x3eObject.getOwnPropertyDescriptors\x3c\/code\x3e\x2b\x3ccode\x3eObject.getPrototypeOf\x3c\/code\x3e成功了呢\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Object.create(\n  Object.getPrototypeOf(obj), \n  Object.getOwnPropertyDescriptors(obj) \n)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eObject\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.create\x3c\/span\x3e(\n  \x3cspan class=\x22hljs-selector-tag\x22\x3eObject\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.getPrototypeOf\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3eobj\x3c\/span\x3e), \n  \x3cspan class=\x22hljs-selector-tag\x22\x3eObject\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.getOwnPropertyDescriptors\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3eobj\x3c\/span\x3e) \n)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e写到这里，浅拷贝部分也该结束了\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e结束语\x3c\/h2\x3e\n\x3cp\x3e可能实际项目中并不需要处理的这么细致，但是希望大家对各种遍历、实现一个浅拷贝以及ES6的一些知识有一个总结和一点新的认识吧，本来想继续写深拷贝的，无赖篇幅已经不短，加上长夜漫漫，我想睡觉，深拷贝的问题更复杂，我先放放，日后再说。\x3c\/p\x3e\n\x3cp\x3e最后的最后，对这篇文章有兴趣的朋友，可以继续关注下一篇的\x3ca href=\x22https:\/\/github.com\/Alvin-Liu\/Blog\/issues\/9\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深克隆\x3c\/a\x3e,会更新的会更新的...\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>ES6时代，你真的会克隆对象吗？</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013056850">https://segmentfault.com/a/1190000013056850</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ezl3mfsgfq4/" target="_blank">https://alili.tech/archive/ezl3mfsgfq4/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>