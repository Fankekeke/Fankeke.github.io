<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Mobx React 最佳实践 - 每日JS"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Mobx React 最佳实践 - 每日JS | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/f2571b7a/",
				"appid": "1613049289050283", 
				"title": "Mobx React 最佳实践 - 每日JS | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-10-18T00:00:00"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/f2555a/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/916cf636/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&text=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&text=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&title=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&is_video=false&description=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&title=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&title=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&title=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff2571b7a%2f&title=Mobx%20React%20%e6%9c%80%e4%bd%b3%e5%ae%9e%e8%b7%b5%20-%20%e6%af%8f%e6%97%a5JS"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Mobx React 最佳实践 - 每日JS</h1><div class="meta"><div class="postdate"><time datetime="2018-10-18" itemprop="datePublished">2018-10-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n            \x3cp\x3e\x3cimg src=\x22https:\/\/p0.ssl.qhimg.com\/t011ff6737b8c8ad266.png\x22 alt=\x22\x22\x3e\x3c\/p\x3e\n\x3ch1\x3eMobx React — 最佳实践\x3c\/h1\x3e\n\x3cp\x3e在本文中，我想向您展示将React与mobx一起使用的常见最佳实践。 我会把它们作为规则来呈现。 因此，无论何时遇到特定问题，请在遵守这些规则的同时尝试解决问题。\x3c\/p\x3e\n\x3cp\x3e本文要求您对mobx中的store有基本的了解。 如果没有，请先阅读 \x3ca href=\x22https:\/\/mobx.js.org\/best\/store.html\x22\x3e这个\x3c\/a\x3e \x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e需要快速入门吗？ 我创建了一个启动项目，它实现了推荐的实践. \x3ca href=\x22https:\/\/github.com\/danielbischoff\/react-mobx-starter\x22\x3ehttps:\/\/github.com\/danielbischoff\/react-mobx-starter\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3ch4\x3e这些Store代表UI状态\x3c\/h4\x3e\n\x3cp\x3e请时刻记住，store代表你的应用程序的ui状态。 这意味着，当您将store的状态保存到文件中时，关闭程序并使用加载状态重新启动它，您将拥有相同的程序，并会看到相同的内容，就像您在关闭程序之前所看到的那样。 store不是“本地数据库”。 它们还包含有关哪些按钮可见，禁用，输入文件的当前文本等信息。\x3c\/p\x3e\n\x3ch4\x3e将你的rest请求与store分开\x3c\/h4\x3e\n\x3cp\x3e不要在store内调用你的rest接口。 这使他们很难测试。 而是将这些rest调用放入额外的类中，并使用store的构造函数将这些实例传递给每个store。 当您编写测试时，您可以轻松伪造这些api调用并将伪造的api实例传递给每个store。\x3c\/p\x3e\n\x3ch4\x3e将您的业务逻辑保留在store中\x3c\/h4\x3e\n\x3cp\x3e不要在组件中编写业务逻辑。 当您在组件中编写业务逻辑时，您没有机会重用它，您的业务逻辑会分布在许多组件上，这使得重构或重用代码变得困难。 使用store中的方法编写业务逻辑，并从组件中调用这些方法。\x3c\/p\x3e\n\x3ch4\x3e不要创建全局store实例。\x3c\/h4\x3e\n\x3cp\x3e不要创建全局store实例。 您无法为组件编写任何合理且可靠的测试。 而是使用Provider将您的store注入您的组件props中。 然后在您的测试中，您可以轻松地模拟这些store。\x3c\/p\x3e\n\x3ch4\x3e只允许store更改其属性\x3c\/h4\x3e\n\x3cp\x3e切勿直接在组件中更改store的属性。 只允许store更改自己的属性。 始终从store调用方法来更改store的属性。 否则，您的应用程序状态（stores=应用程序状态）将从任何地方更新，您正在慢慢失去控制。 这使得调试非常困难。\x3c\/p\x3e\n\x3ch4\x3e始终使用@observer注释每个组件\x3c\/h4\x3e\n\x3cp\x3e注解为@observer的每个组件允许每个组件在store prop的变化更新。 否则，使用@ component注释的父组件需要重新呈现，以更新其子组件。 因此需要重新渲染更少的组件。\x3c\/p\x3e\n\x3ch4\x3e使用 @computed\x3c\/h4\x3e\n\x3cp\x3e假设您希望在用户没有管理员角色且应用程序未处于“管理员模式”时禁用您的按钮。 像一个store中的isAdmin这样的单一属性是不够的。 您将需要store中的计算属性。\x3c\/p\x3e\n\x3ch4\x3e你可能不需要react router\x3c\/h4\x3e\n\x3cp\x3e你可能不需要react router。 正如我之前所说，您希望您的store代表您的应用程序的状态。 当使用react router处理部分应用程序状态时，您不要让您的store代表应用程序状态。 因此，请将当前显示的视图保存在您的某个store的属性中。 然后你有一个组件只是呈现属性所说的内容。\x3c\/p\x3e\n\x3ch4\x3e尝试支持受控组件而不是不受控制的组件\x3c\/h4\x3e\n\x3cp\x3e始终尝试构建受控组件。 这使得测试组件和组件的整体复杂性易于处理。\x3c\/p\x3e\n\n          \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>原文链接: <a href="https://www.zcfy.cc/article/mobx-react-best-practices-dailyjs">https://www.zcfy.cc/article/mobx-react-best-practices-dailyjs</a> 原文标题: Mobx React 最佳实践 - 每日JS 本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2>本文链接：</h2><a href="https://alili.tech/archive/f2571b7a/" target="_blank">https://alili.tech/archive/f2571b7a/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>