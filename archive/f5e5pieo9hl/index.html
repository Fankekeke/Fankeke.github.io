<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue封装第三方插件并发布到npm"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue封装第三方插件并发布到npm | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/f5e5pieo9hl/",
				"appid": "1613049289050283", 
				"title": "vue封装第三方插件并发布到npm | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-30T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xj9uv2b0lv/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/utkbc5cwtbe/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&text=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&text=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&title=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&is_video=false&description=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&title=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&title=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&title=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ff5e5pieo9hl%2f&title=vue%e5%b0%81%e8%a3%85%e7%ac%ac%e4%b8%89%e6%96%b9%e6%8f%92%e4%bb%b6%e5%b9%b6%e5%8f%91%e5%b8%83%e5%88%b0npm"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue封装第三方插件并发布到npm</h1><div class="meta"><div class="postdate"><time datetime="2018-12-30" itemprop="datePublished">2018-12-30</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e写此文前特意google了一下，因为有较详细的开发教程我再写意义不大，有把插件封装成组件的教程，有把自己的组件封住成插件的教程，本文主要说明如何把第三方的插件封装成vue插件，简化配置，一键安装，主要提供思路，封装方法大同小异·，文章略长要有耐心。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3egitment\x3c\/h2\x3e\n\x3cp\x3egitment是一个基于github issues封装的评论插件，以这个插件作为演示，把它封装成vue插件。\x3ca href=\x22https:\/\/github.com\/vuetop\/top-gitment\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-gitment\x3c\/a\x3e，该插件已发布到npm,并在自己的开源项目\x3ca href=\x22https:\/\/github.com\/wmui\/vueblog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evueblog\x3c\/a\x3e中安装使用\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e项目初始化\x3c\/h2\x3e\n\x3cp\x3e封装vue的插件用webpack-simple很合适，\x3ccode\x3evue init webpack-simple vue-gitment\x3c\/code\x3e此命令创建我们的项目的目录，创建文件夹和文件，最后结构是这样的  \x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011335919\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011335919\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3elib目录是我们的插件目录，其他的默认就好\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e修改配置项\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e首先是修改package.json\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;name\x26quot;: \x26quot;vue-gitment\x26quot;,\n  \x26quot;version\x26quot;: \x26quot;0.1.1\x26quot;,\n  \x26quot;description\x26quot;: \x26quot;A comment plugin by gitment\x26quot;,\n  \x26quot;main\x26quot;: \x26quot;dist\/vue-gitment.js\x26quot;,\n  \x26quot;directories\x26quot;: {\n    \x26quot;dist\x26quot;: \x26quot;dist\x26quot;\n  },\n  \x26quot;scripts\x26quot;: {\n    \x26quot;dev\x26quot;: \x26quot;cross-env NODE_ENV=development webpack-dev-server --open --hot\x26quot;,\n    \x26quot;build\x26quot;: \x26quot;cross-env NODE_ENV=production webpack --progress --hide-modules\x26quot;\n  },\n  \x26quot;repository\x26quot;: {\n    \x26quot;type\x26quot;: \x26quot;git\x26quot;,\n    \x26quot;url\x26quot;: \x26quot;git\x2bhttps:\/\/github.com\/vue-blog\/vue-gitment.git\x26quot;\n  },\n  \x26quot;dependencies\x26quot;: {\n    \x26quot;gitment\x26quot;: \x26quot;^0.0.3\x26quot;,\n    \x26quot;vue\x26quot;: \x26quot;^2.3.3\x26quot;\n  },\n  \x26quot;devDependencies\x26quot;: {\n  },\n  \x26quot;author\x26quot;: \x26quot;wmui\x26quot;,\n  \x26quot;license\x26quot;: \x26quot;MIT\x26quot;,\n  \x26quot;bugs\x26quot;: {\n    \x26quot;url\x26quot;: \x26quot;https:\/\/github.com\/vue-blog\/vue-gitment\/issues\x26quot;\n  },\n  \x26quot;homepage\x26quot;: \x26quot;https:\/\/github.com\/vue-blog\/vue-gitment#readme\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs json\x22\x3e\x3ccode\x3e{\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22vue-gitment\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22version\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x220.1.1\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22description\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22A comment plugin by gitment\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22main\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\/vue-gitment.js\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22directories\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22dist\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22dist\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22dev\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22cross-env NODE_ENV=development webpack-dev-server --open --hot\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22cross-env NODE_ENV=production webpack --progress --hide-modules\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22repository\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22git\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22url\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22git\x2bhttps:\/\/github.com\/vue-blog\/vue-gitment.git\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22dependencies\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22gitment\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^0.0.3\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22vue\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^2.3.3\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22devDependencies\x22\x3c\/span\x3e: {\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22author\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22wmui\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22license\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22MIT\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22bugs\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22url\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/github.com\/vue-blog\/vue-gitment\/issues\x22\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3e\x22homepage\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/github.com\/vue-blog\/vue-gitment#readme\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e把依赖性gitment添加到dependencies，main是我们打包后的文件入口，你可以用npm init命令生成一个package.json\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e修改webpack.config.js\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011335920\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011335920\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们只需配置入口和出口，不要删除默认的配置，因为后面开发好插件，我们需要查看工作效果\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e修改index.html\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011335921\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011335921\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e因为我们修改了webpack配置，自然要把script的src修改一下\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e封装插件\x3c\/h3\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3eVueComment.vue内容如下\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv v-comment=\x26quot;options\x26quot;\x3e\x3c\/div\x3e\n\x3c\/template\x3e\n\x3cscript\x3e\n\/\/ 引入依赖项\nimport Gitment from \x27gitment\x27\nexport default {\n  name: \x27vue-comment\x27,\n  props: [\x27options\x27],\n  directives: {\n    \/\/ 自定义指令\n    comment: {\n      bind: function (el, binding) {\n        const gitment = new Gitment({\n          id: binding.value.id \x2b \x27\x27,\n          owner: binding.value.owner,\n          repo: binding.value.repo,\n          oauth: {\n            client_id: binding.value.oauth.client_id,\n            client_secret: binding.value.oauth.client_secret\n          }\n        })\n        gitment.render(el)\n      }\n    }\n  }\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26lt;template\x26gt;\n  \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ediv\x3c\/span\x3e v-comment=\x3cspan class=\x22hljs-string\x22\x3e\x22options\x22\x3c\/span\x3e\x26gt;\x26lt;\/div\x26gt;\n\x26lt;\/template\x26gt;\n\x26lt;script\x26gt;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入依赖项\x3c\/span\x3e\nimport Gitment from \x3cspan class=\x22hljs-string\x22\x3e\x27gitment\x27\x3c\/span\x3e\nexport default {\n  name: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-comment\x27\x3c\/span\x3e,\n  props: [\x3cspan class=\x22hljs-string\x22\x3e\x27options\x27\x3c\/span\x3e],\n  directives: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自定义指令\x3c\/span\x3e\n    comment: {\n      bind: function (el, binding) {\n        const gitment = new Gitment({\n          id: binding\x3cspan class=\x22hljs-selector-class\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.id\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n          owner: binding\x3cspan class=\x22hljs-selector-class\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.owner\x3c\/span\x3e,\n          repo: binding\x3cspan class=\x22hljs-selector-class\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.repo\x3c\/span\x3e,\n          oauth: {\n            client_id: binding\x3cspan class=\x22hljs-selector-class\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.oauth\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.client_id\x3c\/span\x3e,\n            client_secret: binding\x3cspan class=\x22hljs-selector-class\x22\x3e.value\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.oauth\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.client_secret\x3c\/span\x3e\n          }\n        })\n        gitment.render(el)\n      }\n    }\n  }\n}\n\x26lt;\/script\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e相信熟悉vue的一眼都看懂了，render函数是gitment对象的方法，不用关心，和我们开发组件是一样一样的  \x3cbr\x3eindex.js封装组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import VueComment from \x27.\/VueComment.vue\x27\nconst comment = {\n  install: function(Vue) {\n    Vue.component(VueComment.name, VueComment)\n  }\n}\n\/\/ 这里的判断很重要\nif (typeof window !== \x27undefined\x27 \x26amp;\x26amp; window.Vue) { \n    window.Vue.use(comment) \n}\nexport default comment\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VueComment \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/VueComment.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e comment = {\n  \x3cspan class=\x22hljs-attr\x22\x3einstall\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eVue\x3c\/span\x3e) \x3c\/span\x3e{\n    Vue.component(VueComment.name, VueComment)\n  }\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里的判断很重要\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e !== \x3cspan class=\x22hljs-string\x22\x3e\x27undefined\x27\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Vue) { \n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Vue.use(comment) \n}\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e comment\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在webpack配置的入口文件就是他，install是挂载组件的方法，有了它我们就可以在外部use一个插件了，简单吧\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e测试插件\x3c\/h3\x3e\n\x3cp\x3e首先测试build是否成功  \x3cbr\x3e\x3ccode\x3enpm run build\x3c\/code\x3edist目录会生成如下文件  \x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011335922\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011335922\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e可喜可贺，接下来测试插件是否正常工作  \x3cbr\x3e我们需要把package和webpack的修改一下，这就是为什么我前面说不要删除而是注释掉 ，把package.json的main修改为dist\/build.js，wepack的entry和filename换成默认配置，index.html的src也换成默认的  \x3cbr\x3e在main.js中引入我们的组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import VueComment from \x27.\/lib\/index.js\x27\nVue.use(VueComment)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VueComment \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/lib\/index.js\x27\x3c\/span\x3e\nVue.use(VueComment)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eApp.vue中使用我们的插件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv id=\x26quot;app\x26quot;\x3e\n    \x3cvue-comment :options=\x26quot;options\x26quot; v-if=\x26quot;options\x26quot;\x3e\x3c\/vue-comment\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\x3cscript\x3e\nexport default {\n  name: \x27App\x27,\n  data() {\n    return {\n      options: {\n        id: \x27article id\x27,\n        owner: \x27Your GitHub ID\x27,\n        repo: \x27The repo to store comments\x27,\n        oauth: {\n          client_id: \x27Your client ID\x27, \n          client_secret: \x27Your client secret\x27,\n        } \n      }\n    }\n  }\n}\n\x3c\/script\x3e\n\x3cstyle\x3e\n    @import \x27~gitment\/style\/default.css\x27;\n\x3c\/style\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3evue-comment\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:options\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22options\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22options\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3evue-comment\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27App\x27\x3c\/span\x3e,\n  data() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27article id\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eowner\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Your GitHub ID\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3erepo\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27The repo to store comments\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoauth\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3eclient_id\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Your client ID\x27\x3c\/span\x3e, \n          \x3cspan class=\x22hljs-attr\x22\x3eclient_secret\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Your client secret\x27\x3c\/span\x3e,\n        } \n      }\n    }\n  }\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n    @\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27~gitment\/style\/default.css\x27\x3c\/span\x3e;\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行\x3ccode\x3enpm run dev\x3c\/code\x3e  \x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011335923\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011335923\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e哈哈，它正常工作了，\x3ccode\x3eError: Not Found\x3c\/code\x3e是因为我没配置client_id。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e发布插件\x3c\/h2\x3e\n\x3cp\x3e完成测试工作后我们就可以发布到npm了，这个就比较见到了，注册个\x3ca href=\x22https:\/\/www.npmjs.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enpm\x3c\/a\x3e账号，在你要发布的项目目录执行\x3ccode\x3enpm login\x3c\/code\x3e，输入账号密码和邮箱，然后\x3ccode\x3enpm publish\x3c\/code\x3e就发布成功了，\x3ccode\x3enpm install vue-gitment\x3c\/code\x3e查看效果，建议直接看源代码，因为真的很简单。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e自己动手丰衣足食\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue封装第三方插件并发布到npm</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011335914">https://segmentfault.com/a/1190000011335914</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/f5e5pieo9hl/" target="_blank">https://alili.tech/archive/f5e5pieo9hl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>