<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue-cli (vue2.5.2&amp;webpack3.6.0) 配置文件全注释"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue-cli (vue2.5.2&amp;webpack3.6.0) 配置文件全注释 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/g3ap57dm1hs/",
				"appid": "1613049289050283", 
				"title": "vue-cli (vue2.5.2&amp;webpack3.6.0) 配置文件全注释 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-15T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/esr1zkdyukj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/dqe6o2e8pyj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&text=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&text=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&title=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&is_video=false&description=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&title=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&title=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&title=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fg3ap57dm1hs%2f&title=vue-cli%20%28vue2.5.2%26webpack3.6.0%29%20%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e5%85%a8%e6%b3%a8%e9%87%8a"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue-cli (vue2.5.2&amp;webpack3.6.0) 配置文件全注释</h1><div class="meta"><div class="postdate"><time datetime="2018-12-15" itemprop="datePublished">2018-12-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3evue-cli 配置文件注释\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3e新的项目组同事整了一个webpack3.*的脚手架\x3c\/li\x3e\n\x3cli\x3e(先前自己弄了一个2.0的脚手架)里面的配置项摸索了一遍,就想看看3.*在配置文件上面update了什么\x3c\/li\x3e\n\x3cli\x3e工作闲时花了一点时间将配置文件中都加上了注释,相信看了就和我一样从不那么太懂到有那么一点懂了. ^^\x3c\/li\x3e\n\x3cli\x3e平时用的blog写这种文章十分不友好,所以记录在这边顺便和大家一起学习(时不时会update一些修正项在最后面)\x3c\/li\x3e\n\x3cli\x3e如果有需要的朋友可以上我的github下载,里面还有旧的2.0版本的脚手架.\x3ca href=\x22https:\/\/github.com\/superfff\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub链接\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e基础准备\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3enode v7.10.0\x3c\/li\x3e\n\x3cli\x3evue v2.8.2\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3col\x3e\n\x3cli\x3evue init webpack 项目名字\x3c\/li\x3e\n\x3cli\x3e各种下一步,(没啥用eslint 没使用测试的那个模块)\x3c\/li\x3e\n\x3cli\x3e生成的目录如下\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV2Q3o?w=221\x26amp;h=282\x22 src=\x22https:\/\/static.alili.tech\/img\/bV2Q3o?w=221\x26amp;h=282\x22 alt=\x22脚手架文件目录\x22 title=\x22脚手架文件目录\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e基础配置文件(webpack.base.conf.js)\x3c\/h3\x3e\n\x3cblockquote\x3e这里的文件是公用的一些基础配置项\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27\n\/\/ 基础配置文件\n\nconst path = require(\x27path\x27)\nconst utils = require(\x27.\/utils\x27)\nconst config = require(\x27..\/config\x27)\nconst vueLoaderConfig = require(\x27.\/vue-loader.conf\x27)\n\n\/\/ 定义的路径拼接方法(join直接的拼接, path.resolve等于在终端输入路径)\nfunction resolve (dir) {\n  \/\/ http:\/\/nodejs.cn\/api\/path.html#path_path_join_paths\n  return path.join(__dirname, \x27..\x27, dir)\n}\n\nconst entries = utils.getEntry(\x27.\/src\/module\/*\/*.js\x27);\n\n\/*\n    __dirname 指的是当前你这个当前文件在 硬盘文件夹全路径 \n    例如这个base.conf.js文件是在 build文件夹里\n    那么 __dirname = \/硬盘路径\/build\n*\/\n\nmodule.exports = {\n  \/\/ 基础目录，绝对路径，用于从配置中解析入口起点\n  context: path.resolve(__dirname, \x27..\/\x27),\n  \/*\n    起点或是应用程序的起点入口。从这个起点开始，应用程序启动执行。如果传递一个数组，那么数组的每一项都会执行。\n\n    如果是多入口的情况\n    entry: {\n      home: \x26quot;.\/home.js\x26quot;,\n      about: \x26quot;.\/about.js\x26quot;,\n      contact: \x26quot;.\/contact.js\x26quot;\n    }\n\n    入口对象的key值是结合dev.conf.js中的HtmlWebpackPlugin 作为url访问的路径\n    例如\n    entry: {\n      home: \x26quot;.\/home.js\x26quot;\n    }\n    访问路径:localhost:port\/home.html\n\n    entry: {\n      fgh\/home: \x27.\/home.js\x27\n    }\n    访问路径:localhost:port\/fgh\/home.html\n\n  *\/\n  entry: entries,\n  \/\/ 输出\n  output: {\n    \/\/ 编译输出的静态资源根路径\n    path: config.build.assetsRoot,\n    \/\/ 此选项决定了每个输出 bundle 的名称。 \n    \/\/ [name]是指入口名称 [id]是指chunk id [hash]是指构建完的hash [chunkhash]是指每个内容的hash\n    filename: \x27[name].js\x27,\n    \/\/ 正式发布环境下编译输出的上线路径的根路径\n    publicPath: process.env.NODE_ENV === \x27production\x27\n      ? config.build.assetsPublicPath\n      : config.dev.assetsPublicPath\n  },\n  \/\/ 选项能设置模块如何被解析\n  resolve: {\n    \/\/ 自动补全对应模块的后缀\n    extensions: [\x27.js\x27, \x27.vue\x27, \x27.json\x27],\n    \/\/ 路径别名\n    alias: {\n      \x27vue$\x27: \x27vue\/dist\/vue.esm.js\x27,\n      \x27@\x27: resolve(\x27src\x27),\n    }\n  },\n  \/*\n    https:\/\/doc.webpack-china.org\/plugins\/provide-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n    ProvidePlugin 可以全局加载模块,例如下面如果想全局加载一个jq\n  *\/\n  \/\/ plugins: [\n  \/\/   new webpack.ProvidePlugin({\n  \/\/     $: \x27jquery\x27  \n  \/\/   })\n  \/\/ ],\n  \n  \/\/ 各种loader的配置\n  module: {\n    rules: [\n      {\n        test: \/\\.vue$\/,\n        loader: \x27vue-loader\x27,\n        options: vueLoaderConfig\n      },\n      \/*\n        关于.babelrc的配置 \n        部分可参考\n        https:\/\/segmentfault.com\/a\/1190000008159877\n        https:\/\/babeljs.cn\/docs\/plugins\/preset-env\/\n        https:\/\/doc.webpack-china.org\/loaders\/babel-loader\/\n\n        1.babel-preset-env 是指动态的require浏览器所缺的转换babel插件.\n        这个动态是通过文件里面的配置,\n        \x26quot;env\x26quot;, {\n          \/\/是否将模块编译为 amd cmd commonjs等\n          \x26quot;modules\x26quot;: false,\n          \x26quot;targets\x26quot;: {\n            \/\/指浏览器最新的2个版本 或者safari大于7的版本 \x3e5%是指 市场率超过5%的浏览器\n            \x26quot;browsers\x26quot;: [\x26quot;last 2 versions\x26quot;, \x26quot;safari \x3e= 7\x26quot;]\n          }\n        }\n        如果用了env 没有加任何配置的话 那么默认与 babel-preset-latest一样\n\n        2.babel-preset-stage 有4个版本\n        Stage 0 - 稻草人: 只是一个想法，可能是 babel 插件。\n        Stage 1 - 提案: 初步尝试。\n        Stage 2 - 初稿: 完成初步规范。\n        Stage 3 - 候选: 完成规范和浏览器初步实现。\n        Stage 4(隐藏版本表示已经完成 将会在新的一版所发布) 等同于es2015 es2016...\n\n        3.在plugin中有 babel-plugin-transform-runtime 是动态的模块加载所需的转换模块\n        因为如文档所说\n        Babel 几乎可以编译所有时新的 JavaScript 语法，但对于 APIs 来说却并非如此。\n        例如： Promise、Set、Map 等新增对象，Object.assign、Object.entries等静态方法。\n\n        --说到runtime就会提到babel-polyfill\n        (babel-polyfill 的做法是将全局对象通通污染一遍)\n\n        babel-runtime 更像是分散的 polyfill 模块，只会在模块里单独引入需要用到的api, 不会影响全局,\n        例子: 在模块中 import Promise from \x27babel-runtime\/core\/promise\x27\n\n        但是每个模块单独这样引入也是麻烦, 所以可以通过配置babel-plugin-transform-runtime来简单操作\n\n        --- 有一个小细节大家注意\n        api中说到, babel-plugin-transform-runtime默认是和babel-runtime捆绑出现, 前面是开发依赖,后面是生产依赖.\n        但是vue-cli构造出来的项目中,package.json里面并没有在生产依赖中出现babel-runtime??\n\n        后面请教了人,\n        原来在node_module中 babel-plugin-transform-runtime这个包里面的package.json里面已经把babel-runtime加入了生产.\n        所以当install的时候会自动将一连串的东西都装上!!\n\n        4.还有一个缩短build的构造时间, 在下面的babel-loader里面去 exclude掉整个 node_modules的文件夹. 可以缩短1半时间..\n      *\/\n      {\n        test: \/\\.js$\/,\n        loader: \x27babel-loader\x27,\n        include: [resolve(\x27src\x27), resolve(\x27test\x27), resolve(\x27node_modules\/webpack-dev-server\/client\x27)]\n      },\n      {\n        test: \/\\.(png|jpe?g|gif|svg)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        options: {\n          \/\/ 限制300kb以下的图片均变为base64. 不然如果使用background-image 打包之后会找不到资源 (limit是按照字节来)\n          limit: 307200,\n          name: utils.assetsPath(\x27img\/[name].[hash:7].[ext]\x27)\n        }\n      },\n      {\n        test: \/\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        options: {\n          limit: 10000,\n          name: utils.assetsPath(\x27media\/[name].[hash:7].[ext]\x27)\n        }\n      },\n      {\n        test: \/\\.(woff2?|eot|ttf|otf)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        options: {\n          limit: 10000,\n          name: utils.assetsPath(\x27fonts\/[name].[hash:7].[ext]\x27)\n        }\n      }\n    ]\n  },\n  \/*\n    https:\/\/doc.webpack-china.org\/configuration\/node\/#node\n    每个属性都是 Node.js 全局变量或模块的名称\n    true：提供 polyfill。\n    false: 什么都不提供。\n    \x26quot;empty\x26quot;：提供空对象。\n  *\/\n  node: {\n    \/\/ prevent webpack from injecting useless setImmediate polyfill because Vue\n    \/\/ source contains it (although only uses it if it\x27s native).\n    setImmediate: false,\n    \/\/ prevent webpack from injecting mocks to Node native modules\n    \/\/ that does not make sense for the client\n    dgram: \x27empty\x27,\n    fs: \x27empty\x27,\n    net: \x27empty\x27,\n    tls: \x27empty\x27,\n    child_process: \x27empty\x27\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 基础配置文件\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vueLoaderConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/vue-loader.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义的路径拼接方法(join直接的拼接, path.resolve等于在终端输入路径)\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eresolve\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ http:\/\/nodejs.cn\/api\/path.html#path_path_join_paths\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e entries = utils.getEntry(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/module\/*\/*.js\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n    __dirname 指的是当前你这个当前文件在 硬盘文件夹全路径 \n    例如这个base.conf.js文件是在 build文件夹里\n    那么 __dirname = \/硬盘路径\/build\n*\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 基础目录，绝对路径，用于从配置中解析入口起点\x3c\/span\x3e\n  context: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e),\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*\n    起点或是应用程序的起点入口。从这个起点开始，应用程序启动执行。如果传递一个数组，那么数组的每一项都会执行。\n\n    如果是多入口的情况\n    entry: {\n      home: \x22.\/home.js\x22,\n      about: \x22.\/about.js\x22,\n      contact: \x22.\/contact.js\x22\n    }\n\n    入口对象的key值是结合dev.conf.js中的HtmlWebpackPlugin 作为url访问的路径\n    例如\n    entry: {\n      home: \x22.\/home.js\x22\n    }\n    访问路径:localhost:port\/home.html\n\n    entry: {\n      fgh\/home: \x27.\/home.js\x27\n    }\n    访问路径:localhost:port\/fgh\/home.html\n\n  *\/\x3c\/span\x3e\n  entry: entries,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 输出\x3c\/span\x3e\n  output: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译输出的静态资源根路径\x3c\/span\x3e\n    path: config.build.assetsRoot,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 此选项决定了每个输出 bundle 的名称。 \x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ [name]是指入口名称 [id]是指chunk id [hash]是指构建完的hash [chunkhash]是指每个内容的hash\x3c\/span\x3e\n    filename: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 正式发布环境下编译输出的上线路径的根路径\x3c\/span\x3e\n    publicPath: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n      ? config.build.assetsPublicPath\n      : config.dev.assetsPublicPath\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 选项能设置模块如何被解析\x3c\/span\x3e\n  resolve: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动补全对应模块的后缀\x3c\/span\x3e\n    extensions: [\x3cspan class=\x22hljs-string\x22\x3e\x27.js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.vue\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.json\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 路径别名\x3c\/span\x3e\n    alias: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27vue$\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue\/dist\/vue.esm.js\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27@\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n    }\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*\n    https:\/\/doc.webpack-china.org\/plugins\/provide-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n    ProvidePlugin 可以全局加载模块,例如下面如果想全局加载一个jq\n  *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ plugins: [\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/   new webpack.ProvidePlugin({\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/     $: \x27jquery\x27  \x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/   })\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ],\x3c\/span\x3e\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 各种loader的配置\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: vueLoaderConfig\n      },\n      \x3cspan class=\x22hljs-comment\x22\x3e\/*\n        关于.babelrc的配置 \n        部分可参考\n        https:\/\/segmentfault.com\/a\/1190000008159877\n        https:\/\/babeljs.cn\/docs\/plugins\/preset-env\/\n        https:\/\/doc.webpack-china.org\/loaders\/babel-loader\/\n\n        1.babel-preset-env 是指动态的require浏览器所缺的转换babel插件.\n        这个动态是通过文件里面的配置,\n        \x22env\x22, {\n          \/\/是否将模块编译为 amd cmd commonjs等\n          \x22modules\x22: false,\n          \x22targets\x22: {\n            \/\/指浏览器最新的2个版本 或者safari大于7的版本 \x26gt;5%是指 市场率超过5%的浏览器\n            \x22browsers\x22: [\x22last 2 versions\x22, \x22safari \x26gt;= 7\x22]\n          }\n        }\n        如果用了env 没有加任何配置的话 那么默认与 babel-preset-latest一样\n\n        2.babel-preset-stage 有4个版本\n        Stage 0 - 稻草人: 只是一个想法，可能是 babel 插件。\n        Stage 1 - 提案: 初步尝试。\n        Stage 2 - 初稿: 完成初步规范。\n        Stage 3 - 候选: 完成规范和浏览器初步实现。\n        Stage 4(隐藏版本表示已经完成 将会在新的一版所发布) 等同于es2015 es2016...\n\n        3.在plugin中有 babel-plugin-transform-runtime 是动态的模块加载所需的转换模块\n        因为如文档所说\n        Babel 几乎可以编译所有时新的 JavaScript 语法，但对于 APIs 来说却并非如此。\n        例如： Promise、Set、Map 等新增对象，Object.assign、Object.entries等静态方法。\n\n        --说到runtime就会提到babel-polyfill\n        (babel-polyfill 的做法是将全局对象通通污染一遍)\n\n        babel-runtime 更像是分散的 polyfill 模块，只会在模块里单独引入需要用到的api, 不会影响全局,\n        例子: 在模块中 import Promise from \x27babel-runtime\/core\/promise\x27\n\n        但是每个模块单独这样引入也是麻烦, 所以可以通过配置babel-plugin-transform-runtime来简单操作\n\n        --- 有一个小细节大家注意\n        api中说到, babel-plugin-transform-runtime默认是和babel-runtime捆绑出现, 前面是开发依赖,后面是生产依赖.\n        但是vue-cli构造出来的项目中,package.json里面并没有在生产依赖中出现babel-runtime??\n\n        后面请教了人,\n        原来在node_module中 babel-plugin-transform-runtime这个包里面的package.json里面已经把babel-runtime加入了生产.\n        所以当install的时候会自动将一连串的东西都装上!!\n\n        4.还有一个缩短build的构造时间, 在下面的babel-loader里面去 exclude掉整个 node_modules的文件夹. 可以缩短1半时间..\n      *\/\x3c\/span\x3e\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e), resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e), resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27node_modules\/webpack-dev-server\/client\x27\x3c\/span\x3e)]\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpe?g|gif|svg)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 限制300kb以下的图片均变为base64. 不然如果使用background-image 打包之后会找不到资源 (limit是按照字节来)\x3c\/span\x3e\n          limit: \x3cspan class=\x22hljs-number\x22\x3e307200\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27img\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27media\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      },\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(woff2?|eot|ttf|otf)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27fonts\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      }\n    ]\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*\n    https:\/\/doc.webpack-china.org\/configuration\/node\/#node\n    每个属性都是 Node.js 全局变量或模块的名称\n    true：提供 polyfill。\n    false: 什么都不提供。\n    \x22empty\x22：提供空对象。\n  *\/\x3c\/span\x3e\n  node: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ prevent webpack from injecting useless setImmediate polyfill because Vue\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ source contains it (although only uses it if it\x27s native).\x3c\/span\x3e\n    setImmediate: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ prevent webpack from injecting mocks to Node native modules\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ that does not make sense for the client\x3c\/span\x3e\n    dgram: \x3cspan class=\x22hljs-string\x22\x3e\x27empty\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3efs\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27empty\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3enet\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27empty\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etls\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27empty\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3echild_process\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27empty\x27\x3c\/span\x3e\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e开发环境(webpack.dev.conf.js)\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27\n\/\/ 开发模式配置文件\n\n\/\/ 引入工具集合的文件\nconst utils = require(\x27.\/utils\x27)\nconst webpack = require(\x27webpack\x27)\nconst config = require(\x27..\/config\x27)\n\/\/ 合并插件类似object.assign合并公共部分\nconst merge = require(\x27webpack-merge\x27)\n\/\/ node的path工具函数\nconst path = require(\x27path\x27)\nconst baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\n\/\/ webpack 复制文件和文件夹的插件\nconst CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\n\/\/ 自动生成 html 并且注入到 .html 文件中的插件\nconst HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\nconst FriendlyErrorsPlugin = require(\x27friendly-errors-webpack-plugin\x27)\n\/\/ 自动检索下一个可用端口\nconst portfinder = require(\x27portfinder\x27)\n\n\/*\n  http:\/\/nodejs.cn\/api\/process.html#process_process_env\n  process.env 是在node环境中 返回一个包含用户环境信息的对象。\n\n  ------\n  这里的p.e属性是node环境原生的,与下面用webpack.d*去定义出来不同,\n  要改变里面的值可参考 .\/build.js\n  直接\n  process.env.NODE_ENV = \x27production\x27\n  ------\n\n*\/\n\n\/\/ 获取在process.env 定义的host和port\nconst HOST = process.env.HOST\nconst PORT = process.env.PORT \x26amp;\x26amp; Number(process.env.PORT)\n\n\/\/ 多页面html路径集合\nconst pages = utils.getEntry(\x27.\/src\/module\/*\/*.html\x27);\n\nconst devWebpackConfig = merge(baseWebpackConfig, {\n  module: {\n    \/\/ css-loader的加工\n    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap, usePostCSS: true })\n  },\n  \n  \/\/ 检测开发环境下是否生成source map(并且生成的模式是怎么样)\n  devtool: config.dev.devtool,\n\n  \/*\n    https:\/\/doc.webpack-china.org\/configuration\/dev-server\/#src\/components\/Sidebar\/Sidebar.jsx\n    webpack-dev-server 的配置\n\n    package.json中\n    \x26quot;webpack-dev-server --inline --progress --config build\/webpack.dev.conf.js\x26quot;\n    --progess 将运行进度输出到控制台。即npm run dev 显示module 的loading\n    --inline  应用程序启用内联模式(inline mode)。\n              这意味着一段处理实时重载的脚本被插入到你的包(bundle)中，并且构建消息将会出现在浏览器控制台\n    (--inline = false 关闭这种模式 那么将不会出现修改代码后实时刷新)\n  *\/\n  devServer: {\n    \/\/ 开发过程中,可配置控制台显示的内容\n    clientLogLevel: \x27warning\x27,\n    \/\/ History API 当遇到 404 响应时会被替代为 index.html\n    historyApiFallback: {\n      rewrites: [\n        { from: \/.*\/, to: path.posix.join(config.dev.assetsPublicPath, \x27index.html\x27) },\n      ],\n    },\n    \/*\n      启用 webpack 的模块热替换特性\n\n      api提到,打开了这个选项 webpack会自动加载HMR的相关内容(HotModuleReplacement),所以不需要额外的配置.\n\n      --------\n      与旧版的vue-cli\x2bwebpack2.0的 dev-middleware结合hot-middleware 实现类似的功能\n      如果你使用了 webpack-dev-middleware 而没有使用 webpack-dev-server，\n      请使用 webpack-hot-middleware package 包，以在你的自定义服务或应用程序上启用 HMR。\n      --------\n\n    *\/\n    hot: true,\n    \/\/ 告诉服务器从哪里提供内容。\n    contentBase: false, \/\/ since we use CopyWebpackPlugin.\n    \/\/ 一切服务都启用gzip 压缩\n    compress: true,\n    host: HOST || config.dev.host,\n    port: PORT || config.dev.port,\n    \/\/ 是否自动打开浏览器\n    \/\/ openPage这个属性可以配置默认打开浏览器的页面\n    open: config.dev.autoOpenBrowser,\n    \/\/ 是否全屏弹窗的形式显示编译过程中的错误\n    overlay: config.dev.errorOverlay\n      ? { warnings: false, errors: true }\n      : false,\n    \/\/ 指的是url的访问路径前缀\n    publicPath: config.dev.assetsPublicPath,\n    \/\/ 代理\n    proxy: config.dev.proxyTable,\n    \/\/ 除了初始启动信息之外的任何内容都不会被打印到控制台\n    quiet: true, \/\/ necessary for FriendlyErrorsPlugin\n    \/\/ 与监视文件相关的控制选项。\n    watchOptions: {\n      poll: config.dev.poll,\n    }\n  },\n  plugins: [\n    \/*\n      https:\/\/doc.webpack-china.org\/plugins\/define-plugin\/\n      允许在环境中产生一个全局变量, 例如下面\x27process.env\x27, 就等于隔壁文件夹 dev.env.js export出来的内容\n      具体的规则看上方api\n\n      但是以下定义的变量在配置文件中去引用会报错,只允许在服务中编写的代码中使用\n    *\/\n    new webpack.DefinePlugin({\n      \x27process.env\x27: require(\x27..\/config\/dev.env\x27)\n    }),\n\n    \/*\n      模块热替换(Hot Module Replacement 或 HMR)\n\n      当上面的 devServer中 hot:true时, 这个模块必须存在,不然webpack会报错.\n      这个模块结合上面的hot是用于,\n      检测到页面更新,在不刷新页面的情况下替换内容,\n      如果hot: true与这个模块均不存在, 则跟旧版本的 dev-middleware\/hot-*一样,修改即会刷新\n    *\/\n    new webpack.HotModuleReplacementPlugin(),\n\n    \/\/ 当开启 HMR 的时候使用该插件会显示模块的相对路径，建议用于开发环境。\n    new webpack.NamedModulesPlugin(), \/\/ HMR shows correct file names in console on update.\n\n    \/\/ 在编译出现错误时，使用 NoEmitOnErrorsPlugin 来跳过输出阶段。这样可以确保输出资源不会包含错误。\n    new webpack.NoEmitOnErrorsPlugin(),\n    \n    \/*\n      https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      该插件将为你生成一个HTML5文件\n\n      配置项文档\n      https:\/\/github.com\/jantimon\/html-webpack-plugin#configuration\n\n      会结合base.conf.js设置中的 入口文件和输出文件,\n      将内容根据输出filename.生成js文件 script到当前的html种\n    *\/\n    \/\/ new HtmlWebpackPlugin({\n    \/\/   \/\/ 生成html的名称\n    \/\/   filename: \x27index.html\x27,\n    \/\/   \/\/ 生成html所需的模板路径\n    \/\/   template: \x27index.html\x27,\n      \n    \/\/     这个配置项指js文件插入的位置 \n\n    \/\/     选项: true body head false\n    \/\/     true和body相同,插入body最后\n    \/\/     head 插入head里面\n      \n    \/\/   inject: true\n    \/\/ }),\n\n    \/*\n      https:\/\/doc.webpack-china.org\/plugins\/copy-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      这个插件是用于复制文件和文件夹,在这里是将静态文件夹的内容拷贝一份在开发环境中\n\n      new CopyWebpackPlugin([patterns], options)\n      A pattern looks like: { from: \x27source\x27, to: \x27dest\x27 }\n    *\/\n    new CopyWebpackPlugin([\n      {\n        \/\/ 拷贝的路径\n        from: path.resolve(__dirname, \x27..\/static\x27),\n        \/\/ 访问的路径\n        to: config.dev.assetsSubDirectory,\n        \/\/ 忽略拷贝的内容(具体的文件名或模糊的路径)\n        ignore: [\x27.*\x27]\n      }\n    ])\n  ]\n})\n\nfor(let pathName in pages){\n  \/*\n    https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n  *\/\n  let options = {\n    filename: `${pathName}.html`,\n    template: pages[pathName],\n    inject: true,\n    \/\/ 指定当前的html插入的模块(如果不设定会将所有页面的js都插入, - -)\n    chunks: [pathName]\n  }\n\n  devWebpackConfig.plugins.push(new HtmlWebpackPlugin(options))\n}\n\n\nmodule.exports = new Promise((resolve, reject) =\x3e {\n  portfinder.basePort = process.env.PORT || config.dev.port\n  \/\/ 使用插件去判断当前端口是否可用\n  portfinder.getPort((err, port) =\x3e {\n    if (err) {\n      reject(err)\n    } else {\n      \/\/ publish the new Port, necessary for e2e tests\n      process.env.PORT = port\n      \/\/ add port to devServer config\n      devWebpackConfig.devServer.port = port\n\n      devWebpackConfig.plugins.push(new FriendlyErrorsPlugin({\n        \/\/ 添加终端提示内容\n        compilationSuccessInfo: {\n          messages: [`Your application is running here: http:\/\/${devWebpackConfig.devServer.host}:${port}`],\n        },\n        onErrors: config.dev.notifyOnErrors\n        ? utils.createNotifierCallback()\n        : undefined\n      }))\n\n      resolve(devWebpackConfig)\n    }\n  })\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发模式配置文件\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 引入工具集合的文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 合并插件类似object.assign合并公共部分\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node的path工具函数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e baseWebpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.conf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 复制文件和文件夹的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CopyWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27copy-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动生成 html 并且注入到 .html 文件中的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e FriendlyErrorsPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27friendly-errors-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动检索下一个可用端口\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e portfinder = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27portfinder\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n  http:\/\/nodejs.cn\/api\/process.html#process_process_env\n  process.env 是在node环境中 返回一个包含用户环境信息的对象。\n\n  ------\n  这里的p.e属性是node环境原生的,与下面用webpack.d*去定义出来不同,\n  要改变里面的值可参考 .\/build.js\n  直接\n  process.env.NODE_ENV = \x27production\x27\n  ------\n\n*\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取在process.env 定义的host和port\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HOST = process.env.HOST\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e PORT = process.env.PORT \x26amp;\x26amp; \x3cspan class=\x22hljs-built_in\x22\x3eNumber\x3c\/span\x3e(process.env.PORT)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 多页面html路径集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e pages = utils.getEntry(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/module\/*\/*.html\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e devWebpackConfig = merge(baseWebpackConfig, {\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ css-loader的加工\x3c\/span\x3e\n    rules: utils.styleLoaders({ \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: config.dev.cssSourceMap, \x3cspan class=\x22hljs-attr\x22\x3eusePostCSS\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e })\n  },\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检测开发环境下是否生成source map(并且生成的模式是怎么样)\x3c\/span\x3e\n  devtool: config.dev.devtool,\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*\n    https:\/\/doc.webpack-china.org\/configuration\/dev-server\/#src\/components\/Sidebar\/Sidebar.jsx\n    webpack-dev-server 的配置\n\n    package.json中\n    \x22webpack-dev-server --inline --progress --config build\/webpack.dev.conf.js\x22\n    --progess 将运行进度输出到控制台。即npm run dev 显示module 的loading\n    --inline  应用程序启用内联模式(inline mode)。\n              这意味着一段处理实时重载的脚本被插入到你的包(bundle)中，并且构建消息将会出现在浏览器控制台\n    (--inline = false 关闭这种模式 那么将不会出现修改代码后实时刷新)\n  *\/\x3c\/span\x3e\n  devServer: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发过程中,可配置控制台显示的内容\x3c\/span\x3e\n    clientLogLevel: \x3cspan class=\x22hljs-string\x22\x3e\x27warning\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ History API 当遇到 404 响应时会被替代为 index.html\x3c\/span\x3e\n    historyApiFallback: {\n      \x3cspan class=\x22hljs-attr\x22\x3erewrites\x3c\/span\x3e: [\n        { \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/.*\/\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e: path.posix.join(config.dev.assetsPublicPath, \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e) },\n      ],\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      启用 webpack 的模块热替换特性\n\n      api提到,打开了这个选项 webpack会自动加载HMR的相关内容(HotModuleReplacement),所以不需要额外的配置.\n\n      --------\n      与旧版的vue-cli\x2bwebpack2.0的 dev-middleware结合hot-middleware 实现类似的功能\n      如果你使用了 webpack-dev-middleware 而没有使用 webpack-dev-server，\n      请使用 webpack-hot-middleware package 包，以在你的自定义服务或应用程序上启用 HMR。\n      --------\n\n    *\/\x3c\/span\x3e\n    hot: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 告诉服务器从哪里提供内容。\x3c\/span\x3e\n    contentBase: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ since we use CopyWebpackPlugin.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 一切服务都启用gzip 压缩\x3c\/span\x3e\n    compress: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: HOST || config.dev.host,\n    \x3cspan class=\x22hljs-attr\x22\x3eport\x3c\/span\x3e: PORT || config.dev.port,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否自动打开浏览器\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ openPage这个属性可以配置默认打开浏览器的页面\x3c\/span\x3e\n    open: config.dev.autoOpenBrowser,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否全屏弹窗的形式显示编译过程中的错误\x3c\/span\x3e\n    overlay: config.dev.errorOverlay\n      ? { \x3cspan class=\x22hljs-attr\x22\x3ewarnings\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eerrors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }\n      : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指的是url的访问路径前缀\x3c\/span\x3e\n    publicPath: config.dev.assetsPublicPath,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 代理\x3c\/span\x3e\n    proxy: config.dev.proxyTable,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 除了初始启动信息之外的任何内容都不会被打印到控制台\x3c\/span\x3e\n    quiet: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ necessary for FriendlyErrorsPlugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 与监视文件相关的控制选项。\x3c\/span\x3e\n    watchOptions: {\n      \x3cspan class=\x22hljs-attr\x22\x3epoll\x3c\/span\x3e: config.dev.poll,\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/plugins\/define-plugin\/\n      允许在环境中产生一个全局变量, 例如下面\x27process.env\x27, 就等于隔壁文件夹 dev.env.js export出来的内容\n      具体的规则看上方api\n\n      但是以下定义的变量在配置文件中去引用会报错,只允许在服务中编写的代码中使用\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\/dev.env\x27\x3c\/span\x3e)\n    }),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      模块热替换(Hot Module Replacement 或 HMR)\n\n      当上面的 devServer中 hot:true时, 这个模块必须存在,不然webpack会报错.\n      这个模块结合上面的hot是用于,\n      检测到页面更新,在不刷新页面的情况下替换内容,\n      如果hot: true与这个模块均不存在, 则跟旧版本的 dev-middleware\/hot-*一样,修改即会刷新\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HotModuleReplacementPlugin(),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当开启 HMR 的时候使用该插件会显示模块的相对路径，建议用于开发环境。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NamedModulesPlugin(), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ HMR shows correct file names in console on update.\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在编译出现错误时，使用 NoEmitOnErrorsPlugin 来跳过输出阶段。这样可以确保输出资源不会包含错误。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.NoEmitOnErrorsPlugin(),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      该插件将为你生成一个HTML5文件\n\n      配置项文档\n      https:\/\/github.com\/jantimon\/html-webpack-plugin#configuration\n\n      会结合base.conf.js设置中的 入口文件和输出文件,\n      将内容根据输出filename.生成js文件 script到当前的html种\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ new HtmlWebpackPlugin({\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 生成html的名称\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   filename: \x27index.html\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 生成html所需的模板路径\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   template: \x27index.html\x27,\x3c\/span\x3e\n      \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     这个配置项指js文件插入的位置 \x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     选项: true body head false\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     true和body相同,插入body最后\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     head 插入head里面\x3c\/span\x3e\n      \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   inject: true\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ }),\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/plugins\/copy-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      这个插件是用于复制文件和文件夹,在这里是将静态文件夹的内容拷贝一份在开发环境中\n\n      new CopyWebpackPlugin([patterns], options)\n      A pattern looks like: { from: \x27source\x27, to: \x27dest\x27 }\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CopyWebpackPlugin([\n      {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 拷贝的路径\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/static\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 访问的路径\x3c\/span\x3e\n        to: config.dev.assetsSubDirectory,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 忽略拷贝的内容(具体的文件名或模糊的路径)\x3c\/span\x3e\n        ignore: [\x3cspan class=\x22hljs-string\x22\x3e\x27.*\x27\x3c\/span\x3e]\n      }\n    ])\n  ]\n})\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e pathName \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e pages){\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*\n    https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n  *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e options = {\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${pathName}\x3c\/span\x3e.html`\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: pages[pathName],\n    \x3cspan class=\x22hljs-attr\x22\x3einject\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指定当前的html插入的模块(如果不设定会将所有页面的js都插入, - -)\x3c\/span\x3e\n    chunks: [pathName]\n  }\n\n  devWebpackConfig.plugins.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin(options))\n}\n\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  portfinder.basePort = process.env.PORT || config.dev.port\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用插件去判断当前端口是否可用\x3c\/span\x3e\n  portfinder.getPort(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, port\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n      reject(err)\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ publish the new Port, necessary for e2e tests\x3c\/span\x3e\n      process.env.PORT = port\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ add port to devServer config\x3c\/span\x3e\n      devWebpackConfig.devServer.port = port\n\n      devWebpackConfig.plugins.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e FriendlyErrorsPlugin({\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加终端提示内容\x3c\/span\x3e\n        compilationSuccessInfo: {\n          \x3cspan class=\x22hljs-attr\x22\x3emessages\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e`Your application is running here: http:\/\/\x3cspan class=\x22hljs-subst\x22\x3e${devWebpackConfig.devServer.host}\x3c\/span\x3e:\x3cspan class=\x22hljs-subst\x22\x3e${port}\x3c\/span\x3e`\x3c\/span\x3e],\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3eonErrors\x3c\/span\x3e: config.dev.notifyOnErrors\n        ? utils.createNotifierCallback()\n        : \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e\n      }))\n\n      resolve(devWebpackConfig)\n    }\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e生成环境\x3c\/h3\x3e\n\x3ch4\x3ewebpack.prod.conf.js\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27\n\/\/ 生产环境配置文件\n\nconst path = require(\x27path\x27)\nconst utils = require(\x27.\/utils\x27)\nconst webpack = require(\x27webpack\x27)\nconst config = require(\x27..\/config\x27)\nconst merge = require(\x27webpack-merge\x27)\n\/\/ 基础设置配置文件\nconst baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\n\/\/ webpack 复制文件和文件夹的插件\nconst CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\n\/\/ 自动生成 html 并且注入到 .html 文件中的插件\nconst HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\n\/\/ 整合css的工具 https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\nconst ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\n\/\/ 压缩提取出的css 并解决ExtractTextPlugin分离出的重复问题\nconst OptimizeCSSPlugin = require(\x27optimize-css-assets-webpack-plugin\x27)\n\/\/ 压缩代码\nconst UglifyJsPlugin = require(\x27uglifyjs-webpack-plugin\x27)\n\nconst env = require(\x27..\/config\/prod.env\x27)\n\n\/\/ 多页面html路径集合\nconst pages = utils.getEntry(\x27.\/src\/module\/*\/*.html\x27);\n\nconst webpackConfig = merge(baseWebpackConfig, {\n  module: {\n    \/*\n      在utils.js已经配置好相关对extractTextPlugin的css抽取配置.通过extract: true即可触发\n\n      如果要触发这个 extract 需要在plugins里面注册一下\n    *\/\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true,\n      usePostCSS: true\n    })\n  },\n  \/\/ 检测生产环境下是否生成source map(并且生成的模式是怎么样)\n  devtool: config.build.productionSourceMap ? config.build.devtool : false,\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath(\x27js\/[name].[chunkhash].js\x27),\n    \/\/ 指的是通过CommonsChunkPlugin提取出来模块的命名规则\n    chunkFilename: utils.assetsPath(\x27js\/[id].[chunkhash].js\x27)\n  },\n  plugins: [\n    \/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html\n    \/\/ 定义全局变量\n    new webpack.DefinePlugin({\n      \x27process.env\x27: env\n    }),\n\n    \/\/ https:\/\/doc.webpack-china.org\/plugins\/uglifyjs-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n    new UglifyJsPlugin({\n      \/\/ 压缩uglify的配置\n      uglifyOptions: {\n        compress: {\n          \/\/ 压缩后删除没有用到的代码时不输出警告\n          warnings: false\n        }\n      },\n      \/\/ 是否使用sourcemap做关联\n      sourceMap: config.build.productionSourceMap,\n      \/\/ 压缩代码中是否使用多进程进行构建\n      parallel: true\n    }),\n    \n    \/\/ 将每个模块的css提取到一个文件里面\n    new ExtractTextPlugin({\n      \/\/ 提取出来的文件名称\n      filename: utils.assetsPath(\x27css\/[name].[contenthash].css\x27),\n      \/\/ Setting the following option to `false` will not extract CSS from codesplit chunks.\n      \/\/ Their CSS will instead be inserted dynamically with style-loader when the codesplit chunk has been loaded by webpack.\n      \/\/ It\x27s currently set to `true` because we are seeing that sourcemaps are included in the codesplit bundle as well when it\x27s `false`, \n      \/\/ increasing file size: https:\/\/github.com\/vuejs-templates\/webpack\/issues\/1110\n      allChunks: true,\n    }),\n\n    \/\/ Compress extracted CSS. We are using this plugin so that possible\n    \/\/ duplicated CSS from different components can be deduped.\n    \/\/ 删除重复的css内容\n    new OptimizeCSSPlugin({\n      cssProcessorOptions: config.build.productionSourceMap\n        ? { safe: true, map: { inline: false } }\n        : { safe: true }\n    }),\n    \/\/ generate dist index.html with correct asset hash for caching.\n    \/\/ you can customize output by editing \/index.html\n    \/\/ see https:\/\/github.com\/ampedandwired\/html-webpack-plugin\n\n    \/*\n      https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n    *\/\n    \/\/ new HtmlWebpackPlugin({\n    \/\/   \/\/ 生成html的名称\n    \/\/   filename: config.build.index,\n    \/\/   template: \x27index.html\x27,\n    \/\/   \/\/ 这个配置项指js文件插入的位置 \n    \/\/   inject: true,\n    \/\/   \/\/ 额外的精简配置项\n    \/\/   minify: {\n    \/\/     \/\/ 删去html中的注释项\n    \/\/     removeComments: true,\n    \/\/     \/\/ 折叠html中的空白字符\n    \/\/     collapseWhitespace: true,\n    \/\/     \/\/ 删去不必要的属性\n    \/\/     removeAttributeQuotes: true\n    \/\/     \/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\n    \/\/   },\n    \/\/   \/\/ necessary to consistently work with multiple chunks via CommonsChunkPlugin\n    \/\/   \/\/ 控制生成的js插入位置的顺序(可以结合chunks进行选择)\n    \/\/   chunksSortMode: \x27dependency\x27\n    \/\/ }),\n\n    \/\/ keep module.id stable when vendor modules does not change\n    \/\/ 该插件会根据模块的相对路径生成一个四位数的hash作为模块id\n    new webpack.HashedModuleIdsPlugin(),\n\n    \/\/ enable scope hoisting\n    \/*\n      https:\/\/doc.webpack-china.org\/plugins\/module-concatenation-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      webpack3.0 新特性,\n      从原本的每个bundle模块打包成多个单独闭包去调用,\n      变为现在的在一个大闭包里面去调用各个模块,\n      提升了效率\n    *\/\n    new webpack.optimize.ModuleConcatenationPlugin(),\n\n    \/\/ split vendor js into its own file\n    \/*\n      提取公共模块(将公共的import模块 提取到一个文件中.)\n      https:\/\/doc.webpack-china.org\/plugins\/commons-chunk-plugin\n      \n    *\/\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n      \/\/ 模块被抽离出来至vendor文件中的判断\n      minChunks (module) {\n        \/*\n          一般来讲这里的module会返回整个项目所用到的组件库包,和import的东西\n          然后通过这个函数去控制一下哪一些放入vendor的文件\n\n          可以通过具体的数值或者Boolean值来控制抽取的颗粒度.\n          返回true, 是会将所有的import模块都提取,\n          返回false,是将重复的提取出来,\n          具体的数值,就会作为调用模块的次数 来提取,\n        *\/\n        return (\n          module.resource \x26amp;\x26amp;\n          \/\\.js$\/.test(module.resource) \x26amp;\x26amp;\n          module.resource.indexOf(\n            path.join(__dirname, \x27..\/node_modules\x27)\n          ) === 0\n        )\n      }\n    }),\n    \/*\n      https:\/\/doc.webpack-china.org\/concepts\/manifest\/\n      当编译器(compiler)开始执行、解析和映射应用程序时，设置好的 \/src文件夹就会被打散\n      但会保留所有模块的详细要点。这个数据集合称为 \x26quot;Manifest\x26quot;\n      当完成打包并发送到浏览器时，会在运行时通过 Manifest 来解析和加载模块。\n\n      如果不提取manifest的数据,每次build打包 上面vendor文件的hash值也会被改变,导致如果发版本,\n      未改变vendor的代码因为hash改变 缓存也会被干掉\n    *\/\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27manifest\x27,\n      \/\/ 传入 `Infinity` 会马上生成 公共独立文件\n      minChunks: Infinity\n    }),\n    \n    \/*\n      https:\/\/webpack.js.org\/plugins\/commons-chunk-plugin\/#extra-async-commons-chunk\n      通过children和async属性,\n      将那种又被父组件和子组件一起公用的模块抽取出来,\n    *\/\n    \/\/ new webpack.optimize.CommonsChunkPlugin({\n    \/\/   name: \x27app\x27,\n    \/\/   \/\/ (创建一个异步 公共chunk)\n    \/\/   async: \x27vendor-async\x27,\n    \/\/   children: true,\n    \/\/   \/\/ (在提取之前需要至少三个子 chunk 共享这个模块)\n    \/\/   minChunks: 3\n    \/\/ }),\n\n    \/*\n      https:\/\/doc.webpack-china.org\/plugins\/copy-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      这个插件是用于复制文件和文件夹,在这里是将静态文件夹的内容拷贝一份在开发环境中\n\n      new CopyWebpackPlugin([patterns], options)\n      A pattern looks like: { from: \x27source\x27, to: \x27dest\x27 }\n    *\/\n    new CopyWebpackPlugin([\n      {\n        from: path.resolve(__dirname, \x27..\/static\x27),\n        to: config.build.assetsSubDirectory,\n        \/\/ 忽略拷贝的内容(具体的文件名或模糊的路径)\n        ignore: [\x27tpl\/*\x27] \/\/不打包模板文件夹\n      }\n    ])\n  ]\n})\n\n\/\/ gzip压缩\nif (config.build.productionGzip) {\n  const CompressionWebpackPlugin = require(\x27compression-webpack-plugin\x27)\n\n  webpackConfig.plugins.push(\n    new CompressionWebpackPlugin({\n      asset: \x27[path].gz[query]\x27,\n      algorithm: \x27gzip\x27,\n      test: new RegExp(\n        \x27\\\\.(\x27 \x2b\n        config.build.productionGzipExtensions.join(\x27|\x27) \x2b\n        \x27)$\x27\n      ),\n      threshold: 10240,\n      minRatio: 0.8\n    })\n  )\n}\n\n\/\/ bundle分析\nif (config.build.bundleAnalyzerReport) {\n  const BundleAnalyzerPlugin = require(\x27webpack-bundle-analyzer\x27).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(new BundleAnalyzerPlugin())\n}\n\nfor(let pathName in pages){\n  \/*\n    https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n  *\/\n  let options = {\/\/ 生成html的名称\n    filename: `${pathName}.html`,\n    template: pages[pathName],\n    \/\/ 这个配置项指js文件插入的位置 \n    inject: true,\n    \/\/ 额外的精简配置项\n    minify: {\n      \/\/ 删去html中的注释项\n      removeComments: true,\n      \/\/ 折叠html中的空白字符\n      collapseWhitespace: true,\n      \/\/ 删去不必要的属性\n      removeAttributeQuotes: true\n      \/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\n    },\n    \/\/ 控制生成的js插入位置的顺序(可以结合chunks进行选择)\n    chunksSortMode: \x27dependency\x27\n  }\n\n  \/\/判断处理的路径是否在入口配置里\n  if(pathName in webpackConfig.entry){\n    options.chunks = [\x27manifest\x27, \x27vendor\x27, pathName];\n    \/\/ 加上hash值进行缓存处理\n    options.hash = true;\n  }\n\n  webpackConfig.plugins.push(new HtmlWebpackPlugin(options))\n}\n\nmodule.exports = webpackConfig\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生产环境配置文件\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 基础设置配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e baseWebpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.conf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 复制文件和文件夹的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CopyWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27copy-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动生成 html 并且注入到 .html 文件中的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 整合css的工具 https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩提取出的css 并解决ExtractTextPlugin分离出的重复问题\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e OptimizeCSSPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27optimize-css-assets-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e UglifyJsPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27uglifyjs-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e env = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\/prod.env\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 多页面html路径集合\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e pages = utils.getEntry(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/module\/*\/*.html\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpackConfig = merge(baseWebpackConfig, {\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      在utils.js已经配置好相关对extractTextPlugin的css抽取配置.通过extract: true即可触发\n\n      如果要触发这个 extract 需要在plugins里面注册一下\n    *\/\x3c\/span\x3e\n    rules: utils.styleLoaders({\n      \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: config.build.productionSourceMap,\n      \x3cspan class=\x22hljs-attr\x22\x3eextract\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eusePostCSS\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    })\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检测生产环境下是否生成source map(并且生成的模式是怎么样)\x3c\/span\x3e\n  devtool: config.build.productionSourceMap ? config.build.devtool : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: config.build.assetsRoot,\n    \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27js\/[name].[chunkhash].js\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指的是通过CommonsChunkPlugin提取出来模块的命名规则\x3c\/span\x3e\n    chunkFilename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27js\/[id].[chunkhash].js\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义全局变量\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: env\n    }),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/doc.webpack-china.org\/plugins\/uglifyjs-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UglifyJsPlugin({\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩uglify的配置\x3c\/span\x3e\n      uglifyOptions: {\n        \x3cspan class=\x22hljs-attr\x22\x3ecompress\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩后删除没有用到的代码时不输出警告\x3c\/span\x3e\n          warnings: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n        }\n      },\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否使用sourcemap做关联\x3c\/span\x3e\n      sourceMap: config.build.productionSourceMap,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 压缩代码中是否使用多进程进行构建\x3c\/span\x3e\n      parallel: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将每个模块的css提取到一个文件里面\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin({\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提取出来的文件名称\x3c\/span\x3e\n      filename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27css\/[name].[contenthash].css\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Setting the following option to `false` will not extract CSS from codesplit chunks.\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Their CSS will instead be inserted dynamically with style-loader when the codesplit chunk has been loaded by webpack.\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ It\x27s currently set to `true` because we are seeing that sourcemaps are included in the codesplit bundle as well when it\x27s `false`, \x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ increasing file size: https:\/\/github.com\/vuejs-templates\/webpack\/issues\/1110\x3c\/span\x3e\n      allChunks: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    }),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Compress extracted CSS. We are using this plugin so that possible\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ duplicated CSS from different components can be deduped.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除重复的css内容\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e OptimizeCSSPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ecssProcessorOptions\x3c\/span\x3e: config.build.productionSourceMap\n        ? { \x3cspan class=\x22hljs-attr\x22\x3esafe\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3emap\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3einline\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e } }\n        : { \x3cspan class=\x22hljs-attr\x22\x3esafe\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ generate dist index.html with correct asset hash for caching.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ you can customize output by editing \/index.html\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ see https:\/\/github.com\/ampedandwired\/html-webpack-plugin\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ new HtmlWebpackPlugin({\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 生成html的名称\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   filename: config.build.index,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   template: \x27index.html\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 这个配置项指js文件插入的位置 \x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   inject: true,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 额外的精简配置项\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   minify: {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     \/\/ 删去html中的注释项\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     removeComments: true,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     \/\/ 折叠html中的空白字符\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     collapseWhitespace: true,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     \/\/ 删去不必要的属性\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     removeAttributeQuotes: true\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/     \/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   },\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ necessary to consistently work with multiple chunks via CommonsChunkPlugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ 控制生成的js插入位置的顺序(可以结合chunks进行选择)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   chunksSortMode: \x27dependency\x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ }),\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ keep module.id stable when vendor modules does not change\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 该插件会根据模块的相对路径生成一个四位数的hash作为模块id\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HashedModuleIdsPlugin(),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ enable scope hoisting\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/plugins\/module-concatenation-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      webpack3.0 新特性,\n      从原本的每个bundle模块打包成多个单独闭包去调用,\n      变为现在的在一个大闭包里面去调用各个模块,\n      提升了效率\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.ModuleConcatenationPlugin(),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ split vendor js into its own file\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      提取公共模块(将公共的import模块 提取到一个文件中.)\n      https:\/\/doc.webpack-china.org\/plugins\/commons-chunk-plugin\n      \n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模块被抽离出来至vendor文件中的判断\x3c\/span\x3e\n      minChunks (\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/*\n          一般来讲这里的module会返回整个项目所用到的组件库包,和import的东西\n          然后通过这个函数去控制一下哪一些放入vendor的文件\n\n          可以通过具体的数值或者Boolean值来控制抽取的颗粒度.\n          返回true, 是会将所有的import模块都提取,\n          返回false,是将重复的提取出来,\n          具体的数值,就会作为调用模块的次数 来提取,\n        *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n          \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e.test(\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource) \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource.indexOf(\n            path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/node_modules\x27\x3c\/span\x3e)\n          ) === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        )\n      }\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/concepts\/manifest\/\n      当编译器(compiler)开始执行、解析和映射应用程序时，设置好的 \/src文件夹就会被打散\n      但会保留所有模块的详细要点。这个数据集合称为 \x22Manifest\x22\n      当完成打包并发送到浏览器时，会在运行时通过 Manifest 来解析和加载模块。\n\n      如果不提取manifest的数据,每次build打包 上面vendor文件的hash值也会被改变,导致如果发版本,\n      未改变vendor的代码因为hash改变 缓存也会被干掉\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 传入 `Infinity` 会马上生成 公共独立文件\x3c\/span\x3e\n      minChunks: \x3cspan class=\x22hljs-literal\x22\x3eInfinity\x3c\/span\x3e\n    }),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/webpack.js.org\/plugins\/commons-chunk-plugin\/#extra-async-commons-chunk\n      通过children和async属性,\n      将那种又被父组件和子组件一起公用的模块抽取出来,\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ new webpack.optimize.CommonsChunkPlugin({\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   name: \x27app\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ (创建一个异步 公共chunk)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   async: \x27vendor-async\x27,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   children: true,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   \/\/ (在提取之前需要至少三个子 chunk 共享这个模块)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/   minChunks: 3\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ }),\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/doc.webpack-china.org\/plugins\/copy-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n      这个插件是用于复制文件和文件夹,在这里是将静态文件夹的内容拷贝一份在开发环境中\n\n      new CopyWebpackPlugin([patterns], options)\n      A pattern looks like: { from: \x27source\x27, to: \x27dest\x27 }\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CopyWebpackPlugin([\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3efrom\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/static\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3eto\x3c\/span\x3e: config.build.assetsSubDirectory,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 忽略拷贝的内容(具体的文件名或模糊的路径)\x3c\/span\x3e\n        ignore: [\x3cspan class=\x22hljs-string\x22\x3e\x27tpl\/*\x27\x3c\/span\x3e] \x3cspan class=\x22hljs-comment\x22\x3e\/\/不打包模板文件夹\x3c\/span\x3e\n      }\n    ])\n  ]\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ gzip压缩\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.productionGzip) {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CompressionWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27compression-webpack-plugin\x27\x3c\/span\x3e)\n\n  webpackConfig.plugins.push(\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CompressionWebpackPlugin({\n      \x3cspan class=\x22hljs-attr\x22\x3easset\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[path].gz[query]\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ealgorithm\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27gzip\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(\n        \x3cspan class=\x22hljs-string\x22\x3e\x27\\\\.(\x27\x3c\/span\x3e \x2b\n        config.build.productionGzipExtensions.join(\x3cspan class=\x22hljs-string\x22\x3e\x27|\x27\x3c\/span\x3e) \x2b\n        \x3cspan class=\x22hljs-string\x22\x3e\x27)$\x27\x3c\/span\x3e\n      ),\n      \x3cspan class=\x22hljs-attr\x22\x3ethreshold\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10240\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eminRatio\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e\n    })\n  )\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ bundle分析\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.bundleAnalyzerReport) {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BundleAnalyzerPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-bundle-analyzer\x27\x3c\/span\x3e).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BundleAnalyzerPlugin())\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e pathName \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e pages){\n  \x3cspan class=\x22hljs-comment\x22\x3e\/*\n    https:\/\/doc.webpack-china.org\/plugins\/html-webpack-plugin\/#src\/components\/Sidebar\/Sidebar.jsx\n  *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e options = {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成html的名称\x3c\/span\x3e\n    filename: \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${pathName}\x3c\/span\x3e.html`\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: pages[pathName],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个配置项指js文件插入的位置 \x3c\/span\x3e\n    inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 额外的精简配置项\x3c\/span\x3e\n    minify: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删去html中的注释项\x3c\/span\x3e\n      removeComments: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 折叠html中的空白字符\x3c\/span\x3e\n      collapseWhitespace: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删去不必要的属性\x3c\/span\x3e\n      removeAttributeQuotes: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 控制生成的js插入位置的顺序(可以结合chunks进行选择)\x3c\/span\x3e\n    chunksSortMode: \x3cspan class=\x22hljs-string\x22\x3e\x27dependency\x27\x3c\/span\x3e\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断处理的路径是否在入口配置里\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(pathName \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e webpackConfig.entry){\n    options.chunks = [\x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e, pathName];\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加上hash值进行缓存处理\x3c\/span\x3e\n    options.hash = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n  }\n\n  webpackConfig.plugins.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin(options))\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = webpackConfig\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3ebuild.js\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27\nrequire(\x27.\/check-versions\x27)()\n\n\/\/ 在process.env加入生产标识\nprocess.env.NODE_ENV = \x27production\x27\n\n\/\/ loading的插件 https:\/\/github.com\/sindresorhus\/ora\nconst ora = require(\x27ora\x27)\n\/\/ 可以在 node 中执行`rm -rf`的工具\n\/\/ https:\/\/github.com\/isaacs\/rimraf\nconst rm = require(\x27rimraf\x27)\nconst path = require(\x27path\x27)\n\n\/\/ 在终端输出带颜色的文字\n\/\/ https:\/\/github.com\/chalk\/chalk\nconst chalk = require(\x27chalk\x27)\nconst webpack = require(\x27webpack\x27)\nconst config = require(\x27..\/config\x27)\n\/\/生产配置文件\nconst webpackConfig = require(\x27.\/webpack.prod.conf\x27)\n\n\/\/ 实例化ora loading的插件\nconst spinner = ora(\x27building for production...\x27)\nspinner.start()\n\n\/\/ 删除这个文件夹 （递归删除）\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =\x3e {\n  if (err) throw err\n  webpack(webpackConfig, (err, stats) =\x3e {\n    \/\/ 构建成功\n    spinner.stop()\n    if (err) throw err\n    process.stdout.write(stats.toString({\n      colors: true,\n      modules: false,\n      children: false, \/\/ If you are using ts-loader, setting this to true will make TypeScript errors show up during build.\n      chunks: false,\n      chunkModules: false\n    }) \x2b \x27\\n\\n\x27)\n\n    if (stats.hasErrors()) {\n      console.log(chalk.red(\x27  Build failed with errors.\\n\x27))\n      process.exit(1)\n    }\n\n    \/\/ 终端打印\n    console.log(chalk.cyan(\x27  Build complete.\\n\x27))\n    console.log(chalk.yellow(\n      \x27  Tip: built files are meant to be served over an HTTP server.\\n\x27 \x2b\n      \x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\n    ))\n  })\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/check-versions\x27\x3c\/span\x3e)()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在process.env加入生产标识\x3c\/span\x3e\nprocess.env.NODE_ENV = \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ loading的插件 https:\/\/github.com\/sindresorhus\/ora\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ora = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ora\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可以在 node 中执行`rm -rf`的工具\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/isaacs\/rimraf\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rm = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27rimraf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在终端输出带颜色的文字\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/github.com\/chalk\/chalk\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e chalk = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chalk\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/生产配置文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.prod.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实例化ora loading的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e spinner = ora(\x3cspan class=\x22hljs-string\x22\x3e\x27building for production...\x27\x3c\/span\x3e)\nspinner.start()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除这个文件夹 （递归删除）\x3c\/span\x3e\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n  webpack(webpackConfig, (err, stats) =\x26gt; {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建成功\x3c\/span\x3e\n    spinner.stop()\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n    process.stdout.write(stats.toString({\n      \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3echildren\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ If you are using ts-loader, setting this to true will make TypeScript errors show up during build.\x3c\/span\x3e\n      chunks: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3echunkModules\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\\n\\n\x27\x3c\/span\x3e)\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (stats.hasErrors()) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.red(\x3cspan class=\x22hljs-string\x22\x3e\x27  Build failed with errors.\\n\x27\x3c\/span\x3e))\n      process.exit(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 终端打印\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.cyan(\x3cspan class=\x22hljs-string\x22\x3e\x27  Build complete.\\n\x27\x3c\/span\x3e))\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.yellow(\n      \x3cspan class=\x22hljs-string\x22\x3e\x27  Tip: built files are meant to be served over an HTTP server.\\n\x27\x3c\/span\x3e \x2b\n      \x3cspan class=\x22hljs-string\x22\x3e\x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\x3c\/span\x3e\n    ))\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e其他文件\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cul\x3e\n\x3cli\x3evue-loader.conf.js 配置vue-loader的内容\x3c\/li\x3e\n\x3cli\x3echeck-versions.js 顾名思义检查版本的文件\x3c\/li\x3e\n\x3c\/ul\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e公共方法文件(utils.js)\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27\nconst path = require(\x27path\x27)\nconst config = require(\x27..\/config\x27)\n\/\/ 打包css方法\nconst ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\nconst packageConfig = require(\x27..\/package.json\x27)\n\/\/ 匹配文件夹路径组件 https:\/\/www.cnblogs.com\/waitforyou\/p\/7044171.html\nconst glob = require(\x27glob\x27)\n\nexports.assetsPath = function (_path) {\n  const assetsSubDirectory = process.env.NODE_ENV === \x27production\x27\n    ? config.build.assetsSubDirectory\n    : config.dev.assetsSubDirectory\n\n  return path.posix.join(assetsSubDirectory, _path)\n}\n\nexports.cssLoaders = function (options) {\n  options = options || {}\n\n  const cssLoader = {\n    loader: \x27css-loader\x27,\n    options: {\n      sourceMap: options.sourceMap\n    }\n  }\n\n  const postcssLoader = {\n    loader: \x27postcss-loader\x27,\n    options: {\n      sourceMap: options.sourceMap\n    }\n  }\n\n  \/\/ generate loader string to be used with extract text plugin\n  function generateLoaders (loader, loaderOptions) {\n    \/\/ 判断是否使用postcss\n    const loaders = options.usePostCSS ? [cssLoader, postcssLoader] : [cssLoader]\n\n    if (loader) {\n      loaders.push({\n        loader: loader \x2b \x27-loader\x27,\n        options: Object.assign({}, loaderOptions, {\n          sourceMap: options.sourceMap\n        })\n      })\n    }\n\n    \/\/ Extract CSS when that option is specified\n    \/\/ (which is the case during production build)\n    \/*\n      https:\/\/www.npmjs.com\/package\/extract-text-webpack-plugin\n      下面这一块的配置是指,是否需要使用extract这个插件,将css整体抽取出来.\n\n      其他俩属性看一下api,\n      有一个关键的配置属性.\n      publicPath   这个属性是指,改写css中资源引用的路径.\n\n      --\n      如果不配置这个属性,部分例如background-image对本地文件夹图片url的引用.抽取后会导致路径出错\n    *\/\n    if (options.extract) {\n      return ExtractTextPlugin.extract({\n        use: loaders,\n        fallback: \x27vue-style-loader\x27,\n        publicPath: \x27..\/..\/..\/\x27\n      })\n    } else {\n      return [\x27vue-style-loader\x27].concat(loaders)\n    }\n  }\n\n  \/\/ https:\/\/vue-loader.vuejs.org\/en\/configurations\/extract-css.html\n  return {\n    css: generateLoaders(),\n    postcss: generateLoaders(),\n    less: generateLoaders(\x27less\x27),\n    sass: generateLoaders(\x27sass\x27, { indentedSyntax: true }),\n    scss: generateLoaders(\x27sass\x27),\n    stylus: generateLoaders(\x27stylus\x27),\n    styl: generateLoaders(\x27stylus\x27)\n  }\n}\n\n\/\/ Generate loaders for standalone style files (outside of .vue)\nexports.styleLoaders = function (options) {\n  const output = []\n  const loaders = exports.cssLoaders(options)\n\n  for (const extension in loaders) {\n    const loader = loaders[extension]\n    output.push({\n      test: new RegExp(\x27\\\\.\x27 \x2b extension \x2b \x27$\x27),\n      use: loader\n    })\n  }\n\n  return output\n}\n\nexports.createNotifierCallback = () =\x3e {\n  const notifier = require(\x27node-notifier\x27)\n\n  return (severity, errors) =\x3e {\n    if (severity !== \x27error\x27) return\n\n    const error = errors[0]\n    const filename = error.file \x26amp;\x26amp; error.file.split(\x27!\x27).pop()\n\n    notifier.notify({\n      title: packageConfig.name,\n      message: severity \x2b \x27: \x27 \x2b error.name,\n      subtitle: filename || \x27\x27,\n      icon: path.join(__dirname, \x27logo.png\x27)\n    })\n  }\n}\n\n\/\/ 多页面模式的路径返回方法\nexports.getEntry = function (globPath) {\n  var entries = {},       \/\/路径集合\n      basename = \x27\x27,      \/\/路径的标识\n      key = \x27\x27,           \/\/路径的key值\n      tmp;                \/\/处理数组\n\n  \/\/可以获得传入path路径下的所有文件(返回数组)\n  glob.sync(globPath).forEach(function (item) {\n    \/*\n      http:\/\/nodejs.cn\/api\/path.html\n\n      path.basename(path[, ext]) 是用于返回路径的最后部分\n\n      path.basename(\x27\/foo\/bar\/baz\/asdf\/quux.html\x27);\n      \/\/ 返回: \x27quux.html\x27\n\n      path.basename(\x27\/foo\/bar\/baz\/asdf\/quux.html\x27, \x27.html\x27);\n      \/\/ 返回: \x27quux\x27\n\n      -------\n      path.extname(path) 方法返回 path 的扩展名\n      path.extname(\x27index.html\x27);\n      \/\/ 返回: \x27.html\x27\n    *\/\n    basename = path.basename(item, path.extname(item));\n    tmp = item.split(\x27\/\x27).splice(2);    \/\/默认进来的地址是 .\/src\/页面文件夹\/***  从src后面那个开始处理\n    key = tmp.shift() \x2b \x27\/\x27 \x2b basename; \/\/获取存放页面的文件夹名称 (拼接成 页面文件夹\/对应页面的格式)\n    entries[key] = item;\n  })\n\n  return entries;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打包css方法\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e packageConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/package.json\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配文件夹路径组件 https:\/\/www.cnblogs.com\/waitforyou\/p\/7044171.html\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e glob = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27glob\x27\x3c\/span\x3e)\n\nexports.assetsPath = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_path\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e assetsSubDirectory = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n    ? config.build.assetsSubDirectory\n    : config.dev.assetsSubDirectory\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.posix.join(assetsSubDirectory, _path)\n}\n\nexports.cssLoaders = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  options = options || {}\n\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cssLoader = {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: options.sourceMap\n    }\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e postcssLoader = {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27postcss-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: options.sourceMap\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ generate loader string to be used with extract text plugin\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egenerateLoaders\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eloader, loaderOptions\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断是否使用postcss\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e loaders = options.usePostCSS ? [cssLoader, postcssLoader] : [cssLoader]\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (loader) {\n      loaders.push({\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: loader \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, loaderOptions, {\n          \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: options.sourceMap\n        })\n      })\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Extract CSS when that option is specified\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (which is the case during production build)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      https:\/\/www.npmjs.com\/package\/extract-text-webpack-plugin\n      下面这一块的配置是指,是否需要使用extract这个插件,将css整体抽取出来.\n\n      其他俩属性看一下api,\n      有一个关键的配置属性.\n      publicPath   这个属性是指,改写css中资源引用的路径.\n\n      --\n      如果不配置这个属性,部分例如background-image对本地文件夹图片url的引用.抽取后会导致路径出错\n    *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (options.extract) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ExtractTextPlugin.extract({\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: loaders,\n        \x3cspan class=\x22hljs-attr\x22\x3efallback\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/..\/\x27\x3c\/span\x3e\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e].concat(loaders)\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/vue-loader.vuejs.org\/en\/configurations\/extract-css.html\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3ecss\x3c\/span\x3e: generateLoaders(),\n    \x3cspan class=\x22hljs-attr\x22\x3epostcss\x3c\/span\x3e: generateLoaders(),\n    \x3cspan class=\x22hljs-attr\x22\x3eless\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27less\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3esass\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3eindentedSyntax\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }),\n    \x3cspan class=\x22hljs-attr\x22\x3escss\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3estylus\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27stylus\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3estyl\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27stylus\x27\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Generate loaders for standalone style files (outside of .vue)\x3c\/span\x3e\nexports.styleLoaders = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e output = []\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e loaders = exports.cssLoaders(options)\n\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e extension \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e loaders) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e loader = loaders[extension]\n    output.push({\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27\\\\.\x27\x3c\/span\x3e \x2b extension \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27$\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: loader\n    })\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e output\n}\n\nexports.createNotifierCallback = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e notifier = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27node-notifier\x27\x3c\/span\x3e)\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eseverity, errors\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (severity !== \x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e error = errors[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e filename = error.file \x26amp;\x26amp; error.file.split(\x3cspan class=\x22hljs-string\x22\x3e\x27!\x27\x3c\/span\x3e).pop()\n\n    notifier.notify({\n      \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: packageConfig.name,\n      \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: severity \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27: \x27\x3c\/span\x3e \x2b error.name,\n      \x3cspan class=\x22hljs-attr\x22\x3esubtitle\x3c\/span\x3e: filename || \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eicon\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27logo.png\x27\x3c\/span\x3e)\n    })\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 多页面模式的路径返回方法\x3c\/span\x3e\nexports.getEntry = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eglobPath\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e entries = {},       \x3cspan class=\x22hljs-comment\x22\x3e\/\/路径集合\x3c\/span\x3e\n      basename = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,      \x3cspan class=\x22hljs-comment\x22\x3e\/\/路径的标识\x3c\/span\x3e\n      key = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,           \x3cspan class=\x22hljs-comment\x22\x3e\/\/路径的key值\x3c\/span\x3e\n      tmp;                \x3cspan class=\x22hljs-comment\x22\x3e\/\/处理数组\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/可以获得传入path路径下的所有文件(返回数组)\x3c\/span\x3e\n  glob.sync(globPath).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n      http:\/\/nodejs.cn\/api\/path.html\n\n      path.basename(path[, ext]) 是用于返回路径的最后部分\n\n      path.basename(\x27\/foo\/bar\/baz\/asdf\/quux.html\x27);\n      \/\/ 返回: \x27quux.html\x27\n\n      path.basename(\x27\/foo\/bar\/baz\/asdf\/quux.html\x27, \x27.html\x27);\n      \/\/ 返回: \x27quux\x27\n\n      -------\n      path.extname(path) 方法返回 path 的扩展名\n      path.extname(\x27index.html\x27);\n      \/\/ 返回: \x27.html\x27\n    *\/\x3c\/span\x3e\n    basename = path.basename(item, path.extname(item));\n    tmp = item.split(\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e).splice(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);    \x3cspan class=\x22hljs-comment\x22\x3e\/\/默认进来的地址是 .\/src\/页面文件夹\/***  从src后面那个开始处理\x3c\/span\x3e\n    key = tmp.shift() \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e \x2b basename; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取存放页面的文件夹名称 (拼接成 页面文件夹\/对应页面的格式)\x3c\/span\x3e\n    entries[key] = item;\n  })\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e entries;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3econfig文件夹\x3c\/h3\x3e\n\x3cblockquote\x3e一些被提取了出来的配置标识项, dev.env.js标识开发环境 prod.env.js生产环境(不过其实我不知道这2个有什么用 - -)\x3c\/blockquote\x3e\n\x3ch4\x3eindex.js\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x27use strict\x27\n\/\/ 配置项\n\/\/ Template version: 1.3.1\n\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\n\nconst path = require(\x27path\x27)\n\nmodule.exports = {\n  dev: { \/\/ 开发环境\n\n    \/\/ 静态文件夹路径\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 编译后资源访问的路径\n    assetsPublicPath: \x27\/\x27,\n    \/\/ 代理\n    proxyTable: {\n        \/*\n            param:\n            *:   表示挂代理时,识别的请求前缀\n            url: 表示代理的地址\n            例如\n            \x27\/api\x27: {\n                target: \x27http:\/\/www.baidu.com\x27,\n                changeOrigin: true,\n                pathRewrite: {\n                    \x27^\/api\x27: \x27\/api\x27\n                } \/\/=\x3e localhost:8000\/api =\x3e http:\/\/www.baidu.com\/api\n            }\n\n            代理的proxy格式可以参照以下github\n            https:\/\/github.com\/chimurai\/http-proxy-middleware\n        *\/\n    },\n\n    \/\/ Various Dev Server settings\n    \/\/ 解决了原本仅为localhost 不能使用ip地址开发的问题\n    host: \x270.0.0.0\x27,\n    \/\/ 端口\n    port: 8080,\n    \/\/ 是否自动打开浏览器标识\n    autoOpenBrowser: false,\n    \/\/ webpack-dev-server中 是否全屏弹窗的形式显示编译过程中的错误标识\n    errorOverlay: true,\n    \/\/ 配合 friendly-errors-webpack-plugin\n    notifyOnErrors: true,\n    \/\/ dev-server 与监视文件相关的控制选项标识\n    poll: false, \/\/ https:\/\/webpack.js.org\/configuration\/dev-server\/#devserver-watchoptions-\n\n    \n     \/*\n        这里是关于代码的 sourcemap 模式的选择\n        可参考以下各种类型 https:\/\/segmentfault.com\/a\/1190000008315937\n        几个类型的关键字\n        cheap\n        eval\n        module\n    *\/\n\n    \/\/ https:\/\/webpack.js.org\/configuration\/devtool\/#development\n    devtool: \x27cheap-module-eval-source-map\x27,\n\n    \/\/ If you have problems debugging vue-files in devtools,\n    \/\/ set this to false - it *may* help\n    \/\/ https:\/\/vue-loader.vuejs.org\/en\/options.html#cachebusting\n    \/\/ 指的是缓存破坏,but找不到api\n    cacheBusting: false,\n    \/*\n        是否开启 CSS 的 source maps,\n        开启的话将在head头部的style中加入 source map的相关信息\n    *\/\n    cssSourceMap: false\n  },\n\n  build: { \/\/生产环境\n    \/\/ index模板文件\n    index: path.resolve(__dirname, \x27..\/dist\/index.html\x27),\n\n    \/\/ 路径\n    assetsRoot: path.resolve(__dirname, \x27..\/dist\x27),\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 资源引用的路径(需要注意)\n    assetsPublicPath: \x27..\/\x27,\n\n    \/**\n     * Source Maps\n     *\/\n\n    \/\/ 是否开启source map的标识\n    productionSourceMap: true,\n    \/\/ https:\/\/webpack.js.org\/configuration\/devtool\/#production\n    devtool: \x27#source-map\x27,\n\n    \/\/ Gzip off by default as many popular static hosts such as\n    \/\/ Surge or Netlify already gzip all static assets for you.\n    \/\/ Before setting to `true`, make sure to:\n    \/\/ npm install --save-dev compression-webpack-plugin\n    \/\/ gzip压缩\n    productionGzip: false,\n    productionGzipExtensions: [\x27js\x27, \x27css\x27],\n\n    \/\/ Run the build command with an extra argument to\n    \/\/ View the bundle analyzer report after build finishes:\n    \/\/ `npm run build --report`\n    \/\/ Set to `true` or `false` to always turn it on or off\n    bundleAnalyzerReport: process.env.npm_config_report\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x27use strict\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置项\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Template version: 1.3.1\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3edev\x3c\/span\x3e: { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发环境\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 静态文件夹路径\x3c\/span\x3e\n    assetsSubDirectory: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 编译后资源访问的路径\x3c\/span\x3e\n    assetsPublicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 代理\x3c\/span\x3e\n    proxyTable: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/*\n            param:\n            *:   表示挂代理时,识别的请求前缀\n            url: 表示代理的地址\n            例如\n            \x27\/api\x27: {\n                target: \x27http:\/\/www.baidu.com\x27,\n                changeOrigin: true,\n                pathRewrite: {\n                    \x27^\/api\x27: \x27\/api\x27\n                } \/\/=\x26gt; localhost:8000\/api =\x26gt; http:\/\/www.baidu.com\/api\n            }\n\n            代理的proxy格式可以参照以下github\n            https:\/\/github.com\/chimurai\/http-proxy-middleware\n        *\/\x3c\/span\x3e\n    },\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Various Dev Server settings\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 解决了原本仅为localhost 不能使用ip地址开发的问题\x3c\/span\x3e\n    host: \x3cspan class=\x22hljs-string\x22\x3e\x270.0.0.0\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 端口\x3c\/span\x3e\n    port: \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否自动打开浏览器标识\x3c\/span\x3e\n    autoOpenBrowser: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack-dev-server中 是否全屏弹窗的形式显示编译过程中的错误标识\x3c\/span\x3e\n    errorOverlay: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配合 friendly-errors-webpack-plugin\x3c\/span\x3e\n    notifyOnErrors: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ dev-server 与监视文件相关的控制选项标识\x3c\/span\x3e\n    poll: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/webpack.js.org\/configuration\/dev-server\/#devserver-watchoptions-\x3c\/span\x3e\n\n    \n     \x3cspan class=\x22hljs-comment\x22\x3e\/*\n        这里是关于代码的 sourcemap 模式的选择\n        可参考以下各种类型 https:\/\/segmentfault.com\/a\/1190000008315937\n        几个类型的关键字\n        cheap\n        eval\n        module\n    *\/\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/webpack.js.org\/configuration\/devtool\/#development\x3c\/span\x3e\n    devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27cheap-module-eval-source-map\x27\x3c\/span\x3e,\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ If you have problems debugging vue-files in devtools,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ set this to false - it *may* help\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/vue-loader.vuejs.org\/en\/options.html#cachebusting\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 指的是缓存破坏,but找不到api\x3c\/span\x3e\n    cacheBusting: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*\n        是否开启 CSS 的 source maps,\n        开启的话将在head头部的style中加入 source map的相关信息\n    *\/\x3c\/span\x3e\n    cssSourceMap: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  },\n\n  \x3cspan class=\x22hljs-attr\x22\x3ebuild\x3c\/span\x3e: { \x3cspan class=\x22hljs-comment\x22\x3e\/\/生产环境\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ index模板文件\x3c\/span\x3e\n    index: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/index.html\x27\x3c\/span\x3e),\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 路径\x3c\/span\x3e\n    assetsRoot: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3eassetsSubDirectory\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 资源引用的路径(需要注意)\x3c\/span\x3e\n    assetsPublicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27..\/\x27\x3c\/span\x3e,\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * Source Maps\n     *\/\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否开启source map的标识\x3c\/span\x3e\n    productionSourceMap: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/webpack.js.org\/configuration\/devtool\/#production\x3c\/span\x3e\n    devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27#source-map\x27\x3c\/span\x3e,\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Gzip off by default as many popular static hosts such as\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Surge or Netlify already gzip all static assets for you.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Before setting to `true`, make sure to:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ npm install --save-dev compression-webpack-plugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ gzip压缩\x3c\/span\x3e\n    productionGzip: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eproductionGzipExtensions\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css\x27\x3c\/span\x3e],\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Run the build command with an extra argument to\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ View the bundle analyzer report after build finishes:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ `npm run build --report`\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Set to `true` or `false` to always turn it on or off\x3c\/span\x3e\n    bundleAnalyzerReport: process.env.npm_config_report\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e总结\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e目前这个版本的注释我改造了一下改成了多页面模式,(原来写的不合适,修改一下, 如果需要用\x3cstrong\x3espa的模式\x3c\/strong\x3e请麻烦重新拉个包,配置文件一样的,不过在config中生产的配置项目assetsPublicPath要改为\x27.\/\x27 不过有一些不改也可以,具体看发包后情况)\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e整理完2.0和3.0的配置内容,我发现了3.0用了以下一些不同的东西:\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e我发现3.0用了一直宣传的ModuleConcatenationPlugin.\x3c\/li\x3e\n\x3cli\x3e2.*在开发过程热加载和预编译用的是 express\x2bdev-middleware\x2bhot-middleware(热加载时会刷新页面)\x3c\/li\x3e\n\x3cli\x3e3.*在开发过程热加载和预编译直接就用回了 webpack-dev-server(似乎热加载不刷新页面了直接覆盖掉)\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3cli\x3e刚刚升级3.0用的脚手架有一个问题.就是wepback-dev-server是2.9.7版本,这个版本client里面的代码用了es6.导致一些旧版本的ios(我自己是ios9.3.5)直接傻哔了,最近拉下来的升级到2.11.0了而且在base.conf.js中babel-loader加了对应的include\x3c\/li\x3e\n\x3cli\x3e其他文件例如 .babelrc是用于babel的配置文件\/.postcssrc.js是postcss的一系列配置内容\x3c\/li\x3e\n\x3cli\x3e0129 18点,下班的moment我在assets加入了公共的配置项,拉下来就能直接搞了.(大家互相学习咯) ^^\x3c\/li\x3e\n\x3cli\x3e0208 更新webpack打包完导致静态引用路径错误的问题:\x3cbr\x3e 1.因为在开发环境中,将静态文件夹通过CopyWebpackPlugin插件复制到了(config.dev.assetsSubDirectory)的文件夹路径中,所以使用下面2种方式在开发环境中去引用都可以\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3Ab2?w=451\x26amp;h=52\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3Ab2?w=451\x26amp;h=52\x22 alt=\x22路径图片\x22 title=\x22路径图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cp\x3e那么问题就来了build打包完之后,目录结构是这样.\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3Ao4?w=633\x26amp;h=331\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3Ao4?w=633\x26amp;h=331\x22 alt=\x22打包完目录结构图\x22 title=\x22打包完目录结构图\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e那么使用上面 \/static这种标识在根目录的static就会找不到资源了.所以建议使用..\/..\/的方式,或者到base.conf.js中配置alias使用.这样去使用.\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3A6g?w=394\x26amp;h=194\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3A6g?w=394\x26amp;h=194\x22 alt=\x22静态资源调用\x22 title=\x22静态资源调用\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e0324 更新如何解决之前发现build后,使用background-image路径报错的问题.\x3cbr\x3e 最开始发现,直接npm build的时候,在css中使用的资源路径\x3cstrong\x3e(主要是图片资源)\x3c\/strong\x3e引用会报错.\x3cbr\x3e 因为build完文件夹都会被重新处理摆放,\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3chr\x3e\n\x3cp\x3e因为在base.conf.js中,用url-loader对图片进行了处理:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3A7E?w=702\x26amp;h=164\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3A7E?w=702\x26amp;h=164\x22 alt=\x22url-loader配置\x22 title=\x22url-loader配置\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e未超过limit的字节数将打包成dataURL的格式,\x3c\/li\x3e\n\x3cli\x3e超过了会放到static\/img的文件夹\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3ebuild打包完文件位置与开发不同,导致了css路径就会有问题...\x3c\/p\x3e\n\x3cp\x3e后面研究了一下build时会触发的库,发现是使用了extract-text-webpack-plugin将css都抽取到了一起.看了一下api里面有一个配置项\x3cstrong\x3epublicPath\x3c\/strong\x3e.调整一下到正确的引用即可解决这个问题.\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6Jgv?w=735\x26amp;h=259\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6Jgv?w=735\x26amp;h=259\x22 alt=\x22extract配置项\x22 title=\x22extract配置项\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue-cli (vue2.5.2&amp;webpack3.6.0) 配置文件全注释</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013036057">https://segmentfault.com/a/1190000013036057</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/g3ap57dm1hs/" target="_blank">https://alili.tech/archive/g3ap57dm1hs/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>