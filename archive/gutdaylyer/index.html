<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="用canvas绘制一个曲线动画——深入理解贝塞尔曲线"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>用canvas绘制一个曲线动画——深入理解贝塞尔曲线 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/gutdaylyer/",
				"appid": "1613049289050283", 
				"title": "用canvas绘制一个曲线动画——深入理解贝塞尔曲线 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-19T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/tdy0oteyoqi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ool0xz9pwq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&text=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&text=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&title=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&is_video=false&description=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&title=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&title=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&title=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fgutdaylyer%2f&title=%e7%94%a8canvas%e7%bb%98%e5%88%b6%e4%b8%80%e4%b8%aa%e6%9b%b2%e7%ba%bf%e5%8a%a8%e7%94%bb%e2%80%94%e2%80%94%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3%e8%b4%9d%e5%a1%9e%e5%b0%94%e6%9b%b2%e7%ba%bf"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">用canvas绘制一个曲线动画——深入理解贝塞尔曲线</h1><div class="meta"><div class="postdate"><time datetime="2018-12-19" itemprop="datePublished">2018-12-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e我的github博客地址 \x3ca href=\x22https:\/\/github.com\/hujiulong\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/hujiulong\/...\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e在前端开发中，贝赛尔曲线无处不在：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e它可以用来绘制曲线，在svg和canvas中，原生提供的曲线绘制都是使用贝赛尔曲线\x3c\/li\x3e\n\x3cli\x3e它也可以用来描述一个缓动算法，设置css的\x3ccode\x3etransition-timing-function\x3c\/code\x3e属性，可以使用贝塞尔曲线来描述过渡的缓动计算\x3c\/li\x3e\n\x3cli\x3e几乎所有前端2D或3D图形图表库(echarts，d3，three.js)都会使用到贝塞尔曲线\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e这篇文章我准备从实现一个非常简单的曲线动画效果入手，帮助大家彻底地弄懂什么是贝塞尔曲线，以及它有哪些特性，文章中有一点点数学公式，但是都非常简单:)。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV014F?w=305\x26amp;h=269\x22 src=\x22https:\/\/static.alili.tech\/img\/bV014F?w=305\x26amp;h=269\x22 alt=\x2234359508-9b656938-ea93-11e7-9caf-db0464af2db0.gif\x22 title=\x2234359508-9b656938-ea93-11e7-9caf-db0464af2db0.gif\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e实现这样一个曲线动画\x3c\/p\x3e\n\x3cp\x3e可以点击这里查看\x3ca href=\x22https:\/\/hujiulong.github.io\/blog\/demo\/bezier\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e在线演示\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e在写代码之前，先了解一下什么是贝塞尔曲线吧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e贝塞尔曲线\x3c\/h2\x3e\n\x3cp\x3e贝塞尔曲线（Bezier curve）是计算机图形学中相当重要的参数曲线，它通过一个方程来描述一条曲线，根据方程的最高阶数，又分为线性贝赛尔曲线，二次贝塞尔曲线、三次贝塞尔曲线和更高阶的贝塞尔曲线。\x3c\/p\x3e\n\x3cp\x3e下面详细介绍一下用得比较多的二次贝塞尔曲线和三次贝塞尔曲线\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e二次贝塞尔曲线\x3c\/h3\x3e\n\x3cp\x3e二次贝塞尔曲线由三个点\x3ccode\x3eP0\x3c\/code\x3e,\x3ccode\x3eP1\x3c\/code\x3e,\x3ccode\x3eP2\x3c\/code\x3e来确定，这些点也被称作控制点。曲线的方程为：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV1o1x?w=386\x26amp;h=21\x22 src=\x22https:\/\/static.alili.tech\/img\/bV1o1x?w=386\x26amp;h=21\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个方程其实有它的几何意义，它表示可以通过这样的步骤来绘制一条曲线：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e选定一个\x3ccode\x3e0-1\x3c\/code\x3e的\x3ccode\x3et\x3c\/code\x3e值\x3c\/li\x3e\n\x3cli\x3e通过\x3ccode\x3eP0\x3c\/code\x3e和\x3ccode\x3eP1\x3c\/code\x3e计算出点\x3ccode\x3eQ0\x3c\/code\x3e，\x3ccode\x3eQ0\x3c\/code\x3e在\x3ccode\x3eP0\x3c\/code\x3e \x3ccode\x3eP1\x3c\/code\x3e连成的直线上，并且\x3ccode\x3elength( P0, Q0 ) = length( P0, P1 ) * t\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e同样，通过\x3ccode\x3eP1\x3c\/code\x3e和\x3ccode\x3eP2\x3c\/code\x3e计算出\x3ccode\x3eQ1\x3c\/code\x3e，使得\x3ccode\x3elength( P1, Q1 ) = length( P1, P2 ) * t\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e再重复一次这个步骤，通过\x3ccode\x3eQ1\x3c\/code\x3e和\x3ccode\x3eQ2\x3c\/code\x3e计算出\x3ccode\x3eB\x3c\/code\x3e，使得\x3ccode\x3elength( Q0, Q1 ) = length( Q0, B ) * t\x3c\/code\x3e。\x3ccode\x3eB\x3c\/code\x3e就为当前曲线上的点\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e注：上面的\x3ccode\x3elength\x3c\/code\x3e表示两点之间的长度\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVCxS8?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/bVCxS8?w=240\x26amp;h=100\x22 alt=\x221608e25792da9c97?w=240\x26amp;h=100\x26amp;f=png\x26amp;s=5429\x22 title=\x221608e25792da9c97?w=240\x26amp;h=100\x26amp;f=png\x26amp;s=5429\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e图：二次贝塞尔曲线结构\x3c\/p\x3e\n\x3cp\x3e有了曲线方程，我们直接代入具体的\x3ccode\x3et\x3c\/code\x3e值就能算出点\x3ccode\x3eB\x3c\/code\x3e了。\x3c\/p\x3e\n\x3cp\x3e如果将\x3ccode\x3et\x3c\/code\x3e的值从\x3ccode\x3e0\x3c\/code\x3e过渡到\x3ccode\x3e1\x3c\/code\x3e，不断计算点\x3ccode\x3eB\x3c\/code\x3e，就可以得到一条二次贝塞尔曲线：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVCxS9?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/bVCxS9?w=240\x26amp;h=100\x22 alt=\x221608e1929786355b?w=240\x26amp;h=100\x26amp;f=gif\x26amp;s=74274\x22 title=\x221608e1929786355b?w=240\x26amp;h=100\x26amp;f=gif\x26amp;s=74274\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e图：二次贝塞尔线绘制过程\x3c\/p\x3e\n\x3cp\x3e在canvas中，绘制二次贝塞尔曲线的方法为\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.quadraticCurveTo( p1x, p1y, p2x, p2y )\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.quadraticCurveTo( p1x, p1y, p2x, p2y )\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中\x3ccode\x3ep1x, p1y, p2x, p2y\x3c\/code\x3e为后两个控制点（\x3ccode\x3eP1\x3c\/code\x3e和\x3ccode\x3eP2\x3c\/code\x3e）的横纵坐标，它默认将当前路径的起点作为一个控制点（\x3ccode\x3eP0\x3c\/code\x3e）。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e三次贝塞尔曲线\x3c\/h3\x3e\n\x3cp\x3e三次贝塞尔曲线需要四个点\x3ccode\x3eP0\x3c\/code\x3e,\x3ccode\x3eP1\x3c\/code\x3e,\x3ccode\x3eP2\x3c\/code\x3e,\x3ccode\x3eP3\x3c\/code\x3e来确定，曲线方程为\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012670053?w=542\x26amp;h=21\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012670053?w=542\x26amp;h=21\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e它的计算过程和二次贝塞尔曲线类似，这里不再赘述，可以看下图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVCxTa?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/bVCxTa?w=240\x26amp;h=100\x22 alt=\x221608e3077df20e7b?w=240\x26amp;h=100\x26amp;f=png\x26amp;s=7942\x22 title=\x221608e3077df20e7b?w=240\x26amp;h=100\x26amp;f=png\x26amp;s=7942\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e图：三次贝塞尔曲线结构\x3c\/p\x3e\n\x3cp\x3e同样，将\x3ccode\x3et\x3c\/code\x3e的值从\x3ccode\x3e0\x3c\/code\x3e过渡到\x3ccode\x3e1\x3c\/code\x3e，就可以绘制出一条三次贝塞尔曲线：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVCxTb?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/bVCxTb?w=240\x26amp;h=100\x22 alt=\x221608e2ba9c18d8d6?w=240\x26amp;h=100\x26amp;f=gif\x26amp;s=109773\x22 title=\x221608e2ba9c18d8d6?w=240\x26amp;h=100\x26amp;f=gif\x26amp;s=109773\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e图：三次贝塞尔曲线绘制过程\x3c\/p\x3e\n\x3cp\x3e在canvas中，绘制三次贝塞尔曲线的方法为\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ctx.bezierCurveTo( p1x, p1y, p2x, p2y, p3x, p3y )\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3ectx.bezierCurveTo( p1x, p1y, p2x, p2y, p3x, p3y )\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中\x3ccode\x3ep1x, p1y, p2x, p2y, p3x, p3y\x3c\/code\x3e为后三个控制点（\x3ccode\x3eP1\x3c\/code\x3e,\x3ccode\x3eP2\x3c\/code\x3e和\x3ccode\x3eP3\x3c\/code\x3e）的横纵坐标，它默认将当前路径的起点作为一个控制点（\x3ccode\x3eP0\x3c\/code\x3e）。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e贝塞尔曲线的特征\x3c\/h3\x3e\n\x3cp\x3e在三次贝塞尔曲线后面，还有更高阶的贝塞尔曲线，同样它们绘制的过程也更加复杂\x3c\/p\x3e\n\x3ch4\x3e四次贝塞尔曲线\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012670056?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012670056?w=240\x26amp;h=100\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e图：四次贝塞尔曲线\x3c\/p\x3e\n\x3ch4\x3e五次贝塞尔曲线\x3c\/h4\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012600209?w=240\x26amp;h=192\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012600209?w=240\x26amp;h=192\x22 alt=\x221608e389f3e76e8d\x22 title=\x221608e389f3e76e8d\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e图：五次贝塞尔曲线\x3c\/p\x3e\n\x3cp\x3e我们可以归纳出贝塞尔曲线有几个重要的特征：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3en阶贝塞尔曲线需要n\x2b1个点来确定\x3c\/li\x3e\n\x3cli\x3e贝塞尔曲线是平滑的\x3c\/li\x3e\n\x3cli\x3e贝塞尔曲线的起点和终点与对应控制点的连线相切\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e绘制贝塞尔曲线\x3c\/h2\x3e\n\x3cp\x3e复习完基础概念，接下来就要讲如果绘制贝塞尔曲线啦\x3c\/p\x3e\n\x3cp\x3e为简单起见，\x3cstrong\x3e我们选择使用二次贝塞尔曲线\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e我们先不考虑动画的事，我们先将问题简化成：给定一个起点和一个终点，需要实现一个函数，它能够绘制出一条曲线。\x3c\/p\x3e\n\x3cp\x3e也就是说我们需要实现一个函数\x3ccode\x3edrawCurvePath\x3c\/code\x3e，除渲染上下文ctx外（不清楚ctx是什么的同学可以先熟悉下canvas的基本概念），它接受三个参数，分别为二次贝塞尔曲线的三个控制点。我们将样式控制移到函数外，\x3ccode\x3edrawCurvePath\x3c\/code\x3e只用来绘制路径。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制二次贝赛尔曲线路径\n * @param  {Object} ctx\n * @param  {Array\x3cnumber\x3e} p0\n * @param  {Array\x3cnumber\x3e} p1\n * @param  {Array\x3cnumber\x3e} p2\n *\/\nfunction drawCurvePath( ctx, p0, p1, p2 ) {\n    \/\/ ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制二次贝赛尔曲线路径\n * @param  {Object} ctx\n * @param  {Array\x26lt;number\x26gt;} p0\n * @param  {Array\x26lt;number\x26gt;} p1\n * @param  {Array\x26lt;number\x26gt;} p2\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, p0, p1, p2 \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e前文提到过，在canvas中，绘制二次贝赛尔曲线的方法是\x3ccode\x3equadraticCurveTo\x3c\/code\x3e，所以只要短短两行就能完成这个方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制二次贝赛尔曲线路径\n * @param  {CanvasRenderingContext2D} ctx\n * @param  {Array\x3cnumber\x3e} p0\n * @param  {Array\x3cnumber\x3e} p1\n * @param  {Array\x3cnumber\x3e} p2\n *\/\nfunction drawCurvePath( ctx, p0, p1, p2 ) {\n    ctx.moveTo( p0[ 0 ], p0[ 1 ] );\n    ctx.quadraticCurveTo( \n        p1[ 0 ], p1[ 1 ],\n        p2[ 0 ], p2[ 1 ]\n    );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制二次贝赛尔曲线路径\n * @param  {CanvasRenderingContext2D} ctx\n * @param  {Array\x26lt;number\x26gt;} p0\n * @param  {Array\x26lt;number\x26gt;} p1\n * @param  {Array\x26lt;number\x26gt;} p2\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, p0, p1, p2 \x3c\/span\x3e) \x3c\/span\x3e{\n    ctx.moveTo( p0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], p0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] );\n    ctx.quadraticCurveTo( \n        p1[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], p1[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ],\n        p2[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], p2[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ]\n    );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样就完成了基本的绘制二次贝塞尔曲线的方法了。\x3c\/p\x3e\n\x3cp\x3e但是函数这样设计有点小问题\x3c\/p\x3e\n\x3cp\x3e如果我们是在做一个图形库，我们想给使用者提供一个绘制曲线的方法。\x3c\/p\x3e\n\x3cp\x3e对于使用者来说，他只想在给定的起点和终点间间绘制一条曲线，他想要得到的曲线尽量美观，但是又不想关心具体的实现细节，如果还需要给第三个点，使用者会有一定的学习成本（至少需要弄明白什么是贝塞尔曲线）。\x3c\/p\x3e\n\x3cp\x3e看到这里你可能会比较疑惑，即使是二次贝塞尔曲线也需要三个控制点，只有起点和终点怎么绘制曲线呢。\x3c\/p\x3e\n\x3cp\x3e我们可以在起点和终点的垂直平分线上选一点作为第三个控制点，可以提供给使用者一个参数来控制曲线的弯曲程度，现在函数就变成了这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制一条曲线路径\n * @param  {CanvasRenderingContext2D} ctx\n * @param  {Array\x3cnumber\x3e} start 起点\n * @param  {Array\x3cnumber\x3e} end 终点\n * @param  {number} curveness 曲度(0-1)\n *\/\nfunction drawCurvePath( ctx, start, end, curveness ) {\n    \/\/ ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制一条曲线路径\n * @param  {CanvasRenderingContext2D} ctx\n * @param  {Array\x26lt;number\x26gt;} start 起点\n * @param  {Array\x26lt;number\x26gt;} end 终点\n * @param  {number} curveness 曲度(0-1)\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们用\x3ccode\x3ecurveness\x3c\/code\x3e来表示曲线的弯曲程度，也就是第三个控制点的偏离程度。这样很容易就能计算出中间点。\x3cbr\x3e现在完整的函数变成了这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x3cnumber\x3e} start 起点\n * @param  {Array\x3cnumber\x3e} end 终点\n * @param  {number} curveness 曲度(0-1)\n *\/\nfunction drawCurvePath( ctx, start, end, curveness ) {\n    \/\/ 计算中间控制点\n    var cp = [\n         ( start[ 0 ] \x2b end[ 0 ] ) \/ 2 - ( start[ 1 ] - end[ 1 ] ) * curveness,\n         ( start[ 1 ] \x2b end[ 1 ] ) \/ 2 - ( end[ 0 ] - start[ 0 ] ) * curveness\n    ];\n    ctx.moveTo( start[ 0 ], start[ 1 ] );\n    ctx.quadraticCurveTo( \n        cp[ 0 ], cp[ 1 ],\n        end[ 0 ], end[ 1 ]\n    );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x26lt;number\x26gt;} start 起点\n * @param  {Array\x26lt;number\x26gt;} end 终点\n * @param  {number} curveness 曲度(0-1)\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算中间控制点\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cp = [\n         ( start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] \x2b end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - ( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] - end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ) * curveness,\n         ( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] \x2b end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - ( end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] - start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ) * curveness\n    ];\n    ctx.moveTo( start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] );\n    ctx.quadraticCurveTo( \n        cp[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], cp[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ],\n        end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ]\n    );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对，就这么短短几行，接下来我们就可以通过它来绘制一条曲线了，代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n    \x3chead\x3e\n        \x3ctitle\x3edraw curve\x3c\/title\x3e\n    \x3c\/head\x3e\n    \x3cbody\x3e\n        \x3ccanvas id=\x26quot;canvas\x26quot; width=\x26quot;800\x26quot; height=\x26quot;800\x26quot;\x3e\x3c\/canvas\x3e\n        \x3cscript\x3e\n            var canvas = document.getElementById( \x27canvas\x27 );\n            var ctx = canvas.getContext( \x272d\x27 );\n            \n            ctx.lineWidth = 2;\n            ctx.strokeStyle = \x27#000\x27;\n            ctx.beginPath();\n    \n            drawCurvePath( \n                ctx,\n                [ 100, 100 ],\n                [ 200, 300 ],\n                0.4\n            );\n            \n            ctx.stroke();\n            \n            function drawCurvePath( ctx, start, end, curveness ) {\n                \/\/ ...\n            }\n        \x3c\/script\x3e\n    \x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3edraw curve\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById( \x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e );\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ctx = canvas.getContext( \x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e );\n            \n            ctx.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            ctx.strokeStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27#000\x27\x3c\/span\x3e;\n            ctx.beginPath();\n    \n            drawCurvePath( \n                ctx,\n                [ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e ],\n                [ \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e ],\n                \x3cspan class=\x22hljs-number\x22\x3e0.4\x3c\/span\x3e\n            );\n            \n            ctx.stroke();\n            \n            \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness \x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n            }\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e绘制结果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012600210?w=286\x26amp;h=242\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012600210?w=286\x26amp;h=242\x22 alt=\x22qq 20171226233508\x22 title=\x22qq 20171226233508\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e绘制一条曲线\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e绘制贝塞尔曲线动画\x3c\/h2\x3e\n\x3cp\x3e终于来到文章的本体啦，我们的目的不是绘制一条静态的曲线，我们想绘制一条有过渡效果的曲线。\x3c\/p\x3e\n\x3cp\x3e简化一下问题，那就是我们希望绘制曲线的函数还接受另一个参数，表示绘制曲线的百分比。我们定时去调用这个函数，递增百分比这个参数，就能画出动画了。\x3c\/p\x3e\n\x3cp\x3e我们新增一个参数\x3ccode\x3epercent\x3c\/code\x3e来表示百分比，现在函数变成了这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x3cnumber\x3e} start 起点\n * @param  {Array\x3cnumber\x3e} end 终点\n * @param  {number} curveness 曲度(0-1)\n * @param  {number} percent 绘制百分比(0-100)\n *\/\nfunction drawCurvePath( ctx, start, end, curveness, percent ) {\n    \/\/ ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x26lt;number\x26gt;} start 起点\n * @param  {Array\x26lt;number\x26gt;} end 终点\n * @param  {number} curveness 曲度(0-1)\n * @param  {number} percent 绘制百分比(0-100)\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness, percent \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是canvas提供的\x3ccode\x3equadraticCurveTo\x3c\/code\x3e方法只能绘制一条完整的二次贝赛尔曲线，没有办法去控制它只画一部分。\x3c\/p\x3e\n\x3cp\x3e画完后用\x3ccode\x3eclearRect\x3c\/code\x3e擦除掉一部分？这不太可行，因为很难确定要擦除的范围。如果曲线的线宽比较宽，就还需要保证擦除的边界和曲线末端垂直，问题就变得很复杂了。\x3c\/p\x3e\n\x3cp\x3e现在再重新看看这张图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVCxS9?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/bVCxS9?w=240\x26amp;h=100\x22 alt=\x221608e1929786355b?w=240\x26amp;h=100\x26amp;f=gif\x26amp;s=74274\x22 title=\x221608e1929786355b?w=240\x26amp;h=100\x26amp;f=gif\x26amp;s=74274\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们是不是可以将\x3ccode\x3epercent\x3c\/code\x3e这个参数理解成\x3ccode\x3et\x3c\/code\x3e值，然后通过贝赛尔曲线方程去计算出中间所有的点，用直线连接起来，以此模拟绘制贝赛尔曲线的一部分呢？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e方法一\x3c\/h3\x3e\n\x3cp\x3e我们不再用canvas提供的\x3ccode\x3equadraticCurveTo\x3c\/code\x3e来绘制曲线，而是通过贝赛尔曲线的方程计算出一系列点，用多端直线来模拟曲线。\x3c\/p\x3e\n\x3cp\x3e这样做的好处时，我们可以很容易的控制绘制的范围。\x3c\/p\x3e\n\x3cp\x3e那么函数实现就变成了这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x3cnumber\x3e} start 起点\n * @param  {Array\x3cnumber\x3e} end 终点\n * @param  {number} curveness 曲度(0-1)\n * @param  {number} percent 绘制百分比(0-100)\n *\/\nfunction drawCurvePath( ctx, start, end, curveness, percent ) {\n\n    var cp = [\n         ( start[ 0 ] \x2b end[ 0 ] ) \/ 2 - ( start[ 1 ] - end[ 1 ] ) * curveness,\n         ( start[ 1 ] \x2b end[ 1 ] ) \/ 2 - ( end[ 0 ] - start[ 0 ] ) * curveness\n    ];\n    \n    ctx.moveTo( start[ 0 ], start[ 1 ] );\n    \n    for ( var t = 0; t \x3c= percent \/ 100; t \x2b= 0.01 ) {\n\n        var x = quadraticBezier( start[ 0 ], cp[ 0 ], end[ 0 ], t );\n        var y = quadraticBezier( start[ 1 ], cp[ 1 ], end[ 1 ], t );\n        \n        ctx.lineTo( x, y );\n    }\n    \n}\n\nfunction quadraticBezier( p0, p1, p2, t ) {\n    var k = 1 - t;\n    return k * k * p0 \x2b 2 * ( 1 - t ) * t * p1 \x2b t * t * p2;    \/\/ 这个方程就是二次贝赛尔曲线方程\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x26lt;number\x26gt;} start 起点\n * @param  {Array\x26lt;number\x26gt;} end 终点\n * @param  {number} curveness 曲度(0-1)\n * @param  {number} percent 绘制百分比(0-100)\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness, percent \x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cp = [\n         ( start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] \x2b end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - ( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] - end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ) * curveness,\n         ( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] \x2b end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - ( end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] - start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ) * curveness\n    ];\n    \n    ctx.moveTo( start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] );\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e ( \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e t = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; t \x26lt;= percent \/ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e; t \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e ) {\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e x = quadraticBezier( start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], cp[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], t );\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e y = quadraticBezier( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ], cp[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ], end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ], t );\n        \n        ctx.lineTo( x, y );\n    }\n    \n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3equadraticBezier\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e p0, p1, p2, t \x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e k = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e - t;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e k * k * p0 \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * ( \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e - t ) * t * p1 \x2b t * t * p2;    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个方程就是二次贝赛尔曲线方程\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来就可以通过设置定时器，每隔一段时间调用一次这个方法，并且递增percent\x3c\/p\x3e\n\x3cp\x3e为了动画更加平滑，我们使用\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e来代替定时器\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n    \x3chead\x3e\n        \x3ctitle\x3edraw curve\x3c\/title\x3e\n    \x3c\/head\x3e\n    \x3cbody\x3e\n        \x3ccanvas id=\x26quot;canvas\x26quot; width=\x26quot;800\x26quot; height=\x26quot;800\x26quot;\x3e\x3c\/canvas\x3e\n        \x3cscript\x3e\n            var canvas = document.getElementById( \x27canvas\x27 );\n            var ctx = canvas.getContext( \x272d\x27 );\n            \n            ctx.lineWidth = 2;\n            ctx.strokeStyle = \x27#000\x27;\n            \n            var percent = 0;\n            \n            function animate() {\n                \n                ctx.clearRect( 0, 0, 800, 800 );\n                ctx.beginPath();\n\n                drawCurvePath( \n                    ctx,\n                    [ 100, 100 ],\n                    [ 200, 300 ],\n                    0.2,\n                    percent\n                );\n    \n                ctx.stroke();\n    \n                percent = ( percent \x2b 1 ) % 100;\n                \n                requestAnimationFrame( animate );\n                \n            }\n            \n            animate();\n            \n            function drawCurvePath( ctx, start, end, curveness, percent ) {\n                \/\/ ...\n            }\n        \x3c\/script\x3e\n    \x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3edraw curve\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22canvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById( \x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e );\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ctx = canvas.getContext( \x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e );\n            \n            ctx.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            ctx.strokeStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27#000\x27\x3c\/span\x3e;\n            \n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e percent = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            \n            \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eanimate\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                \n                ctx.clearRect( \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e );\n                ctx.beginPath();\n\n                drawCurvePath( \n                    ctx,\n                    [ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e ],\n                    [ \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e ],\n                    \x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e,\n                    percent\n                );\n    \n                ctx.stroke();\n    \n                percent = ( percent \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ) % \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n                \n                requestAnimationFrame( animate );\n                \n            }\n            \n            animate();\n            \n            \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness, percent \x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n            }\n        \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e得到的结果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012670057?w=305\x26amp;h=269\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012670057?w=305\x26amp;h=269\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这样基本实现了我们的需求，但它有一个问题：\x3c\/p\x3e\n\x3cp\x3e测试发现，进行一次\x3ccode\x3elineTo\x3c\/code\x3e的时间和一次\x3ccode\x3equadraticCurveTo\x3c\/code\x3e的时间差不多，但是\x3ccode\x3equadraticCurveTo\x3c\/code\x3e只需要一次就能画出曲线，而使用\x3ccode\x3elineTo\x3c\/code\x3e则需要数十次。\x3c\/p\x3e\n\x3cp\x3e换言之，用这样的方式绘制曲线，和我们前面的实现方式相比性能下降了数十倍之多。在绘制一条曲线时可能感觉不到区别，但是如果需要同时绘制上千条曲线，性能就会受到很大的影响。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e方法二\x3c\/h3\x3e\n\x3cp\x3e那有没有什么方法可以做到用\x3ccode\x3equadraticCurveTo\x3c\/code\x3e来实现绘制完整曲线的一部分呢？\x3c\/p\x3e\n\x3cp\x3e我们再次回到这张图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012670052?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012670052?w=240\x26amp;h=100\x22 alt=\x22s\x22 title=\x22s\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在中间的某一时刻，例如t=0.25时，它是这样的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012670051?w=240\x26amp;h=100\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012670051?w=240\x26amp;h=100\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们注意到，曲线\x3ccode\x3eP0-B\x3c\/code\x3e这一段似乎也是贝赛尔曲线，它的控制点变成了\x3ccode\x3eP0，Q0，B\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e现在问题就迎刃而解了，我们只需要每次计算出\x3ccode\x3eQ0，B\x3c\/code\x3e，就能得到其中一小段贝赛尔曲线的控制点，然后就可以通过\x3ccode\x3equadraticCurveTo\x3c\/code\x3e来绘制它了。\x3c\/p\x3e\n\x3cp\x3e代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x3cnumber\x3e} start 起点\n * @param  {Array\x3cnumber\x3e} end 终点\n * @param  {number} curveness 曲度(0-1)\n * @param  {number} percent 绘制百分比(0-100)\n *\/\nfunction drawCurvePath( ctx, start, end, curveness, percent ) {\n\n    var cp = [\n         ( start[ 0 ] \x2b end[ 0 ] ) \/ 2 - ( start[ 1 ] - end[ 1 ] ) * curveness,\n         ( start[ 1 ] \x2b end[ 1 ] ) \/ 2 - ( end[ 0 ] - start[ 0 ] ) * curveness\n    ];\n    \n    var t = percent \/ 100;\n    \n    var p0 = start;\n    var p1 = cp;\n    var p2 = end;\n    \n    var v01 = [ p1[ 0 ] - p0[ 0 ], p1[ 1 ] - p0[ 1 ] ];     \/\/ 向量\x3cp0, p1\x3e\n    var v12 = [ p2[ 0 ] - p1[ 0 ], p2[ 1 ] - p1[ 1 ] ];     \/\/ 向量\x3cp1, p2\x3e\n\n    var q0 = [ p0[ 0 ] \x2b v01[ 0 ] * t, p0[ 1 ] \x2b v01[ 1 ] * t ];\n    var q1 = [ p1[ 0 ] \x2b v12[ 0 ] * t, p1[ 1 ] \x2b v12[ 1 ] * t ];\n    \n    var v = [ q1[ 0 ] - q0[ 0 ], q1[ 1 ] - q0[ 1 ] ];       \/\/ 向量\x3cq0, q1\x3e\n\n    var b = [ q0[ 0 ] \x2b v[ 0 ] * t, q0[ 1 ] \x2b v[ 1 ] * t ];\n    \n    ctx.moveTo( p0[ 0 ], p0[ 1 ] );\n\n    ctx.quadraticCurveTo( \n        q0[ 0 ], q0[ 1 ],\n        b[ 0 ], b[ 1 ]\n    );\n\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 绘制一条曲线路径\n * @param  {Object} ctx canvas渲染上下文\n * @param  {Array\x26lt;number\x26gt;} start 起点\n * @param  {Array\x26lt;number\x26gt;} end 终点\n * @param  {number} curveness 曲度(0-1)\n * @param  {number} percent 绘制百分比(0-100)\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawCurvePath\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e ctx, start, end, curveness, percent \x3c\/span\x3e) \x3c\/span\x3e{\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cp = [\n         ( start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] \x2b end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - ( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] - end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ) * curveness,\n         ( start[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] \x2b end[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - ( end[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] - start[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ) * curveness\n    ];\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e t = percent \/ \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p0 = start;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p1 = cp;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p2 = end;\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v01 = [ p1[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] - p0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], p1[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] - p0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ];     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 向量\x26lt;p0, p1\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v12 = [ p2[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] - p1[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], p2[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] - p1[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ];     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 向量\x26lt;p1, p2\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e q0 = [ p0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] \x2b v01[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] * t, p0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] \x2b v01[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] * t ];\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e q1 = [ p1[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] \x2b v12[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] * t, p1[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] \x2b v12[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] * t ];\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v = [ q1[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] - q0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], q1[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] - q0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] ];       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 向量\x26lt;q0, q1\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = [ q0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] \x2b v[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] * t, q0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] \x2b v[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] * t ];\n    \n    ctx.moveTo( p0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], p0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] );\n\n    ctx.quadraticCurveTo( \n        q0[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], q0[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ],\n        b[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], b[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ]\n    );\n\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e将前面写的页面替换成上面的代码，可以看到得到的结果是一样的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012670057?w=305\x26amp;h=269\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012670057?w=305\x26amp;h=269\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e绘制动画\x3c\/h3\x3e\n\x3cp\x3e现在已经解决了最关键的问题，我们可以绘制动画啦。\x3cbr\x3e不过这一部分并不重要，我就不贴代码了。\x3c\/p\x3e\n\x3cp\x3e完整代码可以看\x3ca href=\x22https:\/\/github.com\/hujiulong\/blog\/blob\/master\/demo\/bezier\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012600201?w=305\x26amp;h=269\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012600201?w=305\x26amp;h=269\x22 alt=\x22160935917f7f0d3f\x22 title=\x22160935917f7f0d3f\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e结束\x3c\/h2\x3e\n\x3cp\x3e我的博客地址： \x3ca href=\x22https:\/\/github.com\/hujiulong\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/hujiulong\/...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我会在这里分享我的学习成果和经验，特别是canvas\/WebGL\/svg这方面的技术。如果有对前端图形绘制感兴趣的同学可以关注一下我的博客，\x3cstrong\x3e收藏点star，订阅点watch\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e最近才将博客搬到github，所以文章并不多，我会坚持写下去的！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>用canvas绘制一个曲线动画——深入理解贝塞尔曲线</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012670045">https://segmentfault.com/a/1190000012670045</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/gutdaylyer/" target="_blank">https://alili.tech/archive/gutdaylyer/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>