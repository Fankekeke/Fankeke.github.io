<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="浏览器缓存机制"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>浏览器缓存机制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/guwt2cgvp7j/",
				"appid": "1613049289050283", 
				"title": "浏览器缓存机制 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-01T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/x4smeyuppo/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/hf1u69knvnj/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&text=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&text=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&is_video=false&description=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fguwt2cgvp7j%2f&title=%e6%b5%8f%e8%a7%88%e5%99%a8%e7%bc%93%e5%ad%98%e6%9c%ba%e5%88%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">浏览器缓存机制</h1><div class="meta"><div class="postdate"><time datetime="2018-12-01" itemprop="datePublished">2018-12-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e在我们开发网站的时候往往对网站的性能有极高的需求,当然,外包的除外哈.我见过的外包对效率要求特别高.对代码质量以及性能要求都不是很高.所以这里就不说明太多.高性能就意味着要使用各式各样的缓存,后台redis\/memcached缓存等,前台就是浏览器缓存.什么是浏览器缓存.简单来说,就是浏览器继续使用从服务器上的内容,而不去使用服务器上的内容.那如何使用呢,在使用之前,我们先来讲讲浏览器刷新机制.\x3c\/p\x3e\n\x3ch3\x3e浏览器刷新\x3c\/h3\x3e\n\x3cp\x3e常见的浏览器刷新有如下几个,Ctrl\x2bF5,Ctrl\x2bR,F5,还有个就是转到,前进.不要认为前进就不是刷新了.其实这个是错误的.下面我们来讲讲这几个区别.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eCtrl \x2b F5:\n    这个在开发过程中,经常使用,为什么说呢,Ctrl\x2bF5为强制刷新,让浏览器不遵守缓存协议,强制的全部重新在服务器上去请求.所有资源都全部重新的去请求.\nCtrl \x2b R|F5:\n    让浏览器遵守缓存协议,例如last-modified,etag等这些.如果这是服务端返回的是304就认为没有修改,就会直接调用之前的内容.具体的等下面在讲解.用户最多的操作\n前进-\x26gt;:\n    还有类似于这种操作,就是输入浏览器直接回车.浏览器会将代码Expires的并且没有过期的全部使用,以最少的请求去请求浏览器.就不用担心这种也是强制刷新了.\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面我们就来讲讲一些常见的用了浏览器缓存的例子.\x3c\/p\x3e\n\x3ch3\x3eLast-modified\x3c\/h3\x3e\n\x3cp\x3e在我们浏览网站的时候,经常能看到这个头部信息,这个头部信息是用来记录最后一次的修改时间.如果网站响应的头部信息有这个,那么下次访问的时候,浏览器会带上一个这样的标识\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eIf-Modified-Since:时间\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后服务端可以根据这个来判断是不是应该可以直接使用缓存.当然,一般动态的网页是很少用这种的,因为不存在传统意义上的最后的修改时间.一般会用于静态网站长时间不修改文件的内容等.我们来做一个简单示例.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22php\x22\x3e\x26lt;?php\n\/\/ 判断是否含有这个最后一次修改时间,如果有,就强制使用304,让浏览器使用缓存.并终止程序.\nif (array_key_exists(\x27HTTP_IF_MODIFIED_SINCE\x27, $_SERVER)) {\n    header(\x27HTTP\/1.1 304 Not Modified\x27);\n    exit;\n}\n\/\/ 添加最后一次的修改时间\nheader(\x27Last-Modified: \x27 . gmdate(\x27D, d M Y H:i:s\x27) . \x27 GMT\x27);\necho date(\x27Y-m-d H:i:s\x27);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里的做法虽然并不合理,没有判断时间,只要存在就使用缓存.这仅仅是为了看下效果,开发程序时应该有更好的做法.让我们来看看效果.我们把这个命令成index.php,放在localhost执行的地址,让我们来看看\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014823626?w=655\x26amp;h=896\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014823626?w=655\x26amp;h=896\x22 alt=\x22last-modifyed\x22 title=\x22last-modifyed\x22\x3e\x3c\/span\x3e\x3cbr\x3e第一次访问,浏览器得到的last-modified这个响应头,我们来看看请求头和响应头\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e--Response Headers--\nConnection:keep-alive\nContent-Encoding:gzip\nContent-Type:text\/html; charset=UTF-8\nDate:Fri, 11 May 2018 02:19:51 GMT\nLast-Modified:Fri, 11 May 2018 01:37:15 GMT\nServer:nginx\/1.9.15 (Ubuntu)\nTransfer-Encoding:chunked\n--Request Headers--\nAccept:text\/html,application\/xhtml\x2bxml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8\nAccept-Encoding:gzip, deflate, br\nAccept-Language:zh-CN,zh;q=0.9\nCache-Control:no-cache\nConnection:keep-alive\nHost:localhost\nPragma:no-cache\nUpgrade-Insecure-Requests:1\nUser-Agent:Mozilla\/5.0 (X11; Linux x86_64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/63.0.3239.132 Safari\/537.36\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从上面可以看出,对于第一次访问的网站,浏览器并没有缓存.然后当我们再次使用了F5过来,在来看看\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014823627?w=825\x26amp;h=806\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014823627?w=825\x26amp;h=806\x22 alt=\x22last-modified-2\x22 title=\x22last-modified-2\x22\x3e\x3c\/span\x3e\x3cbr\x3e这里我们的程序代码是直接退出程序,没有任何输出,那为什么还有这个输出,这个正式因为浏览器读取自己的缓存.让我们看看响应头.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e--Response Headers--\nConnection:keep-alive\nDate:Fri, 11 May 2018 02:26:57 GMT\nServer:nginx\/1.9.15 (Ubuntu)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里仅有简单的几行,指明了web服务器和系统,再来看看请求头\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eAccept:text\/html,application\/xhtml\x2bxml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8\nAccept-Encoding:gzip, deflate, br\nAccept-Language:zh-CN,zh;q=0.9\nCache-Control:max-age=0\nConnection:keep-alive\nHost:localhost\nIf-Modified-Since:Fri, 11 May 2018 01:37:15 GMT\nUpgrade-Insecure-Requests:1\nUser-Agent:Mozilla\/5.0 (X11; Linux x86_64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/63.0.3239.132 Safari\/537.36\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e添加了一个If-Modified-Since,让我们来判断有效期,这个就是让我们来判断是否使用浏览器缓存的一个标识.所以这个就让我们的浏览器强制使用了缓存.\x3c\/p\x3e\n\x3ch3\x3eEtag\x3c\/h3\x3e\n\x3cp\x3e这个头又是用来干嘛的,这个又是跟浏览器协商的另一种方法,它于前面的last-modified非常相似,但是它没有用文件的最后修改时间,而是用一段编码俩标记内容,这个编码并没有强制要求,但是我们通常用一个文件内容的md5来作为Etag.一个原则就是,如果一个内容的Etag没有变化,那么这个内容也一定没有更新.让我们来弄一个简单的示例.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22php\x22\x3e\x26lt;?php\n$date = date(\x27Y-m-d\x27);    \/\/ 我们这里用当前的日期来代替文件md5\n\/\/ 判断请求头中是否存在if-none-match,如果存在就去判断md5,如果值一样,就返回304\nif (array_key_exists(\x27HTTP_IF_NONE_MATCH\x27, $_SERVER)\n    \x26amp;\x26amp; $_SERVER[\x27HTTP_IF_NONE_MATCH\x27] == \x27W\/\x22\x27 . md5($date) . \x27\x22\x27) {\n    header(\x27HTTP\/1.1 304 Not Modified\x27);\n    exit;    \/\/ 退出\n}\n\/\/ 添加请求头.\nheader(\x27Etag: \x22\x27 . md5($date) . \x27\x22\x27);\necho date(\x27Y-m-d H:i:s\x27);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里我们的程序代码是跟我们用last-modified是一样的.对于我们来说,也是不合理的,只是用来当成示例而已方便理解.让我们来看看执行效果.\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014823628\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014823628\x22 alt=\x22etag-1\x22 title=\x22etag-1\x22\x3e\x3c\/span\x3e\x3cbr\x3e第一次都是强制请求,如果前面的没有处理,就先Ctrl\x2bF5,这里就先说明这个.具体的部署还是跟上一步的步骤一样.让我们看看响应头\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e--Response Headers--\nConnection:keep-alive\nContent-Encoding:gzip\nContent-Type:text\/html; charset=UTF-8\nDate:Fri, 11 May 2018 02:45:07 GMT\nEtag:W\/\x2264ddf4c4fbf56a689c963872a8325370\x22\nServer:nginx\/1.9.15 (Ubuntu)\nTransfer-Encoding:chunked\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在响应头里面增加一项,Etag,当然这个是我们的程序输出的.用程序控制的.我们来看看F5过后的结果\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014823629?w=750\x26amp;h=815\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014823629?w=750\x26amp;h=815\x22 alt=\x22etag-2\x22 title=\x22etag-2\x22\x3e\x3c\/span\x3e\x3cbr\x3e我们看见响应头中多了一个If-None-Match这个跟我们上一个请求的Etag值是一样的.\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e--Request Headers--\nAccept:text\/html,application\/xhtml\x2bxml,application\/xml;q=0.9,image\/webp,image\/apng,*\/*;q=0.8\nAccept-Encoding:gzip, deflate, br\nAccept-Language:zh-CN,zh;q=0.9\nCache-Control:max-age=0\nConnection:keep-alive\nHost:localhost\nIf-None-Match:W\/\x2264ddf4c4fbf56a689c963872a8325370\x22\nUpgrade-Insecure-Requests:1\nUser-Agent:Mozilla\/5.0 (X11; Linux x86_64) AppleWebKit\/537.36 (KHTML, like Gecko) Chrome\/63.0.3239.132 Safari\/537.36\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个对于我们来说,在程序中我们也是直接停止了,并且报出304的状态码,但是浏览器还是作出反映了,将以前的值拿过来用了.这个就是我们的Etag\x3c\/p\x3e\n\x3ch3\x3eEtag和Last-Modified\x3c\/h3\x3e\n\x3cp\x3e既然这两个都是用来作用浏览器缓存的.那谁的优先级高呢,其实没有优化级,根据我们服务的处理来的.我们如果优先处理Etag那就Etag值高,优先处理Last-Modified就Last-Modified高.\x3c\/p\x3e\n\x3ch3\x3e另一种不同的Expires\x3c\/h3\x3e\n\x3cp\x3e上面两种方式已经说明了,但是我们还是会经常看到,在我们退出浏览器过后,再次访问这个网站的时候,还是读取的缓存.显然,我们上面两种都不行的.不信你试试.这里我们就介绍另外一种,Expires,我们先来例子\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22php\x22\x3e\x26lt;?php\n$stream = file_get_contents(\x27.\/etag-1.png\x27);\n$seconds_to_cache = 3600;\n$ts = gmdate(\x22D, d M Y H:i:s\x22, time() \x2b $seconds_to_cache) . \x22 GMT\x22;\nheader(\x27Content-Type: image\/png\x27);\nheader(\x22Expires: $ts\x22);\necho $stream;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们第一次访问的时候,用localhost访问时,会得到一张图片.并且缓存1个小时,然后我们退出浏览器.并修改代码\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e\x26lt;?php\nexit(\x27111111\x27);\n$stream = file_get_contents(\x27.\/etag-1.png\x27);\n$seconds_to_cache = 3600;\n$ts = gmdate(\x22D, d M Y H:i:s\x22, time() \x2b $seconds_to_cache) . \x22 GMT\x22;\nheader(\x27Content-Type: image\/png\x27);\nheader(\x22Expires: $ts\x22);\necho $stream;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在访问时,依然会得到我们的图片,并没有得到我们所谓的6个1.这个图片已经被浏览器缓存下来了.Expires是绝对时间.同理还有一个相对的,Cache-Control这里我就不演示,可以自己根据代码来作出演示即可.\x3c\/p\x3e\n\x3ch3\x3e最后\x3c\/h3\x3e\n\x3cp\x3e我们根据以上的得出如下结果\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eLast-Modified -\x26gt; If-Modified-Since    \/\/ 浏览器缓存于当前会话\nEtags -\x26gt; If-Modified-Since \/\/ 浏览器缓存当前会话\nExpires    \/\/ 关闭后也有效\nCache-Control    \/\/ 关闭后也有效\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以根据不同的场景应用不同的缓存机制了.\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>浏览器缓存机制</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014823623">https://segmentfault.com/a/1190000014823623</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/guwt2cgvp7j/" target="_blank">https://alili.tech/archive/guwt2cgvp7j/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>