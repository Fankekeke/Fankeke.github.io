<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="使用 Typescript 检查你的代码规范"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>使用 Typescript 检查你的代码规范 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/h2amhgeebhb/",
				"appid": "1613049289050283", 
				"title": "使用 Typescript 检查你的代码规范 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-14T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ahd2oyjmoe/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/453msm3sw7i/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&text=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&text=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&title=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&is_video=false&description=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&title=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&title=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&title=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh2amhgeebhb%2f&title=%e4%bd%bf%e7%94%a8%20Typescript%20%e6%a3%80%e6%9f%a5%e4%bd%a0%e7%9a%84%e4%bb%a3%e7%a0%81%e8%a7%84%e8%8c%83"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">使用 Typescript 检查你的代码规范</h1><div class="meta"><div class="postdate"><time datetime="2018-12-14" itemprop="datePublished">2018-12-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e背景\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e越来越多的前端项目开始使用\x3ccode\x3etypescript\x3c\/code\x3e这门静态检查语言了，它包括很多很棒的功能点，在这里就不细述，根据静态语法检查和\x3ccode\x3e.d.ts\x3c\/code\x3e生成的代码提示两大特性，我们就可以来制定并且检查代码规范，现在我们来详细说一下。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e代码规范\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e代码规范大家应该是从开始写第一行代码开始别人就开始和你说，要遵循xx代码规范。公司不同，规范的内容、形式、检查方式也不同，但最终是要验收你的规范。\x3cbr\x3e如果是通过leader code review方式来检查代码，那效率也就太低了，\x3cstrong\x3e最好的方式就是在GIT提交之前做检查。\x3c\/strong\x3e你的代码不合规范，提交都提交不上去，这样就能从入口上保证代码的规范性。\x3cbr\x3e我们再说看下前端的代码规范情况，前端的代码主要就是js的代码，因为js的灵活性以及随意性，让工具来检查代码的规范成为不可能，这也是我一直头疼的事，因为规范这种东西，说再多遍，不来点强制手段，组内之前也是不可能达成一致的。直到\x3ccode\x3eTypescript\x3c\/code\x3e的出现，解决了这个问题。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eTypescript检查的原理\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e\x3ccode\x3eTypescript\x3c\/code\x3e是\x3ccode\x3ejavascript\x3c\/code\x3e的超集，所以\x3ccode\x3ets\x3c\/code\x3e在运行之前，得先编译成\x3ccode\x3ejs\x3c\/code\x3e，那么这个编译的过程，\x3ccode\x3ets\x3c\/code\x3e的编译引擎就得知道，文件里包括哪些方法，方法包含哪些参数，各参数的定义是什么，类型是什么，总之，所有源信息必须都知道，才能准确无误的把\x3ccode\x3ets\x3c\/code\x3e翻译成\x3ccode\x3ejs\x3c\/code\x3e。这些东西也正是我们需要的，通过这些信息，我们就可以对比规范和源信息，来确认是否是符合我们制定规范的代码。\x3c\/p\x3e\n\x3ch4\x3e初步实现\x3c\/h4\x3e\n\x3chr\x3e\n\x3cp\x3e顺着这个思路，我查了查\x3ccode\x3etypescript\x3c\/code\x3e的官方文档，果然找到了一个，叫做\x3ca href=\x22https:\/\/github.com\/Microsoft\/TypeScript\/wiki\/Using-the-Compiler-API\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCompiler API\x3c\/a\x3e，最后的那个例子，是和我们的需求相关的，把代码拿下来，也是可以跑通的，所以呢，下一步，就是基于这个例子进行扩展，来满足我们自己的需求。\x3cbr\x3e实现的过程，也是挺痛苦的，因为没有文档，也没有说明，幸亏在\x3ccode\x3evscode\x3c\/code\x3e可以点进行看声明文件，好消息是可以看到方法的定义，坏消息就是所有的方法的声明、类型，都没有注释，部分需要自己来猜，哈哈，有总比没有强，照猫画虎，总算实现了基本功能。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV1KkE?w=545\x26amp;h=194\x22 src=\x22https:\/\/static.alili.tech\/img\/bV1KkE?w=545\x26amp;h=194\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e官方的\x3ccode\x3e.d.ts\x3c\/code\x3e大致就长这样\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e开发之中，有一个问题比较难解决，就是在目前可观测的API中，只能\x3ccode\x3econstructor\x3c\/code\x3e可以取到返回值类型，其他方法API根本不提供，最后借助\x3ccode\x3estackoverflow\x3c\/code\x3e上提问，解决了这个问题，有兴趣的同学可以参考下：\x3ca href=\x22https:\/\/stackoverflow.com\/questions\/47215069\/how-to-use-typescript-compiler-api-to-get-normal-function-info-eg-returntype-p\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehow to use typescript Compiler API to get normal function info, eg: returnType\/parameters?\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e检查你的代码\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e现在已经可以检查你的代码了，我们上面也说了，最好的检查时机是开发人员提交的时候，这时会检查所有的代码，只有所有的代码都符合规范，才会提交成功，这是我们最理想的情况。\x3cbr\x3e按照这个思路，我们可以查到，\x3ccode\x3eGit\x3c\/code\x3e有很多钩子，\x3ccode\x3epre-commit\x3c\/code\x3e、\x3ccode\x3ecommit-msg\x3c\/code\x3e、\x3ccode\x3epost-commit\x3c\/code\x3e等等，我们使用\x3ccode\x3epre-commit\x3c\/code\x3e：提交前检查，会执行\x3ccode\x3e.git\/hooks\/pre-commit\x3c\/code\x3e下的脚本文件，但是这个文件分布在组内所有人的笔记本中，并且不能增加版本控制。带着这样的疑问，我们找到了\x3ccode\x3epre-commit\x3c\/code\x3e这个神器，它的实现原理也是修改上面的文件，不过它从\x3ccode\x3enode\x3c\/code\x3e层屏蔽了实现细节，我们只要在\x3ccode\x3epackage.json\x3c\/code\x3e里面增加一个\x3ccode\x3escript\x3c\/code\x3e就可以实现我们要的功能。\x3c\/p\x3e\n\x3cp\x3e配置大概是这样：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\n\x26quot;pre-commit\x26quot;: [\x26quot;commit\x26quot;],\n\x26quot;script\x26quot;:{\n    ...\n    \x26quot;commit\x26quot;: \x26quot;ts-node verify.ts\x26quot;\n    ...\n}\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs prolog\x22\x3e\x3ccode\x3e...\n\x3cspan class=\x22hljs-string\x22\x3e\x22pre-commit\x22\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22commit\x22\x3c\/span\x3e],\n\x3cspan class=\x22hljs-string\x22\x3e\x22script\x22\x3c\/span\x3e:{\n    ...\n    \x3cspan class=\x22hljs-string\x22\x3e\x22commit\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22ts-node verify.ts\x22\x3c\/span\x3e\n    ...\n}\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样在\x3ccode\x3egit\x3c\/code\x3e里面\x3ccode\x3ecommit\x3c\/code\x3e（不管使用命令行还是\x3ccode\x3eSourceTree\x3c\/code\x3e这样图形界面）的时候就会执行\x3ccode\x3ets-node verify.ts\x3c\/code\x3e，检查要是失败了，就会把错误信息打印到控制台上，并且提交会失败，直到所有的已定规则都验证通过，才会提交成功。\x3c\/p\x3e\n\x3cp\x3e检查失败，大致就是这样的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3qsi?w=579\x26amp;h=189\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3qsi?w=579\x26amp;h=189\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e还有一个更大的作用\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e我们已经通过上一步，能够检查我们的规范了，知道代码的所有信息，比如\x3cstrong\x3e生成\x3ccode\x3e.d.ts\x3c\/code\x3e文件！\x3c\/strong\x3e对一个对外提供的工具库来讲，如果没有一套完整的\x3ccode\x3e.d.ts\x3c\/code\x3e文件进行代码提示的话，那就显的太不专业了。如果要生成一个完整的提示文件，就必须要求你的类、方法、参数、返回值都要有完整的注释，这些就应该在你的代码规范中。\x3c\/p\x3e\n\x3cp\x3e我们来看一下，比较好的例子：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV1KFy?w=795\x26amp;h=175\x22 src=\x22https:\/\/static.alili.tech\/img\/bV1KFy?w=795\x26amp;h=175\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e知道了所有的信息，生成这个文件其实就是字符串的拼接，没什么技术含量，不过生成的格式还得注意一下。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e兼容所有情况的\x3ccode\x3e.d.ts\x3c\/code\x3e写法\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3e一般我们使用一个库文件的时候，都会有三种用法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Util from \x27xxx\/Util\x27\nimport {DateTime, Fiel} from \x27xxx\/Util\x27\nimport * as Util from \x27xxx\/Util\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Util \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27xxx\/Util\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {DateTime, Fiel} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27xxx\/Util\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e * \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e Util \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27xxx\/Util\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在使用的时候，这三种形式所需要的\x3ccode\x3e.d.ts\x3c\/code\x3e文件的格式也是不一样的，所以作为对外提供服务的库文件来说，所有的使用方式，我们都应该兼容。经过多次尝试，这样格式的\x3ccode\x3e.d.ts\x3c\/code\x3e文件是兼容所有用法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export class DateTime {\n    static dateFormat(....)\n}\n\ndeclare const exDe: {\n    DateTime: typeof DateTime\n}\n\nexport default exDe\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dart\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eDateTime\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e dateFormat(....)\n}\n\ndeclare \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e exDe: {\n    \x3cspan class=\x22hljs-built_in\x22\x3eDateTime\x3c\/span\x3e: typeof \x3cspan class=\x22hljs-built_in\x22\x3eDateTime\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e exDe\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e源码\x3c\/h3\x3e\n\x3chr\x3e\n\x3cp\x3eDemo的源码以及使用效果，\x3ca href=\x22https:\/\/github.com\/sunhaikuo\/ts-inspector-demo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e用力点我\x3c\/a\x3e\x3cbr\x3eDemo中用到的代码检查工具，\x3ca href=\x22https:\/\/github.com\/sunhaikuo\/ts-inspector\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e用力点我\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e使用效果\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e检查失败的情况\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3q9s?w=562\x26amp;h=199\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3q9s?w=562\x26amp;h=199\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e检查成功的情况\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3q9E?w=618\x26amp;h=166\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3q9E?w=618\x26amp;h=166\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>使用 Typescript 检查你的代码规范</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013173370">https://segmentfault.com/a/1190000013173370</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/h2amhgeebhb/" target="_blank">https://alili.tech/archive/h2amhgeebhb/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>