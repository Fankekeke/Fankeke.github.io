<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Weex在native中离线加载本地的字体文件,如iconfont.ttf"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Weex在native中离线加载本地的字体文件,如iconfont.ttf | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/h6t6j85bya/",
				"appid": "1613049289050283", 
				"title": "Weex在native中离线加载本地的字体文件,如iconfont.ttf | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-26T02:30:14"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ftlf8pzrx8s/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/m0c5wjedr0p/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&text=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&text=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&title=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&is_video=false&description=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&title=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&title=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&title=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fh6t6j85bya%2f&title=Weex%e5%9c%a8native%e4%b8%ad%e7%a6%bb%e7%ba%bf%e5%8a%a0%e8%bd%bd%e6%9c%ac%e5%9c%b0%e7%9a%84%e5%ad%97%e4%bd%93%e6%96%87%e4%bb%b6%2c%e5%a6%82iconfont.ttf"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Weex在native中离线加载本地的字体文件,如iconfont.ttf</h1><div class="meta"><div class="postdate"><time datetime="2018-12-26" itemprop="datePublished">2018-12-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e鉴于自己的APP有个离线模式,所以在使用iconfont的时候不得不将字体文件保存到本地,通过离线的方式加载,所以有了以下的文章.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e先讲一波道理\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3eweex怎么加载字体 --\x26gt;\x3ca href=\x22https:\/\/weex.apache.org\/cn\/references\/modules\/dom.html#fontFace\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e通过dom的方式添加自定义字体\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3e如何区别本地资源和在线资源--\x26gt;  \x3ca href=\x22https:\/\/weex.apache.org\/cn\/references\/path.html#Schemes\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSchemes的定义\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3enative端的相对路径--\x26gt; \x3ca href=\x22https:\/\/weex.apache.org\/cn\/references\/path.html#\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e相对路径的使用\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e总结一波道理\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3eAndroid或者iOS 访问本地图片或者字体,在weex中统一以\x27 \x3ccode\x3elocal:\/\/\x3c\/code\x3e\x27为前缀 ;\x3c\/li\x3e\n\x3cli\x3e\x27\x3ccode\x3e\/\x3c\/code\x3e\x27在android下如果加载的是字体对应的就是\x3ccode\x3eassets\x3c\/code\x3e目录,若果加载的图片就从\x3ccode\x3edrawable \x3c\/code\x3e目录, 所以iconfont.ttf放置在\x3ccode\x3esrc\/assets\x3c\/code\x3e目录下的话,字体的url加载方式应该为\x3ccode\x3e(\x27local:\/\/\/iconfont.ttf\x27)\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3eiOS同理,不过资源文件在\x3ccode\x3ebundle resources\x3c\/code\x3e下.(加载方法未测试)\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e\x3ch3 id=\x22articleHeader2\x22\x3e道理我都懂,可仍然过不好这一生 Talk is cheap.\x3c\/h3\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 初始化加载iconfont字体\n * \n * @type \x22{{\x22initIconfont: (function())\x22}}\x22\n *\/\nlet iconfontUtils = {\n    initIconfont() {\n        let dom = weex.requireModule(\x27dom\x27);\n        \/\/通过获取platform判断加载字体文件的路径,(待完善,在手机的playground中,是无法加载本地文件的)\n        let platform = weex.config.env.platform.toLowerCase();\n        let url;\n        if ( \x26quot;android\x26quot; == platform) {\n            \/\/本地资源采用\x27local:\/\/ \x27的方式加载\n           \/\/第三个斜杠是代表当前目录,对于android来说,如果加载的是字体,那么就是assets目录,同理`\/iconfont.ttf\x27`就是加载`assets`目录下的iconfont.ttf文件\n            url = \x26quot;url(\x27local:\/\/\/font\/iconfont.ttf\x27)\x26quot;;\/\/注意我这里是将字体文件放在\x27assets\/font\/\x27\x27目录下的,所以\n        } else if (\x26quot;ios\x26quot; == platform) {\n            \/\/todo 理论上同android未测试\n            url = \x26quot;url(\x27local:\/\/\/font\/iconfont.ttf\x27)\x26quot;;\n        } else {\n            url = \x26quot;url(\x27http:\/\/at.alicdn.com\/t\/xxxxxxx.ttf\x27)\x26quot;\n        }\n        dom.addRule(\x27fontFace\x27, {\n            \x27fontFamily\x27: \x26quot;iconfont\x26quot;,\n            \x27src\x27: url\n        });\n    }\n}\nexport default iconfontUtils;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 初始化加载iconfont字体\n * \n * @type \x22{{\x22initIconfont: (function())\x22}}\x22\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e iconfontUtils = {\n    initIconfont() {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e dom = weex.requireModule(\x3cspan class=\x22hljs-string\x22\x3e\x27dom\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/通过获取platform判断加载字体文件的路径,(待完善,在手机的playground中,是无法加载本地文件的)\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e platform = weex.config.env.platform.toLowerCase();\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( \x3cspan class=\x22hljs-string\x22\x3e\x22android\x22\x3c\/span\x3e == platform) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/本地资源采用\x27local:\/\/ \x27的方式加载\x3c\/span\x3e\n           \x3cspan class=\x22hljs-comment\x22\x3e\/\/第三个斜杠是代表当前目录,对于android来说,如果加载的是字体,那么就是assets目录,同理`\/iconfont.ttf\x27`就是加载`assets`目录下的iconfont.ttf文件\x3c\/span\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22url(\x27local:\/\/\/font\/iconfont.ttf\x27)\x22\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/注意我这里是将字体文件放在\x27assets\/font\/\x27\x27目录下的,所以\x3c\/span\x3e\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-string\x22\x3e\x22ios\x22\x3c\/span\x3e == platform) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/todo 理论上同android未测试\x3c\/span\x3e\n            \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22url(\x27local:\/\/\/font\/iconfont.ttf\x27)\x22\x3c\/span\x3e;\n        } \x3cspan class=\x22hljs-title\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22url(\x27http:\/\/at.alicdn.com\/t\/xxxxxxx.ttf\x27)\x22\x3c\/span\x3e\n        }\n        dom.addRule(\x3cspan class=\x22hljs-string\x22\x3e\x27fontFace\x27\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-string\x22\x3e\x27fontFamily\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22iconfont\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eurl\x3c\/span\x3e\n        });\n    }\n}\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e iconfontUtils;\x3c\/code\x3e\x3c\/pre\x3e\n\x3chr\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e除了道理还有一波鸡汤\x3c\/h3\x3e\n\x3chr\x3e\n\x3ch4\x3e关于加载本地字体库文件,动态绑定的时候异常显示\x3c\/h4\x3e\n\x3cp\x3e加载本地的字体库的话,静态写死在\x26lt;text\x26gt;元素下,如\x26lt;text class=\x27iconfont\x27\x26gt;\x26amp;#xe600;\x26lt;text\x26gt;,这样正常,但是如果通过Mustache进行数据绑定\x22{{\x22font\x22}}\x22(这里的font=\x27\x26amp;#xe600;\x27)时,页面中显示是错误的.\x3c\/p\x3e\n\x3ch4\x3e解决方案:\x3c\/h4\x3e\n\x3ch4\x3e方案一\x3c\/h4\x3e\n\x3cp\x3e参考\x3ca href=\x22https:\/\/segmentfault.com\/u\/hayvane\x22\x3ehayvane\x3c\/a\x3e在\x3ca href=\x22https:\/\/segmentfault.com\/q\/1010000009357817\x22 target=\x22_blank\x22\x3eWeex关于字体图标的bug\x3c\/a\x3e的回答\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e在template中 text写死 \x26amp;#xe685;时，weex-template-compiler在编译阶段使用了he进行decode，而在template中Mustache进行数据绑定fontName（fontName:\x22\x26amp;#xe685;\x22）时不会进行decode.\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var he = require(\x27he\x27);\n getFontName: function() {\n   return he.decode(this.fontName)\n }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e he = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27he\x27\x3c\/span\x3e);\n getFontName: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n   \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e he.decode(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.fontName)\n }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e方案点评:\x3c\/h5\x3e\n\x3col\x3e\n\x3cli\x3e引入了\x3ccode\x3ehe\x3c\/code\x3e导致打包体积过大\x3c\/li\x3e\n\x3cli\x3e需要手动处理非常麻烦\x3c\/li\x3e\n\x3cli\x3e待官方解决\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3chr\x3e\n\x3ch4\x3e方案二:\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e通过正则表达式将iconfont的字符取出替换,用String.fromCharCode()方法处理\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22decode(text) {\n        \/\/ 正则匹配 图标和文字混排 eg: 我去上学校\x26amp;#xe600;,天天不\x26amp;#xe600;迟到\n        let regExp = \/\x26amp;#x[a-z]\\d{3,4};?\/;\n        if (regExp.test(text)) {\n            return text.replace(new RegExp(regExp, \x27g\x27), function (iconText) {\n                let replace = iconText.replace(\/\x26amp;#x\/, \x270x\x27).replace(\/;$\/, \x27\x27);\n                return String.fromCharCode(replace);\n            });\n        } else {\n            return text;\n        }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3edecode(text) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 正则匹配 图标和文字混排 eg: 我去上学校\x26amp;#xe600;,天天不\x26amp;#xe600;迟到\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e regExp = \x3cspan class=\x22hljs-regexp\x22\x3e\/\x26amp;#x[a-z]\\d{3,4};?\/\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (regExp.test(text)) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e text.replace(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(regExp, \x3cspan class=\x22hljs-string\x22\x3e\x27g\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eiconText\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e replace = iconText.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\x26amp;#x\/\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x270x\x27\x3c\/span\x3e).replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/;$\/\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e.fromCharCode(replace);\n            });\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e text;\n        }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e方案二感谢\x3ca href=\x22https:\/\/github.com\/alibaba\/weex-ui\/issues\/45#issuecomment-342087078\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehizhengfu\x3c\/a\x3e给的思路.\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Weex在native中离线加载本地的字体文件,如iconfont.ttf</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011852209">https://segmentfault.com/a/1190000011852209</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/h6t6j85bya/" target="_blank">https://alili.tech/archive/h6t6j85bya/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>