<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Vue.js应用的四种AJAX请求数据模式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Vue.js应用的四种AJAX请求数据模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/i4lssa0qiu8/",
				"appid": "1613049289050283", 
				"title": "Vue.js应用的四种AJAX请求数据模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-02T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/l0ed1wg2nj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/juusy45lxnd/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&text=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&text=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&title=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&is_video=false&description=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&title=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&title=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&title=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fi4lssa0qiu8%2f&title=Vue.js%e5%ba%94%e7%94%a8%e7%9a%84%e5%9b%9b%e7%a7%8dAJAX%e8%af%b7%e6%b1%82%e6%95%b0%e6%8d%ae%e6%a8%a1%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Vue.js应用的四种AJAX请求数据模式</h1><div class="meta"><div class="postdate"><time datetime="2019-01-02" itemprop="datePublished">2019-01-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3eVue.js应用的四种AJAX请求数据模式\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e翻译原文出处：\x3ca href=\x22https:\/\/vuejsdevelopers.com\/2017\/08\/28\/vue-js-ajax-recipes\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e4 AJAX Patterns For Vue.js Apps\x3c\/a\x3e  \x3cbr\x3e鄙人翻译略差，别见笑。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e如果您闲的没事干去两个Vue.js开发人员：“在Vue应用中使用AJAX的正确姿势是咋样的？”，您将会得到三种或更多的不同回答。\x3c\/p\x3e\n\x3cp\x3eVue.js官方没有提供实现AJAX的指定方式，并且有许多不同的设计模式可以被有效地使用。每个都有自己的利弊，应根据要求进行判断。你甚至可以同时使用几个！\x3c\/p\x3e\n\x3cp\x3e在本文中，我将向您展示您可以在Vue应用程序中实现AJAX的四个位置：\x3c\/p\x3e\n\x3cp\x3e1、\x3ca\x3e根实例\x3c\/a\x3e\x3cbr\x3e2、\x3ca\x3e组件Components\x3c\/a\x3e\x3cbr\x3e3、\x3ca\x3eVuex actions\x3c\/a\x3e\x3cbr\x3e4、\x3ca\x3e路线导航卫士\x3c\/a\x3e\x3cbr\x3e5、\x3ca\x3e另加：奖金模式\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我将解释每个方法，举一个例子，并涵盖利弊。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e一、根实例\x3c\/h3\x3e\n\x3cp\x3e在使用Vue框架时，您可以一开始就从根实例发出所有AJAX请求，即写好所有的数据请求，并将所有状态存储在该实例中。如果任何子组件需要数据，它将会顺着\x3ccode\x3eprops\x3c\/code\x3e中传下来。如果子组件需要刷新数据，则将使用自定义事件来提示根实例请求它。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nnew Vue({\n  data: {\n    message: \x27\x27\n  },\n  methods: {\n    refreshMessage(resource) {\n      this.$http.get(\x27\/message\x27).then((response) {\n        this.message = response.data.message;\n      });\n    }\n  }\n})\n\nVue.component(\x27sub-component\x27, {\n  template: \x27\x3cdiv\x3e\x22{{\x22 message \x22}}\x22\x3c\/div\x3e\x27,\n  props: [ \x27message\x27 ]\n  methods: {\n    refreshMessage() {\n      this.$emit(\x27refreshMessage\x27);\n    }\n  }\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue({\n  \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    refreshMessage(resource) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$http.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/message\x27\x3c\/span\x3e).then((response) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.message = response.data.message;\n      });\n    }\n  }\n})\n\nVue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27sub-component\x27\x3c\/span\x3e, {\n  \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div\x26gt;\x22{{\x22 message \x22}}\x22\x26lt;\/div\x26gt;\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x27message\x27\x3c\/span\x3e ]\n  methods: {\n    refreshMessage() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27refreshMessage\x27\x3c\/span\x3e);\n    }\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e优点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e将所有的AJAX逻辑和数据保存在一个地方。\x3c\/li\x3e\n\x3cli\x3e保持您的组件“独立性”，以便它们可以更加专注于展示。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e缺点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e随着您的应用扩展，需要书写大量的“props”和自定义事件。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e二、组件Components\x3c\/h3\x3e\n\x3cp\x3e在使用Vue框架时，组件负责管理自己的AJAX请求和独立状态。实际上，您可能需要创建几个“容器组件”来管理本地组“展示组件”的数据。\x3c\/p\x3e\n\x3cp\x3e例如，filter-list可能是一个容器组件包装filter-input和filter-reset，它们作为展示组件。filter-list将包含AJAX数据逻辑，并且将管理该组中所有组件的数据，通过\x3ccode\x3eprops\x3c\/code\x3e和事件进行通信。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e请参阅\x3ca href=\x22http:\/\/www.jianshu.com\/p\/6fa2b21f5df3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e译文《容器组件和展示组件》原作者：Dan Abramov\x3c\/a\x3e，可以更好地深入了解这种模式。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e为了简化此架构的实现，您可以将任何AJAX逻辑抽象为混合，然后在组件中使用mixin使其成为AJAX。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nlet mixin = {\n  methods: {\n    callAJAX(resource) {\n      \/\/...\n    }\n  }\n};\n\nVue.component(\x27container-comp\x27, {\n  \/\/ No meaningful template, I just manage data for my children\n  template: \x27\x3cdiv\x3e\x3cpresentation-comp :mydata=\x26quot;mydata\x26quot;\x3e\x3c\/presentation-comp\x3e\x3c\/div\x3e\x27, \n  mixins: [ myMixin ],\n  data() {\n    return {\n     \/\/... \n    }\n  },\n\n});\n\nVue.component(\x27presentation-comp\x27, {\n  template: \x27\x3cdiv\x3eI just show stuff like \x22{{\x22 mydata \x22}}\x22\x3c\/div\x3e\x27,\n  props: [ \x27mydata\x27 ]\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mixin = {\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    callAJAX(resource) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n    }\n  }\n};\n\nVue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27container-comp\x27\x3c\/span\x3e, {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ No meaningful template, I just manage data for my children\x3c\/span\x3e\n  template: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div\x26gt;\x26lt;presentation-comp :mydata=\x22mydata\x22\x26gt;\x26lt;\/presentation-comp\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e, \n  \x3cspan class=\x22hljs-attr\x22\x3emixins\x3c\/span\x3e: [ myMixin ],\n  data() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n     \x3cspan class=\x22hljs-comment\x22\x3e\/\/... \x3c\/span\x3e\n    }\n  },\n\n});\n\nVue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27presentation-comp\x27\x3c\/span\x3e, {\n  \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div\x26gt;I just show stuff like \x22{{\x22 mydata \x22}}\x22\x26lt;\/div\x26gt;\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eprops\x3c\/span\x3e: [ \x3cspan class=\x22hljs-string\x22\x3e\x27mydata\x27\x3c\/span\x3e ]\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e优点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e保持组件脱钩和可重用。\x3c\/li\x3e\n\x3cli\x3e在任何时候和任何地点都可以获取数据。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e缺点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e与其他组件或组件组不通信数据。\x3c\/li\x3e\n\x3cli\x3e组件可能会产生很多累赘的职责和重复的功能。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e三、Vuex actions\x3c\/h3\x3e\n\x3cp\x3e在使用Vue框架时，您可以在Vuex \x3ccode\x3estore\x3c\/code\x3e中管理状态和AJAX逻辑; 组件可以通过\x3ccode\x3edispatch\x3c\/code\x3e方法操作来请求新数据(store.dispatch将用于触发actions动作)。\x3c\/p\x3e\n\x3cp\x3e如果您要使用此模式，最好从您的\x3ccode\x3eaction\x3c\/code\x3e中返回一个\x3ccode\x3epromise\x3c\/code\x3e，以便对AJAX请求的解析做出反应，例如隐藏加载微调器，重新启用按钮等。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nstore = new Vuex.Store({\n  state: {\n    message: \x27\x27\n  },\n  mutations: {\n    updateMessage(state, payload) {\n      state.message = payload\n    }\n  },\n  actions: {\n    refreshMessage(context) {\n      return new Promise((resolve) =\x3e {\n        this.$http.get(\x27...\x27).then((response) =\x3e {\n          context.commit(\x27updateMessage\x27, response.data.message);\n          resolve();\n        });\n      });\n    }\n  }\n});\n\nVue.component(\x27my-component\x27, {\n  template: \x27\x3cdiv\x3e\x22{{\x22 message \x22}}\x22\x3c\/div\x3e\x27,\n  methods: {\n    refreshMessage() {\n      this.$store.dispatch(\x27refeshMessage\x27).then(() =\x3e {\n        \/\/ do stuff\n      });\n    }\n  },\n  computed: {\n    message: { return this.$store.state.message; }\n  }\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\nstore = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vuex.Store({\n  \x3cspan class=\x22hljs-attr\x22\x3estate\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emutations\x3c\/span\x3e: {\n    updateMessage(state, payload) {\n      state.message = payload\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eactions\x3c\/span\x3e: {\n    refreshMessage(context) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$http.get(\x3cspan class=\x22hljs-string\x22\x3e\x27...\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n          context.commit(\x3cspan class=\x22hljs-string\x22\x3e\x27updateMessage\x27\x3c\/span\x3e, response.data.message);\n          resolve();\n        });\n      });\n    }\n  }\n});\n\nVue.component(\x3cspan class=\x22hljs-string\x22\x3e\x27my-component\x27\x3c\/span\x3e, {\n  \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div\x26gt;\x22{{\x22 message \x22}}\x22\x26lt;\/div\x26gt;\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    refreshMessage() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$store.dispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27refeshMessage\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ do stuff\x3c\/span\x3e\n      });\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3ecomputed\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: { \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$store.state.message; }\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e本人比较喜欢这种数据请求模式，因为它很好地分离了你的状态和表现的逻辑。如果你正在使用Vuex，这是要走的路。如果你不使用Vuex，这模式可能是一个很好的理由。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e优点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e所有的根组件架构的优点，不需要\x3ccode\x3eprops \x3c\/code\x3e和自定义事件。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e缺点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e增加Vuex的开销。\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e四、路线导航卫士\x3c\/h3\x3e\n\x3cp\x3e在使用Vue框架时，您的应用程序分为多个页面，当路由更变时，将抓取页面及其子组件所需的所有数据。\x3c\/p\x3e\n\x3cp\x3e这种方法的主要优点是它真正简化了您的UI。如果组件独立获取自己的数据，则当组件数据以任意顺序填充时，页面将不可预测地重新呈现。\x3c\/p\x3e\n\x3cp\x3e实现这一点的一个整洁的方法是在您的服务器上为每个页面创建端点，例如\/about，\/contact与您的应用程序中的路由名称相匹配。然后，您可以实现一个通用beforeRouteEnter钩子，将所有数据属性合并到页面组件的数据中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport axios from \x27axios\x27;\n\nrouter.beforeRouteEnter((to, from, next) =\x3e {\n  axios.get(`\/api${to.path}`).then(({ data }) =\x3e {\n    next(vm =\x3e Object.assign(vm.$data, data))\n  });\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e;\n\nrouter.beforeRouteEnter(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eto, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, next\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  axios.get(\x3cspan class=\x22hljs-string\x22\x3e`\/api\x3cspan class=\x22hljs-subst\x22\x3e${to.path}\x3c\/span\x3e`\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ data }\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    next(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3evm\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign(vm.$data, data))\n  });\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e优点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e使UI更可预测。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e缺点\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e总体来说，直到所有数据准备就绪了 ,页面才能呈现。\x3c\/li\x3e\n\x3cli\x3e如果不使用路线，这模式没有太多的帮助。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e奖金模式：将第一个AJAX调用的服务器渲染到页面中\x3c\/h3\x3e\n\x3cp\x3e建议在初始页面加载时使用AJAX来检索应用程序状态，因为它需要额外的往返服务器，这将延迟应用程序的渲染。\x3c\/p\x3e\n\x3cp\x3e相反，将初始应用程序状态注入HTML页面的内联脚本中，以便应用程序作为全局变量在需要时可用。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3chtml\x3e\n...\n\x3chead\x3e\n  ...\n  \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n   window.__INITIAL_STATE__ = \x27{ \x26quot;data\x26quot;: [ ... ] }\x27;\n  \x3c\/script\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n  \x3cdiv id=\x26quot;app\x26quot;\x3e\x3c\/div\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n...\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  ...\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n   \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.__INITIAL_STATE__ = \x3cspan class=\x22hljs-string\x22\x3e\x27{ \x22data\x22: [ ... ] }\x27\x3c\/span\x3e;\n  \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，AJAX可以更适合地用于后续数据提取。\x3c\/p\x3e\n\x3cp\x3e如果您有兴趣了解有关此架构的更多信息，请参阅作者的文章“\x3ca href=\x22https:\/\/vuejsdevelopers.com\/2017\/08\/06\/vue-js-laravel-full-stack-ajax\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e避免此全面堆栈Vue \/ Laravel应用程序中的常见反模式\x3c\/a\x3e”。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e本文原地址：\x3ca href=\x22https:\/\/github.com\/itemsets\/vue2\/issues\/13\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/itemsets\/v...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Vue.js应用的四种AJAX请求数据模式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010902115">https://segmentfault.com/a/1190000010902115</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/i4lssa0qiu8/" target="_blank">https://alili.tech/archive/i4lssa0qiu8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>