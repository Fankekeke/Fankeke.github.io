<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="可拖动table表头的实现"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>可拖动table表头的实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/iihvp95cbbe/",
				"appid": "1613049289050283", 
				"title": "可拖动table表头的实现 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-14T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/oofsbgf1le/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3t2u59eyu0l/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&text=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&text=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&title=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&is_video=false&description=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&title=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&title=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&title=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fiihvp95cbbe%2f&title=%e5%8f%af%e6%8b%96%e5%8a%a8table%e8%a1%a8%e5%a4%b4%e7%9a%84%e5%ae%9e%e7%8e%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">可拖动table表头的实现</h1><div class="meta"><div class="postdate"><time datetime="2018-12-14" itemprop="datePublished">2018-12-14</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e自己做的项目碰到这样一个需求，就是对所有的表格添加表头可以拖动的效果。我一想，这不简单，分分钟钟给你做出来。拿起我的电脑，啪啪啪就敲起来了。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3IQT?w=720\x26amp;h=720\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3IQT?w=720\x26amp;h=720\x22 alt=\x22emm\x22 title=\x22emm\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e一定是哪里不对，以我的聪明才智，结果应该不是这样的，然后净下心来，好好理了下思路后，总算是做出来了。\x3cbr\x3e至于结果嘛，我肯定是做出来的，像下面这种：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3Iqz?w=320\x26amp;h=75\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3Iqz?w=320\x26amp;h=75\x22 alt=\x22难受\x22 title=\x22难受\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e准备\x3c\/h2\x3e\n\x3cp\x3e首先要说明的是，我们的项目使用的表格大概只分为两类，一类是表头不固定，就是普通的表格，另一类是表头固定，\x3ccode\x3etbody\x3c\/code\x3e部分是可以滚动的。需要说明的是，表头固定的那种是需要用两个\x3ccode\x3etable\x3c\/code\x3e去实现，做过的人应该也都明白。前者看起来比较简单，因为宽度是受\x3ccode\x3ethead\x3c\/code\x3e里的\x3ccode\x3eth\x3c\/code\x3e影响的，后者看起来就不好处理，因为你用两个table就会出现下面的情况：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3I2m?w=1926\x26amp;h=288\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3I2m?w=1926\x26amp;h=288\x22 alt=\x22意外\x22 title=\x22意外\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3eemmm，这和我们想象的应该不一样，这可咋整，感觉处理起来很麻烦啊。想起看过\x3ccode\x3eelement-ui\x3c\/code\x3e中的表格，似乎有拖动表头的实现，先打开控制台看下结构吧：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3I5G?w=1482\x26amp;h=894\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3I5G?w=1482\x26amp;h=894\x22 alt=\x22结构\x22 title=\x22结构\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e呃，话说长这么大我都没用过\x3ccode\x3e\x26lt;colgroup\x26gt;\x3c\/code\x3e和\x3ccode\x3e\x26lt;col\x26gt;\x3c\/code\x3e这两个标签，但仔细观察上面有个\x3ccode\x3ewidth\x3c\/code\x3e，看到这大概也知道是怎么回事了，打开\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/HTML\/Element\/col\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN\x3c\/a\x3e看下相关属性的描述，和想的一样，\x3ccode\x3ewidth\x3c\/code\x3e能控制当前列的宽度。\x3cbr\x3e宽度的控制我们是解决了，还有一个问题，就是拖动后，其他列的宽度改怎么改变，如下:\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3ea\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3eb\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3ec\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3ed\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e如果我拖动a列，改变的宽度应该怎样分配到b，c，d上，我这里是这样处理的，b、c、d有个属性去表示该列是否已经被拖动过了，如果b、c、d都没拖动过，那么把a改变的宽度平分到b、c、d三列的宽度上，如果b、c、d都改变了话，那么只改变最后一列d的宽度。好了，思路已经有了，我们可以去实现了。\x3cbr\x3e事实证明，如果按照上面的设计就太蠢了，已经改成只改变拖动列后面的列且这些列没有改变过宽度。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e实现\x3c\/h2\x3e\n\x3cp\x3e首先html结构大概是这样的:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctable\x3e\n  \x3cthead\x3e\n    \x3ctr\x3e\n      \x3cth\x3ea\x3cth\x3e\n      \x3cth\x3eb\x3cth\x3e\n    \x3c\/tr\x3e\n  \x3c\/thead\x3e\n  \x3ctbody\x3e\n    \x3ctr\x3e\n      \x3cth\x3e1\x3cth\x3e\n      \x3cth\x3e2\x3cth\x3e\n    \x3c\/tr\x3e\n  \x3c\/tbody\x3e\n\x3c\/table\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etable\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ethead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3ea\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3eb\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ethead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etbody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e1\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e2\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etbody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etable\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ejs方面\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  constructor (id, options) {\n    this._el = document.querySelector(`#${id}`);\n    \/\/ 实际使用中需要对dom结构进行判断，这里就不做了\n    this._tables = Array.from(this._el.querySelectorAll(\x27table\x27));\n    setTimeout(() =\x3e this._resolveDom());\n\n    this.store = {\n      dragging: false,                 \/\/是否拖动\n      draggingColumn: null,            \/\/拖动的对象\n      miniWidth: 30,                   \/\/拖动的最小宽度\n      startMouseLeft: undefined,       \/\/鼠标点击时的clientX\n      startLeft: undefined,            \/\/th右离table的距离\n      startColumnLeft: undefined,      \/\/th左离table的距离\n      tableLeft: undefined,            \/\/table离页面左边的距离,\n      HColumns: [],\n      BColumns: [],\n    };\n  };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e (id, options) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._el = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.querySelector(\x3cspan class=\x22hljs-string\x22\x3e`#\x3cspan class=\x22hljs-subst\x22\x3e${id}\x3c\/span\x3e`\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实际使用中需要对dom结构进行判断，这里就不做了\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._tables = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.from(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._el.querySelectorAll(\x3cspan class=\x22hljs-string\x22\x3e\x27table\x27\x3c\/span\x3e));\n    setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._resolveDom());\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store = {\n      \x3cspan class=\x22hljs-attr\x22\x3edragging\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,                 \x3cspan class=\x22hljs-comment\x22\x3e\/\/是否拖动\x3c\/span\x3e\n      draggingColumn: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e,            \x3cspan class=\x22hljs-comment\x22\x3e\/\/拖动的对象\x3c\/span\x3e\n      miniWidth: \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e,                   \x3cspan class=\x22hljs-comment\x22\x3e\/\/拖动的最小宽度\x3c\/span\x3e\n      startMouseLeft: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e,       \x3cspan class=\x22hljs-comment\x22\x3e\/\/鼠标点击时的clientX\x3c\/span\x3e\n      startLeft: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e,            \x3cspan class=\x22hljs-comment\x22\x3e\/\/th右离table的距离\x3c\/span\x3e\n      startColumnLeft: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e,      \x3cspan class=\x22hljs-comment\x22\x3e\/\/th左离table的距离\x3c\/span\x3e\n      tableLeft: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e,            \x3cspan class=\x22hljs-comment\x22\x3e\/\/table离页面左边的距离,\x3c\/span\x3e\n      HColumns: [],\n      \x3cspan class=\x22hljs-attr\x22\x3eBColumns\x3c\/span\x3e: [],\n    };\n  };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e添加dom:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const [ THeader ] = this._tables;\nlet TBody;\nconst Tr = THeader.tHead.rows[0];\nconst columns = Array.from(Tr.cells);\nconst Bcolgroup = document.createElement(\x27colgroup\x27);\nconst cols = columns.map((item, index) =\x3e {\n  const col = document.createElement(\x27col\x27);\n  item.dataset.index = index;\n  col.width = \x2bitem.offsetWidth;\n  return col;\n});\ncols.reduce((newDom, item) =\x3e {\n  newDom.appendChild(item);\n  return newDom;\n}, Bcolgroup);\nconst HColgroup = Bcolgroup.cloneNode(true);\nTHeader.appendChild(HColgroup);\n\n\/\/不管是一个table还是两个，都把header和body提出来\nif (this._tables.length === 1) {\n  const [ , tbody ] = Array.from(THeader.children);\n  tbody.remove();\n  TBody = THeader.cloneNode();\n  TBody.appendChild(Bcolgroup);\n  TBody.appendChild(tbody);\n  this._el.appendChild(TBody);\n} else {\n  [ , TBody ] = this._tables;\n  TBody.appendChild(Bcolgroup);\n}\n\n\/\/拖动时的占位线\nconst hold = document.createElement(\x27div\x27);\nhold.classList.add(\x27resizable-hold\x27);\nthis._el.appendChild(hold);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e [ THeader ] = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._tables;\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e TBody;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Tr = THeader.tHead.rows[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e columns = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.from(Tr.cells);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Bcolgroup = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27colgroup\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cols = columns.map(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem, index\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e col = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27col\x27\x3c\/span\x3e);\n  item.dataset.index = index;\n  col.width = \x2bitem.offsetWidth;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e col;\n});\ncols.reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3enewDom, item\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  newDom.appendChild(item);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e newDom;\n}, Bcolgroup);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e HColgroup = Bcolgroup.cloneNode(\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\nTHeader.appendChild(HColgroup);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/不管是一个table还是两个，都把header和body提出来\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._tables.length === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e [ , tbody ] = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.from(THeader.children);\n  tbody.remove();\n  TBody = THeader.cloneNode();\n  TBody.appendChild(Bcolgroup);\n  TBody.appendChild(tbody);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._el.appendChild(TBody);\n} \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n  [ , TBody ] = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._tables;\n  TBody.appendChild(Bcolgroup);\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/拖动时的占位线\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e hold = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\nhold.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x27resizable-hold\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._el.appendChild(hold);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面这块就是添加节点的，对\x3ccode\x3edom\x3c\/code\x3e进行处理，为了复用，这里我们不管你是表头固定还是表头不固定，我们都拆分为两个\x3ccode\x3etable\x3c\/code\x3e，这样处理起来也方便的多。\x3cbr\x3e然后就是处理手指移到列右侧\x3ccode\x3ecursor\x3c\/code\x3e的值设为\x3ccode\x3ecol-resize\x3c\/code\x3e:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleMouseMove(evt) {\n  \/\/...\n  if (!this.store.dragging) {\n    const rect = target.getBoundingClientRect();\n    const bodyStyle = document.body.style;\n    if (rect.width \x3e 12 \x26amp;\x26amp; rect.right - event.pageX \x3c 8) {\n      bodyStyle.cursor = \x27col-resize\x27;\n      target.style.cursor = \x27col-resize\x27;\n      this.store.draggingColumn = target;\n    } else {\n      bodyStyle.cursor = \x27\x27;\n      target.style.cursor = \x27pointer\x27;\n      this.store.draggingColumn = null;\n    }\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ehandleMouseMove(evt) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.dragging) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rect = target.getBoundingClientRect();\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bodyStyle = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.style;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (rect.width \x26gt; \x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e \x26amp;\x26amp; rect.right - event.pageX \x26lt; \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e) {\n      bodyStyle.cursor = \x3cspan class=\x22hljs-string\x22\x3e\x27col-resize\x27\x3c\/span\x3e;\n      target.style.cursor = \x3cspan class=\x22hljs-string\x22\x3e\x27col-resize\x27\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.draggingColumn = target;\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      bodyStyle.cursor = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n      target.style.cursor = \x3cspan class=\x22hljs-string\x22\x3e\x27pointer\x27\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.draggingColumn = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    }\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是，\x3ccode\x3egetBoundingClientRect()\x3c\/code\x3e获取的\x3ccode\x3erigth\x3c\/code\x3e是元素右侧距离页面左边缘的距离，不是离页面右边缘的距离。这里就是给\x3ccode\x3ethead\x3c\/code\x3e的\x3ccode\x3etr\x3c\/code\x3e添加\x3ccode\x3emousemove\x3c\/code\x3e事件，当鼠标指针距离右边缘小于8的时候，改变指针形状，然后改变\x3ccode\x3estore\x3c\/code\x3e里的状态，表示此时点击是可以拖动的了。\x3cbr\x3e然后就是\x3ccode\x3emousedown\x3c\/code\x3e\x2b\x3ccode\x3emousemove\x3c\/code\x3e\x2b\x3ccode\x3emouseup\x3c\/code\x3e来处理拖动了:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const handleMouseDown = (evt) =\x3e {\n  if (this.store.draggingColumn) {\n    this.store.dragging = true;\n\n    let { target } = evt;\n    if (!target) return;\n\n    const tableEle = THeader;\n    const tableLeft = tableEle.getBoundingClientRect().left;\n    const columnRect = target.getBoundingClientRect();\n    const minLeft = columnRect.left - tableLeft \x2b 30;\n    target.classList.add(\x27noclick\x27);\n\n    this.store.startMouseLeft = evt.clientX;\n    this.store.startLeft = columnRect.right - tableLeft;\n    this.store.startColumnLeft = columnRect.left - tableLeft;\n    this.store.tableLeft = tableLeft;\n\n    document.onselectstart = () =\x3e false;\n    document.ondragstart = () =\x3e false;\n\n    hold.style.display = \x27block\x27;\n    hold.style.left = this.store.startLeft \x2b \x27px\x27;\n\n    const handleOnMouseMove = (event) =\x3e {\n      const deltaLeft = event.clientX - this.store.startMouseLeft;\n      const proxyLeft = this.store.startLeft \x2b deltaLeft;\n\n      hold.style.left = Math.max(minLeft, proxyLeft) \x2b \x27px\x27;\n    };\n\n    \/\/ 宽度是这样分配的，举个?，如果a,b,c,d，他们每个都有个changed状态，默认false，拖过a,a.changed改为true，改变的宽度就由剩下的b,c,d平摊，如果都改变了，就让最后一个元素d背锅\n    const handleOnMouseUp = (event) =\x3e {\n      if (this.store.dragging) {\n        const { startColumnLeft } = this.store;\n        const finalLeft = parseInt(hold.style.left, 10);\n        const columnWidth = finalLeft - startColumnLeft;\n        const index = \x2btarget.dataset.index;\n        HColgroup.children[index].width = columnWidth;\n\n        if (index !== this.store.HColumns.length - 1) {\n          this.store.HColumns[index].isChange = true;\n        }\n        const deltaLeft = event.clientX - this.store.startMouseLeft;\n        const changeColumns = this.store.HColumns.filter(v =\x3e !v.isChange \x26amp;\x26amp; \x2bv.el.width \x3e 30);\n        changeColumns.forEach(item =\x3e {\n          item.el.width = \x2bitem.el.width - deltaLeft \/ changeColumns.length;\n        });\n\n        this.store.BColumns.forEach((item, i) =\x3e {\n          item.el.width = this.store.HColumns[i].el.width;\n        });\n\n        \/\/...init store\n      }\n\n      document.removeEventListener(\x27mousemove\x27, handleOnMouseMove);\n      document.removeEventListener(\x27mouseup\x27, handleOnMouseUp);\n      document.onselectstart = null;\n      document.ondragstart = null;\n\n      \/\/ noclick主要是用来判断是点击还是拖动，防止拖动触发排序\n      setTimeout(() =\x3e {\n        target.classList.remove(\x27noclick\x27);\n      }, 0);\n    };\n\n    document.addEventListener(\x27mouseup\x27, handleOnMouseUp);\n    document.addEventListener(\x27mousemove\x27, handleOnMouseMove);\n  }\n};\nTr.addEventListener(\x27mousedown\x27, handleMouseDown);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handleMouseDown = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.draggingColumn) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.dragging = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e { target } = evt;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!target) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e tableEle = THeader;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e tableLeft = tableEle.getBoundingClientRect().left;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e columnRect = target.getBoundingClientRect();\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e minLeft = columnRect.left - tableLeft \x2b \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e;\n    target.classList.add(\x3cspan class=\x22hljs-string\x22\x3e\x27noclick\x27\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startMouseLeft = evt.clientX;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startLeft = columnRect.right - tableLeft;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startColumnLeft = columnRect.left - tableLeft;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.tableLeft = tableLeft;\n\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.onselectstart = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.ondragstart = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n\n    hold.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n    hold.style.left = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startLeft \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handleOnMouseMove = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e deltaLeft = event.clientX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startMouseLeft;\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e proxyLeft = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startLeft \x2b deltaLeft;\n\n      hold.style.left = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(minLeft, proxyLeft) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27px\x27\x3c\/span\x3e;\n    };\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 宽度是这样分配的，举个?，如果a,b,c,d，他们每个都有个changed状态，默认false，拖过a,a.changed改为true，改变的宽度就由剩下的b,c,d平摊，如果都改变了，就让最后一个元素d背锅\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e handleOnMouseUp = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.dragging) {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { startColumnLeft } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e finalLeft = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(hold.style.left, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e columnWidth = finalLeft - startColumnLeft;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e index = \x2btarget.dataset.index;\n        HColgroup.children[index].width = columnWidth;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (index !== \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.HColumns.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.HColumns[index].isChange = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e deltaLeft = event.clientX - \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.startMouseLeft;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e changeColumns = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.HColumns.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ev\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !v.isChange \x26amp;\x26amp; \x2bv.el.width \x26gt; \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e);\n        changeColumns.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n          item.el.width = \x2bitem.el.width - deltaLeft \/ changeColumns.length;\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.BColumns.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem, i\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n          item.el.width = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.store.HColumns[i].el.width;\n        });\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/...init store\x3c\/span\x3e\n      }\n\n      \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, handleOnMouseMove);\n      \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.removeEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mouseup\x27\x3c\/span\x3e, handleOnMouseUp);\n      \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.onselectstart = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.ondragstart = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ noclick主要是用来判断是点击还是拖动，防止拖动触发排序\x3c\/span\x3e\n      setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        target.classList.remove(\x3cspan class=\x22hljs-string\x22\x3e\x27noclick\x27\x3c\/span\x3e);\n      }, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n    };\n\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mouseup\x27\x3c\/span\x3e, handleOnMouseUp);\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, handleOnMouseMove);\n  }\n};\nTr.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, handleMouseDown);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/shiyangzhaoa.github.io\/table-resizable\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e预览效果\x3c\/a\x3e (chrome \x2b Safari \x2b Firefox)\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e觉得很有意思也很有用的东西，也让自己涨了很多姿势，\x3ca href=\x22https:\/\/github.com\/shiyangzhaoa\/table-resizable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e，已经做成类的形式，使用起来还算简单，因为是突然提出的需求，还未做过多测试，可能存在不知道的bug。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e祝福\x3c\/h2\x3e\n\x3cp\x3e写在最后，马上就要过年了，心情还是非常happy的。那么，我就在这里提前祝大家新年大吉、、吧，皮一下才开心，哎嘿嘿。拜拜～\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV3JjL?w=426\x26amp;h=240\x22 src=\x22https:\/\/static.alili.tech\/img\/bV3JjL?w=426\x26amp;h=240\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e后续补充\x3c\/h2\x3e\n\x3cp\x3e更改了宽度改变的方式，应该是只改变拖动列后面的列的宽度。有BUG，\x3ccode\x3ecolgroup\x3c\/code\x3e放在了\x3ccode\x3ethead\x3c\/code\x3e下面，导致在safari下面有BUG，已经修复了，看的不仔细，但上面的代码还没有改，看代码的化还是去看\x3ca href=\x22https:\/\/github.com\/shiyangzhaoa\/table-resizable\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e，我没发现这个问题，别人帮我找出来的。\x3cbr\x3eemmmmm，又发现了一个问题，就是拖动最后一列时。。。我想想，先睡了==\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>可拖动table表头的实现</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013243185">https://segmentfault.com/a/1190000013243185</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/iihvp95cbbe/" target="_blank">https://alili.tech/archive/iihvp95cbbe/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>