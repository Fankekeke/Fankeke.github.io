<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="翻译--Thinking in React"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>翻译--Thinking in React | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/irjek8iiwv/",
				"appid": "1613049289050283", 
				"title": "翻译--Thinking in React | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-11T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/xmcvkc33zd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/lgipj7j16r/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&text=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&text=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&title=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&is_video=false&description=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%bf%bb%e8%af%91--Thinking%20in%20React&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&title=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&title=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&title=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2firjek8iiwv%2f&title=%e7%bf%bb%e8%af%91--Thinking%20in%20React"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">翻译--Thinking in React</h1><div class="meta"><div class="postdate"><time datetime="2018-12-11" itemprop="datePublished">2018-12-11</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e无聊翻译篇react入门文章，去年学习react时看了一遍，很不错的一篇文章。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/reactjs.org\/docs\/thinking-in-react.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/reactjs.org\/docs\/thin...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e部分为意译，旨在让newcomers 容易理解。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e（）内均为译者注\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eReact\x3c\/code\x3e会是我快速构建大型\x3ccode\x3ewebapp\x3c\/code\x3e的首要\x3ccode\x3ejs框架\x3c\/code\x3e选择。\x3cbr\x3e其在\x3ccode\x3eFacebook\x3c\/code\x3e跟\x3ccode\x3eInstagram\x3c\/code\x3e上的实践给予了我们充足的自信。\x3c\/p\x3e\n\x3cp\x3eReact众多闪光点中的一个就是让你开始思考如何设计、构建应用。（主要就是react是数据驱动设计，所以如何设计state成了很重要的一部分）\x3c\/p\x3e\n\x3cp\x3e本文，将以一个商品下拉列表加搜索框的例子来展示\x3ccode\x3ereact\x3c\/code\x3e。\x3c\/p\x3e\n\x3chr\x3e\n\x3cp\x3e\x3ccode\x3eStart With A Mock\x3c\/code\x3e\x3cbr\x3e本例子大概长这样，数据源来自构建的一个mock，以json api方式进行访问。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013612374?w=228\x26amp;h=277\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013612374?w=228\x26amp;h=277\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3emock的json数据：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22[\n  {category: \x26quot;Sporting Goods\x26quot;, price: \x26quot;$49.99\x26quot;, stocked: true, name: \x26quot;Football\x26quot;},\n  {category: \x26quot;Sporting Goods\x26quot;, price: \x26quot;$9.99\x26quot;, stocked: true, name: \x26quot;Baseball\x26quot;},\n  {category: \x26quot;Sporting Goods\x26quot;, price: \x26quot;$29.99\x26quot;, stocked: false, name: \x26quot;Basketball\x26quot;},\n  {category: \x26quot;Electronics\x26quot;, price: \x26quot;$99.99\x26quot;, stocked: true, name: \x26quot;iPod Touch\x26quot;},\n  {category: \x26quot;Electronics\x26quot;, price: \x26quot;$399.99\x26quot;, stocked: false, name: \x26quot;iPhone 5\x26quot;},\n  {category: \x26quot;Electronics\x26quot;, price: \x26quot;$199.99\x26quot;, stocked: true, name: \x26quot;Nexus 7\x26quot;}\n];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e[\n  {category: \x3cspan class=\x22hljs-string\x22\x3e\x22Sporting Goods\x22\x3c\/span\x3e, price: \x3cspan class=\x22hljs-string\x22\x3e\x22$49.99\x22\x3c\/span\x3e, stocked: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x22Football\x22\x3c\/span\x3e},\n  {category: \x3cspan class=\x22hljs-string\x22\x3e\x22Sporting Goods\x22\x3c\/span\x3e, price: \x3cspan class=\x22hljs-string\x22\x3e\x22$9.99\x22\x3c\/span\x3e, stocked: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x22Baseball\x22\x3c\/span\x3e},\n  {category: \x3cspan class=\x22hljs-string\x22\x3e\x22Sporting Goods\x22\x3c\/span\x3e, price: \x3cspan class=\x22hljs-string\x22\x3e\x22$29.99\x22\x3c\/span\x3e, stocked: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x22Basketball\x22\x3c\/span\x3e},\n  {category: \x3cspan class=\x22hljs-string\x22\x3e\x22Electronics\x22\x3c\/span\x3e, price: \x3cspan class=\x22hljs-string\x22\x3e\x22$99.99\x22\x3c\/span\x3e, stocked: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x22iPod Touch\x22\x3c\/span\x3e},\n  {category: \x3cspan class=\x22hljs-string\x22\x3e\x22Electronics\x22\x3c\/span\x3e, price: \x3cspan class=\x22hljs-string\x22\x3e\x22$399.99\x22\x3c\/span\x3e, stocked: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x22iPhone 5\x22\x3c\/span\x3e},\n  {category: \x3cspan class=\x22hljs-string\x22\x3e\x22Electronics\x22\x3c\/span\x3e, price: \x3cspan class=\x22hljs-string\x22\x3e\x22$199.99\x22\x3c\/span\x3e, stocked: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, name: \x3cspan class=\x22hljs-string\x22\x3e\x22Nexus 7\x22\x3c\/span\x3e}\n];\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e第一步：拆分组件，分析组件结构\x3c\/h2\x3e\n\x3cp\x3e译者注：组件结构拆分没有一个标准，例子里是拆的很细，实际工作中一般是统一规范较重要，可读性至上。\x3c\/p\x3e\n\x3cp\x3e首先拆分成多个组件跟子组件，并且命名。这里已经用虚线框标识了。工作中，如何有设计或者产品辅助你的话，这个工作可能不需要你来做，交给他们即可。他们会用ps以图层的方式拆分好组件。（大厂吗？！）\x3c\/p\x3e\n\x3cp\x3e这里的组件是已经拆分好了，但是如果自己拆分，该如何做呢？答案是用一定的标准进行规范。比如你可以选择的一个标准就是：单一职责原则。即一个组件只负责一件事情。（这个事情范围就广了，比如一个动作，一个请求。原则就是方便管理与维护）如果还能细分，就再拆成更小层次的组件。（\x3ccode\x3ereact\x3c\/code\x3e就是一层层组件嵌套，各种组件与子组件）\x3c\/p\x3e\n\x3cp\x3e我们一般经常用\x3ccode\x3ejson data model \x3c\/code\x3e返回给用户，在\x3ccode\x3ereact\x3c\/code\x3e中，只要\x3ccode\x3edata model\x3c\/code\x3e格式正确，界面ui（组件）就渲染得很舒服了，一般相差不到哪儿去。这是因为\x3ccode\x3eui\x3c\/code\x3e跟\x3ccode\x3edata model\x3c\/code\x3e 倾向于遵循相同的架构。跟这些带来的好处相比，拆分组件的基础工作就显得微不足道了。把界面打散拆分成多个组件，每个组件代表\x3ccode\x3edata model\x3c\/code\x3e的某一部分。（这一大段啥意思呢？就是夸了一下react数据驱动的好处）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013612375?w=275\x26amp;h=319\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013612375?w=275\x26amp;h=319\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e看上图，我们把ui拆成了5个组件，下面是各个组件对应的职责，斜体突出表示下。\x3cbr\x3e1.FilterableProductTable（orange）：contains the entirety of the example\x3cbr\x3e（包裹所有子组件的外壳）\x3cbr\x3e2.SearchBar（blue）：处理用户交互\x3cbr\x3e3.ProductTable（green）：用户交互后过滤出的商品列表数据展示\x3cbr\x3e4.ProductCategoryRow（turquiso 亮青色）：显示商品列表分类名称\x3cbr\x3e5.ProductRow（red）：展示每个商品信息\x3c\/p\x3e\n\x3cp\x3e这边注意观察下组件\x3ccode\x3eProductTable\x3c\/code\x3e下有两个\x3ccode\x3elabel\x3c\/code\x3e作为\x3ccode\x3eheader--“Name”\x3c\/code\x3e，\x3ccode\x3e“Price”\x3c\/code\x3e。这两个label没有作为单独的组件如\x3ccode\x3eProductCategoryRow\x3c\/code\x3e跟\x3ccode\x3eProductRow\x3c\/code\x3e存在，这里仅仅是作为\x3ccode\x3eProductTable\x3c\/code\x3e的一部分存在。当然你可以将其作为单独一个子组件开辟出来，只是在这个例子里没必要，如果这个\x3ccode\x3eheader\x3c\/code\x3e再复杂一点，比如加上点击排序功能，那么可以再建一个子组件--\x3ccode\x3eProductTableHeader\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e现在ui已经拆分完成，来分一下组件层次。\x3cbr\x3e（其实就是个树状图，很多情况下，你的json data model 长啥样，组件层次基本上就差不离了）\x3c\/p\x3e\n\x3cp\x3e·FilterableProductTable\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 ·SearchBar\n ·ProductTable\n         ·ProductCategoryRow\n         ·ProductRow\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs\x22\x3e\x3ccode\x3e ·SearchBar\n ·ProductTable\n         ·ProductCategoryRow\n         ·ProductRow\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（小问题，上面提到的\x3ccode\x3eProductTableHeader\x3c\/code\x3e如果存在，应该放在树状图的哪个位置呢？）\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e第二步：构建静态页面\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class ProductCategoryRow extends React.Component {\n  render() {\n    const category = this.props.category;\n    return (\n      \x3ctr\x3e\n        \x3cth colSpan=\x26quot;2\x26quot;\x3e\n          {category}\n        \x3c\/th\x3e\n      \x3c\/tr\x3e\n    );\n  }\n}\n\nclass ProductRow extends React.Component {\n  render() {\n    const product = this.props.product;\n    const name = product.stocked ?\n      product.name :\n      \x3cspan style=\x22{{\x22color: \x27red\x27\x22}}\x22\x3e\n        {product.name}\n      \x3c\/span\x3e;\n\n    return (\n      \x3ctr\x3e\n        \x3ctd\x3e{name}\x3c\/td\x3e\n        \x3ctd\x3e{product.price}\x3c\/td\x3e\n      \x3c\/tr\x3e\n    );\n  }\n}\n\nclass ProductTable extends React.Component {\n  render() {\n    const rows = [];\n    let lastCategory = null;\n    \n    this.props.products.forEach((product) =\x3e {\n      if (product.category !== lastCategory) {\n        rows.push(\n          \x3cProductCategoryRow\n            category={product.category}\n            key={product.category} \/\x3e\n        );\n      }\n      rows.push(\n        \x3cProductRow\n          product={product}\n          key={product.name} \/\x3e\n      );\n      lastCategory = product.category;\n    });\n\n    return (\n      \x3ctable\x3e\n        \x3cthead\x3e\n          \x3ctr\x3e\n            \x3cth\x3eName\x3c\/th\x3e\n            \x3cth\x3ePrice\x3c\/th\x3e\n          \x3c\/tr\x3e\n        \x3c\/thead\x3e\n        \x3ctbody\x3e{rows}\x3c\/tbody\x3e\n      \x3c\/table\x3e\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  render() {\n    return (\n      \x3cform\x3e\n        \x3cinput type=\x26quot;text\x26quot; placeholder=\x26quot;Search...\x26quot; \/\x3e\n        \x3cp\x3e\n          \x3cinput type=\x26quot;checkbox\x26quot; \/\x3e\n          {\x27 \x27}\n          Only show products in stock\n        \x3c\/p\x3e\n      \x3c\/form\x3e\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  render() {\n    return (\n      \x3cdiv\x3e\n        \x3cSearchBar \/\x3e\n        \x3cProductTable products={this.props.products} \/\x3e\n      \x3c\/div\x3e\n    );\n  }\n}\n\n\nconst PRODUCTS = [\n  {category: \x27Sporting Goods\x27, price: \x27$49.99\x27, stocked: true, name: \x27Football\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$9.99\x27, stocked: true, name: \x27Baseball\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$29.99\x27, stocked: false, name: \x27Basketball\x27},\n  {category: \x27Electronics\x27, price: \x27$99.99\x27, stocked: true, name: \x27iPod Touch\x27},\n  {category: \x27Electronics\x27, price: \x27$399.99\x27, stocked: false, name: \x27iPhone 5\x27},\n  {category: \x27Electronics\x27, price: \x27$199.99\x27, stocked: true, name: \x27Nexus 7\x27}\n];\n \nReactDOM.render(\n  \x3cFilterableProductTable products={PRODUCTS} \/\x3e,\n  document.getElementById(\x27container\x27)\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductCategoryRow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e category = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.category;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecolSpan\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          {category}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductRow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e product = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.product;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e name = product.stocked ?\n      product.name :\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22color:\x3c\/span\x3e \x27\x3cspan class=\x22hljs-attr\x22\x3ered\x3c\/span\x3e\x27\x22}}\x22\x26gt;\x3c\/span\x3e\n        {product.name}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e{name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e{product.price}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductTable\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rows = [];\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e lastCategory = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.products.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eproduct\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (product.category !== lastCategory) {\n        rows.push(\n          \x26lt;ProductCategoryRow\n            category={product.category}\n            key={product.category} \/\x26gt;\n        );\n      }\n      rows.push(\n        \x26lt;ProductRow\n          product={product}\n          key={product.name} \/\x26gt;\n      );\n      lastCategory = product.category;\n    });\n\n    return (\n      \x26lt;table\x26gt;\n        \x26lt;thead\x26gt;\n          \x26lt;tr\x26gt;\n            \x26lt;th\x26gt;Name\x26lt;\/th\x26gt;\n            \x26lt;th\x26gt;Price\x26lt;\/th\x26gt;\n          \x26lt;\/tr\x26gt;\n        \x26lt;\/thead\x26gt;\n        \x26lt;tbody\x26gt;{rows}\x26lt;\/tbody\x26gt;\n      \x26lt;\/table\x26gt;\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  render() {\n    return (\n      \x26lt;form\x26gt;\n        \x26lt;input type=\x22text\x22 placeholder=\x22Search...\x22 \/\x26gt;\n        \x26lt;p\x26gt;\n          \x26lt;input type=\x22checkbox\x22 \/\x26gt;\n          {\x27 \x27}\n          Only show products in stock\n        \x26lt;\/p\x26gt;\n      \x26lt;\/form\x26gt;\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  render() {\n    return (\n      \x26lt;div\x26gt;\n        \x26lt;SearchBar \/\x26gt;\n        \x26lt;ProductTable products={this.props.products} \/\x26gt;\n      \x26lt;\/div\x26gt;\n    );\n  }\n}\n\n\nconst PRODUCTS = [\n  {category: \x27Sporting Goods\x27, price: \x27$49.99\x27, stocked: true, name: \x27Football\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$9.99\x27, stocked: true, name: \x27Baseball\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$29.99\x27, stocked: false, name: \x27Basketball\x27},\n  {category: \x27Electronics\x27, price: \x27$99.99\x27, stocked: true, name: \x27iPod Touch\x27},\n  {category: \x27Electronics\x27, price: \x27$399.99\x27, stocked: false, name: \x27iPhone 5\x27},\n  {category: \x27Electronics\x27, price: \x27$199.99\x27, stocked: true, name: \x27Nexus 7\x27}\n];\n \nReactDOM.render(\n  \x26lt;FilterableProductTable products={PRODUCTS} \/\x26gt;,\n  document.getElementById(\x27container\x27)\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在组件拆分好了，\x3ccode\x3ejson data model\x3c\/code\x3e有了，开始实现界面代码吧。先做一个最简单的版本，只有界面，没有交互。交互留到后面做，这样分开做的好处是先做静态界面只用堆代码而不需要考虑逻辑交互，交互逻辑到后面做。（事情一件件做，也正符合组件拆分的标准之一，\x3ccode\x3esingle responsibility principle\x3c\/code\x3e，单一职责）\x3c\/p\x3e\n\x3cp\x3e实现静态版本从构建组件开始，实现构建复用的基础之一就是通过使用props。何谓props？props就是将数据从树状图由上到下传递的快递员。（或者说从parent到child，这个parent或child是相对的，针对不同的两个组件，随时变化的，所以用树状图来理解舒服点）如果你有一定的react基础，熟悉state的话，（state也能传递数据）在这里先不要考虑用state，只有在交互的时候，随时间变化的数据需要用到state。\x3c\/p\x3e\n\x3cp\x3e你可以从上到下或者由下至上构建组件，意思就是你可以先构建最上面的\x3ccode\x3eFilterableProductTable\x3c\/code\x3e或者最下面的\x3ccode\x3eProductRow\x3c\/code\x3e。在简单的项目中，一般从上到下构建组件更简单。大点稍微复杂点的项目中可以由下至上构建组件，这样也方便编写测试实例。（简单例子怎样都行，复杂的项目，都是一个个组件嵌套的，缺什么补什么，一般不存在思考这个，除非整个项目是由你来从零架构的）\x3c\/p\x3e\n\x3cp\x3e现在我们已经构建了一组可用于渲染\x3ccode\x3edata mod\x3c\/code\x3e的复用组件构成的组件库。每个组件内只有一个方法：\x3ccode\x3erender（）\x3c\/code\x3e，因为现在还只是静态页面。树状图最上端的组件\x3ccode\x3eFilterableProductTable\x3c\/code\x3e会把\x3ccode\x3edata model \x3c\/code\x3e打包成一个\x3ccode\x3eprops\x3c\/code\x3e。如果你对\x3ccode\x3edata model\x3c\/code\x3e进行更改并再次调用\x3ccode\x3eReactDom.render（）\x3c\/code\x3e，ui界面就会更新。代码很简单，很容易观察ui如何更新以及在哪里进行更改。React另一个特性：单向数据流（也叫单项绑定 \x3ccode\x3eone way binding\x3c\/code\x3e）使代码模块化且运行快速。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e小注：Props vs State\x3c\/h3\x3e\n\x3cp\x3ereact中有两类存储data model的对象，props跟state。了解两者的区别还是很重要的。\x3cbr\x3e详细：【?】\x3ca href=\x22https:\/\/reactjs.org\/docs\/interactivity-and-dynamic-uis.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/reactjs.org\/docs\/inte...\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e第三步：定义完整而简洁的\x3ccode\x3estate\x3c\/code\x3e\n\x3c\/h2\x3e\n\x3cp\x3e交互就是ui界面能对data model 的变化作出相应。React通过state使其实现变得简单。\x3c\/p\x3e\n\x3cp\x3e继续构建app前，需要确定好完整且简洁的state。遵循的规则就是：\x3ccode\x3eDRY（don\x27t repeat yourself）\x3c\/code\x3e。举个例子，在做\x3ccode\x3eTODO List\x3c\/code\x3e例子时，我们一般会用到\x3ccode\x3eList Count\x3c\/code\x3e这个属性，但没必要将\x3ccode\x3eCount\x3c\/code\x3e作为\x3ccode\x3estate\x3c\/code\x3e的一个字段存在，因为通过计算List的length也能获取到Count。（只保留必要的属性字段在state中）\x3c\/p\x3e\n\x3cp\x3e针对我们的应用，现有的数据如下：\x3cbr\x3ea·原始商品列表数据\x3cbr\x3eb·用户输入搜索文本\x3cbr\x3ec·复选框选中与否\x3cbr\x3ed·过滤后的商品列表数据\x3c\/p\x3e\n\x3cp\x3e那么如何确定以上哪些是应该作为state的部分而存在的呢？可以简单的问问自己下面这三个问题：\x3c\/p\x3e\n\x3cp\x3e1.该数据是通过props传递的吗？如果是，那就应该不属于state\x3cbr\x3e2·该数据不是实时变化（即不随交互而变化）的，那就应该不属于state\x3cbr\x3e3·可以通过其他state跟props计算而出（如上面说的List Count），那就应该不属于state\x3c\/p\x3e\n\x3cp\x3e然后带着这三个问题，我们来看看上面四个数据。静态页面版本中已经看出，a是通过props传递的，所以a不属于state，b跟c是根据用户输入来确定的，随交互而变化，所以bc应该属于state的一部分，d可以通过abc结合计算而得，所以虽然会变化但也不属于state。\x3c\/p\x3e\n\x3cp\x3e总结，state：\x3cbr\x3e·用户输入文本\x3cbr\x3e·复选框选中与否\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22state = ｛\n      filterText：\x27\x27，\n      isStockOnly：false\n｝\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3estate = ｛\n      filterText：\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e，\n      isStockOnly：\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n｝\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e第四步：构建state\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class ProductCategoryRow extends React.Component {\n  render() {\n    const category = this.props.category;\n    return (\n      \x3ctr\x3e\n        \x3cth colSpan=\x26quot;2\x26quot;\x3e\n          {category}\n        \x3c\/th\x3e\n      \x3c\/tr\x3e\n    );\n  }\n}\n\nclass ProductRow extends React.Component {\n  render() {\n    const product = this.props.product;\n    const name = product.stocked ?\n      product.name :\n      \x3cspan style=\x22{{\x22color: \x27red\x27\x22}}\x22\x3e\n        {product.name}\n      \x3c\/span\x3e;\n\n    return (\n      \x3ctr\x3e\n        \x3ctd\x3e{name}\x3c\/td\x3e\n        \x3ctd\x3e{product.price}\x3c\/td\x3e\n      \x3c\/tr\x3e\n    );\n  }\n}\n\nclass ProductTable extends React.Component {\n  render() {\n    const filterText = this.props.filterText;\n    const inStockOnly = this.props.inStockOnly;\n\n    const rows = [];\n    let lastCategory = null;\n\n    this.props.products.forEach((product) =\x3e {\n      if (product.name.indexOf(filterText) === -1) {\n        return;\n      }\n      if (inStockOnly \x26amp;\x26amp; !product.stocked) {\n        return;\n      }\n      if (product.category !== lastCategory) {\n        rows.push(\n          \x3cProductCategoryRow\n            category={product.category}\n            key={product.category} \/\x3e\n        );\n      }\n      rows.push(\n        \x3cProductRow\n          product={product}\n          key={product.name}\n        \/\x3e\n      );\n      lastCategory = product.category;\n    });\n\n    return (\n      \x3ctable\x3e\n        \x3cthead\x3e\n          \x3ctr\x3e\n            \x3cth\x3eName\x3c\/th\x3e\n            \x3cth\x3ePrice\x3c\/th\x3e\n          \x3c\/tr\x3e\n        \x3c\/thead\x3e\n        \x3ctbody\x3e{rows}\x3c\/tbody\x3e\n      \x3c\/table\x3e\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  render() {\n    const filterText = this.props.filterText;\n    const inStockOnly = this.props.inStockOnly;\n\n    return (\n      \x3cform\x3e\n        \x3cinput\n          type=\x26quot;text\x26quot;\n          placeholder=\x26quot;Search...\x26quot;\n          value={filterText} \/\x3e\n        \x3cp\x3e\n          \x3cinput\n            type=\x26quot;checkbox\x26quot;\n            checked={inStockOnly} \/\x3e\n          {\x27 \x27}\n          Only show products in stock\n        \x3c\/p\x3e\n      \x3c\/form\x3e\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: \x27\x27,\n      inStockOnly: false\n    };\n  }\n\n  render() {\n    return (\n      \x3cdiv\x3e\n        \x3cSearchBar\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n        \/\x3e\n        \x3cProductTable\n          products={this.props.products}\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n        \/\x3e\n      \x3c\/div\x3e\n    );\n  }\n}\n\n\nconst PRODUCTS = [\n  {category: \x27Sporting Goods\x27, price: \x27$49.99\x27, stocked: true, name: \x27Football\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$9.99\x27, stocked: true, name: \x27Baseball\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$29.99\x27, stocked: false, name: \x27Basketball\x27},\n  {category: \x27Electronics\x27, price: \x27$99.99\x27, stocked: true, name: \x27iPod Touch\x27},\n  {category: \x27Electronics\x27, price: \x27$399.99\x27, stocked: false, name: \x27iPhone 5\x27},\n  {category: \x27Electronics\x27, price: \x27$199.99\x27, stocked: true, name: \x27Nexus 7\x27}\n];\n\nReactDOM.render(\n  \x3cFilterableProductTable products={PRODUCTS} \/\x3e,\n  document.getElementById(\x27container\x27)\n);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductCategoryRow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e category = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.category;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecolSpan\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          {category}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductRow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e product = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.product;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e name = product.stocked ?\n      product.name :\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22color:\x3c\/span\x3e \x27\x3cspan class=\x22hljs-attr\x22\x3ered\x3c\/span\x3e\x27\x22}}\x22\x26gt;\x3c\/span\x3e\n        {product.name}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e{name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e{product.price}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductTable\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e filterText = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.filterText;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e inStockOnly = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.inStockOnly;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rows = [];\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e lastCategory = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.products.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eproduct\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (product.name.indexOf(filterText) === \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (inStockOnly \x26amp;\x26amp; !product.stocked) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (product.category !== lastCategory) {\n        rows.push(\n          \x26lt;ProductCategoryRow\n            category={product.category}\n            key={product.category} \/\x26gt;\n        );\n      }\n      rows.push(\n        \x26lt;ProductRow\n          product={product}\n          key={product.name}\n        \/\x26gt;\n      );\n      lastCategory = product.category;\n    });\n\n    return (\n      \x26lt;table\x26gt;\n        \x26lt;thead\x26gt;\n          \x26lt;tr\x26gt;\n            \x26lt;th\x26gt;Name\x26lt;\/th\x26gt;\n            \x26lt;th\x26gt;Price\x26lt;\/th\x26gt;\n          \x26lt;\/tr\x26gt;\n        \x26lt;\/thead\x26gt;\n        \x26lt;tbody\x26gt;{rows}\x26lt;\/tbody\x26gt;\n      \x26lt;\/table\x26gt;\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  render() {\n    const filterText = this.props.filterText;\n    const inStockOnly = this.props.inStockOnly;\n\n    return (\n      \x26lt;form\x26gt;\n        \x26lt;input\n          type=\x22text\x22\n          placeholder=\x22Search...\x22\n          value={filterText} \/\x26gt;\n        \x26lt;p\x26gt;\n          \x26lt;input\n            type=\x22checkbox\x22\n            checked={inStockOnly} \/\x26gt;\n          {\x27 \x27}\n          Only show products in stock\n        \x26lt;\/p\x26gt;\n      \x26lt;\/form\x26gt;\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: \x27\x27,\n      inStockOnly: false\n    };\n  }\n\n  render() {\n    return (\n      \x26lt;div\x26gt;\n        \x26lt;SearchBar\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n        \/\x26gt;\n        \x26lt;ProductTable\n          products={this.props.products}\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n        \/\x26gt;\n      \x26lt;\/div\x26gt;\n    );\n  }\n}\n\n\nconst PRODUCTS = [\n  {category: \x27Sporting Goods\x27, price: \x27$49.99\x27, stocked: true, name: \x27Football\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$9.99\x27, stocked: true, name: \x27Baseball\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$29.99\x27, stocked: false, name: \x27Basketball\x27},\n  {category: \x27Electronics\x27, price: \x27$99.99\x27, stocked: true, name: \x27iPod Touch\x27},\n  {category: \x27Electronics\x27, price: \x27$399.99\x27, stocked: false, name: \x27iPhone 5\x27},\n  {category: \x27Electronics\x27, price: \x27$199.99\x27, stocked: true, name: \x27Nexus 7\x27}\n];\n\nReactDOM.render(\n  \x26lt;FilterableProductTable products={PRODUCTS} \/\x26gt;,\n  document.getElementById(\x27container\x27)\n);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在state已经确定好了，开始要与组件交互关联了，知道state的那部分应该放在哪个组件中。\x3c\/p\x3e\n\x3cp\x3e再提醒一句：React是单向数据流导向的，从树状图的上端往下。\x3c\/p\x3e\n\x3cp\x3e哪个组件应该有怎样的state对于react新手来讲可能是很困惑的一点，下面几点可能对你会有帮助：\x3c\/p\x3e\n\x3cp\x3e·确定哪些组件在渲染过程中要用到state\x3cbr\x3e·可能多个组件同时需要用到state的一部分，那边找到一个它们共同的parent component，把state放在这个组件里\x3cbr\x3e·如果已有的组件中找不到这样的parent component，那就创建一个。\x3cbr\x3e（意译）\x3c\/p\x3e\n\x3cp\x3e依照以上标准分析下我们的应用：\x3cbr\x3e·ProductTable 显示过滤后的商品数据，这需要通过state跟原始数据（在props中），SearchBar需要显示过滤文本跟复选框勾选情况。\x3cbr\x3e·上面两者的common parent component就可以是FilterableProductTable。\x3cbr\x3e·所以讲state中的filterText跟checkvalue放在FilterableProductTable，没毛病。\x3c\/p\x3e\n\x3cp\x3e我们state中也就这两，所以放在哪个组件也确定了，开始码代码了。\x3cbr\x3e首先，在FilterableProductTable中的构造函数里初始化state对象，然后将state里的内容作为props传递到对应的child component中去（交互=》触发预先定义的事件=》state变化=》作为state内容载体的props传递到对应组件=》具体组件render=》用户看到交互结果）\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e第五步：实现交互事件（add inverse data flow ，难以描述）\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class ProductCategoryRow extends React.Component {\n  render() {\n    const category = this.props.category;\n    return (\n      \x3ctr\x3e\n        \x3cth colSpan=\x26quot;2\x26quot;\x3e\n          {category}\n        \x3c\/th\x3e\n      \x3c\/tr\x3e\n    );\n  }\n}\n\nclass ProductRow extends React.Component {\n  render() {\n    const product = this.props.product;\n    const name = product.stocked ?\n      product.name :\n      \x3cspan style=\x22{{\x22color: \x27red\x27\x22}}\x22\x3e\n        {product.name}\n      \x3c\/span\x3e;\n\n    return (\n      \x3ctr\x3e\n        \x3ctd\x3e{name}\x3c\/td\x3e\n        \x3ctd\x3e{product.price}\x3c\/td\x3e\n      \x3c\/tr\x3e\n    );\n  }\n}\n\nclass ProductTable extends React.Component {\n  render() {\n    const filterText = this.props.filterText;\n    const inStockOnly = this.props.inStockOnly;\n\n    const rows = [];\n    let lastCategory = null;\n\n    this.props.products.forEach((product) =\x3e {\n      if (product.name.indexOf(filterText) === -1) {\n        return;\n      }\n      if (inStockOnly \x26amp;\x26amp; !product.stocked) {\n        return;\n      }\n      if (product.category !== lastCategory) {\n        rows.push(\n          \x3cProductCategoryRow\n            category={product.category}\n            key={product.category} \/\x3e\n        );\n      }\n      rows.push(\n        \x3cProductRow\n          product={product}\n          key={product.name}\n        \/\x3e\n      );\n      lastCategory = product.category;\n    });\n\n    return (\n      \x3ctable\x3e\n        \x3cthead\x3e\n          \x3ctr\x3e\n            \x3cth\x3eName\x3c\/th\x3e\n            \x3cth\x3ePrice\x3c\/th\x3e\n          \x3c\/tr\x3e\n        \x3c\/thead\x3e\n        \x3ctbody\x3e{rows}\x3c\/tbody\x3e\n      \x3c\/table\x3e\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleFilterTextChange = this.handleFilterTextChange.bind(this);\n    this.handleInStockChange = this.handleInStockChange.bind(this);\n  }\n  \n  handleFilterTextChange(e) {\n    this.props.onFilterTextChange(e.target.value);\n  }\n  \n  handleInStockChange(e) {\n    this.props.onInStockChange(e.target.checked);\n  }\n  \n  render() {\n    return (\n      \x3cform\x3e\n        \x3cinput\n          type=\x26quot;text\x26quot;\n          placeholder=\x26quot;Search...\x26quot;\n          value={this.props.filterText}\n          onChange={this.handleFilterTextChange}\n        \/\x3e\n        \x3cp\x3e\n          \x3cinput\n            type=\x26quot;checkbox\x26quot;\n            checked={this.props.inStockOnly}\n            onChange={this.handleInStockChange}\n          \/\x3e\n          {\x27 \x27}\n          Only show products in stock\n        \x3c\/p\x3e\n      \x3c\/form\x3e\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: \x27\x27,\n      inStockOnly: false\n    };\n    \n    this.handleFilterTextChange = this.handleFilterTextChange.bind(this);\n    this.handleInStockChange = this.handleInStockChange.bind(this);\n  }\n\n  handleFilterTextChange(filterText) {\n    this.setState({\n      filterText: filterText\n    });\n  }\n  \n  handleInStockChange(inStockOnly) {\n    this.setState({\n      inStockOnly: inStockOnly\n    })\n  }\n\n  render() {\n    return (\n      \x3cdiv\x3e\n        \x3cSearchBar\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n          onFilterTextChange={this.handleFilterTextChange}\n          onInStockChange={this.handleInStockChange}\n        \/\x3e\n        \x3cProductTable\n          products={this.props.products}\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n        \/\x3e\n      \x3c\/div\x3e\n    );\n  }\n}\n\n\nconst PRODUCTS = [\n  {category: \x27Sporting Goods\x27, price: \x27$49.99\x27, stocked: true, name: \x27Football\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$9.99\x27, stocked: true, name: \x27Baseball\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$29.99\x27, stocked: false, name: \x27Basketball\x27},\n  {category: \x27Electronics\x27, price: \x27$99.99\x27, stocked: true, name: \x27iPod Touch\x27},\n  {category: \x27Electronics\x27, price: \x27$399.99\x27, stocked: false, name: \x27iPhone 5\x27},\n  {category: \x27Electronics\x27, price: \x27$199.99\x27, stocked: true, name: \x27Nexus 7\x27}\n];\n\nReactDOM.render(\n  \x3cFilterableProductTable products={PRODUCTS} \/\x3e,\n  document.getElementById(\x27container\x27)\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductCategoryRow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e category = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.category;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ecolSpan\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x222\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          {category}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eth\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductRow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e product = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.product;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e name = product.stocked ?\n      product.name :\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estyle\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{{\x22color:\x3c\/span\x3e \x27\x3cspan class=\x22hljs-attr\x22\x3ered\x3c\/span\x3e\x27\x22}}\x22\x26gt;\x3c\/span\x3e\n        {product.name}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e{name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e{product.price}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etr\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eProductTable\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eReact\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e filterText = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.filterText;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e inStockOnly = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.inStockOnly;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rows = [];\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e lastCategory = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.products.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eproduct\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (product.name.indexOf(filterText) === \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (inStockOnly \x26amp;\x26amp; !product.stocked) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (product.category !== lastCategory) {\n        rows.push(\n          \x26lt;ProductCategoryRow\n            category={product.category}\n            key={product.category} \/\x26gt;\n        );\n      }\n      rows.push(\n        \x26lt;ProductRow\n          product={product}\n          key={product.name}\n        \/\x26gt;\n      );\n      lastCategory = product.category;\n    });\n\n    return (\n      \x26lt;table\x26gt;\n        \x26lt;thead\x26gt;\n          \x26lt;tr\x26gt;\n            \x26lt;th\x26gt;Name\x26lt;\/th\x26gt;\n            \x26lt;th\x26gt;Price\x26lt;\/th\x26gt;\n          \x26lt;\/tr\x26gt;\n        \x26lt;\/thead\x26gt;\n        \x26lt;tbody\x26gt;{rows}\x26lt;\/tbody\x26gt;\n      \x26lt;\/table\x26gt;\n    );\n  }\n}\n\nclass SearchBar extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleFilterTextChange = this.handleFilterTextChange.bind(this);\n    this.handleInStockChange = this.handleInStockChange.bind(this);\n  }\n  \n  handleFilterTextChange(e) {\n    this.props.onFilterTextChange(e.target.value);\n  }\n  \n  handleInStockChange(e) {\n    this.props.onInStockChange(e.target.checked);\n  }\n  \n  render() {\n    return (\n      \x26lt;form\x26gt;\n        \x26lt;input\n          type=\x22text\x22\n          placeholder=\x22Search...\x22\n          value={this.props.filterText}\n          onChange={this.handleFilterTextChange}\n        \/\x26gt;\n        \x26lt;p\x26gt;\n          \x26lt;input\n            type=\x22checkbox\x22\n            checked={this.props.inStockOnly}\n            onChange={this.handleInStockChange}\n          \/\x26gt;\n          {\x27 \x27}\n          Only show products in stock\n        \x26lt;\/p\x26gt;\n      \x26lt;\/form\x26gt;\n    );\n  }\n}\n\nclass FilterableProductTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      filterText: \x27\x27,\n      inStockOnly: false\n    };\n    \n    this.handleFilterTextChange = this.handleFilterTextChange.bind(this);\n    this.handleInStockChange = this.handleInStockChange.bind(this);\n  }\n\n  handleFilterTextChange(filterText) {\n    this.setState({\n      filterText: filterText\n    });\n  }\n  \n  handleInStockChange(inStockOnly) {\n    this.setState({\n      inStockOnly: inStockOnly\n    })\n  }\n\n  render() {\n    return (\n      \x26lt;div\x26gt;\n        \x26lt;SearchBar\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n          onFilterTextChange={this.handleFilterTextChange}\n          onInStockChange={this.handleInStockChange}\n        \/\x26gt;\n        \x26lt;ProductTable\n          products={this.props.products}\n          filterText={this.state.filterText}\n          inStockOnly={this.state.inStockOnly}\n        \/\x26gt;\n      \x26lt;\/div\x26gt;\n    );\n  }\n}\n\n\nconst PRODUCTS = [\n  {category: \x27Sporting Goods\x27, price: \x27$49.99\x27, stocked: true, name: \x27Football\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$9.99\x27, stocked: true, name: \x27Baseball\x27},\n  {category: \x27Sporting Goods\x27, price: \x27$29.99\x27, stocked: false, name: \x27Basketball\x27},\n  {category: \x27Electronics\x27, price: \x27$99.99\x27, stocked: true, name: \x27iPod Touch\x27},\n  {category: \x27Electronics\x27, price: \x27$399.99\x27, stocked: false, name: \x27iPhone 5\x27},\n  {category: \x27Electronics\x27, price: \x27$199.99\x27, stocked: true, name: \x27Nexus 7\x27}\n];\n\nReactDOM.render(\n  \x26lt;FilterableProductTable products={PRODUCTS} \/\x26gt;,\n  document.getElementById(\x27container\x27)\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e目前为止，通过state，props已经构建好了我们的页面，现在实现交互事件。\x3c\/p\x3e\n\x3cp\x3eReact使用的单向数据流跟单向数据绑定使react的工作易于理解，虽然这相比双向绑定的确需要写多点代码。（使黑魔法不再神秘，react不需要黑魔法）\x3c\/p\x3e\n\x3cp\x3e下面这段过程总结，我觉得还是我上面注解的那段拿过来：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    交互=》触发预先定义的事件=》state变化=》作为state内容载体的props传递到对应组件=》具体组件render=》用户看到交互结果\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pf\x22\x3e\x3ccode\x3e    交互=》触发预先定义的事件=》\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e变化=》作为\x3cspan class=\x22hljs-keyword\x22\x3estate\x3c\/span\x3e内容载体的props传递到对应组件=》具体组件render=》用户看到交互结果\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e（数据绑定体现在，state一旦发生变化，跟state关联的数据都将重现计算，而通过数据驱动的页面也将重新渲染。）\x3c\/p\x3e\n\x3cp\x3ethat\x27s all\x3c\/p\x3e\n\x3cp\x3e欢迎讨论~\x3cbr\x3e感谢阅读~\x3c\/p\x3e\n\x3cp\x3e个人公众号：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013612376?w=258\x26amp;h=258\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013612376?w=258\x26amp;h=258\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>翻译&ndash;Thinking in React</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013612369">https://segmentfault.com/a/1190000013612369</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/irjek8iiwv/" target="_blank">https://alili.tech/archive/irjek8iiwv/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>