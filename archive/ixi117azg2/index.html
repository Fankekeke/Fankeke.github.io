<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="H5视频活动踩坑"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>H5视频活动踩坑 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ixi117azg2/",
				"appid": "1613049289050283", 
				"title": "H5视频活动踩坑 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-12T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/16nh1f4otqu/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/hdgye0c5jdv/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&text=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&text=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&title=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&is_video=false&description=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&title=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&title=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&title=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fixi117azg2%2f&title=H5%e8%a7%86%e9%a2%91%e6%b4%bb%e5%8a%a8%e8%b8%a9%e5%9d%91"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">H5视频活动踩坑</h1><div class="meta"><div class="postdate"><time datetime="2018-12-12" itemprop="datePublished">2018-12-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e最近做了一些嵌入视频的活动，积累了点视频方面的经验，下面记录下别人和自己踩过的坑以及相应的解决方案。\x3cbr\x3e\x3cstrong\x3e1、碰到问题和解决方案\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e1.1、ios 网页中播放视频默认全屏（点击视频会弹出播放器进行全屏播放）。\x3c\/strong\x3e\x3cbr\x3e解决不全屏播放可以添加下列属性webkit-playsinline=\x27true\x27 和 playsinline=\x27true\x27 如果设置上面属性还没有效果，那么可以再配合下面这个插件试试。 \x3ca href=\x22https:\/\/github.com\/bfred-it\/iphone-inline-video\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eiphone-inline-video\x3c\/a\x3e\x3cbr\x3e备注：ios下在微博中打开网页播放视频会弹出播放器播放，设置playsinline属性无效，还必须使用上面那个插件，亲测有效。\x3cbr\x3e\x3cstrong\x3e1.2、andriod中video播放完后显示推荐视频\x3c\/strong\x3e\x3cbr\x3e移动端浏览器中的video元素是比较特别的，早期无论是在iOS还是Android的浏览器中，它都位于页面的最顶层，无法被遮盖。后来这个问题在iOS下得到了解决，但是Android的浏览器则问题依旧。X5是腾讯基于Webkit开发的渲染引擎，它提供了一种名叫「同层播放器」的特殊video元素以解决遮盖问题。通过设置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22x5-video-player-type=\x26quot;h5\x26quot; 可以开启同层播放器，来避免播放后显示推荐视频的问题。\nx5-video-player-fullscreen=\x26quot;true\x26quot; \/\/视频全屏播放\nx5-video-orientation=\x26quot;portrait\x26quot;\/\/视频竖屏模式播放\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs ini\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-attr\x22\x3ex5-video-player-type\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22h5\x22\x3c\/span\x3e 可以开启同层播放器，来避免播放后显示推荐视频的问题。\n\x3cspan class=\x22hljs-attr\x22\x3ex5-video-player-fullscreen\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e \/\/视频全屏播放\n\x3cspan class=\x22hljs-attr\x22\x3ex5-video-orientation\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22portrait\x22\x3c\/span\x3e\/\/视频竖屏模式播放\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e1.3、视频的适配\x3c\/strong\x3e\x3cbr\x3e目前设计师一般是按照iphone5或者iphone7的标准去设计视频，一般可以通过宽高100%来播放视频，如果发现视频还是不行那么就需要根据实际情况设置 object-fit属性来解决了。 \x3ca href=\x22http:\/\/www.zhangxinxu.com\/wordpress\/2015\/03\/css3-object-position-object-fit\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e详见半深入理解CSS3 object-position\/object-fit属性\x3c\/a\x3e\x3cbr\x3e备注：在webkit内核浏览器下，默认是object-fit:contain。\x3cbr\x3e\x3cstrong\x3e1.4、js控制视频的播放\x3c\/strong\x3e\x3cbr\x3e在ios中视频和音频一般都不会主动播放，除非用户主动去点击，所以需要通过js来监听界面的交互来控制视频的播放。\x3cbr\x3e视频的播放和暂停主要是调用play和pause方法。 而视频播放过程中如果需要一些用户的交互主要是通过timeupdate方法来监听当前的播放时间，看一段代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var isStop = false;\n    videoElem.on(\x27timeupdate\x27, function () {\n        var curTime = parseInt(videoElem[0].currentTime);\n        if (curTime == 152) {\/\/该时间点展示交互蒙层\n            $(\x27.js_first_stop\x27).removeClass(\x27hide\x27);\n        } else if (curTime \x3e 152 \x26amp;\x26amp; curTime == 153) {\n            if (!isStop) {\/\/解决ios暂停后再次点击播放不了问题，因为该处触发了多次，但是andriod没有该问题。\n                isStop = true;\n                videoElem[0].pause();\n            }\n        } else if (curTime == 248) {\n            $(\x27.js_second_stop\x27).removeClass(\x27hide\x27);\n        }\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isStop = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    videoElem.on(\x3cspan class=\x22hljs-string\x22\x3e\x27timeupdate\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e curTime = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(videoElem[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].currentTime);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (curTime == \x3cspan class=\x22hljs-number\x22\x3e152\x3c\/span\x3e) {\x3cspan class=\x22hljs-comment\x22\x3e\/\/该时间点展示交互蒙层\x3c\/span\x3e\n            $(\x3cspan class=\x22hljs-string\x22\x3e\x27.js_first_stop\x27\x3c\/span\x3e).removeClass(\x3cspan class=\x22hljs-string\x22\x3e\x27hide\x27\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (curTime \x26gt; \x3cspan class=\x22hljs-number\x22\x3e152\x3c\/span\x3e \x26amp;\x26amp; curTime == \x3cspan class=\x22hljs-number\x22\x3e153\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!isStop) {\x3cspan class=\x22hljs-comment\x22\x3e\/\/解决ios暂停后再次点击播放不了问题，因为该处触发了多次，但是andriod没有该问题。\x3c\/span\x3e\n                isStop = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                videoElem[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].pause();\n            }\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (curTime == \x3cspan class=\x22hljs-number\x22\x3e248\x3c\/span\x3e) {\n            $(\x3cspan class=\x22hljs-string\x22\x3e\x27.js_second_stop\x27\x3c\/span\x3e).removeClass(\x3cspan class=\x22hljs-string\x22\x3e\x27hide\x27\x3c\/span\x3e);\n        }\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在ios中监听timeupdate事件并暂停的视频的时候需要引入一个全局的isStop变量，不然下次点击继续播放的时候没反应（timeupdate的时候触发了多次暂停），但是andriod是没有这个问题的。 判断视频结束可以监听视频的ended事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22videoElem.on(\x27ended\x27,function(){});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs delphi\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3evideoElem.\x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ended\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e{}\x3c\/span\x3e);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者监听视频的timeupdate事件，然后判断ended属性，如果为true则表示结束，false表示未结束。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22videoElem.on(\x27timeupdate\x27,function(){\n   if(videoElem[0].ended){\n    \/\/播放结束\n   }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3evideoElem.on(\x3cspan class=\x22hljs-string\x22\x3e\x27timeupdate\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n   \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(videoElem[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].ended){\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/播放结束\x3c\/span\x3e\n   }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外在andriod端开启了同层播放器，微信端也提供了2个监听进入同层播放器和退出同层播放器的事件。 进入同层播放器事件（开始播放视频）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22videoElem.on(\x26quot;x5videoenterfullscreen\x26quot;, function(){}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3evideoElem.on(\x3cspan class=\x22hljs-string\x22\x3e\x22x5videoenterfullscreen\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e点击左上角返回键退出同层播放器。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22videoElem.on(\x27x5videoexitfullscreen\x27,function(){}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3evideoElem.on(\x3cspan class=\x22hljs-string\x22\x3e\x27x5videoexitfullscreen\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后需要注意的是在andriod端播放视频后是不会主动退出同层播放器的。后续如果有展示的界面，也会在播放器中展示，感觉很怪异。这里可以通过链接跳转来解决。\x3cbr\x3e\x3cstrong\x3e1.5、canvas播放视频\x3c\/strong\x3e\x3cbr\x3ecanvas可以播放视频，但是在某些andriod机上会看到有很严重的锯齿，并且有些andriod浏览器播放的时候只有声音而没有图像。\x3cbr\x3e\x3cstrong\x3e1.6、视频编码\x3c\/strong\x3e\x3cbr\x3emp4格式的视频要h.264编码方式，不然某些ios只有声音而没有图像。\x3cbr\x3e最后，一个完整的video配置的如下，仅供参考\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cvideo class=\x26quot;js_video\x26quot; style=\x26quot;object-fit: cover; width: 100%; height: 100%;\x26quot; preload=\x26quot;load\x26quot; \nplaysinline=\x26quot;true\x26quot; webkit-playsinline=\x26quot;true\x26quot; x5-video-player-type=\x26quot;h5\x26quot; x5-video-player-fullscreen=\x26quot;true\x26quot;\n x5-video-orientation=\x26quot;portrait\x26quot;src=\x26quot;https:\/\/video.mdcdn.cn\/friend2018.mp4\x26quot;\x3e\x3c\/video\x3e \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x26lt;video \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js_video\x22\x3c\/span\x3e style=\x3cspan class=\x22hljs-string\x22\x3e\x22object-fit: cover; width: 100%; height: 100%;\x22\x3c\/span\x3e preload=\x3cspan class=\x22hljs-string\x22\x3e\x22load\x22\x3c\/span\x3e \nplaysinline=\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e webkit-playsinline=\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e x5-video-player-type=\x3cspan class=\x22hljs-string\x22\x3e\x22h5\x22\x3c\/span\x3e x5-video-player-fullscreen=\x3cspan class=\x22hljs-string\x22\x3e\x22true\x22\x3c\/span\x3e\n x5-video-orientation=\x3cspan class=\x22hljs-string\x22\x3e\x22portrait\x22\x3c\/span\x3esrc=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/video.mdcdn.cn\/friend2018.mp4\x22\x3c\/span\x3e\x26gt;\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3evideo\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e \x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>H5视频活动踩坑</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013403898">https://segmentfault.com/a/1190000013403898</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ixi117azg2/" target="_blank">https://alili.tech/archive/ixi117azg2/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>