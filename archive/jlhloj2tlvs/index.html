<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="光照渲染——用canvas模拟光照效果"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>光照渲染——用canvas模拟光照效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jlhloj2tlvs/",
				"appid": "1613049289050283", 
				"title": "光照渲染——用canvas模拟光照效果 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-18T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/c0eu6d5u8hc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/z6h4liz7mmo/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&text=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&text=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&title=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&is_video=false&description=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&title=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&title=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&title=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjlhloj2tlvs%2f&title=%e5%85%89%e7%85%a7%e6%b8%b2%e6%9f%93%e2%80%94%e2%80%94%e7%94%a8canvas%e6%a8%a1%e6%8b%9f%e5%85%89%e7%85%a7%e6%95%88%e6%9e%9c"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">光照渲染——用canvas模拟光照效果</h1><div class="meta"><div class="postdate"><time datetime="2018-12-18" itemprop="datePublished">2018-12-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e光照\x3c\/h2\x3e\n\x3cp\x3e我们能看到物体，是因为光照射在物体上然后反射到我们的眼睛当中。其中的影响因素非常多：观察者的位置、光源的位置、光的颜色、物体表面的颜色、材质和粗糙程度等等。以后我们将会详细探究如何模拟物体的材质，在这篇文章中我们只讨论光源。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e平行光源\x3c\/h2\x3e\n\x3cp\x3e太阳的尺度相对地球来说非常大，所以可以认为从太阳照射来的光线都是平行的，即太阳是一个平行光源。\x3c\/p\x3e\n\x3cp\x3e模拟平行光源的光照非常简单，当光垂直照射到平面上，即光线方向和平面呈90度角时，这时光照是最强的。如果照射的角度不断变大（或者说光线和平面的夹角不断变小），光照也会随之变弱，当光线方向完全和平面平行时，这时没有光能照射到平面上，光强变成了0。\x3c\/p\x3e\n\x3cp\x3e可以总结出，平行光的光照情况和两个方向有关：光线的方向和受光照平面的朝向。\x3c\/p\x3e\n\x3cp\x3e我们用一个垂直于平面的向量去描述平面的朝向，在图形学中，一般把这个向量称为“法向量”。\x3c\/p\x3e\n\x3cp\x3e我们可以用向量的“点乘”运算来计算光强变化。\x3c\/p\x3e\n\x3cblockquote\x3e点乘也叫数量积，是接受在实数R上的两个向量并返回一个实数值标量的二元运算。点乘运算规则非常简单，将两个向量对应坐标的乘积求和就行了。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012759735?w=128\x26amp;h=23\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012759735?w=128\x26amp;h=23\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e这里我们计算的是三维向量，我们用数组来表示向量，写一个简单的方法来计算点乘：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 点乘运算\n * @param {Array\x3cnumber\x3e} v1 向量v1\n * @param {Array\x3cnumber\x3e} v2 向量v2\n * @return {number} 点乘结果\n *\/\nfunction dot( v1, v2 ) {\n    return v1[ 0 ] * v2[ 0 ] \x2b v1[ 1 ] * v2[ 1 ] \x2b v1[ 2 ] * v2[ 2 ];\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs smali\x22\x3e\x3ccode class=\x22javcascript\x22\x3e\/**\n * 点乘运算\n * @param {Array\x26lt;number\x26gt;} v1 向量v1\n * @param {Array\x26lt;number\x26gt;} v2 向量v2\n * @return {number} 点乘结果\n *\/\nfunction dot( v1, v2 ) {\n   \x3cspan class=\x22hljs-built_in\x22\x3e return \x3c\/span\x3ev1[ 0 ] * v2[ 0 ] \x2b v1[ 1 ] * v2[ 1 ] \x2b v1[ 2 ] * v2[ 2 ];\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e还有几个重要的向量运算我们也会用到，在这里我们提前定义好，为减小篇幅，这里省略掉具体实现，代码可以看最后的实例源码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 将向量转为单位向量\n * @param {Array\x3cnumber\x3e} v\n * @return {Array\x3cnumber\x3e} 单位向量\n *\/\nfunction normalize( v ) { \/* ... *\/ }\n\n\n\/**\n * 两向量相减\n * @param {Array\x3cnumber\x3e} v1\n * @param {Array\x3cnumber\x3e} v2\n * @return {Array\x3cnumber\x3e}\n *\/\nfunction sub( v1, v2 ) { \/* ... *\/ }\n\n\n\/**\n * 计算一个向量的反方向向量\n * @param {Array\x3cnumber\x3e} v\n * @return {Array\x3cnumber\x3e}\n *\/\nfunction negate( v ) { \/* ... *\/ }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 将向量转为单位向量\n * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e {Array\x26lt;number\x26gt;} v\n * \x3cspan class=\x22hljs-doctag\x22\x3e@return\x3c\/span\x3e {Array\x26lt;number\x26gt;} 单位向量\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enormalize\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e( v )\x3c\/span\x3e \x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/* ... *\/\x3c\/span\x3e }\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 两向量相减\n * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e {Array\x26lt;number\x26gt;} v1\n * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e {Array\x26lt;number\x26gt;} v2\n * \x3cspan class=\x22hljs-doctag\x22\x3e@return\x3c\/span\x3e {Array\x26lt;number\x26gt;}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esub\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e( v1, v2 )\x3c\/span\x3e \x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/* ... *\/\x3c\/span\x3e }\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 计算一个向量的反方向向量\n * \x3cspan class=\x22hljs-doctag\x22\x3e@param\x3c\/span\x3e {Array\x26lt;number\x26gt;} v\n * \x3cspan class=\x22hljs-doctag\x22\x3e@return\x3c\/span\x3e {Array\x26lt;number\x26gt;}\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enegate\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e( v )\x3c\/span\x3e \x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/* ... *\/\x3c\/span\x3e }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们假设页面的左上角为原点O，右方向为x轴正方向，下方向为y轴正方向，垂直屏幕向外的方向为z轴正方向。我们可以这样定义一个宽高都为500的平面:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var plane = {\n    center: [ 250, 250, 0 ],    \/\/ 平面中心点坐标\n    width: 500,                 \/\/ 宽\n    height: 500,                \/\/ 高\n    normal: [ 0, 0, 1 ],        \/\/ 朝向，即法向量     \n    color: { r: 255, g: 0, b: 0 }   \/\/ 颜色为红色\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = {\n    \x3cspan class=\x22hljs-attr\x22\x3ecenter\x3c\/span\x3e: [ \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ],    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 平面中心点坐标\x3c\/span\x3e\n    width: \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e,                 \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 宽\x3c\/span\x3e\n    height: \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e,                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 高\x3c\/span\x3e\n    normal: [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ],        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 朝向，即法向量     \x3c\/span\x3e\n    color: { \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eg\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e }   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 颜色为红色\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对于平行光，只需要关心它的方向和颜色，我们可以这样来定义一个平行光源：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var directionalLight = {\n    direction: [ 0, 0, -1 ],        \/\/ 从屏幕外垂直照向屏幕\n    color: { r: 255, g: 255, b: 255 }   \/\/ 颜色为纯白色\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e directionalLight = {\n    \x3cspan class=\x22hljs-attr\x22\x3edirection\x3c\/span\x3e: [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e ],        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 从屏幕外垂直照向屏幕\x3c\/span\x3e\n    color: { \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eg\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e }   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 颜色为纯白色\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e平行光的光线都是平行的，所以它照射到平面上各个位置的效果都是一样的，换言之，整个平面都应该是同一个颜色。\x3cbr\x3e根据上面的规则(光强等于光线反方向向量\x3cstrong\x3e点乘\x3c\/strong\x3e平面法向量)，我们可以计算出这个颜色：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ ...\nvar reverseLightDirection = negate( directionalLight.direction );   \/\/ 计算平行光的反方向向量\nvar intensity = dot( reverseLightDirection, plane.normal );         \/\/ 计算两向量点乘\n\n\/\/ 计算有光照时的颜色\nvar color = {\n    r: intensity * plane.color.r \x2b intensity * directionalLight.r,\n    g: intensity * plane.color.g \x2b intensity * directionalLight.g,\n    b: intensity * plane.color.b \x2b intensity * directionalLight.g,\n}\n\nvar canvas = document.getElementById( \x27canvas\x27 );\nvar ctx = canvas.getElementById( \x272d\x27 );\nctx.rect( plane.center[ 0 ], plane.center[ 1 ], plane.width, plane.height );\nctx.fillStyle = \x27rgb(\x27 \x2b color.r \x2b \x27,\x27 \x2b color.g \x2b \x27,\x27 \x2b color.b \x27)\x27;\nctx.fill();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e reverseLightDirection = negate( directionalLight.direction );   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算平行光的反方向向量\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e intensity = dot( reverseLightDirection, plane.normal );         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算两向量点乘\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算有光照时的颜色\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e color = {\n    \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: intensity * plane.color.r \x2b intensity * directionalLight.r,\n    \x3cspan class=\x22hljs-attr\x22\x3eg\x3c\/span\x3e: intensity * plane.color.g \x2b intensity * directionalLight.g,\n    \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: intensity * plane.color.b \x2b intensity * directionalLight.g,\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById( \x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e );\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ctx = canvas.getElementById( \x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e );\nctx.rect( plane.center[ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], plane.center[ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ], plane.width, plane.height );\nctx.fillStyle = \x3cspan class=\x22hljs-string\x22\x3e\x27rgb(\x27\x3c\/span\x3e \x2b color.r \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27,\x27\x3c\/span\x3e \x2b color.g \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27,\x27\x3c\/span\x3e \x2b color.b \x3cspan class=\x22hljs-string\x22\x3e\x27)\x27\x3c\/span\x3e;\nctx.fill();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我写了一个示例，可以调整光线方向来观察不同方向下的光照效果。\x3cbr\x3e\x3ca href=\x22https:\/\/hujiulong.github.io\/blog\/demo\/light\/directionalLight.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e在线运行示例\x3c\/a\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012742074?w=855\x26amp;h=517\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012742074?w=855\x26amp;h=517\x22 alt=\x224\x22 title=\x224\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e点光源\x3c\/h2\x3e\n\x3cp\x3e在日常生活中，点光源更加常见，白炽灯、台灯等都可以认为是点光源。\x3c\/p\x3e\n\x3cp\x3e首先，我们先定义一个点光源，对于一个点光源来说，我们只需要关心它的位置和颜色：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var pointLight = {\n    position: [ 250, 250, 100 ],    \/\/ 光源位于平面中心上方100处\n    color: { r: 255, g: 255, b: 255 }   \/\/ 颜色为纯白色\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pointLight = {\n    \x3cspan class=\x22hljs-attr\x22\x3eposition\x3c\/span\x3e: [ \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e ],    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 光源位于平面中心上方100处\x3c\/span\x3e\n    color: { \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eg\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eb\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e }   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 颜色为纯白色\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e光强的计算规则仍然不变：光强等于光线反方向向量点乘平面法向量。但是点光源的光是从一个点发射出来，它们照射到平面上时，所有光线的方向都不一样。所以，我们必须挨个计算平面上所有像素的光强。\x3c\/p\x3e\n\x3cp\x3e这里需要用到canvas提供的\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/CanvasRenderingContext2D\/putImageData\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eputImageData\x3c\/a\x3e，这个方法可以直接填入一个区域的像素颜色值来绘图。代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ ...\nvar imageData = ctx.createImageData( 500, 500 );    \/\/ 创建一个ImageData，用来保存像素数据\n\nfor ( var x = 0; x \x3c imageData.width; x\x2b\x2b ) {\n    for ( var y = 0; y \x3c imageData.height; y\x2b\x2b ) {\n        var index = y * imageData.width \x2b x;        \/\/ 当前计算的像素点的索引\n\n        var point = [ x, y, 0 ];\n        var normal = [ 0, 0, 1 ];\n\n        var reverseLightDirection = normalize( sub( pointLight.position, point ) );  \/\/ 光线方向的反方向向量\n\n        var light = dot( reverseLightDirection, normal );\n\n        imageData.data[ index * 4 ] = pointLight.color.r * intensity \x2b plane.color.r * intensity;\n        imageData.data[ index * 4 \x2b 1 ] = pointLight.color.g * intensity \x2b plane.color.g * intensity;\n        imageData.data[ index * 4 \x2b 2 ] = pointLight.color.b * intensity \x2b plane.color.b * intensity;\n        imageData.data[ index * 4 \x2b 3 ] = 255;\n    }\n}\n\nctx.putImageData( imageData, 100, 100 );\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e imageData = ctx.createImageData( \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e );    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建一个ImageData，用来保存像素数据\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e ( \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; x \x26lt; imageData.width; x\x2b\x2b ) {\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e ( \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e y = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; y \x26lt; imageData.height; y\x2b\x2b ) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = y * imageData.width \x2b x;        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前计算的像素点的索引\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e point = [ x, y, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ];\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e normal = [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ];\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e reverseLightDirection = normalize( sub( pointLight.position, point ) );  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 光线方向的反方向向量\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = dot( reverseLightDirection, normal );\n\n        imageData.data[ index * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e ] = pointLight.color.r * intensity \x2b plane.color.r * intensity;\n        imageData.data[ index * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ] = pointLight.color.g * intensity \x2b plane.color.g * intensity;\n        imageData.data[ index * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e ] = pointLight.color.b * intensity \x2b plane.color.b * intensity;\n        imageData.data[ index * \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e ] = \x3cspan class=\x22hljs-number\x22\x3e255\x3c\/span\x3e;\n    }\n}\n\nctx.putImageData( imageData, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e );\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样就可以看到结果了：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012742075?w=300\x26amp;h=303\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012742075?w=300\x26amp;h=303\x22 alt=\x22tim 20180107034502\x22 title=\x22tim 20180107034502\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我写了一个更复杂一点的例子，可以通过鼠标去移动光源，滑动滚轮来改变光源高度:\x3cbr\x3e\x3ca href=\x22https:\/\/hujiulong.github.io\/blog\/demo\/light\/pointLight.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e在线运行示例\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012742076?w=633\x26amp;h=558\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012742076?w=633\x26amp;h=558\x22 alt=\x225\x22 title=\x225\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e动态图看起来有很多圈圈，实际上并没有，可以自己玩一下\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eWebGL的优势\x3c\/h2\x3e\n\x3cp\x3e对于一个\x3ccode\x3e500*500\x3c\/code\x3e的平面，我们去计算它在点光源光照下的颜色，需要挨个计算平面上所有点，需要循环\x3ccode\x3e500*500=250000\x3c\/code\x3e次，这其实是非常低效的。并且在做复杂场景的渲染时，不会只有一个光源，而且还会有投影等计算，计算量将会非常大。\x3c\/p\x3e\n\x3cp\x3e从更底层的角度来说，这是因为每次计算都是由\x3cstrong\x3eCPU\x3c\/strong\x3e完成的，而CPU只能串行计算，它只能完成一个计算以后才能开始下一次计算，所以非常缓慢。\x3c\/p\x3e\n\x3cp\x3e这种复杂的渲染其实更适合用WebGL来做，因为每一次计算其实前后无关，WebGL可以利用\x3cstrong\x3eGPU\x3c\/strong\x3e的并行计算能力，\x3cstrong\x3e同时\x3c\/strong\x3e去计算所有点的光照强度。一个\x3ccode\x3e500*500\x3c\/code\x3e的平面，理论上只需要花一次计算的时间，这个提升是非常大的。\x3c\/p\x3e\n\x3cp\x3e这篇文章也是想通过这个简单的光照计算来引出WebGL，后面的文章我会用WebGL来重新实现这个效果。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012742077?w=1226\x26amp;h=579\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012742077?w=1226\x26amp;h=579\x22 alt=\x22tim 20180107040503\x22 title=\x22tim 20180107040503\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3eWebGL渲染的光照效果\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e关于我的博客\x3c\/h2\x3e\n\x3cp\x3e这篇文章到这里就结束了。\x3c\/p\x3e\n\x3cp\x3e我计划写一系列关于前端图形渲染的文章，将会涵盖常用的前端图形绘制技术:canvas、svg和WebGL。希望通过这一系列文章能让读者对前端的各种图形绘制接口以及图像处理、图形学的基础知识有所了解。希望在分享的同时，也能巩固和复习自己所学知识，和大家共同进步。\x3c\/p\x3e\n\x3cblockquote\x3e系列博客地址：\x3ca href=\x22https:\/\/github.com\/hujiulong\/blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/hujiulong\/...\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e如果能帮助到你，欢迎star，这样也能及时追踪博客的更新。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>光照渲染——用canvas模拟光照效果</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012759729">https://segmentfault.com/a/1190000012759729</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jlhloj2tlvs/" target="_blank">https://alili.tech/archive/jlhloj2tlvs/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>