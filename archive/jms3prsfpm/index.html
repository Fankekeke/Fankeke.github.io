<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Vue项目的自动化测试"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Vue项目的自动化测试 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/jms3prsfpm/",
				"appid": "1613049289050283", 
				"title": "Vue项目的自动化测试 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-01T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/owa0alo9oia/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/xlnvutagtdk/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&text=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&text=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&title=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&is_video=false&description=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&title=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&title=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&title=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fjms3prsfpm%2f&title=Vue%e9%a1%b9%e7%9b%ae%e7%9a%84%e8%87%aa%e5%8a%a8%e5%8c%96%e6%b5%8b%e8%af%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Vue项目的自动化测试</h1><div class="meta"><div class="postdate"><time datetime="2019-01-01" itemprop="datePublished">2019-01-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3eVue项目的自动化测试\x3c\/h1\x3e\n\x3cp\x3e说到自动化测试，许多开发团队都是听说过、尝试过，但最后都止步于尝试，不能将TDD（测试驱动开发）、BDD（行为驱动开发）的完整流程贯彻到项目中。思考其中的原因：终究还是成本抵不上收益。\x3c\/p\x3e\n\x3cp\x3e很多后端开发人员可能写过很多自动化的单元测试代码，但是对前端测试一头雾水。这是因为相对于后端开发人员的自动化单元测试，前端的自动化测试成本更高。\x3c\/p\x3e\n\x3cp\x3e自动化测试就是通过自动化脚本将一个又一个测试用例串起来，每个测试用例都要模拟环境、模拟输入、然后断言输出。前端自动化最难的地方就是模拟环境、模拟输入和断言输出了！\x3cbr\x3e我们可以试想一下现实中的使用场景：\x3c\/p\x3e\n\x3cp\x3e模拟环境：首先前端代码是跑在不同的终端环境上的，纯粹的使用某台机子的运行环境进行模拟是无法发现真正存在的问题。所以我们的测试用例必须跑在真实的环境下，这里面包括不同的机器：Android、ios、pc、macbook；不同的系统：window10、window8、linux、mac；不同的运行载体：IE、safari、chrome、firefox、Opera、Android webview、UIWebview、WKWebview；不同网络环境：WiFi、4G、3G、offline\x3c\/p\x3e\n\x3cp\x3e模拟输入：前端的输入不好模拟，在PC上有鼠标click，double Click、drag、mouseDown、mouseOver、input等等，在mobile上有swipe、tap、scroll、摇一摇、屏幕翻转等。相对于后端的单元测试，前端的输入种类繁多，每一种模拟起来都十分复杂，而且很多bug隐藏在几种连贯的输入之后才会复现。\x3c\/p\x3e\n\x3cp\x3e断言输出：前端的断言不是简单的判断值是否相等，很多情况是即使值相等、效果完全不一样。\x3cbr\x3e很多展示效果更是不能通过简单的断言来检测，比如区域是否能滑动，输入时键盘是否正确弹起等。\x3c\/p\x3e\n\x3cp\x3e当你跨越千山万水把上面的问题解决了，测试用例写好了，功能代码写好，完美！然后UE跑过来和你说那个这根线往左边移动一像素的时候，你会瞬间崩溃。可能这一像素你很多测试用例都得重写。所以前端自动化测试的成本真不一定抵得上收益。\x3c\/p\x3e\n\x3cp\x3e但是困难不代表解决不了，部分场景不适合不代表所有场景都不适合！\x3c\/p\x3e\n\x3cp\x3e正因为面临这么多的困难，我们的前端社区开发出了很多工具帮我们解决这些问题。本章节主要是结合Vue这个框架介绍前端自动化测试的一些工具和方法。\x3c\/p\x3e\n\x3cp\x3e我们使用vue-cli去新建一个vue的新项目，在这个项目中开启默认的unit tests和e2e tests\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22bogon:work xiaorenhui$ vue init webpack vueExample\n\n? Project name vue-example\n? Project description A Vue.js project\n? Author kukuv \x3ckukuv\x3e\n? Vue build standalone\n? Install vue-router? No\n? Use ESLint to lint your code? No\n? Setup unit tests with Karma \x2b Mocha? Yes\n? Setup e2e tests with Nightwatch? Yes\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3ebogon:work xiaorenhui$ vue init webpack vueExample\n\n? Project name vue-example\n? Project description A Vue.js project\n? Author kukuv \x26lt;kukuv\x26gt;\n? Vue build standalone\n? Install vue-router? No\n? Use ESLint to lint your code? No\n? Setup unit tests with Karma \x2b Mocha? Yes\n? Setup e2e tests with Nightwatch? Yes\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面列举下这个新项目中涉及到的一些开源项目：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3ekarma\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3eKarma是一个基于Node.js的JavaScript测试执行过程管理工具（Test Runner）。该工具可用于测试所有主流Web浏览器，也可集成到CI（Continuous integration）工具，也可和其他代码编辑器一起使用。这个测试工具的一个强大特性就是，它可以监控(Watch)文件的变化，然后自行执行，通过console.log显示测试结果。\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3eMocha\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3emocha是一款功能丰富的javascript单元测试框架，它既可以运行在nodejs环境中，也可以运行在浏览器环境中。\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3eNightwatch\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3eNightwatch是一套基于Node.js的测试框架，使用Selenium WebDriver API以将Web应用测试自动化。它提供了简单的语法，支持使用JavaScript和CSS选择器，来编写运行在Selenium服务器上的端到端测试。\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3ephantomjs\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e一个基于webkit内核的无头浏览器，即没有UI界面，即它就是一个浏览器，只是其内的点击、翻页等人为相关操作需要程序设计实现。\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3esinon-chai\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3esinon-chai是 sinon和chai这两个断言库的结合，提供丰富的断言方法\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e很多人看到这么多新名词一定头晕，心想一个单元测试咋需要懂这么多东西。情况是上面只是单元测试框架的一小部分、还有许多框架没有列出来。正因为前端的自动化测试面临着许多问题，所以我们才有这么多的框架来帮忙解决问题。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eunit tests\x3c\/h2\x3e\n\x3cp\x3e我们先来分析一下这个项目中的unit tests，这里面用到了 Karma、Mocha、sinon-chai、phantomjs。项目中已经有一个默认的单元测试例子。karma作为测试执行过程管理工具把Mocha、sinon-chai、phantomjs等框架组织起来。Mocha用来描述测试用例、sinon-chai用来断言、然后使用phamtomjs作为运行环境来跑测试用例。\x3c\/p\x3e\n\x3cp\x3enpm install 将依赖的库都安装好，这里面phantomjs的依赖会比较难装，如果你之间没有安装过phantom，因为phantom比较大，而且加上国内的网络环境等原因。如果phantomjs装不上可以尝试使用chrome作为运行环境，这需要安装 \x22karma-chrome-launcher\x22，需要修改配置文件。\x3c\/p\x3e\n\x3cp\x3e然后 npm run unit 跑一下unit tests，如果提示权限问题就 使用sudo 来提升下权限。跑完后我们看一下目录结构\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22└── unit\n    ├── coverage  代码覆盖率报告，src下面的index.html可以直接用浏览器打开\n    │   ├── lcov-report\n    │   │   ├── base.css\n    │   │   ├── index.html\n    │   │   ├── prettify.css\n    │   │   ├── prettify.js\n    │   │   ├── sort-arrow-sprite.png\n    │   │   ├── sorter.js\n    │   │   └── src\n    │   │       ├── App.vue.html\n    │   │       ├── components\n    │   │       │   ├── Hello.vue.html\n    │   │       │   └── index.html\n    │   │       └── index.html\n    │   └── lcov.info\n    ├── index.js 运行测试用例前先加载的文件，方便统计代码覆盖率\n    ├── karma.conf.js karma的配置文件\n    └── specs 所有的测试用例都放在这里\n        └── Hello.spec.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e└── unit\n    ├── coverage  代码覆盖率报告，src下面的index.html可以直接用浏览器打开\n    │   ├── lcov-report\n    │   │   ├── base.css\n    │   │   ├── index.html\n    │   │   ├── prettify.css\n    │   │   ├── prettify.js\n    │   │   ├── sort-arrow-sprite.png\n    │   │   ├── sorter.js\n    │   │   └── src\n    │   │       ├── App.vue.html\n    │   │       ├── components\n    │   │       │   ├── Hello.vue.html\n    │   │       │   └── index.html\n    │   │       └── index.html\n    │   └── lcov.info\n    ├── index.js 运行测试用例前先加载的文件，方便统计代码覆盖率\n    ├── karma.conf.js karma的配置文件\n    └── specs 所有的测试用例都放在这里\n        └── Hello.spec.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 加载所有的测试用例、 testsContext.keys().forEach(testsContext)这种写法是webpack中的加载目录下所有文件的写法\n\nconst testsContext = require.context(\x27.\/specs\x27, true, \/\\.spec$\/)\ntestsContext.keys().forEach(testsContext)\n\n\/\/ 加载所有代码文件，方便统计代码覆盖率\nconst srcContext = require.context(\x27..\/..\/src\x27, true, \/^\\.\\\/(?!main(\\.js)?$)\/)\nsrcContext.keys().forEach(srcContext)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载所有的测试用例、 testsContext.keys().forEach(testsContext)这种写法是webpack中的加载目录下所有文件的写法\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e testsContext = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.context(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/specs\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \/\\.spec$\/)\ntestsContext.keys().forEach(testsContext)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载所有代码文件，方便统计代码覆盖率\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e srcContext = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e.context(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/src\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \/^\\.\\\/(?!main(\\.js)?$)\/)\nsrcContext.keys().forEach(srcContext)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22config.set({\n    \/\/ 在几个环境里跑你的测试用例\n    \/\/ browsers: [\x27PhantomJS\x27,\x27Chrome\x27], \n    browsers: [\x27Chrome\x27],\n    \/\/ 默认加载几个框架\n    frameworks: [\x27mocha\x27, \x27sinon-chai\x27, \x27phantomjs-shim\x27],\n    \/\/ 使用那些汇报框架\n    reporters: [\x27spec\x27, \x27coverage\x27],\n    \/\/ 预加载文件\n    files: [\x27.\/index.js\x27],\n    \/\/ 预处理\n    preprocessors: {\n      \x27.\/index.js\x27: [\x27webpack\x27, \x27sourcemap\x27]\n    },\n    \/\/ webpack 配置\n    webpack: webpackConfig,\n    webpackMiddleware: {\n      noInfo: true\n    },\n    \/\/ coverage 配置\n    coverageReporter: {\n      dir: \x27.\/coverage\x27,\n      reporters: [\n        { type: \x27lcov\x27, subdir: \x27.\x27 },\n        { type: \x27text-summary\x27 }\n      ]\n    }\n  })\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3econfig.set({\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在几个环境里跑你的测试用例\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ browsers: [\x27PhantomJS\x27,\x27Chrome\x27], \x3c\/span\x3e\n    browsers: [\x3cspan class=\x22hljs-string\x22\x3e\x27Chrome\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认加载几个框架\x3c\/span\x3e\n    frameworks: [\x3cspan class=\x22hljs-string\x22\x3e\x27mocha\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27sinon-chai\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27phantomjs-shim\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用那些汇报框架\x3c\/span\x3e\n    reporters: [\x3cspan class=\x22hljs-string\x22\x3e\x27spec\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27coverage\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预加载文件\x3c\/span\x3e\n    files: [\x3cspan class=\x22hljs-string\x22\x3e\x27.\/index.js\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 预处理\x3c\/span\x3e\n    preprocessors: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27.\/index.js\x27\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27sourcemap\x27\x3c\/span\x3e]\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack 配置\x3c\/span\x3e\n    webpack: webpackConfig,\n    \x3cspan class=\x22hljs-attr\x22\x3ewebpackMiddleware\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3enoInfo\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ coverage 配置\x3c\/span\x3e\n    coverageReporter: {\n      \x3cspan class=\x22hljs-attr\x22\x3edir\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/coverage\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ereporters\x3c\/span\x3e: [\n        { \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27lcov\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3esubdir\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\x27\x3c\/span\x3e },\n        { \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27text-summary\x27\x3c\/span\x3e }\n      ]\n    }\n  })\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面使用的插件例如 mocha、spec、coverage除了karma默认自带的都需要你在npm\x3cbr\x3e上安装对应的插件，例如以下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x26quot;karma\x26quot;: \x26quot;^1.4.1\x26quot;,\n    \x26quot;karma-chrome-launcher\x26quot;: \x26quot;^2.2.0\x26quot;,\n    \x26quot;karma-coverage\x26quot;: \x26quot;^1.1.1\x26quot;,\n    \x26quot;karma-mocha\x26quot;: \x26quot;^1.3.0\x26quot;,\n    \x26quot;karma-phantomjs-launcher\x26quot;: \x26quot;^1.0.2\x26quot;,\n    \x26quot;karma-phantomjs-shim\x26quot;: \x26quot;^1.4.0\x26quot;,\n    \x26quot;karma-sinon-chai\x26quot;: \x26quot;^1.3.1\x26quot;,\n    \x26quot;karma-sourcemap-loader\x26quot;: \x26quot;^0.3.7\x26quot;,\n    \x26quot;karma-spec-reporter\x26quot;: \x26quot;0.0.31\x26quot;,\n    \x26quot;karma-webpack\x26quot;: \x26quot;^2.0.2\x26quot;,\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x3cspan class=\x22hljs-string\x22\x3e\x22karma\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.4.1\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-chrome-launcher\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^2.2.0\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-coverage\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.1.1\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-mocha\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.3.0\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-phantomjs-launcher\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.0.2\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-phantomjs-shim\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.4.0\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-sinon-chai\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^1.3.1\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-sourcemap-loader\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^0.3.7\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-spec-reporter\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x220.0.31\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22karma-webpack\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22^2.0.2\x22\x3c\/span\x3e,\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e vue-exampl@1.0.0 unit \/Users\/xiaorenhui\/work\/vueExample\n\x3e cross-env BABEL_ENV=test karma start test\/unit\/karma.conf.js --single-run\n\n07 09 2017 12:08:13.004:INFO [karma]: Karma v1.7.0 server started at http:\/\/0.0.0.0:9876\/\n07 09 2017 12:08:13.007:INFO [launcher]: Launching browser Chrome with unlimited concurrency\n07 09 2017 12:08:13.015:INFO [launcher]: Starting browser Chrome\n07 09 2017 12:08:15.475:INFO [Chrome 60.0.3112 (Mac OS X 10.12.3)]: Connected on socket qDaxr51TuQCfQBcVAAAA with id 73077049\nINFO LOG: \x27Download the Vue Devtools extension for a better development experience:\nhttps:\/\/github.com\/vuejs\/vue-devtools\x27\nLOG LOG: \x27data\x27\n\n  Hello.vue\n    ✓ should render correct contents\n\nChrome 60.0.3112 (Mac OS X 10.12.3): Executed 1 of 1 SUCCESS (0.024 secs \/ 0.011 secs)\nTOTAL: 1 SUCCESS\n\n\n=============================== Coverage summary ===============================\nStatements   : 60% ( 3\/5 )\nBranches     : 50% ( 1\/2 )\nFunctions    : 0% ( 0\/1 )\nLines        : 60% ( 3\/5 )\n================================================================================\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x26gt; vue-exampl@1.0.0 unit \/Users\/xiaorenhui\/work\/vueExample\n\x26gt; cross-env BABEL_ENV=\x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e karma start \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e\/unit\/karma.conf.js --single-run\n\n07 09 2017 12:08:13.004:INFO [karma]: Karma v1.7.0 server started at http:\/\/0.0.0.0:9876\/\n07 09 2017 12:08:13.007:INFO [launcher]: Launching browser Chrome with unlimited concurrency\n07 09 2017 12:08:13.015:INFO [launcher]: Starting browser Chrome\n07 09 2017 12:08:15.475:INFO [Chrome 60.0.3112 (Mac OS X 10.12.3)]: Connected on socket qDaxr51TuQCfQBcVAAAA with id 73077049\nINFO LOG: \x3cspan class=\x22hljs-string\x22\x3e\x27Download the Vue Devtools extension for a better development experience:\nhttps:\/\/github.com\/vuejs\/vue-devtools\x27\x3c\/span\x3e\nLOG LOG: \x3cspan class=\x22hljs-string\x22\x3e\x27data\x27\x3c\/span\x3e\n\n  Hello.vue\n    ✓ should render correct contents\n\nChrome 60.0.3112 (Mac OS X 10.12.3): Executed 1 of 1 SUCCESS (0.024 secs \/ 0.011 secs)\nTOTAL: 1 SUCCESS\n\n\n=============================== Coverage summary ===============================\nStatements   : 60% ( 3\/5 )\nBranches     : 50% ( 1\/2 )\nFunctions    : 0% ( 0\/1 )\nLines        : 60% ( 3\/5 )\n================================================================================\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我修改了一下Hello.vue这个组件，可以看到coverage 里精确的显示了测试代码的覆盖率,下面是我做的修改\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default {\n  name: \x27hello\x27,\n  data () {\n      console.log(\x27data\x27);\n      function aa() {\n\n      }\n      if(false){\n          console.log(\x27data aa\x27);\n      }\n    return {\n      msg: \x27Welcome to Your Vue.js App\x27\n    }\n  },\n  methods:{\n      aa(){\n          console.log(\x27methods aa\x27);\n      }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hello\x27\x3c\/span\x3e,\n  data () {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27data\x27\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eaa\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e){\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27data aa\x27\x3c\/span\x3e);\n      }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3emsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Welcome to Your Vue.js App\x27\x3c\/span\x3e\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e:{\n      aa(){\n          \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27methods aa\x27\x3c\/span\x3e);\n      }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUzUh?w=1423\x26amp;h=187\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUzUh?w=1423\x26amp;h=187\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e打开reporter下面的index.html我们可以看到代码覆盖的具体情况。\x3cbr\x3e点开Hello.vue更有直观的方式展示哪些代码被覆盖了，哪些没有。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUzUI?w=474\x26amp;h=363\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUzUI?w=474\x26amp;h=363\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3ee2e测试\x3c\/h2\x3e\n\x3cp\x3e既然我们已经有了单元测试，那e2e测试有和单元测试有什么区别呢？Nightwatch是前端e2e测试的一个有代表性的框架。单元测试TDD的粒度很细，我们会为许多函数、方法去写单元测试，而e2e更接近BDD。直白点说，就是TDD的测试单元是一个个函数、方法，而BDD测试的单元是一个个预期的行为表现。e2e做的事情就是打开浏览器，并且真正的访问我们最终的页面，然后在这个真实的浏览器、真实的页面中我们去做各种断言，而单元测试不会要去我们去访问最终的页面，单元测试要保证的是一个个单元是没有问题的，但这些单元组合起来跑在页面上是否有问题，不是单元测试能够保证的，尤其是在前端这种模拟环境、模拟输入非常复杂的领域中，这是单元测试的短板，而e2e测试就是用来解决这些短板的。\x3c\/p\x3e\n\x3cp\x3e我们来看看项目中使用Nightwatch来进行e2e测试的例子\x3c\/p\x3e\n\x3cp\x3e首先看一下目录\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── e2e\n│   ├── custom-assertions\n│   │   └── elementCount.js 自定义的断言方法\n│   ├── nightwatch.conf.js nightwatch的配置文件\n│   ├── reports \n│   │   ├── CHROME_60.0.3112.101_Mac\\ OS\\ X_test.xml\n│   │   └── CHROME_60.0.3112.113_Mac\\ OS\\ X_test.xml\n│   ├── runner.js  bootstrap文件，起我们的页面server和nightwatch文件\n│   └── specs\n│       └── test.js 测试用例\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e├── e2e\n│   ├── custom-assertions\n│   │   └── elementCount.js 自定义的断言方法\n│   ├── nightwatch.conf.js nightwatch的配置文件\n│   ├── reports \n│   │   ├── CHROME_60.0.3112.101_Mac\\ OS\\ X_test.xml\n│   │   └── CHROME_60.0.3112.113_Mac\\ OS\\ X_test.xml\n│   ├── runner.js  bootstrap文件，起我们的页面server和nightwatch文件\n│   └── specs\n│       └── test.js 测试用例\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUzUN?w=799\x26amp;h=336\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUzUN?w=799\x26amp;h=336\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3eselenium是一个用java写的e2e测试工具集，它的API被纳入 w3c的webDriver Api中， nightWatch是对selenium的一个nodejs封装。所有我们需要再配置文件中配置selenium。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  src_folders: [\x27test\/e2e\/specs\x27],\n  output_folder: \x27test\/e2e\/reports\x27,\n  custom_assertions_path: [\x27test\/e2e\/custom-assertions\x27],\n    \/\/ 对selenium的配置\n  selenium: {\n    start_process: true,\n    server_path: require(\x27selenium-server\x27).path,\n    host: \x27127.0.0.1\x27,\n    port: 4444,\n    cli_args: {\n      \x27webdriver.chrome.driver\x27: require(\x27chromedriver\x27).path\n    }\n  },\n    \/\/ 测试环境的配置\n  test_settings: {\n    default: {\n      selenium_port: 4444,\n      selenium_host: \x27localhost\x27,\n      silent: true,\n      globals: {\n        devServerURL: \x27http:\/\/localhost:\x27 \x2b (process.env.PORT || config.dev.port)\n      }\n    },\n\n    chrome: {\n      desiredCapabilities: {\n        browserName: \x27chrome\x27,\n        javascriptEnabled: true,\n        acceptSslCerts: true\n      }\n    },\n\n    firefox: {\n      desiredCapabilities: {\n        browserName: \x27firefox\x27,\n        javascriptEnabled: true,\n        acceptSslCerts: true\n      }\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  src_folders: [\x3cspan class=\x22hljs-string\x22\x3e\x27test\/e2e\/specs\x27\x3c\/span\x3e],\n  \x3cspan class=\x22hljs-attr\x22\x3eoutput_folder\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test\/e2e\/reports\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ecustom_assertions_path\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27test\/e2e\/custom-assertions\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对selenium的配置\x3c\/span\x3e\n  selenium: {\n    \x3cspan class=\x22hljs-attr\x22\x3estart_process\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eserver_path\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27selenium-server\x27\x3c\/span\x3e).path,\n    \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27127.0.0.1\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eport\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4444\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecli_args\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27webdriver.chrome.driver\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chromedriver\x27\x3c\/span\x3e).path\n    }\n  },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 测试环境的配置\x3c\/span\x3e\n  test_settings: {\n    \x3cspan class=\x22hljs-attr\x22\x3edefault\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3eselenium_port\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4444\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eselenium_host\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27localhost\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3esilent\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eglobals\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3edevServerURL\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:\x27\x3c\/span\x3e \x2b (process.env.PORT || config.dev.port)\n      }\n    },\n\n    \x3cspan class=\x22hljs-attr\x22\x3echrome\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3edesiredCapabilities\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ebrowserName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27chrome\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ejavascriptEnabled\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eacceptSslCerts\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      }\n    },\n\n    \x3cspan class=\x22hljs-attr\x22\x3efirefox\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3edesiredCapabilities\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ebrowserName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27firefox\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ejavascriptEnabled\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eacceptSslCerts\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      }\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面的runner需要先起一个我们的网页服务然后再起nightWatch服务\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var server = require(\x27..\/..\/build\/dev-server.js\x27)\n\nserver.ready.then(() =\x3e {\n  \/\/ 2. run the nightwatch test suite against it\n  \/\/ to run in additional browsers:\n  \/\/    1. add an entry in test\/e2e\/nightwatch.conf.json under \x26quot;test_settings\x26quot;\n  \/\/    2. add it to the --env flag below\n  \/\/ or override the environment flag, for example: `npm run e2e -- --env chrome,firefox`\n  \/\/ For more information on Nightwatch\x27s config file, see\n  \/\/ http:\/\/nightwatchjs.org\/guide#settings-file\n  var opts = process.argv.slice(2)\n    console.log(opts);\n  if (opts.indexOf(\x27--config\x27) === -1) {\n    opts = opts.concat([\x27--config\x27, \x27test\/e2e\/nightwatch.conf.js\x27])\n  }\n  if (opts.indexOf(\x27--env\x27) === -1) {\n    opts = opts.concat([\x27--env\x27, \x27chrome,firefox\x27])\n  }\n\n  var spawn = require(\x27cross-spawn\x27)\n  var runner = spawn(\x27.\/node_modules\/.bin\/nightwatch\x27, opts, { stdio: \x27inherit\x27 })\n\n  runner.on(\x27exit\x27, function (code) {\n    server.close()\n    process.exit(code)\n  })\n\n  runner.on(\x27error\x27, function (err) {\n    server.close()\n    throw err\n  })\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e server = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/..\/build\/dev-server.js\x27\x3c\/span\x3e)\n\nserver.ready.then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2. run the nightwatch test suite against it\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ to run in additional browsers:\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/    1. add an entry in test\/e2e\/nightwatch.conf.json under \x22test_settings\x22\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/    2. add it to the --env flag below\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ or override the environment flag, for example: `npm run e2e -- --env chrome,firefox`\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ For more information on Nightwatch\x27s config file, see\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ http:\/\/nightwatchjs.org\/guide#settings-file\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e opts = process.argv.slice(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(opts);\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (opts.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27--config\x27\x3c\/span\x3e) === \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n    opts = opts.concat([\x3cspan class=\x22hljs-string\x22\x3e\x27--config\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27test\/e2e\/nightwatch.conf.js\x27\x3c\/span\x3e])\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (opts.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27--env\x27\x3c\/span\x3e) === \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n    opts = opts.concat([\x3cspan class=\x22hljs-string\x22\x3e\x27--env\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27chrome,firefox\x27\x3c\/span\x3e])\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e spawn = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27cross-spawn\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e runner = spawn(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/node_modules\/.bin\/nightwatch\x27\x3c\/span\x3e, opts, { \x3cspan class=\x22hljs-attr\x22\x3estdio\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27inherit\x27\x3c\/span\x3e })\n\n  runner.on(\x3cspan class=\x22hljs-string\x22\x3e\x27exit\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecode\x3c\/span\x3e) \x3c\/span\x3e{\n    server.close()\n    process.exit(code)\n  })\n\n  runner.on(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n    server.close()\n    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3esudo npm run e2e后\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3e node test\/e2e\/runner.js\n\n\x3e Starting dev server...\n\nStarting to optimize CSS...\n\x3e Listening at http:\/\/localhost:8080\n\n[]\nStarting selenium server... started - PID:  74459\n\n[Test] Test Suite\n=====================\n\nRunning:  default e2e tests\n ✔ Element \x3c#app\x3e was visible after 81 milliseconds.\n ✔ Testing if element \x3c.hello\x3e is present.\n ✔ Testing if element \x3ch1\x3e contains text: \x26quot;Welcome to Your Vue.js App\x26quot;.\n ✔ Testing if element \x3cimg\x3e has count: 1\n\nOK. 4 assertions passed. (3.951s)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26gt; node test\/e2e\/runner.js\n\n\x26gt; Starting dev server...\n\nStarting to optimize CSS...\n\x26gt; Listening at http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/localhost:8080\x3c\/span\x3e\n\n[]\nStarting selenium server... started - PID:  \x3cspan class=\x22hljs-number\x22\x3e74459\x3c\/span\x3e\n\n[Test] Test Suite\n=====================\n\nRunning:  \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e e2e tests\n ✔ Element \x26lt;#app\x26gt; was visible after \x3cspan class=\x22hljs-number\x22\x3e81\x3c\/span\x3e milliseconds.\n ✔ Testing \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e element \x26lt;.hello\x26gt; is present.\n ✔ Testing \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e element \x26lt;h1\x26gt; contains text: \x3cspan class=\x22hljs-string\x22\x3e\x22Welcome to Your Vue.js App\x22\x3c\/span\x3e.\n ✔ Testing \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e element \x26lt;img\x26gt; has count: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\nOK. \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e assertions passed. (\x3cspan class=\x22hljs-number\x22\x3e3.951\x3c\/span\x3es)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在控制台上我们能看到各种断言的结果\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Vue项目的自动化测试</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011062084">https://segmentfault.com/a/1190000011062084</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/jms3prsfpm/" target="_blank">https://alili.tech/archive/jms3prsfpm/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>