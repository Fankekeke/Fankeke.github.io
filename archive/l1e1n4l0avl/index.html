<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="centos安装使用puppeteer和headless chrome"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>centos安装使用puppeteer和headless chrome | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/l1e1n4l0avl/",
				"appid": "1613049289050283", 
				"title": "centos安装使用puppeteer和headless chrome | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-30T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/w5ttgsqb9h/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/78alp3z50lo/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&text=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&text=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&title=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&is_video=false&description=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&title=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&title=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&title=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fl1e1n4l0avl%2f&title=centos%e5%ae%89%e8%a3%85%e4%bd%bf%e7%94%a8puppeteer%e5%92%8cheadless%20chrome"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">centos安装使用puppeteer和headless chrome</h1><div class="meta"><div class="postdate"><time datetime="2018-12-30" itemprop="datePublished">2018-12-30</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3eGoogle推出了无图形界面的headless Chrome之后，可以直接在远程服务器上直接跑一些测试脚本或者爬虫脚本了，猴开心！Google还附送了\x3ca href=\x22https:\/\/github.com\/GoogleChrome\/puppeteer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePuppeteer\x3c\/a\x3e用于驱动没头的Chome。\x3c\/p\x3e\n\x3cp\x3e阿里的Macaca也顺势写了\x3ca href=\x22https:\/\/github.com\/macacajs\/macaca-puppeteer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMacaca-puppeteer\x3c\/a\x3e，可以在Macaca上直接写通用的测试用例，在开发机上用图形界面看效果，上服务器走生产，岂不是美滋滋。\x3c\/p\x3e\n\x3cp\x3e然鹅，可达鸭眉头一皱，发现事情并没有那么简单。\x3c\/p\x3e\n\x3cp\x3e在阿里云的Centos 7.3上，安装puppeteer之后，会发现并不能启动官方的example：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const puppeteer = require(\x27puppeteer\x27);\n\n(async () =\x3e {\n  const browser = await puppeteer.launch();\n  const page = await browser.newPage();\n  await page.goto(\x27https:\/\/example.com\x27);\n  await page.screenshot({path: \x27example.png\x27});\n\n  await browser.close();\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22Javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e puppeteer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27puppeteer\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e (\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e browser = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e puppeteer.launch();\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e page = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e browser.newPage();\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.goto(\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/example.com\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.screenshot({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27example.png\x27\x3c\/span\x3e});\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e browser.close();\n})();\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e依赖安装\x3c\/h2\x3e\n\x3cp\x3e仔细看错误栈，核心的错误是如下一段：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e...node_modules\/puppeteer\/.local-chromium\/linux-496140\/chrome-linux\/chrome: error while loading shared libraries: libpangocairo-1.0.so.0: cannot open shared object file: No such file or directory\x3c\/p\x3e\n\x3cp\x3eTROUBLESHOOTING: \x3ca href=\x22https:\/\/github.com\/GoogleChrome\/puppeteer\/blob\/master\/docs\/troubleshooting.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/GoogleChro...\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e原来puppet虽然帮你下了一个Chromium，但并没有帮你把依赖都装好。于是你要自己把那些so都装好。\x3c\/p\x3e\n\x3cp\x3e官方给的是Ubuntu版本的各个so包的apt-get安装方式，centos版本居然没有放！于是遍历了各个issue之后，终于发现还是有人给出了centos的库名，在一个\x3ca href=\x22https:\/\/github.com\/GoogleChrome\/puppeteer\/issues\/560#issuecomment-325224766\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看起来并不相关的issue里\x3c\/a\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#依赖库\nyum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y\n\n#字体\nyum install ipa-gothic-fonts xorg-x11-fonts-100dpi xorg-x11-fonts-75dpi xorg-x11-utils xorg-x11-fonts-cyrillic xorg-x11-fonts-Type1 xorg-x11-fonts-misc -y\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e#依赖库\x3c\/span\x3e\nyum install pango.x86_64 libXcomposite.x86_64 libXcursor.x86_64 libXdamage.x86_64 libXext.x86_64 libXi.x86_64 libXtst.x86_64 cups-libs.x86_64 libXScrnSaver.x86_64 libXrandr.x86_64 GConf2.x86_64 alsa-lib.x86_64 atk.x86_64 gtk3.x86_64 -y\n\n\x3cspan class=\x22hljs-comment\x22\x3e#字体\x3c\/span\x3e\nyum install ipa-gothic-fonts xorg-x11-fonts-100dpi xorg-x11-fonts-75dpi xorg-x11-utils xorg-x11-fonts-cyrillic xorg-x11-fonts-Type1 xorg-x11-fonts-misc -y\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e总算不用挨个去google了……\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3esandbox去沙箱\x3c\/h2\x3e\n\x3cp\x3e这时候你再去执行脚本，发现还是跑不起来。但是报错终于变了。这个时候变成了一个莫名其妙的错误：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(node:30559) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): Error: Failed to connect to chrome!\n(node:30559) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3e(\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e:30559\x3c\/span\x3e) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e): Error: Failed to connect to chrome!\n(\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e\x3cspan class=\x22hljs-title\x22\x3e:30559\x3c\/span\x3e) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. \x3cspan class=\x22hljs-keyword\x22\x3eIn\x3c\/span\x3e the future, promise rejections that are not handled will terminate the \x3cspan class=\x22hljs-keyword\x22\x3eNode\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3ejs\x3c\/span\x3e process with a non-zero exit code.\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e要疯掉了有没有，这啥玩意啊！！！！关键是这时候另外一个\x3ca href=\x22https:\/\/github.com\/GoogleChrome\/puppeteer\/issues\/290\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看起来是解决上面问题的issue\x3c\/a\x3e，对这个错误进行了详细的讨论，然而直到今天（2017年9月27日）并没有讨论出什么结果。\x3c\/p\x3e\n\x3cp\x3e网上很多讨论是说，直接调试那个Chrome。按照并不能解决问题的说法：直接去puppeteer的目录找到.local-chrome里面的Chromium执行文件，直接执行\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\/chrome -v --no-sandbox --disable-setuid-sandbox\n\n(chrome:5333): Gtk-WARNING **: cannot open display: \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e.\/chrome -v --\x3cspan class=\x22hljs-keyword\x22\x3eno\x3c\/span\x3e-\x3cspan class=\x22hljs-keyword\x22\x3esandbox\x3c\/span\x3e --disable-setuid-\x3cspan class=\x22hljs-keyword\x22\x3esandbox\x3c\/span\x3e\n\n(chrome:\x3cspan class=\x22hljs-number\x22\x3e5333\x3c\/span\x3e): Gtk-WARNING **: cannot \x3cspan class=\x22hljs-keyword\x22\x3eopen\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edisplay\x3c\/span\x3e: \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e发现加上了\x3ccode\x3e--no-sanbox\x3c\/code\x3e其实是能启动的，但是提示没有Gtk图形界面，那干脆加上--headless是不是就行了嘞？确实没有报错了。\x3c\/p\x3e\n\x3cp\x3e回到puppeteer示例脚本，修改启动浏览器的代码，加上args：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const puppeteer = require(\x27puppeteer\x27);\n\n(async () =\x3e {\n  const browser = await puppeteer.launch({args: [\x27--no-sandbox\x27, \x27--disable-setuid-sandbox\x27]});\n  const page = await browser.newPage();\n  await page.goto(\x27https:\/\/example.com\x27);\n  await page.screenshot({path: \x27example.png\x27});\n\n  await browser.close();\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22Javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e puppeteer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27puppeteer\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e (\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e browser = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e puppeteer.launch({\x3cspan class=\x22hljs-attr\x22\x3eargs\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27--no-sandbox\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27--disable-setuid-sandbox\x27\x3c\/span\x3e]});\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e page = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e browser.newPage();\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.goto(\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/example.com\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e page.screenshot({\x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27example.png\x27\x3c\/span\x3e});\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e browser.close();\n})();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e啊哈，终于执行成功了。下载下来了example.com的截图看了一眼，简直泪流满面。\x3c\/p\x3e\n\x3cp\x3e回想一下，Puppet本身估计自带了--headless，所以如果直接去命令行执行chrome，还是要带上--headless。\x3c\/p\x3e\n\x3cp\x3e终于搞定这一切发现Macaca顺便还提供了一个\x3ca href=\x22https:\/\/github.com\/macacajs\/macaca-puppeteer-docker\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e基于Ubuntu的Macaca-puppeteer的Docker\x3c\/a\x3e，艾玛这方便太多了，早知道不自己折腾了。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>centos安装使用puppeteer和headless chrome</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011382062">https://segmentfault.com/a/1190000011382062</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/l1e1n4l0avl/" target="_blank">https://alili.tech/archive/l1e1n4l0avl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>