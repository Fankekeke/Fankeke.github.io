<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="如何优雅的设计 React 组件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>如何优雅的设计 React 组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/lt3jbwg0rt9/",
				"appid": "1613049289050283", 
				"title": "如何优雅的设计 React 组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-26T02:30:14"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/u53u6ttxdcd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/0lrkurkvlb4/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&text=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&text=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&title=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&is_video=false&description=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&title=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&title=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&title=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2flt3jbwg0rt9%2f&title=%e5%a6%82%e4%bd%95%e4%bc%98%e9%9b%85%e7%9a%84%e8%ae%be%e8%ae%a1%20React%20%e7%bb%84%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">如何优雅的设计 React 组件</h1><div class="meta"><div class="postdate"><time datetime="2018-12-26" itemprop="datePublished">2018-12-26</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\x3cp\x3e作者：晓冬\x3cbr\x3e本文原创，转载请注明作者及出处\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e如今的 Web 前端已被 React、Vue 和 Angular 三分天下，一统江山十几年的 jQuery 显然已经很难满足现在的开发模式。那么，为什么大家会觉得 jQuery “过时了”呢？一来，文章《\x3ca href=\x22https:\/\/www.sitepoint.com\/dom-manipulation-vanilla-javascript-no-jquery\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNo JQuery! 原生 JavaScript 操作 DOM\x3c\/a\x3e》就直截了当的告诉你，现在用原生 JavaScript 可以非常方便的操作 DOM 了。其次，jQuery 的便利性是建立在有一个基础  DOM 结构的前提下的，看上去是符合了样式、行为和结构分离，但其实 DOM 结构和 JavaScript 的代码逻辑是耦合的，你的开发思路会不断的在 DOM 结构和 JavaScript 之间来回切换。\x3c\/p\x3e\n\x3cp\x3e尽管现在的 jQuery 已不再那么流行，但 jQuery 的设计思想还是非常值得致敬和学习的，特别是 jQuery 的插件化。如果大家开发过 jQuery 插件的话，想必都会知道，一个插件要足够灵活，需要有细颗粒度的参数化设计。一个灵活好用的 React 组件跟 jQuery 插件一样，都离不开合理的属性化（\x3ccode\x3eprops\x3c\/code\x3e）设计，但 React 组件的拆分和组合比起 jQuery 插件来说还是简单的令人发指。\x3c\/p\x3e\n\x3cp\x3eSo! 接下来我们就以万能的 TODO LIST 为例，一起来设计一款 React 的 \x3ccode\x3eTodoList\x3c\/code\x3e 组件吧！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e实现基本功能\x3c\/h2\x3e\n\x3cp\x3eTODO LIST 的功能想必我们应该都比较了解，也就是 TODO 的添加、删除、修改等等。本身的功能也比较简单，为了避免示例的复杂度，显示不同状态 TODO LIST 的导航（全部、已完成、未完成）的功能我们就不展开了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e约定目录结构\x3c\/h3\x3e\n\x3cp\x3e先假设我们已经拥有一个可以运行 React 项目的脚手架（ha~ 因为我不是来教你如何搭建脚手架的），然后项目的源码目录 \x3ccode\x3esrc\/\x3c\/code\x3e 下可能是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── components\n├── containers\n│   └── App\n│       ├── app.scss\n│       └── index.js\n├── index.html\n└── index.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22shell\x22\x3e.\n├── components\n├── containers\n│   └── App\n│       ├── app\x3cspan class=\x22hljs-selector-class\x22\x3e.scss\x3c\/span\x3e\n│       └── index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├── index\x3cspan class=\x22hljs-selector-class\x22\x3e.html\x3c\/span\x3e\n└── index.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们先来简单解释下这个目录设定。我们看到根目录下的 \x3ccode\x3eindex.js\x3c\/code\x3e 文件是整个项目的入口模块，入口模块将会处理 DOM 的渲染和 React 组件的热更新（\x3ca href=\x22https:\/\/github.com\/gaearon\/react-hot-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-hot-loader\x3c\/a\x3e）等设置。然后，\x3ccode\x3eindex.html\x3c\/code\x3e 是页面的 HTML 模版文件，这 2 个部分不是我们这次关心的重点，我们不再展开讨论。\x3c\/p\x3e\n\x3cp\x3e入口模块 \x3ccode\x3eindex.js\x3c\/code\x3e 的代码大概是这样子的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ import reset css, base css...\n\nimport React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\nimport { AppContainer } from \x27react-hot-loader\x27;\nimport App from \x27containers\/App\x27;\n\nconst render = (Component) =\x3e {\n  ReactDom.render(\n    \x3cAppContainer\x3e\n      \x3cComponent \/\x3e\n    \x3c\/AppContainer\x3e,\n    document.getElementById(\x27app\x27)\n  );\n};\n\nrender(App);\n\nif (module.hot) {\n  module.hot.accept(\x27containers\/App\x27, () =\x3e {\n    let nextApp = require(\x27containers\/App\x27).default;\n    \n    render(nextApp);\n  });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ import reset css, base css...\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { AppContainer } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-hot-loader\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27containers\/App\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e render = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eComponent\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  ReactDom.render(\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eAppContainer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eComponent\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eAppContainer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e)\n  );\n};\n\nrender(App);\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot) {\n  \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot.accept(\x3cspan class=\x22hljs-string\x22\x3e\x27containers\/App\x27\x3c\/span\x3e, () =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e nextApp = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27containers\/App\x27\x3c\/span\x3e).default;\n    \n    render(nextApp);\n  });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e接下来看 \x3ccode\x3econtainers\/\x3c\/code\x3e 目录，它将放置我们的页面容器组件，业务逻辑、数据处理等会在这一层做处理，\x3ccode\x3econtainers\/App\x3c\/code\x3e 将作为我们的页面主容器组件。作为通用组件，我们将它们放置于  \x3ccode\x3ecomponents\/\x3c\/code\x3e 目录下。\x3c\/p\x3e\n\x3cp\x3e基本的目录结构看起来已经完成，接下来我们实现下主容器组件 \x3ccode\x3econtainers\/App\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e实现主容器\x3c\/h3\x3e\n\x3cp\x3e我们先来看下主容器组件 \x3ccode\x3econtainers\/App\/index.js\x3c\/code\x3e 最初的代码实现：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, { Component } from \x27react\x27;\nimport styles from \x27.\/app.scss\x27;\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      todos: []\n    };\n  }\n\n  render() {\n    return (\n      \x3cdiv className={styles.container}\x3e\n        \x3ch2 className={styles.header}\x3eTodo List Demo\x3c\/h2\x3e\n        \x3cdiv className={styles.content}\x3e\n          \x3cheader className={styles[\x27todo-list-header\x27]}\x3e\n            \x3cinput \n              type=\x26quot;text\x26quot;\n              className={styles.input}\n              ref={(input) =\x3e this.input = input} \n            \/\x3e\n            \x3cbutton \n              className={styles.button} \n              onClick={() =\x3e this.handleAdd()}\n            \x3e\n              Add Todo\n            \x3c\/button\x3e\n          \x3c\/header\x3e\n          \x3csection className={styles[\x27todo-list-content\x27]}\x3e\n            \x3cul className={styles[\x27todo-list-items\x27]}\x3e\n              {this.state.todos.map((todo, i) =\x3e (\n                \x3cli key={`${todo.text}-${i}`}\x3e\n                  \x3cem \n                    className={todo.completed ? styles.completed : \x27\x27} \n                    onClick={() =\x3e this.handleStateChange(i)}\n                  \x3e\n                    {todo.text}\n                  \x3c\/em\x3e\n                  \x3cbutton \n                    className={styles.button} \n                    onClick={() =\x3e this.handleRemove(i)}\n                  \x3e\n                    Remove\n                  \x3c\/button\x3e\n                \x3c\/li\x3e\n              ))}\n            \x3c\/ul\x3e\n          \x3c\/section\x3e\n        \x3c\/div\x3e\n      \x3c\/div\x3e\n    );\n  }\n\n  handleAdd() {\n    ...\n  }\n\n  handleRemove(index) {\n    ...\n  }\n\n  handleStateChange(index) {\n    ...\n  }\n}\n\nexport default App;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, { Component } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e styles \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/app.scss\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n      \x3cspan class=\x22hljs-attr\x22\x3etodos\x3c\/span\x3e: []\n    };\n  }\n\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.container}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.header}\x3c\/span\x3e\x26gt;\x3c\/span\x3eTodo List Demo\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.content}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles[\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3etodo-list-header\x3c\/span\x3e\x27]}\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \n              \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e\n              \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.input}\x3c\/span\x3e\n              \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{(input)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.input = input} \n            \/\x26gt;\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \n              \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.button}\x3c\/span\x3e \n              \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.handleAdd()}\n            \x26gt;\n              Add Todo\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles[\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3etodo-list-content\x3c\/span\x3e\x27]}\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles[\x3c\/span\x3e\x27\x3cspan class=\x22hljs-attr\x22\x3etodo-list-items\x3c\/span\x3e\x27]}\x26gt;\x3c\/span\x3e\n              {this.state.todos.map((todo, i) =\x26gt; (\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e`${\x3cspan class=\x22hljs-attr\x22\x3etodo.text\x3c\/span\x3e}\x3cspan class=\x22hljs-attr\x22\x3e-\x3c\/span\x3e${\x3cspan class=\x22hljs-attr\x22\x3ei\x3c\/span\x3e}`}\x26gt;\x3c\/span\x3e\n                  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e \n                    \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{todo.completed\x3c\/span\x3e ? \x3cspan class=\x22hljs-attr\x22\x3estyles.completed\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x27\x27} \n                    \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.handleStateChange(i)}\n                  \x26gt;\n                    {todo.text}\n                  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \n                    \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.button}\x3c\/span\x3e \n                    \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.handleRemove(i)}\n                  \x26gt;\n                    Remove\n                  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n              ))}\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n\n  handleAdd() {\n    ...\n  }\n\n  handleRemove(index) {\n    ...\n  }\n\n  handleStateChange(index) {\n    ...\n  }\n}\n\nexport default App;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们可以像上面这样把所有的业务逻辑一股脑的塞进主容器中，但我们要考虑到主容器随时会组装其他的组件进来，将各种逻辑堆放在一起，到时候这个组件就会变得无比庞大，直到“无法收拾”。所以，我们得分离出一个独立的 \x3ccode\x3eTodoList\x3c\/code\x3e 组件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e分离组件\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eTodoList 组件\x3c\/h3\x3e\n\x3cp\x3e在 \x3ccode\x3ecomponents\/\x3c\/code\x3e 目录下，我们新建一个 \x3ccode\x3eTodoList\x3c\/code\x3e 文件夹以及相关文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── components\n\x2b│   └── TodoList\n\x2b│       ├── index.js\n\x2b│       └── todo-list.scss\n├── containers\n│   └── App\n│       ├── app.scss\n│       └── index.js\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e.\n├── components\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   └── TodoList\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       ├── index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       └── todo-list.scss\x3c\/span\x3e\n├── containers\n│   └── App\n│       ├── app.scss\n│       └── index.js\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们将 \x3ccode\x3econtainers\/App\/index.js\x3c\/code\x3e 下跟 \x3ccode\x3eTodoList\x3c\/code\x3e 组件相关的功能抽离到 \x3ccode\x3ecomponents\/TodoList\/index.js\x3c\/code\x3e 中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nimport styles from \x27.\/todo-list.scss\x27;\n\nexport default class TodoList extends Component {\n  ...\n  \n  render() {\n    return (\n      \x3cdiv className={styles.container}\x3e\n-       \x3cheader className={styles[\x27todo-list-header\x27]}\x3e\n\x2b       \x3cheader className={styles.header}\x3e\n          \x3cinput \n            type=\x26quot;text\x26quot;\n            className={styles.input}\n            ref={(input) =\x3e this.input = input} \n          \/\x3e\n          \x3cbutton \n            className={styles.button} \n            onClick={() =\x3e this.handleAdd()}\n          \x3e\n            Add Todo\n          \x3c\/button\x3e\n        \x3c\/header\x3e\n-       \x3csection className={styles[\x27todo-list-content\x27]}\x3e\n\x2b       \x3csection className={styles.content}\x3e\n-         \x3cul className={styles[\x27todo-list-items\x27]}\x3e\n\x2b         \x3cul className={styles.items}\x3e\n            {this.state.todos.map((todo, i) =\x3e (\n              \x3cli key={`${todo}-${i}`}\x3e\n                \x3cem \n                  className={todo.completed ? styles.completed : \x27\x27} \n                  onClick={() =\x3e this.handleStateChange(i)}\n                \x3e\n                  {todo.text}\n                \x3c\/em\x3e\n                \x3cbutton \n                  className={styles.button} \n                  onClick={() =\x3e this.handleRemove(i)}\n                \x3e\n                  Remove\n                \x3c\/button\x3e\n              \x3c\/li\x3e\n            ))}\n          \x3c\/ul\x3e\n        \x3c\/section\x3e\n      \x3c\/div\x3e\n    );\n  }\n\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e...\nimport styles from \x27.\/todo-list.scss\x27;\n\nexport default class TodoList extends Component {\n  ...\n  \n  render() {\n    return (\n      \x26lt;div className={styles.container}\x26gt;\n\x3cspan class=\x22hljs-deletion\x22\x3e-       \x26lt;header className={styles[\x27todo-list-header\x27]}\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b       \x26lt;header className={styles.header}\x26gt;\x3c\/span\x3e\n          \x26lt;input \n            type=\x22text\x22\n            className={styles.input}\n            ref={(input) =\x26gt; this.input = input} \n          \/\x26gt;\n          \x26lt;button \n            className={styles.button} \n            onClick={() =\x26gt; this.handleAdd()}\n          \x26gt;\n            Add Todo\n          \x26lt;\/button\x26gt;\n        \x26lt;\/header\x26gt;\n\x3cspan class=\x22hljs-deletion\x22\x3e-       \x26lt;section className={styles[\x27todo-list-content\x27]}\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b       \x26lt;section className={styles.content}\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-deletion\x22\x3e-         \x26lt;ul className={styles[\x27todo-list-items\x27]}\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b         \x26lt;ul className={styles.items}\x26gt;\x3c\/span\x3e\n            {this.state.todos.map((todo, i) =\x26gt; (\n              \x26lt;li key={`${todo}-${i}`}\x26gt;\n                \x26lt;em \n                  className={todo.completed ? styles.completed : \x27\x27} \n                  onClick={() =\x26gt; this.handleStateChange(i)}\n                \x26gt;\n                  {todo.text}\n                \x26lt;\/em\x26gt;\n                \x26lt;button \n                  className={styles.button} \n                  onClick={() =\x26gt; this.handleRemove(i)}\n                \x26gt;\n                  Remove\n                \x26lt;\/button\x26gt;\n              \x26lt;\/li\x26gt;\n            ))}\n          \x26lt;\/ul\x26gt;\n        \x26lt;\/section\x26gt;\n      \x26lt;\/div\x26gt;\n    );\n  }\n\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e有没有注意到上面 \x3ccode\x3erender\x3c\/code\x3e 方法中的 \x3ccode\x3eclassName\x3c\/code\x3e，我们省去了 \x3ccode\x3etodo-list*\x3c\/code\x3e 前缀，由于我们用的是 \x3ca href=\x22https:\/\/github.com\/css-modules\/css-modules\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCSS MODULES\x3c\/a\x3e，所以当我们分离组件后，原先在主容器中定义的 \x3ccode\x3etodo-list*\x3c\/code\x3e 前缀的 \x3ccode\x3eclassName\x3c\/code\x3e ，可以很容易通过 webpack 的配置来实现：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nmodule.exports = {\n  ...\n  module: {\n    rules: [\n      {\n        test: \/\\.s?css\/,\n        use: [\n          \x27style-loader\x27,\n          {\n            loader: \x27css-loader\x27,\n            options: {\n              modules: true,\n              localIdentName: \x27[name]--[local]-[hash:base64:5]\x27\n            }\n          },\n          ...\n        ]\n      }\n    ]  \n  }\n  ...\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e...\nmodule.exports = {\n  ...\n  module: {\n    \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.s?css\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [\n          \x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e,\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n              \x3cspan class=\x22hljs-attr\x22\x3emodules\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n              \x3cspan class=\x22hljs-attr\x22\x3elocalIdentName\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name]--[local]-[hash:base64:5]\x27\x3c\/span\x3e\n            }\n          },\n          ...\n        ]\n      }\n    ]  \n  }\n  ...\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们再来看下该组件的代码输出后的结果：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv data-reactroot=\x26quot;\x26quot; class=\x26quot;app--container-YwMsF\x26quot;\x3e\n  ...\n    \x3cdiv class=\x26quot;todo-list--container-2PARV\x26quot;\x3e\n      \x3cheader class=\x26quot;todo-list--header-3KDD3\x26quot;\x3e\n        ...\n      \x3c\/header\x3e\n      \x3csection class=\x26quot;todo-list--content-3xwvR\x26quot;\x3e\n        \x3cul class=\x26quot;todo-list--items-1SBi6\x26quot;\x3e\n          ...\n        \x3c\/ul\x3e\n      \x3c\/section\x3e\n    \x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3edata-reactroot\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app--container-YwMsF\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  ...\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22todo-list--container-2PARV\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22todo-list--header-3KDD3\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        ...\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22todo-list--content-3xwvR\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22todo-list--items-1SBi6\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          ...\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从上面 webpack 的配置和输出的 HTML 中可以看到，\x3ccode\x3eclassName\x3c\/code\x3e 的命名空间问题可以通过语义化 \x3ccode\x3e*.scss\x3c\/code\x3e 文件名的方式来实现，比如 \x3ccode\x3eTodoList\x3c\/code\x3e 的样式文件 \x3ccode\x3etodo-list.scss\x3c\/code\x3e。这样一来，省去了我们定义组件 \x3ccode\x3eclassName\x3c\/code\x3e 的命名空间带来的烦恼，从而只需要从组件内部的结构下手。\x3c\/p\x3e\n\x3cp\x3e回到正题，我们再来看下分离 \x3ccode\x3eTodoList\x3c\/code\x3e 组件后的 \x3ccode\x3econtainers\/App\/index.js\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import TodoList from \x27components\/TodoList\x27;\n...\n\nclass App extends Component {\n  render() {\n    return (\n      \x3cdiv className={styles.container}\x3e\n        \x3ch2 className={styles.header}\x3eTodo List Demo\x3c\/h2\x3e\n        \x3cdiv className={styles.content}\x3e\n          \x3cTodoList \/\x3e\n        \x3c\/div\x3e\n      \x3c\/div\x3e\n    );\n  }\n}\n\nexport default App;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e TodoList \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27components\/TodoList\x27\x3c\/span\x3e;\n...\n\nclass App extends Component {\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.container}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.header}\x3c\/span\x3e\x26gt;\x3c\/span\x3eTodo List Demo\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.content}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eTodoList\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e App;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e抽离通用组件\x3c\/h3\x3e\n\x3cp\x3e作为一个项目，当前的 \x3ccode\x3eTodoList\x3c\/code\x3e 组件包含了太多的子元素，如：input、button 等。为了让组件“\x3cstrong\x3e一次编写，随处使用\x3c\/strong\x3e”的原则，我们可以进一步拆分 \x3ccode\x3eTodoList\x3c\/code\x3e 组件以满足其他组件的使用。\x3c\/p\x3e\n\x3cp\x3e但是，如何拆分组件才是最合理的呢？我觉得这个问题没有最好的答案，但我们可以从几个方面进行思考：可封装性、可重用性和灵活性。比如拿 \x3ccode\x3eh1\x3c\/code\x3e 元素来讲，你可以封装成一个 \x3ccode\x3eTitle\x3c\/code\x3e 组件，然后这样 \x3ccode\x3e\x26lt;Title text={title} \/\x26gt;\x3c\/code\x3e 使用，又或者可以这样 \x3ccode\x3e\x26lt;Title\x26gt;{title}\x26lt;\/Title\x26gt;\x3c\/code\x3e 来使用。但你有没有发现，这样实现的 \x3ccode\x3eTitle\x3c\/code\x3e 组件并没有起到简化和封装的作用，反而增加了使用的复杂度，对于 HTML 来讲，\x3ccode\x3eh1\x3c\/code\x3e 本身也是一个组件，所以我们拆分组件也是需要掌握一个度的。\x3c\/p\x3e\n\x3cp\x3e好，我们先拿 input 和 button 下手，在 \x3ccode\x3ecomponents\/\x3c\/code\x3e 目录下新建 2 个 \x3ccode\x3eButton\x3c\/code\x3e 和 \x3ccode\x3eInput\x3c\/code\x3e 组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── components\n\x2b│   ├── Button\n\x2b│   │   ├── button.scss\n\x2b│   │   └── index.js\n\x2b│   ├── Input\n\x2b│   │   ├── index.js\n\x2b│   │   └── input.scss\n│   └── TodoList\n│       ├── index.js\n│       └── todo-list.scss\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e.\n├── components\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   ├── Button\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   │   ├── button.scss\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   │   └── index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   ├── Input\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   │   ├── index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│   │   └── input.scss\x3c\/span\x3e\n│   └── TodoList\n│       ├── index.js\n│       └── todo-list.scss\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eButton\/index.js\x3c\/code\x3e  的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nexport default class Button extends Component {\n  render() {\n    const { className, children, onClick } = this.props;\n\n    return (\n      \x3cbutton \n        type=\x26quot;button\x26quot; \n        className={cn(styles.normal, className)} \n        onClick={onClick}\n      \x3e\n        {children}\n      \x3c\/button\x3e\n    );\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode class=\x22react\x22\x3e...\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eButton\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    const { className, children, onClick } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;button \n        \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22button\x22\x3c\/span\x3e \n        className={cn(styles.normal, className)} \n        onClick={onClick}\n      \x26gt;\n        {children}\n      \x26lt;\/button\x26gt;\n    );\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eInput\/index.js\x3c\/code\x3e 的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nexport default class Input extends Component {\n  render() {\n    const { className, value, inputRef } = this.props;\n\n    return (\n      \x3cinput \n        type=\x26quot;text\x26quot;\n        className={cn(styles.normal, className)}\n        defaultValue={value}\n        ref={inputRef} \n      \/\x3e\n    );\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode class=\x22react\x22\x3e...\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eInput\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    const { className, value, inputRef } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x26lt;input \n        \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e\n        className={cn(styles.normal, className)}\n        defaultValue={value}\n        ref={inputRef} \n      \/\x26gt;\n    );\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e由于这 2 个组件自身不涉及任何业务逻辑，应该属于纯渲染组件（木偶组件），我们可以使用 React 轻量的无状态组件的方式来声明：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nconst Button = ({ className, children, onClick }) =\x3e (\n  \x3cbutton \n    type=\x26quot;button\x26quot; \n    className={cn(styles.normal, className)} \n    onClick={onClick}\n  \x3e\n    {children}\n  \x3c\/button\x3e\n);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e...\nconst Button = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ className, children, onClick }\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \n    \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22button\x22\x3c\/span\x3e \n    \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{cn(styles.normal,\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e)} \n    \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{onClick}\x3c\/span\x3e\n  \x26gt;\x3c\/span\x3e\n    {children}\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是不是觉得酷炫很多！\x3c\/p\x3e\n\x3cp\x3e另外，从 \x3ccode\x3eInput\x3c\/code\x3e 组件的示例代码中看到，我们使用了\x3ca href=\x22https:\/\/reactjs.org\/docs\/uncontrolled-components.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e非受控组件\x3c\/a\x3e，这里是为了降低示例代码的复杂度而特意为之，大家可以根据自己的实际情况来决定是否需要设计成\x3ca href=\x22https:\/\/reactjs.org\/docs\/forms.html#controlled-components\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e受控组件\x3c\/a\x3e。一般情况下，如果不需要获取实时输入值的话，我觉得使用非受控组件应该够用了。\x3c\/p\x3e\n\x3cp\x3e我们再回到上面的 \x3ccode\x3eTodoList\x3c\/code\x3e 组件，将之前分离的子组件 \x3ccode\x3eButton\x3c\/code\x3e，\x3ccode\x3eInput\x3c\/code\x3e 组装进来。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nimport Button from \x27components\/Button\x27;\nimport Input from \x27components\/Input\x27;\n...\n\nexport default class TodoList extends Component {\n  render() {\n    return (\n      \x3cdiv className={styles.container}\x3e\n        \x3cheader className={styles.header}\x3e\n          \x3cInput \n            className={styles.input} \n            inputRef={(input) =\x3e this.input = input} \n          \/\x3e\n          \x3cButton onClick={() =\x3e this.handleAdd()}\x3e\n            Add Todo\n          \x3c\/Button\x3e\n        \x3c\/header\x3e\n        ...\n      \x3c\/div\x3e\n    );\n  }\n}\n\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e...\nimport Button \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27components\/Button\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Input \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27components\/Input\x27\x3c\/span\x3e;\n...\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTodoList\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.container}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.header}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eInput\x3c\/span\x3e \n            \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.input}\x3c\/span\x3e \n            \x3cspan class=\x22hljs-attr\x22\x3einputRef\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{(input)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.input = input} \n          \/\x26gt;\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.handleAdd()}\x26gt;\n            Add Todo\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eheader\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        ...\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    );\n  }\n}\n\n...\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e拆分子组件\x3c\/h3\x3e\n\x3cp\x3e然后继续接着看 \x3ccode\x3eTodoList\x3c\/code\x3e 的 items 部分，我们注意到这部分包含了较多的渲染逻辑在 \x3ccode\x3erender\x3c\/code\x3e 中，导致我们需要浪费对这段代码与上下文之间会有过多的思考，所以，我们何不把它抽离出去：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\n\nexport default class TodoList extends Component {\n  render() {\n    return (\n      \x3cdiv className={styles.container}\x3e\n        ...\n        \x3csection className={styles.content}\x3e\n          {this.renderItems()}\n        \x3c\/section\x3e\n      \x3c\/div\x3e\n    );\n  }\n\n  renderItems() {\n    return (\n      \x3cul className={styles.items}\x3e\n        {this.state.todos.map((todo, i) =\x3e (\n          \x3cli key={`${todo}-${i}`}\x3e\n            ...\n          \x3c\/li\x3e\n        ))}\n      \x3c\/ul\x3e\n    );\n  }\n  \n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e...\n\nexport \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTodoList\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  render() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.container}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        ...\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.content}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          {this.renderItems()}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n\n  renderItems() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n      \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.items}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        {this.state.todos.map((todo, i) =\x26gt; (\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e`${\x3cspan class=\x22hljs-attr\x22\x3etodo\x3c\/span\x3e}\x3cspan class=\x22hljs-attr\x22\x3e-\x3c\/span\x3e${\x3cspan class=\x22hljs-attr\x22\x3ei\x3c\/span\x3e}`}\x26gt;\x3c\/span\x3e\n            ...\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        ))}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n    );\n  }\n  \n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的代码看似降低了 \x3ccode\x3erender\x3c\/code\x3e 的复杂度，但仍然没有让 \x3ccode\x3eTodoList\x3c\/code\x3e 减少负担。既然我们要把这部分逻辑分离出去，我们何不创建一个 \x3ccode\x3eTodos\x3c\/code\x3e 组件，把这部分逻辑拆分出去呢？so，我们以“\x3cstrong\x3e就近声明\x3c\/strong\x3e”的原则在 \x3ccode\x3ecomponents\/TodoList\/\x3c\/code\x3e 目录下创建一个子目录 \x3ccode\x3ecomponents\/TodoList\/components\/\x3c\/code\x3e 来存放 \x3ccode\x3eTodoList\x3c\/code\x3e 的子组件 。why？因为我觉得 组件 \x3ccode\x3eTodos\x3c\/code\x3e 跟 \x3ccode\x3eTodoList\x3c\/code\x3e 有紧密的父子关系，且跟其他组件间也不太会有任何交互，也可以认为它是 \x3ccode\x3eTodoList\x3c\/code\x3e 私有的。\x3c\/p\x3e\n\x3cp\x3e然后我们预览下现在的目录结构：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── components\n│   ...\n│   └── TodoList\n\x2b│       ├── components\n\x2b│       │   └── Todos\n\x2b│       │       ├── index.js\n\x2b│       │       └── todos.scss\n│       ├── index.js\n│       └── todo-list.scss\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e.\n├── components\n│   ...\n│   └── TodoList\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       ├── components\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       │   └── Todos\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       │       ├── index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       │       └── todos.scss\x3c\/span\x3e\n│       ├── index.js\n│       └── todo-list.scss\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eTodos\/index.js\x3c\/code\x3e 的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nconst Todos = ({ data: todos, onStateChange, onRemove }) =\x3e (\n  \x3cul className={styles.items}\x3e\n    {todos.map((todo, i) =\x3e (\n      \x3cli key={`${todo}-${i}`}\x3e\n        \x3cem \n          className={todo.completed ? styles.completed : \x27\x27} \n          onClick={() =\x3e onStateChange(i)}\n        \x3e\n          {todo.text}\n        \x3c\/em\x3e\n        \x3cButton onClick={() =\x3e onRemove(i)}\x3e\n          Remove\n        \x3c\/Button\x3e\n      \x3c\/li\x3e\n    ))}\n  \x3c\/ul\x3e\n);\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e...\nconst Todos = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ data: todos, onStateChange, onRemove }\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.items}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    {todos.map((todo, i) =\x26gt; (\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e`${\x3cspan class=\x22hljs-attr\x22\x3etodo\x3c\/span\x3e}\x3cspan class=\x22hljs-attr\x22\x3e-\x3c\/span\x3e${\x3cspan class=\x22hljs-attr\x22\x3ei\x3c\/span\x3e}`}\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e \n          \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{todo.completed\x3c\/span\x3e ? \x3cspan class=\x22hljs-attr\x22\x3estyles.completed\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x27\x27} \n          \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e onStateChange(i)}\n        \x26gt;\n          {todo.text}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e onRemove(i)}\x26gt;\n          Remove\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    ))}\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n);\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再看拆分后的 \x3ccode\x3eTodoList\/index.js\x3c\/code\x3e ：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render() {\n  return (\n    \x3cdiv className={styles.container}\x3e\n      ...\n      \x3csection className={styles.content}\x3e\n        \x3cTodos \n          data={this.state.todos}\n          onStateChange={(index) =\x3e this.handleStateChange(index)}\n          onRemove={(index) =\x3e this.handleRemove(index)}\n        \/\x3e\n      \x3c\/section\x3e\n    \x3c\/div\x3e\n  );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs axapta\x22\x3e\x3ccode class=\x22react\x22\x3erender() {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e className={styles.\x3cspan class=\x22hljs-keyword\x22\x3econtainer\x3c\/span\x3e}\x26gt;\n      ...\n      \x26lt;section className={styles.content}\x26gt;\n        \x26lt;Todos \n          data={\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.todos}\n          onStateChange={(\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e) =\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleStateChange(\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e)}\n          onRemove={(\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e) =\x26gt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleRemove(\x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e)}\n        \/\x26gt;\n      \x26lt;\/section\x26gt;\n    \x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3ediv\x3c\/span\x3e\x26gt;\n  );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e增强子组件\x3c\/h3\x3e\n\x3cp\x3e到目前为止，大体上的功能已经搞定，子组件看上去拆分的也算合理，这样就可以很容易的增强某个子组件的功能了。就拿 \x3ccode\x3eTodos\x3c\/code\x3e 来说，在新增了一个 TODO 后，假如我们并没有完成这个 TODO，而我们又希望可以修改它的内容了。ha～不要着急，要不我们再拆分下这个 \x3ccode\x3eTodos\x3c\/code\x3e，比如增加一个 \x3ccode\x3eTodo\x3c\/code\x3e 组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.\n├── components\n│   ...\n│   └── TodoList\n│       ├── components\n\x2b│       │   ├── Todo\n\x2b│       │   │   ├── index.js\n\x2b│       │   │   └── todo.scss\n│       │   └── Todos\n│       │       ├── index.js\n│       │       └── todos.scss\n│       ├── index.js\n│       └── todo-list.scss\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e.\n├── components\n│   ...\n│   └── TodoList\n│       ├── components\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       │   ├── Todo\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       │   │   ├── index.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b│       │   │   └── todo.scss\x3c\/span\x3e\n│       │   └── Todos\n│       │       ├── index.js\n│       │       └── todos.scss\n│       ├── index.js\n│       └── todo-list.scss\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e先看下 \x3ccode\x3eTodos\x3c\/code\x3e 组件在抽离了 \x3ccode\x3eTodo\x3c\/code\x3e 后的样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nimport Todo from \x27..\/Todo\x27;\n...\n\nconst Todos = ({ data: todos, onStateChange, onRemove }) =\x3e (\n  \x3cul className={styles.items}\x3e\n    {todos.map((todo, i) =\x3e (\n      \x3cli key={`${todo}-${i}`}\x3e\n        \x3cTodo\n          {...todo}\n          onClick={() =\x3e onStateChange(i)}\n        \/\x3e\n        \x3cButton onClick={() =\x3e onRemove(i)}\x3e\n          Remove\n        \x3c\/Button\x3e\n      \x3c\/li\x3e\n    ))}\n  \x3c\/ul\x3e\n);\n\nexport default Todos;\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3e...\nimport Todo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/Todo\x27\x3c\/span\x3e;\n...\n\nconst Todos = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e{ data: todos, onStateChange, onRemove }\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (\n  \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.items}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    {todos.map((todo, i) =\x26gt; (\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e`${\x3cspan class=\x22hljs-attr\x22\x3etodo\x3c\/span\x3e}\x3cspan class=\x22hljs-attr\x22\x3e-\x3c\/span\x3e${\x3cspan class=\x22hljs-attr\x22\x3ei\x3c\/span\x3e}`}\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eTodo\x3c\/span\x3e\n          {\x3cspan class=\x22hljs-attr\x22\x3e...todo\x3c\/span\x3e}\n          \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e onStateChange(i)}\n        \/\x26gt;\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e onRemove(i)}\x26gt;\n          Remove\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eli\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    ))}\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eul\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n);\n\nexport default Todos;\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们先不关心 \x3ccode\x3eTodo\x3c\/code\x3e 内是何如实现的，就如我们上面说到的那样，我们需要对这个 \x3ccode\x3eTodo\x3c\/code\x3e 增加一个可编辑的功能，从单纯的属性配置入手，我们只需要给它增加一个 \x3ccode\x3eeditable\x3c\/code\x3e 的属性：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cTodo\n  {...todo}\n\x2b editable={editable}\n  onClick={() =\x3e onStateChange(i)}\n\/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e\x26lt;Todo\n  {...todo}\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b editable={editable}\x3c\/span\x3e\n  onClick={() =\x26gt; onStateChange(i)}\n\/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，我们再思考下，在 \x3ccode\x3eTodo\x3c\/code\x3e 组件的内部，我们需要重新组织一些功能逻辑：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e根据传入的 \x3ccode\x3eeditable\x3c\/code\x3e 属性来判断是否需要显示编辑按钮\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e根据组件内部的编辑状态，是显示文本输入框还是文本内容\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e点击“更新”按钮后，需要通知父组件更新数据列表\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我们先来实现下 \x3ccode\x3eTodo\x3c\/code\x3e 的第一个功能点：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render() {\n  const { completed, text, editable, onClick } = this.props;\n\n  return (\n    \x3cspan className={styles.wrapper}\x3e\n      \x3cem\n        className={completed ? styles.completed : \x27\x27} \n        onClick={onClick}\n        \x3e\n        {text}\n      \x3c\/em\x3e\n      {editable \x26amp;\x26amp; \n        \x3cButton\x3e\n          Edit\n        \x3c\/Button\x3e\n      }\n    \x3c\/span\x3e\n  );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3erender() {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { completed, text, editable, onClick } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.wrapper}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{completed\x3c\/span\x3e ? \x3cspan class=\x22hljs-attr\x22\x3estyles.completed\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x27\x27} \n        \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{onClick}\x3c\/span\x3e\n        \x26gt;\x3c\/span\x3e\n        {text}\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      {editable \x26amp;\x26amp; \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          Edit\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      }\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n  );\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e显然实现这一步似乎没什么 luan 用，我们还需要点击 Edit 按钮后能显示 \x3ccode\x3eInput\x3c\/code\x3e 组件，使内容可修改。所以，简单的传递属性似乎无法满足该组件的功能，我们还需要一个内部状态来管理组件是否处于编辑中：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22render() {\n  const { completed, text, editable, onStateChange } = this.props,\n    { editing } = this.state;\n\n  return (\n    \x3cspan className={styles.wrapper}\x3e\n      {editing ? \n        \x3cInput \n          value={text}\n          className={styles.input}\n          inputRef={input =\x3e this.input = input}\n        \/\x3e :\n        \x3cem\n          className={completed ? styles.completed : \x27\x27} \n          onClick={onStateChange}\n        \x3e\n          {text}\n        \x3c\/em\x3e\n      }\n      {editable \x26amp;\x26amp; \n        \x3cButton onClick={() =\x3e this.handleEdit()}\x3e\n          {editing ? \x27Update\x27 : \x27Edit\x27}\n        \x3c\/Button\x3e\n      }\n    \x3c\/span\x3e\n  );\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode class=\x22react\x22\x3erender() {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { completed, text, editable, onStateChange } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props,\n    { editing } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.wrapper}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      {editing ? \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eInput\x3c\/span\x3e \n          \x3cspan class=\x22hljs-attr\x22\x3evalue\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{text}\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{styles.input}\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3einputRef\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{input\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.input = input}\n        \/\x26gt; :\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{completed\x3c\/span\x3e ? \x3cspan class=\x22hljs-attr\x22\x3estyles.completed\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:\x3c\/span\x3e \x27\x27} \n          \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{onStateChange}\x3c\/span\x3e\n        \x26gt;\x3c\/span\x3e\n          {text}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eem\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      }\n      {editable \x26amp;\x26amp; \n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.handleEdit()}\x26gt;\n          {editing ? \x27Update\x27 : \x27Edit\x27}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eButton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      }\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  );\n}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后，\x3ccode\x3eTodo\x3c\/code\x3e 组件在点击 Update 按钮后需要通知父组件更新数据：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleEdit() {\n  const { text, onUpdate } = this.props;\n  let { editing } = this.state;\n\n  editing = !editing;\n\n  this.setState({ editing });\n\n  if (!editing \x26amp;\x26amp; this.input.value !== text) {\n    onUpdate(this.input.value);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ehandleEdit() {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { text, onUpdate } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e { editing } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state;\n\n  editing = !editing;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({ editing });\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!editing \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.input.value !== text) {\n    onUpdate(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.input.value);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是，我们传递的是更新后的内容，在数据没有任何变化的情况下通知父组件是毫无意义的。\x3c\/p\x3e\n\x3cp\x3e我们再回过头来修改下 \x3ccode\x3eTodos\x3c\/code\x3e 组件对 \x3ccode\x3eTodo\x3c\/code\x3e 的调用。先增加一个由 \x3ccode\x3eTodoList\x3c\/code\x3e 组件传递下来的回调属性 \x3ccode\x3eonUpdate\x3c\/code\x3e，同时修改 \x3ccode\x3eonClick\x3c\/code\x3e 为 \x3ccode\x3eonStateChange\x3c\/code\x3e，因为这时的 \x3ccode\x3eTodo\x3c\/code\x3e 已不仅仅只有单个点击事件了，需要定义不同状态变更时的事件回调：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cTodo\n  {...todo}\n  editable={editable}\n- onClick={() =\x3e onStateChange(i)}\n\x2b onStateChange={() =\x3e onStateChange(i)}\n\x2b onUpdate={(value) =\x3e onUpdate(i, value)}\n\/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e\x26lt;Todo\n  {...todo}\n  editable={editable}\n\x3cspan class=\x22hljs-deletion\x22\x3e- onClick={() =\x26gt; onStateChange(i)}\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b onStateChange={() =\x26gt; onStateChange(i)}\x3c\/span\x3e\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b onUpdate={(value) =\x26gt; onUpdate(i, value)}\x3c\/span\x3e\n\/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而最终我们又在 \x3ccode\x3eTodoList\x3c\/code\x3e 组件中，增加 \x3ccode\x3eTodo\x3c\/code\x3e 在数据更新后的业务逻辑。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eTodoList\x3c\/code\x3e 组件的 \x3ccode\x3erender\x3c\/code\x3e 方法内的部分示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cTodos \n  editable\n  data={this.state.todos}\n\x2b onUpdate={(index, value) =\x3e this.handleUpdate(index, value)}\n  onStateChange={(index) =\x3e this.handleStateChange(index)}\n  onRemove={(index) =\x3e this.handleRemove(index)}\n\/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22diff hljs\x22\x3e\x3ccode class=\x22diff\x22\x3e\x26lt;Todos \n  editable\n  data={this.state.todos}\n\x3cspan class=\x22hljs-addition\x22\x3e\x2b onUpdate={(index, value) =\x26gt; this.handleUpdate(index, value)}\x3c\/span\x3e\n  onStateChange={(index) =\x26gt; this.handleStateChange(index)}\n  onRemove={(index) =\x26gt; this.handleRemove(index)}\n\/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eTodoList\x3c\/code\x3e 组件的 \x3ccode\x3ehandleUpdate\x3c\/code\x3e 方法的示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleUpdate(index, value) {\n  let todos = [...this.state.todos];\n  const target = todos[index];\n\n  todos = [\n    ...todos.slice(0, index),\n    {\n      text: value,\n      completed: target.completed\n    },\n    ...todos.slice(index \x2b 1)\n  ];\n\n  this.setState({ todos });\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ehandleUpdate(index, value) {\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e todos = [...this.state.todos];\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e target = todos[index];\n\n  todos = [\n    ...todos.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, index),\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: value,\n      \x3cspan class=\x22hljs-attr\x22\x3ecompleted\x3c\/span\x3e: target.completed\n    },\n    ...todos.slice(index \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n  ];\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({ todos });\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e组件数据管理\x3c\/h2\x3e\n\x3cp\x3e既然 \x3ccode\x3eTodoList\x3c\/code\x3e 是一个组件，初始状态 \x3ccode\x3ethis.state.todos\x3c\/code\x3e 就有可能从外部传入。对于组件内部，我们不应该过多的关心这些数据从何而来（可能通过父容器直接 Ajax 调用后返回的数据，或者 Redux、MobX 等状态管理器获取的数据），我觉得组件的数据属性的设计可以从以下 3 个方面来考虑：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e在没有初始数据传入时应该提供一个默认值\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e一旦数据在组件内部被更新后应该及时的通知父组件\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e当有新的数据（从后端 API 请求的）传入组件后，应该重新更新组件内部状态\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e根据这几点，我们可以对 \x3ccode\x3eTodoList \x3c\/code\x3e 再做一番改造。\x3c\/p\x3e\n\x3cp\x3e首先，对 \x3ccode\x3eTodoList\x3c\/code\x3e 增加一个 \x3ccode\x3etodos\x3c\/code\x3e 的默认数据属性，使父组件在没有传入有效属性值时也不会影响该组件的使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class TodoList extends Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      todos: props.todos\n    };\n  }\n  ...\n}\n\nTodoList.defaultProps = {\n  todos: []\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTodoList\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n      \x3cspan class=\x22hljs-attr\x22\x3etodos\x3c\/span\x3e: props.todos\n    };\n  }\n  ...\n}\n\nTodoList.defaultProps = {\n  \x3cspan class=\x22hljs-attr\x22\x3etodos\x3c\/span\x3e: []\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，再新增一个内部方法 \x3ccode\x3ethis.update\x3c\/code\x3e 和一个组件的更新事件回调属性 \x3ccode\x3eonUpdate\x3c\/code\x3e，当数据状态更新时可以及时的通知父组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class TodoList extends Component {\n  ...\n  handleAdd() {\n    ...\n    this.update(todos);\n  }\n\n  handleUpdate(index, value) {\n    ...\n    this.update(todos);\n  }\n\n  handleRemove(index) {\n    ...\n    this.update(todos);\n  }\n\n  handleStateChange(index) {\n    ...\n    this.update(todos);\n  }\n\n  update(todos) {\n    const { onUpdate } = this.props;\n\n    this.setState({ todos });\n    onUpdate \x26amp;\x26amp; onUpdate(todos);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTodoList\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  ...\n  handleAdd() {\n    ...\n    this.update(todos);\n  }\n\n  handleUpdate(index, value) {\n    ...\n    this.update(todos);\n  }\n\n  handleRemove(index) {\n    ...\n    this.update(todos);\n  }\n\n  handleStateChange(index) {\n    ...\n    this.update(todos);\n  }\n\n  update(todos) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { onUpdate } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({ todos });\n    onUpdate \x26amp;\x26amp; onUpdate(todos);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这就完事儿了？No! No! No! 因为 \x3ccode\x3ethis.state.todos\x3c\/code\x3e 的初始状态是由外部 \x3ccode\x3ethis.props\x3c\/code\x3e 传入的，假如父组件重新更新了数据，会导致子组件的数据和父组件不同步。那么，如何解决？\x3c\/p\x3e\n\x3cp\x3e我们回顾下 \x3ca href=\x22https:\/\/reactjs.org\/docs\/react-component.html#the-component-lifecycle\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact 的生命周期\x3c\/a\x3e，父组件传递到子组件的 props 的更新数据可以在  \x3ccode\x3ecomponentWillReceiveProps\x3c\/code\x3e 中获取。所以我们有必要在这里重新更新下 \x3ccode\x3eTodoList\x3c\/code\x3e 的数据，哦！千万别忘了判断传入的 todos 和当前的数据是否一致，因为，当任何传入的 props 更新时都会导致 \x3ccode\x3ecomponentWillReceiveProps\x3c\/code\x3e 的触发。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22componentWillReceiveProps(nextProps) {\n  const nextTodos = nextProps.todos;\n\n  if (Array.isArray(nextTodos) \x26amp;\x26amp; !_.isEqual(this.state.todos, nextTodos)) {\n    this.setState({ todos: nextTodos });\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecomponentWillReceiveProps(nextProps) {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e nextTodos = nextProps.todos;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.isArray(nextTodos) \x26amp;\x26amp; !_.isEqual(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.todos, nextTodos)) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({ \x3cspan class=\x22hljs-attr\x22\x3etodos\x3c\/span\x3e: nextTodos });\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意代码中的 \x3ccode\x3e_.isEqual\x3c\/code\x3e，该方法是 \x3ca href=\x22https:\/\/lodash.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eLodash\x3c\/a\x3e 中非常实用的一个函数，我经常拿来在这种场景下使用。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e结尾\x3c\/h2\x3e\n\x3cp\x3e由于本人对 React 的了解有限，以上示例中的方案可能不一定最合适，但你也看到了 \x3ccode\x3eTodoList\x3c\/code\x3e 组件，既可以是包含多个不同功能逻辑的大组件，也可以拆分为独立、灵巧的小组件，我觉得我们只需要掌握一个度。当然，如何设计取决于你自己的项目，正所谓：\x3cstrong\x3e没有最好的，只有更合适的\x3c\/strong\x3e。还是希望本篇文章能给你带来些许的小收获。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3eiKcamp官网：\x3ca href=\x22http:\/\/www.ikcamp.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ikcamp.com\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e访问官网更快阅读全部免费分享课程：《iKcamp出品｜全网最新｜微信小程序｜基于最新版1.0开发者工具之初中级培训教程分享》。\x3cbr\x3e包含：文章、视频、源代码\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010953661\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010953661\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eiKcamp原创新书《移动Web前端高效开发实战》已在亚马逊、京东、当当开售。\x3c\/p\x3e\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>如何优雅的设计 React 组件</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011939560">https://segmentfault.com/a/1190000011939560</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/lt3jbwg0rt9/" target="_blank">https://alili.tech/archive/lt3jbwg0rt9/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>