<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端nginx使用札记"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端nginx使用札记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mfdtjiszhoh/",
				"appid": "1613049289050283", 
				"title": "前端nginx使用札记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-10T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/54hqb3f2hcb/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qwmwcaz064/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&text=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&text=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&title=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&is_video=false&description=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&title=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&title=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&title=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmfdtjiszhoh%2f&title=%e5%89%8d%e7%ab%afnginx%e4%bd%bf%e7%94%a8%e6%9c%ad%e8%ae%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端nginx使用札记</h1><div class="meta"><div class="postdate"><time datetime="2018-12-10" itemprop="datePublished">2018-12-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3enginx是什么？\x3c\/h2\x3e\n\x3cp\x3enginx是俄罗斯人 Igor Sysoev为俄罗斯访问量第二的Rambler.ru站点开发的一个十分轻量级的HTTP服务器。它是一个高性能的HTTP和反向代理服务器，同时也可以作为IMAP\/POP3\/SMTP的代理服务器。nginx使用的是BSD许可。\x3c\/p\x3e\n\x3cp\x3eNginx 以事件驱动的方式编写，所以有非常好的性能，同时也是一个非常高效的反向代理、负载平衡。\x3c\/p\x3e\n\x3cp\x3eNginx 因为它的稳定性、丰富的模块库、灵活的配置和低系统资源的消耗而闻名。\x3c\/p\x3e\n\x3cp\x3enginx适合用来做mongrel clusters 的前端 HTTP 响应。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e为什么要用nginx，nginx有什么特点？\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.ctolib.com\/topics-101000.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enginx的特点\x3c\/a\x3e：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e核心特点：高并发请求的同时保持高效的服务\x3c\/li\x3e\n\x3cli\x3e热部署\x3c\/li\x3e\n\x3cli\x3e低内存消耗\x3c\/li\x3e\n\x3cli\x3e处理响应请求很快\x3c\/li\x3e\n\x3cli\x3e具有很高的可靠性\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e同时，nginx也可以实现高效的反向代理、负载均衡。\x3c\/p\x3e\n\x3cp\x3e前端可以用nginx做些什么？\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e搭建静态资源服务器\x3c\/li\x3e\n\x3cli\x3e反向代理分发后端服务（可以和nodejs搭配实现前后端分离）和跨域问题\x3c\/li\x3e\n\x3cli\x3e根据User Agent来重定向站点\x3c\/li\x3e\n\x3cli\x3e开发环境或测试环境切换（切换host）\x3c\/li\x3e\n\x3cli\x3eurl重写，使用rewrie规则本地映射\x3c\/li\x3e\n\x3cli\x3e资源内容篡改\x3c\/li\x3e\n\x3cli\x3e获取cookie做分流\x3c\/li\x3e\n\x3cli\x3e资源合并\x3c\/li\x3e\n\x3cli\x3egzip压缩\x3c\/li\x3e\n\x3cli\x3e压缩图片\x3c\/li\x3e\n\x3cli\x3esourceMap调试\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e如何安装nginx？\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3emac安装：\x3c\/h3\x3e\n\x3cp\x3e安装\x3ca href=\x22https:\/\/brew.sh\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebrew\x3c\/a\x3e之后，执行命令：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ sudo brew install nginx\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ sudo brew install nginx\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ewindows安装\x3c\/h3\x3e\n\x3cp\x3e1.下载： \x3ca href=\x22http:\/\/nginx.org\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enginx官网\x3c\/a\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e解压运行：解压至\x3ccode\x3ec:\\nginx\x3c\/code\x3e，运行\x3ccode\x3enginx.exe\x3c\/code\x3e(即\x3ccode\x3enginx -c conf\\nginx.conf\x3c\/code\x3e)，默认使用80端口，日志见文件夹\x3ccode\x3eC:\\nginx\\logs\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e关闭：\x3ccode\x3enginx -s stop\x3c\/code\x3e 或\x3ccode\x3etaskkill \/F \/IM nginx.exe \x26gt; nul\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cem\x3e【注意】以下皆以mac为例。\x3c\/em\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3enginx如何启动、重启、关闭？\x3c\/h2\x3e\n\x3cp\x3e查看nginx版本：\x3ccode\x3enginx -v\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e启动nginx服务：\x3cbr\x3e方法一：运行命令：\x3ccode\x3esudo brew services start nginx\x3c\/code\x3e\x3cbr\x3e方法二：运行命令：\x3ccode\x3enginx\x3c\/code\x3e\x3cbr\x3e访问\x3ca href=\x22http:\/\/localhost\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost\x3c\/a\x3e:8080\x3cbr\x3e出现如下界面则表示安装成功：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013781167?w=1240\x26amp;h=419\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013781167?w=1240\x26amp;h=419\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e关闭nginx服务：\x3cbr\x3e方法一：运行命令：\x3ccode\x3e sudo brew services stop nginx\x3c\/code\x3e\x3cbr\x3e方法二：运行命令： \x3ccode\x3enginx -s stop\x3c\/code\x3e\x3cbr\x3e方法三：\x3cbr\x3e运行命令：\x3ccode\x3eps -ef | grep nginx\x3c\/code\x3e，找到master对应的进程号。\x3cbr\x3e快速停止：\x3ccode\x3ekill -TERM nginx进程号\x3c\/code\x3e或\x3ccode\x3ekill -INT nginx进程号\x3c\/code\x3e\x3cbr\x3e从容停止： \x3ccode\x3ekill -QUIT nginx进程号\x3c\/code\x3e\x3cbr\x3e强制停止所有nginx进程：\x3ccode\x3epkill -9 nginx\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e重启nginx服务：\x3cbr\x3e方法一：\x3ccode\x3enginx -s reload\x3c\/code\x3e\x3cbr\x3e方法二： 平滑重启命令： \x3ccode\x3ekill -HUP nginx进程号\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3enginx信号控制：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3eTERM,INT\x3c\/code\x3e 快速关闭\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eQUIT\x3c\/code\x3e 从容关闭\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eHUP\x3c\/code\x3e 平滑重启，重新加载配置文件\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eUSR1\x3c\/code\x3e 重新打开日志文件，在切割日志时用途较大\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eUSR2\x3c\/code\x3e 平滑升级可执行程序\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eWINCH\x3c\/code\x3e 从容关闭工作进程\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e如何查看nginx的配置文件nginx.conf的路径和安装路径？\x3c\/h2\x3e\n\x3cp\x3e查看配置文件位置和测试配置文件语法：运行命令\x3ccode\x3enginx -t\x3c\/code\x3e:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013781168?w=1104\x26amp;h=108\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013781168?w=1104\x26amp;h=108\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e查看nginx安装路径：\x3cbr\x3e因为是使用brew安装的，所以使用brew命令：\x3ccode\x3ebrew info nginx\x3c\/code\x3e:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013781169\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013781169\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3enginx.conf基本配置有哪些？\x3c\/h2\x3e\n\x3cp\x3enginx配置文件主要分成四个部分：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3emain，全局设置，影响其它部分所有设置\x3c\/li\x3e\n\x3cli\x3eserver，主机服务相关设置，主要用于指定虚拟主机域名、IP和端口\x3c\/li\x3e\n\x3cli\x3elocation，URL匹配特定位置后的设置，反向代理、内容篡改相关设置\x3c\/li\x3e\n\x3cli\x3eupstream，上游服务器设置，负载均衡相关配置\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e他们之间的关系式：server继承main，location继承server；upstream既不会继承指令也不会被继承。\x3c\/p\x3e\n\x3cp\x3e如下是一份通用的配置和详解：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#定义 Nginx 运行的用户和用户组,默认由 nobody 账号运行, windows 下面可以注释掉。 \nuser  nobody; \n\n#nginx进程数，建议设置为等于CPU总核心数。可以和worker_cpu_affinity配合\nworker_processes  1; \n\n#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]\n#error_log  logs\/error.log;\n#error_log  logs\/error.log  notice;\n#error_log  logs\/error.log  info;\n\n#进程文件，window下可以注释掉\n#pid        logs\/nginx.pid;\n\n# 一个nginx进程打开的最多文件描述符(句柄)数目，理论值应该是最多打开文件数（系统的值ulimit -n）与nginx进程数相除，\n# 但是nginx分配请求并不均匀，所以建议与ulimit -n的值保持一致。\nworker_rlimit_nofile 65535;\n\n#工作模式与连接数上限\nevents {\n    # 参考事件模型，use [ kqueue | rtsig | epoll | \/dev\/poll | select | poll ]; \n    # epoll模型是Linux 2.6以上版本内核中的高性能网络I\/O模型，如果跑在FreeBSD上面，就用kqueue模型。\n   #use epoll;\n   #connections 20000;  # 每个进程允许的最多连接数\n   # 单个进程最大连接数（最大连接数=连接数*进程数）该值受系统进程最大打开文件数限制，需要使用命令ulimit -n 查看当前设置\n   worker_connections 65535;\n}\n\n#设定http服务器\nhttp {\n    #文件扩展名与文件类型映射表\n    #include 是个主模块指令，可以将配置文件拆分并引用，可以减少主配置文件的复杂度\n    include       mime.types;\n    #默认文件类型\n    default_type  application\/octet-stream;\n    #charset utf-8; #默认编码\n\n    #定义虚拟主机日志的格式\n    #log_format  main  \x27$remote_addr - $remote_user [$time_local] \x26quot;$request\x26quot; \x27\n    #                  \x27$status $body_bytes_sent \x26quot;$http_referer\x26quot; \x27\n    #                  \x27\x26quot;$http_user_agent\x26quot; \x26quot;$http_x_forwarded_for\x26quot;\x27;\n    \n    #定义虚拟主机访问日志\n    #access_log  logs\/access.log  main;\n\n    #开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I\/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。\n    sendfile        on;\n    #autoindex on; #开启目录列表访问，合适下载服务器，默认关闭。\n\n    #防止网络阻塞\n    #tcp_nopush     on;\n\n    #长连接超时时间，单位是秒，默认为0\n    keepalive_timeout  65;\n\n    # gzip压缩功能设置\n    gzip on; #开启gzip压缩输出\n    gzip_min_length 1k; #最小压缩文件大小\n    gzip_buffers    4 16k; #压缩缓冲区\n    gzip_http_version 1.0; #压缩版本（默认1.1，前端如果是squid2.5请使用1.0）\n    gzip_comp_level 6; #压缩等级\n    #压缩类型，默认就已经包含text\/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。\n    gzip_types text\/plain text\/css text\/javascript application\/json application\/javascript application\/x-javascript application\/xml;\n    gzip_vary on; \/\/和http头有关系，加个vary头，给代理服务器用的，有的浏览器支持压缩，有的不支持，所以避免浪费不支持的也压缩，所以根据客户端的HTTP头来判断，是否需要压缩\n    #limit_zone crawler $binary_remote_addr 10m; #开启限制IP连接数的时候需要使用\n\n    # http_proxy服务全局设置\n    client_max_body_size   10m;\n    client_body_buffer_size   128k;\n    proxy_connect_timeout   75;\n    proxy_send_timeout   75;\n    proxy_read_timeout   75;\n    proxy_buffer_size   4k;\n    proxy_buffers   4 32k;\n    proxy_busy_buffers_size   64k;\n    proxy_temp_file_write_size  64k;\n    proxy_temp_path   \/usr\/local\/nginx\/proxy_temp 1 2;\n\n   # 设定负载均衡后台服务器列表 \n    upstream  backend.com  { \n        #ip_hash; # 指定支持的调度算法\n        # upstream 的负载均衡，weight 是权重，可以根据机器配置定义权重。weigth 参数表示权值，权值越高被分配到的几率越大。\n        server   192.168.10.100:8080 max_fails=2 fail_timeout=30s ;  \n        server   192.168.10.101:8080 max_fails=2 fail_timeout=30s ;  \n    }\n\n    #虚拟主机的配置\n    server {\n        #监听端口\n        listen       80;\n        #域名可以有多个，用空格隔开\n        server_name  localhost fontend.com;\n        # Server Side Include，通常称为服务器端嵌入\n        #ssi on;\n        #默认编码\n        #charset utf-8;\n        #定义本虚拟主机的访问日志\n        #access_log  logs\/host.access.log  main;\n        \n        # 因为所有的地址都以 \/ 开头，所以这条规则将匹配到所有请求\n        location \/ {\n            root   html;\n            index  index.html index.htm;\n        }\n        \n        #error_page  404              \/404.html;\n\n        # redirect server error pages to the static page \/50x.html\n        #\n        error_page   500 502 503 504  \/50x.html;\n        location = \/50x.html {\n            root   html;\n        }\n\n       # 图片缓存时间设置\n       location ~ .*.(gif|jpg|jpeg|png|bmp|swf)$ {\n          expires 10d;\n       }\n\n       # JS和CSS缓存时间设置\n       location ~ .*.(js|css)?$ {\n          expires 1h;\n       }\n\n        #代理配置\n        # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n        #location \/proxy\/ {\n        #    proxy_pass   http:\/\/127.0.0.1;\n        #}\n\n        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n        #\n        #location ~ \\.php$ {\n        #    root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n        #    fastcgi_index  index.php;\n        #    fastcgi_param  SCRIPT_FILENAME  \/scripts$fastcgi_script_name;\n        #    include        fastcgi_params;\n        #}\n\n        # deny access to .htaccess files, if Apache\x27s document root\n        # concurs with nginx\x27s one\n        #\n        #location ~ \/\\.ht {\n        #    deny  all;\n        #}\n    }\n\n    # another virtual host using mix of IP-, name-, and port-based configuration\n    #\n    #server {\n    #    listen       8000;\n    #    listen       somename:8080;\n    #    server_name  somename  alias  another.alias;\n\n    #    location \/ {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n\n    # HTTPS server\n    #\n    #server {\n    #    listen       443 ssl;\n    #    server_name  localhost;\n\n    #    ssl_certificate      cert.pem;\n    #    ssl_certificate_key  cert.key;\n\n    #    ssl_session_cache    shared:SSL:1m;\n    #    ssl_session_timeout  5m;\n\n    #    ssl_ciphers  HIGH:!aNULL:!MD5;\n    #    ssl_prefer_server_ciphers  on;\n\n    #    location \/ {\n    #        root   html;\n    #        index  index.html index.htm;\n    #    }\n    #}\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e#定义 Nginx 运行的用户和用户组,默认由 nobody 账号运行, windows 下面可以注释掉。 \x3c\/span\x3e\n\x3cspan class=\x22hljs-attribute\x22\x3euser\x3c\/span\x3e  nobody; \n\n\x3cspan class=\x22hljs-comment\x22\x3e#nginx进程数，建议设置为等于CPU总核心数。可以和worker_cpu_affinity配合\x3c\/span\x3e\n\x3cspan class=\x22hljs-attribute\x22\x3eworker_processes\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; \n\n\x3cspan class=\x22hljs-comment\x22\x3e#全局错误日志定义类型，[ debug | info | notice | warn | error | crit ]\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e#error_log  logs\/error.log;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e#error_log  logs\/error.log  notice;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e#error_log  logs\/error.log  info;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e#进程文件，window下可以注释掉\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e#pid        logs\/nginx.pid;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e# 一个nginx进程打开的最多文件描述符(句柄)数目，理论值应该是最多打开文件数（系统的值ulimit -n）与nginx进程数相除，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e# 但是nginx分配请求并不均匀，所以建议与ulimit -n的值保持一致。\x3c\/span\x3e\n\x3cspan class=\x22hljs-attribute\x22\x3eworker_rlimit_nofile\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e65535\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e#工作模式与连接数上限\x3c\/span\x3e\n\x3cspan class=\x22hljs-section\x22\x3eevents\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e# 参考事件模型，use [ kqueue | rtsig | epoll | \/dev\/poll | select | poll ]; \x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e# epoll模型是Linux 2.6以上版本内核中的高性能网络I\/O模型，如果跑在FreeBSD上面，就用kqueue模型。\x3c\/span\x3e\n   \x3cspan class=\x22hljs-comment\x22\x3e#use epoll;\x3c\/span\x3e\n   \x3cspan class=\x22hljs-comment\x22\x3e#connections 20000;  # 每个进程允许的最多连接数\x3c\/span\x3e\n   \x3cspan class=\x22hljs-comment\x22\x3e# 单个进程最大连接数（最大连接数=连接数*进程数）该值受系统进程最大打开文件数限制，需要使用命令ulimit -n 查看当前设置\x3c\/span\x3e\n   \x3cspan class=\x22hljs-attribute\x22\x3eworker_connections\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e65535\x3c\/span\x3e;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e#设定http服务器\x3c\/span\x3e\n\x3cspan class=\x22hljs-section\x22\x3ehttp\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e#文件扩展名与文件类型映射表\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#include 是个主模块指令，可以将配置文件拆分并引用，可以减少主配置文件的复杂度\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3einclude\x3c\/span\x3e       mime.types;\n    \x3cspan class=\x22hljs-comment\x22\x3e#默认文件类型\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3edefault_type\x3c\/span\x3e  application\/octet-stream;\n    \x3cspan class=\x22hljs-comment\x22\x3e#charset utf-8; #默认编码\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#定义虚拟主机日志的格式\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#log_format  main  \x27$remote_addr - $remote_user [$time_local] \x22$request\x22 \x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#                  \x27$status $body_bytes_sent \x22$http_referer\x22 \x27\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#                  \x27\x22$http_user_agent\x22 \x22$http_x_forwarded_for\x22\x27;\x3c\/span\x3e\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e#定义虚拟主机访问日志\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#access_log  logs\/access.log  main;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#开启高效文件传输模式，sendfile指令指定nginx是否调用sendfile函数来输出文件，对于普通应用设为 on，如果用来进行下载等应用磁盘IO重负载应用，可设置为off，以平衡磁盘与网络I\/O处理速度，降低系统的负载。注意：如果图片显示不正常把这个改成off。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3esendfile\x3c\/span\x3e        \x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e#autoindex on; #开启目录列表访问，合适下载服务器，默认关闭。\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#防止网络阻塞\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#tcp_nopush     on;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#长连接超时时间，单位是秒，默认为0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3ekeepalive_timeout\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e65\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e# gzip压缩功能设置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#开启gzip压缩输出\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip_min_length\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1k\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#最小压缩文件大小\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip_buffers\x3c\/span\x3e    \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e16k\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#压缩缓冲区\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip_http_version\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#压缩版本（默认1.1，前端如果是squid2.5请使用1.0）\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip_comp_level\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#压缩等级\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#压缩类型，默认就已经包含text\/html，所以下面就不用再写了，写上去也不会有问题，但是会有一个warn。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip_types\x3c\/span\x3e text\/plain text\/css text\/javascript application\/json application\/javascript application\/x-javascript application\/xml;\n    \x3cspan class=\x22hljs-attribute\x22\x3egzip_vary\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e; \/\/和http头有关系，加个vary头，给代理服务器用的，有的浏览器支持压缩，有的不支持，所以避免浪费不支持的也压缩，所以根据客户端的HTTP头来判断，是否需要压缩\n    \x3cspan class=\x22hljs-comment\x22\x3e#limit_zone crawler $binary_remote_addr 10m; #开启限制IP连接数的时候需要使用\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e# http_proxy服务全局设置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3eclient_max_body_size\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e10m\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eclient_body_buffer_size\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e128k\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_connect_timeout\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e75\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_send_timeout\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e75\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_read_timeout\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e75\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_buffer_size\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e4k\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_buffers\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32k\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_busy_buffers_size\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e64k\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_temp_file_write_size\x3c\/span\x3e  \x3cspan class=\x22hljs-number\x22\x3e64k\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-attribute\x22\x3eproxy_temp_path\x3c\/span\x3e   \/usr\/local\/nginx\/proxy_temp \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n\n   \x3cspan class=\x22hljs-comment\x22\x3e# 设定负载均衡后台服务器列表 \x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3eupstream\x3c\/span\x3e  backend.com  { \n        \x3cspan class=\x22hljs-comment\x22\x3e#ip_hash; # 指定支持的调度算法\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e# upstream 的负载均衡，weight 是权重，可以根据机器配置定义权重。weigth 参数表示权值，权值越高被分配到的几率越大。\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3eserver\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e192.168.10.100:8080\x3c\/span\x3e max_fails=\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e fail_timeout=\x3cspan class=\x22hljs-number\x22\x3e30s\x3c\/span\x3e ;  \n        \x3cspan class=\x22hljs-attribute\x22\x3eserver\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e192.168.10.101:8080\x3c\/span\x3e max_fails=\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e fail_timeout=\x3cspan class=\x22hljs-number\x22\x3e30s\x3c\/span\x3e ;  \n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#虚拟主机的配置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-section\x22\x3eserver\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e#监听端口\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3elisten\x3c\/span\x3e       \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e#域名可以有多个，用空格隔开\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3eserver_name\x3c\/span\x3e  localhost fontend.com;\n        \x3cspan class=\x22hljs-comment\x22\x3e# Server Side Include，通常称为服务器端嵌入\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#ssi on;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#默认编码\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#charset utf-8;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#定义本虚拟主机的访问日志\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#access_log  logs\/host.access.log  main;\x3c\/span\x3e\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e# 因为所有的地址都以 \/ 开头，所以这条规则将匹配到所有请求\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \/ {\n            \x3cspan class=\x22hljs-attribute\x22\x3eroot\x3c\/span\x3e   html;\n            \x3cspan class=\x22hljs-attribute\x22\x3eindex\x3c\/span\x3e  index.html index.htm;\n        }\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e#error_page  404              \/404.html;\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-comment\x22\x3e# redirect server error pages to the static page \/50x.html\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3eerror_page\x3c\/span\x3e   \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e502\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e503\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e504\x3c\/span\x3e  \/50x.html;\n        \x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e = \/50x.html {\n            \x3cspan class=\x22hljs-attribute\x22\x3eroot\x3c\/span\x3e   html;\n        }\n\n       \x3cspan class=\x22hljs-comment\x22\x3e# 图片缓存时间设置\x3c\/span\x3e\n       \x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \x3cspan class=\x22hljs-regexp\x22\x3e~ .*.(gif|jpg|jpeg|png|bmp|swf)$\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-attribute\x22\x3eexpires\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e10d\x3c\/span\x3e;\n       }\n\n       \x3cspan class=\x22hljs-comment\x22\x3e# JS和CSS缓存时间设置\x3c\/span\x3e\n       \x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \x3cspan class=\x22hljs-regexp\x22\x3e~ .*.(js|css)?$\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-attribute\x22\x3eexpires\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1h\x3c\/span\x3e;\n       }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e#代理配置\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e# proxy the PHP scripts to Apache listening on 127.0.0.1:80\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#location \/proxy\/ {\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    proxy_pass   http:\/\/127.0.0.1;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#}\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-comment\x22\x3e# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#location ~ \\.php$ {\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    root           html;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    fastcgi_pass   127.0.0.1:9000;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    fastcgi_index  index.php;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    fastcgi_param  SCRIPT_FILENAME  \/scripts$fastcgi_script_name;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    include        fastcgi_params;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#}\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-comment\x22\x3e# deny access to .htaccess files, if Apache\x27s document root\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e# concurs with nginx\x27s one\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#location ~ \/\\.ht {\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#    deny  all;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#}\x3c\/span\x3e\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e# another virtual host using mix of IP-, name-, and port-based configuration\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#server {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    listen       8000;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    listen       somename:8080;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    server_name  somename  alias  another.alias;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#    location \/ {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#        root   html;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#        index  index.html index.htm;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    }\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#}\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e# HTTPS server\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#server {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    listen       443 ssl;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    server_name  localhost;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#    ssl_certificate      cert.pem;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    ssl_certificate_key  cert.key;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#    ssl_session_cache    shared:SSL:1m;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    ssl_session_timeout  5m;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#    ssl_ciphers  HIGH:!aNULL:!MD5;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    ssl_prefer_server_ciphers  on;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e#    location \/ {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#        root   html;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#        index  index.html index.htm;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#    }\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e#}\x3c\/span\x3e\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3elocation如何匹配？\x3c\/h3\x3e\n\x3cp\x3e示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22location  = \/ {\n  # 精确匹配 \/ ，主机名后面不能带任何字符串\n  [ configuration A ] \n}\n\nlocation  \/ {\n  # 因为所有的地址都以 \/ 开头，所以这条规则将匹配到所有请求\n  # 但是正则和最长字符串会优先匹配\n  [ configuration B ] \n}\n\nlocation \/documents\/ {\n  # 匹配任何以 \/documents\/ 开头的地址，匹配符合以后，还要继续往下搜索\n  # 只有后面的正则表达式没有匹配到时，这一条才会采用这一条\n  [ configuration C ] \n}\n\nlocation ~ \/documents\/Abc {\n  # 匹配任何以 \/documents\/ 开头的地址，匹配符合以后，还要继续往下搜索\n  # 只有后面的正则表达式没有匹配到时，这一条才会采用这一条\n  [ configuration CC ] \n}\n\nlocation ^~ \/images\/ {\n  # 匹配任何以 \/images\/ 开头的地址，匹配符合以后，停止往下搜索正则，采用这一条。\n  [ configuration D ] \n}\n\nlocation ~* \\.(gif|jpg|jpeg)$ {\n  # 匹配所有以 gif,jpg或jpeg 结尾的请求\n  # 然而，所有请求 \/images\/ 下的图片会被 config D 处理，因为 ^~ 到达不了这一条正则\n  [ configuration E ] \n}\n\nlocation \/images\/ {\n  # 字符匹配到 \/images\/，继续往下，会发现 ^~ 存在\n  [ configuration F ] \n}\n\nlocation \/images\/abc {\n  # 最长字符匹配到 \/images\/abc，继续往下，会发现 ^~ 存在\n  # F与G的放置顺序是没有关系的\n  [ configuration G ] \n}\n\nlocation ~ \/images\/abc\/ {\n  # 只有去掉 config D 才有效：先最长匹配 config G 开头的地址，继续往下搜索，匹配到这一条正则，采用\n    [ configuration H ] \n}\n\nlocation ~* \/js\/.*\/\\.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e  = \/ {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 精确匹配 \/ ，主机名后面不能带任何字符串\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e A ] \n}\n\nlocation  \/ {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 因为所有的地址都以 \/ 开头，所以这条规则将匹配到所有请求\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e# 但是正则和最长字符串会优先匹配\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e B ] \n}\n\nlocation \/documents\/ {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 匹配任何以 \/documents\/ 开头的地址，匹配符合以后，还要继续往下搜索\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e# 只有后面的正则表达式没有匹配到时，这一条才会采用这一条\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e C ] \n}\n\nlocation \x3cspan class=\x22hljs-regexp\x22\x3e~ \/documents\/Abc\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 匹配任何以 \/documents\/ 开头的地址，匹配符合以后，还要继续往下搜索\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e# 只有后面的正则表达式没有匹配到时，这一条才会采用这一条\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e CC ] \n}\n\nlocation\x3cspan class=\x22hljs-regexp\x22\x3e ^~\x3c\/span\x3e \/images\/ {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 匹配任何以 \/images\/ 开头的地址，匹配符合以后，停止往下搜索正则，采用这一条。\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e D ] \n}\n\nlocation \x3cspan class=\x22hljs-regexp\x22\x3e~* \\.(gif|jpg|jpeg)$\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 匹配所有以 gif,jpg或jpeg 结尾的请求\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e# 然而，所有请求 \/images\/ 下的图片会被 config D 处理，因为 ^~ 到达不了这一条正则\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e E ] \n}\n\nlocation \/images\/ {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 字符匹配到 \/images\/，继续往下，会发现 ^~ 存在\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e F ] \n}\n\nlocation \/images\/abc {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 最长字符匹配到 \/images\/abc，继续往下，会发现 ^~ 存在\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e# F与G的放置顺序是没有关系的\x3c\/span\x3e\n  [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e G ] \n}\n\nlocation \x3cspan class=\x22hljs-regexp\x22\x3e~ \/images\/abc\/\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e# 只有去掉 config D 才有效：先最长匹配 config G 开头的地址，继续往下搜索，匹配到这一条正则，采用\x3c\/span\x3e\n    [ \x3cspan class=\x22hljs-attribute\x22\x3econfiguration\x3c\/span\x3e H ] \n}\n\nlocation \x3cspan class=\x22hljs-regexp\x22\x3e~* \/js\/.*\/\\.js\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e以\x3ccode\x3e=\x3c\/code\x3e开头表示精确匹配\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e^~\x3c\/code\x3e 开头表示uri以某个常规字符串开头，不是正则匹配\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e~ \x3c\/code\x3e开头表示区分大小写的正则匹配;\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e~*\x3c\/code\x3e 开头表示不区分大小写的正则匹配\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e\/\x3c\/code\x3e 通用匹配, 如果没有其它匹配,任何请求都会匹配到\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e优先级：\x3cbr\x3e(location =) \x26gt; (location 完整路径) \x26gt; (location ^~ 路径) \x26gt; (location ~,~* 正则顺序) \x26gt; (location 部分起始路径) \x26gt; (\/)\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e如何配置反向代理？\x3c\/h3\x3e\n\x3cp\x3e详解：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22# 对 “\/” 启用反向代理\nlocation \/ {\n  proxy_pass http:\/\/127.0.0.1:3000;  # 设置要代理的 uri，注意最后的 \/。可以是 Unix 域套接字路径，也可以是正则表达式。\n  proxy_redirect off; # 设置后端服务器“Location”响应头和“Refresh”响应头的替换文本\n  proxy_set_header X-Real-IP $remote_addr; # 获取用户的真实 IP 地址\n  #后端的Web服务器可以通过 X-Forwarded-For 获取用户真实IP，多个 nginx 反代的情况下，例如 CDN。参见：http:\/\/gong1208.iteye.com\/blog\/1559835 和 http:\/\/bbs.linuxtone.org\/thread-9050-1-1.html\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n  #以下是一些反向代理的配置，可选。\n  proxy_set_header Host $host; # 允许重新定义或者添加发往后端服务器的请求头。\n\n  client_max_body_size 10m; #允许客户端请求的最大单文件字节数\n  client_body_buffer_size 128k; #缓冲区代理缓冲用户端请求的最大字节数，\n  proxy_connect_timeout 90; #nginx跟后端服务器连接超时时间(代理连接超时)\n  proxy_send_timeout 90; #后端服务器数据回传时间(代理发送超时)\n  proxy_read_timeout 90; #连接成功后，后端服务器响应时间(代理接收超时)\n  proxy_buffer_size 4k; #设置代理服务器（nginx）保存用户头信息的缓冲区大小\n  proxy_buffers 4 32k; #proxy_buffers缓冲区，网页平均在32k以下的设置\n  proxy_busy_buffers_size 64k; #高负荷下缓冲大小（proxy_buffers*2）\n  proxy_temp_file_write_size 64k;\n  #设定缓存文件夹大小，大于这个值，将从upstream服务器传\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e# 对 “\/” 启用反向代理\x3c\/span\x3e\n\x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \/ {\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_pass\x3c\/span\x3e http:\/\/127.0.0.1:3000;  \x3cspan class=\x22hljs-comment\x22\x3e# 设置要代理的 uri，注意最后的 \/。可以是 Unix 域套接字路径，也可以是正则表达式。\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_redirect\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eoff\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e# 设置后端服务器“Location”响应头和“Refresh”响应头的替换文本\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_set_header\x3c\/span\x3e X-Real-IP \x3cspan class=\x22hljs-variable\x22\x3e$remote_addr\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e# 获取用户的真实 IP 地址\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e#后端的Web服务器可以通过 X-Forwarded-For 获取用户真实IP，多个 nginx 反代的情况下，例如 CDN。参见：http:\/\/gong1208.iteye.com\/blog\/1559835 和 http:\/\/bbs.linuxtone.org\/thread-9050-1-1.html\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_set_header\x3c\/span\x3e X-Forwarded-For \x3cspan class=\x22hljs-variable\x22\x3e$proxy_add_x_forwarded_for\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e#以下是一些反向代理的配置，可选。\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_set_header\x3c\/span\x3e Host \x3cspan class=\x22hljs-variable\x22\x3e$host\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e# 允许重新定义或者添加发往后端服务器的请求头。\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-attribute\x22\x3eclient_max_body_size\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e10m\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#允许客户端请求的最大单文件字节数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eclient_body_buffer_size\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e128k\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#缓冲区代理缓冲用户端请求的最大字节数，\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_connect_timeout\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e90\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#nginx跟后端服务器连接超时时间(代理连接超时)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_send_timeout\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e90\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#后端服务器数据回传时间(代理发送超时)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_read_timeout\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e90\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#连接成功后，后端服务器响应时间(代理接收超时)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_buffer_size\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4k\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#设置代理服务器（nginx）保存用户头信息的缓冲区大小\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_buffers\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e32k\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#proxy_buffers缓冲区，网页平均在32k以下的设置\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_busy_buffers_size\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e64k\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e#高负荷下缓冲大小（proxy_buffers*2）\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_temp_file_write_size\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e64k\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e#设定缓存文件夹大小，大于这个值，将从upstream服务器传\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e举例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22location ^~ \/service\/ {\n  proxy_pass http:\/\/192.168.60.245:8080\/;\n  proxy_redirect      default;\n  proxy_set_header    Host $host\n  proxy_set_header    X-Real-IP $remote_addr;\n  proxy_set_header    X-Forwarded-For  $proxy_add_x_forwarded_for;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e\x3cspan class=\x22hljs-regexp\x22\x3e ^~\x3c\/span\x3e \/service\/ {\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_pass\x3c\/span\x3e http:\/\/192.168.60.245:8080\/;\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_redirect\x3c\/span\x3e      default;\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_set_header\x3c\/span\x3e    Host \x3cspan class=\x22hljs-variable\x22\x3e$host\x3c\/span\x3e\n  proxy_set_header    X-Real-IP \x3cspan class=\x22hljs-variable\x22\x3e$remote_addr\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_set_header\x3c\/span\x3e    X-Forwarded-For  \x3cspan class=\x22hljs-variable\x22\x3e$proxy_add_x_forwarded_for\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简化：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22location \/proxy\/ {\n  proxy_pass http:\/\/backend.com\/;\n  proxy_redirect      default;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \/proxy\/ {\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_pass\x3c\/span\x3e http:\/\/backend.com\/;\n  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_redirect\x3c\/span\x3e      default;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e如何配置rewrite？\x3c\/h3\x3e\n\x3cp\x3erewrite功能就是集合正则表达式和标志位实现url重写和重定向。rewrite只能放在server{}、location{}、if(){}块中，并且只能对域名后边的出去传递参数外的字符串起作用。如URL：\x3cbr\x3e\x3ccode\x3ehttp:\/\/microloan-sms-platform.yxapp.xyz\/proxy\/sms\/task\/querydeleted?page=1\x26amp;pagesize=10\x3c\/code\x3e\x3cbr\x3e只对\/proxy\/sms\/task\/querydeleted进行重写。\x3c\/p\x3e\n\x3cp\x3e如果相对域名或参数字符串起作用，可以使用全局变量匹配，也可以使用proxy_pass反向代理。\x3c\/p\x3e\n\x3cp\x3e表明看rewrite和location功能有点像，都能实现跳转，主要区别在于rewrite是在同一域名内更改获取资源的路径，而location是对一类路径做控制访问或反向代理，可以proxy_pass到其他机器。很多情况下rewrite也会写在location里，它们的执行顺序是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e执行server块的rewrite指令\x3c\/li\x3e\n\x3cli\x3e执行location匹配\x3c\/li\x3e\n\x3cli\x3e执行选定的location中的rewrite指令\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e如果其中某步URI被重写，则重新循环执行1-3，直到找到真实存在的文件；循环超过10次，则返回500 Internal Server Error错误。\x3c\/p\x3e\n\x3cp\x3erewrite规则后边，通常会带有flag标志位：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3elast\x3c\/code\x3e : 相当于Apache的[L]标记，表示完成rewrite\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ebreak\x3c\/code\x3e : 停止执行当前虚拟主机的后续rewrite指令集\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eredirect\x3c\/code\x3e : 返回\x3ccode\x3e302\x3c\/code\x3e临时重定向，地址栏会显示跳转后的地址\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epermanent\x3c\/code\x3e : 返回\x3ccode\x3e301\x3c\/code\x3e永久重定向，地址栏会显示跳转后的地址\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ccode\x3elast\x3c\/code\x3e 和 \x3ccode\x3ebreak\x3c\/code\x3e 区别：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3elast\x3c\/code\x3e一般写在\x3ccode\x3eserver\x3c\/code\x3e和\x3ccode\x3eif\x3c\/code\x3e中，而\x3ccode\x3ebreak\x3c\/code\x3e一般使用在\x3ccode\x3elocation\x3c\/code\x3e中\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3elast\x3c\/code\x3e不终止重写后的url匹配，即新的url会再从\x3ccode\x3eserver\x3c\/code\x3e走一遍匹配流程，而\x3ccode\x3ebreak\x3c\/code\x3e终止重写后的匹配\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ebreak\x3c\/code\x3e和\x3ccode\x3elast\x3c\/code\x3e都能组织继续执行后面的rewrite指令\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3erewrite常用正则：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3e.\x3c\/code\x3e ： 匹配除换行符以外的任意字符\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e?\x3c\/code\x3e ： 重复0次或1次\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e\x2b\x3c\/code\x3e ： 重复1次或更多次\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e*\x3c\/code\x3e ： 重复0次或更多次\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e\\d\x3c\/code\x3e ：匹配数字\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e^\x3c\/code\x3e ： 匹配字符串的开始\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e$\x3c\/code\x3e ： 匹配字符串的介绍\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e{n}\x3c\/code\x3e ： 重复n次\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e{n,}\x3c\/code\x3e ： 重复n次或更多次\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e[c]\x3c\/code\x3e ： 匹配单个字符c\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e[a-z]\x3c\/code\x3e ： 匹配a-z小写字母的任意一个\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e可以使用\x3ccode\x3e()\x3c\/code\x3e来进行分组，可以通过\x3ccode\x3e$1\x3c\/code\x3e的形式来引用。\x3c\/p\x3e\n\x3cp\x3e示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22location \/proxy\/ {\n        proxy_pass http:\/\/microloan-notification-web.yxapp.in;\n        rewrite \/proxy\/(.*)$ \/$1 break;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \/proxy\/ {\n        \x3cspan class=\x22hljs-attribute\x22\x3eproxy_pass\x3c\/span\x3e http:\/\/microloan-notification-web.yxapp.in;\n        \x3cspan class=\x22hljs-attribute\x22\x3erewrite\x3c\/span\x3e \/proxy\/(.*)$ \/\x3cspan class=\x22hljs-variable\x22\x3e$1\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3ebreak\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e如何配置负载均衡？\x3c\/h3\x3e\n\x3cp\x3e示例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22upstream test.net{\n   ip_hash;\n   server 192.168.11.1:80;\n   server 192.168.11.11:80  down;\n   server 192.168.11.123:8009  max_fails=3  fail_timeout=20s;\n   server 192.168.11.1234:8080;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-attribute\x22\x3eupstream\x3c\/span\x3e test.net{\n   ip_hash;\n   \x3cspan class=\x22hljs-attribute\x22\x3eserver\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e192.168.11.1:80\x3c\/span\x3e;\n   \x3cspan class=\x22hljs-attribute\x22\x3eserver\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e192.168.11.11:80\x3c\/span\x3e  down;\n   \x3cspan class=\x22hljs-attribute\x22\x3eserver\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e192.168.11.123:8009\x3c\/span\x3e  max_fails=\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  fail_timeout=\x3cspan class=\x22hljs-number\x22\x3e20s\x3c\/span\x3e;\n   \x3cspan class=\x22hljs-attribute\x22\x3eserver\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e192\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e168\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e11\x3c\/span\x3e.\x3cspan class=\x22hljs-number\x22\x3e1234\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eupstream是Nginx的HTTP Upstream模块，这个模块通过一个简单的调度算法来实现客户端IP到后端服务器的负载均衡。\x3cbr\x3eNginx的负载均衡模块目前支持4种调度算法：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3e轮询（默认）\x3c\/code\x3e。每个请求按时间顺序逐一分配到不同的后端服务器，如果后端某台服务器宕机，故障系统被自动剔除，使用户访问不受影响。Weight 指定轮询权值，Weight值越大，分配到的访问机率越高，主要用于后端每个服务器性能不均的情况下。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eip_hash\x3c\/code\x3e。每个请求按访问IP的hash结果分配，这样来自同一个IP的访客固定访问一个后端服务器，有效解决了动态网页存在的session共享问题。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3efair\x3c\/code\x3e。这是比上面两个更加智能的负载均衡算法。此种算法可以依据页面大小和加载时间长短智能地进行负载均衡，也就是根据后端服务器的响应时间来分配请求，响应时间短的优先分配。Nginx本身是不支持fair的，如果需要使用这种调度算法，必须下载Nginx的upstream_fair模块。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eurl_hash\x3c\/code\x3e。此方法按访问url的hash结果来分配请求，使每个url定向到同一个后端服务器，可以进一步提高后端缓存服务器的效率。Nginx本身是不支持url_hash的，如果需要使用这种调度算法，必须安装Nginx 的hash软件包。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eupstream可以设定每个后端服务器在负载均衡调度中的状态，支持的状态参数:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3edown\x3c\/code\x3e，表示当前的server暂时不参与负载均衡\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ebackup\x3c\/code\x3e，预留的备份机器。当其他所有的非backup机器出现故障或者忙的时候，才会请求\x3ccode\x3ebackup\x3c\/code\x3e机器，因此这台机器的压力最轻。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3emax_fails\x3c\/code\x3e，允许请求失败的次数，默认为\x3ccode\x3e1\x3c\/code\x3e。当超过最大次数时，返回\x3ccode\x3eproxy_next_upstream\x3c\/code\x3e 模块定义的错误。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3efail_timeout\x3c\/code\x3e，在经历了\x3ccode\x3emax_fails\x3c\/code\x3e次失败后，暂停服务的时间。\x3ccode\x3emax_fails\x3c\/code\x3e可以和\x3ccode\x3efail_timeout\x3c\/code\x3e一起使用。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3e注，当负载调度算法为ip_hash时，后端服务器在负载均衡调度中的状态不能是weight和backup。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e如何设置页面缓存？\x3c\/h3\x3e\n\x3cp\x3e页面缓存设置指令：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e\x3ccode\x3eproxy_cache_path \x3c\/code\x3e: 指定缓存的路径和一些其他参数，缓存的数据存储在文件中，并且使用代理url的哈希值作为关键字与文件名。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  proxy_cache_path \/data\/nginx\/cache\/webserver levels=1:2 keys_zone=webserver:20m max_size=1g;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e  \x3cspan class=\x22hljs-attribute\x22\x3eproxy_cache_path\x3c\/span\x3e \/data\/nginx\/cache\/webserver levels=\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e keys_zone=webserver:\x3cspan class=\x22hljs-number\x22\x3e20m\x3c\/span\x3e max_size=\x3cspan class=\x22hljs-number\x22\x3e1g\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3elevels\x3c\/code\x3e参数指定缓存的子目录数。\x3ccode\x3ekeys_zone\x3c\/code\x3e指定活动的key和元数据存储在共享池（webserver为共享池名称，20m位共享池大小），\x3ccode\x3einactive\x3c\/code\x3e参数指定的时间内缓存的数据没有被请求则被删除，默认inactive为10分钟\x3ccode\x3e·max_size\x3c\/code\x3e指定缓存空间的大小。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eproxy_cache \x3c\/code\x3e: 设置一个缓存区域的名称，一个相同的区域可以在不同的地方使用。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eproxy_cache_valid \x3c\/code\x3e: 为不同的应答设置不同的缓存时间。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e如何设置读写分离？\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22server {\n        listen       80;\n        server_name  localhost;\n        #charset koi8-r;\n        #access_log  logs\/host.access.log  main;\n        location \/ {\n                proxy_pass http:\/\/192.128.133.202;\n                if ($request_method = \x26quot;PUT\x26quot;){\n                        proxy_pass http:\/\/192.128.18.201;\n                }\n        }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22nginx hljs\x22\x3e\x3ccode class=\x22nginx\x22\x3e\x3cspan class=\x22hljs-section\x22\x3eserver\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3elisten\x3c\/span\x3e       \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-attribute\x22\x3eserver_name\x3c\/span\x3e  localhost;\n        \x3cspan class=\x22hljs-comment\x22\x3e#charset koi8-r;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e#access_log  logs\/host.access.log  main;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \/ {\n                \x3cspan class=\x22hljs-attribute\x22\x3eproxy_pass\x3c\/span\x3e http:\/\/192.128.133.202;\n                \x3cspan class=\x22hljs-attribute\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-variable\x22\x3e$request_method\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22PUT\x22\x3c\/span\x3e){\n                        \x3cspan class=\x22hljs-attribute\x22\x3eproxy_pass\x3c\/span\x3e http:\/\/192.128.18.201;\n                }\n        }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e参考\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/imweb.io\/topic\/56386972d12b230c26e1a17d\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNginx能为前端开发带来什么？\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/www.arayzou.com\/2016\/09\/20\/%E5%89%8D%E7%AB%AF%E5%B7%A5%E7%A8%8B%E5%B8%88%E5%BA%94%E8%AF%A5%E7%9F%A5%E9%81%93%E7%9A%84nginx\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e前端工程师应该知道的Nginx\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/www.itsns.org\/article\/2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e前端 Nginx https SSL proxy \x2b 后端 Nginx http 应用的布署教程\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000002797606#articleHeader0\x22\x3enginx配置location总结及rewrite规则写法\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000002797601#articleHeader3\x22 target=\x22_blank\x22\x3enginx服务器安装及配置文件详解\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/freeloda.blog.51cto.com\/2033581\/1288553\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/freeloda.blog.51cto.com\/2033581\/1288553\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端nginx使用札记</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013781162">https://segmentfault.com/a/1190000013781162</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mfdtjiszhoh/" target="_blank">https://alili.tech/archive/mfdtjiszhoh/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>