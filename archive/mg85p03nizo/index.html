<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Docker 及 GitLab CI 在前端工作流上的实践分享（二）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Docker 及 GitLab CI 在前端工作流上的实践分享（二） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mg85p03nizo/",
				"appid": "1613049289050283", 
				"title": "Docker 及 GitLab CI 在前端工作流上的实践分享（二） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-29T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/tzfwe5u6aj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/2st07fx7663/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&text=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&text=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&title=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&is_video=false&description=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&title=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&title=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&title=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmg85p03nizo%2f&title=Docker%20%e5%8f%8a%20GitLab%20CI%20%e5%9c%a8%e5%89%8d%e7%ab%af%e5%b7%a5%e4%bd%9c%e6%b5%81%e4%b8%8a%e7%9a%84%e5%ae%9e%e8%b7%b5%e5%88%86%e4%ba%ab%ef%bc%88%e4%ba%8c%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Docker 及 GitLab CI 在前端工作流上的实践分享（二）</h1><div class="meta"><div class="postdate"><time datetime="2018-12-29" itemprop="datePublished">2018-12-29</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000011553744\x22\x3e上一篇\x3c\/a\x3e讲了 Docker 的使用，这篇同样通过一个简单示例，来讲讲 \x3ca href=\x22https:\/\/docs.gitlab.com\/ee\/ci\/README.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGitLab CI\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e一、什么是 GitLab CI ？\x3c\/h3\x3e\n\x3cp\x3egitlab-ci 全称是 gitlab continuous integration，也就是基于 gitlab 的持续集成工具。中心思想是当每一次\x3cbr\x3epush到gitlab的时候，都会触发一次脚本执行，然后脚本的内容包括了测试，编译，部署等一系列自定义的内容。\x3cbr\x3e高版本的 GitLab 自带了 GitLab CI,所以不需要另外安装。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e二、什么是 GitLab-Runner ？\x3c\/h3\x3e\n\x3cp\x3eGitLab-Runner 是脚本执行的承载者，GitLab-CI 事先注册好 GitLab-Runner，再 push 代码，对应的 Runner 就会执行你所定义的脚本。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011553996?w=1000\x26amp;h=407\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011553996?w=1000\x26amp;h=407\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e三、安装 GitLab-Runner\x3c\/h3\x3e\n\x3cp\x3eGitlab Runner安装方式有两种，一种是直接二进制文件安装，一种是基于docker镜像安装。\x3c\/p\x3e\n\x3ch4\x3e二进制文件安装\x3c\/h4\x3e\n\x3cp\x3e[1] 下载对应操作系统的二进制包，我这里使用的是mac版本，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22sudo curl --output \/usr\/local\/bin\/gitlab-ci-multi-runner https:\/\/gitlab-ci-multi-runner-downloads.s3.amazonaws.com\/latest\/binaries\/gitlab-ci-multi-runner-darwin-amd64\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3esudo curl --output \x3cspan class=\x22hljs-regexp\x22\x3e\/usr\/\x3c\/span\x3elocal\x3cspan class=\x22hljs-regexp\x22\x3e\/bin\/gi\x3c\/span\x3etlab-ci-multi-runner https:\x3cspan class=\x22hljs-regexp\x22\x3e\/\/gi\x3c\/span\x3etlab-ci-multi-runner-downloads.s3.amazonaws.com\x3cspan class=\x22hljs-regexp\x22\x3e\/latest\/\x3c\/span\x3ebinaries\x3cspan class=\x22hljs-regexp\x22\x3e\/gitlab-ci-multi-runner-darwin-amd64\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e[2] 给 gitlab-ci-multi-runner 设置权限\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22sudo chmod \x2bx \/usr\/local\/bin\/gitlab-ci-multi-runner\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3esudo chmod \x2bx \x3cspan class=\x22hljs-regexp\x22\x3e\/usr\/\x3c\/span\x3elocal\x3cspan class=\x22hljs-regexp\x22\x3e\/bin\/gi\x3c\/span\x3etlab-ci-multi-runner\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上是官方安装文档，如果有问题，可以手动到\x3ca href=\x22https:\/\/gitlab-ci-multi-runner-downloads.s3.amazonaws.com\/v1.11.2\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e版本下载列表\x3c\/a\x3e下载对应的版本，然后复制到\x3ccode\x3e\/usr\/local\/bin\/\x3c\/code\x3e目录下 ---- \x3cstrong\x3e\x3cem\x3e反正我是自己下载安装才能用的，泪目 T T\x3c\/em\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e[3] 注册runner\x3cbr\x3e首先，进入到你的 gitlab 项目网页，找到 Settings -\x26gt; Pipelines，然后找到对应的 \x3cstrong\x3eurl\x3c\/strong\x3e 和 \x3cstrong\x3etoken\x3c\/strong\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011553997?w=1000\x26amp;h=602\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011553997?w=1000\x26amp;h=602\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e然后在终端输入\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22gitlab-ci-multi-runner register\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cpp\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3egitlab-ci-multi-runner \x3cspan class=\x22hljs-keyword\x22\x3eregister\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011553998?w=800\x26amp;h=244\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011553998?w=800\x26amp;h=244\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e然后刷新你的网页，会看到\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011553999?w=1000\x26amp;h=568\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011553999?w=1000\x26amp;h=568\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e说明注册成功了。\x3c\/p\x3e\n\x3cp\x3e另外，我们可以通过 \x3ccode\x3egitlab-ci-multi-runner list\x3c\/code\x3e 查询你注册的runner ，用 \x3ccode\x3egitlab-ci-multi-runner status\x3c\/code\x3e 查看 runner 服务是否运行中。\x3c\/p\x3e\n\x3ch4\x3edocker镜像安装\x3c\/h4\x3e\n\x3cp\x3e[1] 先获取 gitlab-runner 镜像\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22sudo docker pull gitlab\/gitlab-runner:latest\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs groovy\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3esudo docker pull gitlab\/gitlab-\x3cspan class=\x22hljs-string\x22\x3erunner:\x3c\/span\x3elatest\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e[2] 启动 gitlab-runner container\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22sudo docker run -d --name gitlab-runner --restart always \\\n  -v \/srv\/gitlab-runner\/config:\/etc\/gitlab-runner \\\n  -v \/var\/run\/docker.sock:\/var\/run\/docker.sock \\\n  gitlab\/gitlab-runner:latest\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode\x3esudo docker run -d --name gitlab-runner --restart always \\\n  -v \x3cspan class=\x22hljs-regexp\x22\x3e\/srv\/gi\x3c\/span\x3etlab-runner\x3cspan class=\x22hljs-regexp\x22\x3e\/config:\/\x3c\/span\x3eetc\x3cspan class=\x22hljs-regexp\x22\x3e\/gitlab-runner \\\n  -v \/\x3c\/span\x3evar\x3cspan class=\x22hljs-regexp\x22\x3e\/run\/\x3c\/span\x3edocker.sock:\x3cspan class=\x22hljs-regexp\x22\x3e\/var\/\x3c\/span\x3erun\x3cspan class=\x22hljs-regexp\x22\x3e\/docker.sock \\\n  gitlab\/gi\x3c\/span\x3etlab-runner:latest\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e[3] 注册runner\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22sudo docker exec -it gitlab-runner gitlab-ci-multi-runner register\n\n注册过程略，方式同方式一步骤3.\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs armasm\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-symbol\x22\x3esudo\x3c\/span\x3e docker exec -\x3cspan class=\x22hljs-keyword\x22\x3eit \x3c\/span\x3egitlab-runner gitlab-ci-\x3cspan class=\x22hljs-keyword\x22\x3emulti-runner \x3c\/span\x3eregister\n\n注册过程略，方式同方式一步骤\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e.\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e四、配置.gitlab-ci.yml\x3c\/h3\x3e\n\x3cp\x3eGitLab CI的一切工作，都是由 .gitlab-ci.yml 来配置的。详细文档可以参考\x3ca href=\x22https:\/\/docs.gitlab.com\/ee\/ci\/yaml\/README.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e首先，在项目根目录下创建 .gitlab-ci.yml 文件（\x3cstrong\x3e编辑完要提交到g itlab 才能生效\x3c\/strong\x3e）：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22#定义 stages，用来定义工作阶段，多个 stages 会按顺序进行\nstages:\n  - build\n  - deploy_test\n  - deploy_production\n\n# 设置缓存 \ncache:\n  paths:\n    - node_modules\/\n    - dist\/\n\n# 安装依赖 before_script 会在每个 stages 执行之前运行\nbefore_script:\n- npm install\n\n# 编译 这里对应上方 stages ，\nbuild:\n  stage: build \n  script:    # script 为要执行的命令，可以多条按顺序执行\n    - npm run build\n\n# 部署测试服务器 \ndeploy_test:\n  stage: deploy_test\n  only:    # only 定义触发分支，即只有在dev分支提交是  才执行以下命令\n    - dev\n  script:\n    - bash scripts\/dev.sh\n\n\n# 部署生产服务器\ndeploy_production:\n  stage: deploy_production\n  only:\n    - master\n  script:\n    - bash scripts\/deploy.sh\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-meta\x22\x3e#定义 stages，用来定义工作阶段，多个 stages 会按顺序进行\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3estages:\x3c\/span\x3e\n  - build\n  - deploy_test\n  - deploy_production\n\n\x3cspan class=\x22hljs-meta\x22\x3e# 设置缓存 \x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3ecache:\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e  paths:\x3c\/span\x3e\n    - node_modules\/\n    - dist\/\n\n\x3cspan class=\x22hljs-meta\x22\x3e# 安装依赖 before_script 会在每个 stages 执行之前运行\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3ebefore_script:\x3c\/span\x3e\n- npm install\n\n\x3cspan class=\x22hljs-meta\x22\x3e# 编译 这里对应上方 stages ，\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3ebuild:\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e  stage:\x3c\/span\x3e build \n\x3cspan class=\x22hljs-symbol\x22\x3e  script:\x3c\/span\x3e    \x3cspan class=\x22hljs-meta\x22\x3e# script 为要执行的命令，可以多条按顺序执行\x3c\/span\x3e\n    - npm run build\n\n\x3cspan class=\x22hljs-meta\x22\x3e# 部署测试服务器 \x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3edeploy_test:\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e  stage:\x3c\/span\x3e deploy_test\n\x3cspan class=\x22hljs-symbol\x22\x3e  only:\x3c\/span\x3e    \x3cspan class=\x22hljs-meta\x22\x3e# only 定义触发分支，即只有在dev分支提交是  才执行以下命令\x3c\/span\x3e\n    - dev\n\x3cspan class=\x22hljs-symbol\x22\x3e  script:\x3c\/span\x3e\n    - bash scripts\/dev.sh\n\n\n\x3cspan class=\x22hljs-meta\x22\x3e# 部署生产服务器\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3edeploy_production:\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e  stage:\x3c\/span\x3e deploy_production\n\x3cspan class=\x22hljs-symbol\x22\x3e  only:\x3c\/span\x3e\n    - master\n\x3cspan class=\x22hljs-symbol\x22\x3e  script:\x3c\/span\x3e\n    - bash scripts\/deploy.sh\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e配置完成后，当你在项目 push 代码到 gitlab 的时候，就会触发 gitlab-ci，然后执行你定义的代码。\x3cbr\x3e可以在\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011554000?w=1000\x26amp;h=420\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011554000?w=1000\x26amp;h=420\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3erunning 表示正在运行，passed 表示通过了。\x3cbr\x3eps:有个容易遇到的坑，当你卡在 pending 不动的时候，可以看看你的 runner 是否设置了 \x27无 tag 标签也运行\x27\x3cbr\x3e回到你的 runner，点编辑\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011554001?w=1000\x26amp;h=171\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011554001?w=1000\x26amp;h=171\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e然后，勾选第二项 \x3ccode\x3eRun untagged jobs\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e运行日志可以在这里查看\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011554002?w=1000\x26amp;h=746\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011554002?w=1000\x26amp;h=746\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e那么到这，GitLab CI 的基本使用，已经完成啦，赶快去试一下吧 ：）\x3c\/p\x3e\n\x3cp\x3e参考资料：\x3cbr\x3e\x3ca href=\x22https:\/\/docs.gitlab.com\/runner\/install\/osx.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egitlab-runner 安装\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/docs.gitlab.com\/ee\/ci\/yaml\/README.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egitlab ci yaml 配置\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.jianshu.com\/p\/df433633816b\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e【后端】gitlab之gitlab-ci自动部署\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Docker 及 GitLab CI 在前端工作流上的实践分享（二）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011553991">https://segmentfault.com/a/1190000011553991</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mg85p03nizo/" target="_blank">https://alili.tech/archive/mg85p03nizo/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>