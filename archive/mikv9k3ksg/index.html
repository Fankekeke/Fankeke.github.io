<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="手拉手，用Vue开发动态刷新Echarts组件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>手拉手，用Vue开发动态刷新Echarts组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mikv9k3ksg/",
				"appid": "1613049289050283", 
				"title": "手拉手，用Vue开发动态刷新Echarts组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-09T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/z56veaq246d/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/qvanrrke00r/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&text=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&text=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&title=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&is_video=false&description=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&title=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&title=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&title=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmikv9k3ksg%2f&title=%e6%89%8b%e6%8b%89%e6%89%8b%ef%bc%8c%e7%94%a8Vue%e5%bc%80%e5%8f%91%e5%8a%a8%e6%80%81%e5%88%b7%e6%96%b0Echarts%e7%bb%84%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">手拉手，用Vue开发动态刷新Echarts组件</h1><div class="meta"><div class="postdate"><time datetime="2018-12-09" itemprop="datePublished">2018-12-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e从几年前流行的jQuery插件，到现在React和Vue的组件，在业务需求的开发中抽象通用出通用的模块，一直都是一个对个人技术提高非常有帮助的事情。本文从一个真实业务组件的开发，来介绍封装一个组件应该如何从哪些方面去思考，以及在使用框架开发的今天，核心基础知识的重要性。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e需求背景\x3c\/h2\x3e\n\x3cp\x3edashboard作为目前企业中后台产品的“门面”，如何更加实时、高效、炫酷的对统计数据进行展示，是值得前端开发工程师和UI设计师共同思考的一个问题。今天就从0开始，封装一个动态渲染数据的Echarts折线图组件，抛砖引玉，一起来思考更多有意思的组件。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e准备工作\x3c\/h2\x3e\n\x3ch4\x3e项目结构搭建\x3c\/h4\x3e\n\x3cp\x3e因为生产需要（其实是懒），所以本教程使用了 ==vue-cli==进行了项目的基础结构搭建。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install -g vue-cli\nvue init webpack vue-charts\ncd vue-charts\nnpm run dev\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3enpm install -g vue-cli\nvue init webpack vue-charts\n\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e vue-charts\nnpm run dev\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e安装Echarts\x3c\/h4\x3e\n\x3cp\x3e直接使用npm进行安装。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install echarts --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install echarts --save\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e引入Echarts\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/在main.js加入下面两行代码\nimport echarts from \x27echarts\x27\nVue.prototype.$echarts = echarts \/\/将echarts注册成Vue的全局属性\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/在main.js加入下面两行代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e echarts \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27echarts\x27\x3c\/span\x3e\nVue.prototype.$echarts = echarts \x3cspan class=\x22hljs-comment\x22\x3e\/\/将echarts注册成Vue的全局属性\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到此，准备工作已经完成了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e静态组件开发\x3c\/h2\x3e\n\x3cp\x3e因为被《React编程思想》这篇文章毒害太深，所以笔者开发组件也习惯从基础到高级逐步迭代。\x3c\/p\x3e\n\x3cp\x3e静态组件要实现的目的很简单，就是把Echarts图表，渲染到页面上。\x3c\/p\x3e\n\x3ch4\x3e新建Chart.vue文件\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv :id=\x26quot;id\x26quot; :style=\x26quot;style\x26quot;\x3e\x3c\/div\x3e\n\x3c\/template\x3e\n\x3cscript\x3e\nexport default {\n  name: \x26quot;Chart\x26quot;,\n  data() {\n    return {\n      \/\/echarts实例\n      chart: \x26quot;\x26quot;\n    };\n  },\n  props: {\n    \/\/父组件需要传递的参数：id，width，height，option\n    id: {\n      type: String\n    },\n    width: {\n      type: String,\n      default: \x26quot;100%\x26quot;\n    },\n    height: {\n      type: String,\n      default: \x26quot;300px\x26quot;\n    },\n    option: {\n      type: Object,\n      \/\/Object类型的prop值一定要用函数return出来，不然会报错。原理和data是一样的，\n      \/\/使用闭包保证一个vue实例拥有自己的一份props\n      default() {\n        return {\n          title: {\n            text: \x26quot;vue-Echarts\x26quot;\n          },\n          legend: {\n            data: [\x26quot;销量\x26quot;]\n          },\n          xAxis: {\n            data: [\x26quot;衬衫\x26quot;, \x26quot;羊毛衫\x26quot;, \x26quot;雪纺衫\x26quot;, \x26quot;裤子\x26quot;, \x26quot;高跟鞋\x26quot;, \x26quot;袜子\x26quot;]\n          },\n          yAxis: [\n            {\n              type: \x26quot;value\x26quot;\n            }\n          ],\n          series: [\n            {\n              name: \x26quot;销量\x26quot;,\n              type: \x26quot;line\x26quot;,\n              data: [5, 20, 36, 10, 10, 70]\n            }\n          ]\n        };\n      }\n    }\n  },\n  computed: {\n    style() {\n      return {\n        height: this.height,\n        width: this.width\n      };\n    }\n  },\n  mounted() {\n    this.init();\n  },\n  methods: {\n    init() {\n      this.chart = this.$echarts.init(document.getElementById(this.id));\n      this.chart.setOption(this.option);\n    }\n  }\n};\n\x3c\/script\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode class=\x22vue\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e\x26lt;template\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-params\x22\x3e\x26lt;div :id=\x22id\x22 :style=\x22style\x22\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e\x26lt;\/div\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-params\x22\x3e\x26lt;\/template\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-params\x22\x3e\x26lt;script\x26gt;\x3c\/span\x3e\nexport \x3cspan class=\x22hljs-class\x22\x3edefault \x3c\/span\x3e{\n\x3cspan class=\x22hljs-symbol\x22\x3e  name:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22Chart\x22\x3c\/span\x3e,\n  data() {\n    \x3cspan class=\x22hljs-class\x22\x3ereturn \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/echarts实例\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e      chart:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e\n    };\n  },\n\x3cspan class=\x22hljs-symbol\x22\x3e  props:\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/父组件需要传递的参数：id，width，height，option\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e    id:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e      type:\x3c\/span\x3e String\n    },\n\x3cspan class=\x22hljs-symbol\x22\x3e    width:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e      type:\x3c\/span\x3e String,\n\x3cspan class=\x22hljs-symbol\x22\x3e      default:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22100%\x22\x3c\/span\x3e\n    },\n\x3cspan class=\x22hljs-symbol\x22\x3e    height:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e      type:\x3c\/span\x3e String,\n\x3cspan class=\x22hljs-symbol\x22\x3e      default:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22300px\x22\x3c\/span\x3e\n    },\n\x3cspan class=\x22hljs-symbol\x22\x3e    option:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e      type:\x3c\/span\x3e Object,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/Object类型的prop值一定要用函数return出来，不然会报错。原理和data是一样的，\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/使用闭包保证一个vue实例拥有自己的一份props\x3c\/span\x3e\n      default() {\n        \x3cspan class=\x22hljs-class\x22\x3ereturn \x3c\/span\x3e{\n\x3cspan class=\x22hljs-symbol\x22\x3e          title:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e            text:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22vue-Echarts\x22\x3c\/span\x3e\n          },\n\x3cspan class=\x22hljs-symbol\x22\x3e          legend:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e            data:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x22销量\x22\x3c\/span\x3e]\n          },\n\x3cspan class=\x22hljs-symbol\x22\x3e          xAxis:\x3c\/span\x3e {\n\x3cspan class=\x22hljs-symbol\x22\x3e            data:\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x22衬衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22羊毛衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22雪纺衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22裤子\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22高跟鞋\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22袜子\x22\x3c\/span\x3e]\n          },\n\x3cspan class=\x22hljs-symbol\x22\x3e          yAxis:\x3c\/span\x3e [\n            {\n\x3cspan class=\x22hljs-symbol\x22\x3e              type:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22value\x22\x3c\/span\x3e\n            }\n          ],\n\x3cspan class=\x22hljs-symbol\x22\x3e          series:\x3c\/span\x3e [\n            {\n\x3cspan class=\x22hljs-symbol\x22\x3e              name:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22销量\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-symbol\x22\x3e              type:\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22line\x22\x3c\/span\x3e,\n\x3cspan class=\x22hljs-symbol\x22\x3e              data:\x3c\/span\x3e [\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e70\x3c\/span\x3e]\n            }\n          ]\n        };\n      }\n    }\n  },\n\x3cspan class=\x22hljs-symbol\x22\x3e  computed:\x3c\/span\x3e {\n    style() {\n      \x3cspan class=\x22hljs-class\x22\x3ereturn \x3c\/span\x3e{\n\x3cspan class=\x22hljs-symbol\x22\x3e        height:\x3c\/span\x3e this.height,\n\x3cspan class=\x22hljs-symbol\x22\x3e        width:\x3c\/span\x3e this.width\n      };\n    }\n  },\n  mounted() {\n    this.init();\n  },\n\x3cspan class=\x22hljs-symbol\x22\x3e  methods:\x3c\/span\x3e {\n    init() {\n      this.chart = this.$echarts.init(document.getElementById(this.id));\n      this.chart.setOption(this.option);\n    }\n  }\n};\n\x3cspan class=\x22hljs-params\x22\x3e\x26lt;\/script\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述文件就实现了将一个简单折线图渲染到页面的组件，怎么样是不是很简单？最简使用方法如下：\x3c\/p\x3e\n\x3ch4\x3eApp.vue\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv id=\x26quot;app\x26quot;\x3e\n    \x3cChart id=\x26quot;test\x26quot;\/\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\nimport Chart from \x26quot;.\/components\/Chart\x26quot;;\nexport default {\n  name: \x26quot;App\x26quot;,\n  data() {},\n  components: {\n    Chart\n  }\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode class=\x22vue\x22\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eChart\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Chart \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22.\/components\/Chart\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{\n  name: \x22App\x22,\n  data() {}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22undefined\x22\x3e,\n  components: \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{\n    Chart\n  }\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22undefined\x22\x3e\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e至此，运行程序你应该能看到以下效果：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6u11?w=923\x26amp;h=354\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6u11?w=923\x26amp;h=354\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e第一次迭代\x3c\/h2\x3e\n\x3cp\x3e现在我们已经有了一个基础版本，让我们来看看哪些方面做的还不尽如人意：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e图表无法根据窗口大小进行自动缩放，虽然设置了宽度为100%，但是只有刷新页面图表才会重新进行渲染，这会让用户体验变得很差。\x3c\/li\x3e\n\x3cli\x3e图表目前无法实现数据自动刷新\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e下面我们来实现这两点：\x3c\/p\x3e\n\x3ch4\x3e自动缩放\x3c\/h4\x3e\n\x3cp\x3eEcharts本身是不支持自动缩放的，但是Echarts为我们提供了resize方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/在init方法中加入下面这行代码\nwindow.addEventListener(\x26quot;resize\x26quot;, this.chart.resize);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/在init方法中加入下面这行代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22resize\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.chart.resize);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e只需要这一句，我们就实现了图表跟随窗口大小自适应的需求。\x3c\/p\x3e\n\x3ch4\x3e支持数据自动刷新\x3c\/h4\x3e\n\x3cp\x3e因为Echarts是数据驱动的，这意味着只要我们重新设置数据，那么图表就会随之重新渲染，这是实现本需求的基础。我们再设想一下，如果想要支持数据的自动刷新，必然需要一个监听器能够实时监听到数据的变化然后告知Echarts重新设置数据。所幸Vue为我们提供了\x3ccode\x3ewatcher\x3c\/code\x3e功能，通过它我们可以很方便的实现上述功能：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/在Chart.vue中加入watch\n  watch: {\n    \/\/观察option的变化\n    option: {\n      handler(newVal, oldVal) {\n        if (this.chart) {\n          if (newVal) {\n            this.chart.setOption(newVal);\n          } else {\n            this.chart.setOption(oldVal);\n          }\n        } else {\n            this.init();\n        }\n      },\n      deep: true \/\/对象内部属性的监听，关键。\n    }\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/在Chart.vue中加入watch\x3c\/span\x3e\n  watch: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/观察option的变化\x3c\/span\x3e\n    option: {\n      handler(newVal, oldVal) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.chart) {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newVal) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.chart.setOption(newVal);\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.chart.setOption(oldVal);\n          }\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init();\n        }\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3edeep\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/对象内部属性的监听，关键。\x3c\/span\x3e\n    }\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面代码就实现了我们对option对象中属性变化的监听，一旦option中的数据有了变化，那么图表就会重新渲染。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e实现动态刷新\x3c\/h2\x3e\n\x3cp\x3e下一步我想大家都知道了，就是定时从后台拉取数据，然后更新父组件的option就好。这个地方有两个问题需要思考一下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e如果图表要求每秒增加一个数据，应该如何进行数据的请求才能达到性能与用户体验的平衡？\x3c\/li\x3e\n\x3cli\x3e动态更新数据的代码，应该放在父组件还是子组件？\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e对第一个问题，每秒实时获取服务器的数据，肯定是最精确的，这就有两种方案：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e每秒向后台请求一次\x3c\/li\x3e\n\x3cli\x3e保持长连接，后台每秒向前端推送一次数据\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e第一种方案无疑对性能和资源产生了极大的浪费；除非实时性要求特别高（股票系统），否则不推荐这种方式；\x3c\/p\x3e\n\x3cp\x3e第二种方案需要使用web Socket，但在服务端需要进行额外的开发工作。\x3c\/p\x3e\n\x3cp\x3e笔者基于项目的实际需求（实时性要求不高，且后台生成数据也有一定的延迟性），采用了以下方案：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e前端每隔一分钟向后台请求一次数据，且为当前时间的上一分钟的数据；\x3c\/li\x3e\n\x3cli\x3e前端将上述数据每隔一秒向图表set一次数据\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e关于第二个问题：笔者更倾向于将Chart组件设计成纯组件，即只接收父组件传递的数据进行变化，不在内部进行复杂操作；这也符合目前前端MVVM框架的最佳实践；而且若将数据传递到Chart组件内部再进行处理，一是遇到不需要动态渲染的需求还需要对组件进行额外处理，二是要在Chart内部做ajax操作，这样就导致Chart完全没有了可复用性。\x3c\/p\x3e\n\x3cp\x3e接下来我们修改App.vue\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv id=\x26quot;app\x26quot;\x3e\n    \x3cChart id=\x26quot;test\x26quot; :option=\x26quot;option\x26quot;\/\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3ctemplate\x3e\n  \x3cdiv id=\x26quot;app\x26quot;\x3e\n    \x3cChart id=\x26quot;test\x26quot; :option=\x26quot;option\x26quot;\/\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\nimport Chart from \x26quot;.\/components\/Chart\x26quot;;\nexport default {\n  name: \x26quot;App\x26quot;,\n  data() {\n    return {\n      \/\/笔者使用了mock数据代表从服务器获取的数据\n      chartData: {\n        xData: [\x26quot;衬衫\x26quot;, \x26quot;羊毛衫\x26quot;, \x26quot;雪纺衫\x26quot;, \x26quot;裤子\x26quot;, \x26quot;高跟鞋\x26quot;, \x26quot;袜子\x26quot;],\n        sData: [5, 20, 36, 10, 10, 70]\n      },\n      option: {\n        title: {\n          text: \x26quot;vue-Echarts\x26quot;\n        },\n        legend: {\n          data: [\x26quot;销量\x26quot;]\n        },\n        xAxis: {\n          data: [\x26quot;衬衫\x26quot;, \x26quot;羊毛衫\x26quot;, \x26quot;雪纺衫\x26quot;, \x26quot;裤子\x26quot;, \x26quot;高跟鞋\x26quot;, \x26quot;袜子\x26quot;]\n        },\n        yAxis: [\n          {\n            type: \x26quot;value\x26quot;\n          }\n        ],\n        series: [\n          {\n            name: \x26quot;销量\x26quot;,\n            type: \x26quot;line\x26quot;,\n            data: [5, 20, 36, 10, 10, 70]\n          }\n        ]\n      }\n    };\n  },\n  components: {\n    Chart\n  },\n  mounted() {\n    this.refreshData();\n  },\n  methods: {\n    \/\/添加refreshData方法进行自动设置数据\n    refreshData() {\n      \/\/横轴数据\n      let xData = this.chartData.xData,\n        \/\/系列值\n        sData = this.chartData.sData;\n      for (let i = 0; i \x3c xData.length; i\x2b\x2b) {\n        \/\/此处使用let是关键，也可以使用闭包。原理不再赘述\n        setTimeout(() =\x3e {\n          this.option.xAxis.data.push(xData[i]);\n          this.option.series[0].data.push(sData[i]);\n        }, 1000 * i); \/\/此处要理解为什么是1000*i\n      }\n    }\n  }\n};\n\x3c\/script\x3e\n\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode class=\x22vue\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eChart\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:option\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22option\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eChart\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:option\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22option\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Chart \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22.\/components\/Chart\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22App\x22\x3c\/span\x3e,\n  data() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/笔者使用了mock数据代表从服务器获取的数据\x3c\/span\x3e\n      chartData: {\n        \x3cspan class=\x22hljs-attr\x22\x3exData\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22衬衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22羊毛衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22雪纺衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22裤子\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22高跟鞋\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22袜子\x22\x3c\/span\x3e],\n        \x3cspan class=\x22hljs-attr\x22\x3esData\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e70\x3c\/span\x3e]\n      },\n      \x3cspan class=\x22hljs-attr\x22\x3eoption\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3etitle\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3etext\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22vue-Echarts\x22\x3c\/span\x3e\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3elegend\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22销量\x22\x3c\/span\x3e]\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3exAxis\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x22衬衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22羊毛衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22雪纺衫\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22裤子\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22高跟鞋\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22袜子\x22\x3c\/span\x3e]\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3eyAxis\x3c\/span\x3e: [\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22value\x22\x3c\/span\x3e\n          }\n        ],\n        \x3cspan class=\x22hljs-attr\x22\x3eseries\x3c\/span\x3e: [\n          {\n            \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22销量\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22line\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3edata\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e70\x3c\/span\x3e]\n          }\n        ]\n      }\n    };\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3ecomponents\x3c\/span\x3e: {\n    Chart\n  },\n  mounted() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refreshData();\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/添加refreshData方法进行自动设置数据\x3c\/span\x3e\n    refreshData() {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/横轴数据\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e xData = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.chartData.xData,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/系列值\x3c\/span\x3e\n        sData = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.chartData.sData;\n      \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; xData.length; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/此处使用let是关键，也可以使用闭包。原理不再赘述\x3c\/span\x3e\n        setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.option.xAxis.data.push(xData[i]);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.option.series[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].data.push(sData[i]);\n        }, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e * i); \x3cspan class=\x22hljs-comment\x22\x3e\/\/此处要理解为什么是1000*i\x3c\/span\x3e\n      }\n    }\n  }\n};\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e至此我们就实现了图表动态数据加载，效果如下图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6u19?w=600\x26amp;h=326\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6u19?w=600\x26amp;h=326\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e这篇教程通过一个动态图表的开发，传递了以下信息：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eEcharts如何与Vue结合使用\x3c\/li\x3e\n\x3cli\x3eVue组件开发、纯组件与“脏”组件的区别\x3c\/li\x3e\n\x3cli\x3eVue watch的用法\x3c\/li\x3e\n\x3cli\x3elet的特性\x3c\/li\x3e\n\x3cli\x3eJavaScript EventLoop特性\x3c\/li\x3e\n\x3cli\x3e...\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e大家可以根据这个列表查漏补缺。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e后续优化\x3c\/h2\x3e\n\x3cp\x3e这个组件还有需要需要优化的点，比如：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e间隔时间应该可配置\x3c\/li\x3e\n\x3cli\x3e每分钟从后台获取数据，那么图表展示的数据将会越来越多，越来越密集，浏览器负担越来越大，直到崩溃\x3c\/li\x3e\n\x3cli\x3e没有设置暂停图表刷新的按钮\x3c\/li\x3e\n\x3cli\x3e...\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e期待大家自己动手，开发一个属于自己的“完美”的Echarts动态组件！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>手拉手，用Vue开发动态刷新Echarts组件</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013903264">https://segmentfault.com/a/1190000013903264</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mikv9k3ksg/" target="_blank">https://alili.tech/archive/mikv9k3ksg/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>