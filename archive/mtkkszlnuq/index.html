<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue2.0 项目开发小结"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue2.0 项目开发小结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/mtkkszlnuq/",
				"appid": "1613049289050283", 
				"title": "vue2.0 项目开发小结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-01T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/dmdcybix19t/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/8kxucvgl4z/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&text=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&text=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&title=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&is_video=false&description=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&title=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&title=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&title=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmtkkszlnuq%2f&title=vue2.0%20%e9%a1%b9%e7%9b%ae%e5%bc%80%e5%8f%91%e5%b0%8f%e7%bb%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue2.0 项目开发小结</h1><div class="meta"><div class="postdate"><time datetime="2019-01-01" itemprop="datePublished">2019-01-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e项目架构\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e项目目录\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├── build\n├── config\n├── dist\n│\x26nbsp;\x26nbsp; └── static\n│\x26nbsp;\x26nbsp;     ├── css\n│\x26nbsp;\x26nbsp;     ├── fonts\n│\x26nbsp;\x26nbsp;     ├── images\n│\x26nbsp;\x26nbsp;     ├── js\n│\x26nbsp;\x26nbsp;     └── lib\n├── src\n│\x26nbsp;\x26nbsp; ├── api\n│\x26nbsp;\x26nbsp; ├── assets\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── global\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── images\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp;     └── footer\n│\x26nbsp;\x26nbsp; ├── components\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── common\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── news\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── profile\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp;     └── charge\n│\x26nbsp;\x26nbsp; ├── config\n│\x26nbsp;\x26nbsp; ├── mixin\n│\x26nbsp;\x26nbsp; ├── router\n│\x26nbsp;\x26nbsp; ├── service\n│\x26nbsp;\x26nbsp; ├── store\n│\x26nbsp;\x26nbsp; └── util\n└── static\n    ├── images\n    └── lib \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crystal\x22\x3e\x3ccode\x3e├── build\n├── config\n├── dist\n│\x26nbsp;\x26nbsp; └── static\n│\x26nbsp;\x26nbsp;     ├── css\n│\x26nbsp;\x26nbsp;     ├── fonts\n│\x26nbsp;\x26nbsp;     ├── images\n│\x26nbsp;\x26nbsp;     ├── js\n│\x26nbsp;\x26nbsp;     └── \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elib\x3c\/span\x3e\x3c\/span\x3e\n├── src\n│\x26nbsp;\x26nbsp; ├── api\n│\x26nbsp;\x26nbsp; ├── assets\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── global\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── images\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp;     └── footer\n│\x26nbsp;\x26nbsp; ├── components\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── common\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; ├── news\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp; └── profile\n│\x26nbsp;\x26nbsp; │\x26nbsp;\x26nbsp;     └── charge\n│\x26nbsp;\x26nbsp; ├── config\n│\x26nbsp;\x26nbsp; ├── mixin\n│\x26nbsp;\x26nbsp; ├── router\n│\x26nbsp;\x26nbsp; ├── service\n│\x26nbsp;\x26nbsp; ├── store\n│\x26nbsp;\x26nbsp; └── util\n└── static\n    ├── images\n    └── \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elib\x3c\/span\x3e \x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e项目目录是采用 \x3ccode\x3evue-cli\x3c\/code\x3e 自动生成，其它按需自己新建就好了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e开发实践\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e动态修改 document title\x3c\/h3\x3e\n\x3cp\x3e在不同的路由页面，我们需要动态的修改文档标题，可以将每个页面的标题配置在路由元信息 \x3ccode\x3emeta\x3c\/code\x3e 里面带上，然后在 \x3ccode\x3erouter.afterEach\x3c\/code\x3e 钩子函数中修改：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27;\nimport Router from \x27vue-router\x27;\n\nVue.use(Router);\nconst router = new Router({\n  mode: \x27history\x27,\n  routes: [\n    { path: \x27\/\x27, component: Index, meta: { title: \x27推荐产品得丰厚奖金\x27 } },\n    {\n      path: \x27\/news\x27,\n      component: News,\n      meta: { title: \x27公告列表\x27 },\n      children: [\n        { path: \x27\x27, redirect: \x27list\x27 },\n        { path: \x27list\x27, component: NewsList },\n        { path: \x27detail\/:newsId\x27, component: NewsDetail, meta: { title: \x27公告详情\x27 } }\n      ]\n    },\n    {\n      path: \x27\/guide\x27,\n      component: GuideProtocol,\n      meta: {\n        title: \x27新手指南\x27\n      }\n    }\n  ]\n});\n\n\/\/ 使用 afterEach 钩子函数，保证路由已经跳转成功之后修改 title\nrouter.afterEach((route) =\x3e {\n  let documentTitle = \x27xxx商城会员平台\x27;\n  route.matched.forEach((path) =\x3e {\n    if (path.meta.title) {\n      documentTitle \x2b= ` - ${path.meta.title}`;\n    }\n  });\n\n  document.title = documentTitle;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue from \x27vue\x27;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Router from \x27vue-router\x27;\n\nVue.use(Router);\nconst router = new Router({\n  mode: \x3cspan class=\x22hljs-string\x22\x3e\x27history\x27\x3c\/span\x3e,\n  routes: [\n    { \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e, component: Index, meta: { \x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27推荐产品得丰厚奖金\x27\x3c\/span\x3e } },\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/news\x27\x3c\/span\x3e,\n      component: News,\n      meta: { \x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27公告列表\x27\x3c\/span\x3e },\n      children: [\n        { \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e, redirect: \x3cspan class=\x22hljs-string\x22\x3e\x27list\x27\x3c\/span\x3e },\n        { \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27list\x27\x3c\/span\x3e, component: NewsList },\n        { \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27detail\/:newsId\x27\x3c\/span\x3e, component: NewsDetail, meta: { \x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27公告详情\x27\x3c\/span\x3e } }\n      ]\n    },\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/guide\x27\x3c\/span\x3e,\n      component: GuideProtocol,\n      meta: {\n        \x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27新手指南\x27\x3c\/span\x3e\n      }\n    }\n  ]\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用 afterEach 钩子函数，保证路由已经跳转成功之后修改 title\x3c\/span\x3e\nrouter.afterEach((route) =\x26gt; {\n  let documentTitle = \x3cspan class=\x22hljs-string\x22\x3e\x27xxx商城会员平台\x27\x3c\/span\x3e;\n  route.matched.forEach((\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e.meta.\x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e) {\n      documentTitle \x2b= ` - ${\x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e.meta.\x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e}`;\n    }\n  });\n\n  document.\x3cspan class=\x22hljs-built_in\x22\x3etitle\x3c\/span\x3e = documentTitle;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e根据 URL 的变化，动态更新数据\x3c\/h3\x3e\n\x3cp\x3e通常在一个列表集合页，我们需要做分页操作，同时分页数据需要体现在 URL 中，那么如何动态的根据 URL 的变动来动态的获取数据呢，我们可以使用 \x3ccode\x3ewatch\x3c\/code\x3e API，在 \x3ccode\x3ewatch\x3c\/code\x3e 里面监听 \x3ccode\x3e$route\x3c\/code\x3e，同时使用 \x3ccode\x3ethis.$router.replace\x3c\/code\x3e API 来改变 URL 的值。下面是示例代码 \x3ccode\x3ecommon.js\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport qs from \x27qs\x27;\n\nexport default {\n  data() {\n    return {\n      queryParams: {\n        currentPage: 1,\n        pageSize: 10\n      }\n    };\n  },\n  methods: {\n    handlePageNoChange(e) {\n      this.queryParams.currentPage = e;\n      this.replaceRouter();\n    },\n\n    replaceRouter() {\n      const query = qs.stringify(this.queryParams);\n      this.$router.replace(`${location.pathname}?${query}`);\n    },\n\n    routeChange() {\n      this.assignParams();\n      this.fetchData();\n    },\n\n    assignParams() {\n      this.queryParams = Object.assign({}, this.queryParams, this.$route.query);\n    }\n  },\n  mounted() {\n    this.assignParams();\n    this.fetchData();\n  },\n  watch: {\n    $route: \x27routeChange\x27\n  }\n};\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e qs \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27qs\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  data() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-attr\x22\x3equeryParams\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ecurrentPage\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3epageSize\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e\n      }\n    };\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    handlePageNoChange(e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.queryParams.currentPage = e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.replaceRouter();\n    },\n\n    replaceRouter() {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e query = qs.stringify(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.queryParams);\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.replace(\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${location.pathname}\x3c\/span\x3e?\x3cspan class=\x22hljs-subst\x22\x3e${query}\x3c\/span\x3e`\x3c\/span\x3e);\n    },\n\n    routeChange() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.assignParams();\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.fetchData();\n    },\n\n    assignParams() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.queryParams = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.queryParams, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$route.query);\n    }\n  },\n  mounted() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.assignParams();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.fetchData();\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3ewatch\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e$route\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27routeChange\x27\x3c\/span\x3e\n  }\n};\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们将这部分代码抽取到一个公共的 \x3ccode\x3emixin\x3c\/code\x3e 中，在需要的组件那里引入它，同时实现自定义的同名 \x3ccode\x3efetchData()\x3c\/code\x3e 方法\x3cbr\x3e\x3ccode\x3emixin\x3c\/code\x3e API 文档：\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/mixins.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/cn.vuejs.org\/v2\/guide...\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default DemoComponent {\n  mixins: [common],\n  data() {\n    return {\n      \/\/ 组件内部自定义同名查询参数，将会和 mixin 中的默认参数合并\n      queryParams: {\n        categoryId: \x27\x27,\n        pageSize: 12\n      },\n    }\n  },\n  methods: {\n    fetchData() {\n       \/\/ 发送请求\n    }\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e DemoComponent {\n  \x3cspan class=\x22hljs-attr\x22\x3emixins\x3c\/span\x3e: [common],\n  data() {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 组件内部自定义同名查询参数，将会和 mixin 中的默认参数合并\x3c\/span\x3e\n      queryParams: {\n        \x3cspan class=\x22hljs-attr\x22\x3ecategoryId\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3epageSize\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e\n      },\n    }\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    fetchData() {\n       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发送请求\x3c\/span\x3e\n    }\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eEvent Bus 使用场景\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUDeS?w=657\x26amp;h=503\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUDeS?w=657\x26amp;h=503\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们在项目中引入了 \x3ccode\x3evuex\x3c\/code\x3e ，通常情况下是不需要使用 \x3ccode\x3eevent bus\x3c\/code\x3e 的，但是有一种情况下我们需要使用它，那就是在路由钩子函数内部的时，在项目中，我们需要在 \x3ccode\x3ebeforeEnter\x3c\/code\x3e 路由钩子里面对外抛出事件，在这个钩子函数中我们无法去到 \x3ccode\x3ethis\x3c\/code\x3e 对象。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22beforeEnter: (to, from, next) =\x3e {\n    const userInfo = localStorage.getItem(userFlag);\n    if (isPrivateMode()) {\n        EventBus.$emit(\x27get-localdata-error\x27);\n        next(false);\n        return;\n    }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs moonscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-name\x22\x3ebeforeEnter\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(to, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3enext\x3c\/span\x3e)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    const userInfo = localStorage.getItem(userFlag);\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isPrivateMode()) {\n        EventBus.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27get-localdata-error\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-built_in\x22\x3enext\x3c\/span\x3e(\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n    }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在 \x3ccode\x3eApp.vue\x3c\/code\x3e 的 \x3ccode\x3emouted\x3c\/code\x3e 方法中监听这个事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22EventBus.$on(\x27get-localdata-error\x27, () =\x3e {\n    this.$alert(\x27请勿使用无痕模式浏览\x27);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3eEventBus.$\x3cspan class=\x22hljs-literal\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27get-localdata-error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$alert(\x3cspan class=\x22hljs-string\x22\x3e\x27请勿使用无痕模式浏览\x27\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e自定义指令实现埋点数据统计\x3c\/h3\x3e\n\x3cp\x3e在项目中通常需要做数据埋点，这个时候，使用自定义指令将会变非常简单\x3c\/p\x3e\n\x3cp\x3e在项目入口文件 \x3ccode\x3emain.js\x3c\/code\x3e 中配置我们的自定义指令\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 坑位埋点指令\nVue.directive(\x27stat\x27, {\n  bind(el, binding) {\n    el.addEventListener(\x27click\x27, () =\x3e {\n      const data = binding.value;\n      let prefix = \x27store\x27;\n      if (OS.isAndroid || OS.isPhone) {\n        prefix = \x27mall\x27;\n      }\n      analytics.request({\n        ty: `${prefix}_${data.type}`,\n        dc: data.desc || \x27\x27\n      }, \x27n\x27);\n    }, false);\n  }\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 坑位埋点指令\x3c\/span\x3e\nVue.directive(\x3cspan class=\x22hljs-string\x22\x3e\x27stat\x27\x3c\/span\x3e, {\n  bind(el, binding) {\n    el.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e data = binding.value;\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e prefix = \x3cspan class=\x22hljs-string\x22\x3e\x27store\x27\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (OS.isAndroid || OS.isPhone) {\n        prefix = \x3cspan class=\x22hljs-string\x22\x3e\x27mall\x27\x3c\/span\x3e;\n      }\n      analytics.request({\n        ty: \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${prefix}\x3c\/span\x3e_\x3cspan class=\x22hljs-subst\x22\x3e${data.type}\x3c\/span\x3e`\x3c\/span\x3e,\n        dc: data.desc || \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n      }, \x3cspan class=\x22hljs-string\x22\x3e\x27n\x27\x3c\/span\x3e);\n    }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n  }\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e使用路由拦截统计页面级别的 PV\x3c\/h3\x3e\n\x3cp\x3e由于第一次在单页应用中尝试数据埋点，在项目上线一个星期之后，数据统计后台发现，首页的 PV 远远高于其它页面，数据很不正常。后来跟数据后台的人沟通询问他们的埋点统计原理之后，才发现其中的问题所在。\x3c\/p\x3e\n\x3cp\x3e\x3cem\x3e传统应用，一般都在页面加载的时候，会有一个异步的 js 加载，就像百度的统计代码类似，所以我们每个页面的加载的时候，都会统计到数据；然而在单页应用，页面加载初始化只有一次，所以其它页面的统计数据需要我们自己手动上报\x3c\/em\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e解决方案\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e使用 \x3ccode\x3evue-router\x3c\/code\x3e 的 \x3ccode\x3ebeforeEach\x3c\/code\x3e 或者 \x3ccode\x3eafterEach\x3c\/code\x3e 钩子上报数据，具体使用哪个最好是根据业务逻辑来选择。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const analyticsRequest = (to, from) =\x3e {\n  \/\/ 只统计页面跳转数据，不统计当前页 query 不同的数据\n  \/\/ 所以这里只使用了 path, 如果需要统计 query 的，可以使用 to.fullPath\n  if (to.path !== from.path) {\n    analytics.request({\n      url: `${location.protocol}\/\/${location.host}${to.path}`\n    });\n  }\n};\n\nrouter.beforeEach((to, from, next) =\x3e {\n  if (to.matched.some(record =\x3e record.meta.requiresAuth)) {\n    \/\/ 这里做登录等前置逻辑判断\n    \/\/ 判断通过之后，再上报数据\n    ...\n    analyticsRequest(to, from);\n  } else {\n    \/\/ 不需要判断的，直接上报数据\n    analyticsRequest(to, from);\n    next();\n  }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e analyticsRequest = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eto, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只统计页面跳转数据，不统计当前页 query 不同的数据\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所以这里只使用了 path, 如果需要统计 query 的，可以使用 to.fullPath\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (to.path !== \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e.path) {\n    analytics.request({\n      \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${location.protocol}\x3c\/span\x3e\/\/\x3cspan class=\x22hljs-subst\x22\x3e${location.host}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${to.path}\x3c\/span\x3e`\x3c\/span\x3e\n    });\n  }\n};\n\nrouter.beforeEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eto, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, next\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (to.matched.some(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3erecord\x3c\/span\x3e =\x26gt;\x3c\/span\x3e record.meta.requiresAuth)) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里做登录等前置逻辑判断\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断通过之后，再上报数据\x3c\/span\x3e\n    ...\n    analyticsRequest(to, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e);\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不需要判断的，直接上报数据\x3c\/span\x3e\n    analyticsRequest(to, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e);\n    next();\n  }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在组件中使用我们的自定义指令\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUAV0?w=1118\x26amp;h=249\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUAV0?w=1118\x26amp;h=249\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e使用过滤器实现展示信息格式化\x3c\/h3\x3e\n\x3cp\x3e如下图中奖金数据信息，我们需要将后台返回的奖金格式化为带两位小数点的格式，同时，如果返回的金额是区间类型，需要额外加上 \x26lt;span style=\x22color:red;font-weight: bold;\x22\x26gt;起\x26lt;\/span\x26gt; 字和 \x26lt;span style=\x22color:red;font-weight: bold;\x22\x26gt;￥\x26lt;\/span\x26gt; 金额符号\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUAV0?w=1118\x26amp;h=249\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUAV0?w=1118\x26amp;h=249\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在入口文件 \x3ccode\x3emain.js\x3c\/code\x3e 中配置我们自定义的过滤器\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Vue.filter(\x27money\x27, (value, config = { unit: \x27￥\x27, fixed: 2 }) =\x3e {\n  const moneyStr = `${value}`;\n  if (moneyStr.indexOf(\x27-\x27) \x3e -1) {\n    const scope = moneyStr.split(\x27-\x27);\n    return `${config.unit}${parseFloat(scope[0]).toFixed(config.fixed).toString()} 起`;\n  } else if (value === 0) {\n    return value;\n  }\n\n  return `${config.unit}${parseFloat(moneyStr).toFixed(config.fixed).toString()}`;\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eVue.filter(\x3cspan class=\x22hljs-string\x22\x3e\x27money\x27\x3c\/span\x3e, (value, config = { \x3cspan class=\x22hljs-attr\x22\x3eunit\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27￥\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3efixed\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e }) =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e moneyStr = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${value}\x3c\/span\x3e`\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (moneyStr.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e) \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e scope = moneyStr.split(\x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${config.unit}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-built_in\x22\x3eparseFloat\x3c\/span\x3e(scope[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]).toFixed(config.fixed).toString()}\x3c\/span\x3e 起`\x3c\/span\x3e;\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (value === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e value;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${config.unit}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-built_in\x22\x3eparseFloat\x3c\/span\x3e(moneyStr).toFixed(config.fixed).toString()}\x3c\/span\x3e`\x3c\/span\x3e;\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在组件中使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cp class=\x26quot;price\x26quot;\x3e\x22{{\x22detail.priceScope | money\x22}}\x22\x3c\/p\x3e\n\x3cdiv :class=\x26quot;{singleWrapper: isMobile}\x26quot;\x3e\n    \x3cp class=\x26quot;rate\x26quot;\x3e比率：\x22{{\x22detail.commissionRateScope\x22}}\x22%\x3c\/p\x3e\n    \x3cp class=\x26quot;income\x26quot;\x3e奖金：\x22{{\x22detail.expectedIncome | money\x22}}\x22\x3c\/p\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22price\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22detail.priceScope | money}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x3c\/span\x3e\x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{singleWrapper: isMobile}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22rate\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e比率：\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22detail.commissionRateScope}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}%\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22income\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e奖金：\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22detail.expectedIncome | money}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3eaxios 使用配置\x3c\/h3\x3e\n\x3cp\x3e在项目中，我们使用了 \x3ca href=\x22https:\/\/github.com\/mzabriskie\/axios\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eaxios\x3c\/a\x3e 做接口请求\x3c\/p\x3e\n\x3cp\x3e在项目中全局配置 \x3ccode\x3e\/api\/common.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import axios from \x27axios\x27;\nimport qs from \x27qs\x27;\nimport store from \x27..\/store\x27;\n\n\/\/ 全局默认配置\n\/\/ 设置 POST 请求头\naxios.defaults.headers.post[\x27Content-Type\x27] = \x27application\/x-www-form-urlencoded\x27;\n\/\/ 配置 CORS 跨域\naxios.defaults.withCredentials = true;\naxios.defaults.crossDomain = true;\n\n\/\/ 请求发起前拦截器\naxios.interceptors.request.use((config) =\x3e {\n  \/\/ 全局 loading 状态，触发 loading 效果\n  store.dispatch(\x27updateLoadingStatus\x27, {\n    isLoading: true\n  });\n  \n  \/\/ POST 请求参数处理成 axios post 方法所需的格式\n  if (config.method === \x27post\x27) {\n    config.data = qs.stringify(config.data);\n  }\n  \n  \/\/ 这句不能省，不然后面的请求就无法成功发起，因为读不到配置参数\n  return config;\n}, () =\x3e {\n  \/\/ 异常处理\n  store.dispatch(\x27updateLoadingStatus\x27, {\n    isLoading: false\n  });\n});\n\n\/\/ 响应拦截\naxios.interceptors.response.use((response) =\x3e {\n  \/\/ 关闭 loading 效果\n  store.dispatch(\x27updateLoadingStatus\x27, {\n    isLoading: false\n  });\n\n  \/\/ 全局登录过滤，如果没有登录，直接跳转到登录 URL\n  if (response.data.code === 300) {\n    \/\/ 未登录\n    window.location.href = getLoginUrl();\n    return false;\n  }\n\n  \/\/ 这里返回的 response.data 是被 axios 包装过的一成，所以在这里抽取出来\n  return response.data;\n}, (error) =\x3e {\n  store.dispatch(\x27updateLoadingStatus\x27, {\n    isLoading: false\n  });\n  return Promise.reject(error);\n});\n\n\/\/ 导出\nexport default axios;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e qs \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27qs\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/store\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局默认配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置 POST 请求头\x3c\/span\x3e\naxios.defaults.headers.post[\x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e] = \x3cspan class=\x22hljs-string\x22\x3e\x27application\/x-www-form-urlencoded\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置 CORS 跨域\x3c\/span\x3e\naxios.defaults.withCredentials = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\naxios.defaults.crossDomain = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 请求发起前拦截器\x3c\/span\x3e\naxios.interceptors.request.use(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3econfig\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局 loading 状态，触发 loading 效果\x3c\/span\x3e\n  store.dispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27updateLoadingStatus\x27\x3c\/span\x3e, {\n    isLoading: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n  });\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ POST 请求参数处理成 axios post 方法所需的格式\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.method === \x3cspan class=\x22hljs-string\x22\x3e\x27post\x27\x3c\/span\x3e) {\n    config.data = qs.stringify(config.data);\n  }\n  \n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这句不能省，不然后面的请求就无法成功发起，因为读不到配置参数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e config;\n}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 异常处理\x3c\/span\x3e\n  store.dispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27updateLoadingStatus\x27\x3c\/span\x3e, {\n    isLoading: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  });\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 响应拦截\x3c\/span\x3e\naxios.interceptors.response.use(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关闭 loading 效果\x3c\/span\x3e\n  store.dispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27updateLoadingStatus\x27\x3c\/span\x3e, {\n    isLoading: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  });\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 全局登录过滤，如果没有登录，直接跳转到登录 URL\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (response.data.code === \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 未登录\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.location.href = getLoginUrl();\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里返回的 response.data 是被 axios 包装过的一成，所以在这里抽取出来\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e response.data;\n}, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  store.dispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27updateLoadingStatus\x27\x3c\/span\x3e, {\n    isLoading: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  });\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(error);\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 导出\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e axios;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们在接口中使用就方便很多了 \x3ccode\x3e\/api\/xxx.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import axios from \x27.\/common\x27;\n\nconst baseURL = \x27\/api\/profile\x27;\nconst USER_BASE_INFO = `${baseURL}\/getUserBaseInfo.json`;\nconst UPDATE_USER_INFO = `${baseURL}\/saveUserInfo.json`;\n\n\/\/ 更新用户实名认证信息\nconst updateUserInfo = userinfo =\x3e axios.post(UPDATE_USER_INFO, userinfo);\n\n\/\/ 获取用户基础信息\nconst getUserBaseInfo = () =\x3e axios.get(USER_BASE_INFO);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/common\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e baseURL = \x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/profile\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e USER_BASE_INFO = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${baseURL}\x3c\/span\x3e\/getUserBaseInfo.json`\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e UPDATE_USER_INFO = \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${baseURL}\x3c\/span\x3e\/saveUserInfo.json`\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更新用户实名认证信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e updateUserInfo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3euserinfo\x3c\/span\x3e =\x26gt;\x3c\/span\x3e axios.post(UPDATE_USER_INFO, userinfo);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取用户基础信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getUserBaseInfo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e axios.get(USER_BASE_INFO);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3evuex 状态在响应式页面中的妙用\x3c\/h3\x3e\n\x3cp\x3e由于项目是响应式页面，PC 端和移动端在表现成有很多不一致的地方，有时候单单通过 CSS 无法实现交互，这个时候，我们的 \x3ccode\x3evuex\x3c\/code\x3e 状态就派上用场了，\x3c\/p\x3e\n\x3cp\x3e我们一开始在 \x3ccode\x3eApp.vue\x3c\/code\x3e 里面监听了页面的 \x3ccode\x3eresize\x3c\/code\x3e 事件，动态的更新 \x3ccode\x3evuex\x3c\/code\x3e 里面 \x3ccode\x3eisMobile\x3c\/code\x3e 的状态值\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.onresize = throttle(() =\x3e {\n this.updatePlatformStatus({\n   isMobile: isMobile()\n });\n}, 500);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onresize = throttle(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.updatePlatformStatus({\n   isMobile: isMobile()\n });\n}, \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后，我们在组件层，就能响应式的渲染不同的 \x3ccode\x3edom\x3c\/code\x3e 结构了。其中最常见的是 PC 端和移动端加载的图片需要不同的规格的，这个时候我们可以这个做\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22methods: {\n  loadImgAssets(name, suffix = \x27.jpg\x27) {\n    return require(`..\/assets\/images\/${name}${this.isMobile ? \x27-mobile\x27 : \x27\x27}${suffix}`);\n  },\n}\n\n\x3cimg class=\x26quot;feed-back\x26quot; :src=\x26quot;loadImgAssets(\x27feed-back\x27)\x26quot;\n\n\x3cimg v-lazy=\x26quot;{src: isMobile ? detail.imgUrlMobile : detail.imgUrlPc, loading: placeholder}\x26quot;\x3e\n\n\/\/ 动态渲染不同规格的 dislog\n\x3cel-dialog :visible.sync=\x26quot;dialogVisible\x26quot; :size=\x26quot;isMobile ? \x27full\x27 : \x27tiny\x27\x26quot; top=\x26quot;30%\x26quot; custom-class=\x26quot;unCertification-dialog\x26quot;\x3e\n\x3c\/el-dialog\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3emethods: {\n  loadImgAssets(name, suffix = \x3cspan class=\x22hljs-string\x22\x3e\x27.jpg\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e`..\/assets\/images\/\x3cspan class=\x22hljs-subst\x22\x3e${name}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.isMobile ? \x3cspan class=\x22hljs-string\x22\x3e\x27-mobile\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e}\x3c\/span\x3e\x3cspan class=\x22hljs-subst\x22\x3e${suffix}\x3c\/span\x3e`\x3c\/span\x3e);\n  },\n}\n\n\x26lt;img \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22feed-back\x22\x3c\/span\x3e :src=\x3cspan class=\x22hljs-string\x22\x3e\x22loadImgAssets(\x27feed-back\x27)\x22\x3c\/span\x3e\n\n\x26lt;img v-lazy=\x3cspan class=\x22hljs-string\x22\x3e\x22{src: isMobile ? detail.imgUrlMobile : detail.imgUrlPc, loading: placeholder}\x22\x3c\/span\x3e\x26gt;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 动态渲染不同规格的 dislog\x3c\/span\x3e\n\x26lt;el-dialog :visible.sync=\x3cspan class=\x22hljs-string\x22\x3e\x22dialogVisible\x22\x3c\/span\x3e :size=\x3cspan class=\x22hljs-string\x22\x3e\x22isMobile ? \x27full\x27 : \x27tiny\x27\x22\x3c\/span\x3e top=\x3cspan class=\x22hljs-string\x22\x3e\x2230%\x22\x3c\/span\x3e custom-\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22unCertification-dialog\x22\x3c\/span\x3e\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-dialog\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下图分别是 PC 端和移动短的表现形式，然后配合 CSS 媒体查询实现各种布局\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUAWl?w=1049\x26amp;h=762\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUAWl?w=1049\x26amp;h=762\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUAWs?w=401\x26amp;h=681\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUAWs?w=401\x26amp;h=681\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e开发相关配置\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e反向代理\x3c\/h3\x3e\n\x3cp\x3e在项目目录的 \x3ccode\x3econfig\x3c\/code\x3e 文件下面的 \x3ccode\x3eindex.js\x3c\/code\x3e 配置我们的本地反向代理和端口信息\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dev: {\n  env: require(\x27.\/dev.env\x27),\n  port: 80,\n  autoOpenBrowser: true,\n  assetsSubDirectory: \x27static\x27,\n  assetsPublicPath: \x27\/\x27,\n  proxyTable: {\n    \x27\/api\/profile\x27: {\n      target: \x27[真实接口地址]:[端口号]\x27, \/\/ 例如： http:\/\/api.xxx.com\n      changeOrigin: true,\n      pathRewrite: {\n        \x27^\/api\/profile\x27: \x27\/profile\x27\n      }\n    }\n    ...\n  },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edev: {\n  \x3cspan class=\x22hljs-attr\x22\x3eenv\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/dev.env\x27\x3c\/span\x3e),\n  \x3cspan class=\x22hljs-attr\x22\x3eport\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eautoOpenBrowser\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eassetsSubDirectory\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eassetsPublicPath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eproxyTable\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/profile\x27\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3etarget\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[真实接口地址]:[端口号]\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例如： http:\/\/api.xxx.com\x3c\/span\x3e\n      changeOrigin: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3epathRewrite\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-string\x22\x3e\x27^\/api\/profile\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/profile\x27\x3c\/span\x3e\n      }\n    }\n    ...\n  },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们调用接口的形式就会变成如下映射，当我们调用 \x3ccode\x3e\/api\/profile\/xxxx\x3c\/code\x3e 的时候，其实是调用了 \x3ccode\x3e[真实接口地址]\/profile\/xxxx\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/api\/profile\/xxxx =\x3e [真实接口地址]\/profile\/xxxx\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/api\/\x3c\/span\x3eprofile\x3cspan class=\x22hljs-regexp\x22\x3e\/xxxx =\x26gt; [真实接口地址]\/\x3c\/span\x3eprofile\x3cspan class=\x22hljs-regexp\x22\x3e\/xxxx\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3enginx 配置\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22upstream api.xxx.com\n{\n #ip_hash;\n  server [接口服务器 ip 地址]:[端口];\n}\n\nserver {\n  ...\n  location ^~ \/api\/profile {\n    index index.php index.html index.html;\n    proxy_redirect off;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_pass http:\/\/api.xxx.com;\n    \n    rewrite ^\/api\/profile\/(.*)$ \/profile\/$1 break;\n  }\n  ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs axapta\x22\x3e\x3ccode\x3eupstream api.xxx.com\n{\n \x3cspan class=\x22hljs-meta\x22\x3e#ip_hash;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e [接口服务器 ip 地址]:[端口];\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eserver\x3c\/span\x3e {\n  ...\n  location ^~ \/api\/profile {\n    \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e.php \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e.html \x3cspan class=\x22hljs-keyword\x22\x3eindex\x3c\/span\x3e.html;\n    proxy_redirect off;\n    proxy_set_header Host $host;\n    proxy_set_header X-Real-IP $remote_addr;\n    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_pass http:\x3cspan class=\x22hljs-comment\x22\x3e\/\/api.xxx.com;\x3c\/span\x3e\n    \n    rewrite ^\/api\/profile\/(.*)$ \/profile\/$\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n  }\n  ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e线上部署\x3c\/h3\x3e\n\x3cp\x3e如果路由使用的是 \x3ccode\x3ehistory\x3c\/code\x3e 模式的话，需要在 \x3ccode\x3enginx\x3c\/code\x3e 里面配置将所有的请求到转发到 \x3ccode\x3eindex.html\x3c\/code\x3e 去\x3c\/p\x3e\n\x3cp\x3e在 \x3ccode\x3enginx.conf\x3c\/code\x3e 或者对应的站点 \x3ccode\x3evhost\x3c\/code\x3e 文件下面配置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22location \/ {\n    try_files $uri $uri\/ \/index.html;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs nginx\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-attribute\x22\x3elocation\x3c\/span\x3e \/ {\n    \x3cspan class=\x22hljs-attribute\x22\x3etry_files\x3c\/span\x3e \x3cspan class=\x22hljs-variable\x22\x3e$uri\x3c\/span\x3e \x3cspan class=\x22hljs-variable\x22\x3e$uri\x3c\/span\x3e\/ \/index.html;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e优化\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e开启静态资源长缓存\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22location ~ .*\\.(gif|jpg|jpeg|png|bmp|swf|woff|ttf|eot|svg)$ {\n    expires 1y;\n}\n\nlocation ~ .*\\.(js|css)$ {\n    expires 1y;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coq\x22\x3e\x3ccode\x3elocation ~ .*\\.(gif|\x3cspan class=\x22hljs-type\x22\x3ejpg\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3ejpeg\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3epng\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3ebmp\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3eswf\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3ewoff\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3ettf\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3eeot\x3c\/span\x3e|\x3cspan class=\x22hljs-type\x22\x3esvg\x3c\/span\x3e)$ {\n    expires \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3ey;\n}\n\nlocation ~ .*\\.(js|\x3cspan class=\x22hljs-type\x22\x3ecss\x3c\/span\x3e)$ {\n    expires \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3ey;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e开启静态资源 gzip 压缩\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 找到 nginx.conf 配置文件\nvim \/data\/nginx\/conf\/nginx.conf\n\ngzip on;\ngzip_min_length  1k;\ngzip_buffers     4 8k;\ngzip_http_version 1.1;\ngzip_types text\/plain application\/javascript application\/x-javascript text\/javascript text\/xml text\/css;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs awk\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 找到 nginx.conf 配置文件\nvim \x3cspan class=\x22hljs-regexp\x22\x3e\/data\/\x3c\/span\x3enginx\x3cspan class=\x22hljs-regexp\x22\x3e\/conf\/\x3c\/span\x3enginx.conf\n\ngzip on;\ngzip_min_length  \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3ek;\ngzip_buffers     \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3ek;\ngzip_http_version \x3cspan class=\x22hljs-number\x22\x3e1.1\x3c\/span\x3e;\ngzip_types text\x3cspan class=\x22hljs-regexp\x22\x3e\/plain application\/\x3c\/span\x3ejavascript application\x3cspan class=\x22hljs-regexp\x22\x3e\/x-javascript text\/\x3c\/span\x3ejavascript text\x3cspan class=\x22hljs-regexp\x22\x3e\/xml text\/\x3c\/span\x3ecss;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e开启了 gzip 压缩之后，页面资源请求大小将大大减小，如下图所示，表示已经开启了 \x3ccode\x3egzip\x3c\/code\x3e 压缩\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVUAWK?w=1076\x26amp;h=304\x22 src=\x22https:\/\/static.alili.tech\/img\/bVUAWK?w=1076\x26amp;h=304\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3eQ\x26amp;A\x3c\/h2\x3e\n\x3cp\x3e文章到这就结束了，如果有遗漏或者错误的地方，欢迎私信指出。\x3cbr\x3e希望这篇文章能带给大家一丝丝收获。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue2.0 项目开发小结</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011066120">https://segmentfault.com/a/1190000011066120</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/mtkkszlnuq/" target="_blank">https://alili.tech/archive/mtkkszlnuq/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>