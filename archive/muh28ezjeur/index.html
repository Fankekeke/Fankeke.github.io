<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="2017年经历的那些灵异事件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>2017年经历的那些灵异事件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/muh28ezjeur/",
				"appid": "1613049289050283", 
				"title": "2017年经历的那些灵异事件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-22T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/l2exddl087q/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/wsnkvwgnkl/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&text=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&text=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&title=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&is_video=false&description=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&title=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&title=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&title=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fmuh28ezjeur%2f&title=2017%e5%b9%b4%e7%bb%8f%e5%8e%86%e7%9a%84%e9%82%a3%e4%ba%9b%e7%81%b5%e5%bc%82%e4%ba%8b%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">2017年经历的那些灵异事件</h1><div class="meta"><div class="postdate"><time datetime="2018-12-22" itemprop="datePublished">2018-12-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e2017年快要过去了，回顾这一年来，在业务代码里，开发新功能占据70%，修复BUG占了30%，在解决的这些BUG中，大部分都是代码级别的错误，使用 \x3ccode\x3eChrome Devtools\x3c\/code\x3e 基本都可以解决，但其中有三个比较神奇，算得上是灵异事件了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e鬼打墙\x3c\/h3\x3e\n\x3cp\x3e有一次后端同学重构了一下 \x3ccode\x3eDSP\x3c\/code\x3e 广告平台的接口，让 \x3ccode\x3eJava\x3c\/code\x3e 服务化提供接口， \x3ccode\x3ePHP\x3c\/code\x3e 做 \x3ccode\x3eweb\x3c\/code\x3e 控制层掌管路由和透传接口，于是对之前的接口URL重新规划统一了一下，内测没问题后就高高兴兴上线了，然而没过多久就有商家上报说页面报错没数据，于是我赶紧复现，但怎么都复现不出来，然后问商家浏览器是不是版本太低，网络是不是不稳定之类的，但商家的浏览器和网络环境都没问题，这就纳闷了，于是果断找了一台 \x3ccode\x3eWindows\x3c\/code\x3e 机器（因为我们都是Mac而且没装虚拟机），让商家加 \x3ccode\x3eQQ\x3c\/code\x3e 远程协助看一下到底报了什么错，倒腾了半天，连上商家电脑，复现果然报错了 \x3ccode\x3eNetWork Error\x3c\/code\x3e ，打开 \x3ccode\x3eChrome Devtools\x3c\/code\x3e 一查， \x3ccode\x3eajax\x3c\/code\x3e 请求居然没没发出去。看了一眼浏览器上那一排插件，怀疑是不是插件搞的鬼，发现居然有屏蔽广告的插件，大哥，你特么自己都在我们平台上投广告，你还装屏蔽广告插件。果断让他关闭这个插件，然后果然没问题。原来我们的接口URL里有 \x3ccode\x3eadvertisement\x3c\/code\x3e 这个单词，插件直接屏蔽了这个URL。没过多久，又有一个商家报页面没数据，呵呵，我们直接叫他关闭浏览器屏蔽广告插件，结果商家告诉我还是不行。?，还是远程协助查一下，发现开了隐身窗口，接口还是没返回数据，看到商家电脑右下角运行的系统杀毒软件，眉头一皱，难道是这货搞的鬼？打开设置一看，赫然有屏蔽广告这个选项。果然国产软件都流氓，你这所有的浏览记录都被人家知道了啊。第二天果断把 \x3ccode\x3eadvertisement\x3c\/code\x3e 改成\x3ccode\x3egg（guanggao）\x3c\/code\x3e，整个世界都清净了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e断头鬼\x3c\/h3\x3e\n\x3cp\x3e过了一段时间，我司搭了一个前端错误监控平台，可以收集客户端错误，上报到这个平台然后邮件告警开发者。收集的信息包括用户操作系统、浏览器版本、 \x3ccode\x3eIP\x3c\/code\x3e 、操作路径等，这样就不需要再用 \x3ccode\x3eWindows\x3c\/code\x3e 远程了。某一天，告警平台发邮件报错，店铺选择页面 \x3ccode\x3ejs\x3c\/code\x3e 运行报错，那还得了，选择不了店铺，相当于我们的后台入口挂了啊。果断按照报错的操作路径操作一次，又没复现。再一看操作系统与浏览器版本，找了一个一模一样的环境，还是复现不出来。晕了，还是用远程协助吧。商家那里确实有 \x3ccode\x3ejs\x3c\/code\x3e 运行报错，由于线上 \x3ccode\x3ejs\x3c\/code\x3e 也没有 \x3ccode\x3esource map\x3c\/code\x3e ，压缩的代码也看不懂，查半天也没查出什么东西。回到监控平台后台，反复比对各条报错。结果发现 \x3ccode\x3eIP\x3c\/code\x3e 都是差不多的范围，一查都是合肥电信的运营商，难道所有合肥电信的用户加载的这个 \x3ccode\x3ejs\x3c\/code\x3e 有问题？然后报给运维同学，他把那个 \x3ccode\x3ejs\x3c\/code\x3e 下载下来一看，长度不一样，和正常的版本比，少了一小段。肯定是 \x3ccode\x3ecdn\x3c\/code\x3e 同步的时候，出了故障，果断把锅丢给七牛。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e替死鬼\x3c\/h3\x3e\n\x3cp\x3e前几天，有一次发布后，一直收到邮件告警某个 \x3ccode\x3ebase\x3c\/code\x3e 的 \x3ccode\x3ejs\x3c\/code\x3e 运行报错，涉及的浏览器版本都是\x3ccode\x3eChrome 31到37\x3c\/code\x3e，轻车熟路开虚拟机复现，找半天找了一个\x3ccode\x3eChrome 31\x3c\/code\x3e，确实报错了，然而报错内容看不懂。想着那天发布内容包括升级基础 \x3ccode\x3ereact\x3c\/code\x3e 组件，加了一个 \x3ccode\x3ebabel runtime\x3c\/code\x3e ，还有一些其他的改动，难道是这些问题引起的？\x3cbr\x3e然后尝试想让虚拟机 \x3ccode\x3eChrome\x3c\/code\x3e 运行本地代码，于是在 \x3ccode\x3ewin\x3c\/code\x3e 里面装 \x3ccode\x3enode\x3c\/code\x3e 、 \x3ccode\x3egit\x3c\/code\x3e 、下载仓库、打包、把线上代码代理到本地。结果\x3ccode\x3enode-modules\x3c\/code\x3e都装不上去。然后再试试装 \x3ccode\x3efiddler\x3c\/code\x3e 抓包软件，把打包后的代码放在 \x3ccode\x3ewin\x3c\/code\x3e 里面，抓取那几个 \x3ccode\x3ejs\x3c\/code\x3e ，替换成打包后的本地代码，然而还是看不懂，只知道是一个基础函数，可能是 \x3ccode\x3ebabel polyfill\x3c\/code\x3e 的问题，于是尝试把前端仓库那几天的改成一一 \x3ccode\x3erevert\x3c\/code\x3e ，看看到底是哪个改动导致的问题。结果回退到发布之前都还是报错，这就尴尬了，至此我已经花了一天时间去排查这个问题，期间让几个同事一起排查也没发现问题本源。\x3cbr\x3e最后想着把 \x3ccode\x3ewin\x3c\/code\x3e 的网络设置成 \x3ccode\x3eMac\x3c\/code\x3e 一样的网络，把 \x3ccode\x3ewin\x3c\/code\x3e 浏览器使用 \x3ccode\x3eSwitchySharp\x3c\/code\x3e 设置成 \x3ccode\x3eMac\x3c\/code\x3e 的代理，这样就可以在 \x3ccode\x3ewin\x3c\/code\x3e 里面使用 \x3ccode\x3eMac\x3c\/code\x3e 的开发环境，（其实就是在 \x3ccode\x3eMac\x3c\/code\x3e 起一个 \x3ccode\x3enode\x3c\/code\x3e 服务，监听一个端口，在这个服务里把所有的线上的前端资源（ \x3ccode\x3ejs\x3c\/code\x3e , \x3ccode\x3ecss\x3c\/code\x3e ）替换成本地代码，本地这个服务相当于一个网关服务器，还可以把网址指向不同环境的服务器。）结果惊奇的发现在预发环境是没有问题的，只有线上环境才有报错。我的第一反应是难道后端改造了什么数据类型？把线上数据和预发环境数据比对一下，然而一模一样。这个时候，对比两个环境只有两个差异了，一个线上环境多一个统计日志上报的 \x3ccode\x3ejs\x3c\/code\x3e ，还有一个就是错误收集上报的 \x3ccode\x3ejs\x3c\/code\x3e ，问了一下这两个 \x3ccode\x3ejs\x3c\/code\x3e 的维护者，果然统计日志的js，在那次发布的时候改动了，为了使用\x3ccode\x3eObject.assign\x3c\/code\x3e，加了一个 \x3ccode\x3epolyfill\x3c\/code\x3e ，然后和 \x3ccode\x3ebase js\x3c\/code\x3e 里面的 \x3ccode\x3epolyfill\x3c\/code\x3e 冲突了，由于统计日志的 \x3ccode\x3ejs\x3c\/code\x3e 先加载，所以报错是在 \x3ccode\x3ebase js\x3c\/code\x3e 里面。\x3cbr\x3e这个问题比较难排查的地方是：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e复现环境比较苛刻\x3c\/li\x3e\n\x3cli\x3e后端仓库的改动（统计日志的 \x3ccode\x3ejs\x3c\/code\x3e ）和前端仓库产生了关联，版本回退难以排查\x3c\/li\x3e\n\x3cli\x3e产生问题的 \x3ccode\x3ejs\x3c\/code\x3e 并不是出现报错的 \x3ccode\x3ejs\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e总结\x3c\/h3\x3e\n\x3cp\x3e出现BUG在所难免，代码逻辑、浏览器兼容性、网络故障等等都会导致一些意想不到的问题，遇到问题首先不要慌，解决问题要有方法论，先把问题复现出来，然后使用 \x3ccode\x3eChrome Devtools\x3c\/code\x3e ，设置断点，观察数据条件，基本可以找出代码错误，其他问题，可以类似高中生物实验，结合条件对照，找出差异的条件，定位到问题，这个过程中需要敏锐的观察力。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>2017年经历的那些灵异事件</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012387287">https://segmentfault.com/a/1190000012387287</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/muh28ezjeur/" target="_blank">https://alili.tech/archive/muh28ezjeur/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>