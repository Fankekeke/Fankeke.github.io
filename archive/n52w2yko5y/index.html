<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="如何实现一个楼中楼的评论系统"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>如何实现一个楼中楼的评论系统 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/n52w2yko5y/",
				"appid": "1613049289050283", 
				"title": "如何实现一个楼中楼的评论系统 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-02T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/kof6vrhdvtl/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/22dz06pd45s/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&text=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&text=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&title=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&is_video=false&description=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&title=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&title=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&title=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fn52w2yko5y%2f&title=%e5%a6%82%e4%bd%95%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e6%a5%bc%e4%b8%ad%e6%a5%bc%e7%9a%84%e8%af%84%e8%ae%ba%e7%b3%bb%e7%bb%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">如何实现一个楼中楼的评论系统</h1><div class="meta"><div class="postdate"><time datetime="2019-01-02" itemprop="datePublished">2019-01-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e文章内容由蚊子的博客进行发布，或许你想看看他其他的博客呢： \x3ca href=\x22https:\/\/www.xiabingbao.com\/comments\/2017\/09\/01\/blog-comments.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.xiabingbao.com\/comments\/2017\/09\/01\/blog-comments.html\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e1. 实现前的思考\x3c\/h3\x3e\n\x3cp\x3e在经历过多说和网易云跟帖后，总算是下定决心自己要写一个评论系统了。  \x3c\/p\x3e\n\x3cp\x3e我们在使用的很多评论系统中，目前比较流行的就是楼中楼的方式了，比如百度贴吧，wordpress等等。在这以前，一般都是按照时间顺序进行1楼、2楼、3楼的展示，如果要回复某个人，使用\x3ccode\x3e@\x3c\/code\x3e符号标识出这个用户的名字，然后回复内容。可是这样存在一个很大的问题，讨论问题没有集中在一起，其他用户根本不知道你们在讨论什么，原作者在1楼发表评论，你进来回复这个用户的评论时，已经到10楼了，原作者再回复你又到20楼了。其他用户看到10楼时，早已经忘记原作者说了什么了。  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVT831?w=785\x26amp;h=494\x22 src=\x22https:\/\/static.alili.tech\/img\/bVT831?w=785\x26amp;h=494\x22 alt=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 title=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e百度贴吧在改版之前就是这种方式，后来在新版中启用了楼中楼的方式，这种方式，关于某个话题的讨论就能集中在一块了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVT836?w=841\x26amp;h=560\x22 src=\x22https:\/\/static.alili.tech\/img\/bVT836?w=841\x26amp;h=560\x22 alt=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 title=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e同时，知乎也对他的评论系统进行了一次改版，不过不是改版成楼中楼，而是在每个有对话评论的后面加上一个弹窗链接\x3ccode\x3e查看对话\x3c\/code\x3e，点击链接后弹窗能看到这两个人之间互动的所有评论。  \x3c\/p\x3e\n\x3cp\x3e采用时间顺序倒序或者正序平铺的方式展示评论，这种方式实现起来简单，但是阅读困难；采用楼中楼的方式展示评论，对用户的阅读习惯比较友好，但是实现起来可能比较困难。不过，最后仍然决定采用\x3ccode\x3e楼中楼\x3c\/code\x3e的方式来，虽然本人博客的评论量也少的可怜，不过还是决定要实现一下。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e2. 数据表的设计\x3c\/h3\x3e\n\x3cp\x3e先说下前后端使用的语言和框架，前端考虑到页面渲染和比较多的事件调用，使用了vue框架，vue应该说不是最好的选择，毕竟对一个评论的前端部门来说，可能有点大材小用，不过为了快速开发，也就选择了vue。后端使用的是php语言，数据库使用的是mysql。\x3c\/p\x3e\n\x3cp\x3e数据库表的设计，既要考虑到可以导入以前的数据，又能方便以后添加新的评论。这里我创建了3个表： 文章表，用户表，评论表。  \x3c\/p\x3e\n\x3cp\x3e在网易云跟帖关闭之前，我把自己的数据导出来了（多说的数据已经丢失，不知道导出的格式是什么了），我们来看下网易云跟帖里导出数据的格式：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    \x26quot;title\x26quot;: \x26quot;从0到1学习node(七)之express搭建简易论坛\x26quot;,\n    \x26quot;url\x26quot;: \x26quot;www.xiabingbao.com\/node\/2017\/02\/20\/node-express-forum.html\x26quot;,\n    \x26quot;sourceId\x26quot;: \x26quot;\x26quot;,\n    \x26quot;ctime\x26quot;: 1487581007000,\n    \x26quot;comments\x26quot;: [\n        {\n            \x26quot;cid\x26quot;: \x26quot;72813956\x26quot;,\n            \x26quot;ctime\x26quot;: 1493107384000,\n            \x26quot;content\x26quot;: \x26quot;这个论坛对node 的版本有要求吗  我的node比较老 下载你的源码   访问出错\x26quot;,\n            \x26quot;pid\x26quot;: \x26quot;0\x26quot;,\n            \x26quot;ip\x26quot;: \x26quot;xxx\x26quot;,\n            \x26quot;port\x26quot;: 0,\n            \x26quot;sc\x26quot;: \x26quot;web\x26quot;,\n            \x26quot;vote\x26quot;: 0,\n            \x26quot;against\x26quot;: 0,\n            \x26quot;anonymous\x26quot;: false,\n            \x26quot;user\x26quot;: {\n                \x26quot;userId\x26quot;: \x26quot;1074123\x26quot;,\n                \x26quot;nickname\x26quot;: \x26quot;有态度网友06q23q\x26quot;,\n                \x26quot;avatar\x26quot;: \x26quot;\x26quot;,\n                \x26quot;anonymous\x26quot;: false\n            }\n        },\n        {\n            \x26quot;cid\x26quot;: \x26quot;77196403\x26quot;,\n            \x26quot;ctime\x26quot;: 1493714822000,\n            \x26quot;content\x26quot;: \x26quot;不太清楚，我这里node版本是6.9.4，npm版本是3.10.10，你试一下升级node版本\x26quot;,\n            \x26quot;pid\x26quot;: \x26quot;72813956\x26quot;,\n            \x26quot;ip\x26quot;: \x26quot;xxx\x26quot;,\n            \x26quot;port\x26quot;: 0,\n            \x26quot;sc\x26quot;: \x26quot;web\x26quot;,\n            \x26quot;vote\x26quot;: 0,\n            \x26quot;against\x26quot;: 0,\n            \x26quot;anonymous\x26quot;: false,\n            \x26quot;user\x26quot;: {\n                \x26quot;userId\x26quot;: \x26quot;2414123\x26quot;,\n                \x26quot;nickname\x26quot;: \x26quot;小小dd蚊子\x26quot;,\n                \x26quot;avatar\x26quot;: \x26quot;http:\/\/cms-bucket.nosdn.127.net\/1d6faddedb544cee93ff426a4aa2fe7620170322162349.jpg\x26quot;,\n                \x26quot;anonymous\x26quot;: false\n            }\n        }\n    ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22title\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22从0到1学习node(七)之express搭建简易论坛\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22url\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22www.xiabingbao.com\/node\/2017\/02\/20\/node-express-forum.html\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22sourceId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22ctime\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1487581007000\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22comments\x22\x3c\/span\x3e: [\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22cid\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2272813956\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22ctime\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1493107384000\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22content\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22这个论坛对node 的版本有要求吗  我的node比较老 下载你的源码   访问出错\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22pid\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x220\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22ip\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22xxx\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22port\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22sc\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22web\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22vote\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22against\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22anonymous\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22user\x22\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22userId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x221074123\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22nickname\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22有态度网友06q23q\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22avatar\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22anonymous\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n            }\n        },\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22cid\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2277196403\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22ctime\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1493714822000\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22content\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22不太清楚，我这里node版本是6.9.4，npm版本是3.10.10，你试一下升级node版本\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22pid\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2272813956\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22ip\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22xxx\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22port\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22sc\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22web\x22\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22vote\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22against\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22anonymous\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3e\x22user\x22\x3c\/span\x3e: {\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22userId\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x222414123\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22nickname\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22小小dd蚊子\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22avatar\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/cms-bucket.nosdn.127.net\/1d6faddedb544cee93ff426a4aa2fe7620170322162349.jpg\x22\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3e\x22anonymous\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n            }\n        }\n    ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从上面的数据里，可以看到，每个文章都有标题，url和评论，评论的每一项都有自己对应的id，其回复的评论pid，内容content，该评论的用户userid, nickname和avatar。我这里也就只摘取主要的信息录入到数据库中。\x3c\/p\x3e\n\x3ch4\x3e2.1 用户表\x3c\/h4\x3e\n\x3cp\x3e用户表相对来说比较简单，要考虑的就是原有的userid也要作为字段进行保存，方便在导入评论数据时能找到对应的用户，在评论数据也导入完成后即可将该字段删除，以后新添加的注册用户用不到这个字段了。用户表的设计：\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e字段\x3c\/th\x3e\n\x3cth\x3e类型\x3c\/th\x3e\n\x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e自增，主键\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3ewid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e用户原有的userid\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3enickname\x3c\/td\x3e\n\x3ctd\x3evarchar(50)\x3c\/td\x3e\n\x3ctd\x3e昵称\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eavatar\x3c\/td\x3e\n\x3ctd\x3evarchar(100)\x3c\/td\x3e\n\x3ctd\x3e头像\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3estatus\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e状态\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e设计好用户表后，将原数据中所有的用户都单独拿出来，然后使用userid作为key存储到一个数组中，这样也能起到一个去重的效果。把拿到的所有的用户数据存储到用户表\x3c\/p\x3e\n\x3ch4\x3e2.2 评论表\x3c\/h4\x3e\n\x3cp\x3e在设计评论表，主要考虑如下的因素：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e评论必须依托于文章和用户才能存在，因此评论的外键是文章标识和userid，留言板是一个文章内容为空的评论形式;\x3c\/li\x3e\n\x3cli\x3e我想以后新的评论能使用自增id，而不是跟随原有评论的cid来产生新的评论id，因此这次评论表的主键是id，原有的评论id只作为其中的一个字段wid来构造楼中楼的关系，这些旧评论插入到数据表时都会有新的评论id；\x3c\/li\x3e\n\x3cli\x3e楼中楼的评论是处在某个评论下的，同时，楼中楼里还有相互之前的互动回复。因此这个评论的pid(parentid)表示当前评论处于哪个评论之下，同时replyid表示是回复的哪个评论；若直接回复的父级评论，则pid与replyid相同，都是父级评论的id，若回复的不是父级评论，则pid为父级评论的id，replyid为回复评论的id；pid或replyid为0时，则表示直接对文章发表评论。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e因此我们的评论表是这样设计的：\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e字段\x3c\/th\x3e\n\x3cth\x3e类型\x3c\/th\x3e\n\x3cth\x3e说明\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e自增，主键\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3ewid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e评论原有的主键cid\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3euid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e用户id\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3ereplyid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e该评论回复的评论id，没有则为0\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3epid\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e该评论所在的父级id，没有则为0\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eaid\x3c\/td\x3e\n\x3ctd\x3evarchar(100)\x3c\/td\x3e\n\x3ctd\x3e文章的标识\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3econtent\x3c\/td\x3e\n\x3ctd\x3evarchar(300)\x3c\/td\x3e\n\x3ctd\x3e评论内容\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3ecreatetime\x3c\/td\x3e\n\x3ctd\x3eint\x3c\/td\x3e\n\x3ctd\x3e评论时间的时间戳\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e表中的aid(文章的标识)可以是文章的url，文章的id或者其他任何能够唯一识别该文章的东东都可以。这里我们使用的是文章的uri来作为唯一标识，比如上面数据中的文章，我们使用\x3ccode\x3e\/node\/2017\/02\/20\/node-express-forum.html\x3c\/code\x3e来标识文章。其他文章同理。  \x3c\/p\x3e\n\x3cp\x3e将这些评论写入表时，我们还要注意的是，原数据中，每个评论都对应着一个用户，在我设计的系统里，用户与评论分来了，只使用uid来进行关联。新的用户与新的评论都是使用自有的自增主键，因此在原有评论进行入库时，需要将原来的userid转换为新用户表中的主键id，新旧数据进行统一。  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVT839?w=300\x26amp;h=300\x22 src=\x22https:\/\/static.alili.tech\/img\/bVT839?w=300\x26amp;h=300\x22 alt=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 title=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e文章表不做解释。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e3. 具体实现\x3c\/h3\x3e\n\x3cp\x3e前端部分主要是负责展示每个文章的评论，同时让登录用户可以添加评论。\x3c\/p\x3e\n\x3ch4\x3e3.1 展示评论\x3c\/h4\x3e\n\x3cp\x3e我们已经对每个评论都添加了文章标识，前端只要根据aid就能拿到当前文章所有的评论。不过我们的评论是要\x3ccode\x3e楼中楼\x3c\/code\x3e的方式展示的，不能一股脑的把数据平铺到页面中。我们在2.2中也说了，pid为0的评论都是直接对文章进行评论的，这些评论应该是作为一级评论展示的；pid为其他数据的，必然是属于某个评论之下，应当作为楼中楼展示。  \x3c\/p\x3e\n\x3cp\x3e同时，无论一级评论，还是楼中楼的评论，都有可能产生分页的情况，因此这里也要做好分页处理。  \x3c\/p\x3e\n\x3cp\x3e那么最终，我们前端拿到的结构应该大致是这样的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    code : 0,\n    data : [\n        {\/\/ 一级评论\n            id : 1,\n            content : \x27蚊子的博客棒棒的\x27,\n            createtime : \x272017年08月08日00:26\x27,\n            nickname : \x27匿名者\x27,\n            reply : {\/\/ 楼中楼\n                data : [\n                    id : 1,\n                    content : \x27谢谢，一起学习\x27,\n                    createtime : \x272017年08月08日00:36\x27,\n                    nickname : \x27蚊子\x27\n                ],\n                page : {\n                    cur_page : 1,\n                    all_page : 1\n                }\n            }\n        }\n    ],\n    page : {\n        cur_page : 1,\n        all_page : 1\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e{\n    code : \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n    data : [\n        {\/\/ 一级评论\n            id : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n            content : \x27蚊子的博客棒棒的\x27,\n            createtime : \x27\x3cspan class=\x22hljs-number\x22\x3e2017\x3c\/span\x3e年\x3cspan class=\x22hljs-number\x22\x3e08\x3c\/span\x3e月\x3cspan class=\x22hljs-number\x22\x3e08\x3c\/span\x3e日\x3cspan class=\x22hljs-number\x22\x3e00\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e26\x3c\/span\x3e\x27,\n            nickname : \x27匿名者\x27,\n            reply : {\/\/ 楼中楼\n                data : [\n                    id : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                    content : \x27谢谢，一起学习\x27,\n                    createtime : \x27\x3cspan class=\x22hljs-number\x22\x3e2017\x3c\/span\x3e年\x3cspan class=\x22hljs-number\x22\x3e08\x3c\/span\x3e月\x3cspan class=\x22hljs-number\x22\x3e08\x3c\/span\x3e日\x3cspan class=\x22hljs-number\x22\x3e00\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e36\x3c\/span\x3e\x27,\n                    nickname : \x27蚊子\x27\n                ],\n                page : {\n                    cur_page : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n                    all_page : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n                }\n            }\n        }\n    ],\n    page : {\n        cur_page : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        all_page : \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e前端拿到接口返回的数据后，就可以渲染页面了。在头像的处理上，也考虑到了https的环境，因此返回的头像链接都是\x3ccode\x3e\/\/\x3c\/code\x3e开头的形式。\x3c\/p\x3e\n\x3ch4\x3e3.2 参与评论\x3c\/h4\x3e\n\x3cp\x3e用户对文章或者某个评论产生了共鸣，需要留言讨论一番，我们就需要用户能够把自己的评论也添加进去。\x3c\/p\x3e\n\x3cp\x3e评论的类型，细分的话，可以分为3类：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e直接对文章发表评论，pid与replyid为空；\x3c\/li\x3e\n\x3cli\x3e对一级评论进行回复，pid与replyid均为一级评论的id;\x3c\/li\x3e\n\x3cli\x3e对楼中楼进行回复，pid为一级评论的id，replyid为你回复的评论的id\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e我这里前端的实现参考了oschina(开源中国)的评论方式。直接对文章评论，是直接在顶部的评论窗口进行输入；对其他评论进行回复时，采用弹窗的方式来进行回复。弹窗回复的好处就是，页面不用滚动，用户对某个评论的感知也能停留在这个位置；同时也不用增加各种不必要的小输入框来让用户输入评论。\x3c\/p\x3e\n\x3ch4\x3e3.3 登录\x3c\/h4\x3e\n\x3cp\x3e在登录问题上，我也是纠结了不少的时间，究竟是使用自己的登录系统呢，还是使用第三方登录呢，或者是用户不用注册登录，只要输入邮箱和昵称就能进行评论呢？ \x3c\/p\x3e\n\x3cp\x3e使用自己的评论系统，那么就需要开发一套注册和登录流程，开发麻烦，而且对于想要回复一句话的用户来说，可能就直接放弃注册了；若只要输入邮箱和昵称就能评论，我考虑到可能会引起用户的无限评论，无法控制。因此，最后还是考虑接入第三方的登录，这里选择了使用微博作为第三方登录的入口，后续会考虑加入github的帐号登录。  \x3c\/p\x3e\n\x3cp\x3e关于如何接入微博的第三方登录，我们下篇文章再讲，文档齐全，对不熟悉的开发者来说，刚开始可能有点懵逼，不过应该问题不大。\x3c\/p\x3e\n\x3ch4\x3e3.4 添加邮箱功能\x3c\/h4\x3e\n\x3cp\x3e用户在第三方登录成功后，在名字旁边有个小的input输入框，可以让用户输入邮箱来接收回复提醒，这个输入完全是自愿的，不输入邮箱也依然可以评论。也是考虑到本站是个小站，访问量极低，用户可能一时兴起评论了两句，事后又想起这个网站来，又不知道怎么找了。因此就想着添加一个邮件提醒功能，不让大神的评论石沉大海。\x3c\/p\x3e\n\x3ch4\x3e3.5 特别注意\x3c\/h4\x3e\n\x3cp\x3e前端部门引入了vue框架，评论模块在每个文章页都会加载。为了防止评论模块中的vue库对外部的资源造成影响（比如版本冲突等），我先把全局变量给了wzVue，然后在把Vue注销掉：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22wzVue = Vue;\ndelete(Vue);\ndelete(window.Vue);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ewzVue = Vue;\n\x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e(Vue);\n\x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Vue);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同时，在刚开始实现完成评论功能的时候，用户只要进到这个页面，评论就会加载。但是有个问题就是，用户不一定会把你的文章看到底部，不一定就看你的评论。因此后来文章就改成了按需加载，只有用户滚动到底部，有想要看评论的意向时采取加载评论。 \x3c\/p\x3e\n\x3cp\x3e最终展示的效果就是这样：  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVT84a?w=1023\x26amp;h=460\x22 src=\x22https:\/\/static.alili.tech\/img\/bVT84a?w=1023\x26amp;h=460\x22 alt=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 title=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e4. 总结\x3c\/h3\x3e\n\x3cp\x3e作为一名前端开发，用仅有的后端知识开发一套博客的评论系统，显得是非常的简陋，整个框架的设计感觉也是很糙。同时缓存系统用的不熟练，不能做到评论信息的立即更新。这个系统依然还有很多改进的地方。欢迎大家对蚊子（师少兵）多多提意见和建议。  \x3c\/p\x3e\n\x3cp\x3e在写这篇文章的时候，想着是以后要改版的时候，可以做成评论同步加载的方式进行。生成后的文章，更新频率极低，甚至不太变动，那么缓存的就是评论的内容，每当有新的评论时，就删除当前文章的缓存，重新加载新的数据，然后再缓存上新的数据，这样在评论数据更新比较低的时候，可以缓存的时间更长，同时也有利于搜索引起对评论内容的抓取。  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVT84e?w=300\x26amp;h=286\x22 src=\x22https:\/\/static.alili.tech\/img\/bVT84e?w=300\x26amp;h=286\x22 alt=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 title=\x22师少兵的博客www.xiabingbao.com(如何实现一个楼中楼的评论系统)\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e文章内容由蚊子的博客进行发布，或许你想看看他其他的博客呢： \x3ca href=\x22https:\/\/www.xiabingbao.com\/comments\/2017\/09\/01\/blog-comments.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.xiabingbao.com\/comments\/2017\/09\/01\/blog-comments.html\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>如何实现一个楼中楼的评论系统</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010958883">https://segmentfault.com/a/1190000010958883</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/n52w2yko5y/" target="_blank">https://alili.tech/archive/n52w2yko5y/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>