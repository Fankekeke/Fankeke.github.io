<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端小项目之在线便利贴"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端小项目之在线便利贴 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ne9dyo0r5gd/",
				"appid": "1613049289050283", 
				"title": "前端小项目之在线便利贴 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-31T02:30:30"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/fnprsbc0e7j/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/oszp1csmn5f/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&text=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&text=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&title=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&title=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&title=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&title=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fne9dyo0r5gd%2f&title=%e5%89%8d%e7%ab%af%e5%b0%8f%e9%a1%b9%e7%9b%ae%e4%b9%8b%e5%9c%a8%e7%ba%bf%e4%be%bf%e5%88%a9%e8%b4%b4"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端小项目之在线便利贴</h1><div class="meta"><div class="postdate"><time datetime="2018-12-31" itemprop="datePublished">2018-12-31</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e实现的效果如下：\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155402\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155402\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e界面可能不是太好看?，考虑到容器的高度会被拉长，因此没有用图片做背景。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e预览\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/note.shenzekun.cn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e便利贴\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e涉及的知识点\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3esass\x3c\/code\x3e(css 预编译器)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ewebpack\x3c\/code\x3e（自动化构建工具，实现LESS,CSS,JS编译和压缩代码）\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eexpress\x3c\/code\x3e (基于 Node.js 平台的 web 开发框架)\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3ehtml\x2bcss\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eNode.js\x3c\/code\x3e(基于 Chrome V8 引擎的 JavaScript 运行环境)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ejQuery\x3c\/code\x3e(一个快速、简洁的JavaScript框架)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3esequelize\x3c\/code\x3e(Node的ORM框架Sequelize操作数据库)\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3epassport\x3c\/code\x3e(实现第三方登录)\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e实现功能\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3egithub第三方登录\x3c\/li\x3e\n\x3cli\x3e添加笔记（登录成功后）\x3c\/li\x3e\n\x3cli\x3e删除笔记\x3c\/li\x3e\n\x3cli\x3e修改笔记\x3c\/li\x3e\n\x3cli\x3e使用 markdown(类似 typroa)\x3c\/li\x3e\n\x3cli\x3e笔记拖拽\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e准备工作\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e必要条件\x3c\/strong\x3e：已经安装好了node环境,还没安装的可以去\x3ca href=\x22http:\/\/nodejs.cn\/download\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enode\x3c\/a\x3e中文官网下载\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e小提示\x3c\/strong\x3e：如果用 npm 下载感觉慢的话，可以下载一个切换镜像源的工具\x3ccode\x3enrm\x3c\/code\x3e,在终端输入：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i nrm -g\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e nrm -g\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后如下操作：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155403\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155403\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e开始！！\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e1.\x3cstrong\x3e新建一个文件夹，名字自己起，打开终端，切换到自己新建文件夹，如\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd (文件夹名称)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs bash\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e (文件夹名称)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.\x3cstrong\x3e生成 \x3ccode\x3epackage.json\x3c\/code\x3e\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm init -y\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3enpm\x3c\/span\x3e init -y\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.\x3cstrong\x3e安装 express\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i express --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm i \x3cspan class=\x22hljs-built_in\x22\x3eexpress\x3c\/span\x3e --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e4.\x3cstrong\x3e安装 \x3ca href=\x22http:\/\/www.expressjs.com.cn\/starter\/generator.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexpress生成器\x3c\/a\x3e:\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install express-generator --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm install \x3cspan class=\x22hljs-built_in\x22\x3eexpress\x3c\/span\x3e-generator --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e5.\x3cstrong\x3e生成 ejs 模板（类似 jsp 的写法）\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22express -f -e\nnpm i\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs bash\x22\x3e\x3ccode\x3eexpress \x3cspan class=\x22hljs-_\x22\x3e-f\x3c\/span\x3e \x3cspan class=\x22hljs-_\x22\x3e-e\x3c\/span\x3e\nnpm i\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155404\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155404\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其中\x3ccode\x3epublic\x3c\/code\x3e用来存放编译后的js文件以及编译好的css文件等，\x3ccode\x3eroutes\x3c\/code\x3e用来存放处理 ajax 的请求文件，views就是存放视图文件\x3cbr\x3e然后新建 database 和 src：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155405\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155405\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其中 src\/js 里面 app 代表不同页面的入口文件，lib 就是一些常用的库，mod 就是你写的一些模块，database 用来存放数据库数据的\x3c\/p\x3e\n\x3cp\x3e6.\x3cstrong\x3e输入：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm start\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3enpm\x3c\/span\x3e start\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果有出现下面的错误：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155406\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155406\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e出现这个错误是因为你没有下载模块，只需在终端输入：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i (模块名) --save\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3enpm \x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e (模块名) --save\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e就可以了    \x3c\/p\x3e\n\x3cp\x3e7.\x3cstrong\x3e打开浏览器，输入\x3ccode\x3elocalhost:3000\x3c\/code\x3e\x3c\/strong\x3e\x3cbr\x3e出现下面这样就说明成功了：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155407\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155407\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e8.\x3cstrong\x3e接下来安装webpack和相关依赖\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i webpack --save-dev\nnpm i --save css-loader style-loader express-session express-flash node-sass passport sass sass-loader sequelize sqlite3 extract-text-webpack-plugin onchange\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3enpm i webpack --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e-dev\nnpm i --\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e css-loader \x3cspan class=\x22hljs-built_in\x22\x3estyle\x3c\/span\x3e-loader \x3cspan class=\x22hljs-built_in\x22\x3eexpress\x3c\/span\x3e-session \x3cspan class=\x22hljs-built_in\x22\x3eexpress\x3c\/span\x3e-flash node-sass passport sass sass-loader sequelize sqlite3 extract-text-webpack-plugin onchange\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e9.\x3cstrong\x3e在 src 里建一个 webpack.config.js，配置如下\x3c\/strong\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var webpack = require(\x27webpack\x27);\nvar path = require(\x27path\x27);\nvar ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\nvar autoprefixer = require(\x27autoprefixer\x27);\n    \nmodule.exports = {\n    entry: path.join(__dirname, \x26quot;js\/app\/index\x26quot;),\n    output: {\n        path: path.join(__dirname, \x26quot;..\/public\x26quot;),\n        filename: \x26quot;js\/index.js\x26quot;\n    },\n    module: {\n        rules: [{\n            test: \/(\\.scss)$\/,\n            use: ExtractTextPlugin.extract({\n                fallback: \x26quot;style-loader\x26quot;,\n                use: [\x26quot;css-loader\x26quot;, \x26quot;sass-loader\x26quot;]\n            }) \/\/把 css 抽离出来生成一个文件\n        }]\n    },\n    resolve: {\n        alias: {\n            jquery: path.join(__dirname, \x26quot;js\/lib\/jquery-2.0.3.min.js\x26quot;),\n            mod: path.join(__dirname, \x26quot;js\/mod\x26quot;),\n            sass: path.join(__dirname, \x26quot;sass\x26quot;)\n        }\n    },\n    plugins: [\n        new webpack.ProvidePlugin({\n            $: \x26quot;jquery\x26quot;\n        }),\n        new ExtractTextPlugin(\x26quot;css\/index.css\x26quot;),\n        new webpack.LoaderOptionsPlugin({\n            options: {\n                css: [\n                    autoprefixer(),\n                ]\n            }\n        }),\n        new webpack.optimize.UglifyJsPlugin({\n            compress: {\n                warnings: false\n            }\n        })\n    ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e autoprefixer = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27autoprefixer\x27\x3c\/span\x3e);\n    \n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    entry: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x22js\/app\/index\x22\x3c\/span\x3e),\n    output: {\n        path: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x22..\/public\x22\x3c\/span\x3e),\n        filename: \x3cspan class=\x22hljs-string\x22\x3e\x22js\/index.js\x22\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e: {\n        rules: [{\n            test: \x3cspan class=\x22hljs-regexp\x22\x3e\/(\\.scss)$\/\x3c\/span\x3e,\n            use: ExtractTextPlugin.extract({\n                fallback: \x3cspan class=\x22hljs-string\x22\x3e\x22style-loader\x22\x3c\/span\x3e,\n                use: [\x3cspan class=\x22hljs-string\x22\x3e\x22css-loader\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22sass-loader\x22\x3c\/span\x3e]\n            }) \x3cspan class=\x22hljs-comment\x22\x3e\/\/把 css 抽离出来生成一个文件\x3c\/span\x3e\n        }]\n    },\n    resolve: {\n        alias: {\n            jquery: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x22js\/lib\/jquery-2.0.3.min.js\x22\x3c\/span\x3e),\n            mod: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x22js\/mod\x22\x3c\/span\x3e),\n            sass: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x22sass\x22\x3c\/span\x3e)\n        }\n    },\n    plugins: [\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.ProvidePlugin({\n            $: \x3cspan class=\x22hljs-string\x22\x3e\x22jquery\x22\x3c\/span\x3e\n        }),\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin(\x3cspan class=\x22hljs-string\x22\x3e\x22css\/index.css\x22\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.LoaderOptionsPlugin({\n            options: {\n                css: [\n                    autoprefixer(),\n                ]\n            }\n        }),\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.UglifyJsPlugin({\n            compress: {\n                warnings: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n            }\n        })\n    ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e说明\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eentry:入口文件，也就是 src\/js\/app里面的index.js,其中__dirname是获得当前文件所在目录的完整目录名\x3c\/li\x3e\n\x3cli\x3eoutput:输出编译后的文件 index.js，输出到 public\/js 里面\x3c\/li\x3e\n\x3cli\x3emodule：配置Loaders，通过使用不同的loader，webpack有能力调用外部的脚本或工具，实现对不同格式的文件的处理，比如说分析转换scss为css，或者把下一代的JS文件\x3c\/li\x3e\n\x3cli\x3eresolve.alias：设置模块别名，便于我们更方便引用，比如说我在 js里面的文件需要 jquery，在里面的文件直接写 require(\x22jquery\x22) 就行了\x3c\/li\x3e\n\x3cli\x3e如果所有文件都需要 jquery,那么直接在 plugins里面写成这样：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155408\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155408\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n就不需要 require 了\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs armasm\x22\x3e\x3ccode\x3e\n就不需要 \x3cspan class=\x22hljs-meta\x22\x3erequire\x3c\/span\x3e 了\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155656\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155656\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e   这个是压缩文件的\x3c\/p\x3e\n\x3cp\x3e10.\x3cstrong\x3e在 package.json 中，增加如下两条：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155409\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155409\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e写成这样，你在终端就可以写成\x3ccode\x3enpm run webpack\x3c\/code\x3e 来编译文件，\x3cbr\x3e\x3ccode\x3enpm run watch\x3c\/code\x3e来监控 src 里面的 js 和 scss 的变化，只要一修改，进行编译，提高了效率\x3c\/p\x3e\n\x3cp\x3e11.\x3cstrong\x3e测试\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e你可以试试在 js 里面的 index.js写点东西，然后 npm run webpack，如果终端显示是这样：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155410\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155410\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e就证明成功了\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e项目思路\x3c\/h2\x3e\n\x3cp\x3e逻辑比较简单\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e首先用户必须登录才能添加笔记，当用户失焦的时候，将数据插入数据库，并且重新布局（瀑布流）\x3c\/li\x3e\n\x3cli\x3e用户不能更改其他用户的笔记，除了管理员?\x3c\/li\x3e\n\x3cli\x3e用户更新笔记之后，数据库的数据重新更新，重新布局\x3c\/li\x3e\n\x3cli\x3e用户可以删除笔记，数据从数据库中删除，重新布局\x3c\/li\x3e\n\x3cli\x3e用户可以拖拽笔记，但不将位置存入数据库\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e实现\x3c\/h2\x3e\n\x3cp\x3ehtml,css就不讲了，可以看看我的\x3ca href=\x22https:\/\/github.com\/shenzekun\/sticky-note\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码\x3c\/a\x3e,主要讲 js。\x3c\/p\x3e\n\x3cp\x3e1.\x3cstrong\x3e瀑布流的实现\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e思路：（前提是必须绝对定位）\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e获取元素的宽度\x3c\/li\x3e\n\x3cli\x3e通过窗口的宽度除以元素的宽度来获取列数\x3c\/li\x3e\n\x3cli\x3e初始化一个数组来获取每列的高度，初始化每列的高度为0\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e遍历元素，获取最小的的列数的高度和索引，对当前元素进行定位，列数高度加等于当前元素的高度\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e知道思路后，代码很快就写出来了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var WaterFall = (function () {\n        var $ct, $items;\n        function render($c) {\n            $ct = $c;\n            $items = $ct.children();\n            var nodeWidth = $items.outerWidth(true),\n                windowHeight = $(window).height(),\n                colNum = parseInt($(window).width() \/ nodeWidth), \/\/获取列数\n                colSumHeight = []; \/\/获取每列的高度\n            \/\/对每列的高度进行初始化\n            for (var i = 0; i \x3c colNum; i\x2b\x2b) {\n                colSumHeight[i] = 0;\n            }\n            $items.each(function () {\n                var $current = $(this);\n                var index = 0,\n                    minSumHeight = colSumHeight[0];\n                \/\/获取最小的的列数的高度和索引\n                for (var i = 0; i \x3c colSumHeight.length; i\x2b\x2b) {\n                    if (minSumHeight \x3e colSumHeight[i]) {\n                        index = i;\n                        minSumHeight = colSumHeight[i];\n                    }\n                }            \n                \/\/改变窗口高度\n                if (windowHeight \x3c minSumHeight) {\n                    $(\x26quot;body\x26quot;).height(minSumHeight);\n                } else {\n                    $(\x26quot;body\x26quot;).height(windowHeight - 72);\n                }\n                \/\/对当前元素进行定位\n                $current.animate({\n                    left: nodeWidth * index,\n                    top: minSumHeight\n                }, 5);\n                colSumHeight[index] \x2b= $current.outerHeight(true);\n    \n            });\n        }\n        \/\/当窗口发生变化时，重新渲染\n        $(window).on(\x27resize\x27, function () {\n            render($ct);\n        });\n        return {\n            init: render\n        }\n    })();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e WaterFall = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e $ct, $items;\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erender\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e($c)\x3c\/span\x3e \x3c\/span\x3e{\n            $ct = $c;\n            $items = $ct.children();\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nodeWidth = $items.outerWidth(\x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e),\n                windowHeight = $(window).height(),\n                colNum = parseInt($(window).width() \/ nodeWidth), \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取列数\x3c\/span\x3e\n                colSumHeight = []; \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取每列的高度\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/对每列的高度进行初始化\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; colNum; i\x2b\x2b) {\n                colSumHeight[i] = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            }\n            $items.each(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e $current = $(this);\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\n                    minSumHeight = colSumHeight[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取最小的的列数的高度和索引\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; colSumHeight.length; i\x2b\x2b) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (minSumHeight \x26gt; colSumHeight[i]) {\n                        index = i;\n                        minSumHeight = colSumHeight[i];\n                    }\n                }            \n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/改变窗口高度\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (windowHeight \x26lt; minSumHeight) {\n                    $(\x3cspan class=\x22hljs-string\x22\x3e\x22body\x22\x3c\/span\x3e).height(minSumHeight);\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                    $(\x3cspan class=\x22hljs-string\x22\x3e\x22body\x22\x3c\/span\x3e).height(windowHeight - \x3cspan class=\x22hljs-number\x22\x3e72\x3c\/span\x3e);\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/对当前元素进行定位\x3c\/span\x3e\n                $current.animate({\n                    left: nodeWidth * index,\n                    top: minSumHeight\n                }, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n                colSumHeight[index] \x2b= $current.outerHeight(\x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e);\n    \n            });\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/当窗口发生变化时，重新渲染\x3c\/span\x3e\n        $(window).on(\x3cspan class=\x22hljs-string\x22\x3e\x27resize\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n            render($ct);\n        });\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            init: render\n        }\n    })();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.\x3cstrong\x3e笔记的拖拽\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们先看个图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155411\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155411\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e因此代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/设置笔记的移动\n            $noteHead.on(\x27mousedown\x27, function (e) {\n                var evtX = e.pageX - $note.offset().left, \/\/evtX 计算事件的触发点在 dialog内部到 dialog 的左边缘的距离\n                    evtY = e.pageY - $note.offset().top;\n                $note.addClass(\x27draggable\x27).data(\x27evtPos\x27, {\n                    x: evtX,\n                    y: evtY\n                }); \/\/把事件到 dialog 边缘的距离保存下来\n            }).on(\x27mouseup\x27, function () {\n                $note.removeClass(\x27draggable\x27).removeData(\x27pos\x27);\n            });\n    \n            $(\x27body\x27).on(\x27mousemove\x27, function (e) {\n                $(\x27.draggable\x27).length \x26amp;\x26amp; $(\x27.draggable\x27).offset({\n                    top: e.pageY - $(\x27.draggable\x27).data(\x27evtPos\x27).y, \/\/ 当用户鼠标移动时，根据鼠标的位置和前面保存的距离，计算 dialog 的绝对位置\n                    left: e.pageX - $(\x27.draggable\x27).data(\x27evtPos\x27).x\n                });\n            });\n        },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置笔记的移动\x3c\/span\x3e\n            $noteHead.on(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e evtX = e.pageX - $note.offset().left, \x3cspan class=\x22hljs-comment\x22\x3e\/\/evtX 计算事件的触发点在 dialog内部到 dialog 的左边缘的距离\x3c\/span\x3e\n                    evtY = e.pageY - $note.offset().top;\n                $note.addClass(\x3cspan class=\x22hljs-string\x22\x3e\x27draggable\x27\x3c\/span\x3e).data(\x3cspan class=\x22hljs-string\x22\x3e\x27evtPos\x27\x3c\/span\x3e, {\n                    \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: evtX,\n                    \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: evtY\n                }); \x3cspan class=\x22hljs-comment\x22\x3e\/\/把事件到 dialog 边缘的距离保存下来\x3c\/span\x3e\n            }).on(\x3cspan class=\x22hljs-string\x22\x3e\x27mouseup\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                $note.removeClass(\x3cspan class=\x22hljs-string\x22\x3e\x27draggable\x27\x3c\/span\x3e).removeData(\x3cspan class=\x22hljs-string\x22\x3e\x27pos\x27\x3c\/span\x3e);\n            });\n    \n            $(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n                $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).length \x26amp;\x26amp; $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).offset({\n                    \x3cspan class=\x22hljs-attr\x22\x3etop\x3c\/span\x3e: e.pageY - $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).data(\x3cspan class=\x22hljs-string\x22\x3e\x27evtPos\x27\x3c\/span\x3e).y, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当用户鼠标移动时，根据鼠标的位置和前面保存的距离，计算 dialog 的绝对位置\x3c\/span\x3e\n                    left: e.pageX - $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).data(\x3cspan class=\x22hljs-string\x22\x3e\x27evtPos\x27\x3c\/span\x3e).x\n                });\n            });\n        },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.\x3cstrong\x3e提示模块\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e这个比较容易：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/* \n    提示模块\n    参数：状态(1表示成功，0表示失败)，消息，出现时间(不写默认是1s)\n     *\/\n    function toast(status, msg, time) {\n        this.status = status;\n        this.msg = msg;\n        this.time = time || 1000;\n        this.createToast();\n        this.showToast();\n    }\n    \n    toast.prototype = {\n        createToast: function () {\n            if (this.status === 1) {\n                var html = \x27\x3cdiv class=\x26quot;toast\x26quot;\x3e![](..\/..\/imgs\/1.png)\x3c\/img\x3e\x3cspan class=\x26quot;toast_word\x26quot;\x3e\x27 \x2b this.msg \x2b \x27\x3c\/span\x3e\x3c\/div\x3e\x27;\n                this.$toast = $(html);\n                $(\x27body\x27).append(this.$toast);\n            } else {\n                var html = \x27\x3cdiv class=\x26quot;toast\x26quot;\x3e![](..\/..\/imgs\/0.png)\x3c\/img\x3e\x3cspan class=\x26quot;toast_word\x26quot;\x3e\x27 \x2b this.msg \x2b \x27\x3c\/span\x3e\x3c\/div\x3e\x27;\n                this.$toast = $(html);\n                $(\x27body\x27).append(this.$toast);\n            }\n        },\n        showToast: function () {\n            var _this = this;\n            this.$toast.fadeIn(300, function () {\n                setTimeout(function () {\n                    _this.$toast.fadeOut(300, function () {\n                        _this.$toast.remove();\n                    });\n                }, _this.time);\n            })\n        }\n    }\n    \n    function Toast(status, msg, time) {\n        return new toast(status, msg, time);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/* \n    提示模块\n    参数：状态(1表示成功，0表示失败)，消息，出现时间(不写默认是1s)\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etoast\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estatus, msg, time\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.status = status;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.msg = msg;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.time = time || \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createToast();\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.showToast();\n    }\n    \n    toast.prototype = {\n        \x3cspan class=\x22hljs-attr\x22\x3ecreateToast\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e html = \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22toast\x22\x26gt;![](..\/..\/imgs\/1.png)\x26lt;\/img\x26gt;\x26lt;span class=\x22toast_word\x22\x26gt;\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.msg \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/span\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$toast = $(html);\n                $(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).append(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$toast);\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e html = \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22toast\x22\x26gt;![](..\/..\/imgs\/0.png)\x26lt;\/img\x26gt;\x26lt;span class=\x22toast_word\x22\x26gt;\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.msg \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/span\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$toast = $(html);\n                $(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).append(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$toast);\n            }\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3eshowToast\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$toast.fadeIn(\x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    _this.$toast.fadeOut(\x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                        _this.$toast.remove();\n                    });\n                }, _this.time);\n            })\n        }\n    }\n    \n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eToast\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estatus, msg, time\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e toast(status, msg, time);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e4.\x3cstrong\x3e笔记模块\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e思路：\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e初始化（如 id，username 等等）\x3c\/li\x3e\n\x3cli\x3e创建节点\x3c\/li\x3e\n\x3cli\x3e设置颜色\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e绑定事件\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Note(opts) {\n    this.initOpts(opts);\n    this.createNode();\n    this.setColor();\n    this.bind();\n}\n\nNote.prototype = {\n    colors: [\n        [\x27#ea9b35\x27, \x27#efb04e\x27], \/\/ headColor, containerColor\n        [\x27#dd598b\x27, \x27#e672a2\x27],\n        [\x27#c24226\x27, \x27#d15a39\x27],\n        [\x27#c1c341\x27, \x27#d0d25c\x27],\n        [\x27#3f78c3\x27, \x27#5591d2\x27]\n    ],\n    defaultOpts: {\n        id: \x27\x27, \/\/Note的 id\n        $ct: $(\x27#content\x27).length \x3e 0 ? $(\x27#content\x27) : $(\x27body\x27), \/\/默认存放 Note 的容器\n        context: \x27请输入内容\x27, \/\/Note 的内容\n        createTime: new Date().toLocaleDateString().replace(\/\\\/\/g, \x27-\x27).match(\/^\\d{4}-\\d{1,2}-\\d{1,2}\/),\n        username: \x27admin\x27\n    },\n    initOpts: function (opts) {\n        this.opts = $.extend({}, this.defaultOpts, opts || {});\n        if (this.opts.id) {\n            this.id = this.opts.id;\n        }\n        this.createTime = this.opts.createTime ? this.opts.createTime : new Date().toLocaleDateString().replace(\/\\\/\/g, \x27-\x27).match(\/^\\d{4}-\\d{1,2}-\\d{1,2}\/);\n        this.username = this.opts.username ? this.opts.username : \x27admin\x27\n    },\n    createNode: function () {\n        var tpl = \x27\x3cdiv class=\x26quot;note\x26quot;\x3e\x27 \x2b\n            \x27\x3cdiv class=\x26quot;note-head\x26quot;\x3e\x3cspan class=\x26quot;delete\x26quot;\x3e×\x3c\/span\x3e\x3c\/div\x3e\x27 \x2b\n            \x27\x3cdiv class=\x26quot;note-ct\x26quot; contenteditable=\x26quot;true\x26quot;\x3e\x3c\/div\x3e\x27 \x2b\n            \x27\x3cdiv class=\x26quot;note-info\x26quot;\x3e\x3cdiv class=\x26quot;note-name\x26quot;\x3e\x27 \x2b this.username \x2b \x27\x3c\/div\x3e\x3cdiv class=\x26quot;note-time\x26quot;\x3e\x27 \x2b this.createTime \x2b \x27\x3c\/div\x3e\x27 \x2b\n            \x27\x3c\/div\x3e\x27;\n        this.$note = $(tpl);\n        this.$note.find(\x27.note-ct\x27).html(this.opts.context);\n        this.opts.$ct.append(this.$note);\n        \/\/if (!this.id) this.$note.css(\x27bottom\x27, \x2710px\x27); \/\/新增放到右边\n        Event.fire(\x27waterfall\x27);\n    },\n\n    setColor: function () {\n        var color = this.colors[Math.floor(Math.random() * 5)];\n        this.$note.find(\x26quot;.note-head\x26quot;).css(\x27background-color\x27, color[0]);\n        this.$note.find(\x27.note-ct\x27).css(\x27background-color\x27, color[1]);\n        this.$note.find(\x27.note-info\x27).css(\x27background-color\x27, color[1]);\n    },\n    setLayout: function () {\n        var self = this;\n        if (self.clock) {\n            clearTimeout(self.clock);\n        }\n        self.clock = setTimeout(function () {\n            Event.fire(\x27waterfall\x27);\n        }, 100);\n    },\n    bind: function () {\n        var _this = this, \/\/记录下坑，之前末尾是分号不是逗号后面都变成了全局变量结果造成了最后一个才能修改?\n            $note = this.$note,\n            $noteHead = $note.find(\x27.note-head\x27),\n            $noteCt = $note.find(\x27.note-ct\x27),\n            $close = $note.find(\x27.delete\x27);\n\n        $close.on(\x27click\x27, function () {\n            _this.delete();\n        });\n\n        $noteCt.on(\x27focus\x27, function () {\n            if ($noteCt.html() === \x27请输入内容\x27) $noteCt.html(\x27\x27);\n            $noteCt.data(\x27before\x27, $noteCt.html());\n        }).on(\x27blur paste\x27, function () {\n            if ($noteCt.data(\x27before\x27) != $noteCt.html()) {\n                $noteCt.data(\x27before\x27, $noteCt.html());\n                _this.setLayout();\n                if (_this.id) { \/\/判断是否有这个id，如果有就更新，如果没有就添加\n                    _this.edit($noteCt.html())\n                } else {\n                    _this.add($noteCt.html())\n                }\n            }\n        });\n\n        \/\/设置笔记的移动\n        $noteHead.on(\x27mousedown\x27, function (e) {\n            var evtX = e.pageX - $note.offset().left, \/\/evtX 计算事件的触发点在 dialog内部到 dialog 的左边缘的距离\n                evtY = e.pageY - $note.offset().top;\n            $note.addClass(\x27draggable\x27).data(\x27evtPos\x27, {\n                x: evtX,\n                y: evtY\n            }); \/\/把事件到 dialog 边缘的距离保存下来\n        }).on(\x27mouseup\x27, function () {\n            $note.removeClass(\x27draggable\x27).removeData(\x27pos\x27);\n        });\n\n        $(\x27body\x27).on(\x27mousemove\x27, function (e) {\n            $(\x27.draggable\x27).length \x26amp;\x26amp; $(\x27.draggable\x27).offset({\n                top: e.pageY - $(\x27.draggable\x27).data(\x27evtPos\x27).y, \/\/ 当用户鼠标移动时，根据鼠标的位置和前面保存的距离，计算 dialog 的绝对位置\n                left: e.pageX - $(\x27.draggable\x27).data(\x27evtPos\x27).x\n            });\n        });\n    },\n\n\n\n\n\n    \/* 添加笔记到数据库 *\/\n    add: function (msg) {\n        var _this = this;\n        $.post(\x27\/api\/notes\/add\x27, {\n            note: msg\n        }).done(function (res) {\n            if (res.status === 1) {\n                _this.id = res.id;\n                Toast(1, \x27添加成功！\x27);\n            } else {\n                _this.$note.remove();\n                Event.fire(\x27waterfall\x27);\n                Toast(0, res.errorMsg);\n            }\n        })\n    },\n    \/* 编辑笔记数据库 *\/\n    edit: function (msg) {\n        var _this = this;\n        $.post(\x27\/api\/notes\/edit\x27, {\n            id: this.id,\n            note: msg\n        }).done(function (res) {\n            if (res.status === 1) {\n                Toast(1, \x27更新成功！\x27);\n            } else {\n                Toast(0, res.errorMsg);\n            }\n        });\n    },\n    \/* 删除笔记 *\/\n    delete: function () {\n        var _this = this;\n        if (confirm(\x26quot;确认要删除吗？\x26quot;)) {\n            $.post(\x27\/api\/notes\/delete\x27, {\n                id: this.id\n            }).done(function (res) {\n                if (res.status === 1) {\n                    Toast(1, \x27删除成功！\x27);\n                    _this.$note.remove();\n                    Event.fire(\x27waterfall\x27)\n                } else {\n                    Toast(0, res.errorMsg);\n                }\n            });\n        }\n    }\n}\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eNote\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eopts\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.initOpts(opts);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createNode();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setColor();\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.bind();\n}\n\nNote.prototype = {\n    \x3cspan class=\x22hljs-attr\x22\x3ecolors\x3c\/span\x3e: [\n        [\x3cspan class=\x22hljs-string\x22\x3e\x27#ea9b35\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#efb04e\x27\x3c\/span\x3e], \x3cspan class=\x22hljs-comment\x22\x3e\/\/ headColor, containerColor\x3c\/span\x3e\n        [\x3cspan class=\x22hljs-string\x22\x3e\x27#dd598b\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#e672a2\x27\x3c\/span\x3e],\n        [\x3cspan class=\x22hljs-string\x22\x3e\x27#c24226\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#d15a39\x27\x3c\/span\x3e],\n        [\x3cspan class=\x22hljs-string\x22\x3e\x27#c1c341\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#d0d25c\x27\x3c\/span\x3e],\n        [\x3cspan class=\x22hljs-string\x22\x3e\x27#3f78c3\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27#5591d2\x27\x3c\/span\x3e]\n    ],\n    \x3cspan class=\x22hljs-attr\x22\x3edefaultOpts\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/Note的 id\x3c\/span\x3e\n        $ct: $(\x3cspan class=\x22hljs-string\x22\x3e\x27#content\x27\x3c\/span\x3e).length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ? $(\x3cspan class=\x22hljs-string\x22\x3e\x27#content\x27\x3c\/span\x3e) : $(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e), \x3cspan class=\x22hljs-comment\x22\x3e\/\/默认存放 Note 的容器\x3c\/span\x3e\n        context: \x3cspan class=\x22hljs-string\x22\x3e\x27请输入内容\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/Note 的内容\x3c\/span\x3e\n        createTime: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().toLocaleDateString().replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\\\/\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e).match(\x3cspan class=\x22hljs-regexp\x22\x3e\/^\\d{4}-\\d{1,2}-\\d{1,2}\/\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3einitOpts\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eopts\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts = $.extend({}, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.defaultOpts, opts || {});\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.id) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.id;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createTime = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.createTime ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.createTime : \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().toLocaleDateString().replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\\\/\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e).match(\x3cspan class=\x22hljs-regexp\x22\x3e\/^\\d{4}-\\d{1,2}-\\d{1,2}\/\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.username = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.username ? \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.username : \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3ecreateNode\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tpl = \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22note\x22\x26gt;\x27\x3c\/span\x3e \x2b\n            \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22note-head\x22\x26gt;\x26lt;span class=\x22delete\x22\x26gt;×\x26lt;\/span\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e \x2b\n            \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22note-ct\x22 contenteditable=\x22true\x22\x26gt;\x26lt;\/div\x26gt;\x27\x3c\/span\x3e \x2b\n            \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;div class=\x22note-info\x22\x26gt;\x26lt;div class=\x22note-name\x22\x26gt;\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.username \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/div\x26gt;\x26lt;div class=\x22note-time\x22\x26gt;\x27\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createTime \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/div\x26gt;\x27\x3c\/span\x3e \x2b\n            \x3cspan class=\x22hljs-string\x22\x3e\x27\x26lt;\/div\x26gt;\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note = $(tpl);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.note-ct\x27\x3c\/span\x3e).html(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.context);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.opts.$ct.append(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/if (!this.id) this.$note.css(\x27bottom\x27, \x2710px\x27); \/\/新增放到右边\x3c\/span\x3e\n        Event.fire(\x3cspan class=\x22hljs-string\x22\x3e\x27waterfall\x27\x3c\/span\x3e);\n    },\n\n    \x3cspan class=\x22hljs-attr\x22\x3esetColor\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e color = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.colors[\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e)];\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note.find(\x3cspan class=\x22hljs-string\x22\x3e\x22.note-head\x22\x3c\/span\x3e).css(\x3cspan class=\x22hljs-string\x22\x3e\x27background-color\x27\x3c\/span\x3e, color[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.note-ct\x27\x3c\/span\x3e).css(\x3cspan class=\x22hljs-string\x22\x3e\x27background-color\x27\x3c\/span\x3e, color[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.note-info\x27\x3c\/span\x3e).css(\x3cspan class=\x22hljs-string\x22\x3e\x27background-color\x27\x3c\/span\x3e, color[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3esetLayout\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e self = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (self.clock) {\n            clearTimeout(self.clock);\n        }\n        self.clock = setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            Event.fire(\x3cspan class=\x22hljs-string\x22\x3e\x27waterfall\x27\x3c\/span\x3e);\n        }, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3ebind\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/记录下坑，之前末尾是分号不是逗号后面都变成了全局变量结果造成了最后一个才能修改?\x3c\/span\x3e\n            $note = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$note,\n            $noteHead = $note.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.note-head\x27\x3c\/span\x3e),\n            $noteCt = $note.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.note-ct\x27\x3c\/span\x3e),\n            $close = $note.find(\x3cspan class=\x22hljs-string\x22\x3e\x27.delete\x27\x3c\/span\x3e);\n\n        $close.on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            _this.delete();\n        });\n\n        $noteCt.on(\x3cspan class=\x22hljs-string\x22\x3e\x27focus\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ($noteCt.html() === \x3cspan class=\x22hljs-string\x22\x3e\x27请输入内容\x27\x3c\/span\x3e) $noteCt.html(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n            $noteCt.data(\x3cspan class=\x22hljs-string\x22\x3e\x27before\x27\x3c\/span\x3e, $noteCt.html());\n        }).on(\x3cspan class=\x22hljs-string\x22\x3e\x27blur paste\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ($noteCt.data(\x3cspan class=\x22hljs-string\x22\x3e\x27before\x27\x3c\/span\x3e) != $noteCt.html()) {\n                $noteCt.data(\x3cspan class=\x22hljs-string\x22\x3e\x27before\x27\x3c\/span\x3e, $noteCt.html());\n                _this.setLayout();\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (_this.id) { \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否有这个id，如果有就更新，如果没有就添加\x3c\/span\x3e\n                    _this.edit($noteCt.html())\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                    _this.add($noteCt.html())\n                }\n            }\n        });\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置笔记的移动\x3c\/span\x3e\n        $noteHead.on(\x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e evtX = e.pageX - $note.offset().left, \x3cspan class=\x22hljs-comment\x22\x3e\/\/evtX 计算事件的触发点在 dialog内部到 dialog 的左边缘的距离\x3c\/span\x3e\n                evtY = e.pageY - $note.offset().top;\n            $note.addClass(\x3cspan class=\x22hljs-string\x22\x3e\x27draggable\x27\x3c\/span\x3e).data(\x3cspan class=\x22hljs-string\x22\x3e\x27evtPos\x27\x3c\/span\x3e, {\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: evtX,\n                \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: evtY\n            }); \x3cspan class=\x22hljs-comment\x22\x3e\/\/把事件到 dialog 边缘的距离保存下来\x3c\/span\x3e\n        }).on(\x3cspan class=\x22hljs-string\x22\x3e\x27mouseup\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            $note.removeClass(\x3cspan class=\x22hljs-string\x22\x3e\x27draggable\x27\x3c\/span\x3e).removeData(\x3cspan class=\x22hljs-string\x22\x3e\x27pos\x27\x3c\/span\x3e);\n        });\n\n        $(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n            $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).length \x26amp;\x26amp; $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).offset({\n                \x3cspan class=\x22hljs-attr\x22\x3etop\x3c\/span\x3e: e.pageY - $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).data(\x3cspan class=\x22hljs-string\x22\x3e\x27evtPos\x27\x3c\/span\x3e).y, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当用户鼠标移动时，根据鼠标的位置和前面保存的距离，计算 dialog 的绝对位置\x3c\/span\x3e\n                left: e.pageX - $(\x3cspan class=\x22hljs-string\x22\x3e\x27.draggable\x27\x3c\/span\x3e).data(\x3cspan class=\x22hljs-string\x22\x3e\x27evtPos\x27\x3c\/span\x3e).x\n            });\n        });\n    },\n\n\n\n\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 添加笔记到数据库 *\/\x3c\/span\x3e\n    add: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3emsg\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        $.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/notes\/add\x27\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-attr\x22\x3enote\x3c\/span\x3e: msg\n        }).done(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (res.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                _this.id = res.id;\n                Toast(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27添加成功！\x27\x3c\/span\x3e);\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                _this.$note.remove();\n                Event.fire(\x3cspan class=\x22hljs-string\x22\x3e\x27waterfall\x27\x3c\/span\x3e);\n                Toast(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, res.errorMsg);\n            }\n        })\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 编辑笔记数据库 *\/\x3c\/span\x3e\n    edit: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3emsg\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        $.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/notes\/edit\x27\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id,\n            \x3cspan class=\x22hljs-attr\x22\x3enote\x3c\/span\x3e: msg\n        }).done(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (res.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                Toast(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27更新成功！\x27\x3c\/span\x3e);\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                Toast(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, res.errorMsg);\n            }\n        });\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 删除笔记 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _this = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (confirm(\x3cspan class=\x22hljs-string\x22\x3e\x22确认要删除吗？\x22\x3c\/span\x3e)) {\n            $.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/api\/notes\/delete\x27\x3c\/span\x3e, {\n                \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id\n            }).done(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (res.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                    Toast(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27删除成功！\x27\x3c\/span\x3e);\n                    _this.$note.remove();\n                    Event.fire(\x3cspan class=\x22hljs-string\x22\x3e\x27waterfall\x27\x3c\/span\x3e)\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                    Toast(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, res.errorMsg);\n                }\n            });\n        }\n    }\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e5.\x3cstrong\x3e笔记管理模块\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var NoteManager = (function () {\n    \/\/页面加载\n    function load() {\n        $.get(\x27api\/notes\x27).done(function (res) {\n            if (res.status === 1) {\n                $.each(res.data, function (index, msg) {\n                    new Note({\n                        id: msg.id,\n                        context: msg.text,\n                        createTime: msg.createdAt.match(\/^\\d{4}-\\d{1,2}-\\d{1,2}\/),\n                        username: msg.username\n                    });\n                });\n\n                Event.fire(\x27waterfall\x27);\n\n            } else {\n                Toast(0, res.errorMsg);\n            }\n        }).fail(function () {\n            Toast(0, \x26quot;网络异常\x26quot;);\n        });\n    }\n\n    \/* 添加笔记 *\/\n    function add() {\n        $.get(\x27\/login\x27).then(function (res) {\/\/判断是否登录\n            if (res.status === 1) {\n                new Note({\n                    username: res.username\n                });\n            } else {\n                Toast(0, res.errorMsg);\n            }\n        });\n    }\n    return {\n        load: load,\n        add: add\n    }\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e NoteManager = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/页面加载\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eload\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        $.get(\x3cspan class=\x22hljs-string\x22\x3e\x27api\/notes\x27\x3c\/span\x3e).done(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (res.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                $.each(res.data, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eindex, msg\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Note({\n                        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: msg.id,\n                        \x3cspan class=\x22hljs-attr\x22\x3econtext\x3c\/span\x3e: msg.text,\n                        \x3cspan class=\x22hljs-attr\x22\x3ecreateTime\x3c\/span\x3e: msg.createdAt.match(\x3cspan class=\x22hljs-regexp\x22\x3e\/^\\d{4}-\\d{1,2}-\\d{1,2}\/\x3c\/span\x3e),\n                        \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: msg.username\n                    });\n                });\n\n                Event.fire(\x3cspan class=\x22hljs-string\x22\x3e\x27waterfall\x27\x3c\/span\x3e);\n\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                Toast(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, res.errorMsg);\n            }\n        }).fail(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            Toast(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22网络异常\x22\x3c\/span\x3e);\n        });\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 添加笔记 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eadd\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        $.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e) \x3c\/span\x3e{\x3cspan class=\x22hljs-comment\x22\x3e\/\/判断是否登录\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (res.status === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Note({\n                    \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: res.username\n                });\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                Toast(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, res.errorMsg);\n            }\n        });\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3eload\x3c\/span\x3e: load,\n        \x3cspan class=\x22hljs-attr\x22\x3eadd\x3c\/span\x3e: add\n    }\n})();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e6.\x3cstrong\x3e发布订阅模式\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/* 发布订阅模式 *\/\nvar Event = (function () {\n    var events = {};\n\n    function on(evt, handler) {\n        events[evt] = events[evt] || [];\n        events[evt].push({\n            handler: handler\n        });\n    }\n\n    function fire(evt, args) {\n        if (!events[evt]) {\n            return;\n        }\n        for (var i = 0; i \x3c events[evt].length; i\x2b\x2b) {\n            events[evt][i].handler(args);\n        }\n    }\n\n    function off(name) {\n        delete events[name];\n    }\n    return {\n        on: on,\n        fire: fire,\n        off: off\n    }\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs qml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/* 发布订阅模式 *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e Event = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e events = {};\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eon\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt, handler\x3c\/span\x3e) \x3c\/span\x3e{\n        events[evt] = events[evt] || [];\n        events[evt].push({\n            \x3cspan class=\x22hljs-attribute\x22\x3ehandler\x3c\/span\x3e: handler\n        });\n    }\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3efire\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevt, args\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!events[evt]) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; events[evt].length; i\x2b\x2b) {\n            events[evt][i].handler(args);\n        }\n    }\n\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eoff\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e events[name];\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attribute\x22\x3eon\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eon\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attribute\x22\x3efire\x3c\/span\x3e: fire,\n        \x3cspan class=\x22hljs-attribute\x22\x3eoff\x3c\/span\x3e: off\n    }\n})();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e写完模块后，写入口文件index.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22require(\x27sass\/index.scss\x27);\nvar Toast = require(\x27mod\/toast.js\x27).Toast;\nvar WaterFall = require(\x27mod\/waterfall.js\x27);\nvar NoteManager = require(\x27mod\/note-manager\x27);\nvar Event = require(\x27mod\/event.js\x27);\n\n\nNoteManager.load();\n$(\x27.add-note\x27).on(\x27click\x27, function () {\n    NoteManager.add();\n})\n\nEvent.on(\x27waterfall\x27, function () {\n    WaterFall.init($(\x26quot;#content\x26quot;));\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\/index.scss\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Toast = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mod\/toast.js\x27\x3c\/span\x3e).Toast;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e WaterFall = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mod\/waterfall.js\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e NoteManager = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mod\/note-manager\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Event = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mod\/event.js\x27\x3c\/span\x3e);\n\n\nNoteManager.load();\n$(\x3cspan class=\x22hljs-string\x22\x3e\x27.add-note\x27\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    NoteManager.add();\n})\n\nEvent.on(\x3cspan class=\x22hljs-string\x22\x3e\x27waterfall\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    WaterFall.init($(\x3cspan class=\x22hljs-string\x22\x3e\x22#content\x22\x3c\/span\x3e));\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这就差不多完成了70%了，接下来就创建数据库，连接数据库了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*创建数据库 运行 node note.js*\/\n\nvar Sequelize = require(\x27sequelize\x27);\nvar path = require(\x27path\x27);\n\nvar sequelize = new Sequelize(undefined, undefined, undefined, {\n    host: \x27localhost\x27,\n    dialect: \x27sqlite\x27,\n    \/\/ SQLite only\n    storage: path.join(__dirname, \x27..\/database\/database.sqlite\x27)\n});\n\n\/* 测试连接是否成功\nnode note.js\n\nsequelize.authenticate()\n    .then(() =\x3e {\n        console.log(\x27Connection has been established successfully.\x27);\n    })\n    .catch(err =\x3e {\n        console.error(\x27Unable to connect to the database:\x27, err);\n    });\n\n*\/\n\n\nvar Note = sequelize.define(\x27note\x27, {\n    text: {\n        type: Sequelize.STRING\n    },\n    userid: {\n        type: Sequelize.INTEGER\n    },\n    username: {\n        type: Sequelize.STRING\n    }\n});\n\nNote.sync();\n\n\/*\n删除表\nNote.drop();\n*\/\n\n\n\/*\n\/\/创建数据库\n\nNote.sync().then(function(){\n     Note.create({text:\x26quot;sdsdsdsd\x26quot;});\n}).then(function(){\n    \/\/查询表\n    Note.findAll({raw:true}).then(function(notes){\n        console.log(notes);\n    })\n});\n*\/\n\n\n\n\nmodule.exports = Note;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lua\x22\x3e\x3ccode\x3e\/*创建数据库 运行 node note.js*\/\n\nvar Sequelize = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27sequelize\x27\x3c\/span\x3e);\nvar path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\nvar sequelize = new Sequelize(undefined, undefined, undefined, {\n    host: \x3cspan class=\x22hljs-string\x22\x3e\x27localhost\x27\x3c\/span\x3e,\n    dialect: \x3cspan class=\x22hljs-string\x22\x3e\x27sqlite\x27\x3c\/span\x3e,\n    \/\/ SQLite only\n    storage: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/database\/database.sqlite\x27\x3c\/span\x3e)\n});\n\n\/* 测试连接是否成功\nnode note.js\n\nsequelize.authenticate()\n    .\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(() =\x26gt; {\n        console.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Connection has been established successfully.\x27\x3c\/span\x3e);\n    })\n    .catch(err =\x26gt; {\n        console.\x3cspan class=\x22hljs-built_in\x22\x3eerror\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Unable to connect to the database:\x27\x3c\/span\x3e, err);\n    });\n\n*\/\n\n\nvar Note = sequelize.define(\x3cspan class=\x22hljs-string\x22\x3e\x27note\x27\x3c\/span\x3e, {\n    text: {\n        \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e: Sequelize.STRING\n    },\n    userid: {\n        \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e: Sequelize.INTEGER\n    },\n    username: {\n        \x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e: Sequelize.STRING\n    }\n});\n\nNote.sync();\n\n\/*\n删除表\nNote.drop();\n*\/\n\n\n\/*\n\/\/创建数据库\n\nNote.sync().\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n     Note.\x3cspan class=\x22hljs-built_in\x22\x3ecreate\x3c\/span\x3e({text:\x3cspan class=\x22hljs-string\x22\x3e\x22sdsdsdsd\x22\x3c\/span\x3e});\n}).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \/\/查询表\n    Note.findAll({raw:\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e}).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(notes)\x3c\/span\x3e\x3c\/span\x3e{\n        console.log(notes);\n    })\n});\n*\/\n\n\n\n\nmodule.exports = Note;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后是在routes 里处理 ajax 请求，处理登录信息，获取 id，用户名等等，到这就基本完成了\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e经过一星期的开发，了解了前后端联调，模块化开发方式、webpack 及loader和插件的使用、npm 的使用，Express的使用、路由、中间件、sqlite3、nodejs，在开发过程中还是有遇到许多问题，例如在连续声明变量的时候，不小心把逗号写成了分号，其他变量就变成了全局变量，于是就出错了，查了好久?\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011155412\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011155412\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e不过在这过程之中还是学到了许多，重要的是过程，继续往前端的路走下去?\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端小项目之在线便利贴</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011154801">https://segmentfault.com/a/1190000011154801</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ne9dyo0r5gd/" target="_blank">https://alili.tech/archive/ne9dyo0r5gd/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>