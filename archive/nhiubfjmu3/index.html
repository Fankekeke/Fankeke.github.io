<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="微信小游戏的前端攻城狮玩法"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>微信小游戏的前端攻城狮玩法 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/nhiubfjmu3/",
				"appid": "1613049289050283", 
				"title": "微信小游戏的前端攻城狮玩法 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-01T02:30:12"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/o6sg7qmt7p/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/osg0gq5xvv/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&text=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&text=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&is_video=false&description=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fnhiubfjmu3%2f&title=%e5%be%ae%e4%bf%a1%e5%b0%8f%e6%b8%b8%e6%88%8f%e7%9a%84%e5%89%8d%e7%ab%af%e6%94%bb%e5%9f%8e%e7%8b%ae%e7%8e%a9%e6%b3%95"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">微信小游戏的前端攻城狮玩法</h1><div class="meta"><div class="postdate"><time datetime="2018-12-01" itemprop="datePublished">2018-12-01</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e转自自己在开源中国上的博客：\x3ca href=\x22https:\/\/my.oschina.net\/u\/724721\/blog\/974091\x22 rel=\x22nofollow noreferrer\x22\x3ehttps:\/\/my.oschina.net\/u\/7247...\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2\x3e前言\x3c\/h2\x3e\n\x3cp\x3e公司群里经常有人会发一些微信小游戏，每次下面都会跟好多晒分截图。比如这个《看你有多色》的考察眼力的（瞎眼）小游戏。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841792\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841792\x22 alt=\x221.png\x22 title=\x221.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e别人的截图都是25分左右，还有30分以上的。自己玩了两把，20分都没上，于是只能悻悻的闷声当没看见。但如果你是一名前端攻城狮，并且还有一台电脑在手边，那就大不一样了。因为：前端攻城狮有前端攻城狮的玩法。\x3c\/p\x3e\n\x3ch2\x3e准备材料\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e手机一个（废话）\x3c\/li\x3e\n\x3cli\x3e电脑一台\x3c\/li\x3e\n\x3cli\x3e手机和电脑都可以连的WIFI\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2\x3e研究源码\x3c\/h2\x3e\n\x3cp\x3e首先当然得知道游戏本身是怎样的玩啦。用浏览器打开\x3ca href=\x22http:\/\/h5.6395.com\/link\/knyds.html#rd\x22 rel=\x22nofollow noreferrer\x22\x3e游戏页面\x3c\/a\x3e，打开 F12。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841793?w=1906\x26amp;h=1410\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841793?w=1906\x26amp;h=1410\x22 alt=\x222.png\x22 title=\x222.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到这个页面内嵌了一个 iframe，真正的游戏页面其实是这个 \x3ca href=\x22http:\/\/9g.game6.cn\/ssssds\/game.html\x22 rel=\x22nofollow noreferrer\x22\x3ehttp:\/\/9g.game6.cn\/ssssds\/gam...\x3c\/a\x3e，打开之。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841794\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841794\x22 alt=\x223.png\x22 title=\x223.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eDOM 结构并不是很复杂。下面引入了一个 \x3ccode\x3emain.min.js\x3c\/code\x3e，估计就是控制游戏的主代码了。但也不着急看代码内容，先点击开始游戏。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841795?w=2148\x26amp;h=1532\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841795?w=2148\x26amp;h=1532\x22 alt=\x224.png\x22 title=\x224.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e游戏开始倒计时。不如先把这个时间改长点吧。因为每次时间刷新这个 DOM 元素都会刷新，那么检测这个 DOM 元素的更改肯定能找到控制时间相关的代码。审查元素，打开右键菜单，Break on -\x26gt; subtree modifications\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841796\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841796\x22 alt=\x225.png\x22 title=\x225.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e断点断到了 \x3ccode\x3elibs.min.js\x3c\/code\x3e 里。代码是被压缩过的，名字是 \x3ccode\x3elibs\x3c\/code\x3e 那应该是个第三方库。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841797\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841797\x22 alt=\x226.png\x22 title=\x226.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e所以具体什么意思不用管，直接在调试工具的右侧调用栈（Call stack）列表里找到最上层的用户代码（main.min.js）打开。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841798\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841798\x22 alt=\x227.png\x22 title=\x227.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e文件名虽然以 \x3ccode\x3emin.js\x3c\/code\x3e 结尾，但是缩进还在。当然我们也可以点击左下角的 \x3ccode\x3e{}\x3c\/code\x3e 按钮进一步美化代码。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841799\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841799\x22 alt=\x228.png\x22 title=\x228.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到 DOM 操作用的是类似 jQuery 的库。代码逻辑也很简单，如果当前游戏暂停什么都不做。如果没有暂停，时间减一。如果时间小于 0，游戏结束，否则输出当前时间。\x3c\/p\x3e\n\x3cp\x3e那么要做的时间很简单，回到 \x3ccode\x3emain.min.js\x3c\/code\x3e，在函数头部加上一句\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3ethis.time = 60;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841800\x22 alt=\x229.png\x22 title=\x229.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e保存，把 DOM 断点取消，继续游戏。可以看到时间固定在了 59 不再减少。\x3c\/p\x3e\n\x3cp\x3e当然这样做只是固定游戏时间，不如直接改分简单暴力。\x3c\/p\x3e\n\x3cp\x3e每次点击正确方格。左上角的得分会被改变。如上类似操作可以容易的找到控制分数的代码。\x3c\/p\x3e\n\x3cp\x3e检查 \x3ccode\x3e得分： X\x3c\/code\x3e 这个 DOM 元素，右键，选择 Break on -\x26gt; subtree modifications。点击一个正确的方格，断点会断到被压缩过的 jQuery 代码内部。右侧调用栈列表里选择第一个 \x3ccode\x3emain.min.js\x3c\/code\x3e 所对应的函数 \x3ccode\x3erenderInfo\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841801\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841801\x22 alt=\x2210.png\x22 title=\x2210.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e很显然这个 \x3ccode\x3ethis.lv\x3c\/code\x3e 就是当前的得分。那么要做的事情也很简单，直接在 \x3ccode\x3eConsole\x3c\/code\x3e 里把 \x3ccode\x3ethis.lv\x3c\/code\x3e 的值改为你想要的值。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841802\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841802\x22 alt=\x2211.png\x22 title=\x2211.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e取消断点继续游戏。得分没有变化。别着急，那是因为你只是改了外面的值，而写入 DOM 元素中的值已经传入了 jQuery 库内部了。当你再次得分时，分数就会变为你想要的值。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841803\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841803\x22 alt=\x2212.png\x22 title=\x2212.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e分数被改掉了，图还是一样的瞎眼。有没有什么办法能直接标识出正确的方格呢？这时我们就必须看游戏的内部实现逻辑了，需要看看这些方格是怎么被画出来的。\x3c\/p\x3e\n\x3cp\x3e于是这次直接对大方格（#box）打断点，点击正确的方格。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841804\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841804\x22 alt=\x2213.png\x22 title=\x2213.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e断点依旧是断到了 jQuery 里面。调用栈列表回到最后用户代码 renderMap 里。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841805\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841805\x22 alt=\x2214.png\x22 title=\x2214.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到这里是在用多个 \x3ccode\x3espan\x3c\/code\x3e 标签画方格区域。所有的 \x3ccode\x3espan\x3c\/code\x3e 标签都是相同的。然而这些方格至少得有 \x3ccode\x3ebackground-color\x3c\/code\x3e 或者一个特别的 \x3ccode\x3eclass\x3c\/code\x3e 才对。\x3c\/p\x3e\n\x3cp\x3e单步进入下面的 \x3ccode\x3ethis.api.render\x3c\/code\x3e 方法。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841806\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841806\x22 alt=\x2215.png\x22 title=\x2215.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e可以看到这个方法就是在给 \x3ccode\x3espan\x3c\/code\x3e 标签添加背景色了。可以看到这些 \x3ccode\x3espan\x3c\/code\x3e 分为两种 \x3ccode\x3edata(\x27type\x27, \x27a\x27)\x3c\/code\x3e 和 \x3ccode\x3edata(\x27type\x27, \x27b\x27)\x3c\/code\x3e。其中 \x3ccode\x3etype: b\x3c\/code\x3e 的背景色用的是随机生成的颜色，而 \x3ccode\x3etype: a\x3c\/code\x3e 的背景色是基于 \x3ccode\x3etype: b\x3c\/code\x3e 的颜色基础生成的。那这个 \x3ccode\x3etype: a\x3c\/code\x3e 是不是就代表正确方格的意思呢？\x3c\/p\x3e\n\x3cp\x3e我们去看看程序究竟是怎样判断点击的方格是否正确的。直接审查正确方格的元素，检查他们绑定的 \x3ccode\x3eclick\x3c\/code\x3e 事件。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841807\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841807\x22 alt=\x2216.png\x22 title=\x2216.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e事件名右侧有绑定事件的源代码位置，点击进入。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841808\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841808\x22 alt=\x2217.png\x22 title=\x2217.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对于使用第三方库绑定的事件，代码经常会跳转到第三方库内部代码里，不过这次我们运气不错。可以看到：代码首先拿出了设置在元素上的 \x3ccode\x3edata(\x27type\x27)\x3c\/code\x3e，如果为 \x3ccode\x3ea\x3c\/code\x3e 则调用 e.nextLv。我们猜的没错。\x3c\/p\x3e\n\x3cp\x3e那么事情就好办了。看看原本这些 \x3ccode\x3espan\x3c\/code\x3e 标签就有个 5px 的 border。给这个 border 改个颜色好了呀。\x3c\/p\x3e\n\x3cp\x3e回到之前的 \x3ccode\x3erender\x3c\/code\x3e 函数里，给 \x3ccode\x3etype: a\x3c\/code\x3e 的 \x3ccode\x3espan\x3c\/code\x3e 标签的边框改个颜色：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22js\x22\x3espan.css(\x27border-color\x27, \x27black\x27)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841809\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841809\x22 alt=\x2218.png\x22 title=\x2218.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e继续游戏，正确的方格有了显眼的边框，这下不会再瞎眼了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841810\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841810\x22 alt=\x2219.png\x22 title=\x2219.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2\x3e实行魔改\x3c\/h2\x3e\n\x3cp\x3e这下万事俱备，就差把我们的改动放到手机端了。这时我们要请出移动端调试神器 \x3ccode\x3eCharles\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841811\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841811\x22 alt=\x2220.png\x22 title=\x2220.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如图所言，\x3ca href=\x22https:\/\/www.charlesproxy.com\/\x22 rel=\x22nofollow noreferrer\x22\x3eCharles\x3c\/a\x3e 是一个跨平台的网页调试代理工具。Windows 上有免费的 \x3ca href=\x22http:\/\/www.telerik.com\/fiddler\x22 rel=\x22nofollow noreferrer\x22\x3eFiddler\x3c\/a\x3e，然而 Fiddler 是用 .NET 写的，在 macOS 上不太玩的转。跨平台（Java 写）的 Charles 却是收费软件，有钱的可以支持一下原作者开发，没钱的也可以简单的用你懂的方式搞定。\x3c\/p\x3e\n\x3cp\x3e我们要做的事情就是启用手机代理到你的电脑上。首先查看电脑 IP。macOS 有个简单的查看本机内网 IP 的方法：按住 Option 键点击系统菜单栏上的 WiFi 图标（当然你非要 ifconfig 也不是不可以）\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841812\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841812\x22 alt=\x2221.png\x22 title=\x2221.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e保证 Charles 为打开状态。在手机上，打开系统设置，将 WiFi 的代理设置为你电脑的 IP，端口号 8888\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841813\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841813\x22 alt=\x2222.png\x22 title=\x2222.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e手机上随便进行一个需要网络请求的操作，Charles 会要求你确认是否允许接入代理请求，点击 \x3ccode\x3eAllow\x3c\/code\x3e 允许此操作。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841814\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841814\x22 alt=\x2223.png\x22 title=\x2223.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这时在手机微信里访问游戏的链接，在 PC 端 Charles 里就可以看到手机发出的 HTTP 请求。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841815\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841815\x22 alt=\x2224.png\x22 title=\x2224.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e注意，手机端浏览器自己的缓存经常让服务器返回 204 或者根本不发出请求。这时可以尝试开启 Charles 的 Tools -\x26gt; No Caching 并多刷新页面解决，实在不行就得清除对应 APP 的数据。\x3c\/p\x3e\n\x3cp\x3e找到需要修改的文件 \x3ccode\x3emain.min.js\x3c\/code\x3e，右键，选择 Breakpoints\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841816\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841816\x22 alt=\x2225.png\x22 title=\x2225.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这时就给这个文件 URL 的请求打了断点。手机上刷新页面。首先会收到 Request，点击 \x3ccode\x3eExecute\x3c\/code\x3e 放行。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841817\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841817\x22 alt=\x2226.png\x22 title=\x2226.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e然后会受到 Response。这时点击右侧的 \x3ccode\x3eEdit Response\x3c\/code\x3e，然后点击下面的 \x3ccode\x3eJavaScript\x3c\/code\x3e，善用查找功能把代码改掉\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841818\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841818\x22 alt=\x2227.png\x22 title=\x2227.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击 Execute，爽去吧\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841819\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841819\x22 alt=\x2228.png\x22 title=\x2228.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e截图跟同事显摆一下。如果他问你图是不是 P 的，那你可以诅咒发誓绝对没有。本来就是纯手点的嘛~~~\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014841820?w=1242\x26amp;h=2208\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014841820?w=1242\x26amp;h=2208\x22 alt=\x2229.png\x22 title=\x2229.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e全文完\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>微信小游戏的前端攻城狮玩法</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014841787">https://segmentfault.com/a/1190000014841787</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/nhiubfjmu3/" target="_blank">https://alili.tech/archive/nhiubfjmu3/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>