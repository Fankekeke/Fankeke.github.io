<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="redux从零开始入门笔记"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>redux从零开始入门笔记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/o625gq1qz3/",
				"appid": "1613049289050283", 
				"title": "redux从零开始入门笔记 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-16T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/b8iv0fekim4/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/8do23nye48i/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&text=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&text=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&title=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&is_video=false&description=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&title=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&title=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&title=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fo625gq1qz3%2f&title=redux%e4%bb%8e%e9%9b%b6%e5%bc%80%e5%a7%8b%e5%85%a5%e9%97%a8%e7%ac%94%e8%ae%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">redux从零开始入门笔记</h1><div class="meta"><div class="postdate"><time datetime="2018-12-16" itemprop="datePublished">2018-12-16</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e为什么需要redux\x3c\/h2\x3e\n\x3cp\x3e学过react的都知道，react用\x3ccode\x3estate\x3c\/code\x3e和\x3ccode\x3eprops\x3c\/code\x3e控制组件的渲染情况，而对于JavaScript单页面日趋复杂的今天，JavaScript需要管理越来越多的state，而这些state包括着各种乱七八糟途径来的数据。甚至有的应用的state会关系到另一个组件的状态。所以为了方便对这些state的管理以及对state变化的可控性。这个时候Redux这个东西就出来了，它可以让state的变化变得可预测。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eRedux的基本概念\x3c\/h2\x3e\n\x3cp\x3e什么是redux？这里非权威的解释：就是一个应用的state管理库，甚至可以说是前端数据库。更包括的是管理数据。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3estate\x3c\/h3\x3e\n\x3cp\x3estate是整个应用的数据，本质上是一个普通对象。\x3cbr\x3estate决定了整个应用的组件如何渲染，渲染的结果是什么。可以说，State是应用的灵魂，组件是应用的肉体。\x3cbr\x3e所以，在项目开发初期，设计一份健壮灵活的State尤其重要，对后续的开发有很大的帮助。\x3cbr\x3e但是，并不是所有的数据都需要保存到state中，有些属于组件的数据是完全可以留给组件自身去维护的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eaction\x3c\/h3\x3e\n\x3cp\x3e数据state已经有了，那么我们是如何实现管理这些state中的数据的呢？那就是action，什么是action？按字面意思解释就是动作，也可以理解成，一个可能！改变state的动作包装。就这么简单。。。。\x3cbr\x3e只有当某一个动作发生的时候才能够触发这个state去改变，那么，触发state变化的原因那么多，比如这里的我们的点击事件，还有网络请求，页面进入，鼠标移入。。。所以action的出现，就是为了把这些操作所产生或者改变的数据从应用传到store中的有效载荷。 需要说明的是，action是state的唯一来源。它本质上就是一个JavaScript对象，但是约定的包含\x3ccode\x3etype\x3c\/code\x3e属性，可以理解成每个人都要有名字一般。除了type属性，别的属性，都可以.\x3cbr\x3e那么这么多action一个个手动创建必然不现实，一般我们会写好\x3ccode\x3eactionCreator\x3c\/code\x3e，即action的创建函数。调用\x3ccode\x3eactionCreator\x3c\/code\x3e，给你返回一个action。这里我们可以使用 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/redux-actions\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eredux-actions\x3c\/a\x3e，嗯呢，我们下文有介绍。\x3cbr\x3e比如有一个counter数量加减应用，我们就有两个action，一个\x3ccode\x3edecrement\x3c\/code\x3e，一个\x3ccode\x3eincrement\x3c\/code\x3e。 所以这里的action creator写成如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export function decrement() {\n    return{\n        type:DECREMENT_COUNTER\n    }\n}\n\nexport function increment(){\n    return{\n        type:INCREMENT_COUNTER\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edecrement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e:DECREMENT_COUNTER\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eincrement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e:INCREMENT_COUNTER\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么，当action创建完成了之后呢，我们怎么触发这些action呢，这时我们是要利用\x3ccode\x3edispatch\x3c\/code\x3e，比如我们执行count增减减少动作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export function incrementIfOdd(){\n    return(dispatch,getState)=\x3e{\n        const {counter} = getState();\n        if(counter%2==0) {\n            return;\n        }\n        dispatch(increment());\n    }\n}\n\nexport function incrementAsync() {\n    return dispatch =\x3e {\n        setTimeout(() =\x3e {\n            dispatch(increment());\n        }, 1000);\n    };\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eincrementIfOdd\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3edispatch,getState\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {counter} = getState();\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(counter%\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e==\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n        dispatch(increment());\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eincrementAsync\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edispatch\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        setTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            dispatch(increment());\n        }, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\n    };\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了减少样板代码，我们使用单独的模块或文件来定义 action type 常量\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const INCREMENT_COUNTER = \x27INCREMENT_COUNTER\x27;\nexport const DECREMENT_COUNTER = \x27DECREMENT_COUNTER\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e INCREMENT_COUNTER = \x3cspan class=\x22hljs-string\x22\x3e\x27INCREMENT_COUNTER\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e DECREMENT_COUNTER = \x3cspan class=\x22hljs-string\x22\x3e\x27DECREMENT_COUNTER\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这么做不是必须的，在大型应用中把它们显式地定义成常量还是利大于弊的。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ereducer\x3c\/h3\x3e\n\x3cp\x3e既然这个可能改变state的动作已经包装好了，那么我们怎么去判断并且对state做相应的改变呢？对，这就是reducer干的事情了。\x3cbr\x3e\x3ccode\x3ereducer\x3c\/code\x3e是state最终格式的确定。它是一个纯函数，也就是说，只要传入参数相同，返回计算得到的下一个 state 就一定相同。没有特殊情况、没有副作用，没有 API 请求、没有变量修改，单纯执行计算。\x3cbr\x3e\x3ccode\x3ereducer\x3c\/code\x3e对传入的action进行判断，然后返回一个通过判断后的state，这就是reducer的全部职责。如我们的counter应用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {INCREMENT_COUNTER,DECREMENT_COUNTER} from \x27..\/actions\x27;\n\nexport default function counter(state = 0, action) {\n    switch (action.type){\n        case INCREMENT_COUNTER:\n            return state\x2b1;\n        case DECREMENT_COUNTER:\n            return state-1;\n        default:\n            return state;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {INCREMENT_COUNTER,DECREMENT_COUNTER} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/actions\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecounter\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estate = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, action\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (action.type){\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e INCREMENT_COUNTER:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state\x2b\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e DECREMENT_COUNTER:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里我们就是对增和减两个之前在action定义好的常量做了处理。\x3cbr\x3e对于一个比较大一点的应用来说，我们是需要将reducer拆分的，最后通过redux提供的combineReducers方法组合到一起。 如此项目上的：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const rootReducer = combineReducers({\n    counter\n});\nexport default rootReducer;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e rootReducer = combineReducers({\n    counter\n});\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e rootReducer;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e每个\x3ccode\x3ereducer\x3c\/code\x3e只负责管理全局\x3ccode\x3estate\x3c\/code\x3e中它负责的一部分。每个\x3ccode\x3ereducer\x3c\/code\x3e的\x3ccode\x3estate\x3c\/code\x3e参数都不同，分别对应它管理的那部分\x3ccode\x3estate\x3c\/code\x3e数据。\x3ccode\x3ecombineReducers()\x3c\/code\x3e所做的只是生成一个函数，这个函数来调用你的一系列\x3ccode\x3ereducer\x3c\/code\x3e，每个\x3ccode\x3ereducer\x3c\/code\x3e根据它们的\x3ccode\x3ekey\x3c\/code\x3e来筛选出\x3ccode\x3estate\x3c\/code\x3e中的一部分数据并处理， 然后这个生成的函数再将所有\x3ccode\x3ereducer\x3c\/code\x3e的结果合并成一个大的对象。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3estore\x3c\/h3\x3e\n\x3cp\x3estore是对之前说到一个联系和管理。具有如下职责\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e维持应用的\x3ccode\x3estate\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e提供\x3ccode\x3egetState()\x3c\/code\x3e方法获取 state\x3c\/li\x3e\n\x3cli\x3e提供\x3ccode\x3edispatch(action)\x3c\/code\x3e方法更新 state；\x3c\/li\x3e\n\x3cli\x3e通过\x3ccode\x3esubscribe(listener)\x3c\/code\x3e注册监听器;\x3c\/li\x3e\n\x3cli\x3e通过\x3ccode\x3esubscribe(listener)\x3c\/code\x3e返回的函数注销监听器。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e强调一下 Redux 应用只有一个单一的\x3ccode\x3estore\x3c\/code\x3e。当需要拆分数据处理逻辑时，你应该使用\x3ccode\x3ereducer\x3c\/code\x3e组合,而不是创建多个\x3ccode\x3estore\x3c\/code\x3e。\x3ccode\x3estore\x3c\/code\x3e的创建通过\x3ccode\x3eredux\x3c\/code\x3e的\x3ccode\x3ecreateStore\x3c\/code\x3e方法创建，这个方法还需要传入\x3ccode\x3ereducer\x3c\/code\x3e，很容易理解：毕竟我需要\x3ccode\x3edispatch\x3c\/code\x3e一个\x3ccode\x3eaction\x3c\/code\x3e来改变\x3ccode\x3estate\x3c\/code\x3e嘛。 应用一般会有一个初始化的\x3ccode\x3estate\x3c\/code\x3e，所以可选为第二个参数，这个参数通常是有服务端提供的，传说中的\x3ccode\x3eUniversal\x3c\/code\x3e渲染。 第三个参数一般是需要使用的中间件，通过applyMiddleware传入。\x3cbr\x3e说了这么多，\x3ccode\x3eaction\x3c\/code\x3e，\x3ccode\x3estore\x3c\/code\x3e，\x3ccode\x3eactionCreator\x3c\/code\x3e，\x3ccode\x3ereducer\x3c\/code\x3e关系就是这么如下的简单明了： \x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVLeW0?w=1134\x26amp;h=484\x22 src=\x22https:\/\/static.alili.tech\/img\/bVLeW0?w=1134\x26amp;h=484\x22 alt=\x22redux\x22 title=\x22redux\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e结合react-redux的使用\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3ereact-redux\x3c\/code\x3e，\x3ccode\x3eredux\x3c\/code\x3e和\x3ccode\x3ereact\x3c\/code\x3e的桥梁工具。\x3cbr\x3e\x3ccode\x3ereact-redux\x3c\/code\x3e将组建分成了两大类，UI组建\x3ccode\x3ecomponent\x3c\/code\x3e和容器组建\x3ccode\x3econtainer\x3c\/code\x3e。 简单的说，UI组建负责美的呈现，容器组件负责来帮你盛着，给你\x22力量\x22。\x3cbr\x3eUI 组件有以下几个特征：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e只负责 UI 的呈现，不带有任何业务逻辑\x3c\/li\x3e\n\x3cli\x3e没有状态（即不使用this.state这个变量）\x3c\/li\x3e\n\x3cli\x3e所有数据都由参数（this.props）提供\x3c\/li\x3e\n\x3cli\x3e不使用任何 Redux 的 API\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export default class Counter extends Component{\n    render(){\n        const { counter, increment, decrement, incrementIfOdd, incrementAsync } = this.props;\n        return(\n            \x3cp\x3e\n                Clicked:{counter} times\n                \x3cbutton onClick={increment}\x3e\x2b\x3c\/button\x3e\n                \x3cbutton onClick={decrement}\x3e-\x3c\/button\x3e\n                \x3cbutton onClick={incrementIfOdd}\x3eincrement if Odd\x3c\/button\x3e\n                \x3cbutton onClick={incrementAsync}\x3eincrement async\x3c\/button\x3e\n            \x3c\/p\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCounter\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n    render(){\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { counter, increment, decrement, incrementIfOdd, incrementAsync } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e(\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                Clicked:{counter} times\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{increment}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{decrement}\x3c\/span\x3e\x26gt;\x3c\/span\x3e-\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{incrementIfOdd}\x3c\/span\x3e\x26gt;\x3c\/span\x3eincrement if Odd\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{incrementAsync}\x3c\/span\x3e\x26gt;\x3c\/span\x3eincrement async\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e容器组件特性则恰恰相反：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e负责管理数据和业务逻辑，不负责 UI 的呈现\x3c\/li\x3e\n\x3cli\x3e带有内部状态\x3c\/li\x3e\n\x3cli\x3e使用 Redux 的 API\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class App extends Component{\n    render(){\n        const { counter, increment, decrement, incrementIfOdd, incrementAsync } = this.props;\n        return(\n            \x3cCounter\n                counter={counter}\n                increment={increment}\n                decrement={decrement}\n                incrementIfOdd={incrementIfOdd}\n                incrementAsync={incrementAsync}\/\x3e\n        )\n    }\n}\n\nexport default connect(\n    state=\x3e({ counter: state.counter }),\n    ActionCreators\n)(App);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e\x3c\/span\x3e{\n    render(){\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { counter, increment, decrement, incrementIfOdd, incrementAsync } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e(\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eCounter\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{counter}\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3eincrement\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{increment}\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3edecrement\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{decrement}\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3eincrementIfOdd\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{incrementIfOdd}\x3c\/span\x3e\n                \x3cspan class=\x22hljs-attr\x22\x3eincrementAsync\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{incrementAsync}\/\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        )\n    }\n}\n\nexport default connect(\n    state=\x26gt;({ counter: state.counter }),\n    ActionCreators\n)(App);\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3econnect\x3c\/code\x3e方法接受两个参数：\x3ccode\x3emapStateToProps\x3c\/code\x3e和\x3ccode\x3emapDispatchToProps\x3c\/code\x3e。它们定义了UI组件的业务逻辑。前者负责输入逻辑，即将\x3ccode\x3estate\x3c\/code\x3e映射到 UI 组件的参数（props）， 后者负责输出逻辑，即将用户对 UI 组件的操作映射成\x3ccode\x3eAction\x3c\/code\x3e。因为作为组件，我们只要能拿到值，能发出改变值得action就可以了，所以\x3ccode\x3emapStateToProps\x3c\/code\x3e和\x3ccode\x3emapDispatchToProps\x3c\/code\x3e正是满足这个需求的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eredux-thunk\x3c\/h2\x3e\n\x3cp\x3e一个比较流行的redux的action中间件，它可以让\x3ccode\x3eactionCreator\x3c\/code\x3e暂时不返回\x3ccode\x3eaction\x3c\/code\x3e对象，而是返回一个函数，函数传递两个参数\x3ccode\x3e(dispatch, getState)\x3c\/code\x3e，在函数体内进行业务逻辑的封装，比如异步操作，我们至少需要触发两个\x3ccode\x3eaction\x3c\/code\x3e，这时候我们可以通过\x3ccode\x3eredux-thunk\x3c\/code\x3e将这两个\x3ccode\x3eaction\x3c\/code\x3e封装在一起，如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const fetchDataAction = (querys) =\x3e (dispatch, getState) =\x3e {\n    const setLoading = createAction(\x27SET_LOADING\x27);\n    dispatch(setLoading(true)); \/\/ 设置加载中。。。\n    return fetch(`${url}?${querys}`).then(r =\x3e r.json()).then(res =\x3e {\n        dispatch(setLoading(false)); \/\/ 设置取消加载中。。。\n        dispatch(createAction(\x27DATA_DO_SOMETHIN\x27)(res))\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e fetchDataAction = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3equerys\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e (dispatch, getState) =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e setLoading = createAction(\x3cspan class=\x22hljs-string\x22\x3e\x27SET_LOADING\x27\x3c\/span\x3e);\n    dispatch(setLoading(\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置加载中。。。\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e fetch(\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${url}\x3c\/span\x3e?\x3cspan class=\x22hljs-subst\x22\x3e${querys}\x3c\/span\x3e`\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3er\x3c\/span\x3e =\x26gt;\x3c\/span\x3e r.json()).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        dispatch(setLoading(\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置取消加载中。。。\x3c\/span\x3e\n        dispatch(createAction(\x3cspan class=\x22hljs-string\x22\x3e\x27DATA_DO_SOMETHIN\x27\x3c\/span\x3e)(res))\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里我们的\x3ccode\x3ecreateCreator\x3c\/code\x3e返回的是一个\x3ccode\x3efetch\x3c\/code\x3e对象，我们下文会介绍，我们通过\x3ccode\x3edispatch\x3c\/code\x3e触发改\x3ccode\x3eaction\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dispatch(fetchDataAction(querys))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3edispatch(fetchDataAction(querys))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在请求数据之前，通过\x3ccode\x3eredux-thunk\x3c\/code\x3e我们可以先触发加载中的\x3ccode\x3eaction\x3c\/code\x3e，等请求数据结束之后我们可以在次触发\x3ccode\x3eaction\x3c\/code\x3e，使得加载中状态取消，并处理请求结果。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3eredux-promise\x3c\/h2\x3e\n\x3cp\x3e既然说到了异步\x3ccode\x3eaction\x3c\/code\x3e，我们可以使用\x3ccode\x3eredux-promise\x3c\/code\x3e，它可以让\x3ccode\x3eactionCreator\x3c\/code\x3e返回一个\x3ccode\x3ePromise\x3c\/code\x3e对象。\x3cbr\x3e第一种做法，我们可以参考\x3ccode\x3eredux-thunk\x3c\/code\x3e的部分。\x3cbr\x3e第二种做法，\x3ccode\x3eaction\x3c\/code\x3e对象的\x3ccode\x3epayload\x3c\/code\x3e属性（相当于我们的diy参数，action里面携带的其他参数）是一个\x3ccode\x3ePromise\x3c\/code\x3e对象。这需要从\x3ccode\x3eredux-actions\x3c\/code\x3e模块引入\x3ccode\x3ecreateAction\x3c\/code\x3e方法，并且写法也要变成下面这样。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { createAction } from \x27redux-actions\x27;\nclass AsyncApp extends Component {\n  componentDidMount() {\n    const { dispatch, selectedPost } = this.props\n    \/\/ 发出异步 Action\n    dispatch(createAction(\n      \x27FETCH_DATA\x27, \n      fetch(`url`).then(res =\x3e res.json())\n    ));\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { createAction } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-actions\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAsyncApp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n  componentDidMount() {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { dispatch, selectedPost } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发出异步 Action\x3c\/span\x3e\n    dispatch(createAction(\n      \x3cspan class=\x22hljs-string\x22\x3e\x27FETCH_DATA\x27\x3c\/span\x3e, \n      fetch(\x3cspan class=\x22hljs-string\x22\x3e`url`\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e =\x26gt;\x3c\/span\x3e res.json())\n    ));\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其实\x3ccode\x3eredux-actions\x3c\/code\x3e的\x3ccode\x3ecreateAction\x3c\/code\x3e的源码是拿到fetch对象的payload结果之后又触发了一次\x3ccode\x3eaction\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eredux-actions\x3c\/h2\x3e\n\x3cp\x3e当我们的在开发大型应用的时候，对于大量的\x3ccode\x3eaction\x3c\/code\x3e，我们的\x3ccode\x3ereducer\x3c\/code\x3e需要些大量的swich来对\x3ccode\x3eaction.type\x3c\/code\x3e进行判断。\x3ccode\x3eredux-actions\x3c\/code\x3e可以简化这一烦琐的过程，它可以是\x3ccode\x3eactionCreator\x3c\/code\x3e，也可以用来生成\x3ccode\x3ereducer\x3c\/code\x3e，其作用都是用来简化\x3ccode\x3eaction\x3c\/code\x3e、\x3ccode\x3ereducer\x3c\/code\x3e。\x3cbr\x3e主要函数有\x3ccode\x3ecreateAction\x3c\/code\x3e、\x3ccode\x3ecreateActions\x3c\/code\x3e、\x3ccode\x3ehandleAction\x3c\/code\x3e、\x3ccode\x3ehandleActions\x3c\/code\x3e、\x3ccode\x3ecombineActions\x3c\/code\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3ecreateAction\x3c\/h3\x3e\n\x3cp\x3e创建\x3ccode\x3eaction\x3c\/code\x3e，参数如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { createAction } from \x27redux-actions\x27;\ncreateAction(\n  type,  \/\/ action类型\n  payloadCreator = Identity, \/\/ payload数据 具体参考Flux教程\n  ?metaCreator \/\/ 具体我也没深究是啥\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { createAction } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-actions\x27\x3c\/span\x3e;\ncreateAction(\n  type,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ action类型\x3c\/span\x3e\n  payloadCreator = Identity, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ payload数据 具体参考Flux教程\x3c\/span\x3e\n  ?metaCreator \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 具体我也没深究是啥\x3c\/span\x3e\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e例子如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const increment = createAction(\x27INCREMENT\x27)\nexport const decrement = createAction(\x27DECREMENT\x27)\n\nincrement() \/\/ { type: \x27INCREMENT\x27 }\ndecrement() \/\/ { type: \x27DECREMENT\x27 }\nincrement(10) \/\/ { type: \x27INCREMENT\x27, payload: 10 }\ndecrement([1, 42]) \/\/ { type: \x27DECREMENT\x27, payload: [1, 42] }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e increment = createAction(\x3cspan class=\x22hljs-string\x22\x3e\x27INCREMENT\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e decrement = createAction(\x3cspan class=\x22hljs-string\x22\x3e\x27DECREMENT\x27\x3c\/span\x3e)\n\nincrement() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { type: \x27INCREMENT\x27 }\x3c\/span\x3e\ndecrement() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { type: \x27DECREMENT\x27 }\x3c\/span\x3e\nincrement(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { type: \x27INCREMENT\x27, payload: 10 }\x3c\/span\x3e\ndecrement([\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e42\x3c\/span\x3e]) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ { type: \x27DECREMENT\x27, payload: [1, 42] }\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3ecreateActions\x3c\/h3\x3e\n\x3cp\x3e创建多个\x3ccode\x3eaction\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { createActions } from \x27redux-actions\x27;\ncreateActions(\n  actionMap,\n  ?...identityActions,\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { createActions } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-actions\x27\x3c\/span\x3e;\ncreateActions(\n  actionMap,\n  ?...identityActions,\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第一个参数\x3ccode\x3eactionMap\x3c\/code\x3e为一个对象，以\x3ccode\x3eaction type\x3c\/code\x3e为键值，值value有三种形式，\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e函数，该函数参数传入的是\x3ccode\x3eaction\x3c\/code\x3e创建的时候传入的参数，返回结果会作为到生成的\x3ccode\x3eaction\x3c\/code\x3e的\x3ccode\x3epayload\x3c\/code\x3e的value。\x3c\/li\x3e\n\x3cli\x3e数组，长度为二，第一个值为一个函数，前面的一样，返回\x3ccode\x3epayload\x3c\/code\x3e的值，第二个值也为一个函数，返回\x3ccode\x3emeta\x3c\/code\x3e的值，不知道有什么用。\x3c\/li\x3e\n\x3cli\x3e一个 \x3ccode\x3eactionMap\x3c\/code\x3e对象，递归作用吧。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e例子如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22createActions({\n  ADD_TODO: todo =\x3e ({ todo })\n  REMOVE_TODO: [\n    todo =\x3e ({ todo }), \/\/ payloa\n    (todo, warn) =\x3e ({ todo, warn }) \/\/ meta\n  ]\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ecreateActions({\n  \x3cspan class=\x22hljs-attr\x22\x3eADD_TODO\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3etodo\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ todo })\n  REMOVE_TODO: [\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3etodo\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ todo }), \x3cspan class=\x22hljs-comment\x22\x3e\/\/ payloa\x3c\/span\x3e\n    (todo, warn) =\x26gt; ({ todo, warn }) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ meta\x3c\/span\x3e\n  ]\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const actionCreators = createActions({\n  APP: {\n    COUNTER: {\n      INCREMENT: [\n        amount =\x3e ({ amount }),\n        amount =\x3e ({ key: \x27value\x27, amount })\n      ],\n      DECREMENT: amount =\x3e ({ amount: -amount }),\n      SET: undefined \/\/ given undefined, the identity function will be used\n    },\n    NOTIFY: [\n      (username, message) =\x3e ({ message: `${username}: ${message}` }),\n      (username, message) =\x3e ({ username, message })\n    ]\n  }\n});\n\nexpect(actionCreators.app.counter.increment(1)).to.deep.equal({\n  type: \x27APP\/COUNTER\/INCREMENT\x27,\n  payload: { amount: 1 },\n  meta: { key: \x27value\x27, amount: 1 }\n});\nexpect(actionCreators.app.counter.decrement(1)).to.deep.equal({\n  type: \x27APP\/COUNTER\/DECREMENT\x27,\n  payload: { amount: -1 }\n});\nexpect(actionCreators.app.counter.set(100)).to.deep.equal({\n  type: \x27APP\/COUNTER\/SET\x27,\n  payload: 100\n});\nexpect(actionCreators.app.notify(\x27yangmillstheory\x27, \x27Hello World\x27)).to.deep.equal({\n  type: \x27APP\/NOTIFY\x27,\n  payload: { message: \x27yangmillstheory: Hello World\x27 },\n  meta: { username: \x27yangmillstheory\x27, message: \x27Hello World\x27 }\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e actionCreators = createActions({\n  \x3cspan class=\x22hljs-attr\x22\x3eAPP\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3eCOUNTER\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-attr\x22\x3eINCREMENT\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eamount\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ amount }),\n        amount =\x26gt; ({ \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27value\x27\x3c\/span\x3e, amount })\n      ],\n      \x3cspan class=\x22hljs-attr\x22\x3eDECREMENT\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eamount\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: -amount }),\n      \x3cspan class=\x22hljs-attr\x22\x3eSET\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ given undefined, the identity function will be used\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eNOTIFY\x3c\/span\x3e: [\n      \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eusername, message\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e ({ \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${username}\x3c\/span\x3e: \x3cspan class=\x22hljs-subst\x22\x3e${message}\x3c\/span\x3e`\x3c\/span\x3e }),\n      (username, message) =\x26gt; ({ username, message })\n    ]\n  }\n});\n\nexpect(actionCreators.app.counter.increment(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27APP\/COUNTER\/INCREMENT\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e },\n  \x3cspan class=\x22hljs-attr\x22\x3emeta\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27value\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n});\nexpect(actionCreators.app.counter.decrement(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27APP\/COUNTER\/DECREMENT\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e }\n});\nexpect(actionCreators.app.counter.set(\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27APP\/COUNTER\/SET\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e\n});\nexpect(actionCreators.app.notify(\x3cspan class=\x22hljs-string\x22\x3e\x27yangmillstheory\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Hello World\x27\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27APP\/NOTIFY\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27yangmillstheory: Hello World\x27\x3c\/span\x3e },\n  \x3cspan class=\x22hljs-attr\x22\x3emeta\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3eusername\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27yangmillstheory\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3emessage\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Hello World\x27\x3c\/span\x3e }\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e第二个参数\x3ccode\x3eidentityActions\x3c\/code\x3e，可选参数，也是一个\x3ccode\x3eaction type\x3c\/code\x3e吧，官方例子没看懂，如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { actionOne, actionTwo, actionThree } = createActions({\n  \/\/ function form; payload creator defined inline\n  ACTION_ONE: (key, value) =\x3e ({ [key]: value }),\n\n  \/\/ array form\n  ACTION_TWO: [\n    (first) =\x3e [first],             \/\/ payload\n    (first, second) =\x3e ({ second }) \/\/ meta\n  ],\n\n  \/\/ trailing action type string form; payload creator is the identity\n}, \x27ACTION_THREE\x27);\n\nexpect(actionOne(\x27key\x27, 1)).to.deep.equal({\n  type: \x27ACTION_ONE\x27,\n  payload: { key: 1 }\n});\n\nexpect(actionTwo(\x27first\x27, \x27second\x27)).to.deep.equal({\n  type: \x27ACTION_TWO\x27,\n  payload: [\x27first\x27],\n  meta: { second: \x27second\x27 }\n});\n\nexpect(actionThree(3)).to.deep.equal({\n  type: \x27ACTION_THREE\x27,\n  payload: 3,\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { actionOne, actionTwo, actionThree } = createActions({\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ function form; payload creator defined inline\x3c\/span\x3e\n  ACTION_ONE: \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ekey, value\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e ({ [key]: value }),\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ array form\x3c\/span\x3e\n  ACTION_TWO: [\n    \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3efirst\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e [first],             \x3cspan class=\x22hljs-comment\x22\x3e\/\/ payload\x3c\/span\x3e\n    (first, second) =\x26gt; ({ second }) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ meta\x3c\/span\x3e\n  ],\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ trailing action type string form; payload creator is the identity\x3c\/span\x3e\n}, \x3cspan class=\x22hljs-string\x22\x3e\x27ACTION_THREE\x27\x3c\/span\x3e);\n\nexpect(actionOne(\x3cspan class=\x22hljs-string\x22\x3e\x27key\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ACTION_ONE\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3ekey\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n});\n\nexpect(actionTwo(\x3cspan class=\x22hljs-string\x22\x3e\x27first\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27second\x27\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ACTION_TWO\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27first\x27\x3c\/span\x3e],\n  \x3cspan class=\x22hljs-attr\x22\x3emeta\x3c\/span\x3e: { \x3cspan class=\x22hljs-attr\x22\x3esecond\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27second\x27\x3c\/span\x3e }\n});\n\nexpect(actionThree(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e)).to.deep.equal({\n  \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27ACTION_THREE\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3ehandleAction\x3c\/h3\x3e\n\x3cp\x3e字面意思理解，处理\x3ccode\x3eaction\x3c\/code\x3e，那就是一个\x3ccode\x3ereducer\x3c\/code\x3e，包裹返回一个\x3ccode\x3ereducer\x3c\/code\x3e，处理一种类型的\x3ccode\x3eaction type\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { handleAction } from \x27redux-actions\x27;\n\nhandleAction(\n  type,  \/\/ action类型\n  reducer | reducerMap = Identity\n  defaultState \/\/ 默认state\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { handleAction } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-actions\x27\x3c\/span\x3e;\n\nhandleAction(\n  type,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ action类型\x3c\/span\x3e\n  reducer | reducerMap = Identity\n  defaultState \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认state\x3c\/span\x3e\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当第二个参数为一个reducer处理函数时，形式如下，处理传入的\x3ccode\x3estate\x3c\/code\x3e并返回新的\x3ccode\x3estate\x3c\/code\x3e：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleAction(\x27APP\/COUNTER\/INCREMENT\x27, (state, action) =\x3e ({\n  counter: state.counter \x2b action.payload.amount,\n}), defaultState);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ehandleAction(\x3cspan class=\x22hljs-string\x22\x3e\x27APP\/COUNTER\/INCREMENT\x27\x3c\/span\x3e, (state, action) =\x26gt; ({\n  \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: state.counter \x2b action.payload.amount,\n}), defaultState);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当第二个参数为reducerMap时，也为处理\x3ccode\x3estate\x3c\/code\x3e并返回新的\x3ccode\x3estate\x3c\/code\x3e，只是必须传入key值为\x3ccode\x3enext\x3c\/code\x3e和\x3ccode\x3ethrow\x3c\/code\x3e的两个函数，分别用来处理state和异常如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22handleAction(\x27FETCH_DATA\x27, {\n  next(state, action) {...},\n  throw(state, action) {...},\n}, defaultState);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ehandleAction(\x3cspan class=\x22hljs-string\x22\x3e\x27FETCH_DATA\x27\x3c\/span\x3e, {\n  next(state, action) {...},\n  \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e(state, action) {...},\n}, defaultState);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e官方推荐使用\x3ccode\x3ereducerMap\x3c\/code\x3e形式，因为与ES6的\x3ccode\x3egenerator\x3c\/code\x3e类似。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3ehandleActions\x3c\/h3\x3e\n\x3cp\x3e与\x3ccode\x3ehandleAction\x3c\/code\x3e不同，\x3ccode\x3ehandleActions\x3c\/code\x3e可以处理多个\x3ccode\x3eaction\x3c\/code\x3e，也返回一个\x3ccode\x3ereducer\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { handleActions } from \x27redux-actions\x27;\n\nhandleActions(\n  reducerMap,\n  defaultState\n)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { handleActions } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-actions\x27\x3c\/span\x3e;\n\nhandleActions(\n  reducerMap,\n  defaultState\n)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3ereducerMap\x3c\/code\x3e以\x3ccode\x3eaction type\x3c\/code\x3e为key，value与\x3ccode\x3ehandleAction\x3c\/code\x3e的第二个参数一致，传入一个\x3ccode\x3ereducer\x3c\/code\x3e处理函数或者一个只有\x3ccode\x3enext\x3c\/code\x3e和\x3ccode\x3ethrow\x3c\/code\x3e两个键值的对象。\x3cbr\x3e另外，键值key也可以使用\x3ccode\x3ecreateAction\x3c\/code\x3e创建：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import { createActions, handleActions } from \x27redux-actions\x27;\n\nconst { increment, decrement } = createActions({\n  \x27INCREMENT\x27: amount =\x3e ({ amount: 1 }),\n  \x27DECREMENT\x27: amount =\x3e ({ amount: -1 })\n});\n\nconst reducer = handleActions({\n  [increment](state, { payload: { amount } }) {\n    return { counter: state.counter \x2b amount }\n  },\n  [decrement](state, { payload: { amount } }) {\n    return { counter: state.counter \x2b amount }\n  }\n}, defaultState);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e { createActions, handleActions } \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-actions\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { increment, decrement } = createActions({\n  \x3cspan class=\x22hljs-string\x22\x3e\x27INCREMENT\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eamount\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }),\n  \x3cspan class=\x22hljs-string\x22\x3e\x27DECREMENT\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eamount\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e })\n});\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e reducer = handleActions({\n  [increment](state, { \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { amount } }) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: state.counter \x2b amount }\n  },\n  [decrement](state, { \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { amount } }) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: state.counter \x2b amount }\n  }\n}, defaultState);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3ecombineActions\x3c\/h3\x3e\n\x3cp\x3e将多个\x3ccode\x3eaction\x3c\/code\x3e或者\x3ccode\x3eactionCreator\x3c\/code\x3e结合起来，看起来很少用，具体例子如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const { increment, decrement } = createActions({\n  INCREMENT: amount =\x3e ({ amount }),\n  DECREMENT: amount =\x3e ({ amount: -amount })\n});\n\nconst reducer = handleActions({\n  [combineActions(increment, decrement)](state, { payload: { amount } }) {\n    return { ...state, counter: state.counter \x2b amount };\n  }\n}, { counter: 10 });\n\nexpect(reducer({ counter: 5 }, increment(5))).to.deep.equal({ counter: 10 });\nexpect(reducer({ counter: 5 }, decrement(5))).to.deep.equal({ counter: 0 });\nexpect(reducer({ counter: 5 }, { type: \x27NOT_TYPE\x27, payload: 1000 })).to.equal({ counter: 5 });\nexpect(reducer(undefined, increment(5))).to.deep.equal({ counter: 15 });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { increment, decrement } = createActions({\n  \x3cspan class=\x22hljs-attr\x22\x3eINCREMENT\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eamount\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ amount }),\n  \x3cspan class=\x22hljs-attr\x22\x3eDECREMENT\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eamount\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({ \x3cspan class=\x22hljs-attr\x22\x3eamount\x3c\/span\x3e: -amount })\n});\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e reducer = handleActions({\n  [combineActions(increment, decrement)](state, { \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: { amount } }) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e { ...state, \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: state.counter \x2b amount };\n  }\n}, { \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e });\n\nexpect(reducer({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e }, increment(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e))).to.deep.equal({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e });\nexpect(reducer({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e }, decrement(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e))).to.deep.equal({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e });\nexpect(reducer({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e }, { \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27NOT_TYPE\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3epayload\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e })).to.equal({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e });\nexpect(reducer(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, increment(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e))).to.deep.equal({ \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eredux-actions\x3c\/code\x3e说到这里，大概是这样，有什么不了解看看\x3ca href=\x22https:\/\/redux-actions.js.org\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e吧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3ereselect\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eReselect\x3c\/code\x3e用来记忆\x3ccode\x3eselectors\x3c\/code\x3e的库，我们定义的\x3ccode\x3eselectors\x3c\/code\x3e是作为函数获取\x3ccode\x3estate\x3c\/code\x3e的某一部分。使用记忆能力，我们可以组织不必要的衍生数据的重渲染和计算过程，由此加速了我们的应用。具体细节大概是在\x3ccode\x3emapStateToProps\x3c\/code\x3e的时候，讲\x3ccode\x3estate\x3c\/code\x3e的某一部分交给\x3ccode\x3ereselect\x3c\/code\x3e的\x3ccode\x3eselectors\x3c\/code\x3e来管理，使用\x3ccode\x3eselectors\x3c\/code\x3e的记忆功能让组件的\x3ccode\x3eprops\x3c\/code\x3e尽量不变化，引起不必要的渲染。\x3cbr\x3e下面我们以一个todolist为例子。\x3cbr\x3e当我们没有\x3ccode\x3ereselect\x3c\/code\x3e的时候，我们是直接通过\x3ccode\x3emapStateToProps\x3c\/code\x3e把数据传入组件内，如下。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const getVisibleTodos = (todos, filter) =\x3e {\n  switch (filter) {\n    case \x27SHOW_ALL\x27:\n      return todos\n    case \x27SHOW_COMPLETED\x27:\n      return todos.filter(t =\x3e t.completed)\n    case \x27SHOW_ACTIVE\x27:\n      return todos.filter(t =\x3e !t.completed)\n  }\n}\n\nconst mapStateToProps = (state, props) =\x3e {\n  return {\n    todolist: getVisibleTodos(state, props)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getVisibleTodos = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3etodos, filter\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (filter) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27SHOW_ALL\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e todos\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27SHOW_COMPLETED\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e todos.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3et\x3c\/span\x3e =\x26gt;\x3c\/span\x3e t.completed)\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27SHOW_ACTIVE\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e todos.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3et\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !t.completed)\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapStateToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estate, props\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3etodolist\x3c\/span\x3e: getVisibleTodos(state, props)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个代码有一个潜在的问题。每当\x3ccode\x3estate tree\x3c\/code\x3e改变时，\x3ccode\x3eselector\x3c\/code\x3e都要重新运行。当\x3ccode\x3estate tree\x3c\/code\x3e特别大，或者\x3ccode\x3eselector\x3c\/code\x3e计算特别耗时，那么这将带来严重的运行效率问题。为了解决这个问题，reselect为\x3ccode\x3eselector\x3c\/code\x3e设置了缓存，只有当\x3ccode\x3eselector\x3c\/code\x3e的输入改变时，程序才重新调用selector函数。\x3cbr\x3e这时我们把\x3ccode\x3estate\x3c\/code\x3e转化为\x3ccode\x3eprops\x3c\/code\x3e的数据交给\x3ccode\x3ereselect来\x3c\/code\x3e处理，我们重写\x3ccode\x3emapStateToProps\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const getVisibilityFilter = state =\x3e state.todo.showStatus\n\nconst getTodos = state =\x3e state.todo.todolist\n\nconst getVisibleTodos = createSelector([getVisibilityFilter, getTodos], (visibilityFilter, todos) =\x3e {\n  switch (visibilityFilter) {\n    case \x27SHOW_COMPLETED\x27:\n      return todos.filter(todo =\x3e todo.completed)\n    case \x27SHOW_ACTIVE\x27:\n      return todos.filter(todo =\x3e !todo.completed)\n    default:\n      return todos\n  }\n})\nconst mapStateToProps = (state, props) =\x3e {\n  const todolist = getVisibleTodos(state, props);\n  return {\n    todolist\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getVisibilityFilter = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e =\x26gt;\x3c\/span\x3e state.todo.showStatus\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getTodos = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e =\x26gt;\x3c\/span\x3e state.todo.todolist\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getVisibleTodos = createSelector([getVisibilityFilter, getTodos], (visibilityFilter, todos) =\x26gt; {\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (visibilityFilter) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27SHOW_COMPLETED\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e todos.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3etodo\x3c\/span\x3e =\x26gt;\x3c\/span\x3e todo.completed)\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27SHOW_ACTIVE\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e todos.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3etodo\x3c\/span\x3e =\x26gt;\x3c\/span\x3e !todo.completed)\n    \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e todos\n  }\n})\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapStateToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estate, props\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e todolist = getVisibleTodos(state, props);\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    todolist\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们使用\x3ccode\x3ecreateSelector\x3c\/code\x3e包裹起来，将组件内需要的两个\x3ccode\x3eprops\x3c\/code\x3e包裹起来，然后在返回一个获取数据的函数\x3ccode\x3egetVisibleTodos\x3c\/code\x3e，这样返回的\x3ccode\x3etodolist\x3c\/code\x3e就不会受到一些不必要的state的变化而变化引起冲渲染。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e最后\x3c\/h2\x3e\n\x3cp\x3e总结了那么多的用法，其实也是\x3ccode\x3eredux\x3c\/code\x3e的基本用法，然后自己写了半天的\x3ccode\x3etodolist\x3c\/code\x3e，把上面说到的技术都用了，这是 \x3ca href=\x22https:\/\/github.com\/yacan8\/react-redux-todo\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub地址\x3c\/a\x3e，上面的内容如有错误，勿喷，毕竟入门级别。。。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>redux从零开始入门笔记</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013026224">https://segmentfault.com/a/1190000013026224</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/o625gq1qz3/" target="_blank">https://alili.tech/archive/o625gq1qz3/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>