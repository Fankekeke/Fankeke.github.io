<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="结合kmp算法的匹配动画浅析其基本思想"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>结合kmp算法的匹配动画浅析其基本思想 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/oen4nntt3f/",
				"appid": "1613049289050283", 
				"title": "结合kmp算法的匹配动画浅析其基本思想 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-12T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/n6h2bg4jbu/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/4kitf4v5aqa/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&text=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&text=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&title=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&is_video=false&description=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&title=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&title=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&title=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2foen4nntt3f%2f&title=%e7%bb%93%e5%90%88kmp%e7%ae%97%e6%b3%95%e7%9a%84%e5%8c%b9%e9%85%8d%e5%8a%a8%e7%94%bb%e6%b5%85%e6%9e%90%e5%85%b6%e5%9f%ba%e6%9c%ac%e6%80%9d%e6%83%b3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">结合kmp算法的匹配动画浅析其基本思想</h1><div class="meta"><div class="postdate"><time datetime="2018-12-12" itemprop="datePublished">2018-12-12</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e写在最前\x3c\/h2\x3e\n\x3cp\x3e本次分享一下通过实现kmp算法的动画效果来试图展示kmp的基本思路。\x3c\/p\x3e\n\x3cp\x3e欢迎关注\x3ca href=\x22https:\/\/github.com\/Aaaaaaaty\/Blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e我的博客\x3c\/a\x3e，不定期更新中——\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e前置概念\x3c\/h3\x3e\n\x3ch4\x3e字符串匹配\x3c\/h4\x3e\n\x3cblockquote\x3e字符串匹配是计算机科学中最古老、研究最广泛的问题之一。一个字符串是一个定义在有限字母表∑上的字符序列。例如，ATCTAGAGA是字母表∑ = {A,C,G,T}上的一个字符串。字符串匹配问题就是在一个大的字符串T中搜索某个字符串P的所有出现位置。\x3c\/blockquote\x3e\n\x3ch4\x3ekmp算法\x3c\/h4\x3e\n\x3cblockquote\x3eKMP算法是一种改进的字符串匹配算法，由D.E.Knuth，J.H.Morris和V.R.Pratt同时发现，因此人们称它为克努特——莫里斯——普拉特操作（简称KMP算法）。KMP算法的关键是利用匹配失败后的信息，尽量减少模式串与主串的匹配次数以达到快速匹配的目的。具体实现就是实现一个next()函数，函数本身包含了模式串的局部匹配信息。时间复杂度O(m\x2bn)。\x3c\/blockquote\x3e\n\x3cp\x3e在js中字符串匹配我们通常使用的是原生api，indexOf；其本身是c\x2b\x2b实现的不在这次的讨论范围中。本次主要通过动画演示的方式展现朴素算法与kmp算法对比过程的异同从而试图理解kmp的基本思路。\x3c\/p\x3e\n\x3cp\x3ePS:在之后的叙述中BBC ABCDAB ABCDABCDABDE为\x3cstrong\x3e主串\x3c\/strong\x3e；ABCDABD为\x3cstrong\x3e模式串\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e效果预览\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013386860?w=848\x26amp;h=308\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013386860?w=848\x26amp;h=308\x22 alt=\x222018-02-23 18_56_50\x22 title=\x222018-02-23 18_56_50\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e上方为朴素算法即按位比较，下方为kmp算法实现的字符串比较方式。kmp可以通过较少的比较次数完成匹配。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e基本思路\x3c\/h3\x3e\n\x3cp\x3e从上图的效果预览中可以看出使用朴素算法依次比较模式串需要移位13次，而使用kmp需要8次，故可以说kmp的思路是通过避免无效的移位，来快速移动到指定的地点。接下来我们关注一下kmp是如何“跳着”移动的：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013386861?w=908\x26amp;h=363\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013386861?w=908\x26amp;h=363\x22 alt=\x22wechatimg167\x22 title=\x22wechatimg167\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e与朴素算法一致，在之前对于主串“BBC ”的匹配中模式串ABCBABD的第一个字符均与之不同故向后移位到现在上图所示的位置。主串通过依次与模式串中的字符比较我们可以看出，模式串的前6个字符与主串相同即\x3cstrong\x3eABCDAB\x3c\/strong\x3e；而这也就是kmp算法的关键。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e根据已知信息计算下一次移位位置\x3c\/h3\x3e\n\x3cp\x3e我们先从下图来看朴素算法与kmp中下一次移位的过程：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013386862\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013386862\x22 alt=\x22wechatimg165\x22 title=\x22wechatimg165\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e朴素算法雨打不动得向后移了一位。\x3cstrong\x3e而kmp跳过了主串的BCD三个字符\x3c\/strong\x3e。从而进行了一次避免无意义的移位比较。那么它是怎么知道我这次要跳过三个而不是两个或者不跳呢？关键在于上一次已经匹配的部分\x3cstrong\x3eABCDAB\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e从已匹配部分发掘信息\x3c\/h3\x3e\n\x3cp\x3e我们已知此时主串与模式串均有此相同的部分\x3cstrong\x3eABCDAB\x3c\/strong\x3e。那么如何从这共同部分中获得有用的信息？或者换个角度想一下：\x3cstrong\x3e我们能跳过部分位置的依据是什么？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e第一次匹配失败时的情形如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    BBC ABCDAB ABCDABCDABDE\n        ABCDABD\n              D != 空格 故失败\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs armasm\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3eBBC \x3c\/span\x3eABCDAB ABCDABCDABDE\n        ABCDABD\n              D != 空格 故失败\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了从已匹配部分提取信息。现在将主串做一下变形：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    ABCDABXXXXXX...  X可能是任何字符\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e    ABCDABXXXXXX...  X可能是任何字符\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们现在只知道已匹配的部分，因为匹配已经失败了不会再去读取后面的字符，故用X代替。\x3c\/p\x3e\n\x3cp\x3e那么我们能跳过多少位置的问题就可以由下面的解得知答案：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \/\/ABCDAB向后移动几位可能能匹配上？\n    ABCDABXXXXXX...\n    ABCDABD\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ABCDAB向后移动几位可能能匹配上？\x3c\/span\x3e\n    ABCDABXXXXXX...\n    ABCDABD\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e答案自然是如下移动：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    ABCDABXXXXXX...\n        ABCDABD\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e    ABCDABXXXXXX...\n        ABCDABD\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为我们不知道X代表什么，只能从已匹配的串来分析。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e故我们能跳过部分位置的依据是什么？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e答：已匹配的模式串的前n位能否等于匹配部分的主串的后n位。并且n尽可能大。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e举个例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/第一次匹配失败时匹配到ABCDDDABC为共同部分\n    XXXABCDDDABCFXXX\n       ABCDDDABCE\n\/\/寻找模式串的最大前几位与主串匹配到的部分后几位相同，\n\/\/可以发现最多是ABC部分相同，故可以略过DDD的匹配因为肯定对不上\n    XXXABCDDDABCFXXX\n             ABCDDDABCE     \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs 1c\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/第一次匹配失败时匹配到ABCDDDABC为共同部分\x3c\/span\x3e\n    XXXABCDDDABCFXXX\n       ABCDDDABCE\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/寻找模式串的最大前几位与主串匹配到的部分后几位相同，\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/可以发现最多是ABC部分相同，故可以略过DDD的匹配因为肯定对不上\x3c\/span\x3e\n    XXXABCDDDABCFXXX\n             ABCDDDABCE     \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在kmp的基本思路已经很明显了，其就是通过经失败后得知的已匹配字段，来寻找主串尾部与模式串头部的相同最大匹配，如果有则可以跨过中间的部分，因为所谓“中间”的部分，也是有可能进入主串尾与模式串头的，没进去的原因即是相对位置字符不同，故最终在模式串移位时可以跳过。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e部分匹配值\x3c\/h3\x3e\n\x3cp\x3e上面是用通俗的话来述说我们如何根据已匹配的部分来决定下一次模式串移位的位置，大家应该已经大体知道kmp的思路了。现在来引出官方的说法。\x3c\/p\x3e\n\x3cp\x3e之前叙述的在已匹配部分中查找主串头部与模式串尾部相同的部分的结果我们可以用部分匹配值的说法来形容：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e其中定义\x22前缀\x22和\x22后缀\x22。\x22前缀\x22指除了最后一个字符以外，一个字符串的全部头部组合；\x22后缀\x22指除了第一个字符以外，一个字符串的全部尾部组合。\x3c\/li\x3e\n\x3cli\x3e\x22部分匹配值\x22就是\x22前缀\x22和\x22后缀\x22的最长的共有元素的长度。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e例如ABCDAB\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e前缀分别为A、AB、ABC、ABCD、ABCDA\x3c\/li\x3e\n\x3cli\x3e后缀分别为B、AB、DAB、CDAB、BCDAB\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e很容易发现部分匹配值为2即AB的长度。从而结合之前的思路可以知道将模式串直接移位到主串AB对应的地方即可，中间的部分一定是不匹配的。移动几位呢？\x3c\/p\x3e\n\x3cp\x3e答：\x3cstrong\x3e匹配串长度 - 部分匹配值；本次例子中为6-2=4，模式串向右移动四位\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e代码实现\x3c\/h3\x3e\n\x3ch4\x3e计算部分匹配表\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function pmtArr(target) {\n    var pmtArr = []\n    target = target.split(\x27\x27)\n    for(var j = 0; j \x3c target.length; j\x2b\x2b) {\n    \/\/获取模式串不同长度下的部分匹配值\n        var pmt = target\n        var pmtNum = 0\n        for (var k = 0; k \x3c j; k\x2b\x2b) {\n            var head = pmt.slice(0, k \x2b 1) \/\/前缀\n            var foot = pmt.slice(j - k, j \x2b 1) \/\/后缀\n            if (head.join(\x27\x27) === foot.join(\x27\x27)) {\n                var num = head.length\n                if (num \x3e pmtNum) pmtNum = num\n            }\n        }\n        pmtArr.push(j \x2b 1 - pmtNum) \n    }\n    return pmtArr\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epmtArr\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(target)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pmtArr = []\n    target = target.split(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; target.length; j\x2b\x2b) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取模式串不同长度下的部分匹配值\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pmt = target\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pmtNum = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e k = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; k \x26lt; j; k\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e head = pmt.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, k \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/前缀\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foot = pmt.slice(j - k, j \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/后缀\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (head.join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e) === foot.join(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e)) {\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e num = head.length\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (num \x26gt; pmtNum) pmtNum = num\n            }\n        }\n        pmtArr.push(j \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e - pmtNum) \n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e pmtArr\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3ekmp算法\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function mapKMPStr(base, target) {\n    var isMatch = []\n    var pmt = pmtArr(target)\n    console.time(\x27kmp\x27)\n    var times = 0\n    for(var i = 0; i \x3c base.length; i\x2b\x2b) {\n        times\x2b\x2b\n        var tempIndex = 0\n        for(var j = 0; j \x3c target.length; j\x2b\x2b) {\n            if(i \x2b target.length \x3c= base.length) {\n                if (target.charAt(j) === base.charAt(i \x2b j)) {\n                    isMatch.push(target.charAt(j))\n                } else {\n                    if(!j) break \/\/第一个就不匹配直接跳到下一个\n                    var skip = pmt[j - 1]\n                    tempIndex = i \x2b skip - 1\n                    break \n                }\n            }\n        }\n        var data = {\n            index: i,\n            matchArr: isMatch\n        }\n        callerKmp.push(data)\n        if(tempIndex) i = tempIndex\n        if(isMatch.length === target.length) {\n            console.timeEnd(\x27kmp\x27)\n            console.log(\x27移位次数:\x27, times)\n            return i\n        }\n        isMatch = []\n    }\n    console.timeEnd(\x27kmp\x27)\n    return -1\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emapKMPStr\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ebase, target\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isMatch = []\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pmt = pmtArr(target)\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.time(\x3cspan class=\x22hljs-string\x22\x3e\x27kmp\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e times = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; base.length; i\x2b\x2b) {\n        times\x2b\x2b\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tempIndex = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; target.length; j\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(i \x2b target.length \x26lt;= base.length) {\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (target.charAt(j) === base.charAt(i \x2b j)) {\n                    isMatch.push(target.charAt(j))\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!j) \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/第一个就不匹配直接跳到下一个\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e skip = pmt[j - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n                    tempIndex = i \x2b skip - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e \n                }\n            }\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e data = {\n            \x3cspan class=\x22hljs-attr\x22\x3eindex\x3c\/span\x3e: i,\n            \x3cspan class=\x22hljs-attr\x22\x3ematchArr\x3c\/span\x3e: isMatch\n        }\n        callerKmp.push(data)\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(tempIndex) i = tempIndex\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(isMatch.length === target.length) {\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.timeEnd(\x3cspan class=\x22hljs-string\x22\x3e\x27kmp\x27\x3c\/span\x3e)\n            \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27移位次数:\x27\x3c\/span\x3e, times)\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e i\n        }\n        isMatch = []\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.timeEnd(\x3cspan class=\x22hljs-string\x22\x3e\x27kmp\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e有了思路后整体实现并不复杂，只需要先通过模式串计算各长度的部分匹配值，在之后的与主串的匹配过程中，\x3cstrong\x3e每失败一次后如果有部分匹配值存在，我们就可以通过部分匹配值查找到下一次应该移位的位置\x3c\/strong\x3e，省去不必要的步骤。\x3c\/p\x3e\n\x3cp\x3e所以在某些极端情况下，比如需要搜索的词如果内部完全没有重复，算法就会退化成遍历，性能可能还不如传统算法，里面还涉及了比较的开销。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e参考文章\x3c\/h3\x3e\n\x3cul\x3e\x3cli\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2013\/05\/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e字符串匹配的KMP算法\x3c\/a\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e最后\x3c\/h2\x3e\n\x3cp\x3e惯例po\x3ca href=\x22https:\/\/github.com\/Aaaaaaaty\/Blog\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e作者的博客\x3c\/a\x3e，不定时更新中——\x3c\/p\x3e\n\x3cp\x3e有问题欢迎在issues下交流。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>结合kmp算法的匹配动画浅析其基本思想</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013386857">https://segmentfault.com/a/1190000013386857</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/oen4nntt3f/" target="_blank">https://alili.tech/archive/oen4nntt3f/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>