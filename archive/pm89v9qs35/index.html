<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="极致Web性能 —— SPA性能指南"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>极致Web性能 —— SPA性能指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/pm89v9qs35/",
				"appid": "1613049289050283", 
				"title": "极致Web性能 —— SPA性能指南 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-13T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/zg6ckvlqyd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/x38gjo4mw/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&text=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&text=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&title=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&is_video=false&description=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&title=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&title=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&title=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpm89v9qs35%2f&title=%e6%9e%81%e8%87%b4Web%e6%80%a7%e8%83%bd%20%e2%80%94%e2%80%94%20SPA%e6%80%a7%e8%83%bd%e6%8c%87%e5%8d%97"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">极致Web性能 —— SPA性能指南</h1><div class="meta"><div class="postdate"><time datetime="2018-12-13" itemprop="datePublished">2018-12-13</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e作者：Jogis\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e原文链接：\x3ca href=\x22https:\/\/github.com\/yesvods\/Blog\/issues\/14\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/yesvods\/Bl...\x3c\/a\x3e \x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e转载请注明原文链接以及作者信息\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e前言\x3c\/h3\x3e\n\x3cp\x3e前端框架时代，为开发体验、效率与页面性能带来，非常大的革命。大家纷纷拿起一系列打包工具(webpack\/parcel etc.)，配合一系列加载器快速搭建起一个 SPA 页面。\x3c\/p\x3e\n\x3cp\x3eSPA 应用带来的好处非常明显；\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e提升页面切换体验\x3c\/li\x3e\n\x3cli\x3e降低切换时间\x3c\/li\x3e\n\x3cli\x3e易于部署\x26amp;前后端分离\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e但是也带来一系列性能问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e初始加载脚本较大\x3c\/li\x3e\n\x3cli\x3e首屏空白时间较长\x3c\/li\x3e\n\x3cli\x3e页面返回时，数据被动重新拉取\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e这些问题是使用 SPA 模式不可避免的，通过了解 SPA 加载运行过程，可以逐渐看清楚引起性能问题的根本原因，通过精细化应用加载，来解决这些问题。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eSPA 之殇\x3c\/h3\x3e\n\x3ch4\x3e愈发发福\x3c\/h4\x3e\n\x3cp\x3e比起一般的简单页面，SPA 最大的问题，就是在初始化之时引入大量框架方案脚本，这导致脚本体积随着项目发展体积愈发增大。\x3c\/p\x3e\n\x3ch4\x3e不仅仅是体积\x3c\/h4\x3e\n\x3cp\x3e很多人会关注脚本的加载体积，通过一系列方案来提升缓存命中率，减少脚本请求次数。在网络环境较差的移动端，尽量减少请求时间意义很大。\x3c\/p\x3e\n\x3cp\x3e但这不是银弹，移动设备对脚本的解析、编译、执行性能较差（脚本加载参考\x3ca href=\x22https:\/\/github.com\/yesvods\/Blog\/issues\/11\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e《图说舌尖上的脚本》\x3c\/a\x3e），即便可以完全利用缓存，执行时间也是性能一大瓶颈。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eKeep SPA Fit\x3c\/h3\x3e\n\x3cp\x3e性能优化原则：贫则独善其身，富则兼济天下。\x3c\/p\x3e\n\x3ch4\x3e如何维护一个大型 SPA？\x3c\/h4\x3e\n\x3cp\x3e随着项目不断发展，页面不断增加，源源不断的第三方组件\x26amp;工具库加入到\x3ccode\x3eBundle\x3c\/code\x3e里面，良好的 SPA 架构可以保证大型 SPA 项目依旧保持极致的性能与体验。下面介绍一个优秀性能\x26amp;体验 SPA 具备的特性：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e性能优化\x3c\/h3\x3e\n\x3ch4\x3e1. 快速启动 —— 极大提升加载速度（important）\x3c\/h4\x3e\n\x3cp\x3e快速启动应用，并行发起 Bundle 加载\x26amp;拉取初始数据。相信大家已经发现了，SPA 初始化时候，不得不等待 bundle 返回并执行后，才会发起数据加载。\x3c\/p\x3e\n\x3cp\x3e由于在移动设备上（即便有缓存）bundle 加载极为耗时，我们可以充分利用这段时间将数据进行预加载。这项特性，使得后面的优化起到更加明显的效果。\x3c\/p\x3e\n\x3cp\x3e如下示例代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ app.js\nPromise.all([load(\x27bundle\x27), load(\x27data\x27)])\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ app.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.all([load(\x3cspan class=\x22hljs-string\x22\x3e\x27bundle\x27\x3c\/span\x3e), load(\x3cspan class=\x22hljs-string\x22\x3e\x27data\x27\x3c\/span\x3e)])\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e2. 根据路由拆分 —— 减少初始加载体积\x3c\/h4\x3e\n\x3cp\x3e利用异步加载方式，在路由注册时提供异步拉取组件的方法，仅在需要进入对应路由时，对应组件才会被加载进来。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22route({\n  Home: () =\x3e import(\x27@\/coms\/home\x27),\n  About: () =\x3e import(\x27@\/coms\/about\x27)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eroute({\n  \x3cspan class=\x22hljs-attr\x22\x3eHome\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27@\/coms\/home\x27\x3c\/span\x3e),\n  \x3cspan class=\x22hljs-attr\x22\x3eAbout\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27@\/coms\/about\x27\x3c\/span\x3e)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e3. 独立打包异步组件公共 Bundle —— 提高复用性\x26amp;缓存命中率\x3c\/h4\x3e\n\x3cp\x3e在\x3ccode\x3eHome\x3c\/code\x3e和\x3ccode\x3eAbout\x3c\/code\x3e等路由里面，可能公用一套 UI 组件，若不将异步加载公用组件统一打包，每次加载 路由时，都会额外加载一套 UI 组件。通过将公用组件提取打包成\x3ccode\x3eVendor\x3c\/code\x3e，可以减少下次进入路由加载体积与时间。\x3c\/p\x3e\n\x3cp\x3eBTW：在\x3ccode\x3ewebpack \x26lt; 4\x3c\/code\x3e时，依旧需要手动维护异步加载组件公用组件。\x3ccode\x3ewebpack4\x3c\/code\x3e提供更丰富的异步组件抽离\x3ca href=\x22https:\/\/medium.com\/webpack\/webpack-4-beta-try-it-today-6b1d27d7d7e2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e方案\x3c\/a\x3e。\x3c\/p\x3e\n\x3ch4\x3e4. 组件预加载 —— 减少页面切换时间\x3c\/h4\x3e\n\x3cp\x3e当首屏加载完毕后，设备\x26amp;网络处于空闲状态，可以对其他路由组件进行预加载，以便提升页面切换性能。\x3c\/p\x3e\n\x3cp\x3e预加载是一个非常繁琐的过程，我们可以设计一个极小启动器，在页面渲染后快速预加载后续组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 所有包含Page的路由组件均会被预加载\nboostraper.loadMatch(\x27Page\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 所有包含Page的路由组件均会被预加载\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3eboostraper\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.loadMatch\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Page\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e5. 使用 ESM 语法 —— 按需打包工具库，降低 Bundle 体积\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3ewebpack4\x3c\/code\x3e在 ESM \x3ccode\x3etree shaking\x3c\/code\x3e上做了极大优化，使得在引用工具库时候真正做到\x22按需打包\x22，这要求无论是自己开发的工具库，抑或使用第三方工具库，打包\x26amp;使用 ESM 版本非常必要。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013272564?w=826\x26amp;h=310\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013272564?w=826\x26amp;h=310\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e6. 配合 PWA 使用，口感更佳 —— 降低首屏渲染时间，极大提升体验\x3c\/h4\x3e\n\x3cp\x3e根据 PWA 缓存策略，可以将访问的页面\x3ccode\x3eindex.html\x3c\/code\x3e缓存起来，下次打开时候优先利用缓存，再发起请求更新缓存。这使得 SPA 应用几乎不需要额外时间便可加载应用首屏文档流。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e体验优化\x3c\/h3\x3e\n\x3ch4\x3e1. 构建你的极简\x3ccode\x3eSkeleton Page\x3c\/code\x3e\n\x3c\/h4\x3e\n\x3cp\x3eSPA 首屏加载面临较长时间白屏，骨架图是一个完美的\x22缓兵之计\x22。在谷歌研究员的\x3ca href=\x22https:\/\/medium.com\/@owencm\/reactive-web-design-the-secret-to-building-web-apps-that-feel-amazing-b5cbfe9b7c50\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文章 \x3c\/a\x3e中有提到，骨架图对用户体验有极大的提升：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e快速展示\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e配合 PWA 首屏缓存，骨架图可实现瞬间加载\x26amp;展示，首屏视觉上有冲击性地提升\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e稳定加载\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e消除页面初始加载因多次重绘\x26amp;资源加载导致的\x22抖动\x22\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e需要注意的是，骨架图应尽量保持足够小巧与简单，以确保不会严重影响页面后续加载。\x3c\/p\x3e\n\x3ch4\x3e2. 页面切换 Loading\x3c\/h4\x3e\n\x3cp\x3e无论如何优化性能加载，在页面切换时候依旧需要获取页面数据，若处理不好，可能会在数据返回前有短暂的不友好\x22空白\x22。通过以下方式可以很好处理这个问题：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e友好的切换前 Loading\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e在确保组件\x26amp;数据加载完毕前，可保证页面可交互性，减少用户阻塞感\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e转场动画\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e在大多数原生应用，转场动画属于标配\x3c\/li\x3e\n\x3cli\x3e即时组件\x26amp;数据已经完全加载，在切换至新页面瞬间，依旧需要页面渲染时间，这段时间可能导致页面短暂空白或者\x22视觉阻塞\x22\x3c\/li\x3e\n\x3cli\x3e通过转场动画时间，可以很好地缓解这个问题，大多数页面保证在转场动画完毕之后依然渲染完毕\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e最后\x3c\/h3\x3e\n\x3cp\x3e除了上述提到的 SPA 优化方案，Web 性能基础也是必备的基石（如域名收敛、合理文档结构）。性能优化本质是一个页面精细化监控运营的过程，也要求我们对 Web 加载的过程与逻辑有更多的思考与理解。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>极致Web性能 —— SPA性能指南</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013272561">https://segmentfault.com/a/1190000013272561</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/pm89v9qs35/" target="_blank">https://alili.tech/archive/pm89v9qs35/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>