<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="为什么使用v-for时必须添加唯一的key?"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>为什么使用v-for时必须添加唯一的key? | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/poxbcn4n6pp/",
				"appid": "1613049289050283", 
				"title": "为什么使用v-for时必须添加唯一的key? | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-10T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/b4kdyfbtwqm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/fkmbngg5o8w/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&text=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&text=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&title=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&is_video=false&description=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&title=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&title=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&title=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpoxbcn4n6pp%2f&title=%e4%b8%ba%e4%bb%80%e4%b9%88%e4%bd%bf%e7%94%a8v-for%e6%97%b6%e5%bf%85%e9%a1%bb%e6%b7%bb%e5%8a%a0%e5%94%af%e4%b8%80%e7%9a%84key%3f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">为什么使用v-for时必须添加唯一的key?</h1><div class="meta"><div class="postdate"><time datetime="2018-12-10" itemprop="datePublished">2018-12-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e首次发表在\x3ca href=\x22http:\/\/wangyaxing.top\/2018\/03\/18\/2018-03-18-%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8v-for%E6%97%B6%E5%BF%85%E9%A1%BB%E6%B7%BB%E5%8A%A0%E5%94%AF%E4%B8%80%E7%9A%84key\/#more\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e个人博客\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3ev-for中的key\x3c\/h2\x3e\n\x3cp\x3e使用\x3ccode\x3ev-for\x3c\/code\x3e更新已渲染的元素列表时,默认用\x3ccode\x3e就地复用\x3c\/code\x3e策略;列表数据修改的时候,他会根据key值去判断某个值是否修改,如果修改,则重新渲染这一项,否则复用之前的元素;\x3cbr\x3e我们在使用的使用经常会使用\x3ccode\x3eindex\x3c\/code\x3e(即数组的下标)来作为\x3ccode\x3ekey\x3c\/code\x3e,但其实这是不推荐的一种使用方法;\x3c\/p\x3e\n\x3cp\x3e举个🌰\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const list = [\n    {\n        id: 1,\n        name: \x27test1\x27,\n    },\n    {\n        id: 2,\n        name: \x27test2\x27,\n    },\n    {\n        id: 3,\n        name: \x27test3\x27,\n    },\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e list = [\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test1\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test2\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test3\x27\x3c\/span\x3e,\n    },\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv v-for=\x26quot;(item, index) in list\x26quot; :key=\x26quot;index\x26quot; \x3e\x22{{\x22item.name\x22}}\x22\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26lt;div v-\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22(item, index) in list\x22\x3c\/span\x3e :key=\x3cspan class=\x22hljs-string\x22\x3e\x22index\x22\x3c\/span\x3e \x26gt;\x22{{\x22item.name\x22}}\x22\x26lt;\x3cspan class=\x22hljs-regexp\x22\x3e\/div\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面这种是我们做项目中常用到的一种场景,因为不加key,vue现在直接报错,所以我使用index作为key;下面列举两种常见的数据更新情况\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1.在最后一条数据后再加一条数据\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const list = [\n    {\n        id: 1,\n        name: \x27test1\x27,\n    },\n    {\n        id: 2,\n        name: \x27test2\x27,\n    },\n    {\n        id: 3,\n        name: \x27test3\x27,\n    },\n    {\n        id: 4,\n        name: \x27我是在最后添加的一条数据\x27,\n    },\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e list = [\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test1\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test2\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test3\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27我是在最后添加的一条数据\x27\x3c\/span\x3e,\n    },\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此时前三条数据直接复用之前的,新渲染最后一条数据,此时用\x3ccode\x3eindex\x3c\/code\x3e作为\x3ccode\x3ekey\x3c\/code\x3e,没有任何问题;\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e2.在中间插入一条数据\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const list = [\n    {\n        id: 1,\n        name: \x27test1\x27,\n    },\n    {\n        id: 4,\n        name: \x27我是插队的那条数据\x27,\n    }\n    {\n        id: 2,\n        name: \x27test2\x27,\n    },\n    {\n        id: 3,\n        name: \x27test3\x27,\n    },\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e list = [\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test1\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27我是插队的那条数据\x27\x3c\/span\x3e,\n    }\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test2\x27\x3c\/span\x3e,\n    },\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test3\x27\x3c\/span\x3e,\n    },\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e此时更新渲染数据,通过\x3ccode\x3eindex\x3c\/code\x3e定义的\x3ccode\x3ekey\x3c\/code\x3e去进行前后数据的对比,发现\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22之前的数据                         之后的数据\n\nkey: 0  index: 0 name: test1     key: 0  index: 0 name: test1\nkey: 1  index: 1 name: test2     key: 1  index: 1 name: 我是插队的那条数据\nkey: 2  index: 2 name: test3     key: 2  index: 2 name: test2\n                                                 key: 3  index: 3 name: test3\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e之前的数据                         之后的数据\n\nkey: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e name: test1     key: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e name: test1\nkey: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e name: test2     key: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e name: 我是插队的那条数据\nkey: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e name: test3     key: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e name: test2\n                                                 key: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  index: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e name: test3\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过上面清晰的对比,发现除了第一个数据可以复用之前的之外,另外三条数据都需要重新渲染;\x3c\/p\x3e\n\x3cp\x3e是不是很惊奇,我明明只是插入了一条数据,怎么三条数据都要重新渲染?而我想要的只是新增的那一条数据新渲染出来就行了\x3c\/p\x3e\n\x3cp\x3e最好的办法是使用数组中不会变化的那一项作为\x3ccode\x3ekey\x3c\/code\x3e值,对应到项目中,即每条数据都有一个唯一的\x3ccode\x3eid\x3c\/code\x3e,来标识这条数据的唯一性;使用\x3ccode\x3eid\x3c\/code\x3e作为\x3ccode\x3ekey\x3c\/code\x3e值,我们再来对比一下向中间插入一条数据,此时会怎么去渲染\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22之前的数据                         之后的数据\n\nkey: 1  id: 1 index: 0 name: test1     key: 1  id: 1 index: 0  name: test1\nkey: 2  id: 2 index: 1 name: test2     key: 4  id: 4 index: 1  name: 我是插队的那条数据\nkey: 3  id: 3 index: 2 name: test3     key: 2  id: 2 index: 2  name: test2\n                                                         key: 3  id: 3 index: 3  name: test3\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e之前的数据                         之后的数据\n\nkey: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e name: test1     key: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e  name: test1\nkey: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e name: test2     key: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e  name: 我是插队的那条数据\nkey: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e name: test3     key: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e  name: test2\n                                                         key: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  id: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e index: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e  name: test3\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在对比发现只有一条数据变化了,就是\x3ccode\x3eid\x3c\/code\x3e为4的那条数据,因此只要新渲染这一条数据就可以了,其他都是就复用之前的;\x3c\/p\x3e\n\x3cp\x3e同理在react中使用map渲染列表时,也是必须加key,且推荐做法也是使用\x3ccode\x3eid\x3c\/code\x3e,也是这个原因;\x3c\/p\x3e\n\x3cp\x3e其实,真正的原因并不是vue和react怎么怎么,而是因为Virtual DOM 使用Diff算法实现的原因,\x3c\/p\x3e\n\x3cblockquote\x3e下面大致从虚拟DOM的Diff算法实现的角度去解释一下\x3c\/blockquote\x3e\n\x3cp\x3evue和react的虚拟DOM的Diff算法大致相同，其核心是基于两个简单的假设：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e两个相同的组件产生类似的DOM结构，不同的组件产生不同的DOM结构。\x3c\/li\x3e\n\x3cli\x3e同一层级的一组节点，他们可以通过唯一的id进行区分。基于以上这两点假设，使得虚拟DOM的Diff算法的复杂度从O(n^3)降到了O(n)。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e引用\x3ca href=\x22https:\/\/calendar.perfplanet.com\/2013\/diff\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact’s diff algorithm\x3c\/a\x3e中的例子:\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000015299325\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000015299325\x22 alt=\x22diff1.jpg\x22 title=\x22diff1.jpg\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e当某一层有很多相同的节点时，也就是列表节点时，Diff算法的更新过程默认情况下也是遵循以上原则。\x3cbr\x3e比如一下这个情况：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000015299326\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000015299326\x22 alt=\x22diff2.jpg\x22 title=\x22diff2.jpg\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e我们希望可以在B和C之间加一个F，Diff算法默认执行起来是这样的：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000015299327\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000015299327\x22 alt=\x22diff3.jpg\x22 title=\x22diff3.jpg\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e即把C更新成F，D更新成C，E更新成D，最后再插入E，是不是很没有效率？\x3c\/p\x3e\n\x3cp\x3e所以我们需要使用key来给每个节点做一个唯一标识，Diff算法就可以正确的识别此节点，找到正确的位置区插入新的节点。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000015299328\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000015299328\x22 alt=\x22diff4.jpg\x22 title=\x22diff4.jpg\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e所以一句话，key的作用主要是为了高效的更新虚拟DOM。另外vue中在使用相同标签名元素的过渡切换时，也会使用到key属性，其目的也是为了让vue可以区分它们，否则vue只会替换其内部属性而不会触发过渡效果。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e参考\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/guide\/list.html#%E6%95%B0%E7%BB%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue官方文档\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/reactjs.org\/docs\/lists-and-keys.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact官方文档\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/livoras\/blog\/issues\/13\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深度剖析：如何实现一个 Virtual DOM 算法\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>为什么使用v-for时必须添加唯一的key?</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013810844">https://segmentfault.com/a/1190000013810844</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/poxbcn4n6pp/" target="_blank">https://alili.tech/archive/poxbcn4n6pp/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>