<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="node.js 爬取招聘信息分析各职业钱途（爬虫&#43;动态IP代理&#43;数据可视化分析）"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>node.js 爬取招聘信息分析各职业钱途（爬虫&#43;动态IP代理&#43;数据可视化分析） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/pz0oy2gxwu/",
				"appid": "1613049289050283", 
				"title": "node.js 爬取招聘信息分析各职业钱途（爬虫&#43;动态IP代理&#43;数据可视化分析） | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-07T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/g3i8wiz5amu/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/clzese052j6/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&text=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&text=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&title=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&is_video=false&description=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&title=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&title=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&title=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fpz0oy2gxwu%2f&title=node.js%20%e7%88%ac%e5%8f%96%e6%8b%9b%e8%81%98%e4%bf%a1%e6%81%af%e5%88%86%e6%9e%90%e5%90%84%e8%81%8c%e4%b8%9a%e9%92%b1%e9%80%94%ef%bc%88%e7%88%ac%e8%99%ab%2b%e5%8a%a8%e6%80%81IP%e4%bb%a3%e7%90%86%2b%e6%95%b0%e6%8d%ae%e5%8f%af%e8%a7%86%e5%8c%96%e5%88%86%e6%9e%90%ef%bc%89"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">node.js 爬取招聘信息分析各职业钱途（爬虫&#43;动态IP代理&#43;数据可视化分析）</h1><div class="meta"><div class="postdate"><time datetime="2018-12-07" itemprop="datePublished">2018-12-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e前前言\x3c\/h1\x3e\n\x3cp\x3e不想看爬虫过程只想看职位钱途数据分析请看这里：\x3cbr\x3e\x3ca href=\x22http:\/\/weiyu-chen.github.io\/data-analysis\/frontend.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e前端招聘岗位分析\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/weiyu-chen.github.io\/data-analysis\/cpp.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eC\x2b\x2b招聘岗位分析\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/weiyu-chen.github.io\/data-analysis\/java.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJAVA招聘岗位分析\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/weiyu-chen.github.io\/data-analysis\/php.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePHP招聘岗位分析\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/weiyu-chen.github.io\/data-analysis\/python.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePython招聘岗位分析\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e想看源码或想自己爬一个请看这里：\x3ca href=\x22https:\/\/github.com\/Weiyu-Chen\/lagou-spider-node\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e本文github源码\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e前言\x3c\/h1\x3e\n\x3cp\x3e早在一年前大学校招期间，为了充实下简历，就写了个\x3ccode\x3enode\x3c\/code\x3e爬虫，可惜当时能力有限，工程存在一定的局限性，不好意思拿出来\x3cdel\x3e装逼\x3c\/del\x3e分享。 \x3c\/p\x3e\n\x3cp\x3e一年过去了，现在能力依然有限，但是脸皮却练厚了，于是就有了这篇文章。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e题纲\x3c\/h1\x3e\n\x3cp\x3e关于爬虫，主流技术是用\x3ccode\x3epython\x3c\/code\x3e，然而随着\x3ccode\x3enode\x3c\/code\x3e的出现，对于对\x3ccode\x3epython\x3c\/code\x3e了解有限的前端同学，用\x3ccode\x3enode\x3c\/code\x3e来实现一个爬虫也不失为一个不错的选择。\x3c\/p\x3e\n\x3cp\x3e当然无论是\x3ccode\x3epython\x3c\/code\x3e爬虫还是\x3ccode\x3enode\x3c\/code\x3e爬虫或者其他品种的爬虫，其实除了语言特性之外，其思路基本大同小异。下面我就为大家详细介绍下\x3ccode\x3enode\x3c\/code\x3e爬虫的具体思路与实现，内容大概如下：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cp\x3e爬前准备\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e选择目标\x3c\/li\x3e\n\x3cli\x3e分析可收集数据与目标可爬取入口\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e爬虫\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e爬取\x3ccode\x3eJSON\x3c\/code\x3e数据\x3c\/li\x3e\n\x3cli\x3e爬取\x3ccode\x3eHTML\x3c\/code\x3e文档，提取有用信息\x3c\/li\x3e\n\x3cli\x3eMongodb 数据存储\x3c\/li\x3e\n\x3cli\x3e并发控制\x3c\/li\x3e\n\x3cli\x3e动态IP代理（防止IP被禁）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e数据可视化展示\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3e爬前准备\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e选择目标\x3c\/h2\x3e\n\x3cp\x3e既然要写爬虫，当然要爬一些利益相关的数据比较好玩啦。\x3cstrong\x3e爬取招聘网站的招聘信息，来看看互联网圈子里各个工种的目前薪酬状况及其发展前景\x3c\/strong\x3e，想来是不错的选择。\x3c\/p\x3e\n\x3cp\x3e经我夜观天下，掐指一算，就选\x3ca href=\x22https:\/\/www.lagou.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e拉勾网\x3c\/a\x3e吧。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e分析可收集数据\x3c\/h2\x3e\n\x3cp\x3e一个职位招聘信息，一般来说，我们关注的重点信息会是：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e薪酬\x3c\/strong\x3e（毫无疑问，重中之重）\x3c\/li\x3e\n\x3cli\x3e工作城市\x3c\/li\x3e\n\x3cli\x3e学历要求\x3c\/li\x3e\n\x3cli\x3e工作年限要求\x3c\/li\x3e\n\x3cli\x3e雇主公司\x3c\/li\x3e\n\x3cli\x3e公司领域\x3c\/li\x3e\n\x3cli\x3e公司规模\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e带着想要收集的信息，首先，进入\x3ca href=\x22https:\/\/www.lagou.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e拉勾官网\x3c\/a\x3e，搜索\x3ccode\x3eweb前端\x3c\/code\x3e岗位，能看到\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV4Ynm?w=976\x26amp;h=427\x22 src=\x22https:\/\/static.alili.tech\/img\/bV4Ynm?w=976\x26amp;h=427\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e很好，我们想要的信息基本都有了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e分析目标可爬取入口\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3ePC端入口\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eF12\x3c\/code\x3e 分析请求资源，可得\x3ccode\x3ehttps:\/\/www.lagou.com\/jobs\/positionAjax.json?needAddtionalResult=false\x26amp;isSchoolJob=0\x3c\/code\x3e \x3cbr\x3epost 请求体\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    first:false,\n    pn:1,\n    kd:`web前端`\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs yaml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e{\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    first:\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    pn:\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e,\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3e    kd:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e`web前端`\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e响应JSON数据\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV5Hor?w=548\x26amp;h=353\x22 src=\x22https:\/\/static.alili.tech\/img\/bV5Hor?w=548\x26amp;h=353\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e完美！！！\x3c\/strong\x3e  数据格式都已经帮我们整理好了，直接爬就行了。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e但，完美的数据总不会这么轻易让你得到\x3c\/strong\x3e，经我用 \x3ccode\x3enode\x3c\/code\x3e 和 \x3ccode\x3epython\x3c\/code\x3e，还有\x3ccode\x3epostman\x3c\/code\x3e 携带浏览器全部\x3ccode\x3eheader\x3c\/code\x3e信息一一测试，均发现：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV5Hpu?w=697\x26amp;h=58\x22 src=\x22https:\/\/static.alili.tech\/img\/bV5Hpu?w=697\x26amp;h=58\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cstrong\x3e好吧，此路不通\x3c\/strong\x3e。（此接口反爬虫机制不明，有研究的大神请留言=_=）\x3c\/p\x3e\n\x3cp\x3e所谓条条大路通罗马，此路不通，咱绕路走。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e移动端入口\x3c\/h3\x3e\n\x3cp\x3e经过一番探索，发现 \x3ca href=\x22https:\/\/m.lagou.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e拉勾移动端站点\x3c\/a\x3e 空门大开！\x3c\/p\x3e\n\x3cblockquote\x3e提示： 一般有点技术含量的网站都可能会存在不同强度的反爬虫机制，而一般其移动端站点的反爬虫机制相对于PC站点较弱，是一个不错的着手点。再不行的话，还可以去其app端抓包分析是否存在想要的请求哦。\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV5OlN?w=566\x26amp;h=332\x22 src=\x22https:\/\/static.alili.tech\/img\/bV5OlN?w=566\x26amp;h=332\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eGET请求： \x3ca href=\x22https:\/\/m.lagou.com\/search.json?city=%E5%85%A8%E5%9B%BD\x26amp;positionName=web%E5%89%8D%E7%AB%AF\x26amp;pageNo=1\x26amp;pageSize=15\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/m.lagou.com\/search.js...\x3c\/a\x3e\x3cbr\x3e响应信息：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV5Otl?w=454\x26amp;h=302\x22 src=\x22https:\/\/static.alili.tech\/img\/bV5Otl?w=454\x26amp;h=302\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e很好，虽然数据信息有点少，但是总算是一个能爬的接口了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3e爬虫\x3c\/h1\x3e\n\x3cp\x3e好了，分析也分析完了，现在正式设计爬虫程序。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3eJSON数据爬取\x3c\/h2\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e首先，把请求的路径与参数单独抽离。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let spider = {\n    requestUrl : \x26quot;http:\/\/m.lagou.com\/search.json\x26quot;,\n    query: {\n        city: \x27\x27,\n        pageNum: \x27\x27,\n        job: \x27\x27,\n    },\n    ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e spider = {\n    \x3cspan class=\x22hljs-attr\x22\x3erequestUrl\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/m.lagou.com\/search.json\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3equery\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ecity\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3epageNum\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ejob\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n    },\n    ...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e发出请求，此处的服务端构造请求使用 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/superagent\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3esuperagent\x3c\/a\x3e，当然，用 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/request\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3erequest\x3c\/a\x3e 等类似的包也可以，并无限定。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let spider = {\n    ....\n\/**\n * 发起单个请求\n * @return {\x3cPromise\x3cArray\x3e\x3e | \x3cPromise\x3cString\x3e\x3e} 请求成功resolve原始数据，否则reject\n  **\/\n    request() {\n        return new Promise((resolve,reject)=\x3e{\n            superagent\n            .get(this.requestUrl)\n            .query({\n                city: this.query.city,\n                pageNo: this.query.pageNum,\n                positionName: this.query.job\n            }).end((err, res)=\x3e{\n                let dataList = [];\n                if (err || !res || !res.ok) {\n                    console.error(err);\n                    reject(\x27request failed!\x27)\n                } else  {\n                    dataList = res.body.content.data.page.result\n                    if (dataList.length === 0) {\n                        \/\/ 当请求结果数组长度为0，即认为已经到末页，结束爬虫\n                        reject(\x27finish\x27);                     \n                    } else {\n                        resolve(dataList)\n                    }\n                } \n            })\n        })\n    },\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e spider = {\n    ....\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 发起单个请求\n * @return {\x26lt;Promise\x26lt;Array\x26gt;\x26gt; | \x26lt;Promise\x26lt;String\x26gt;\x26gt;} 请求成功resolve原始数据，否则reject\n  **\/\x3c\/span\x3e\n    request() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve,reject\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{\n            superagent\n            .get(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.requestUrl)\n            .query({\n                \x3cspan class=\x22hljs-attr\x22\x3ecity\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query.city,\n                \x3cspan class=\x22hljs-attr\x22\x3epageNo\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query.pageNum,\n                \x3cspan class=\x22hljs-attr\x22\x3epositionName\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query.job\n            }).end(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, res\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e dataList = [];\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err || !res || !res.ok) {\n                    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err);\n                    reject(\x3cspan class=\x22hljs-string\x22\x3e\x27request failed!\x27\x3c\/span\x3e)\n                } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e  {\n                    dataList = res.body.content.data.page.result\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (dataList.length === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当请求结果数组长度为0，即认为已经到末页，结束爬虫\x3c\/span\x3e\n                        reject(\x3cspan class=\x22hljs-string\x22\x3e\x27finish\x27\x3c\/span\x3e);                     \n                    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                        resolve(dataList)\n                    }\n                } \n            })\n        })\n    },\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e处理数据\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let spider = {\n    ....\n\/**\n * 处理爬取到的原始数据，提取出所需的数据\n * @param {\x3cArray\x3e} - companyList : 原始数据\n * @return {\x3cPromise\x3cArray\x3e\x3e} resolve处理过的数据\n  **\/\n    handleCallbackData(companyList) {\n       \n        \/\/处理数据\n         let arr = companyList.map((item) =\x3e {\n            let salary = item.salary.split(\x27-\x27);\n            \n            \/\/工资两种情况：”10k以上“ or \x26quot;10k-15k\x26quot;， 平均工资取中位数\n            aveSalary = salary.length == 1 ? parseInt(salary[0])*1000 : (parseInt(salary[0]) \x2b parseInt( salary[1] ) )*500;\n\n            \/\/过滤出所需数据\n            return {\n                companyFullName: item.companyFullName,\n                positionId : item.positionId ,\n                salary:aveSalary ,\n                city:item.city ,\n\n                field: \x27\x27,\n                companySize:\x27\x27,\n                workYear:\x27\x27 ,\n                qualification: \x27\x27,\n            }\n        });\n\n        return Promise.resolve(arr)\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e spider = {\n    ....\n\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 处理爬取到的原始数据，提取出所需的数据\n * @param {\x26lt;Array\x26gt;} - companyList : 原始数据\n * @return {\x26lt;Promise\x26lt;Array\x26gt;\x26gt;} resolve处理过的数据\n  **\/\x3c\/span\x3e\n    handleCallbackData(companyList) {\n       \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/处理数据\x3c\/span\x3e\n         \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = companyList.map(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e salary = item.salary.split(\x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e);\n            \n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/工资两种情况：”10k以上“ or \x2210k-15k\x22， 平均工资取中位数\x3c\/span\x3e\n            aveSalary = salary.length == \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ? \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(salary[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e])*\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e : (\x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(salary[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]) \x2b \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e( salary[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] ) )*\x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e;\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/过滤出所需数据\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3ecompanyFullName\x3c\/span\x3e: item.companyFullName,\n                \x3cspan class=\x22hljs-attr\x22\x3epositionId\x3c\/span\x3e : item.positionId ,\n                \x3cspan class=\x22hljs-attr\x22\x3esalary\x3c\/span\x3e:aveSalary ,\n                \x3cspan class=\x22hljs-attr\x22\x3ecity\x3c\/span\x3e:item.city ,\n\n                \x3cspan class=\x22hljs-attr\x22\x3efield\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3ecompanySize\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eworkYear\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e ,\n                \x3cspan class=\x22hljs-attr\x22\x3equalification\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e,\n            }\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.resolve(arr)\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e保存数据，此处数据库使用\x3ccode\x3emongodb\x3c\/code\x3e，\x3ccode\x3eORM\x3c\/code\x3e使用 \x3ccode\x3emoogoose\x3c\/code\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22save2db(jobList) {\n    return new Promise((resolve, reject)=\x3e{\n        Job.create(jobList,function (err,product) {\n            if (err) {\n                console.error(err.errmsg)\n                err.code == 11000 \x26amp;\x26amp; resolve(\x27丢弃重复数据\x27)\n                reject(err);\n            } else {\n                resolve(\x26quot;save data to database successfully\x26quot;)\n            }\n        })    \n    })\n},\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3esave2db(jobList) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{\n        Job.create(jobList,\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr,product\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) {\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(err.errmsg)\n                err.code == \x3cspan class=\x22hljs-number\x22\x3e11000\x3c\/span\x3e \x26amp;\x26amp; resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27丢弃重复数据\x27\x3c\/span\x3e)\n                reject(err);\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                resolve(\x3cspan class=\x22hljs-string\x22\x3e\x22save data to database successfully\x22\x3c\/span\x3e)\n            }\n        })    \n    })\n},\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3eHTML 数据解析爬取\x3c\/h2\x3e\n\x3cp\x3e从上述的\x3ccode\x3ejson\x3c\/code\x3e数据其实我们可以看到，\x3ccode\x3eJSON\x3c\/code\x3e返回的信息十分有限，那么我们需要爬取更多的信息，就需要在招聘详情页解析 html 后提取出所需的信息\x3cbr\x3e随便打开一个移动端的招聘详情页\x3ca href=\x22https:\/\/m.lagou.com\/jobs\/3638173.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/m.lagou.com\/jobs\/3638173.html\x3c\/a\x3e，目测出\x3ccode\x3eurl\x3c\/code\x3e结构很简单，就是\x3ccode\x3ejobs\/\x22{{\x22positionId\x22}}\x22.html\x3c\/code\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6Kxi?w=400\x26amp;h=299\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6Kxi?w=400\x26amp;h=299\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从详情页中可以找出 JSON 数据中缺少的数据项：工作年限要求，学历要求，雇主公司领域，雇主公司融资情况，雇主公司规模大小。\x3c\/p\x3e\n\x3cp\x3e爬取方法和上述爬取 \x3ccode\x3eJSON\x3c\/code\x3e 数据相差无几，主要差别就是数据解析部分，这里需要用到\x3ccode\x3echerrio\x3c\/code\x3e来解析 爬取到的HTML，从而更简单地提取必要信息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    handleCallbackData({res, jobId}) {\n        var $ = cheerio.load(res.text);\n\n        let workYear = $(\x27#content \x3e div.detail \x3e div.items \x3e span.item.workyear \x3e span\x27).text(),\n            qualification = $(\x27#content \x3e div.detail \x3e div.items \x3e span.item.education\x27).text().trim(),\n            field = $(\x27#content \x3e div.company.activeable \x3e div \x3e div \x3e p\x27).text().trim().split(\/\\s*\\\/\\s*\/)[0]\n            companySize = $(\x27#content \x3e div.company.activeable \x3e div \x3e div \x3e p\x27).text().trim().split(\/\\s*\\\/\\s*\/)[2];\n\n        \/* 如果这四项数据都没有提取到，很有可能是被拉勾的反爬虫机制拦截了 *\/\n        if ( !(workYear || qualification || field || companySize) ) {\n            console.log(res.text)\n            return Promise.reject({code:-1, msg:\x27wrong response!\x27, jobId});\n        }\n\n        return {\n            id: jobId,\n            jobInfo: {\n                workYear,\n                qualification,\n                field,\n                \/\/ financeStage,\n                companySize,\n            }\n        }\n    },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs mel\x22\x3e\x3ccode\x3e    handleCallbackData({res, jobId}) {\n        var $ = cheerio.load(res.\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e);\n\n        let workYear = $(\x3cspan class=\x22hljs-string\x22\x3e\x27#content \x26gt; div.detail \x26gt; div.items \x26gt; span.item.workyear \x26gt; span\x27\x3c\/span\x3e).\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e(),\n            qualification = $(\x3cspan class=\x22hljs-string\x22\x3e\x27#content \x26gt; div.detail \x26gt; div.items \x26gt; span.item.education\x27\x3c\/span\x3e).\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e().\x3cspan class=\x22hljs-keyword\x22\x3etrim\x3c\/span\x3e(),\n            field = $(\x3cspan class=\x22hljs-string\x22\x3e\x27#content \x26gt; div.company.activeable \x26gt; div \x26gt; div \x26gt; p\x27\x3c\/span\x3e).\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e().\x3cspan class=\x22hljs-keyword\x22\x3etrim\x3c\/span\x3e().split(\/\\s*\\\/\\s*\/)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n            companySize = $(\x3cspan class=\x22hljs-string\x22\x3e\x27#content \x26gt; div.company.activeable \x26gt; div \x26gt; div \x26gt; p\x27\x3c\/span\x3e).\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e().\x3cspan class=\x22hljs-keyword\x22\x3etrim\x3c\/span\x3e().split(\/\\s*\\\/\\s*\/)[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* 如果这四项数据都没有提取到，很有可能是被拉勾的反爬虫机制拦截了 *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e ( !(workYear || qualification || field || companySize) ) {\n            console.\x3cspan class=\x22hljs-keyword\x22\x3elog\x3c\/span\x3e(res.\x3cspan class=\x22hljs-keyword\x22\x3etext\x3c\/span\x3e)\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Promise.reject({code:\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e, msg:\x3cspan class=\x22hljs-string\x22\x3e\x27wrong response!\x27\x3c\/span\x3e, jobId});\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n            id: jobId,\n            jobInfo: {\n                workYear,\n                qualification,\n                field,\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ financeStage,\x3c\/span\x3e\n                companySize,\n            }\n        }\n    },\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e并发控制\x3c\/h2\x3e\n\x3cp\x3e做过爬虫的都知道，爬虫的请求并发量是必须要做的，为什么要控制并发？\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e控制其爬取频率，以免没爬几个就网站被封IP了。\x3c\/li\x3e\n\x3cli\x3e控制爬虫应用运行内存，不控制并发的话一下子处理N个请求，内存分分钟爆炸。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e实现并发控制可以使用\x3ccode\x3enpm\x3c\/code\x3e包 \x3ca href=\x22https:\/\/www.npmjs.com\/package\/async\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3easync.mapLimit\x3c\/a\x3e，这里为了自由度更大我使用了自己实现的 \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000013128649\x22\x3e15 行代码实现并发控制\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e具体代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let ids = [2213545,5332233, ...], \/\/ 招聘岗位详情id列表\n    limit = 10, \/\/ 并发数\n    runningRequestNum = 0 , \/\/ 当前并发数\n    count = 0; \/\/ 累计爬取数据项计数\n    \nmapLimit(ids, limit, async (jobId)=\x3e{\n    let requestUrl = `http:\/\/m.lagou.com\/jobs\/${jobId}.html?source=home_hot\x26amp;i=home_hot-6` ;\n    let delay = parseInt(Math.random() * 2000);\n\n    let currentIndex = count\x2b\x2b;\n    runningRequestNum\x2b\x2b\n\n    await sleep( delay );  \/\/ 避免爬太快被封ip，休眠一两秒\n    \n    let result = await spiderHTML.run({\n                    requestUrl,\n                    jobId,\n                    proxyIp\n                })\n    console.log(`当前并发数`, runningRequestNum)\n    runningRequestNum--\n    \n    return result;\n}).then(mapResult =\x3e {\n    \/\/ 并发控制下将 ids 全部迭代完毕\n    \/\/ do something \n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e ids = [\x3cspan class=\x22hljs-number\x22\x3e2213545\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e5332233\x3c\/span\x3e, ...], \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 招聘岗位详情id列表\x3c\/span\x3e\n    limit = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 并发数\x3c\/span\x3e\n    runningRequestNum = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e , \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当前并发数\x3c\/span\x3e\n    count = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 累计爬取数据项计数\x3c\/span\x3e\n    \nmapLimit(ids, limit, \x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e (jobId)=\x26gt;{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e requestUrl = \x3cspan class=\x22hljs-string\x22\x3e`http:\/\/m.lagou.com\/jobs\/\x3cspan class=\x22hljs-subst\x22\x3e${jobId}\x3c\/span\x3e.html?source=home_hot\x26amp;i=home_hot-6`\x3c\/span\x3e ;\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e delay = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * \x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e currentIndex = count\x2b\x2b;\n    runningRequestNum\x2b\x2b\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e sleep( delay );  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 避免爬太快被封ip，休眠一两秒\x3c\/span\x3e\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e result = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e spiderHTML.run({\n                    requestUrl,\n                    jobId,\n                    proxyIp\n                })\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e`当前并发数`\x3c\/span\x3e, runningRequestNum)\n    runningRequestNum--\n    \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e result;\n}).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3emapResult\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 并发控制下将 ids 全部迭代完毕\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ do something \x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cbr\x3e\x3cbr\x3e然而，即便严格控制了请求频率，我们还是不可避免地\x3cstrong\x3e中招\x3c\/strong\x3e了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV6K2U?w=837\x26amp;h=602\x22 src=\x22https:\/\/static.alili.tech\/img\/bV6K2U?w=837\x26amp;h=602\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对于反爬虫措施比较暴躁的网站来说，一个IP爬取太过频繁，被识别成机器爬虫几乎是不可避免的。\x3c\/p\x3e\n\x3cp\x3e一般来讲，我们最简单直接的方法就是：\x3cstrong\x3e换IP\x3c\/strong\x3e。这个IP访问频率太高了被反爬拦截到，换个IP就行了嘛。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e动态IP代理\x3c\/h2\x3e\n\x3cp\x3e单个IP爬虫对于反爬较为严厉的网站是走不通的。那么我们需要用到动态IP池，每次爬取时从IP池中拉取一个IP出来爬数据。\x3c\/p\x3e\n\x3cp\x3e道理很简单，\x3cbr\x3e\x3cstrong\x3e1秒内1个IP访问了100个页面，即便是单身20多年的手速也无法企及。只能是机器爬虫无疑。\x3c\/strong\x3e\x3cbr\x3e\x3cstrong\x3e但1秒内100个IP访问100个页面，平均每个IP一秒内访问了1个页面，那基本不会被反爬干掉\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e怎么搭建动态IP池？ \x3c\/strong\x3e\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cstrong\x3e首先我们得有一个IP源\x3c\/strong\x3e，动态IP池的补充都从这里拉取，这个网上搜一下\x22免费代理IP\x22就有很多出来，选其中一个，收费的IP源比较稳定可靠，免费的就一分钱一分货了。\x3c\/li\x3e\n\x3cli\x3e其次，每次从IP源中拉取的IP都是无法确认其是否可用的，我们必须筛选一遍，\x3cstrong\x3e提取出可用的IP\x3c\/strong\x3e。（PS: 此处和步骤4目的一直，如果IP源较为可靠，可以省略）\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e设计从IP池中拉取单个IP的策略\x3c\/strong\x3e，使得每个IP使用频率均匀，尽量避免单个IP使用频率过高而失效。\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e移除失效IP\x3c\/strong\x3e。尽管设计了拉取策略，但依旧不可避免某些IP失效，此时需要将其移出IP池废弃。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e动态IP池工作流程：\x3c\/p\x3e\n\x3cdiv id=\x22flowDiagram0\x22 class=\x22flowChart\x22\x3e\x3cdiv class=\x22table-wrap\x22\x3e\x3csvg height=\x22389.828125\x22 version=\x221.1\x22 width=\x22749.109375\x22 xmlns=\x22http:\/\/www.w3.org\/2000\/svg\x22 style=\x22overflow: hidden; position: relative; top: -0.203125px;\x22\x3e\x3cdesc style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3eCreated with Raphaël 2.1.0\x3c\/desc\x3e\x3cdefs style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e\x3cpath stroke-linecap=\x22round\x22 d=\x22M5,0 0,2.5 5,5z\x22 id=\x22raphael-marker-block\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3cmarker id=\x22raphael-marker-endblock33\x22 markerheight=\x223\x22 markerwidth=\x223\x22 orient=\x22auto\x22 refx=\x221.5\x22 refy=\x221.5\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e\x3cuse xlink:href=\x22#raphael-marker-block\x22 transform=\x22rotate(180 1.5 1.5) scale(0.6,0.6)\x22 stroke-width=\x221.6667\x22 fill=\x22black\x22 stroke=\x22none\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3c\/marker\x3e\x3c\/defs\x3e\x3crect x=\x220\x22 y=\x220\x22 width=\x22117.21875\x22 height=\x2236\x22 r=\x2220\x22 rx=\x2220\x22 ry=\x2220\x22 fill=\x22#ffffff\x22 stroke=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22 stroke-width=\x223\x22 class=\x22flowchart\x22 id=\x22st\x22 transform=\x22matrix(1,0,0,1,63.8047,46.207)\x22\/\x3e\x3ctext x=\x2210\x22 y=\x2218\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 id=\x22stt\x22 class=\x22flowchartt\x22 font-size=\x2214px\x22 transform=\x22matrix(1,0,0,1,63.8047,46.207)\x22\x3e\x3ctspan dy=\x225\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e提取一个可用IP\x3c\/tspan\x3e\x3c\/text\x3e\x3cpath fill=\x22#ffffff\x22 stroke=\x22#000000\x22 d=\x22M58.20703125,29.103515625L0,58.20703125L116.4140625,116.4140625L232.828125,58.20703125L116.4140625,0L0,58.20703125\x22 stroke-width=\x223\x22 id=\x22isEnought\x22 class=\x22flowchart\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22 transform=\x22matrix(1,0,0,1,6,138.207)\x22\/\x3e\x3ctext x=\x2263.20703125\x22 y=\x2258.20703125\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 id=\x22isEnoughtt\x22 class=\x22flowchartt\x22 font-size=\x2214px\x22 transform=\x22matrix(1,0,0,1,6,138.207)\x22\x3e\x3ctspan dy=\x225.00390625\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e池中IP数量是否足够\x3c\/tspan\x3e\x3c\/text\x3e\x3crect x=\x220\x22 y=\x220\x22 width=\x22173.21875\x22 height=\x2236\x22 r=\x2220\x22 rx=\x2220\x22 ry=\x2220\x22 fill=\x22#ffffff\x22 stroke=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22 stroke-width=\x223\x22 class=\x22flowchart\x22 id=\x22e\x22 transform=\x22matrix(1,0,0,1,35.8047,350.8281)\x22\/\x3e\x3ctext x=\x2210\x22 y=\x2218\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 id=\x22et\x22 class=\x22flowchartt\x22 font-size=\x2214px\x22 transform=\x22matrix(1,0,0,1,35.8047,350.8281)\x22\x3e\x3ctspan dy=\x225\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e根据策略返回一个可用IP\x3c\/tspan\x3e\x3c\/text\x3e\x3crect x=\x220\x22 y=\x220\x22 width=\x22102.453125\x22 height=\x2236\x22 r=\x220\x22 rx=\x220\x22 ry=\x220\x22 fill=\x22#ffffff\x22 stroke=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22 stroke-width=\x223\x22 class=\x22flowchart\x22 id=\x22fetch\x22 transform=\x22matrix(1,0,0,1,360.0156,178.4141)\x22\/\x3e\x3ctext x=\x2210\x22 y=\x2218\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 id=\x22fetcht\x22 class=\x22flowchartt\x22 font-size=\x2214px\x22 transform=\x22matrix(1,0,0,1,360.0156,178.4141)\x22\x3e\x3ctspan dy=\x225\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e从IP源拉取IP\x3c\/tspan\x3e\x3c\/text\x3e\x3crect x=\x220\x22 y=\x220\x22 width=\x22172.453125\x22 height=\x2236\x22 r=\x220\x22 rx=\x220\x22 ry=\x220\x22 fill=\x22#ffffff\x22 stroke=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22 stroke-width=\x223\x22 class=\x22flowchart\x22 id=\x22valid\x22 transform=\x22matrix(1,0,0,1,548.6563,178.4141)\x22\/\x3e\x3ctext x=\x2210\x22 y=\x2218\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 id=\x22validt\x22 class=\x22flowchartt\x22 font-size=\x2214px\x22 transform=\x22matrix(1,0,0,1,548.6563,178.4141)\x22\x3e\x3ctspan dy=\x225\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3e筛选出有效IP并存入IP池\x3c\/tspan\x3e\x3c\/text\x3e\x3cpath fill=\x22none\x22 stroke=\x22#000000\x22 d=\x22M122.4140625,82.20703125C122.4140625,82.20703125,122.4140625,120.40780210494995,122.4140625,133.70719156763516\x22 stroke-width=\x223\x22 marker-end=\x22url(#raphael-marker-endblock33)\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3cpath fill=\x22none\x22 stroke=\x22#000000\x22 d=\x22M122.4140625,254.62109375C122.4140625,254.62109375,122.4140625,327.3372417401988,122.4140625,346.3329151653728\x22 stroke-width=\x223\x22 marker-end=\x22url(#raphael-marker-endblock33)\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3ctext x=\x22127.4140625\x22 y=\x22264.62109375\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 font-size=\x2214px\x22\x3e\x3ctspan dy=\x225.01171875\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3eyes\x3c\/tspan\x3e\x3c\/text\x3e\x3cpath fill=\x22none\x22 stroke=\x22#000000\x22 d=\x22M238.828125,196.4140625C238.828125,196.4140625,333.5902568548918,196.4140625,355.5225080752134,196.4140625\x22 stroke-width=\x223\x22 marker-end=\x22url(#raphael-marker-endblock33)\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3ctext x=\x22243.828125\x22 y=\x22186.4140625\x22 text-anchor=\x22start\x22 font=\x2210px \x26quot;Arial\x26quot;\x22 stroke=\x22none\x22 fill=\x22#000000\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0); text-anchor: start; font: 14px Arial;\x22 font-size=\x2214px\x22\x3e\x3ctspan dy=\x225.0078125\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\x3eno\x3c\/tspan\x3e\x3c\/text\x3e\x3cpath fill=\x22none\x22 stroke=\x22#000000\x22 d=\x22M462.46875,196.4140625C462.46875,196.4140625,526.4463146440685,196.4140625,544.1588532930855,196.4140625\x22 stroke-width=\x223\x22 marker-end=\x22url(#raphael-marker-endblock33)\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3cpath fill=\x22none\x22 stroke=\x22#000000\x22 d=\x22M721.109375,196.4140625C721.109375,196.4140625,746.109375,196.4140625,746.109375,196.4140625C746.109375,196.4140625,746.109375,113.20703125,746.109375,113.20703125C746.109375,113.20703125,122.4140625,113.20703125,122.4140625,113.20703125C122.4140625,113.20703125,122.4140625,126.51100254058838,122.4140625,133.7086588833481\x22 stroke-width=\x223\x22 marker-end=\x22url(#raphael-marker-endblock33)\x22 style=\x22-webkit-tap-highlight-color: rgba(0, 0, 0, 0);\x22\/\x3e\x3c\/svg\x3e\x3c\/div\x3e\x3c\/div\x3e\n\x3cp\x3e具体实现代码其实和上面的爬虫差不多，无非就是爬岗位变成了爬IP而已，具体\x3ca href=\x22https:\/\/github.com\/Weiyu-Chen\/lagou-spider-node\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e实现源码\x3c\/a\x3e在这，就不在这写了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader14\x22\x3e数据可视化分析\x3c\/h1\x3e\n\x3cp\x3e我们最终折腾爬虫，无非就是想要看爬到的数据到底说明了什么。\x3cbr\x3e成功爬取了拉钩网上多个招聘岗位的具体信息后，数据可视化并得出分析结果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7dEE?w=758\x26amp;h=470\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7dEE?w=758\x26amp;h=470\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e从整体看，北上广深杭这五个城市前端工程师招聘岗位，北京是遥遥领先，是深圳的两倍，是广州的三倍，其次到上海，深圳，杭州，广州居末。\x3c\/p\x3e\n\x3cp\x3e从需求量大概可以看出，整体互联网产业发达程度是 北 \x26gt; 上 \x26gt; 深 \x26gt; 杭 \x26gt; 广\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7dEL?w=759\x26amp;h=474\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7dEL?w=759\x26amp;h=474\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e由平均工资曲线图可以看到，每隔2K算一档的话，北京一档，上海一档，杭州深圳一档，空一档，广州吊车尾，杭州竟然比深圳高了300，这就代表着深圳虽然招聘需求比杭州大，但两者薪酬待遇其实差不多。\x3c\/p\x3e\n\x3cp\x3e从不同薪酬的招聘数量也能看出一些很大的区别，招聘提供薪资水平中，普遍数量最多的是10k-20k这个水平，但，北京牛逼，招聘岗位60%以上都是20K以上的。我们具体来看看，各个城市对高端人才（提供薪酬20k以上）的招聘比例，那就可以看出明显区别了：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e北京：招聘的薪资水平是\x2220k以上\x22,大概是招聘总数的59.7%\x3c\/li\x3e\n\x3cli\x3e上海：招聘的薪资水平是\x2220k以上\x22,大概是招聘总数的41.3%\x3c\/li\x3e\n\x3cli\x3e深圳：招聘的薪资水平是\x2220k以上\x22,大概是招聘总数的29.2%\x3c\/li\x3e\n\x3cli\x3e杭州：招聘的薪资水平是\x2220k以上\x22,大概是招聘总数的30.4%，和深圳相差不大\x3c\/li\x3e\n\x3cli\x3e广州：招聘的薪资水平是\x2220k以上\x22,大概是招聘总数的……10.4%。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7dEU?w=749\x26amp;h=500\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7dEU?w=749\x26amp;h=500\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e基本可以看到一个明显的趋势，公司规模越大，能提供的薪酬越高，不差钱。\x3cbr\x3e另外，从不同规模的公司的前端招聘数量来看，北京又一枝独秀，大公司招聘需求很高。\x3c\/p\x3e\n\x3cp\x3e但从全国来看，不同规模的公司（除了15人以下的）招聘数量基本在同一水平，基本说明：大公司少，但是每个公司招聘的人多；小公司多，但是每个公司招聘的人少。\x3cdel\x3e好像这是句废话。\x3c\/del\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7dFr?w=764\x26amp;h=515\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7dFr?w=764\x26amp;h=515\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e从图上看，工作经历在1-5年的现在需求最旺盛，并且理所当然地，工作资历越高，薪资越高。\x3cbr\x3e其中3-5年的最吃香，广州有点奇怪，1-3年的最吃香？综合上面的多项数据，感觉像是1-3年工资比3-5年低所以广州互联网公司多招1-3年\x3c\/p\x3e\n\x3cp\x3e当然，这里存在这一个幸存者偏差，拉勾上大部分的都是社招性质的招聘，而应届生和1年经验的大部分都跑校招去了吧，所以数量低也不出奇。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7dF2?w=763\x26amp;h=475\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7dF2?w=763\x26amp;h=475\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e移动互联网占据了大半壁江山，剩下之中，金融，电子商务，企业服务，数据服务在同一层次。另外，物联网，智能硬件各有一招聘岗位，薪酬都是5K...嗯虽说node现在也可以做物联网了(还别说，我还真的用node搞过硬件串口通信Orz)，但是终究不是主流技术，数据展示表明，前端基本与硬件绝缘。\x3c\/p\x3e\n\x3cp\x3e薪酬待遇倒是都在同一水平上，“大数据”工资倒是一枝独秀，但是数据量太少，参考价值不大。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e 总结：北京钱多机会多当之无愧第一档；上海稍逊一筹；杭州深圳又低一筹；广州真的是差了两个身位。 而对于前端来说，北京 移动互联网 大公司，钱多！坑多！速来！ \x3c\/strong\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>node.js 爬取招聘信息分析各职业钱途（爬虫+动态IP代理+数据可视化分析）</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014128148">https://segmentfault.com/a/1190000014128148</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/pz0oy2gxwu/" target="_blank">https://alili.tech/archive/pz0oy2gxwu/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>