<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="javascript 后缀数组"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>javascript 后缀数组 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/qc6es9sosmm/",
				"appid": "1613049289050283", 
				"title": "javascript 后缀数组 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-16T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/byjqaynyr9h/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/1ikf3jh0hjn/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&text=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&text=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&title=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&is_video=false&description=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&title=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&title=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&title=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fqc6es9sosmm%2f&title=javascript%20%e5%90%8e%e7%bc%80%e6%95%b0%e7%bb%84"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">javascript 后缀数组</h1><div class="meta"><div class="postdate"><time datetime="2018-12-16" itemprop="datePublished">2018-12-16</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e后缀数组是处理字符串的利器, 它本身涉及许多辅助概念.\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e基本概念\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1.1子串\x3c\/h3\x3e\n\x3cp\x3e表示字符串的某一小段, 如awbcdewg拥有 awbc， awbcd， awbcde等子串。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.2后缀\x3c\/h3\x3e\n\x3cp\x3e后缀是字符串从某个位置起到达末尾的一种特殊子串。后缀可以等于自身，相等于从一个字符开始. 假令我们设计一个取后缀的函数, 它可以这样实现:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function suffix(str, i ){\n    if(i \x3e= 0 || i \x3c= str.length-1){\n       return str.slice(i)\n    }\n    throw \x26quot;i越界了\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esuffix\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(str, i )\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(i \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || i \x26lt;= str.length\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e){\n       \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.slice(i)\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22i越界了\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e后缀必须包含最后一个字符.\x3c\/p\x3e\n\x3cp\x3e字符串rubylouvre，它的后缀就包含rubylouvre、ubylouvre、bylouvre、 ylouvre、louvre、ouvre，uvre、vre、 re、 e 它们都必须包含最后一个字符e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e1.3 字典排序\x3c\/h3\x3e\n\x3cp\x3e字符串默认的比较算法, \x22aa\x22 \x26lt; \x22ab\x22 返回true而不是返回false就是依靠这个标准进行. \x3c\/p\x3e\n\x3cp\x3e首先从左到右, 各自取得第一个字符, \x22a\x22与\x22a\x22, 如果相同, 则比较各自的第二个字符. 否则, 比较其charCode值.  如i 和 b比, i的charCode为105, b的charCode为98, b肯定比i小, 那么不用再比较.\x3c\/p\x3e\n\x3cp\x3e如果其中之一是另一个的前缀，则短的那个排前面：aaa \x26lt; aaab\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e1.4后缀数组\x3c\/h3\x3e\n\x3cp\x3e后端数组就是某个字符串的所有后缀按照字典顺序进行排序后得到的位置数组. 如字符串ADCEFD, 当i从0到5递增时,我们通过上面的suffix函数得到其所有 后缀.\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22center\x22\x3eindex\x3c\/th\x3e\n\x3cth\x3eA\x3c\/th\x3e\n\x3cth\x3eD\x3c\/th\x3e\n\x3cth\x3eC\x3c\/th\x3e\n\x3cth\x3eE\x3c\/th\x3e\n\x3cth\x3eF\x3c\/th\x3e\n\x3cth\x3eD\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e0\x3c\/td\x3e\n\x3ctd\x3eA\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3ctd\x3eC\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e1\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3ctd\x3eC\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e2\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eC\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e3\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e4\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e5\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e按字典排序后\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22center\x22\x3eindex\x3c\/th\x3e\n\x3cth\x3eA\x3c\/th\x3e\n\x3cth\x3eD\x3c\/th\x3e\n\x3cth\x3eC\x3c\/th\x3e\n\x3cth\x3eE\x3c\/th\x3e\n\x3cth\x3eF\x3c\/th\x3e\n\x3cth\x3eD\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e0\x3c\/td\x3e\n\x3ctd\x3eA\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3ctd\x3eC\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e2\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eC\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e5\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e1\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3ctd\x3eC\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e3\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eE\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22center\x22\x3e4\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3e\x26nbsp;\x3c\/td\x3e\n\x3ctd\x3eF\x3c\/td\x3e\n\x3ctd\x3eD\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e这个[0,2,5,1,3,4]就是字符串的后缀数组.\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ by 司徒正美\nvar str = \x26quot;ADCEFD\x26quot;, arr = []\nfunction spawnSuffix(str, arr){\n     if(str){\n        arr.push(str)\n        spawnSuffix(str.slice(1), arr)\n     }\n }\nspawnSuffix(str, arr)\nconsole.log(arr)\n\/\/[\x26quot;ADCEFD\x26quot;, \x26quot;DCEFD\x26quot;, \x26quot;CEFD\x26quot;, \x26quot;EFD\x26quot;, \x26quot;FD\x26quot;, \x26quot;D\x26quot;]\n\/\/ 对abadefg的所有后缀子串数组进行加工\nvar sa = arr.map(function(str, i){\n  return {el: str, index: i}\n}).sort(function(a, b){\n return a.el \x3e b.el\n}).map(function(obj){\n return obj.index  \/\/可以加1，也可以不加，看你的习惯\n})\nconsole.log(sa)\/\/ [0, 2, 5, 1, 3, 4]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e\/\/ by 司徒正美\nvar str = \x3cspan class=\x22hljs-string\x22\x3e\x22ADCEFD\x22\x3c\/span\x3e, arr = []\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3espawnSuffix\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(str, arr)\x3c\/span\x3e{\x3c\/span\x3e\n     \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(str){\n        arr.push(str)\n        spawnSuffix(str.slice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e), arr)\n     }\n }\nspawnSuffix(str, arr)\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(arr)\n\/\/[\x3cspan class=\x22hljs-string\x22\x3e\x22ADCEFD\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22DCEFD\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22CEFD\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22EFD\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22FD\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22D\x22\x3c\/span\x3e]\n\/\/ 对abadefg的所有后缀子串数组进行加工\nvar \x3cspan class=\x22hljs-keyword\x22\x3esa\x3c\/span\x3e = arr.\x3cspan class=\x22hljs-keyword\x22\x3emap\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(str, i)\x3c\/span\x3e{\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-keyword\x22\x3ee\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3el:\x3c\/span\x3e str, \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e: i}\n}).\x3cspan class=\x22hljs-keyword\x22\x3esort\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(a, b)\x3c\/span\x3e{\x3c\/span\x3e\n \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ea\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eel\x3c\/span\x3e \x26gt; \x3cspan class=\x22hljs-keyword\x22\x3eb\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3eel\x3c\/span\x3e\n}).\x3cspan class=\x22hljs-keyword\x22\x3emap\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(obj)\x3c\/span\x3e{\x3c\/span\x3e\n \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj.\x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e  \/\/可以加\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e，也可以不加，看你的习惯\n})\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3esa\x3c\/span\x3e)\/\/ [\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e倍增算法\x3c\/h2\x3e\n\x3cp\x3e上面我们通过非常朴素的方式,逐个取得它的所有后缀,然后通过语言本身的sort方法进行字典排序.这个sort在不同的宿主环境中,内部采取的排序算法都不一样,就是一个黑箱.\x3c\/p\x3e\n\x3cp\x3e整个过程大家可以参考罗穗骞的论文，但由于语言的差异，我看不  懂他在写什么，直接对着它的那张图搞出来了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012999757?w=576\x26amp;h=500\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012999757?w=576\x26amp;h=500\x22 alt=\x22image_1c4je3cp5elqktssnf6h914pt9.png-77.4kB\x22 title=\x22image_1c4je3cp5elqktssnf6h914pt9.png-77.4kB\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ by 司徒正美\nfunction getSuffix(str) {\n    var len = str.length, \n        max = str.charCodeAt(0), \n        min = max,\n        xbuckets = [],\n        sa = [],\n        rank = [];\n    \/\/ 将用户传入的字符串全部转换为charCode值，并求出最大最小值\n    for (let i = 0; i \x3c len; i\x2b\x2b) {\n        let c = str.charCodeAt(i);\n        rank[i] = c;\n        max = Math.max(max, c);\n        min = Math.min(min, c);\n    }\n    \/\/我们要对rank进行计数排序，但是它们太大，都是90－128左右，\n    \/\/ 这样我们要创建上百个桶\n    \/\/我们通过减去最小值，来缩小规模, 现在只需2－10个桶就够了。\n\n    \/\/这些新得到的数字其实在原论文中构成一个叫 x 的数组\n    \/\/但是我们并没有这样用，而是让它作为rank对象数组的一个属性\n    rank.forEach(function(el, i){\n        rank[i] = {x: el - min \x2b 1 };\n    });\n  \n    var hasDuplicate = true, k = 0;\n    while(hasDuplicate){\n        \/\/重置数据\n        hasDuplicate = false;\n        xbuckets.length = 0;\n        \/\/k倍增，隔空拼凑y数组\n        \/\/y作为基数排序的第二个关键字\n        var d = 1 \x3c\x3c k; k \x2b\x2b;\n        rank.forEach(function(el, i){\n            el.y = rank[i\x2b d] ? rank[i\x2b d].x: 0;\n        });\n        \/\/根据关键字x，进行基数排序\n        rank.forEach(function(el){\n            var index = el.x;\n            if(!xbuckets[index]){\n                xbuckets[index] = [el];\n            }else{\n                xbuckets[index].push(el);\n            }\n        });\n        \/\/对每个桶内xbucket根据y进行排序\n        var newIndex = 1, last = {};\n        xbuckets.forEach(function(bucket){\n            if(bucket){\n                let cache = {};\n                bucket.sort(function(a, b){\n                    return a.y - b.y;\n                }).forEach(function(el ){\n                    \/\/重写x\n                    if(el.y !== last.y){\n                        el.x = newIndex\x2b\x2b;\n                        cache[el.y] = el.x;\n                    }else{\n                        hasDuplicate = true;\n                        el.x = cache[el.y];\n                    }\n                    last = el;\n                });\n            }\n        });\n    }\n    \/\/rank是从1开始的，因此这里面要减1\n    rank = rank.map(function(el, i ){\n        sa[el.x - 1] = i;\n        return el.x;\n    });\n    console.log(\x26quot;rank数组\x26quot;, rank);\n    console.log(\x26quot;后缀数组\x26quot;, sa);\n    return sa;\n}\n\nvar ret = getSuffix(\x26quot;aabaaaab\x26quot;); \n\/\/ret:  3, 4, 5, 0, 6, 1, 7, 2 \n\/*\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs openscad\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ by 司徒正美\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetSuffix\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(str)\x3c\/span\x3e {\x3c\/span\x3e\n    var len = \x3cspan class=\x22hljs-built_in\x22\x3estr\x3c\/span\x3e.length, \n        \x3cspan class=\x22hljs-built_in\x22\x3emax\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3estr\x3c\/span\x3e.charCodeAt(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e), \n        \x3cspan class=\x22hljs-built_in\x22\x3emin\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3emax\x3c\/span\x3e,\n        xbuckets = [],\n        sa = [],\n        rank = [];\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将用户传入的字符串全部转换为charCode值，并求出最大最小值\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; len; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-built_in\x22\x3elet\x3c\/span\x3e c = \x3cspan class=\x22hljs-built_in\x22\x3estr\x3c\/span\x3e.charCodeAt(i);\n        rank[i] = c;\n        \x3cspan class=\x22hljs-built_in\x22\x3emax\x3c\/span\x3e = Math.\x3cspan class=\x22hljs-built_in\x22\x3emax\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3emax\x3c\/span\x3e, c);\n        \x3cspan class=\x22hljs-built_in\x22\x3emin\x3c\/span\x3e = Math.\x3cspan class=\x22hljs-built_in\x22\x3emin\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3emin\x3c\/span\x3e, c);\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/我们要对rank进行计数排序，但是它们太大，都是90－128左右，\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这样我们要创建上百个桶\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/我们通过减去最小值，来缩小规模, 现在只需2－10个桶就够了。\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/这些新得到的数字其实在原论文中构成一个叫 x 的数组\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/但是我们并没有这样用，而是让它作为rank对象数组的一个属性\x3c\/span\x3e\n    rank.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el, i)\x3c\/span\x3e{\x3c\/span\x3e\n        rank[i] = {x: el - \x3cspan class=\x22hljs-built_in\x22\x3emin\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e };\n    });\n  \n    var hasDuplicate = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, k = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    while(hasDuplicate){\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/重置数据\x3c\/span\x3e\n        hasDuplicate = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        xbuckets.length = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/k倍增，隔空拼凑y数组\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/y作为基数排序的第二个关键字\x3c\/span\x3e\n        var d = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt;\x26lt; k; k \x2b\x2b;\n        rank.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el, i)\x3c\/span\x3e{\x3c\/span\x3e\n            el.y = rank[i\x2b d] ? rank[i\x2b d].x: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        });\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/根据关键字x，进行基数排序\x3c\/span\x3e\n        rank.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el)\x3c\/span\x3e{\x3c\/span\x3e\n            var index = el.x;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!xbuckets[index]){\n                xbuckets[index] = [el];\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                xbuckets[index].push(el);\n            }\n        });\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/对每个桶内xbucket根据y进行排序\x3c\/span\x3e\n        var newIndex = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, last = {};\n        xbuckets.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(bucket)\x3c\/span\x3e{\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(bucket){\n                \x3cspan class=\x22hljs-built_in\x22\x3elet\x3c\/span\x3e cache = {};\n                bucket.sort(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(a, b)\x3c\/span\x3e{\x3c\/span\x3e\n                    return a.y - b.y;\n                }).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el )\x3c\/span\x3e{\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/重写x\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(el.y !== last.y){\n                        el.x = newIndex\x2b\x2b;\n                        cache[el.y] = el.x;\n                    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                        hasDuplicate = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                        el.x = cache[el.y];\n                    }\n                    last = el;\n                });\n            }\n        });\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/rank是从1开始的，因此这里面要减1\x3c\/span\x3e\n    rank = rank.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el, i )\x3c\/span\x3e{\x3c\/span\x3e\n        sa[el.x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = i;\n        return el.x;\n    });\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22rank数组\x22\x3c\/span\x3e, rank);\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22后缀数组\x22\x3c\/span\x3e, sa);\n    return sa;\n}\n\nvar ret = getSuffix(\x3cspan class=\x22hljs-string\x22\x3e\x22aabaaaab\x22\x3c\/span\x3e); \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ret:  3, 4, 5, 0, 6, 1, 7, 2 \x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但这依赖于原生的sort, 我们可以将sort改成计数排序。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ by 司徒正美\nfunction getSuffix(str) {\n    var len = str.length, \n        max = str.charCodeAt(0), \n        min = max,\n        xbuckets = [],\n        sa = [],\n        rank = [];\n    \/\/ 字符串转charCode\n    for (let i = 0; i \x3c len; i\x2b\x2b) {\n        let c = str.charCodeAt(i);\n        rank[i] = c;\n        max = Math.max(max, c);\n        min = Math.min(min, c);\n    }\n    \/\/压缩charCode值\n    rank.forEach(function(el, i){\n        rank[i] = {x: el - min \x2b 1 };\n    });\n    var hasDuplicate = true, k = 0;\n    while(hasDuplicate){\n        \/\/重置数据\n        hasDuplicate = false;\n        xbuckets.length = 0;\n        \/\/倍增，目的是求关键字y\n        var d = 1 \x3c\x3c k; k \x2b\x2b;\n\n        rank.forEach(function(el, i){\n            \/\/根据关键字x，进行基数排序，并同时计算关键字y\n            el.y = rank[i\x2b d] ? rank[i\x2b d].x: 0;\n           \n            var index = el.x;\n            if(!xbuckets[index]){\n                xbuckets[index] = [el];\n            }else{\n                xbuckets[index].push(el);\n            }\n        });\n\n        var newIndex = 1, last = {};\n        xbuckets.forEach(function(bucket){\n            if(bucket){\n                \/\/使用计数排序对每个桶再进行排序\n                var cache = {};\n                var yxbuckets = [];\n                bucket.forEach(function(el){\n                    var index = el.y;\n                    if(!yxbuckets[index]){\n                        yxbuckets[index] = [el];\n                    }else{\n                        yxbuckets[index].push(el);\n                    }\n                });\n                var j = 0;\n                yxbuckets.forEach(function(ybucket){\n                    if(ybucket){\n                        ybucket.forEach(function(el){\n                            if(el.y !== last.y){\n                                el.x = newIndex\x2b\x2b;\n                                cache[el.y] = el.x;\n                            }else{\n                                hasDuplicate = true;\n                                el.x = cache[el.y];\n                            }\n                            bucket[j\x2b\x2b] = el; \/\/这里可以不要\n                            last = el;\n                        });\n                    }\n                });\n            }\n        });\n     \n    }\n    \/\/rank是从1开始的，因此这里面要减1\n    rank = rank.map(function(el, i ){\n        sa[el.x - 1] = i;\n        return el.x;\n    });\n    console.log(\x26quot;rank数组\x26quot;, rank);\n    console.log(\x26quot;后缀数组\x26quot;, sa);\n    return sa;\n}\nvar a = getSuffix(\x26quot;aabaaaab\x26quot;); \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs zephir\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ by 司徒正美\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetSuffix\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(str)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e len = str.length, \n        max = str.charCodeAt(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e), \n        min = max,\n        xbuckets = [],\n        sa = [],\n        rank = [];\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 字符串转charCode\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; len; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e c = str.charCodeAt(i);\n        rank[i] = c;\n        max = Math.max(max, c);\n        min = Math.min(min, c);\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/压缩charCode值\x3c\/span\x3e\n    rank.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el, i)\x3c\/span\x3e\x3c\/span\x3e{\n        rank[i] = {x: el - min \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e };\n    });\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hasDuplicate = \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e, k = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(hasDuplicate){\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/重置数据\x3c\/span\x3e\n        hasDuplicate = \x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e;\n        xbuckets.length = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/倍增，目的是求关键字y\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e d = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt;\x26lt; k; k \x2b\x2b;\n\n        rank.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el, i)\x3c\/span\x3e\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/根据关键字x，进行基数排序，并同时计算关键字y\x3c\/span\x3e\n            el.y = rank[i\x2b d] ? rank[i\x2b d].x: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n           \n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = el.x;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!xbuckets[index]){\n                xbuckets[index] = [el];\n            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                xbuckets[index].push(el);\n            }\n        });\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e newIndex = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, last = {};\n        xbuckets.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(bucket)\x3c\/span\x3e\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(bucket){\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/使用计数排序对每个桶再进行排序\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cache = {};\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e yxbuckets = [];\n                bucket.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el)\x3c\/span\x3e\x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e index = el.y;\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!yxbuckets[index]){\n                        yxbuckets[index] = [el];\n                    }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                        yxbuckets[index].push(el);\n                    }\n                });\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n                yxbuckets.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(ybucket)\x3c\/span\x3e\x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(ybucket){\n                        ybucket.\x3cspan class=\x22hljs-keyword\x22\x3eforEach\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el)\x3c\/span\x3e\x3c\/span\x3e{\n                            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(el.y !== last.y){\n                                el.x = newIndex\x2b\x2b;\n                                cache[el.y] = el.x;\n                            }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n                                hasDuplicate = \x3cspan class=\x22hljs-keyword\x22\x3etrue\x3c\/span\x3e;\n                                el.x = cache[el.y];\n                            }\n                            bucket[j\x2b\x2b] = el; \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里可以不要\x3c\/span\x3e\n                            last = el;\n                        });\n                    }\n                });\n            }\n        });\n     \n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/rank是从1开始的，因此这里面要减1\x3c\/span\x3e\n    rank = rank.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(el, i )\x3c\/span\x3e\x3c\/span\x3e{\n        sa[el.x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] = i;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e el.x;\n    });\n    console.log(\x3cspan class=\x22hljs-string\x22\x3e\x22rank数组\x22\x3c\/span\x3e, rank);\n    console.log(\x3cspan class=\x22hljs-string\x22\x3e\x22后缀数组\x22\x3c\/span\x3e, sa);\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e sa;\n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = getSuffix(\x3cspan class=\x22hljs-string\x22\x3e\x22aabaaaab\x22\x3c\/span\x3e); \x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eheight数组\x3c\/h2\x3e\n\x3cp\x3e那么如何计算height？我们定义h[i]=height[rank[i]]，也就是Suffix[i]和它前一名的最长公共前缀，那么很明显有h[i]\x26gt;=h[i-1]-1。因为h[i-1]是Suffix[i-1]和它前一名的最长公共前缀，设为Suffix[k]，那么Suffix[i]和Suffix[k\x2b1] 的最长公共前缀为h[i-1]-1，所以h[i]至少是h[i-1]-1。所以我们可以按照求h[1],h[2],h[3] 顺序计算所有的height。代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/by司徒正美\nfunction getHeight(str, sa){\n    var n = str.length, k = 0, rank = [], height = []\n    for(var i = 1;i\x3c=n;i\x2b\x2b) {\n        rank[sa[i]]=i;\n    }\n    for(var i=0;i\x3cn;i\x2b\x2b){\n         if(k) k--;\n         var j=sa[rank[i]-1];\n         while(i\x2bk \x3c n \x26amp;\x26amp; j\x2bk\x3cn \x26amp;\x26amp;rank[i\x2bk]==rank[j\x2bk]) {\n            k\x2b\x2b;\n         }\n         height[rank[i]]=k;\n    }\n    return height\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\/\/by司徒正美\nfunction getHeight(str, sa){\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e n = str.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e, k = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3erank\x3c\/span\x3e = [], \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = []\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;i\x26lt;=n;i\x2b\x2b) {\n        \x3cspan class=\x22hljs-built_in\x22\x3erank\x3c\/span\x3e[sa[i]]=i;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;i\x26lt;n;i\x2b\x2b){\n         \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(k) k--;\n         \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e j=sa[\x3cspan class=\x22hljs-built_in\x22\x3erank\x3c\/span\x3e[i]-\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n         \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(i\x2bk \x26lt; n \x26amp;\x26amp; j\x2bk\x26lt;n \x26amp;\x26amp;\x3cspan class=\x22hljs-built_in\x22\x3erank\x3c\/span\x3e[i\x2bk]==\x3cspan class=\x22hljs-built_in\x22\x3erank\x3c\/span\x3e[j\x2bk]) {\n            k\x2b\x2b;\n         }\n         \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e[\x3cspan class=\x22hljs-built_in\x22\x3erank\x3c\/span\x3e[i]]=k;\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3eDC3算法\x3c\/h2\x3e\n\x3cp\x3eDC3算法(Difference Cover mod 3)是J. Kärkkäinen和P. Sanders在2003年发表的论文 \x22Simple Linear Work Suffix Array Construction\x22中描述的线性时间内构造后缀数组的算法。详见下文\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/spencer-carroll.com\/the-dc3-algorithm-made-simple\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/spencer-carroll.com\/th...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e太难了，略过。 此外还有其他构造算法，如SA-IS：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/28331415\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/zhuanlan.zhihu.com\/p\/...\x3c\/a\x3e \x3c\/p\x3e\n\x3cp\x3e我应该是搞错学习顺序了，应该先学hash树再学trie树再学压缩树再学后缀树再学后缀自动机。即便我头脑这么好使，跨度这么大，还是碰得一脸灰的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e参考链接\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/sojisub__0173\/article\/details\/50286319\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.csdn.net\/sojisub_...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/yxuanwkeith\/article\/details\/50636898\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.csdn.net\/yxuanwke...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/wenku.baidu.com\/view\/f3f9a1ba33d4b14e852468dc.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/wenku.baidu.com\/view\/...\x3c\/a\x3e (PPT)\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>javascript 后缀数组</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012999754">https://segmentfault.com/a/1190000012999754</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/qc6es9sosmm/" target="_blank">https://alili.tech/archive/qc6es9sosmm/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>