<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="美团小程序框架mpvue入门教程"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>美团小程序框架mpvue入门教程 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/rjyetjw0l4n/",
				"appid": "1613049289050283", 
				"title": "美团小程序框架mpvue入门教程 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-06T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/y1dytvua0d8/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/kjb9poqzt1/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&text=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&text=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&title=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&is_video=false&description=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&title=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&title=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&title=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2frjyetjw0l4n%2f&title=%e7%be%8e%e5%9b%a2%e5%b0%8f%e7%a8%8b%e5%ba%8f%e6%a1%86%e6%9e%b6mpvue%e5%85%a5%e9%97%a8%e6%95%99%e7%a8%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">美团小程序框架mpvue入门教程</h1><div class="meta"><div class="postdate"><time datetime="2018-12-06" itemprop="datePublished">2018-12-06</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e美团小程序框架mpvue入门教程\x3c\/h3\x3e\n\x3cp\x3e自打写了 \x3ca href=\x22https:\/\/github.com\/noahlam\/articles\/blob\/master\/%E7%BE%8E%E5%9B%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6mpvue%E8%B9%B2%E5%9D%91%E6%8C%87%E5%8D%97.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e美团小程序框架mpvue蹲坑指南\x3c\/a\x3e,\x3cbr\x3e一发不可收拾，今天趁周末空闲，来写个mpvue(没朋友)的简单入门教程，本教程只针对新手，老鸟勿喷。\x3c\/p\x3e\n\x3cp\x3e另外，我还专门为本文做了一个简单的项目，如果懒得从头开始搭项目的童鞋，可以直接去我的\x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/noahlam\/mpvue-tutorials\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e上克隆到本地，\x3cbr\x3e安装一下依赖，即可直接在此基础在开发，不需要做任何配置。如果你觉得该项目对有帮助，\x3cbr\x3e请顺便给我Star,你们的支持是我最大的动力，谢谢!\x3c\/p\x3e\n\x3cp\x3e好了，我们进入主题，首先，请允许引用一下美团官方对mpvue的介绍\x3c\/p\x3e\n\x3cblockquote\x3empvue是一个使用 Vue.js 开发小程序的前端框架。框架基于 Vue.js 核心，mpvue 修改了 Vue.js\x3cbr\x3e的 runtime 和 compiler 实现，使其可以运行在小程序环境中，从而为小程序开发引入了整套 Vue.js 开发体验。\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e主要特性\x3c\/h3\x3e\n\x3cblockquote\x3e使用 mpvue 开发小程序，你将在小程序技术体系的基础上获取到这样一些能力：\x3c\/blockquote\x3e\n\x3col\x3e\n\x3cli\x3e彻底的组件化开发能力：提高代码复用性\x3c\/li\x3e\n\x3cli\x3e完整的 Vue.js 开发体验\x3c\/li\x3e\n\x3cli\x3e方便的 Vuex 数据管理方案：方便构建复杂应用\x3c\/li\x3e\n\x3cli\x3e快捷的 webpack 构建机制：自定义构建策略、开发阶段 hotReload\x3c\/li\x3e\n\x3cli\x3e支持使用 npm 外部依赖\x3c\/li\x3e\n\x3cli\x3e使用 Vue.js 命令行工具 vue-cli 快速初始化项目\x3c\/li\x3e\n\x3cli\x3eH5 代码转换编译成小程序目标代码的能力\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e开始\x3c\/h3\x3e\n\x3cp\x3e学习最好的方式就动手，我们就徒手撸一个demo项目出来跑一跑，看看到底有没有官方说的那么好。\x3cbr\x3e如果你有过vue的开发经历，相信你会对这个过程非常熟悉，甚至你都不需要安装其他工具，\x3cbr\x3e直接用vue-cli创建项目，如果你一起没安装过vue-cli，那么你要先运行一下命令\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm install --g vue-cli\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e--g vue-cli\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e安装完vue-cli以后，我们就可以运行一下命令，来自动构建一个项目（期间会询问你是否使用一些工具\/插件，\x3cbr\x3e请根据自己的实际情况选择y或n,对于不懂得该选y还是n的，统统选n）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22vue init mpvue\/mpvue-quickstart test-wxapp\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs bash\x22\x3e\x3ccode\x3evue init mpvue\/mpvue-quickstart \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e-wxapp\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后 进入我们创建的项目，并安装依赖\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd test-wxapp\nnpm i\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ecd\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etest\x3c\/span\x3e-wxapp\nnpm \x3cspan class=\x22hljs-built_in\x22\x3ei\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最后，在运行一下我们的开发服务\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm run dev\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dockerfile\x22\x3e\x3ccode\x3enpm \x3cspan class=\x22hljs-keyword\x22\x3erun\x3c\/span\x3e\x3cspan class=\x22bash\x22\x3e dev\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e项目就跑起来了，这个时候，我们打开微信开发者工具，选择小程序，然后新建一个，项目目录填\x3cbr\x3e我们项目目录下的\x3ccode\x3edist\x3c\/code\x3e目录 \x3ccode\x3etest-wxapp\/dist\x3c\/code\x3e,就可以看到效果了\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e进阶\x3c\/h3\x3e\n\x3cp\x3e到此为止，一个基本的项目就完成了，但是，本文的目的不是让你学会搭一个空项目的，空项目的话，我觉得官方教程做的已经够好了。\x3cbr\x3e接下来，我们来删掉几个示例文件，然后一步步添加页面.\x3cbr\x3e首先，我们看一下项目的配置文件 \x3ccode\x3e\/src\/main.js\x3c\/code\x3e 里面的初始内容如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport App from \x27.\/App\x27\n\nVue.config.productionTip = false\nApp.mpType = \x27app\x27\n\nconst app = new Vue(App)\napp.$mount()\n\nexport default {\n  \/\/ 这个字段走 app.json\n  config: {\n    \/\/ 页面前带有 ^ 符号的，会被编译成首页，其他页面可以选填，我们会自动把 webpack entry 里面的入口页面加进去\n    pages: [\x27pages\/logs\/main\x27, \x27^pages\/index\/main\x27],\n    window: {\n      backgroundTextStyle: \x27light\x27,\n      navigationBarBackgroundColor: \x27#fff\x27,\n      navigationBarTitleText: \x27WeChat\x27,\n      navigationBarTextStyle: \x27black\x27\n    }\n  }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e App \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/App\x27\x3c\/span\x3e\n\nVue.config.productionTip = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\nApp.mpType = \x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e app = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Vue(App)\napp.$mount()\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这个字段走 app.json\x3c\/span\x3e\n  config: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 页面前带有 ^ 符号的，会被编译成首页，其他页面可以选填，我们会自动把 webpack entry 里面的入口页面加进去\x3c\/span\x3e\n    pages: [\x3cspan class=\x22hljs-string\x22\x3e\x27pages\/logs\/main\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27^pages\/index\/main\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e: {\n      backgroundTextStyle: \x3cspan class=\x22hljs-string\x22\x3e\x27light\x27\x3c\/span\x3e,\n      navigationBarBackgroundColor: \x3cspan class=\x22hljs-string\x22\x3e\x27#fff\x27\x3c\/span\x3e,\n      navigationBarTitleText: \x3cspan class=\x22hljs-string\x22\x3e\x27WeChat\x27\x3c\/span\x3e,\n      navigationBarTextStyle: \x3cspan class=\x22hljs-string\x22\x3e\x27black\x27\x3c\/span\x3e\n    }\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里的 \x3ccode\x3econfig\x3c\/code\x3e 字段下面的内容，就是整个小程序的全局配置了，其中\x3ccode\x3epages\x3c\/code\x3e是页面的路由，\x3ccode\x3ewindow\x3c\/code\x3e则是页面的一些配置（大部分都是顶部栏的配置）\x3cbr\x3e，这些配置，最终都会被打包到原生小程序的\x3ccode\x3eapp.json\x3c\/code\x3e，对这些配置不了解的，建议看一下微信方法的小程序文档，这里不做赘述。\x3c\/p\x3e\n\x3cp\x3e我们先把\x3ccode\x3e\/src\/pages\x3c\/code\x3e 下面的\x3ccode\x3ecounter\x3c\/code\x3e和\x3ccode\x3elogs\x3c\/code\x3e两个文件夹删掉，只保留一个\x3ccode\x3eindex\x3c\/code\x3e ,顺便把 \x3ccode\x3e\/src\/components\x3c\/code\x3e 文件夹下面的文件也全删掉,\x3cbr\x3e然后把\x3ccode\x3e\/src\/main.js\x3c\/code\x3e 里面的 \x3ccode\x3econfig.pages\x3c\/code\x3e里面多余的路由也删掉，只保留一条\x3ccode\x3e[\x27^pages\/index\/main\x27]\x3c\/code\x3e,这样目前就只有个index页面，\x3c\/p\x3e\n\x3cp\x3e然后我们打开\x3ccode\x3e\/src\/pages\/index\/index.vue\x3c\/code\x3e 我们把里面多余的代码删掉，只保留一个基础骨架\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv class=\x26quot;container\x26quot;\x3e\n       我是首页\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\n\nexport default {\n  data () {\n    return { }\n  },\n  methods: {},\n\n  created () {}\n}\n\x3c\/script\x3e\n\n\x3cstyle scoped\x3e\n\n\x3c\/style\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dust\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22container\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n       我是首页\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{\n  data () {\n    return { }\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22undefined\x22\x3e\n  },\n  methods: \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22undefined\x22\x3e,\n\n  created () \x3c\/span\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e{}\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22undefined\x22\x3e\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3escoped\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3etip \x3ccode\x3e\/src\/utils\/index.js\x3c\/code\x3e 是一个公共函数库，里面只有一个简单的格式化日期函数，不要也可以删掉\x3c\/blockquote\x3e\n\x3cp\x3e到目前为止，一个干净的空项目就算是ok了，接下来我们来对微信原生的一些反人类的东西来做一下优化。\x3c\/p\x3e\n\x3cp\x3e一、先用mptoast组件代替官方提供的wx.showToast, wx.showToast诸多不便我就不说了，关键是还有坑\x3cbr\x3e小程序基础库比较低的，不管你怎么设置，总是会在弹窗里面加一个钩钩，有时候我想弹出错误消息也是打钩，\x3cbr\x3e严重误导用户，字数上还有限制有带icon的不能超过7个字，你说说，你说说 7个字够干嘛的，\x3cbr\x3e那我们来看看mptoast,据\x3ca href=\x22https:\/\/github.com\/noahlam\/mpvue-toast\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方介绍\x3c\/a\x3emptoast具有轻量，配置少，冗余少，使用简单，可定制性强等特点\x3c\/p\x3e\n\x3cp\x3e我们开根据官方介绍，从npm引入并配置\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22npm i vuex\nnpm i mptoast -D\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3enpm \x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e vuex\nnpm \x3cspan class=\x22hljs-selector-tag\x22\x3ei\x3c\/span\x3e mptoast -D\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在项目的主配置文件（一般位于src\/main.js）加入以下代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import mpvueToastRegistry from \x27mptoast\/registry\x27\nmpvueToastRegistry(Vue)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3eimport mpvueToastRegistry from \x3cspan class=\x22hljs-string\x22\x3e\x27mptoast\/registry\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-title\x22\x3empvueToastRegistry\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(Vue)\x3c\/span\x3e\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在你需要弹窗的页面，引入组件，并注册，然后在页面内加入一个你注册的组件，就可以在js里面调用this.$mptoast()了， 以下是一个简单的实例\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv\x3e\n    \x3c-- 省略其他代码 --\x3e\n    \x3cmptoast \/\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\n\n\x3cscript\x3e\nimport mptoast from \x27mptoast\x27\n\nexport default {\n  components: {\n    mptoast\n  },\n  data () {\n    return {}\n  },\n  methods: {\n    showToast () {\n      this.$mptoast(\x27我是提示信息\x27)\n    },\n  }\n}\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3e--\x3c\/span\x3e 省略其他代码 \x3cspan class=\x22hljs-attr\x22\x3e--\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emptoast\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e mptoast \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27mptoast\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ecomponents\x3c\/span\x3e: {\n    mptoast\n  },\n  data () {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {}\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n    showToast () {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$mptoast(\x3cspan class=\x22hljs-string\x22\x3e\x27我是提示信息\x27\x3c\/span\x3e)\n    },\n  }\n}\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用起来还是蛮简单的\x3c\/p\x3e\n\x3cp\x3e二，用promise封装异步请求函数\x3cbr\x3e在小程序的环境下面，要想发送一个外部请求，我们只能使用小程序官方提供的wx.request方法，\x3cbr\x3e但是该方法的代码风跟跟Jquery年代的Ajax一样，都散靠回调来处理请求响应，如果有很多层回调，\x3cbr\x3e就会有很多层嵌套，这让我们这些平时被async-await惯坏的人怎么接受？\x3c\/p\x3e\n\x3cp\x3e所以，建完基本项目，我们要做的第一件事，就是用wx.request自己封装一个基于promise的异步请求方法。\x3cbr\x3e我们先来看一下 wx.request的一个官方示例代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22wx.request({\n  url: \x27test.php\x27, \/\/仅为示例，并非真实的接口地址\n  data: {\n     x: \x27\x27 ,\n     y: \x27\x27\n  },\n  header: {\n      \x27content-type\x27: \x27application\/json\x27 \/\/ 默认值\n  },\n  success: function(res) {\n    console.log(res.data)\n  }\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3ewx\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.request\x3c\/span\x3e({\n  \x3cspan class=\x22hljs-attribute\x22\x3eurl\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27test.php\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/仅为示例，并非真实的接口地址\x3c\/span\x3e\n  \x3cspan class=\x22hljs-attribute\x22\x3edata\x3c\/span\x3e: {\n     \x3cspan class=\x22hljs-attribute\x22\x3ex\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e ,\n     \x3cspan class=\x22hljs-attribute\x22\x3ey\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attribute\x22\x3eheader\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27content-type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认值\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attribute\x22\x3esuccess\x3c\/span\x3e: function(res) {\n    console.log(res.data)\n  }\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到，每次请求都要发送一大堆的东西，重点少这些东西里面，很可能对于一个项目来说，\x3cbr\x3e绝大部分都是固定不变的，那这样，不是冗余了么。\x3c\/p\x3e\n\x3cblockquote\x3etip: 更多wx.request参数，请参考 \x3ca href=\x22https:\/\/developers.weixin.qq.com\/miniprogram\/dev\/api\/network-request.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e微信官方文档\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e我们分析一下，第一个参数是url,也就是我们请求的地址，这个应该是每次都不一样的，但是，不一样的应该也只是url的最后一部分，\x3cbr\x3e接口名称的位置不一样，前面的服务器地址一般都是一样的，例如\x3ccode\x3ehttp:\/\/www.abc.com\/api\/member\/login\x3c\/code\x3e 对于同一个项目的所有接口\x3cbr\x3e服务器地址\x3ccode\x3ehttp:\/\/www.abc.com\/api\/\x3c\/code\x3e应该都是一样的，不一样的只是后面的接口名称\x3ccode\x3emember\/login\x3c\/code\x3e,\x3cbr\x3e那我们可以把url拆分成 \x3ccode\x3e服务器地址\x3c\/code\x3e \x2b \x3ccode\x3e接口名称\x3c\/code\x3e，这样做也方便后期上线的时候，切换服务器地址。\x3c\/p\x3e\n\x3cp\x3e第二个参数是请求的参数，请求的参数应该是每次都不一样的，所以这个我们就不做修改（事实上实际应用中，\x3cbr\x3e经常有可能出现需要每个接口都带一个token的，我们也可以在这里统一加上去，不过这里就不做深入）\x3c\/p\x3e\n\x3cp\x3e第三个参数是 请求头，这个一般同一个项目里面，这些都是一样的，所以我们就写死。 这里还有一个参数\x3ccode\x3emethod\x3c\/code\x3e请求方法，\x3cbr\x3e这里因为使用默认值GET，所以就没列出，我们这边需要做设置，因为现在前后分离的模式，现在基本上大部分都是POST请求，所以我们这边也写死成method:\x27POST\x27\x3c\/p\x3e\n\x3cp\x3e最后一个就是处理请求结果回调函数，示例里面只有一个请求成功的回调，其实我们应该再加一个请求实例的处理函数，\x3cbr\x3e\x3ccode\x3efail\x3c\/code\x3e，而我们封装这个函数的重点，就是要用promise来处理这两个回调函数，使它们可以用async-await的语法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 假设以下代码在 `\/src\/utils\/requestMethod.js`\n\nlet serverPath = \x27http:\/\/www.abc.com\/api\/\x27\nexport function post(url,body) {\n    return new Promise((resolve,reject) =\x3e {\n        wx.request({\n              url: serverPath \x2b url    \/\/ 拼接完整的url\n              data: body\n              method:\x27POST\x27,\n              header: {\n                  \x27content-type\x27: \x27application\/json\x27\n              },\n              success(res) {\n                resolve(res.data)  \/\/ 把返回的数据传出去\n              },\n              fail(ret) {\n                reject(ret)   \/\/ 把错误信息传出去\n              }\n            })\n    })\n}\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 假设以下代码在 `\/src\/utils\/requestMethod.js`\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e serverPath = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.abc.com\/api\/\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3epost\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eurl,body\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresolve,reject\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n        wx.request({\n              \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e: serverPath \x2b url    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 拼接完整的url\x3c\/span\x3e\n              data: body\n              method:\x3cspan class=\x22hljs-string\x22\x3e\x27POST\x27\x3c\/span\x3e,\n              \x3cspan class=\x22hljs-attr\x22\x3eheader\x3c\/span\x3e: {\n                  \x3cspan class=\x22hljs-string\x22\x3e\x27content-type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e\n              },\n              success(res) {\n                resolve(res.data)  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把返回的数据传出去\x3c\/span\x3e\n              },\n              fail(ret) {\n                reject(ret)   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 把错误信息传出去\x3c\/span\x3e\n              }\n            })\n    })\n}\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e有了这样的封装，我们就可以在其他地方引入 上面这个文件，然后使用post函数请求\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {post} from \x27\/src\/utils\/requestMethod.js\x27\n\/\/ 需要注意的是，这行代码必须要在async修饰的函数里面才能正确调用\nlet res = await post(\x27member\/login\x27,{name:myname})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {post} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27\/src\/utils\/requestMethod.js\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 需要注意的是，这行代码必须要在async修饰的函数里面才能正确调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e res = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e post(\x3cspan class=\x22hljs-string\x22\x3e\x27member\/login\x27\x3c\/span\x3e,{\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e:myname})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你觉得每次都要import这个文件很麻烦,那我们也可以把它挂在到Vue(mpvue)的原型(prototype)上，我们打开\x3ccode\x3e\/src\/main.js\x3c\/code\x3e文件，然后在里面加入以下代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {post} from \x27\/src\/utils\/requestMethod.js\x27\nVue.prototype.$post = post\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs elm\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {post} from \x27\/src\/utils\/requestMethod.js\x27\n\x3cspan class=\x22hljs-type\x22\x3eVue\x3c\/span\x3e.proto\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e.$post = post\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样，我们就可以在Vue(mpvue)的所有实例里面，直接使用 this.$post()来调用，只要一行代码，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 这行代码同样需要在async修饰的函数里面才能正确调用\nlet res = await this.$post(\x27member\/login\x27,{name:myname})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这行代码同样需要在async修饰的函数里面才能正确调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e res = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$post(\x3cspan class=\x22hljs-string\x22\x3e\x27member\/login\x27\x3c\/span\x3e,{name:myname})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e怎么样？是不是比原生的方便很多呢？\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e结束语\x3c\/h3\x3e\n\x3cp\x3e当然，跑起来以后，你可能还会遇到各种问题，这里我有对我自己遇到的问题做了一些总结\x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/noahlam\/articles\/blob\/master\/%E7%BE%8E%E5%9B%A2%E5%B0%8F%E7%A8%8B%E5%BA%8F%E6%A1%86%E6%9E%B6mpvue%E8%B9%B2%E5%9D%91%E6%8C%87%E5%8D%97.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e美团小程序框架mpvue蹲坑指南\x3c\/a\x3e，希望对你有帮助,\x3cbr\x3e还有\x3ca href=\x22http:\/\/mpvue.com\/mpvue\/#_2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e也是很不错的哦\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>美团小程序框架mpvue入门教程</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014331194">https://segmentfault.com/a/1190000014331194</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/rjyetjw0l4n/" target="_blank">https://alili.tech/archive/rjyetjw0l4n/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>