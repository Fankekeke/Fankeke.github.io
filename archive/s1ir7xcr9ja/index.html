<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="vue&#43;vuecli&#43;webapck2项目配置文件详解"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>vue&#43;vuecli&#43;webapck2项目配置文件详解 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/s1ir7xcr9ja/",
				"appid": "1613049289050283", 
				"title": "vue&#43;vuecli&#43;webapck2项目配置文件详解 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-09T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/bm0bsj31bma/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3bx0h7b08wt/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&text=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&text=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&title=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&is_video=false&description=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&title=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&title=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&title=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fs1ir7xcr9ja%2f&title=vue%2bvuecli%2bwebapck2%e9%a1%b9%e7%9b%ae%e9%85%8d%e7%bd%ae%e6%96%87%e4%bb%b6%e8%af%a6%e8%a7%a3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">vue&#43;vuecli&#43;webapck2项目配置文件详解</h1><div class="meta"><div class="postdate"><time datetime="2018-12-09" itemprop="datePublished">2018-12-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e1.文件结构\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├─build\n│   ├─build.js\n│   ├─check-versions.js\n│   ├─dev-client.js\n│   ├─dev-server.js\n│   ├─utils.js\n│   ├─vue-loader.conf.js\n│   ├─webpack.base.conf.js\n│   ├─webpack.dev.conf.js\n│   ├─webpack.prod.conf.js\n│   └─webpack.test.conf.js\n├─config\n│   ├─dev.env.js\n│   ├─index.js\n│   ├─prod.env.js\n│   └─test.env.js\n├─...\n└─package.json\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e├─build\n│   ├─build\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─check-versions\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─dev-client\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─dev-server\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─utils\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─vue-loader\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.base\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.dev\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.prod\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   └─webpack\x3cspan class=\x22hljs-selector-class\x22\x3e.test\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.conf\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├─config\n│   ├─dev\x3cspan class=\x22hljs-selector-class\x22\x3e.env\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   ├─prod\x3cspan class=\x22hljs-selector-class\x22\x3e.env\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│   └─test\x3cspan class=\x22hljs-selector-class\x22\x3e.env\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├─...\n└─package.json\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e2.package.json文件\x3c\/h2\x3e\n\x3cp\x3epackage.json里面的scripts字段：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;scripts\x26quot;: {\n    \x26quot;dev\x26quot;: \x26quot;node build\/dev-server.js\x26quot;,\n    \x26quot;build\x26quot;: \x26quot;node build\/build.js\x26quot;,\n    \x26quot;unit\x26quot;: \x26quot;cross-env BABEL_ENV=test karma start test\/unit\/karma.conf.js --single-run\x26quot;,\n    \x26quot;e2e\x26quot;: \x26quot;node test\/e2e\/runner.js\x26quot;,\n    \x26quot;test\x26quot;: \x26quot;npm run unit \x26amp;\x26amp; npm run e2e\x26quot;,\n    \x26quot;lint\x26quot;: \x26quot;eslint --ext .js,.vue src test\/unit\/specs test\/e2e\/specs\x26quot;\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xquery\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22dev\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22node build\/dev-server.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22node build\/build.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22unit\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22cross-env BABEL_ENV=test karma start test\/unit\/karma.conf.js --single-run\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22e2e\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22node test\/e2e\/runner.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22npm run unit \x26amp;\x26amp; npm run e2e\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22lint\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22eslint --ext .js,.vue src test\/unit\/specs test\/e2e\/specs\x22\x3c\/span\x3e\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e运行\x3ccode\x3e”npm run dev”\x3c\/code\x3e：执行\x3ccode\x3ebuild\/dev-server.js\x3c\/code\x3e文件\x3cbr\x3e运行\x3ccode\x3e”npm run build”\x3c\/code\x3e：执行\x3ccode\x3ebuild\/build.js\x3c\/code\x3e文件\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e3.build文件夹分析\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3ebuild\/dev-server.js\x3c\/h3\x3e\n\x3cp\x3e该文件主要作用：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e检查node和npm的版本、引入相关插件和配置\x3c\/li\x3e\n\x3cli\x3ewebpack对源码进行编译打包并返回compiler对象\x3c\/li\x3e\n\x3cli\x3e创建express服务器\x3c\/li\x3e\n\x3cli\x3e配置开发中间件（webpack-dev-middleware）和热重载中间件（webpack-hot-middleware）\x3c\/li\x3e\n\x3cli\x3e挂载代理服务和中间件\x3c\/li\x3e\n\x3cli\x3e配置静态资源\x3c\/li\x3e\n\x3cli\x3e启动服务器监听特定端口（8080）\x3c\/li\x3e\n\x3cli\x3e自动打开浏览器并打开特定网址（localhost:8080）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e说明： \x3ccode\x3eexpress\x3c\/code\x3e服务器提供静态文件服务，不过它还使用了\x3ccode\x3ehttp-proxy-middleware\x3c\/code\x3e，一个http请求代理的中间件。前端开发过程中需要使用到后台的API的话，可以通过配置\x3ccode\x3eproxyTable\x3c\/code\x3e来将相应的后台请求代理到专用的API服务器。\x3c\/blockquote\x3e\n\x3cp\x3e代码详细注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 检查NodeJS和npm的版本\nrequire(\x27.\/check-versions\x27)()\n\n\/\/ 获取基本配置\nvar config = require(\x27..\/config\x27)\n\/\/ 如果Node的环境变量中没有设置当前的环境（NODE_ENV），则使用config中的dev环境配置作为当前的环境\nif (!process.env.NODE_ENV) {\n  process.env.NODE_ENV = JSON.parse(config.dev.env.NODE_ENV)\n}\n\n\/\/ opn是一个可以调用默认软件打开网址、图片、文件等内容的插件\n\/\/ 这里用它来调用默认浏览器打开dev-server监听的端口，例如：localhost:8080\nvar opn = require(\x27opn\x27)\nvar path = require(\x27path\x27)\nvar express = require(\x27express\x27)\nvar webpack = require(\x27webpack\x27)\n\/\/ http-proxy-middleware是一个express中间件，用于将http请求代理到其他服务器\n\/\/ 例：localhost:8080\/api\/xxx  --\x3e  localhost:3000\/api\/xxx\n\/\/ 这里使用该插件可以将前端开发中涉及到的请求代理到提供服务的后台服务器上，方便与服务器对接\nvar proxyMiddleware = require(\x27http-proxy-middleware\x27)\n\/\/ 开发环境下的webpack配置\nvar webpackConfig = require(\x27.\/webpack.dev.conf\x27)\n\n\/\/ dev-server 监听的端口，如果没有在命令行传入端口号，则使用config.dev.port设置的端口，例如8080\nvar port = process.env.PORT || config.dev.port\n\/\/ 用于判断是否要自动打开浏览器的布尔变量，当配置文件中没有设置自动打开浏览器的时候其值为 false\nvar autoOpenBrowser = !!config.dev.autoOpenBrowser\n\/\/ HTTP代理表，指定规则，将某些API请求代理到相应的服务器\nvar proxyTable = config.dev.proxyTable\n\/\/ 创建express服务器\nvar app = express()\n\/\/ webpack根据配置开始编译打包源码并返回compiler对象\nvar compiler = webpack(webpackConfig)\n\/\/ webpack-dev-middleware将webpack编译打包后得到的产品文件存放在内存中而没有写进磁盘\n\/\/ 将这个中间件挂到express上使用之后即可提供这些编译后的产品文件服务\nvar devMiddleware = require(\x27webpack-dev-middleware\x27)(compiler, {\n  publicPath: webpackConfig.output.publicPath, \/\/ 设置访问路径为webpack配置中的output里面所对应的路径\n  quiet: true \/\/ 设置为true，使其不要在控制台输出日志\n})\n\/\/ webpack-hot-middleware，用于实现热重载功能的中间件\nvar hotMiddleware = require(\x27webpack-hot-middleware\x27)(compiler, {\n  log: false, \/\/ 关闭控制台的日志输出\n  heartbeat: 2000 \/\/ 发送心跳包的频率\n})\n\/\/ webpack(重新)编译打包完成后并将js、css等文件inject到html文件之后，通过热重载中间件强制页面刷新\ncompiler.plugin(\x27compilation\x27, function (compilation) {\n  compilation.plugin(\x27html-webpack-plugin-after-emit\x27, function (data, cb) {\n    hotMiddleware.publish({ action: \x27reload\x27 })\n    cb()\n  })\n})\n\n\/\/ 根据 proxyTable 中的代理请求配置来设置express服务器的http代理规则\nObject.keys(proxyTable).forEach(function (context) {\n  var options = proxyTable[context]\n  \/\/ 格式化options，例如将\x27www.example.com\x27变成{ target: \x27www.example.com\x27 }\n  if (typeof options === \x27string\x27) {\n    options = { target: options }\n  }\n  app.use(proxyMiddleware(options.filter || context, options))\n})\n\n\/\/ handle fallback for HTML5 history API\n\/\/ 重定向不存在的URL，用于支持SPA（单页应用）\n\/\/ 例如使用vue-router并开启了history模式\napp.use(require(\x27connect-history-api-fallback\x27)())\n\n\/\/ serve webpack bundle output\n\/\/ 挂载webpack-dev-middleware中间件，提供webpack编译打包后的产品文件服务\napp.use(devMiddleware)\n\n\/\/ enable hot-reload and state-preserving\n\/\/ compilation error display\n\/\/ 挂载热重载中间件\napp.use(hotMiddleware)\n\n\/\/ serve pure static assets\n\/\/ 提供static文件夹上的静态文件服务\nvar staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)\napp.use(staticPath, express.static(\x27.\/static\x27))\n\n\/\/ 访问链接\nvar uri = \x27http:\/\/localhost:\x27 \x2b port\n\n\/\/ 创建promise，在应用服务启动之后resolve\n\/\/ 便于外部文件require了这个dev-server之后的代码编写\nvar _resolve\nvar readyPromise = new Promise(resolve =\x3e {\n  _resolve = resolve\n})\n\nconsole.log(\x27\x3e Starting dev server...\x27)\n\/\/ webpack-dev-middleware等待webpack完成所有编译打包之后输出提示语到控制台，表明服务正式启动\n\/\/ 服务正式启动才自动打开浏览器进入页面\ndevMiddleware.waitUntilValid(() =\x3e {\n  console.log(\x27\x3e Listening at \x27 \x2b uri \x2b \x27\\n\x27)\n  \/\/ when env is testing, don\x27t need open it\n  if (autoOpenBrowser \x26amp;\x26amp; process.env.NODE_ENV !== \x27testing\x27) {\n    opn(uri)\n  }\n  _resolve()\n})\n\n\/\/ 启动express服务器并监听相应的端口\nvar server = app.listen(port)\n\n\/\/ 暴露本模块的功能给外部使用，例如下面这种用法\n\/\/ var devServer = require(\x27.\/build\/dev-server\x27)\n\/\/ devServer.ready.then(() =\x3e {...})\n\/\/ if (...) { devServer.close() }\nmodule.exports = {\n  ready: readyPromise,\n  close: () =\x3e {\n    server.close()\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检查NodeJS和npm的版本\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/check-versions\x27\x3c\/span\x3e)()\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取基本配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果Node的环境变量中没有设置当前的环境（NODE_ENV），则使用config中的dev环境配置作为当前的环境\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!process.env.NODE_ENV) {\n  process.env.NODE_ENV = \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.parse(config.dev.env.NODE_ENV)\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ opn是一个可以调用默认软件打开网址、图片、文件等内容的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里用它来调用默认浏览器打开dev-server监听的端口，例如：localhost:8080\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e opn = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27opn\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e express = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27express\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ http-proxy-middleware是一个express中间件，用于将http请求代理到其他服务器\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例：localhost:8080\/api\/xxx  --\x26gt;  localhost:3000\/api\/xxx\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里使用该插件可以将前端开发中涉及到的请求代理到提供服务的后台服务器上，方便与服务器对接\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxyMiddleware = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27http-proxy-middleware\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发环境下的webpack配置\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.dev.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ dev-server 监听的端口，如果没有在命令行传入端口号，则使用config.dev.port设置的端口，例如8080\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e port = process.env.PORT || config.dev.port\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 用于判断是否要自动打开浏览器的布尔变量，当配置文件中没有设置自动打开浏览器的时候其值为 false\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e autoOpenBrowser = !!config.dev.autoOpenBrowser\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ HTTP代理表，指定规则，将某些API请求代理到相应的服务器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxyTable = config.dev.proxyTable\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建express服务器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = express()\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack根据配置开始编译打包源码并返回compiler对象\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e compiler = webpack(webpackConfig)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack-dev-middleware将webpack编译打包后得到的产品文件存放在内存中而没有写进磁盘\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将这个中间件挂到express上使用之后即可提供这些编译后的产品文件服务\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e devMiddleware = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-dev-middleware\x27\x3c\/span\x3e)(compiler, {\n  \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e: webpackConfig.output.publicPath, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置访问路径为webpack配置中的output里面所对应的路径\x3c\/span\x3e\n  quiet: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置为true，使其不要在控制台输出日志\x3c\/span\x3e\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack-hot-middleware，用于实现热重载功能的中间件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hotMiddleware = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-hot-middleware\x27\x3c\/span\x3e)(compiler, {\n  \x3cspan class=\x22hljs-attr\x22\x3elog\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 关闭控制台的日志输出\x3c\/span\x3e\n  heartbeat: \x3cspan class=\x22hljs-number\x22\x3e2000\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发送心跳包的频率\x3c\/span\x3e\n})\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack(重新)编译打包完成后并将js、css等文件inject到html文件之后，通过热重载中间件强制页面刷新\x3c\/span\x3e\ncompiler.plugin(\x3cspan class=\x22hljs-string\x22\x3e\x27compilation\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecompilation\x3c\/span\x3e) \x3c\/span\x3e{\n  compilation.plugin(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin-after-emit\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edata, cb\x3c\/span\x3e) \x3c\/span\x3e{\n    hotMiddleware.publish({ \x3cspan class=\x22hljs-attr\x22\x3eaction\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27reload\x27\x3c\/span\x3e })\n    cb()\n  })\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 根据 proxyTable 中的代理请求配置来设置express服务器的http代理规则\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(proxyTable).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3econtext\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e options = proxyTable[context]\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 格式化options，例如将\x27www.example.com\x27变成{ target: \x27www.example.com\x27 }\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e options === \x3cspan class=\x22hljs-string\x22\x3e\x27string\x27\x3c\/span\x3e) {\n    options = { \x3cspan class=\x22hljs-attr\x22\x3etarget\x3c\/span\x3e: options }\n  }\n  app.use(proxyMiddleware(options.filter || context, options))\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ handle fallback for HTML5 history API\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重定向不存在的URL，用于支持SPA（单页应用）\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例如使用vue-router并开启了history模式\x3c\/span\x3e\napp.use(\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27connect-history-api-fallback\x27\x3c\/span\x3e)())\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ serve webpack bundle output\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 挂载webpack-dev-middleware中间件，提供webpack编译打包后的产品文件服务\x3c\/span\x3e\napp.use(devMiddleware)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ enable hot-reload and state-preserving\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ compilation error display\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 挂载热重载中间件\x3c\/span\x3e\napp.use(hotMiddleware)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ serve pure static assets\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 提供static文件夹上的静态文件服务\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e staticPath = path.posix.join(config.dev.assetsPublicPath, config.dev.assetsSubDirectory)\napp.use(staticPath, express.static(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/static\x27\x3c\/span\x3e))\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 访问链接\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e uri = \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:\x27\x3c\/span\x3e \x2b port\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建promise，在应用服务启动之后resolve\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 便于外部文件require了这个dev-server之后的代码编写\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e _resolve\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e readyPromise = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  _resolve = resolve\n})\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26gt; Starting dev server...\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack-dev-middleware等待webpack完成所有编译打包之后输出提示语到控制台，表明服务正式启动\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 服务正式启动才自动打开浏览器进入页面\x3c\/span\x3e\ndevMiddleware.waitUntilValid(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27\x26gt; Listening at \x27\x3c\/span\x3e \x2b uri \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\\n\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ when env is testing, don\x27t need open it\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (autoOpenBrowser \x26amp;\x26amp; process.env.NODE_ENV !== \x3cspan class=\x22hljs-string\x22\x3e\x27testing\x27\x3c\/span\x3e) {\n    opn(uri)\n  }\n  _resolve()\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 启动express服务器并监听相应的端口\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e server = app.listen(port)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 暴露本模块的功能给外部使用，例如下面这种用法\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ var devServer = require(\x27.\/build\/dev-server\x27)\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ devServer.ready.then(() =\x26gt; {...})\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ if (...) { devServer.close() }\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eready\x3c\/span\x3e: readyPromise,\n  \x3cspan class=\x22hljs-attr\x22\x3eclose\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    server.close()\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3ebuild\/webpack.base.conf.js\x3c\/h3\x3e\n\x3cp\x3e主要作用：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e配置webpack编译入口\x3c\/li\x3e\n\x3cli\x3e配置webpack输出路径和命名规则\x3c\/li\x3e\n\x3cli\x3e配置模块resolve规则\x3c\/li\x3e\n\x3cli\x3e配置不同类型模块的处理规则\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e说明： 这个配置里面只配置了.js、.vue、图片、字体等几类文件的处理规则，如果需要处理其他文件可以在module.rules里面另行配置。\x3c\/blockquote\x3e\n\x3cp\x3e代码详细注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var path = require(\x27path\x27)\nvar fs = require(\x27fs\x27)\nvar utils = require(\x27.\/utils\x27)\nvar config = require(\x27..\/config\x27)\nvar vueLoaderConfig = require(\x27.\/vue-loader.conf\x27)\n\n\/\/ 获取绝对路径\nfunction resolve (dir) {\n  return path.join(__dirname, \x27..\x27, dir)\n}\n\nmodule.exports = {\n  \/\/ webpack入口文件\n  entry: {\n    app: \x27.\/src\/main.js\x27\n  },\n  \/\/ webpack输出路径和命名规则\n  output: {\n    \/\/ webpack输出的目标文件夹路径（例如：\/dist）\n    path: config.build.assetsRoot,\n    \/\/ webpack输出bundle文件命名格式\n    filename: \x27[name].js\x27,\n    \/\/ webpack编译输出的发布路径（例如\x27\/\/cdn.xxx.com\/app\/\x27）\n    publicPath: process.env.NODE_ENV === \x27production\x27\n      ? config.build.assetsPublicPath\n      : config.dev.assetsPublicPath\n  },\n  \/\/ 模块resolve的规则\n  resolve: {\n    extensions: [\x27.js\x27, \x27.vue\x27, \x27.json\x27],\n    \/\/ 别名，方便引用模块，例如有了别名之后，\n    \/\/ import Vue from \x27vue\/dist\/vue.common.js\x27可以写成 import Vue from \x27vue\x27\n    alias: {\n      \x27vue$\x27: \x27vue\/dist\/vue.esm.js\x27,\n      \x27@\x27: resolve(\x27src\x27),\n    },\n    symlinks: false\n  },\n  \/\/ 不同类型模块的处理规则\n  module: {\n    rules: [\n      {\/\/ 对src和test文件夹下的.js和.vue文件使用eslint-loader进行代码规范检查\n        test: \/\\.(js|vue)$\/,\n        loader: \x27eslint-loader\x27,\n        enforce: \x27pre\x27,\n        include: [resolve(\x27src\x27), resolve(\x27test\x27)],\n        options: {\n          formatter: require(\x27eslint-friendly-formatter\x27)\n        }\n      },\n      {\/\/ 对所有.vue文件使用vue-loader进行编译\n        test: \/\\.vue$\/,\n        loader: \x27vue-loader\x27,\n        options: vueLoaderConfig\n      },\n      {\/\/ 对src和test文件夹下的.js文件使用babel-loader将es6\x2b的代码转成es5\n        test: \/\\.js$\/,\n        loader: \x27babel-loader\x27,\n        include: [resolve(\x27src\x27), resolve(\x27test\x27)]\n      },\n      {\/\/ 对图片资源文件使用url-loader\n        test: \/\\.(png|jpe?g|gif|svg)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        options: {\n          \/\/ 小于10K的图片转成base64编码的dataURL字符串写到代码中\n          limit: 10000,\n          \/\/ 其他的图片转移到静态资源文件夹\n          name: utils.assetsPath(\x27img\/[name].[hash:7].[ext]\x27)\n        }\n      },\n      {\/\/ 对多媒体资源文件使用url-loader\n        test: \/\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        options: {\n          \/\/ 小于10K的资源转成base64编码的dataURL字符串写到代码中\n          limit: 10000,\n          \/\/ 其他的资源转移到静态资源文件夹\n          name: utils.assetsPath(\x27media\/[name].[hash:7].[ext]\x27)\n        }\n      },\n      {\/\/ 对字体资源文件使用url-loader\n        test: \/\\.(woff2?|eot|ttf|otf)(\\?.*)?$\/,\n        loader: \x27url-loader\x27,\n        options: {\n          \/\/ 小于10K的资源转成base64编码的dataURL字符串写到代码中\n          limit: 10000,\n          \/\/ 其他的资源转移到静态资源文件夹\n          name: utils.assetsPath(\x27fonts\/[name].[hash:7].[ext]\x27)\n        }\n      }\n    ]\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e fs = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27fs\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e vueLoaderConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/vue-loader.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取绝对路径\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eresolve\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\x27\x3c\/span\x3e, dir)\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack入口文件\x3c\/span\x3e\n  entry: {\n    \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/main.js\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack输出路径和命名规则\x3c\/span\x3e\n  output: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack输出的目标文件夹路径（例如：\/dist）\x3c\/span\x3e\n    path: config.build.assetsRoot,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack输出bundle文件命名格式\x3c\/span\x3e\n    filename: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack编译输出的发布路径（例如\x27\/\/cdn.xxx.com\/app\/\x27）\x3c\/span\x3e\n    publicPath: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n      ? config.build.assetsPublicPath\n      : config.dev.assetsPublicPath\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 模块resolve的规则\x3c\/span\x3e\n  resolve: {\n    \x3cspan class=\x22hljs-attr\x22\x3eextensions\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27.js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.vue\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27.json\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 别名，方便引用模块，例如有了别名之后，\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ import Vue from \x27vue\/dist\/vue.common.js\x27可以写成 import Vue from \x27vue\x27\x3c\/span\x3e\n    alias: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27vue$\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue\/dist\/vue.esm.js\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27@\x27\x3c\/span\x3e: resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e),\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3esymlinks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不同类型模块的处理规则\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [\n      {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对src和test文件夹下的.js和.vue文件使用eslint-loader进行代码规范检查\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(js|vue)$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27eslint-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eenforce\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27pre\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e), resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e)],\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-attr\x22\x3eformatter\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27eslint-friendly-formatter\x27\x3c\/span\x3e)\n        }\n      },\n      {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对所有.vue文件使用vue-loader进行编译\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.vue$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: vueLoaderConfig\n      },\n      {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对src和test文件夹下的.js文件使用babel-loader将es6\x2b的代码转成es5\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: [resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e), resolve(\x3cspan class=\x22hljs-string\x22\x3e\x27test\x27\x3c\/span\x3e)]\n      },\n      {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对图片资源文件使用url-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpe?g|gif|svg)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 小于10K的图片转成base64编码的dataURL字符串写到代码中\x3c\/span\x3e\n          limit: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他的图片转移到静态资源文件夹\x3c\/span\x3e\n          name: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27img\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      },\n      {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对多媒体资源文件使用url-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(mp4|webm|ogg|mp3|wav|flac|aac)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 小于10K的资源转成base64编码的dataURL字符串写到代码中\x3c\/span\x3e\n          limit: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他的资源转移到静态资源文件夹\x3c\/span\x3e\n          name: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27media\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      },\n      {\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对字体资源文件使用url-loader\x3c\/span\x3e\n        test: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(woff2?|eot|ttf|otf)(\\?.*)?$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 小于10K的资源转成base64编码的dataURL字符串写到代码中\x3c\/span\x3e\n          limit: \x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他的资源转移到静态资源文件夹\x3c\/span\x3e\n          name: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27fonts\/[name].[hash:7].[ext]\x27\x3c\/span\x3e)\n        }\n      }\n    ]\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3ebuild\/webpack.dev.conf.js\x3c\/h3\x3e\n\x3cp\x3e主要作用：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e将webpack的热重载客户端代码添加到每个entry对应的应用\x3c\/li\x3e\n\x3cli\x3e合并基础的webpack配置\x3c\/li\x3e\n\x3cli\x3e配置样式文件的处理规则，styleLoaders\x3c\/li\x3e\n\x3cli\x3e配置Source Maps\x3c\/li\x3e\n\x3cli\x3e配置webpack插件\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e详细代码注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var utils = require(\x27.\/utils\x27)\nvar webpack = require(\x27webpack\x27)\nvar config = require(\x27..\/config\x27)\n\/\/ webpack-merge是一个可以合并数组和对象的插件\nvar merge = require(\x27webpack-merge\x27)\nvar baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\n\/\/ html-webpack-plugin用于将webpack编译打包后的产品文件注入到html模板中\n\/\/ 即自动在index.html里面加上\x3clink\x3e和\x3cscript\x3e标签引用webpack打包后的文件\nvar HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\n\/\/ friendly-errors-webpack-plugin用于更友好地输出webpack的警告、错误等信息\nvar FriendlyErrorsPlugin = require(\x27friendly-errors-webpack-plugin\x27)\n\n\/\/ add hot-reload related code to entry chunks\n\/\/ 给每个入口页面(应用)加上dev-client，用于跟dev-server的热重载插件通信，实现热更新\nObject.keys(baseWebpackConfig.entry).forEach(function (name) {\n  baseWebpackConfig.entry[name] = [\x27.\/build\/dev-client\x27].concat(baseWebpackConfig.entry[name])\n})\n\nmodule.exports = merge(baseWebpackConfig, {\n  module: {\n    \/\/ 样式文件的处理规则，对css\/sass\/scss等不同内容使用相应的styleLoaders\n    \/\/ 由utils配置出各种类型的预处理语言所需要使用的loader，例如sass需要使用sass-loader\n    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap })\n  },\n  \/\/ cheap-module-eval-source-map is faster for development\n  \/\/ 使用这种source-map更快\n  devtool: \x27#cheap-module-eval-source-map\x27,\n  \/\/ webpack插件\n  plugins: [\n    new webpack.DefinePlugin({\n      \x27process.env\x27: config.dev.env\n    }),\n    \/\/ 开启webpack热更新功能\n    new webpack.HotModuleReplacementPlugin(),\n    \/\/ webpack编译过程中出错的时候跳过报错阶段，不会阻塞编译，在编译结束后报错\n    new webpack.NoEmitOnErrorsPlugin(),\n    \/\/ 自动将依赖注入html模板，并输出最终的html文件到目标文件夹\n    new HtmlWebpackPlugin({\n      filename: \x27index.html\x27,\n      template: \x27index.html\x27,\n      inject: true\n    }),\n    new FriendlyErrorsPlugin()\n  ]\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e utils = require(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e webpack = require(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e config = require(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack-merge是一个可以合并数组和对象的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e merge = require(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e baseWebpackConfig = require(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.conf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ html-webpack-plugin用于将webpack编译打包后的产品文件注入到html模板中\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 即自动在index.html里面加上\x26lt;link\x26gt;和\x26lt;script\x26gt;标签引用webpack打包后的文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e HtmlWebpackPlugin = require(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ friendly-errors-webpack-plugin用于更友好地输出webpack的警告、错误等信息\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3evar\x3c\/span\x3e FriendlyErrorsPlugin = require(\x3cspan class=\x22hljs-string\x22\x3e\x27friendly-errors-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ add hot-reload related code to entry chunks\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 给每个入口页面(应用)加上dev-client，用于跟dev-server的热重载插件通信，实现热更新\x3c\/span\x3e\nObject.keys(baseWebpackConfig.entry).forEach(function (name) {\n  baseWebpackConfig\x3cspan class=\x22hljs-selector-class\x22\x3e.entry\x3c\/span\x3e[name] = [\x3cspan class=\x22hljs-string\x22\x3e\x27.\/build\/dev-client\x27\x3c\/span\x3e].concat(baseWebpackConfig\x3cspan class=\x22hljs-selector-class\x22\x3e.entry\x3c\/span\x3e[name])\n})\n\nmodule\x3cspan class=\x22hljs-selector-class\x22\x3e.exports\x3c\/span\x3e = merge(baseWebpackConfig, {\n  module: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 样式文件的处理规则，对css\/sass\/scss等不同内容使用相应的styleLoaders\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 由utils配置出各种类型的预处理语言所需要使用的loader，例如sass需要使用sass-loader\x3c\/span\x3e\n    rules: utils.styleLoaders({ sourceMap: config\x3cspan class=\x22hljs-selector-class\x22\x3e.dev\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.cssSourceMap\x3c\/span\x3e })\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ cheap-module-eval-source-map is faster for development\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用这种source-map更快\x3c\/span\x3e\n  devtool: \x3cspan class=\x22hljs-string\x22\x3e\x27#cheap-module-eval-source-map\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack插件\x3c\/span\x3e\n  plugins: [\n    new webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: config\x3cspan class=\x22hljs-selector-class\x22\x3e.dev\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.env\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开启webpack热更新功能\x3c\/span\x3e\n    new webpack.HotModuleReplacementPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack编译过程中出错的时候跳过报错阶段，不会阻塞编译，在编译结束后报错\x3c\/span\x3e\n    new webpack.NoEmitOnErrorsPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 自动将依赖注入html模板，并输出最终的html文件到目标文件夹\x3c\/span\x3e\n    new HtmlWebpackPlugin({\n      filename: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      template: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      inject: true\n    }),\n    new FriendlyErrorsPlugin()\n  ]\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3ebuild\/webpack.prod.conf.js\x3c\/h3\x3e\n\x3cp\x3e主要作用：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e合并基础的webpack配置\x3c\/li\x3e\n\x3cli\x3e配置样式文件的处理规则，styleLoaders\x3c\/li\x3e\n\x3cli\x3e配置webpack的输出\x3c\/li\x3e\n\x3cli\x3e配置webpack插件\x3c\/li\x3e\n\x3cli\x3egzip模式下的webpack插件配置\x3c\/li\x3e\n\x3cli\x3ewebpack-bundle分析\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cblockquote\x3e说明： webpack插件里面多了丑化压缩代码以及抽离css文件等插件。\x3c\/blockquote\x3e\n\x3cp\x3e详细代码注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var path = require(\x27path\x27)\nvar utils = require(\x27.\/utils\x27)\nvar webpack = require(\x27webpack\x27)\nvar config = require(\x27..\/config\x27)\nvar merge = require(\x27webpack-merge\x27)\nvar baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\n\/* copy-webpack-plugin，用于将static中的静态文件复制到产品文件夹dist *\/\nvar CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\nvar HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\nvar ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\n\/* optimize-css-assets-webpack-plugin，用于优化和最小化css资源  *\/\nvar OptimizeCSSPlugin = require(\x27optimize-css-assets-webpack-plugin\x27)\n\nvar env = config.build.env\n\nvar webpackConfig = merge(baseWebpackConfig, {\n  module: {\n    \/* 样式文件的处理规则，对css\/sass\/scss等不同内容使用相应的styleLoaders *\/\n    \/* 由utils配置出各种类型的预处理语言所需要使用的loader，例如sass需要使用sass-loader *\/\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true\n    })\n  },\n  \/* 是否使用source-map *\/\n  devtool: config.build.productionSourceMap ? \x27#source-map\x27 : false,\n  \/* webpack输出路径和命名规则 *\/\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath(\x27js\/[name].[chunkhash].js\x27),\n    chunkFilename: utils.assetsPath(\x27js\/[id].[chunkhash].js\x27)\n  },\n  \/* webpack插件 *\/\n  plugins: [\n    \/* http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html *\/\n    new webpack.DefinePlugin({\n      \x27process.env\x27: env\n    }),\n    \/* 丑化压缩JS代码 *\/\n    new webpack.optimize.UglifyJsPlugin({\n      compress: {\n        warnings: false\n      },\n      sourceMap: true\n    }),\n    \/* extract css into its own file *\/\n    \/* 将css提取到单独的文件 *\/\n    new ExtractTextPlugin({\n      filename: utils.assetsPath(\x27css\/[name].[contenthash].css\x27)\n    }),\n    \/* Compress extracted CSS. We are using this plugin so that possible *\/\n    \/* duplicated CSS from different components can be deduped. *\/\n    \/* 优化、最小化css代码，如果只简单使用extract-text-plugin可能会造成css重复 *\/\n    \/* 具体原因可以看npm上面optimize-css-assets-webpack-plugin的介绍 *\/\n    new OptimizeCSSPlugin({\n      cssProcessorOptions: {\n        safe: true\n      }\n    }),\n    \/* generate dist index.html with correct asset hash for caching. *\/\n    \/* you can customize output by editing \/index.html *\/\n    \/* see https:\/\/github.com\/ampedandwired\/html-webpack-plugin *\/\n    \/* 将产品文件的引用注入到index.html *\/\n    new HtmlWebpackPlugin({\n      filename: config.build.index,\n      template: \x27index.html\x27,\n      inject: true,\n      minify: {\n        \/* 删除index.html中的注释 *\/\n        removeComments: true,\n        \/* 删除index.html中的空格 *\/\n        collapseWhitespace: true,\n        \/* 删除各种html标签属性值的双引号 *\/\n        removeAttributeQuotes: true\n        \/* more options: *\/\n        \/* https:\/\/github.com\/kangax\/html-minifier#options-quick-reference *\/\n      },\n      \/* necessary to consistently work with multiple chunks via CommonsChunkPlugin *\/\n      \/* 注入依赖的时候按照依赖先后顺序进行注入，比如，需要先注入vendor.js，再注入app.js *\/\n      chunksSortMode: \x27dependency\x27\n    }),\n    \/* keep module.id stable when vender modules does not change *\/\n    new webpack.HashedModuleIdsPlugin(),\n    \/* split vendor js into its own file *\/\n    \/* 将所有从node_modules中引入的js提取到vendor.js，即抽取库文件 *\/\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n      minChunks: function (module, count) {\n        \/* any required modules inside node_modules are extracted to vendor *\/\n        return (\n          module.resource \x26amp;\x26amp;\n          \/\\.js$\/.test(module.resource) \x26amp;\x26amp;\n          module.resource.indexOf(\n            path.join(__dirname, \x27..\/node_modules\x27)\n          ) === 0\n        )\n      }\n    }),\n    \/* extract webpack runtime and module manifest to its own file in order to *\/\n    \/* prevent vendor hash from being updated whenever app bundle is updated *\/\n    \/* 从vendor中提取出manifest，原因如上 *\/\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27manifest\x27,\n      chunks: [\x27vendor\x27]\n    }),\n    \/* copy custom static assets *\/\n    \/* 将static文件夹里面的静态资源复制到dist\/static *\/\n    new CopyWebpackPlugin([\n      {\n        from: path.resolve(__dirname, \x27..\/static\x27),\n        to: config.build.assetsSubDirectory,\n        ignore: [\x27.*\x27]\n      }\n    ])\n  ]\n})\n\n\/* 如果开启了产品gzip压缩，则利用插件将构建后的产品文件进行压缩 *\/\nif (config.build.productionGzip) {\n  \/* 一个用于压缩的webpack插件 *\/\n  var CompressionWebpackPlugin = require(\x27compression-webpack-plugin\x27)\n\n  webpackConfig.plugins.push(\n    new CompressionWebpackPlugin({\n      asset: \x27[path].gz[query]\x27,\n      \/* 压缩算法 *\/\n      algorithm: \x27gzip\x27,\n      test: new RegExp(\n        \x27\\\\.(\x27 \x2b\n        config.build.productionGzipExtensions.join(\x27|\x27) \x2b\n        \x27)$\x27\n      ),\n      threshold: 10240,\n      minRatio: 0.8\n    })\n  )\n}\n\n\/* 如果启动了report，则通过插件给出webpack构建打包后的产品文件分析报告 *\/\nif (config.build.bundleAnalyzerReport) {\n  var BundleAnalyzerPlugin = require(\x27webpack-bundle-analyzer\x27).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(new BundleAnalyzerPlugin())\n}\n\nmodule.exports = webpackConfig\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e merge = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-merge\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e baseWebpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.base.conf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/* copy-webpack-plugin，用于将static中的静态文件复制到产品文件夹dist *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CopyWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27copy-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/* optimize-css-assets-webpack-plugin，用于优化和最小化css资源  *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e OptimizeCSSPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27optimize-css-assets-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e env = config.build.env\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = merge(baseWebpackConfig, {\n  \x3cspan class=\x22hljs-keyword\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 样式文件的处理规则，对css\/sass\/scss等不同内容使用相应的styleLoaders *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 由utils配置出各种类型的预处理语言所需要使用的loader，例如sass需要使用sass-loader *\/\x3c\/span\x3e\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    })\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* 是否使用source-map *\/\x3c\/span\x3e\n  devtool: config.build.productionSourceMap ? \x3cspan class=\x22hljs-string\x22\x3e\x27#source-map\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* webpack输出路径和命名规则 *\/\x3c\/span\x3e\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27js\/[name].[chunkhash].js\x27\x3c\/span\x3e),\n    chunkFilename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27js\/[id].[chunkhash].js\x27\x3c\/span\x3e)\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* webpack插件 *\/\x3c\/span\x3e\n  plugins: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n      \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: env\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 丑化压缩JS代码 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.UglifyJsPlugin({\n      compress: {\n        warnings: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n      },\n      sourceMap: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* extract css into its own file *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 将css提取到单独的文件 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin({\n      filename: utils.assetsPath(\x3cspan class=\x22hljs-string\x22\x3e\x27css\/[name].[contenthash].css\x27\x3c\/span\x3e)\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* Compress extracted CSS. We are using this plugin so that possible *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* duplicated CSS from different components can be deduped. *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 优化、最小化css代码，如果只简单使用extract-text-plugin可能会造成css重复 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 具体原因可以看npm上面optimize-css-assets-webpack-plugin的介绍 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e OptimizeCSSPlugin({\n      cssProcessorOptions: {\n        safe: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n      }\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* generate dist index.html with correct asset hash for caching. *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* you can customize output by editing \/index.html *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* see https:\/\/github.com\/ampedandwired\/html-webpack-plugin *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 将产品文件的引用注入到index.html *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n      filename: config.build.index,\n      template: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n      inject: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      minify: {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* 删除index.html中的注释 *\/\x3c\/span\x3e\n        removeComments: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* 删除index.html中的空格 *\/\x3c\/span\x3e\n        collapseWhitespace: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* 删除各种html标签属性值的双引号 *\/\x3c\/span\x3e\n        removeAttributeQuotes: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* more options: *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* https:\/\/github.com\/kangax\/html-minifier#options-quick-reference *\/\x3c\/span\x3e\n      },\n      \x3cspan class=\x22hljs-comment\x22\x3e\/* necessary to consistently work with multiple chunks via CommonsChunkPlugin *\/\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/* 注入依赖的时候按照依赖先后顺序进行注入，比如，需要先注入vendor.js，再注入app.js *\/\x3c\/span\x3e\n      chunksSortMode: \x3cspan class=\x22hljs-string\x22\x3e\x27dependency\x27\x3c\/span\x3e\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* keep module.id stable when vender modules does not change *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HashedModuleIdsPlugin(),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* split vendor js into its own file *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 将所有从node_modules中引入的js提取到vendor.js，即抽取库文件 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      name: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e,\n      minChunks: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e, count\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/* any required modules inside node_modules are extracted to vendor *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n          \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e.test(\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource) \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.resource.indexOf(\n            path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/node_modules\x27\x3c\/span\x3e)\n          ) === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        )\n      }\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* extract webpack runtime and module manifest to its own file in order to *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* prevent vendor hash from being updated whenever app bundle is updated *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 从vendor中提取出manifest，原因如上 *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n      name: \x3cspan class=\x22hljs-string\x22\x3e\x27manifest\x27\x3c\/span\x3e,\n      chunks: [\x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e]\n    }),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* copy custom static assets *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/* 将static文件夹里面的静态资源复制到dist\/static *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CopyWebpackPlugin([\n      {\n        \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/static\x27\x3c\/span\x3e),\n        to: config.build.assetsSubDirectory,\n        ignore: [\x3cspan class=\x22hljs-string\x22\x3e\x27.*\x27\x3c\/span\x3e]\n      }\n    ])\n  ]\n})\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/* 如果开启了产品gzip压缩，则利用插件将构建后的产品文件进行压缩 *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.productionGzip) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/* 一个用于压缩的webpack插件 *\/\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CompressionWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27compression-webpack-plugin\x27\x3c\/span\x3e)\n\n  webpackConfig.plugins.push(\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CompressionWebpackPlugin({\n      asset: \x3cspan class=\x22hljs-string\x22\x3e\x27[path].gz[query]\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/* 压缩算法 *\/\x3c\/span\x3e\n      algorithm: \x3cspan class=\x22hljs-string\x22\x3e\x27gzip\x27\x3c\/span\x3e,\n      test: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(\n        \x3cspan class=\x22hljs-string\x22\x3e\x27\\\\.(\x27\x3c\/span\x3e \x2b\n        config.build.productionGzipExtensions.join(\x3cspan class=\x22hljs-string\x22\x3e\x27|\x27\x3c\/span\x3e) \x2b\n        \x3cspan class=\x22hljs-string\x22\x3e\x27)$\x27\x3c\/span\x3e\n      ),\n      threshold: \x3cspan class=\x22hljs-number\x22\x3e10240\x3c\/span\x3e,\n      minRatio: \x3cspan class=\x22hljs-number\x22\x3e0.8\x3c\/span\x3e\n    })\n  )\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/* 如果启动了report，则通过插件给出webpack构建打包后的产品文件分析报告 *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (config.build.bundleAnalyzerReport) {\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e BundleAnalyzerPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-bundle-analyzer\x27\x3c\/span\x3e).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BundleAnalyzerPlugin())\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = webpackConfig\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3ebuild\/utils.js\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3eutils\x3c\/code\x3e提供工具函数，包括生成处理各种样式语言的\x3ccode\x3eloader\x3c\/code\x3e，获取资源文件存放路径的工具函数。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e计算资源文件存放路径\x3c\/li\x3e\n\x3cli\x3e生成\x3ccode\x3ecssLoaders\x3c\/code\x3e用于加载.vue文件中的样式\x3c\/li\x3e\n\x3cli\x3e生成\x3ccode\x3estyleLoaders\x3c\/code\x3e用于加载不在.vue文件中的单独存在的样式文件\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e详细代码注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var path = require(\x27path\x27)\nvar config = require(\x27..\/config\x27)\n\/\/ extract-text-webpack-plugin可以提取bundle中的特定文本，将提取后的文本单独存放到另外的文件\n\/\/ 这里用来提取css样式\nvar ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\n\n\/\/ 资源文件的存放路径\nexports.assetsPath = function (_path) {\n  var assetsSubDirectory = process.env.NODE_ENV === \x27production\x27\n    ? config.build.assetsSubDirectory\n    : config.dev.assetsSubDirectory\n  return path.posix.join(assetsSubDirectory, _path)\n}\n\n\/\/ 生成css、sass、scss等各种用来编写样式的语言所对应的loader配置\nexports.cssLoaders = function (options) {\n  options = options || {}\n  \/\/ css-loader配置\n  var cssLoader = {\n    loader: \x27css-loader\x27,\n    options: {\n      \/\/ 是否最小化\n      minimize: process.env.NODE_ENV === \x27production\x27,\n      \/\/ 是否使用source-map\n      sourceMap: options.sourceMap\n    }\n  }\n\n  \/\/ generate loader string to be used with extract text plugin\n  \/\/ 生成各种loader配置，并且配置了extract-text-pulgin\n  function generateLoaders (loader, loaderOptions) {\n    \/\/ 默认是css-loader\n    var loaders = [cssLoader]\n    \/\/ 如果非css，则增加一个处理预编译语言的loader并设好相关配置属性\n    \/\/ 例如generateLoaders(\x27less\x27)，这里就会push一个less-loader\n    \/\/ less-loader先将less编译成css，然后再由css-loader去处理css\n    \/\/ 其他sass、scss等语言也是一样的过程\n    if (loader) {\n      loaders.push({\n        loader: loader \x2b \x27-loader\x27,\n        options: Object.assign({}, loaderOptions, {\n          sourceMap: options.sourceMap\n        })\n      })\n    }\n\n    \/\/ Extract CSS when that option is specified\n    \/\/ (which is the case during production build)\n    if (options.extract) {\n      \/\/ 配置extract-text-plugin提取样式\n      return ExtractTextPlugin.extract({\n        use: loaders,\n        fallback: \x27vue-style-loader\x27\n      })\n    } else {\n      \/\/ 无需提取样式则简单使用vue-style-loader配合各种样式loader去处理\x3cstyle\x3e里面的样式\n      return [\x27vue-style-loader\x27].concat(loaders)\n    }\n  }\n\n  \/\/ https:\/\/vue-loader.vuejs.org\/en\/configurations\/extract-css.html\n  \/\/ 得到各种不同处理样式的语言所对应的loader\n  return {\n    css: generateLoaders(),\n    postcss: generateLoaders(),\n    less: generateLoaders(\x27less\x27),\n    sass: generateLoaders(\x27sass\x27, { indentedSyntax: true }),\n    scss: generateLoaders(\x27sass\x27),\n    stylus: generateLoaders(\x27stylus\x27),\n    styl: generateLoaders(\x27stylus\x27)\n  }\n}\n\n\/\/ Generate loaders for standalone style files (outside of .vue)\n\/\/ 生成处理单独的.css、.sass、.scss等样式文件的规则\nexports.styleLoaders = function (options) {\n  var output = []\n  var loaders = exports.cssLoaders(options)\n  for (var extension in loaders) {\n    var loader = loaders[extension]\n    output.push({\n      test: new RegExp(\x27\\\\.\x27 \x2b extension \x2b \x27$\x27),\n      use: loader\n    })\n  }\n  return output\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ extract-text-webpack-plugin可以提取bundle中的特定文本，将提取后的文本单独存放到另外的文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里用来提取css样式\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27extract-text-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 资源文件的存放路径\x3c\/span\x3e\nexports.assetsPath = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e_path\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e assetsSubDirectory = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n    ? config.build.assetsSubDirectory\n    : config.dev.assetsSubDirectory\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e path.posix.join(assetsSubDirectory, _path)\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成css、sass、scss等各种用来编写样式的语言所对应的loader配置\x3c\/span\x3e\nexports.cssLoaders = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  options = options || {}\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ css-loader配置\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cssLoader = {\n    \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否最小化\x3c\/span\x3e\n      minimize: process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否使用source-map\x3c\/span\x3e\n      sourceMap: options.sourceMap\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ generate loader string to be used with extract text plugin\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成各种loader配置，并且配置了extract-text-pulgin\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egenerateLoaders\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eloader, loaderOptions\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 默认是css-loader\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loaders = [cssLoader]\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果非css，则增加一个处理预编译语言的loader并设好相关配置属性\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例如generateLoaders(\x27less\x27)，这里就会push一个less-loader\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ less-loader先将less编译成css，然后再由css-loader去处理css\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他sass、scss等语言也是一样的过程\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (loader) {\n      loaders.push({\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: loader \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign({}, loaderOptions, {\n          \x3cspan class=\x22hljs-attr\x22\x3esourceMap\x3c\/span\x3e: options.sourceMap\n        })\n      })\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Extract CSS when that option is specified\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (which is the case during production build)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (options.extract) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 配置extract-text-plugin提取样式\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ExtractTextPlugin.extract({\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: loaders,\n        \x3cspan class=\x22hljs-attr\x22\x3efallback\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 无需提取样式则简单使用vue-style-loader配合各种样式loader去处理\x26lt;style\x26gt;里面的样式\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e [\x3cspan class=\x22hljs-string\x22\x3e\x27vue-style-loader\x27\x3c\/span\x3e].concat(loaders)\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ https:\/\/vue-loader.vuejs.org\/en\/configurations\/extract-css.html\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 得到各种不同处理样式的语言所对应的loader\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-attr\x22\x3ecss\x3c\/span\x3e: generateLoaders(),\n    \x3cspan class=\x22hljs-attr\x22\x3epostcss\x3c\/span\x3e: generateLoaders(),\n    \x3cspan class=\x22hljs-attr\x22\x3eless\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27less\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3esass\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e, { \x3cspan class=\x22hljs-attr\x22\x3eindentedSyntax\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }),\n    \x3cspan class=\x22hljs-attr\x22\x3escss\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27sass\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3estylus\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27stylus\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3estyl\x3c\/span\x3e: generateLoaders(\x3cspan class=\x22hljs-string\x22\x3e\x27stylus\x27\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Generate loaders for standalone style files (outside of .vue)\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 生成处理单独的.css、.sass、.scss等样式文件的规则\x3c\/span\x3e\nexports.styleLoaders = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e output = []\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loaders = exports.cssLoaders(options)\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e extension \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e loaders) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loader = loaders[extension]\n    output.push({\n      \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27\\\\.\x27\x3c\/span\x3e \x2b extension \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27$\x27\x3c\/span\x3e),\n      \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: loader\n    })\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e output\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3ebuild\/vue-loader.conf.js\x3c\/h3\x3e\n\x3cp\x3evue-loader.conf的配置比较简单，详细代码注释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var utils = require(\x27.\/utils\x27)\nvar config = require(\x27..\/config\x27)\nvar isProduction = process.env.NODE_ENV === \x27production\x27\n\nmodule.exports = {\n  \/\/ 处理.vue文件中的样式\n  loaders: utils.cssLoaders({\n    \/\/ 是否打开source-map\n    sourceMap: isProduction\n      ? config.build.productionSourceMap\n      : config.dev.cssSourceMap,\n    \/\/ 是否提取样式到单独的文件\n    extract: isProduction\n  }),\n  postcss: [\n    require(\x27autoprefixer\x27)({\n      browsers: [\x27iOS \x3e= 7\x27, \x27Android \x3e= 4.1\x27]\n    })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e utils = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/utils\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isProduction = process.env.NODE_ENV === \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理.vue文件中的样式\x3c\/span\x3e\n  loaders: utils.cssLoaders({\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否打开source-map\x3c\/span\x3e\n    sourceMap: isProduction\n      ? config.build.productionSourceMap\n      : config.dev.cssSourceMap,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否提取样式到单独的文件\x3c\/span\x3e\n    extract: isProduction\n  }),\n  \x3cspan class=\x22hljs-attr\x22\x3epostcss\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27autoprefixer\x27\x3c\/span\x3e)({\n      \x3cspan class=\x22hljs-attr\x22\x3ebrowsers\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27iOS \x26gt;= 7\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27Android \x26gt;= 4.1\x27\x3c\/span\x3e]\n    })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3ebuild\/dev-client.js\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3edev-client.js\x3c\/code\x3e里面主要写了浏览器端代码，用于实现\x3ccode\x3ewebpack\x3c\/code\x3e的热更新。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/* eslint-disable *\/\n\/\/ 实现浏览器端的EventSource，用于跟服务器双向通信\n\/\/ webpack热重载客户端跟dev-server上的热重载插件之间需要进行双向通信\n\/\/ 服务端webpack重新编译后，会向客户端推送信息，告诉客户端进行更新\nrequire(\x27eventsource-polyfill\x27)\n\/\/ webpack热重载客户端\nvar hotClient = require(\x27webpack-hot-middleware\/client?noInfo=true\x26amp;reload=true\x27)\n\n\/\/ 客户端收到更新动作，执行页面刷新\nhotClient.subscribe(function (event) {\n  if (event.action === \x27reload\x27) {\n    window.location.reload()\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/* eslint-disable *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 实现浏览器端的EventSource，用于跟服务器双向通信\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack热重载客户端跟dev-server上的热重载插件之间需要进行双向通信\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 服务端webpack重新编译后，会向客户端推送信息，告诉客户端进行更新\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27eventsource-polyfill\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ webpack热重载客户端\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e hotClient = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack-hot-middleware\/client?noInfo=true\x26amp;reload=true\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 客户端收到更新动作，执行页面刷新\x3c\/span\x3e\nhotClient.subscribe(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (event.action === \x3cspan class=\x22hljs-string\x22\x3e\x27reload\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.location.reload()\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3ebuild\/build.js\x3c\/h3\x3e\n\x3cp\x3e执行”\x3ccode\x3enpm run build\x3c\/code\x3e”的时候首先执行的是\x3ccode\x3ebuild\/build.js\x3c\/code\x3e文件，主要作用：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eloading动画\x3c\/li\x3e\n\x3cli\x3e删除目标文件夹\x3c\/li\x3e\n\x3cli\x3e执行webpack构建\x3c\/li\x3e\n\x3cli\x3e输出信息\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e详细代码解释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 检查NodeJS和npm的版本\nrequire(\x27.\/check-versions\x27)()\n\nprocess.env.NODE_ENV = \x27production\x27\n\n\/\/ ora，一个可以在终端显示spinner的插件\nvar ora = require(\x27ora\x27)\n\/\/ rm，用于删除文件或文件夹的插件\nvar rm = require(\x27rimraf\x27)\nvar path = require(\x27path\x27)\n\/\/ chalk，用于在控制台输出带颜色字体的插件\nvar chalk = require(\x27chalk\x27)\nvar webpack = require(\x27webpack\x27)\nvar config = require(\x27..\/config\x27)\nvar webpackConfig = require(\x27.\/webpack.prod.conf\x27)\n\nvar spinner = ora(\x27building for production...\x27)\nspinner.start() \/\/ 开启loading动画\n\n\/\/ 首先将整个dist文件夹以及里面的内容删除，以免遗留旧的没用的文件\n\/\/ 删除完成后才开始webpack构建打包\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =\x3e {\n  if (err) throw err\n  \/\/ 执行webpack构建打包，完成之后在终端输出构建完成的相关信息或者输出报错信息并退出程序\n  webpack(webpackConfig, function (err, stats) {\n    spinner.stop()\n    if (err) throw err\n    process.stdout.write(stats.toString({\n      colors: true,\n      modules: false,\n      children: false,\n      chunks: false,\n      chunkModules: false\n    }) \x2b \x27\\n\\n\x27)\n\n    if (stats.hasErrors()) {\n      console.log(chalk.red(\x27  Build failed with errors.\\n\x27))\n      process.exit(1)\n    }\n\n    console.log(chalk.cyan(\x27  Build complete.\\n\x27))\n    console.log(chalk.yellow(\n      \x27  Tip: built files are meant to be served over an HTTP server.\\n\x27 \x2b\n      \x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\n    ))\n  })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 检查NodeJS和npm的版本\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/check-versions\x27\x3c\/span\x3e)()\n\nprocess.env.NODE_ENV = \x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ ora，一个可以在终端显示spinner的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ora = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27ora\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ rm，用于删除文件或文件夹的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rm = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27rimraf\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ chalk，用于在控制台输出带颜色字体的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e chalk = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chalk\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e config = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/config\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpackConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/webpack.prod.conf\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e spinner = ora(\x3cspan class=\x22hljs-string\x22\x3e\x27building for production...\x27\x3c\/span\x3e)\nspinner.start() \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开启loading动画\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 首先将整个dist文件夹以及里面的内容删除，以免遗留旧的没用的文件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除完成后才开始webpack构建打包\x3c\/span\x3e\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 执行webpack构建打包，完成之后在终端输出构建完成的相关信息或者输出报错信息并退出程序\x3c\/span\x3e\n  webpack(webpackConfig, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eerr, stats\x3c\/span\x3e) \x3c\/span\x3e{\n    spinner.stop()\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e err\n    process.stdout.write(stats.toString({\n      colors: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n      modules: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      children: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      chunks: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n      chunkModules: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    }) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27\\n\\n\x27\x3c\/span\x3e)\n\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (stats.hasErrors()) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.red(\x3cspan class=\x22hljs-string\x22\x3e\x27  Build failed with errors.\\n\x27\x3c\/span\x3e))\n      process.exit(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n    }\n\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.cyan(\x3cspan class=\x22hljs-string\x22\x3e\x27  Build complete.\\n\x27\x3c\/span\x3e))\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.yellow(\n      \x3cspan class=\x22hljs-string\x22\x3e\x27  Tip: built files are meant to be served over an HTTP server.\\n\x27\x3c\/span\x3e \x2b\n      \x3cspan class=\x22hljs-string\x22\x3e\x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\x3c\/span\x3e\n    ))\n  })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3ebuild\/check-versions.js\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3echeck-version.js\x3c\/code\x3e完成对node和npm的版本检测,详细代码解释：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ chalk, 用于在控制台输出带颜色字体的插件\nvar chalk = require(\x27chalk\x27)\n\/\/ semver, 语义化版本检查插件（The semantic version parser used by npm）\nvar semver = require(\x27semver\x27)\nvar packageConfig = require(\x27..\/package.json\x27)\n\/\/ shelljs, 执行Unix命令行的插件\nvar shell = require(\x27shelljs\x27)\n\/\/ 开辟子进程执行指令cmd并返回结果\nfunction exec (cmd) {\n  return require(\x27child_process\x27).execSync(cmd).toString().trim()\n}\n\n\/\/ node和npm版本需求\nvar versionRequirements = [\n  {\n    name: \x27node\x27,\n    currentVersion: semver.clean(process.version),\n    versionRequirement: packageConfig.engines.node\n  }\n]\n\nif (shell.which(\x27npm\x27)) {\n  versionRequirements.push({\n    name: \x27npm\x27,\n    currentVersion: exec(\x27npm --version\x27),\n    versionRequirement: packageConfig.engines.npm\n  })\n}\n\nmodule.exports = function () {\n  var warnings = []\n  \/\/ 依次判断版本是否符合要求\n  for (var i = 0; i \x3c versionRequirements.length; i\x2b\x2b) {\n    var mod = versionRequirements[i]\n    if (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) {\n      warnings.push(mod.name \x2b \x27: \x27 \x2b\n        chalk.red(mod.currentVersion) \x2b \x27 should be \x27 \x2b\n        chalk.green(mod.versionRequirement)\n      )\n    }\n  }\n  \/\/ 如果有警告则将其输出到控制台\n  if (warnings.length) {\n    console.log(\x27\x27)\n    console.log(chalk.yellow(\x27To use this template, you must update following to modules:\x27))\n    console.log()\n    for (var i = 0; i \x3c warnings.length; i\x2b\x2b) {\n      var warning = warnings[i]\n      console.log(\x27  \x27 \x2b warning)\n    }\n    console.log()\n    process.exit(1)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ chalk, 用于在控制台输出带颜色字体的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e chalk = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chalk\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ semver, 语义化版本检查插件（The semantic version parser used by npm）\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e semver = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27semver\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e packageConfig = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/package.json\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ shelljs, 执行Unix命令行的插件\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e shell = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27shelljs\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开辟子进程执行指令cmd并返回结果\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eexec\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ecmd\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27child_process\x27\x3c\/span\x3e).execSync(cmd).toString().trim()\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ node和npm版本需求\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e versionRequirements = [\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27node\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecurrentVersion\x3c\/span\x3e: semver.clean(process.version),\n    \x3cspan class=\x22hljs-attr\x22\x3eversionRequirement\x3c\/span\x3e: packageConfig.engines.node\n  }\n]\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (shell.which(\x3cspan class=\x22hljs-string\x22\x3e\x27npm\x27\x3c\/span\x3e)) {\n  versionRequirements.push({\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27npm\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecurrentVersion\x3c\/span\x3e: exec(\x3cspan class=\x22hljs-string\x22\x3e\x27npm --version\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3eversionRequirement\x3c\/span\x3e: packageConfig.engines.npm\n  })\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e warnings = []\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 依次判断版本是否符合要求\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; versionRequirements.length; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mod = versionRequirements[i]\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!semver.satisfies(mod.currentVersion, mod.versionRequirement)) {\n      warnings.push(mod.name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27: \x27\x3c\/span\x3e \x2b\n        chalk.red(mod.currentVersion) \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27 should be \x27\x3c\/span\x3e \x2b\n        chalk.green(mod.versionRequirement)\n      )\n    }\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果有警告则将其输出到控制台\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (warnings.length) {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(chalk.yellow(\x3cspan class=\x22hljs-string\x22\x3e\x27To use this template, you must update following to modules:\x27\x3c\/span\x3e))\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log()\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; warnings.length; i\x2b\x2b) {\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e warning = warnings[i]\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27  \x27\x3c\/span\x3e \x2b warning)\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log()\n    process.exit(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e4.config文件夹分析\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3econfig\/index.js\x3c\/h3\x3e\n\x3cp\x3e这里面描述了开发和构建两种环境下的配置，前面的build文件夹下也有不少文件引用了index.js里面的配置。详细代码注释如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\nvar path = require(\x27path\x27)\n\nmodule.exports = {\n  \/\/ 构建产品时使用的配置\n  build: {\n    \/\/ 环境变量\n    env: require(\x27.\/prod.env\x27),\n    \/\/ html入口文件\n    index: path.resolve(__dirname, \x27..\/dist\/index.html\x27),\n    \/\/ 产品文件的存放路径\n    assetsRoot: path.resolve(__dirname, \x27..\/dist\x27),\n    \/\/ 二级目录，存放静态资源文件的目录，位于dist文件夹下\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 发布路径，如果构建后的产品文件有用于发布CDN或者放到其他域名的服务器，可以在这里进行设置\n    \/\/ 设置之后构建的产品文件在注入到index.html中的时候就会带上这里的发布路径\n    assetsPublicPath: \x27\/\x27,\n    \/\/ 是否使用source-map\n    productionSourceMap: true,\n    \/\/ Gzip off by default as many popular static hosts such as\n    \/\/ Surge or Netlify already gzip all static assets for you.\n    \/\/ Before setting to `true`, make sure to:\n    \/\/ npm install --save-dev compression-webpack-plugin\n    \/\/ 是否开启gzip压缩\n    productionGzip: false,\n    \/\/ gzip模式下需要压缩的文件的扩展名，设置js、css之后就只会对js和css文件进行压缩\n    productionGzipExtensions: [\x27js\x27, \x27css\x27],\n    \/\/ Run the build command with an extra argument to\n    \/\/ View the bundle analyzer report after build finishes:\n    \/\/ `npm run build --report`\n    \/\/ Set to `true` or `false` to always turn it on or off\n    \/\/ 是否展示webpack构建打包之后的分析报告\n    bundleAnalyzerReport: process.env.npm_config_report\n  },\n  \/\/ 开发过程中使用的配置\n  dev: {\n    \/\/ 环境变量\n    env: require(\x27.\/dev.env\x27),\n    \/\/ dev-server监听的端口\n    port: 8080,\n    \/\/ 是否自动打开浏览器\n    autoOpenBrowser: true,\n    \/\/ 静态资源文件夹\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 发布路径\n    assetsPublicPath: \x27\/\x27,\n    \/\/ 代理配置表，在这里可以配置特定的请求代理到对应的API接口\n    \/\/ 例如将\x27localhost:8080\/api\/xxx\x27代理到\x27www.example.com\/api\/xxx\x27\n    proxyTable: {},\n    \/\/ CSS Sourcemaps off by default because relative paths are \x26quot;buggy\x26quot;\n    \/\/ with this option, according to the CSS-Loader README\n    \/\/ (https:\/\/github.com\/webpack\/css-loader#sourcemaps)\n    \/\/ In our experience, they generally work as expected,\n    \/\/ just be aware of this issue when enabling this option.\n    \/\/ 是否开启 cssSourceMap\n    cssSourceMap: false\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 构建产品时使用的配置\x3c\/span\x3e\n  build: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 环境变量\x3c\/span\x3e\n    env: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/prod.env\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ html入口文件\x3c\/span\x3e\n    index: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\/index.html\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 产品文件的存放路径\x3c\/span\x3e\n    assetsRoot: path.resolve(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27..\/dist\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 二级目录，存放静态资源文件的目录，位于dist文件夹下\x3c\/span\x3e\n    assetsSubDirectory: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发布路径，如果构建后的产品文件有用于发布CDN或者放到其他域名的服务器，可以在这里进行设置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置之后构建的产品文件在注入到index.html中的时候就会带上这里的发布路径\x3c\/span\x3e\n    assetsPublicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否使用source-map\x3c\/span\x3e\n    productionSourceMap: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Gzip off by default as many popular static hosts such as\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Surge or Netlify already gzip all static assets for you.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Before setting to `true`, make sure to:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ npm install --save-dev compression-webpack-plugin\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否开启gzip压缩\x3c\/span\x3e\n    productionGzip: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ gzip模式下需要压缩的文件的扩展名，设置js、css之后就只会对js和css文件进行压缩\x3c\/span\x3e\n    productionGzipExtensions: [\x3cspan class=\x22hljs-string\x22\x3e\x27js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css\x27\x3c\/span\x3e],\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Run the build command with an extra argument to\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ View the bundle analyzer report after build finishes:\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ `npm run build --report`\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Set to `true` or `false` to always turn it on or off\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否展示webpack构建打包之后的分析报告\x3c\/span\x3e\n    bundleAnalyzerReport: process.env.npm_config_report\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 开发过程中使用的配置\x3c\/span\x3e\n  dev: {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 环境变量\x3c\/span\x3e\n    env: \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/dev.env\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ dev-server监听的端口\x3c\/span\x3e\n    port: \x3cspan class=\x22hljs-number\x22\x3e8080\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否自动打开浏览器\x3c\/span\x3e\n    autoOpenBrowser: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 静态资源文件夹\x3c\/span\x3e\n    assetsSubDirectory: \x3cspan class=\x22hljs-string\x22\x3e\x27static\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发布路径\x3c\/span\x3e\n    assetsPublicPath: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 代理配置表，在这里可以配置特定的请求代理到对应的API接口\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 例如将\x27localhost:8080\/api\/xxx\x27代理到\x27www.example.com\/api\/xxx\x27\x3c\/span\x3e\n    proxyTable: {},\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ CSS Sourcemaps off by default because relative paths are \x22buggy\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ with this option, according to the CSS-Loader README\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ (https:\/\/github.com\/webpack\/css-loader#sourcemaps)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ In our experience, they generally work as expected,\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ just be aware of this issue when enabling this option.\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 是否开启 cssSourceMap\x3c\/span\x3e\n    cssSourceMap: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3econfig\/dev.env.js、config\/prod.env.js和config\/test.env.js\x3c\/h3\x3e\n\x3cp\x3e这三个文件就简单设置了环境变量。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>vue+vuecli+webapck2项目配置文件详解</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013883633">https://segmentfault.com/a/1190000013883633</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/s1ir7xcr9ja/" target="_blank">https://alili.tech/archive/s1ir7xcr9ja/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>