<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="通俗的方式理解动态类型，静态类型；强类型，弱类型"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>通俗的方式理解动态类型，静态类型；强类型，弱类型 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/scxo263m7cc/",
				"appid": "1613049289050283", 
				"title": "通俗的方式理解动态类型，静态类型；强类型，弱类型 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-22T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/ngr6ejk47z8/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ko3hbu2eeqc/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&text=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&text=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&title=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&is_video=false&description=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&title=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&title=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&title=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fscxo263m7cc%2f&title=%e9%80%9a%e4%bf%97%e7%9a%84%e6%96%b9%e5%bc%8f%e7%90%86%e8%a7%a3%e5%8a%a8%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%8c%e9%9d%99%e6%80%81%e7%b1%bb%e5%9e%8b%ef%bc%9b%e5%bc%ba%e7%b1%bb%e5%9e%8b%ef%bc%8c%e5%bc%b1%e7%b1%bb%e5%9e%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">通俗的方式理解动态类型，静态类型；强类型，弱类型</h1><div class="meta"><div class="postdate"><time datetime="2018-12-22" itemprop="datePublished">2018-12-22</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e0 x 01 引言\x3c\/h2\x3e\n\x3cp\x3e今天和一个朋友讨论 C\x2b\x2b 是强类型还是弱类型的时候，他告诉我 C\x2b\x2b 是强类型的，他和我说因为 C\x2b\x2b 在写的时候需要 int，float 等等关键字去定义变量，因此 C\x2b\x2b 是强类型的，我告诉他 C\x2b\x2b 是弱类型的他竟然还嘲笑我不懂基础。\x3c\/p\x3e\n\x3cp\x3e我又尝试去问了另外一个同学 Python 是强类型还是弱类型的时候，得到的竟然是弱类型，就因为定义变量没有 int，float！\x3c\/p\x3e\n\x3cp\x3e然后我想找一些网上的资料试图告诉他们他们是错的（我是对的），结果发现网上的资料大多为了严谨结果把简单的问题（其实并不简单）说的很复杂。比如：知乎上的一些 \x3ca href=\x22https:\/\/www.zhihu.com\/question\/19918532\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e回答\x3c\/a\x3e。所以用通俗的方式，以大多数程序猿（媛）所需要了解的知识去介绍类型系统，但是又不丧失严谨性就是这篇文章写的意义。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e0 x 02 什么是动态（静态）类型，强（弱）类型\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e基础版本\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e编译时就知道变量类型的是静态类型；运行时才知道一个变量类型的叫做动态类型\x3c\/strong\x3e。比如：\x3c\/p\x3e\n\x3cp\x3e编译器在将 \x3ccode\x3e int age = 18; \x3c\/code\x3e 这段代码编译的时候就会把 age 的类型确定，换言之，你不能对他进行除以 0 的操作等等，因为类型本身就定义了可操作的集合；但是像 C\x2b\x2b 里常见的 \x3ccode\x3eauto ite = vec.iterator();\x3c\/code\x3e 这种也属于静态类型，这种叫做\x3cstrong\x3e类型推导\x3c\/strong\x3e，通过已知的类型在\x3cstrong\x3e编译时期\x3c\/strong\x3e推导出不知道的变量的类型。在静态类型语言中对一个变量做该变量类型所不允许的操作会报出\x3cstrong\x3e语法错误\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e但是像 \x3ccode\x3evar name = student.getName();\x3c\/code\x3e 这行 JavaScript 代码就是动态类型的，因为这行代码只有在被执行的时候才知道 name 是字符串类型的，甚至是 null 或 undefined 类型。你也没办法进行类型推导，因为 \x3cstrong\x3estudent.getName\x3c\/strong\x3e 函数签名根本不包含返回值类型信息。后面会介绍通过一些其他手段来给函数签名加上类型。在动态类型中对一个变量做该变量类型所不允许的操作会报出\x3cstrong\x3e运行时错误\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e不允许隐式转换的是强类型，允许隐式转换的是弱类型\x3c\/strong\x3e。比如：\x3c\/p\x3e\n\x3cp\x3e在 Python 中进行 \x3ccode\x3e\x27666\x27 \/ 2\x3c\/code\x3e 你会得到一个\x3cstrong\x3e类型错误\x3c\/strong\x3e，这是因为强类型语言中是不允许隐式转换的，而在 JavaScript 中进行 \x3ccode\x3e\x27666\x27 \/ 2\x3c\/code\x3e 你会得到整数 333，这是因为在执行运算的时候字符串 \x27666\x27 先被转换成整数 666，然后再进行除法运算。    \x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e高级版本\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e需要先介绍一些基本概念：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eProgram Errors（程序错误）\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3etrapped errors：导致程序终止执行（程序\x3cstrong\x3e意识\x3c\/strong\x3e到出错，\x3cstrong\x3e使用\x3c\/strong\x3e对应的错误处理机制），如除 0，Java 中数组越界访问\x3c\/li\x3e\n\x3cli\x3euntrapped errors：程序出错后继续执行（其实并不一定保证继续执行，程序本身并\x3cstrong\x3e不知道\x3c\/strong\x3e出错，也\x3cstrong\x3e没有\x3c\/strong\x3e对应的错误处理机制），如 C 语言里的缓冲区溢出，Jmp 到错误地址\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cstrong\x3eForbidden Behaviors（禁止行为）\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e程序在设计的时候会定义一组 forbidden behaviors，包括了所有的 untrapped errors，可能包括 trapped errors。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eWell behaved、ill behaved\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ewell behaved: 如果程序的执行不可能出现 forbidden behaviors，则称为 well behaved\x3c\/li\x3e\n\x3cli\x3eill behaved: 只要有可能出现 forbidden behaviors，则称为 ill behaved\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e他们之间的关系可以用下图来表达：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012372377?w=325\x26amp;h=238\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012372377?w=325\x26amp;h=238\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e从图中可以看出，绿色的 program 表示所有程序（所有程序，你能想到和不能想到的），error 表示出错的程序，error 不仅仅包括 trapped error 和 untrapped error。\x3c\/p\x3e\n\x3cp\x3e根据图我们可以严格的定义动态类型，静态类型；强类型，弱类型\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e强类型：如果一门语言写出来的程序在红色矩形外部，则这门语言是强类型的，也就是上面说的 well behaved\x3c\/li\x3e\n\x3cli\x3e弱类型：如果一门语言写出来的程序可能在红色矩形内部，则这门语言是弱类型的，也就是上面说的 ill behaved\x3c\/li\x3e\n\x3cli\x3e静态类型：一门语言在\x3cstrong\x3e编译\x3c\/strong\x3e时排除可能出现在红色矩形内的情况（通过语法报错），则这门语言是\x3cstrong\x3e静态类型\x3c\/strong\x3e的\x3c\/li\x3e\n\x3cli\x3e动态类型：一门语言在\x3cstrong\x3e运行\x3c\/strong\x3e时排除可能出现在红色矩形内的情况（通过运行时报错，但如果是弱类型可能会触发 untrapped error，比如隐式转换，使得程序看起来似乎是正常运行的），则这门语言是\x3cstrong\x3e动态类型\x3c\/strong\x3e的\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e举个栗子：\x3c\/p\x3e\n\x3cp\x3e在 Python 中执行 \x3ccode\x3etest = \x27666\x27 \/ 3\x3c\/code\x3e 你会在运行时得到一个 TypeError 错误，相当于运行时排除了 untrapped error，因此 Python 是动态类型，强类型语言。\x3c\/p\x3e\n\x3cp\x3e在 JavaScript 中执行 \x3ccode\x3evar test = \x27666\x27 \/ 3\x27\x3c\/code\x3e 你会发现 test 的值变成了 222，因为这里发生了隐式转换，因此 JavaScript 是动态类型，弱类型的。更为夸张的是 \x3ccode\x3e[] == ![]\x3c\/code\x3e 这样的代码在 JavaScript 中返回的是 true，这里是具体的 \x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000011007975\x22\x3e原因\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e在 Java 中执行 \x3ccode\x3eint[] arr = new int[10]; arr[0] = \x27666\x27 \/ 3;\x3c\/code\x3e 你会在编译时期得到一个语法错误，这说明 Java 是静态类型的，执行 \x3ccode\x3eint[] arr = new int[10]; arr[11] = 3;\x3c\/code\x3e 你会在运行时得到数组越界的错误（trapped error），这说明 Java 通过自身的类型系统排除了 \x3cstrong\x3euntrapped error\x3c\/strong\x3e，因此 Java 是强类型的。\x3c\/p\x3e\n\x3cp\x3e而 C 与 Java 类似，也是静态类型的，但是对于 \x3ccode\x3eint test[] = { 1, 2, 3 }; test[4] = 5;\x3c\/code\x3e 这样的代码 C 语言是没办法发现你的问题的，因此这是 \x3cstrong\x3euntrapped error\x3c\/strong\x3e，因此我们说 C 是弱类型的。\x3c\/p\x3e\n\x3cp\x3e下图是常见的语言类型的划分：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012372378?w=500\x26amp;h=337\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012372378?w=500\x26amp;h=337\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e另外，由于强类型语言一般需要在运行时运行一套类型检查系统，因此强类型语言的速度一般比弱类型要慢，动态类型也比静态类型慢，因此在上述所说的四种语言中执行的速度应该是 C \x26gt; Java \x26gt; JavaScript \x26gt; Python。但是强类型，静态类型的语言写起来往往是最安全的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e0 x 03 动态类型与静态类型的区别，如何利用好动态类型\x3c\/h2\x3e\n\x3cp\x3e静态类型由于在编译期会进行优化，所以一般来说性能是比较高的。而动态语言在进行类型操作的时候（比如字符串拼接，整数运算）还需要解释器去猜测其类型，因此性能很低；但是现代的解释器一般会有一些优化措施来提升速度，拿 JavaScript 的 V8 解释器举个栗子：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eV8 的优化过程（粗略版本）\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们知道，像 Java \/ C\x2b\x2b 这样的静态类型语言对于对象一般都会有个类模板（一般调用函数的时候都是去类模板找的）。而像 V8 这种则是会在运行时创建类模板，从而在访问属性或调用方法的时候仅需要计算该属性在类模板中的偏移就可以了；传统的 JavaScript 对象一般是通过 Hash 或 Trie 树实现的，但是查找的效率很低。拿一段代码举例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Point(x, y) { \nthis.x = x; \nthis.y = y; \n} \nvar p1 = new Point(1, 2);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePoint\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex, y\x3c\/span\x3e) \x3c\/span\x3e{ \n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = x; \n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = y; \n} \n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p1 = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Point(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在使用 new 调用 Point 函数的时候会先生成一个 class0 类模板（运行时生成），执行 \x3ccode\x3ethis.x = x\x3c\/code\x3e 的时候会生成 class1 类模板，执行 \x3ccode\x3ethis.y = y\x3c\/code\x3e 的时候会生成 class2 类模板。具体的转换过程如下图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012372379?w=633\x26amp;h=416\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012372379?w=633\x26amp;h=416\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e为一个对象确定一个类模板可以极大的提升属性的访问速度，类模板的确定就是通过走图里的路径（转换路径）。每当你增加或删除对象的属性的时候都会导致对象的类模板发生改变，甚至你增加的顺序不同也会生成不同的类模板！\x3c\/p\x3e\n\x3cp\x3eV8 如果发现一个方法被调用（传入相同类型的参数）多次时，会使用 JIT 将函数编译成二进制代码，从而提升速度。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e结合 V8 总结的优化方案：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e不要轻易的增加删除一个对象的属性，对于已有的属性尽量做到保证类型的不变，保证隐藏类尽可能被复用\x3c\/li\x3e\n\x3cli\x3e实例化属性的时候尽可能保证属性添加的顺序一致性，保证隐藏类和优化代码可以被复用\x3c\/li\x3e\n\x3cli\x3e尽可能重复调用方法，传的参数的个数和类型要在多次调用时要保持一致\x3c\/li\x3e\n\x3cli\x3e对于数组，最好使用 push，unshift 等方法去改变数组大小，紧密的数组在 V8 中是以连续的地址存的，不要随意去删除数组中的元素，因为稀疏数组在 V8 中是一个 hash 表\x3c\/li\x3e\n\x3cli\x3eV8 存储整数用的是 4 个字节，出现大整数时将会涉及到隐式类型转换，性能降低，因此尽量不要让整数超过 32 bit\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e0 x 04 如何避免弱类型语言所带来的问题\x3c\/h2\x3e\n\x3cp\x3e弱类型语言由于在运行时缺乏类型系统，因此很容易出现类型操作上的 untrapped error；C 语言中我们前面介绍了数组访问越界的情况，这里我们以弱类型语言 JavaScript 为例：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e尽量使用严格比较符号，如：\x3ccode\x3e===\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e尽量不要让字符串与其他类型的变量进行运算操作\x3c\/li\x3e\n\x3cli\x3e复杂对象不要在运算符上进行操作\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e0 x 05 语言类型静态化的方案\x3c\/h2\x3e\n\x3cp\x3e像 JavaScript 这种动态类型的语言静态化后对运行时的安全性，效率肯定会有很大的提升的，目前有 TypeScript 这种预编译的方案；还有就是像 flow 这样的通过注释来标识类型的方案。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e0 x 06 总结\x3c\/h2\x3e\n\x3cp\x3e写到最后，我才发现文章的标题没取好，就这样吧。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>通俗的方式理解动态类型，静态类型；强类型，弱类型</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012372372">https://segmentfault.com/a/1190000012372372</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/scxo263m7cc/" target="_blank">https://alili.tech/archive/scxo263m7cc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>