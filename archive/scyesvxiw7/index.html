<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从零搭建React全家桶框架教程"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从零搭建React全家桶框架教程 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/scyesvxiw7/",
				"appid": "1613049289050283", 
				"title": "从零搭建React全家桶框架教程 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-02T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/y3ogrk0nwid/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/6axaz576yu4/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&text=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&text=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&title=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&is_video=false&description=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&title=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&title=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&title=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fscyesvxiw7%2f&title=%e4%bb%8e%e9%9b%b6%e6%90%ad%e5%bb%baReact%e5%85%a8%e5%ae%b6%e6%a1%b6%e6%a1%86%e6%9e%b6%e6%95%99%e7%a8%8b"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从零搭建React全家桶框架教程</h1><div class="meta"><div class="postdate"><time datetime="2019-01-02" itemprop="datePublished">2019-01-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e从零搭建React全家桶框架教程\x3c\/h1\x3e\n\x3cp\x3e源码地址：\x3ca href=\x22https:\/\/github.com\/brickspert\/react-family\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/brickspert\/react-family\x3c\/a\x3e 欢迎star\x3cbr\x3e提问反馈：\x3ca href=\x22https:\/\/github.com\/brickspert\/blog\/issues\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eblog\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e原文地址:\x3ca href=\x22https:\/\/github.com\/brickspert\/blog\/issues\/1\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/brickspert\/blog\/issues\/1\x3c\/a\x3e(github这里我会不断更新教程的)\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e此处不更新，github上会一直更新\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e写在前面\x3c\/h1\x3e\n\x3cp\x3e当我第一次跟着项目做\x3ccode\x3ereact\x3c\/code\x3e项目的时候，由于半截加入的，对框架了解甚少，只能跟着别人的样板写。对整个框架没有一点了解。\x3c\/p\x3e\n\x3cp\x3e做项目，总是要解决各种问题的，所以每个地方都需要去了解，但是对整个框架没有一个整体的了解，实在是不行。\x3c\/p\x3e\n\x3cp\x3e期间，我也跟着别人的搭建框架的教程一步一步的走，但是经常因为自己太菜，走不下去。在经过各种蹂躏之后，对整个框架也有一个大概的了解，\x3cbr\x3e我就想把他写下来，让后来的菜鸟能跟着我的教程对\x3ccode\x3ereact\x3c\/code\x3e全家桶有一个全面的认识。\x3c\/p\x3e\n\x3cp\x3e我的这个教程，从新建根文件夹开始，到成型的框架，每个文件为什么要建立？建立了干什么？每个依赖都是干什么的？一步一步写下来，供大家学习。\x3c\/p\x3e\n\x3cp\x3e当然，这个框架我以后会一直维护的，\x3cstrong\x3e也希望大家能一起来完善这个框架\x3c\/strong\x3e，如果您有任何建议，欢迎留言，欢迎\x3ccode\x3efork\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e在完善本框架的同时，我准备再新建一个兼容\x3ccode\x3eie8\x3c\/code\x3e的框架\x3ccode\x3ereact-family-ie8\x3c\/code\x3e，当然是基于该框架改造的。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e说明\x3c\/h1\x3e\n\x3col\x3e\x3cli\x3e每个命令行块都是以\x3cstrong\x3e根目录\x3c\/strong\x3e为基础的。例如下面命令行块，都是基于根目录的。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/pages\nmkdir Home\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/pages\nmkdir Home\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e技术栈均是目前最新的。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cul\x3e\n\x3cli\x3ereact 15.6.1\x3c\/li\x3e\n\x3cli\x3ereact-router-dom 4.2.2\x3c\/li\x3e\n\x3cli\x3eredux 3.7.2\x3c\/li\x3e\n\x3cli\x3ewebpack 3.5.5\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3col\x3e\x3cli\x3e目录说明\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22│  .babelrc                          #babel配置文件\n│  package-lock.json\n│  package.json\n│  README.MD\n│  webpack.config.js                 #webpack生产配置文件\n│  webpack.dev.config.js             #webpack开发配置文件\n│  \n├─dist\n├─public                             #公共资源文件\n└─src                                #项目源码\n    │  index.html                    #index.html模板\n    │  index.js                      #入口文件\n    │  \n    ├─component                      #组建库\n    │  └─Hello\n    │          Hello.js\n    │          \n    ├─pages                          #页面目录\n    │  ├─Counter\n    │  │      Counter.js\n    │  │      \n    │  ├─Home\n    │  │      Home.js\n    │  │      \n    │  ├─Page1\n    │  │  │  Page1.css                #页面样式\n    │  │  │  Page1.js\n    │  │  │  \n    │  │  └─images                    #页面图片\n    │  │          brickpsert.jpg\n    │  │          \n    │  └─UserInfo\n    │          UserInfo.js\n    │          \n    ├─redux\n    │  │  reducers.js\n    │  │  store.js\n    │  │  \n    │  ├─actions\n    │  │      counter.js\n    │  │      userInfo.js\n    │  │      \n    │  ├─middleware\n    │  │      promiseMiddleware.js\n    │  │      \n    │  └─reducers\n    │          counter.js\n    │          userInfo.js\n    │          \n    └─router                        #路由文件\n            Bundle.js\n            router.js\n            \n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e│  .babelrc                          #babel配置文件\n│  package-lock.json\n│  package.json\n│  README.MD\n│  webpack.config.js                 #webpack生产配置文件\n│  webpack.dev.config.js             #webpack开发配置文件\n│  \n├─dist\n├─public                             #公共资源文件\n└─src                                #项目源码\n    │  index.html                    #index.html模板\n    │  index.js                      #入口文件\n    │  \n    ├─component                      #组建库\n    │  └─Hello\n    │          Hello.js\n    │          \n    ├─pages                          #页面目录\n    │  ├─Counter\n    │  │      Counter.js\n    │  │      \n    │  ├─Home\n    │  │      Home.js\n    │  │      \n    │  ├─Page1\n    │  │  │  Page1.css                #页面样式\n    │  │  │  Page1.js\n    │  │  │  \n    │  │  └─images                    #页面图片\n    │  │          brickpsert.jpg\n    │  │          \n    │  └─UserInfo\n    │          UserInfo.js\n    │          \n    ├─redux\n    │  │  reducers.js\n    │  │  store.js\n    │  │  \n    │  ├─actions\n    │  │      counter.js\n    │  │      userInfo.js\n    │  │      \n    │  ├─middleware\n    │  │      promiseMiddleware.js\n    │  │      \n    │  └─reducers\n    │          counter.js\n    │          userInfo.js\n    │          \n    └─router                        #路由文件\n            Bundle.js\n            router.js\n            \n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader3\x22\x3einit项目\x3c\/h1\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e创建文件夹并进入\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22`mkdir react-family \x26amp;\x26amp; cd react-family`\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs autohotkey\x22\x3e\x3ccode\x3e`mkdir react-family \x26amp;\x26amp; cd react-family`\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3einit npm\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22`npm init` 按照提示填写项目基本信息\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs autohotkey\x22\x3e\x3ccode\x3e`npm init` 按照提示填写项目基本信息\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader4\x22\x3ewebpack\x3c\/h1\x3e\n\x3col\x3e\n\x3cli\x3e安装 \x3ccode\x3ewebpack\x3c\/code\x3e\x3cp\x3e\x3ccode\x3enpm install --save-dev webpack\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3eQ: 什么时候用\x3ccode\x3e--save-dev\x3c\/code\x3e，什么时候用\x3ccode\x3e--save\x3c\/code\x3e？\x3c\/p\x3e\n\x3cp\x3eA:  \x3ccode\x3e--save-dev\x3c\/code\x3e 是你开发时候依赖的东西，\x3ccode\x3e--save\x3c\/code\x3e 是你发布之后还依赖的东西。看\x3ca href=\x22https:\/\/segmentfault.com\/q\/1010000005163089\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e根据\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/getting-started\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack文档\x3c\/a\x3e编写最基础的配置文件\x3c\/p\x3e\n\x3cp\x3e新建\x3ccode\x3ewebpack\x3c\/code\x3e开发配置文件 \x3ccode\x3etouch webpack.dev.config.js\x3c\/code\x3e \x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const path = require(\x27path\x27);\n\nmodule.exports = {\n \n    \/*入口*\/\n    entry: path.join(__dirname, \x27src\/index.js\x27),\n    \n    \/*输出到dist文件夹，输出文件名字为bundle.js*\/\n    output: {\n        path: path.join(__dirname, \x27.\/dist\x27),\n        filename: \x27bundle.js\x27\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n \n    \x3cspan class=\x22hljs-comment\x22\x3e\/*入口*\/\x3c\/span\x3e\n    entry: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/index.js\x27\x3c\/span\x3e),\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/*输出到dist文件夹，输出文件名字为bundle.js*\/\x3c\/span\x3e\n    output: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3c\/li\x3e\n\x3cli\x3e学会使用\x3ccode\x3ewebpack\x3c\/code\x3e编译文件\x3cp\x3e新建入口文件\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3emkdir src \x26amp;\x26amp; touch .\/src\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e 添加内容\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edocument.getElementById(\x27app\x27).innerHTML = \x22Webpack works\x22\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e现在我们执行命令 \x3ccode\x3ewebpack --config webpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e我们可以看到生成了\x3ccode\x3edist\x3c\/code\x3e文件夹和\x3ccode\x3ebundle.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e现在我们测试下~\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edist\x3c\/code\x3e文件夹下面新建一个\x3ccode\x3eindex.html\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3etouch .\/dist\/index.html\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3edist\/index.html\x3c\/code\x3e填写内容\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!doctype html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3eDocument\x3c\/title\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n\x3cdiv id=\x26quot;app\x26quot;\x3e\x3c\/div\x3e\n\x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;.\/bundle.js\x26quot; charset=\x26quot;utf-8\x26quot;\x3e\x3c\/script\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!doctype html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eDocument\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22.\/bundle.js\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用浏览器打开\x3ccode\x3eindex.html\x3c\/code\x3e,可以看到\x3ccode\x3eWebpack works\x3c\/code\x3e!\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981893\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981893\x22 alt=\x22webpack\x22 title=\x22webpack\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e现在回头看下，我们做了什么或者说\x3ccode\x3ewebpack\x3c\/code\x3e做了什么。\x3c\/p\x3e\n\x3cp\x3e把入口文件 \x3ccode\x3eindex.js\x3c\/code\x3e 经过处理之后，生成 \x3ccode\x3ebundle.js\x3c\/code\x3e。就这么简单。\x3c\/p\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader5\x22\x3ebabel\x3c\/h1\x3e\n\x3cblockquote\x3e\x3cp\x3eBabel 把用最新标准编写的 JavaScript 代码向下编译成可以在今天随处可用的版本。 这一过程叫做“源码到源码”编译， 也被称为转换编译。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e通俗的说，就是我们可以用ES6, ES7等来编写代码，Babel会把他们统统转为ES5。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/babel\/babel\/tree\/master\/packages\/babel-core\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-core\x3c\/a\x3e 调用Babel的API进行转码\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/babel\/babel-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-loader\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/babel\/babel\/tree\/master\/packages\/babel-preset-es2015\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-preset-es2015\x3c\/a\x3e 用于解析 ES6\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/babel\/babel\/tree\/master\/packages\/babel-preset-react\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-preset-react\x3c\/a\x3e 用于解析 JSX\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/babel\/babel\/tree\/master\/packages\/babel-preset-stage-0\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-preset-stage-0\x3c\/a\x3e 用于解析 ES7 提案\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save-dev babel-core  babel-loader babel-preset-es2015 babel-preset-react babel-preset-stage-0\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e新建\x3ccode\x3ebabel\x3c\/code\x3e配置文件\x3ccode\x3e.babelrc\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3etouch .babelrc\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e.babelrc\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 {\n   \x26quot;presets\x26quot;: [\n     \x26quot;es2015\x26quot;,\n     \x26quot;react\x26quot;,\n     \x26quot;stage-0\x26quot;\n   ],\n   \x26quot;plugins\x26quot;: []\n }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e {\n   \x3cspan class=\x22hljs-attr\x22\x3e\x22presets\x22\x3c\/span\x3e: [\n     \x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e,\n     \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e,\n     \x3cspan class=\x22hljs-string\x22\x3e\x22stage-0\x22\x3c\/span\x3e\n   ],\n   \x3cspan class=\x22hljs-attr\x22\x3e\x22plugins\x22\x3c\/span\x3e: []\n }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e，增加\x3ccode\x3ebabel-loader\x3c\/code\x3e！\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \/*src文件夹下面的以.js结尾的文件，要使用babel解析*\/\n \/*cacheDirectory是用来缓存编译结果，下次编译加速*\/\n module: {\n     rules: [{\n         test: \/\\.js$\/,\n         use: [\x27babel-loader?cacheDirectory=true\x27],\n         include: path.join(__dirname, \x27src\x27)\n     }]\n }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e \/*src文件夹下面的以.js结尾的文件，要使用babel解析*\/\n \/*cacheDirectory是用来缓存编译结果，下次编译加速*\/\n module: {\n     rules: [{\n         test: \/\\.js$\/,\n         use: [\x27babel-loader?cacheDirectory=\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\x27],\n         include: path.join(__dirname, \x27src\x27)\n     }]\n }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们简单测试下，是否能正确转义ES6~\x3c\/p\x3e\n\x3cp\x3e修改 \x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 \/*使用es6的箭头函数*\/\n var func = str =\x3e {\n     document.getElementById(\x27app\x27).innerHTML = str;\n };\n func(\x27我现在在使用Babel!\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/*使用es6的箭头函数*\/\x3c\/span\x3e\n \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e func = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3estr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n     \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e).innerHTML = str;\n };\n func(\x3cspan class=\x22hljs-string\x22\x3e\x27我现在在使用Babel!\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行打包命令\x3ccode\x3ewebpack --config webpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e浏览器打开\x3ccode\x3eindex.html\x3c\/code\x3e，我们看到正确输出了\x3ccode\x3e我现在在使用Babel!\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981894\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981894\x22 alt=\x22babel\x22 title=\x22babel\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e然后我们打开打包后的\x3ccode\x3ebundle.js\x3c\/code\x3e,翻页到最下面,可以看到箭头函数被转换成普通函数了！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981895\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981895\x22 alt=\x22babel-bundle.png\x22 title=\x22babel-bundle.png\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eQ: \x3ccode\x3ebabel-preset-state-0\x3c\/code\x3e,\x3ccode\x3ebabel-preset-state-1\x3c\/code\x3e,\x3ccode\x3ebabel-preset-state-2\x3c\/code\x3e,\x3ccode\x3ebabel-preset-state-3\x3c\/code\x3e有什么区别？\x3c\/p\x3e\n\x3cp\x3eA: 每一级包含上一级的功能，比如 \x3ccode\x3estate-0\x3c\/code\x3e包含\x3ccode\x3estate-1\x3c\/code\x3e的功能，以此类推。\x3ccode\x3estate-0\x3c\/code\x3e功能最全。具体可以看这篇文章：\x3ca href=\x22https:\/\/www.vanadis.cn\/2017\/03\/18\/babel-stage-x\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel配置-各阶段的stage的区别\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e参考地址：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000008159877\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2016\/01\/babel.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ruanyifeng.com\/blo...\x3c\/a\x3e\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader6\x22\x3ereact\x3c\/h1\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save react react-dom\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e修改 \x3ccode\x3esrc\/index.js\x3c\/code\x3e使用\x3ccode\x3ereact\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\n\nReactDom.render(\n    \x3cdiv\x3eHello React!\x3c\/div\x3e, document.getElementById(\x27app\x27));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\nReactDom.render(\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eHello React!\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e执行打包命令\x3ccode\x3ewebpack --config webpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e打开\x3ccode\x3eindex.html\x3c\/code\x3e 看效果。\x3c\/p\x3e\n\x3cp\x3e我们简单做下改进，把\x3ccode\x3eHello React\x3c\/code\x3e放到组件里面。体现组件化~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\nmkdir component\ncd component\nmkdir Hello\ncd Hello\ntouch Hello.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\nmkdir component\ncd component\nmkdir Hello\ncd Hello\ntouch Hello.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e按照React语法，写一个Hello组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nexport default class Hello extends Component {\n    render() {\n        return (\n            \x3cdiv\x3e\n                Hello,React!\n            \x3c\/div\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHello\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                Hello,React!\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后让我们修改\x3ccode\x3esrc\/index.js\x3c\/code\x3e，引用\x3ccode\x3eHello\x3c\/code\x3e组件！\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\nimport Hello from \x27.\/component\/Hello\/Hello\x27;\n\nReactDom.render(\n    \x3cHello\/\x3e, document.getElementById(\x27app\x27));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Hello \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/component\/Hello\/Hello\x27\x3c\/span\x3e;\n\nReactDom.render(\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eHello\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在\x3cstrong\x3e根目录\x3c\/strong\x3e执行打包命令\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack --config webpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e打开\x3ccode\x3eindex.html\x3c\/code\x3e看效果咯~\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader7\x22\x3e命令优化\x3c\/h1\x3e\n\x3cp\x3eQ：每次打包都得在根目录执行这么一长串命令\x3ccode\x3ewebpack --config webpack.dev.config.js\x3c\/code\x3e,能不打这么长吗？\x3c\/p\x3e\n\x3cp\x3eA：修改\x3ccode\x3epackage.json\x3c\/code\x3e里面的\x3ccode\x3escript\x3c\/code\x3e，增加\x3ccode\x3edev-build\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3epackage.json\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \x26quot;scripts\x26quot;: {\n    \x26quot;test\x26quot;: \x26quot;echo \\\x26quot;Error: no test specified\\\x26quot; \x26amp;\x26amp; exit 1\x26quot;,\n    \x26quot;dev-build\x26quot;: \x26quot;webpack --config webpack.dev.config.js\x26quot;\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e  \x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22test\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22echo \\\x22Error: no test specified\\\x22 \x26amp;\x26amp; exit 1\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22dev-build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack --config webpack.dev.config.js\x22\x3c\/span\x3e\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们打包只需要执行\x3ccode\x3enpm start-build\x3c\/code\x3e就可以啦！\x3c\/p\x3e\n\x3cp\x3e参考地址：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2016\/10\/npm_scripts.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ruanyifeng.com\/blo...\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader8\x22\x3ereact-router\x3c\/h1\x3e\n\x3cp\x3e\x3ccode\x3enpm install  --save react-router-dom\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e新建\x3ccode\x3erouter\x3c\/code\x3e文件夹和组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\nmkdir router \x26amp;\x26amp; touch router\/router.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dos\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e src\n\x3cspan class=\x22hljs-built_in\x22\x3emkdir\x3c\/span\x3e router \x26amp;\x26amp; touch router\/router.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e按照\x3ccode\x3ereact-router\x3c\/code\x3e\x3ca href=\x22http:\/\/reacttraining.cn\/web\/guides\/quick-start\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e编辑一个最基本的\x3ccode\x3erouter.js\x3c\/code\x3e。包含两个页面\x3ccode\x3ehome\x3c\/code\x3e和\x3ccode\x3epage1\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/router\/router.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\n\nimport {BrowserRouter as Router, Route, Switch, Link} from \x27react-router-dom\x27;\n\nimport Home from \x27..\/pages\/Home\/Home\x27;\nimport Page1 from \x27..\/pages\/Page1\/Page1\x27;\n\n\nconst getRouter = () =\x3e (\n    \x3cRouter\x3e\n        \x3cdiv\x3e\n            \x3cul\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/\x26quot;\x3e首页\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/page1\x26quot;\x3ePage1\x3c\/Link\x3e\x3c\/li\x3e\n            \x3c\/ul\x3e\n            \x3cSwitch\x3e\n                \x3cRoute exact path=\x26quot;\/\x26quot; component={Home}\/\x3e\n                \x3cRoute path=\x26quot;\/page1\x26quot; component={Page1}\/\x3e\n            \x3c\/Switch\x3e\n        \x3c\/div\x3e\n    \x3c\/Router\x3e\n);\n\nexport default getRouter;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {BrowserRouter \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e Router, Route, Switch, Link} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/Home\/Home\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Page1 \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/Page1\/Page1\x27\x3c\/span\x3e;\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getRouter = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e (\n    \x26lt;Router\x26gt;\n        \x26lt;div\x26gt;\n            \x26lt;ul\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/\x22\x26gt;首页\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/page1\x22\x26gt;Page1\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n            \x26lt;\/ul\x26gt;\n            \x26lt;Switch\x26gt;\n                \x26lt;Route exact path=\x22\/\x22 component={Home}\/\x26gt;\n                \x26lt;Route path=\x22\/page1\x22 component={Page1}\/\x26gt;\n            \x26lt;\/Switch\x26gt;\n        \x26lt;\/div\x26gt;\n    \x26lt;\/Router\x26gt;\n);\n\nexport default getRouter;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新建页面文件夹\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\nmkdir pages\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dos\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e src\n\x3cspan class=\x22hljs-built_in\x22\x3emkdir\x3c\/span\x3e pages\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e新建两个页面 \x3ccode\x3eHome\x3c\/code\x3e,\x3ccode\x3ePage1\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/pages\nmkdir Home \x26amp;\x26amp; touch Home\/Home.js\nmkdir Page1 \x26amp;\x26amp; touch Page1\/Page1.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dos\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e src\/pages\n\x3cspan class=\x22hljs-built_in\x22\x3emkdir\x3c\/span\x3e Home \x26amp;\x26amp; touch Home\/Home.js\n\x3cspan class=\x22hljs-built_in\x22\x3emkdir\x3c\/span\x3e Page1 \x26amp;\x26amp; touch Page1\/Page1.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e填充内容：\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Home\/Home.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nexport default class Home extends Component {\n    render() {\n        return (\n            \x3cdiv\x3e\n                this is home~\n            \x3c\/div\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHome\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                this is home~\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ePage1.js\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            \x3cdiv\x3e\n                this is Page1~\n            \x3c\/div\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePage1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                this is Page1~\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在路由和页面建好了，我们在入口文件\x3ccode\x3esrc\/index.js\x3c\/code\x3e引用Router。\x3c\/p\x3e\n\x3cp\x3e修改\x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\n\nimport getRouter from \x27.\/router\/router\x27;\n\nReactDom.render(\n    getRouter(), document.getElementById(\x27app\x27));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e getRouter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\/router\x27\x3c\/span\x3e;\n\nReactDom.render(\n    getRouter(), \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在执行打包命令\x3ccode\x3enpm start-build\x3c\/code\x3e。打开\x3ccode\x3eindex.html\x3c\/code\x3e查看效果啦！\x3c\/p\x3e\n\x3cp\x3e那么问题来了~我们发现点击‘首页’和‘Page1’没有反应。不要惊慌，这是正常的。\x3c\/p\x3e\n\x3cp\x3e我们之前一直用这个路径访问\x3ccode\x3eindex.html\x3c\/code\x3e，类似这样：\x3ccode\x3efile:\/\/\/F:\/react\/react-family\/dist\/index.html\x3c\/code\x3e。\x3cbr\x3e这种路径了，不是我们想象中的路由那样的路径\x3ccode\x3ehttp:\/\/localhost:3000\x3c\/code\x3e~我们需要配置一个简单的WEB服务器，指向\x3cbr\x3e\x3ccode\x3eindex.html\x3c\/code\x3e~有下面两种方法来实现\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3eNginx\x3c\/code\x3e, \x3ccode\x3eApache\x3c\/code\x3e, \x3ccode\x3eIIS\x3c\/code\x3e等配置启动一个简单的的WEB服务器。\x3c\/li\x3e\n\x3cli\x3e使用\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e来配置启动WEB服务器。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e下一节，我们来使用第二种方法启动服务器。这一节的DEMO，先放这里。\x3c\/p\x3e\n\x3cp\x3e参考地址\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/www.jianshu.com\/p\/e3adc9b5f75c\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.jianshu.com\/p\/e3ad...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/reacttraining.cn\/web\/guides\/quick-start\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/reacttraining.cn\/web\/g...\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader9\x22\x3ewebpack-dev-server\x3c\/h1\x3e\n\x3cp\x3e简单来说，\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e就是一个小型的静态文件服务器。使用它，可以为\x3ccode\x3ewebpack\x3c\/code\x3e打包生成的资源文件提供Web服务。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install webpack-dev-server --save-dev\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e修改\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e,增加\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e的配置。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    devServer: {\n        contentBase: path.join(__dirname, \x27.\/dist\x27)\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    devServer: {\n        \x3cspan class=\x22hljs-attr\x22\x3econtentBase\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e)\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在执行\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack-dev-server --config webpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e浏览器打开\x3ca href=\x22http:\/\/localhost:8080\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/localhost:8080\x3c\/a\x3e，OK,现在我们可以点击\x3ccode\x3e首页\x3c\/code\x3e,\x3ccode\x3ePage1\x3c\/code\x3e了，\x3cbr\x3e看URL地址变化啦！我们看到\x3ccode\x3ereact-router\x3c\/code\x3e已经成功了哦。\x3c\/p\x3e\n\x3cp\x3eQ: \x3ccode\x3e--content-base\x3c\/code\x3e是什么？\x3c\/p\x3e\n\x3cp\x3eA：\x3ccode\x3eURL的根目录。如果不设定的话，默认指向项目根目录。\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e**重要提示：webpack-dev-server编译后的文件，都存储在内存中，我们并不能看见的。你可以删除之前遗留的文件\x3ccode\x3edist\/bundle.js\x3c\/code\x3e，\x3cbr\x3e仍然能正常打开网站！**\x3c\/p\x3e\n\x3cp\x3e每次执行\x3ccode\x3ewebpack-dev-server --config webpack.dev.config.js\x3c\/code\x3e,要打很长的命令，我们修改\x3ccode\x3epackage.json\x3c\/code\x3e，增加\x3ccode\x3escript-\x26gt;start\x3c\/code\x3e:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \x26quot;scripts\x26quot;: {\n    \x26quot;test\x26quot;: \x26quot;echo \\\x26quot;Error: no test specified\\\x26quot; \x26amp;\x26amp; exit 1\x26quot;,\n    \x26quot;dev-build\x26quot;: \x26quot;webpack --config webpack.dev.config.js\x26quot;,\n    \x26quot;start\x26quot;: \x26quot;webpack-dev-server --config webpack.dev.config.js\x26quot;\n  }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22echo \\\x22Error: no test specified\\\x22 \x26amp;\x26amp; exit 1\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22dev-build\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack --config webpack.dev.config.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22start\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack-dev-server --config webpack.dev.config.js\x22\x3c\/span\x3e\n  }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下次执行\x3ccode\x3enpm start\x3c\/code\x3e就可以了。\x3c\/p\x3e\n\x3cp\x3e既然用到了\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e，我们就看看\x3ca href=\x22https:\/\/doc.webpack-china.org\/configuration\/dev-server\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e它的其他的配置项\x3c\/a\x3e。\x3cbr\x3e看了之后，发现有几个我们可以用的。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ecolor（CLI only） \x3ccode\x3econsole\x3c\/code\x3e中打印彩色日志\x3c\/li\x3e\n\x3cli\x3ehistoryApiFallback 任意的\x3ccode\x3e404\x3c\/code\x3e响应都被替代为\x3ccode\x3eindex.html\x3c\/code\x3e。有什么用呢？你现在运行\x3cbr\x3e\x3ccode\x3enpm start\x3c\/code\x3e，然后打开浏览器，访问\x3ccode\x3ehttp:\/\/localhost:8080\x3c\/code\x3e,然后点击\x3ccode\x3ePage1\x3c\/code\x3e到链接\x3ccode\x3ehttp:\/\/localhost:8080\/page1\x3c\/code\x3e，\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e然后刷新页面试试。是不是发现刷新后\x3ccode\x3e404\x3c\/code\x3e了。为什么？\x3ccode\x3edist\x3c\/code\x3e文件夹里面并没有\x3ccode\x3epage1.html\x3c\/code\x3e,当然会\x3ccode\x3e404\x3c\/code\x3e了，所以我们需要配置\x3cbr\x3e\x3ccode\x3ehistoryApiFallback\x3c\/code\x3e，让所有的\x3ccode\x3e404\x3c\/code\x3e定位到\x3ccode\x3eindex.html\x3c\/code\x3e。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3ehost 指定一个\x3ccode\x3ehost\x3c\/code\x3e,默认是\x3ccode\x3elocalhost\x3c\/code\x3e。如果你希望服务器外部可以访问，指定如下：\x3ccode\x3ehost: \x220.0.0.0\x22\x3c\/code\x3e。比如你用手机通过IP访问。\x3c\/li\x3e\n\x3cli\x3ehot 启用\x3ccode\x3eWebpack\x3c\/code\x3e的模块热替换特性。关于热模块替换，我下一小节专门讲解一下。\x3c\/li\x3e\n\x3cli\x3eport 配置要监听的端口。默认就是我们现在使用的\x3ccode\x3e8080\x3c\/code\x3e端口。\x3c\/li\x3e\n\x3cli\x3eproxy 代理。比如在 \x3ccode\x3elocalhost:3000\x3c\/code\x3e 上有后端服务的话，你可以这样启用代理：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    proxy: {\n      \x26quot;\/api\x26quot;: \x26quot;http:\/\/localhost:3000\x26quot;\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    proxy: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x22\/api\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22http:\/\/localhost:3000\x22\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3eprogress（CLI only） 将编译进度输出到控制台。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e根据这几个配置，修改下我们的\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e的配置~\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    devServer: {\n        contentBase: path.join(__dirname, \x27.\/dist\x27),\n        historyApiFallback: true,\n        host: \x270.0.0.0\x27\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    devServer: {\n        \x3cspan class=\x22hljs-attr\x22\x3econtentBase\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3ehistoryApiFallback\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3ehost\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x270.0.0.0\x27\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eCLI ONLY\x3c\/code\x3e的需要在命令行中配置\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3epackage.json\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;dev\x26quot;: \x26quot;webpack-dev-server --config webpack.dev.config.js --color --progress\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22dev\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack-dev-server --config webpack.dev.config.js --color --progress\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们执行\x3ccode\x3enpm start\x3c\/code\x3e 看看效果。是不是看到打包的时候有百分比进度？在\x3ccode\x3ehttp:\/\/localhost:8080\/page1\x3c\/code\x3e页面刷新是不是没问题了？\x3cbr\x3e用手机通过局域网IP是否可以访问到网站？\x3c\/p\x3e\n\x3cp\x3e参考地址：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000006670084\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/webpack.js.org\/guides\/development\/#using-webpack-dev-server\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/webpack.js.org\/guides...\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader10\x22\x3e模块热替换（Hot Module Replacement）\x3c\/h1\x3e\n\x3cp\x3e到目前，当我们修改代码的时候，浏览器会自动刷新，不信你可以去试试。（如果你的不会刷新，看看这个\x3ca href=\x22#editor\x22\x3e调整文本编辑器\x3c\/a\x3e）\x3c\/p\x3e\n\x3cp\x3e我相信看这个教程的人，应该用过别人的框架。我们在修改代码的时候，浏览器不会刷新，只会更新自己修改的那一块。我们也要实现这个效果。\x3c\/p\x3e\n\x3cp\x3e我们看下\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/hot-module-replacement\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ewebpack模块热替换\x3c\/a\x3e教程。\x3c\/p\x3e\n\x3cp\x3e我们接下来要这么修改\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3epackage.json\x3c\/code\x3e 增加 \x3ccode\x3e--hot\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;dev\x26quot;: \x26quot;webpack-dev-server --config webpack.dev.config.js --color --progress --hot\x26quot;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22dev\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22webpack-dev-server --config webpack.dev.config.js --color --progress --hot\x22\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e 增加\x3ccode\x3emodule.hot.accept()\x3c\/code\x3e,如下。当模块更新的时候，通知\x3ccode\x3eindex.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\n\nimport getRouter from \x27.\/router\/router\x27;\n\nif (module.hot) {\n    module.hot.accept();\n}\n\nReactDom.render(\n    getRouter(), document.getElementById(\x27app\x27));\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e getRouter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\/router\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot) {\n    \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot.accept();\n}\n\nReactDom.render(\n    getRouter(), \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e));\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在我们执行\x3ccode\x3enpm start\x3c\/code\x3e，打开浏览器，修改\x3ccode\x3eHome.js\x3c\/code\x3e,看是不是不刷新页面的情况下，内容更新了？惊不惊喜？意不意外？\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e做模块热替换，我们只改了几行代码，非常简单的。纸老虎一个~\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e现在我需要说明下我们命令行使用的\x3ccode\x3e--hot\x3c\/code\x3e，可以通过配置\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e来替换，\x3cbr\x3e向文档上那样,修改下面三处。但我们还是用\x3ccode\x3e--hot\x3c\/code\x3e吧。下面的方式我们知道一下就行，我们不用。同样的效果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const webpack = require(\x27webpack\x27);\n\ndevServer: {\n    hot: true\n}\n\nplugins:[\n     new webpack.HotModuleReplacementPlugin()\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\ndevServer: {\n    \x3cspan class=\x22hljs-attr\x22\x3ehot\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n}\n\nplugins:[\n     \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HotModuleReplacementPlugin()\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eHRM\x3c\/code\x3e配置其实有两种方式，一种\x3ccode\x3eCLI\x3c\/code\x3e方式，一种\x3ccode\x3eNode.js API\x3c\/code\x3e方式。我们用到的就是\x3ccode\x3eCLI\x3c\/code\x3e方式，比较简单。\x3cbr\x3e\x3ccode\x3eNode.js API\x3c\/code\x3e方式，就是建一个\x3ccode\x3eserver.js\x3c\/code\x3e等等，网上大部分教程都是这种方式，这里不做讲解了。\x3c\/p\x3e\n\x3cp\x3e你以为模块热替换到这里就结束了？no~no~no~\x3c\/p\x3e\n\x3cp\x3e上面的配置对\x3ccode\x3ereact\x3c\/code\x3e模块的支持不是很好哦。\x3c\/p\x3e\n\x3cp\x3e例如下面的\x3ccode\x3edemo\x3c\/code\x3e，当模块热替换的时候，\x3ccode\x3estate\x3c\/code\x3e会重置，这不是我们想要的。\x3c\/p\x3e\n\x3cp\x3e修改\x3ccode\x3eHome.js\x3c\/code\x3e,增加计数\x3ccode\x3estate\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Home\/Home.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nexport default class Home extends Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            count: 0\n        }\n    }\n\n    _handleClick() {\n        this.setState({\n            count: \x2b\x2bthis.state.count\n        });\n    }\n\n    render() {\n        return (\n            \x3cdiv\x3e\n                this is home~\x3cbr\/\x3e\n                当前计数：{this.state.count}\x3cbr\/\x3e\n                \x3cbutton onClick={() =\x3e this._handleClick()}\x3e自增\x3c\/button\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eHome\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(props);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state = {\n            \x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n        }\n    }\n\n    _handleClick() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n            \x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: \x2b\x2b\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.count\n        });\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                this is home~\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebr\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n                当前计数：{this.state.count}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebr\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this._handleClick()}\x26gt;自增\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你可以测试一下，当我们修改代码的时候，\x3ccode\x3ewebpack\x3c\/code\x3e在更新页面的时候，也把\x3ccode\x3ecount\x3c\/code\x3e初始为0了。\x3c\/p\x3e\n\x3cp\x3e为了在\x3ccode\x3ereact\x3c\/code\x3e模块更新的同时，能保留\x3ccode\x3estate\x3c\/code\x3e等页面中其他状态，我们需要引入\x3ca href=\x22https:\/\/github.com\/gaearon\/react-hot-loader\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ereact-hot-loader\x3c\/a\x3e~\x3c\/p\x3e\n\x3cp\x3eQ:　请问\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e与\x3ccode\x3ereact-hot-loader\x3c\/code\x3e两者的热替换有什么区别？\x3c\/p\x3e\n\x3cp\x3eA:  区别在于\x3ccode\x3ewebpack-dev-serve\x3c\/code\x3er自己的\x3ccode\x3e--hot\x3c\/code\x3e模式只能即时刷新页面，但状态保存不住。因为\x3ccode\x3eReact\x3c\/code\x3e有一些自己语法(JSX)是\x3ccode\x3eHotModuleReplacementPlugin\x3c\/code\x3e搞不定的。\x3cbr\x3e而\x3ccode\x3ereact-hot-loader\x3c\/code\x3e在\x3ccode\x3e--hot\x3c\/code\x3e基础上做了额外的处理，来保证状态可以存下来。（来自\x3ca href=\x22https:\/\/segmentfault.com\/q\/1010000005612845\x22\x3esegmentfault\x3c\/a\x3e）\x3c\/p\x3e\n\x3cp\x3e下面我们来加入\x3ccode\x3ereact-hot-loader v3\x3c\/code\x3e,\x3c\/p\x3e\n\x3cp\x3e安装依赖\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install react-hot-loader@next --save-dev\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e根据\x3ca href=\x22https:\/\/gaearon.github.io\/react-hot-loader\/getstarted\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e，\x3cbr\x3e我们要做如下几个修改~\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\n\x3ccode\x3e.babelrc\x3c\/code\x3e 增加 \x3ccode\x3ereact-hot-loader\/babel\x3c\/code\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3ccode\x3e.babelrc\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;presets\x26quot;: [\n    \x26quot;es2015\x26quot;,\n    \x26quot;react\x26quot;,\n    \x26quot;stage-0\x26quot;\n  ],\n  \x26quot;plugins\x26quot;: [\n    \x26quot;react-hot-loader\/babel\x26quot;\n  ]\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22presets\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22es2015\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x22stage-0\x22\x3c\/span\x3e\n  ],\n  \x3cspan class=\x22hljs-string\x22\x3e\x22plugins\x22\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-string\x22\x3e\x22react-hot-loader\/babel\x22\x3c\/span\x3e\n  ]\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\n\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e入口增加\x3ccode\x3ereact-hot-loader\/patch\x3c\/code\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    entry: [\n        \x27react-hot-loader\/patch\x27,\n        path.join(__dirname, \x27src\/index.js\x27)\n    ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    entry: [\n        \x3cspan class=\x22hljs-string\x22\x3e\x27react-hot-loader\/patch\x27\x3c\/span\x3e,\n        path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/index.js\x27\x3c\/span\x3e)\n    ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\n\x3ccode\x3esrc\/index.js\x3c\/code\x3e修改如下\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\nimport {AppContainer} from \x27react-hot-loader\x27;\n\nimport getRouter from \x27.\/router\/router\x27;\n\n\/*初始化*\/\nrenderWithHotReload(getRouter());\n\n\/*热更新*\/\nif (module.hot) {\n    module.hot.accept(\x27.\/router\/router\x27, () =\x3e {\n        const getRouter = require(\x27.\/router\/router\x27).default;\n        renderWithHotReload(getRouter());\n    });\n}\n\nfunction renderWithHotReload(RootElement) {\n    ReactDom.render(\n        \x3cAppContainer\x3e\n            {RootElement}\n        \x3c\/AppContainer\x3e,\n        document.getElementById(\x27app\x27)\n    )\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {AppContainer} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-hot-loader\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e getRouter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\/router\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*初始化*\/\x3c\/span\x3e\nrenderWithHotReload(getRouter());\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*热更新*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot) {\n    \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot.accept(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\/router\x27\x3c\/span\x3e, () =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getRouter = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\/router\x27\x3c\/span\x3e).default;\n        renderWithHotReload(getRouter());\n    });\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erenderWithHotReload\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eRootElement\x3c\/span\x3e) \x3c\/span\x3e{\n    ReactDom.render(\n        \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eAppContainer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            {RootElement}\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eAppContainer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e)\n    )\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，执行\x3ccode\x3enpm start\x3c\/code\x3e，试试。是不是修改页面的时候，\x3ccode\x3estate\x3c\/code\x3e不更新了？\x3c\/p\x3e\n\x3cp\x3e参考文章：\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/gaearon\/react-hot-loader\/issues\/243\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/gaearon\/re...\x3c\/a\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3e文件路径优化\x3c\/h1\x3e\n\x3cp\x3e做到这里，我们简单休息下。做下优化~\x3c\/p\x3e\n\x3cp\x3e在之前写的代码中，我们引用组件，或者页面时候，写的是相对路径~\x3c\/p\x3e\n\x3cp\x3e比如\x3ccode\x3esrc\/router\/router.js\x3c\/code\x3e里面，引用\x3ccode\x3eHome.js\x3c\/code\x3e的时候就用的相对路径\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Home from \x27..\/pages\/Home\/Home\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/Home\/Home\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ewebpack提供了一个别名配置，就是我们无论在哪个路径下，引用都可以这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Home from \x27pages\/Home\/Home\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Home\/Home\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面我们来配置下，修改\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e，增加别名~\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    resolve: {\n        alias: {\n            pages: path.join(__dirname, \x27src\/pages\x27),\n            component: path.join(__dirname, \x27src\/component\x27),\n            router: path.join(__dirname, \x27src\/router\x27)\n        }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    resolve: {\n        \x3cspan class=\x22hljs-attr\x22\x3ealias\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3epages\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/pages\x27\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/component\x27\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3erouter\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/router\x27\x3c\/span\x3e)\n        }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们把之前使用的绝对路径统统改掉。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/router\/router.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nimport Home from \x27pages\/Home\/Home\x27;\nimport Page1 from \x27pages\/Page1\/Page1\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Home\/Home\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Page1 \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Page1\/Page1\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import getRouter from \x27router\/router\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e getRouter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27router\/router\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们这里约定，下面，我们会默认配置需要的别名路径，不再做重复的讲述哦。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader12\x22\x3eredux\x3c\/h1\x3e\n\x3cp\x3e接下来，我们就要就要就要集成\x3ccode\x3eredux\x3c\/code\x3e了。\x3c\/p\x3e\n\x3cp\x3e要对\x3ccode\x3eredux\x3c\/code\x3e有一个大概的认识，可以阅读阮一峰前辈的\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2016\/09\/redux_tutorial_part_one_basic_usages.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRedux 入门教程（一）：基本用法\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e如果要对\x3ccode\x3eredux\x3c\/code\x3e有一个非常详细的认识，我推荐阅读\x3ca href=\x22http:\/\/cn.redux.js.org\/index.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e中文文档\x3c\/a\x3e，写的非常好。读了这个教程，有一个非常深刻的感觉，\x3ccode\x3eredux\x3c\/code\x3e并没有任何魔法。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e不要被各种关于 reducers, middleware, store 的演讲所蒙蔽 ---- Redux 实际是非常简单的。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e当然，我这篇文章是写给新手的，如果看不懂上面的文章，或者不想看，没关系。先会用，多用用就知道原理了。\x3c\/p\x3e\n\x3cp\x3e开始整代码！我们就做一个最简单的计数器。自增，自减，重置。\x3c\/p\x3e\n\x3cp\x3e先安装\x3ccode\x3eredux\x3c\/code\x3e \x3ccode\x3enpm install --save redux\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e初始化目录结构\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\nmkdir redux\ncd redux\nmkdir actions\nmkdir reducers\ntouch reducers.js\ntouch store.js\ntouch actions\/counter.js\ntouch reducers\/counter.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\nmkdir redux\ncd redux\nmkdir actions\nmkdir reducers\ntouch reducers.js\ntouch store.js\ntouch actions\/counter.js\ntouch reducers\/counter.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e先来写\x3ccode\x3eaction\x3c\/code\x3e创建函数。\x3cstrong\x3e通过\x3ccode\x3eaction\x3c\/code\x3e创建函数，可以创建\x3ccode\x3eaction\x3c\/code\x3e~\x3c\/strong\x3e\x3cbr\x3e\x3ccode\x3esrc\/redux\/actions\/counter.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*action*\/\n\nexport const INCREMENT = \x26quot;counter\/INCREMENT\x26quot;;\nexport const DECREMENT = \x26quot;counter\/DECREMENT\x26quot;;\nexport const RESET = \x26quot;counter\/RESET\x26quot;;\n\nexport function increment() {\n    return {type: INCREMENT}\n}\n\nexport function decrement() {\n    return {type: DECREMENT}\n}\n\nexport function reset() {\n    return {type: RESET}\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/*action*\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e INCREMENT = \x3cspan class=\x22hljs-string\x22\x3e\x22counter\/INCREMENT\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e DECREMENT = \x3cspan class=\x22hljs-string\x22\x3e\x22counter\/DECREMENT\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e RESET = \x3cspan class=\x22hljs-string\x22\x3e\x22counter\/RESET\x22\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eincrement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: INCREMENT}\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edecrement\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: DECREMENT}\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereset\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: RESET}\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e再来写\x3ccode\x3ereducer\x3c\/code\x3e,\x3cstrong\x3e\x3ccode\x3ereducer\x3c\/code\x3e是一个纯函数，接收\x3ccode\x3eaction\x3c\/code\x3e和旧的\x3ccode\x3estate\x3c\/code\x3e,生成新的\x3ccode\x3estate\x3c\/code\x3e.\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/reducers\/counter.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {INCREMENT, DECREMENT, RESET} from \x27..\/actions\/counter\x27;\n\n\/*\n* 初始化state\n *\/\n\nconst initState = {\n    count: 0\n};\n\/*\n* reducer\n *\/\nexport default function reducer(state = initState, action) {\n    switch (action.type) {\n        case INCREMENT:\n            return {\n                count: state.count \x2b 1\n            };\n        case DECREMENT:\n            return {\n                count: state.count - 1\n            };\n        case RESET:\n            return {count: 0};\n        default:\n            return state\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {INCREMENT, DECREMENT, RESET} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/actions\/counter\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n* 初始化state\n *\/\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initState = {\n    \x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n};\n\x3cspan class=\x22hljs-comment\x22\x3e\/*\n* reducer\n *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereducer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estate = initState, action\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (action.type) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e INCREMENT:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: state.count \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n            };\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e DECREMENT:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: state.count - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n            };\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e RESET:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\x3cspan class=\x22hljs-attr\x22\x3ecount\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e};\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一个项目有很多的\x3ccode\x3ereducers\x3c\/code\x3e,我们要把他们整合到一起\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/reducers.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import counter from \x27.\/reducers\/counter\x27;\n\nexport default function combineReducers(state = {}, action) {\n    return {\n        counter: counter(state.counter, action)\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e counter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/reducers\/counter\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecombineReducers\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estate = {}, action\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: counter(state.counter, action)\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里，我们必须再理解下一句话。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3ereducer\x3c\/code\x3e就是纯函数，接收\x3ccode\x3estate\x3c\/code\x3e 和 \x3ccode\x3eaction\x3c\/code\x3e，然后返回一个新的 \x3ccode\x3estate\x3c\/code\x3e。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e看看上面的代码，无论是\x3ccode\x3ecombineReducers\x3c\/code\x3e函数也好，还是\x3ccode\x3ereducer\x3c\/code\x3e函数也好，都是接收\x3ccode\x3estate\x3c\/code\x3e和\x3ccode\x3eaction\x3c\/code\x3e，\x3cbr\x3e返回更新后的\x3ccode\x3estate\x3c\/code\x3e。区别就是\x3ccode\x3ecombineReducers\x3c\/code\x3e函数是处理整棵树，\x3ccode\x3ereducer\x3c\/code\x3e函数是处理树的某一点。\x3c\/p\x3e\n\x3cp\x3e接下来，我们要创建一个\x3ccode\x3estore\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e前面我们可以使用 \x3ccode\x3eaction\x3c\/code\x3e 来描述“发生了什么”，使用\x3ccode\x3eaction\x3c\/code\x3e创建函数来返回\x3ccode\x3eaction\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e还可以使用 \x3ccode\x3ereducers\x3c\/code\x3e 来根据 \x3ccode\x3eaction\x3c\/code\x3e 更新 \x3ccode\x3estate\x3c\/code\x3e 。\x3c\/p\x3e\n\x3cp\x3e那我们如何提交\x3ccode\x3eaction\x3c\/code\x3e？提交的时候，怎么才能触发\x3ccode\x3ereducers\x3c\/code\x3e呢？\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3estore\x3c\/code\x3e 就是把它们联系到一起的对象。\x3ccode\x3estore\x3c\/code\x3e 有以下职责：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e维持应用的 \x3ccode\x3estate\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e提供 \x3ccode\x3egetState()\x3c\/code\x3e 方法获取 \x3ccode\x3estate\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e提供 \x3ccode\x3edispatch(action)\x3c\/code\x3e 触发\x3ccode\x3ereducers\x3c\/code\x3e方法更新 \x3ccode\x3estate\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e通过\x3ccode\x3e subscribe(listener)\x3c\/code\x3e 注册监听器;\x3c\/li\x3e\n\x3cli\x3e通过 \x3ccode\x3esubscribe(listener)\x3c\/code\x3e 返回的函数注销监听器。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/store.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {createStore} from \x27redux\x27;\nimport combineReducers from \x27.\/reducers.js\x27;\n\nlet store = createStore(combineReducers);\n\nexport default store;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {createStore} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e combineReducers \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/reducers.js\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e store = createStore(combineReducers);\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e store;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到现在为止，我们已经可以使用\x3ccode\x3eredux\x3c\/code\x3e了~\x3c\/p\x3e\n\x3cp\x3e下面我们就简单的测试下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\ncd redux\ntouch testRedux.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\ncd redux\ntouch testRedux.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/testRedux.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {increment, decrement, reset} from \x27.\/actions\/counter\x27;\n\nimport store from \x27.\/store\x27;\n\n\/\/ 打印初始状态\nconsole.log(store.getState());\n\n\/\/ 每次 state 更新时，打印日志\n\/\/ 注意 subscribe() 返回一个函数用来注销监听器\nlet unsubscribe = store.subscribe(() =\x3e\n    console.log(store.getState())\n);\n\n\/\/ 发起一系列 action\nstore.dispatch(increment());\nstore.dispatch(decrement());\nstore.dispatch(reset());\n\n\/\/ 停止监听 state 更新\nunsubscribe();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {increment, decrement, reset} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/actions\/counter\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/store\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打印初始状态\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(store.getState());\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每次 state 更新时，打印日志\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 注意 subscribe() 返回一个函数用来注销监听器\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e unsubscribe = store.subscribe(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(store.getState())\n);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 发起一系列 action\x3c\/span\x3e\nstore.dispatch(increment());\nstore.dispatch(decrement());\nstore.dispatch(reset());\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 停止监听 state 更新\x3c\/span\x3e\nunsubscribe();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当前文件夹执行命令\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22webpack testRedux.js build.js\n\nnode build.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3ewebpack testRedux.js build.js\n\n\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ebuild\x3c\/span\x3e.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是不是看到输出了\x3ccode\x3estate\x3c\/code\x3e变化？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{ counter: { count: 0 } }\n{ counter: { count: 1 } }\n{ counter: { count: 0 } }\n{ counter: { count: 0 } }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e{ \x3cspan class=\x22hljs-attribute\x22\x3ecounter\x3c\/span\x3e: { count: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e } }\n{ \x3cspan class=\x22hljs-attribute\x22\x3ecounter\x3c\/span\x3e: { count: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e } }\n{ \x3cspan class=\x22hljs-attribute\x22\x3ecounter\x3c\/span\x3e: { count: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e } }\n{ \x3cspan class=\x22hljs-attribute\x22\x3ecounter\x3c\/span\x3e: { count: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e } }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e做这个测试，就是为了告诉大家，\x3ccode\x3eredux\x3c\/code\x3e和\x3ccode\x3ereact\x3c\/code\x3e没关系，虽说他俩能合作。\x3c\/p\x3e\n\x3cp\x3e到这里，我建议你再理下\x3ccode\x3eredux\x3c\/code\x3e的数据流，看看\x3ca href=\x22http:\/\/cn.redux.js.org\/docs\/basics\/DataFlow.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e调用\x3ccode\x3estore.dispatch(action)\x3c\/code\x3e提交\x3ccode\x3eaction\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eredux store\x3c\/code\x3e调用传入的\x3ccode\x3ereducer\x3c\/code\x3e函数。把当前的\x3ccode\x3estate\x3c\/code\x3e和\x3ccode\x3eaction\x3c\/code\x3e传进去。\x3c\/li\x3e\n\x3cli\x3e根 \x3ccode\x3ereducer\x3c\/code\x3e 应该把多个子 \x3ccode\x3ereducer\x3c\/code\x3e 输出合并成一个单一的 \x3ccode\x3estate\x3c\/code\x3e 树。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eRedux store\x3c\/code\x3e 保存了根 \x3ccode\x3ereducer\x3c\/code\x3e 返回的完整 \x3ccode\x3estate\x3c\/code\x3e 树。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e就是酱紫~~\x3c\/p\x3e\n\x3cp\x3e这会\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e路径别名增加一下，后面好写了。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        alias: {\n            ...\n            actions: path.join(__dirname, \x27src\/redux\/actions\x27),\n            reducers: path.join(__dirname, \x27src\/redux\/reducers\x27),\n            redux: path.join(__dirname, \x27src\/redux\x27)\n        }\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22json hljs\x22\x3e\x3ccode class=\x22json\x22\x3e        alias: {\n            ...\n            actions: path.join(__dirname, \x27src\/redux\/actions\x27),\n            reducers: path.join(__dirname, \x27src\/redux\/reducers\x27),\n            redux: path.join(__dirname, \x27src\/redux\x27)\n        }\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e把前面的相对路径都改改。\x3c\/p\x3e\n\x3cp\x3e下面我们开始搭配\x3ccode\x3ereact\x3c\/code\x3e使用。\x3c\/p\x3e\n\x3cp\x3e写一个\x3ccode\x3eCounter\x3c\/code\x3e页面\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/pages\nmkdir Counter\ntouch Counter\/Counter.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dos\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e src\/pages\n\x3cspan class=\x22hljs-built_in\x22\x3emkdir\x3c\/span\x3e Counter\ntouch Counter\/Counter.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Counter\/Counter.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nexport default class Counter extends Component {\n    render() {\n        return (\n            \x3cdiv\x3e\n                \x3cdiv\x3e当前计数为(显示redux计数)\x3c\/div\x3e\n                \x3cbutton onClick={() =\x3e {\n                    console.log(\x27调用自增函数\x27);\n                \x22}}\x22\x3e自增\n                \x3c\/button\x3e\n                \x3cbutton onClick={() =\x3e {\n                    console.log(\x27调用自减函数\x27);\n                \x22}}\x22\x3e自减\n                \x3c\/button\x3e\n                \x3cbutton onClick={() =\x3e {\n                    console.log(\x27调用重置函数\x27);\n                \x22}}\x22\x3e重置\n                \x3c\/button\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCounter\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e当前计数为(显示redux计数)\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    console.log(\x27调用自增函数\x27);\n                \x22}}\x22\x26gt;自增\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    console.log(\x27调用自减函数\x27);\n                \x22}}\x22\x26gt;自减\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    console.log(\x27调用重置函数\x27);\n                \x22}}\x22\x26gt;重置\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改路由，增加\x3ccode\x3eCounter\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/router\/router.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\n\nimport {BrowserRouter as Router, Route, Switch, Link} from \x27react-router-dom\x27;\n\nimport Home from \x27pages\/Home\/Home\x27;\nimport Page1 from \x27pages\/Page1\/Page1\x27;\nimport Counter from \x27pages\/Counter\/Counter\x27;\n\nconst getRouter = () =\x3e (\n    \x3cRouter\x3e\n        \x3cdiv\x3e\n            \x3cul\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/\x26quot;\x3e首页\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/page1\x26quot;\x3ePage1\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/counter\x26quot;\x3eCounter\x3c\/Link\x3e\x3c\/li\x3e\n            \x3c\/ul\x3e\n            \x3cSwitch\x3e\n                \x3cRoute exact path=\x26quot;\/\x26quot; component={Home}\/\x3e\n                \x3cRoute path=\x26quot;\/page1\x26quot; component={Page1}\/\x3e\n                \x3cRoute path=\x26quot;\/counter\x26quot; component={Counter}\/\x3e\n            \x3c\/Switch\x3e\n        \x3c\/div\x3e\n    \x3c\/Router\x3e\n);\n\nexport default getRouter;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {BrowserRouter \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e Router, Route, Switch, Link} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Home\/Home\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Page1 \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Page1\/Page1\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Counter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Counter\/Counter\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getRouter = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e (\n    \x26lt;Router\x26gt;\n        \x26lt;div\x26gt;\n            \x26lt;ul\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/\x22\x26gt;首页\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/page1\x22\x26gt;Page1\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/counter\x22\x26gt;Counter\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n            \x26lt;\/ul\x26gt;\n            \x26lt;Switch\x26gt;\n                \x26lt;Route exact path=\x22\/\x22 component={Home}\/\x26gt;\n                \x26lt;Route path=\x22\/page1\x22 component={Page1}\/\x26gt;\n                \x26lt;Route path=\x22\/counter\x22 component={Counter}\/\x26gt;\n            \x26lt;\/Switch\x26gt;\n        \x26lt;\/div\x26gt;\n    \x26lt;\/Router\x26gt;\n);\n\nexport default getRouter;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3enpm start\x3c\/code\x3e看看效果。\x3c\/p\x3e\n\x3cp\x3e下一步，我们让\x3ccode\x3eCounter\x3c\/code\x3e组件和\x3ccode\x3eRedux\x3c\/code\x3e联合起来。使\x3ccode\x3eCounter\x3c\/code\x3e能获得到\x3ccode\x3eRedux\x3c\/code\x3e的\x3ccode\x3estate\x3c\/code\x3e，并且能发射\x3ccode\x3eaction\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e当然我们可以使用刚才测试\x3ccode\x3etestRedux\x3c\/code\x3e的方法，手动监听~手动引入\x3ccode\x3estore\x3c\/code\x3e~但是这肯定很麻烦哦。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ereact-redux\x3c\/code\x3e提供了一个方法\x3ccode\x3econnect\x3c\/code\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e容器组件就是使用 store.subscribe() 从 Redux state 树中读取部分数据，并通过 props 来把这些数据提供给要渲染的组件。你可以手工来开发容器组件，但建议使用 React Redux 库的 connect() 方法来生成，这个方法做了性能优化来避免很多不必要的重复渲染。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3econnect\x3c\/code\x3e接收两个参数，一个\x3ccode\x3emapStateToProps\x3c\/code\x3e,就是把\x3ccode\x3eredux\x3c\/code\x3e的\x3ccode\x3estate\x3c\/code\x3e，转为组件的\x3ccode\x3eProps\x3c\/code\x3e，还有一个参数是\x3ccode\x3emapDispatchToprops\x3c\/code\x3e,\x3cbr\x3e就是把发射\x3ccode\x3eactions\x3c\/code\x3e的方法，转为\x3ccode\x3eProps\x3c\/code\x3e属性函数。\x3c\/p\x3e\n\x3cp\x3e先来安装\x3ccode\x3ereact-redux\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save react-redux\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Counter\/Counter.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\nimport {increment, decrement, reset} from \x27actions\/counter\x27;\n\nimport {connect} from \x27react-redux\x27;\n\nclass Counter extends Component {\n    render() {\n        return (\n            \x3cdiv\x3e\n                \x3cdiv\x3e当前计数为{this.props.counter.count}\x3c\/div\x3e\n                \x3cbutton onClick={() =\x3e this.props.increment()}\x3e自增\n                \x3c\/button\x3e\n                \x3cbutton onClick={() =\x3e this.props.decrement()}\x3e自减\n                \x3c\/button\x3e\n                \x3cbutton onClick={() =\x3e this.props.reset()}\x3e重置\n                \x3c\/button\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\n\nconst mapStateToProps = (state) =\x3e {\n    return {\n        counter: state.counter\n    }\n};\n\nconst mapDispatchToProps = (dispatch) =\x3e {\n    return {\n        increment: () =\x3e {\n            dispatch(increment())\n        },\n        decrement: () =\x3e {\n            dispatch(decrement())\n        },\n        reset: () =\x3e {\n            dispatch(reset())\n        }\n    }\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Counter);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {increment, decrement, reset} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27actions\/counter\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {connect} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCounter\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e当前计数为{this.props.counter.count}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.props.increment()}\x26gt;自增\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.props.decrement()}\x26gt;自减\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.props.reset()}\x26gt;重置\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapStateToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: state.counter\n    }\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapDispatchToProps = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3edispatch\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3eincrement\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            dispatch(increment())\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3edecrement\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            dispatch(decrement())\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3ereset\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            dispatch(reset())\n        }\n    }\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(mapStateToProps, mapDispatchToProps)(Counter);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面我们要传入\x3ccode\x3estore\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e所有容器组件都可以访问 Redux store，所以可以手动监听它。一种方式是把它以 props 的形式传入到所有容器组件中。但这太麻烦了，因为必须要用 store 把展示组件包裹一层，仅仅是因为恰好在组件树中渲染了一个容器组件。\x3c\/p\x3e\n\x3cp\x3e建议的方式是使用指定的 React Redux 组件 \x26lt;Provider\x26gt; 来 魔法般的 让所有容器组件都可以访问 store，而不必显示地传递它。只需要在渲染根组件时使用即可。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\nimport ReactDom from \x27react-dom\x27;\nimport {AppContainer} from \x27react-hot-loader\x27;\nimport {Provider} from \x27react-redux\x27;\nimport store from \x27.\/redux\/store\x27;\n\nimport getRouter from \x27router\/router\x27;\n\n\/*初始化*\/\nrenderWithHotReload(getRouter());\n\n\/*热更新*\/\nif (module.hot) {\n    module.hot.accept(\x27.\/router\/router\x27, () =\x3e {\n        const getRouter = require(\x27router\/router\x27).default;\n        renderWithHotReload(getRouter());\n    });\n}\n\nfunction renderWithHotReload(RootElement) {\n    ReactDom.render(\n        \x3cAppContainer\x3e\n            \x3cProvider store={store}\x3e\n                {RootElement}\n            \x3c\/Provider\x3e\n        \x3c\/AppContainer\x3e,\n        document.getElementById(\x27app\x27)\n    )\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ReactDom \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {AppContainer} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-hot-loader\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {Provider} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e store \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/redux\/store\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e getRouter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27router\/router\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*初始化*\/\x3c\/span\x3e\nrenderWithHotReload(getRouter());\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/*热更新*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot) {\n    \x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.hot.accept(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/router\/router\x27\x3c\/span\x3e, () =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getRouter = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27router\/router\x27\x3c\/span\x3e).default;\n        renderWithHotReload(getRouter());\n    });\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erenderWithHotReload\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eRootElement\x3c\/span\x3e) \x3c\/span\x3e{\n    ReactDom.render(\n        \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eAppContainer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eProvider\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3estore\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{store}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                {RootElement}\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eProvider\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eAppContainer\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e)\n    )\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里我们就可以执行\x3ccode\x3enpm start\x3c\/code\x3e，打开\x3ca\x3elocalhost:8080\/counter\x3c\/a\x3e看效果了。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e但是你发现\x3ccode\x3enpm start\x3c\/code\x3e一直报错\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22ERROR in .\/node_modules\/react-redux\/es\/connect\/mapDispatchToProps.js\nModule not found: Error: Can\x27t resolve \x27redux\x27 in \x27F:\\Project\\react\\react-family\\node_modules\\react-redux\\es\\connect\x27\n\nERROR in .\/src\/redux\/store.js\nModule not found: Error: Can\x27t resolve \x27redux\x27 in \x27F:\\Project\\react\\react-family\\src\\redux\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eERROR \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e .\/node_modules\/react-redux\/es\/connect\/mapDispatchToProps.js\nModule not found: \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e: Can\x3cspan class=\x22hljs-string\x22\x3e\x27t resolve \x27\x3c\/span\x3eredux\x3cspan class=\x22hljs-string\x22\x3e\x27 in \x27\x3c\/span\x3eF:\\Project\\react\\react-family\\node_modules\\react-redux\\es\\connect\x3cspan class=\x22hljs-string\x22\x3e\x27\n\nERROR in .\/src\/redux\/store.js\nModule not found: Error: Can\x27\x3c\/span\x3et resolve \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27F:\\Project\\react\\react-family\\src\\redux\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eWTF？这个错误困扰了半天。我说下为什么造成这个错误。我们引用\x3ccode\x3eredux\x3c\/code\x3e的时候这样用的\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eimport {createStore} from \x27redux\x27\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e然而，我们在\x3ccode\x3ewebapck.dev.config.js\x3c\/code\x3e里面这样配置了\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    resolve: {\n        alias: {\n            ...\n            redux: path.join(__dirname, \x27src\/redux\x27)\n        }\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    resolve: {\n        \x3cspan class=\x22hljs-attr\x22\x3ealias\x3c\/span\x3e: {\n            ...\n            redux: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/redux\x27\x3c\/span\x3e)\n        }\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后\x3ccode\x3ewebapck\x3c\/code\x3e编译的时候碰到\x3ccode\x3eredux\x3c\/code\x3e都去\x3ccode\x3esrc\/redux\x3c\/code\x3e去找了。但是找不到啊。所以我们把\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e里面\x3ccode\x3eredux\x3c\/code\x3e这一行删除了，就好了。\x3cbr\x3e并且把使用我们自己使用\x3ccode\x3eredux\x3c\/code\x3e文件夹的地方改成相对路径哦。\x3c\/p\x3e\n\x3cp\x3e现在你可以\x3ccode\x3enpm start\x3c\/code\x3e去看效果了。\x3c\/p\x3e\n\x3cp\x3e这里我们再缕下（可以读\x3ca href=\x22http:\/\/taobaofed.org\/blog\/2016\/08\/18\/react-redux-connect\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eReact 实践心得：react-redux 之 connect 方法详解\x3c\/a\x3e）\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3eProvider\x3c\/code\x3e组件是让所有的组件可以访问到\x3ccode\x3estore\x3c\/code\x3e。不用手动去传。也不用手动去监听。\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3econnect\x3c\/code\x3e函数作用是从 \x3ccode\x3eRedux state\x3c\/code\x3e 树中读取部分数据，并通过 props 来把这些数据提供给要渲染的组件。也传递\x3ccode\x3edispatch(action)\x3c\/code\x3e函数到\x3ccode\x3eprops\x3c\/code\x3e。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e接下来，我们要说异步\x3ccode\x3eaction\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e参考地址： \x3ca href=\x22http:\/\/cn.redux.js.org\/docs\/advanced\/AsyncActions.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/cn.redux.js.org\/docs\/a...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e想象一下我们调用一个异步\x3ccode\x3eget\x3c\/code\x3e请求去后台请求数据：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e请求开始的时候，界面转圈提示正在加载。\x3ccode\x3eisLoading\x3c\/code\x3e置为\x3ccode\x3etrue\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e请求成功，显示数据。\x3ccode\x3eisLoading\x3c\/code\x3e置为\x3ccode\x3efalse\x3c\/code\x3e,\x3ccode\x3edata\x3c\/code\x3e填充数据。\x3c\/li\x3e\n\x3cli\x3e请求失败，显示失败。\x3ccode\x3eisLoading\x3c\/code\x3e置为\x3ccode\x3efalse\x3c\/code\x3e，显示错误信息。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e下面，我们以向后台请求用户基本信息为例。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e我们先创建一个\x3ccode\x3euser.json\x3c\/code\x3e，等会请求用，相当于后台的API接口。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd dist\nmkdir api\ncd api\ntouch user.json\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd dist\nmkdir api\ncd api\ntouch user.json\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3edist\/api\/user.json\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n  \x26quot;name\x26quot;: \x26quot;brickspert\x26quot;,\n  \x26quot;intro\x26quot;: \x26quot;please give me a star\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n  \x3cspan class=\x22hljs-string\x22\x3e\x22name\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22brickspert\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22intro\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22please give me a star\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e创建必须的\x3ccode\x3eaction\x3c\/code\x3e创建函数。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/redux\/actions\ntouch userInfo.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/redux\/actions\ntouch userInfo.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/actions\/getUserInfo.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const GET_USER_INFO_REQUEST = \x26quot;userInfo\/GET_USER_INFO_REQUEST\x26quot;;\nexport const GET_USER_INFO_SUCCESS = \x26quot;userInfo\/GET_USER_INFO_SUCCESS\x26quot;;\nexport const GET_USER_INFO_FAIL = \x26quot;userInfo\/GET_USER_INFO_FAIL\x26quot;;\n\nfunction getUserInfoRequest() {\n    return {\n        type: GET_USER_INFO_REQUEST\n    }\n}\n\nfunction getUserInfoSuccess(userInfo) {\n    return {\n        type: GET_USER_INFO_SUCCESS,\n        userInfo: userInfo\n    }\n}\n\nfunction getUserInfoFail() {\n    return {\n        type: GET_USER_INFO_FAIL\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e GET_USER_INFO_REQUEST = \x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\/GET_USER_INFO_REQUEST\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e GET_USER_INFO_SUCCESS = \x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\/GET_USER_INFO_SUCCESS\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e GET_USER_INFO_FAIL = \x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\/GET_USER_INFO_FAIL\x22\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetUserInfoRequest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: GET_USER_INFO_REQUEST\n    }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetUserInfoSuccess\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3euserInfo\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: GET_USER_INFO_SUCCESS,\n        \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: userInfo\n    }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetUserInfoFail\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: GET_USER_INFO_FAIL\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们创建了请求中，请求成功，请求失败三个\x3ccode\x3eaction\x3c\/code\x3e创建函数。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e创建\x3ccode\x3ereducer\x3c\/code\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e再强调下，\x3ccode\x3ereducer\x3c\/code\x3e是根据\x3ccode\x3estate\x3c\/code\x3e和\x3ccode\x3eaction\x3c\/code\x3e生成新\x3ccode\x3estate\x3c\/code\x3e的\x3cstrong\x3e纯函数\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/redux\/reducers\ntouch userInfo.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/redux\/reducers\ntouch userInfo.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/reducers\/userInfo.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL} from \x27actions\/userInfo\x27;\n\n\nconst initState = {\n    isLoading: false,\n    userInfo: {},\n    errorMsg: \x27\x27\n};\n\nexport default function reducer(state = initState, action) {\n    switch (action.type) {\n        case GET_USER_INFO_REQUEST:\n            return {\n                ...state,\n                isLoading: true,\n                userInfo: {},\n                errorMsg: \x27\x27\n            };\n        case GET_USER_INFO_SUCCESS:\n            return {\n                ...state,\n                isLoading: false,\n                userInfo: action.userInfo,\n                errorMsg: \x27\x27\n            };\n        case GET_USER_INFO_FAIL:\n            return {\n                ...state,\n                isLoading: false,\n                userInfo: {},\n                errorMsg: \x27请求错误\x27\n            };\n        default:\n            return state;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27actions\/userInfo\x27\x3c\/span\x3e;\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initState = {\n    \x3cspan class=\x22hljs-attr\x22\x3eisLoading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: {},\n    \x3cspan class=\x22hljs-attr\x22\x3eerrorMsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ereducer\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estate = initState, action\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (action.type) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e GET_USER_INFO_REQUEST:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                ...state,\n                \x3cspan class=\x22hljs-attr\x22\x3eisLoading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: {},\n                \x3cspan class=\x22hljs-attr\x22\x3eerrorMsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n            };\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e GET_USER_INFO_SUCCESS:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                ...state,\n                \x3cspan class=\x22hljs-attr\x22\x3eisLoading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: action.userInfo,\n                \x3cspan class=\x22hljs-attr\x22\x3eerrorMsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n            };\n        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e GET_USER_INFO_FAIL:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                ...state,\n                \x3cspan class=\x22hljs-attr\x22\x3eisLoading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: {},\n                \x3cspan class=\x22hljs-attr\x22\x3eerrorMsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27请求错误\x27\x3c\/span\x3e\n            };\n        \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e state;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e这里的\x3ccode\x3e...state\x3c\/code\x3e语法，是和别人的\x3ccode\x3eObject.assign()\x3c\/code\x3e起同一个作用，合并新旧state。我们这里是没效果的，但是我建议都写上这个哦\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e组合\x3ccode\x3ereducer\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/reducers.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import counter from \x27reducers\/counter\x27;\nimport userInfo from \x27reducers\/userInfo\x27;\n\nexport default function combineReducers(state = {}, action) {\n    return {\n        counter: counter(state.counter, action),\n        userInfo: userInfo(state.userInfo, action)\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e counter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27reducers\/counter\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e userInfo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27reducers\/userInfo\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecombineReducers\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estate = {}, action\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ecounter\x3c\/span\x3e: counter(state.counter, action),\n        \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: userInfo(state.userInfo, action)\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\n\x3cp\x3e现在有了\x3ccode\x3eaction\x3c\/code\x3e，有了\x3ccode\x3ereducer\x3c\/code\x3e，我们就需要调用把\x3ccode\x3eaction\x3c\/code\x3e里面的三个\x3ccode\x3eaction\x3c\/code\x3e函数和网络请求结合起来。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e请求中 \x3ccode\x3edispatch getUserInfoRequest\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e请求成功 \x3ccode\x3edispatch getUserInfoSuccess\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e请求失败 \x3ccode\x3edispatch getUserInfoFail\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/actions\/userInfo.js\x3c\/code\x3e增加\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export function getUserInfo() {\n    return function (dispatch) {\n        dispatch(getUserInfoRequest());\n\n        return fetch(\x27http:\/\/localhost:8080\/api\/user.json\x27)\n            .then((response =\x3e {\n                return response.json()\n            }))\n            .then((json) =\x3e {\n                    dispatch(getUserInfoSuccess(json))\n                }\n            ).catch(\n                () =\x3e {\n                    dispatch(getUserInfoFail());\n                }\n            )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetUserInfo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edispatch\x3c\/span\x3e) \x3c\/span\x3e{\n        dispatch(getUserInfoRequest());\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e fetch(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/localhost:8080\/api\/user.json\x27\x3c\/span\x3e)\n            .then((\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e response.json()\n            }))\n            .then(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ejson\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                    dispatch(getUserInfoSuccess(json))\n                }\n            ).catch(\n                \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    dispatch(getUserInfoFail());\n                }\n            )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们这里发现，别的\x3ccode\x3eaction\x3c\/code\x3e创建函数都是返回\x3ccode\x3eaction\x3c\/code\x3e对象：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{type: xxxx}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e{\x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: xxxx}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是我们现在的这个\x3ccode\x3eaction\x3c\/code\x3e创建函数 \x3ccode\x3egetUserInfo\x3c\/code\x3e则是返回函数了。\x3c\/p\x3e\n\x3cp\x3e为了让\x3ccode\x3eaction\x3c\/code\x3e创建函数除了返回\x3ccode\x3eaction\x3c\/code\x3e对象外，还可以返回函数，我们需要引用\x3ccode\x3eredux-thunk\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save redux-thunk\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e这里涉及到\x3ccode\x3eredux\x3c\/code\x3e中间件\x3ccode\x3emiddleware\x3c\/code\x3e，我后面会讲到的。你也可以读这里\x3ca href=\x22http:\/\/cn.redux.js.org\/docs\/advanced\/Middleware.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMiddleware\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e简单的说，中间件就是\x3ccode\x3eaction\x3c\/code\x3e在到达\x3ccode\x3ereducer\x3c\/code\x3e，先经过中间件处理。我们之前知道\x3ccode\x3ereducer\x3c\/code\x3e能处理的\x3ccode\x3eaction\x3c\/code\x3e只有这样的\x3ccode\x3e{type:xxx}\x3c\/code\x3e，所以我们使用中间件来处理\x3cbr\x3e函数形式的\x3ccode\x3eaction\x3c\/code\x3e，把他们转为标准的\x3ccode\x3eaction\x3c\/code\x3e给\x3ccode\x3ereducer\x3c\/code\x3e。这是\x3ccode\x3eredux-thunk\x3c\/code\x3e的作用。\x3cbr\x3e使用\x3ccode\x3eredux-thunk\x3c\/code\x3e中间件\x3c\/p\x3e\n\x3cp\x3e我们来引入\x3ccode\x3eredux-thunk\x3c\/code\x3e中间件\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/store.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {createStore, applyMiddleware} from \x27redux\x27;\nimport thunkMiddleware from \x27redux-thunk\x27;\nimport combineReducers from \x27.\/reducers.js\x27;\n\nlet store = createStore(combineReducers, applyMiddleware(thunkMiddleware));\n\nexport default store;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {createStore, applyMiddleware} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e thunkMiddleware \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux-thunk\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e combineReducers \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/reducers.js\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e store = createStore(combineReducers, applyMiddleware(thunkMiddleware));\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e store;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里，\x3ccode\x3eredux\x3c\/code\x3e这边OK了，我们来写个组件验证下。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/pages\nmkdir UserInfo\ncd UserInfo\ntouch UserInfo.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/pages\nmkdir UserInfo\ncd UserInfo\ntouch UserInfo.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/UserInfo\/UserInfo.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\nimport {connect} from \x27react-redux\x27;\nimport {getUserInfo} from \x26quot;actions\/userInfo\x26quot;;\n\nclass UserInfo extends Component {\n\n    render() {\n        const {userInfo, isLoading, errorMsg} = this.props.userInfo;\n        return (\n            \x3cdiv\x3e\n                {\n                    isLoading ? \x27请求信息中......\x27 :\n                        (\n                            errorMsg ? errorMsg :\n                                \x3cdiv\x3e\n                                    \x3cp\x3e用户信息：\x3c\/p\x3e\n                                    \x3cp\x3e用户名：{userInfo.name}\x3c\/p\x3e\n                                    \x3cp\x3e介绍：{userInfo.intro}\x3c\/p\x3e\n                                \x3c\/div\x3e\n                        )\n                }\n                \x3cbutton onClick={() =\x3e this.props.getUserInfo()}\x3e请求用户信息\x3c\/button\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\n\nexport default connect((state) =\x3e ({userInfo: state.userInfo}), {getUserInfo})(UserInfo);\n\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {connect} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {getUserInfo} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22actions\/userInfo\x22\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserInfo\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {userInfo, isLoading, errorMsg} = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.userInfo;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                {\n                    isLoading ? \x27请求信息中......\x27 :\n                        (\n                            errorMsg ? errorMsg :\n                                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e用户信息：\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e用户名：{userInfo.name}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                                    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e介绍：{userInfo.intro}\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                        )\n                }\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonClick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e this.props.getUserInfo()}\x26gt;请求用户信息\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e connect(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3estate\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e ({\x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: state.userInfo}), {getUserInfo})(UserInfo);\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里你可能发现\x3ccode\x3econnect\x3c\/code\x3e参数写法不一样了，\x3ccode\x3emapStateToProps\x3c\/code\x3e函数用了\x3ccode\x3ees6\x3c\/code\x3e简写，\x3ccode\x3emapDispatchToProps\x3c\/code\x3e用了\x3ccode\x3ereact-redux\x3c\/code\x3e提供的简单写法。\x3c\/p\x3e\n\x3cp\x3e增加路由\x3cbr\x3e\x3ccode\x3esrc\/router\/router.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\n\nimport {BrowserRouter as Router, Route, Switch, Link} from \x27react-router-dom\x27;\n\nimport Home from \x27pages\/Home\/Home\x27;\nimport Page1 from \x27pages\/Page1\/Page1\x27;\nimport Counter from \x27pages\/Counter\/Counter\x27;\nimport UserInfo from \x27pages\/UserInfo\/UserInfo\x27;\n\nconst getRouter = () =\x3e (\n    \x3cRouter\x3e\n        \x3cdiv\x3e\n            \x3cul\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/\x26quot;\x3e首页\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/page1\x26quot;\x3ePage1\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/counter\x26quot;\x3eCounter\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/userinfo\x26quot;\x3eUserInfo\x3c\/Link\x3e\x3c\/li\x3e\n            \x3c\/ul\x3e\n            \x3cSwitch\x3e\n                \x3cRoute exact path=\x26quot;\/\x26quot; component={Home}\/\x3e\n                \x3cRoute path=\x26quot;\/page1\x26quot; component={Page1}\/\x3e\n                \x3cRoute path=\x26quot;\/counter\x26quot; component={Counter}\/\x3e\n                \x3cRoute path=\x26quot;\/userinfo\x26quot; component={UserInfo}\/\x3e\n            \x3c\/Switch\x3e\n        \x3c\/div\x3e\n    \x3c\/Router\x3e\n);\n\nexport default getRouter;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {BrowserRouter \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e Router, Route, Switch, Link} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Home\/Home\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Page1 \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Page1\/Page1\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Counter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/Counter\/Counter\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e UserInfo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27pages\/UserInfo\/UserInfo\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getRouter = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e (\n    \x26lt;Router\x26gt;\n        \x26lt;div\x26gt;\n            \x26lt;ul\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/\x22\x26gt;首页\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/page1\x22\x26gt;Page1\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/counter\x22\x26gt;Counter\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/userinfo\x22\x26gt;UserInfo\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n            \x26lt;\/ul\x26gt;\n            \x26lt;Switch\x26gt;\n                \x26lt;Route exact path=\x22\/\x22 component={Home}\/\x26gt;\n                \x26lt;Route path=\x22\/page1\x22 component={Page1}\/\x26gt;\n                \x26lt;Route path=\x22\/counter\x22 component={Counter}\/\x26gt;\n                \x26lt;Route path=\x22\/userinfo\x22 component={UserInfo}\/\x26gt;\n            \x26lt;\/Switch\x26gt;\n        \x26lt;\/div\x26gt;\n    \x26lt;\/Router\x26gt;\n);\n\nexport default getRouter;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在你可以执行\x3ccode\x3enpm start\x3c\/code\x3e去看效果啦！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981896\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981896\x22 alt=\x22redux\x22 title=\x22redux\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e到这里\x3ccode\x3eredux\x3c\/code\x3e集成基本告一段落了，后面我们还会有一些优化。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3ecombinReducers优化\x3c\/h2\x3e\n\x3cp\x3e\x3ccode\x3eredux\x3c\/code\x3e提供了一个\x3ccode\x3ecombineReducers\x3c\/code\x3e函数来合并\x3ccode\x3ereducer\x3c\/code\x3e，不用我们自己合并哦。写起来简单，但是意思和我们\x3cbr\x3e自己写的\x3ccode\x3ecombinReducers\x3c\/code\x3e也是一样的。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/reducers.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {combineReducers} from \x26quot;redux\x26quot;;\n\nimport counter from \x27reducers\/counter\x27;\nimport userInfo from \x27reducers\/userInfo\x27;\n\n\nexport default combineReducers({\n    counter,\n    userInfo\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {combineReducers} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x22redux\x22\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e counter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27reducers\/counter\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e userInfo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27reducers\/userInfo\x27\x3c\/span\x3e;\n\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e combineReducers({\n    counter,\n    userInfo\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader14\x22\x3edevtool优化\x3c\/h1\x3e\n\x3cp\x3e现在我们发现一个问题，代码哪里写错了，浏览器报错只报在\x3ccode\x3ebuild.js\x3c\/code\x3e第几行。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981897\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981897\x22 alt=\x22错误图片\x22 title=\x22错误图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这让我们分析错误无从下手。看\x3ca href=\x22https:\/\/doc.webpack-china.org\/configuration\/devtool\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e我们增加\x3ccode\x3ewebpack\x3c\/code\x3e配置\x3ccode\x3edevtool\x3c\/code\x3e！\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/webpack.dev.config.js\x3c\/code\x3e增加\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22devtool: \x27inline-source-map\x27\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3edevtool: \x3cspan class=\x22hljs-string\x22\x3e\x27inline-source-map\x27\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这次看错误信息是不是提示的很详细了？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981898\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981898\x22 alt=\x22错误图片\x22 title=\x22错误图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e同时，我们在\x3ccode\x3esrouce\x3c\/code\x3e里面能看到我们写的代码，也能打断点调试哦~\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981899\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981899\x22 alt=\x22错误图片\x22 title=\x22错误图片\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader15\x22\x3e编译css\x3c\/h1\x3e\n\x3cp\x3e先说这里为什么不用\x3ccode\x3escss\x3c\/code\x3e，因为\x3ccode\x3eWindows\x3c\/code\x3e使用\x3ccode\x3enode-sass\x3c\/code\x3e，需要先安装\x3ca href=\x22https:\/\/www.microsoft.com\/en-us\/download\/details.aspx?id=8279\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e Microsoft Windows SDK for Windows 7 and .NET Framework 4\x3c\/a\x3e。\x3cbr\x3e我怕有些人copy这份代码后，没注意，运行不起来。所以这里不用\x3ccode\x3escss\x3c\/code\x3e了，如果需要，自行编译哦。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install css-loader style-loader --save-dev\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ecss-loader\x3c\/code\x3e使你能够使用类似\x3ccode\x3e@import\x3c\/code\x3e 和 \x3ccode\x3eurl(...)\x3c\/code\x3e的方法实现 \x3ccode\x3erequire()\x3c\/code\x3e的功能； \x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3estyle-loader\x3c\/code\x3e将所有的计算后的样式加入页面中； 二者组合在一起使你能够把样式表嵌入\x3ccode\x3ewebpack\x3c\/code\x3e打包后的JS文件中。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e \x3ccode\x3erules\x3c\/code\x3e增加\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n   test: \/\\.css$\/,\n   use: [\x27style-loader\x27, \x27css-loader\x27]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n   \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.css$\/\x3c\/span\x3e,\n   \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们用\x3ccode\x3ePage1\x3c\/code\x3e页面来测试下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/pages\/Page1\ntouch Page1.css\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/pages\/Page1\ntouch Page1.css\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Page1\/Page1.css\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.page-box {\n    border: 1px solid red;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e.page-box {\n    \x3cspan class=\x22hljs-attr\x22\x3eborder\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3epx solid red;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Page1\/Page1.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nimport \x27.\/Page1.css\x27;\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            \x3cdiv className=\x26quot;page-box\x26quot;\x3e\n                this is page1~\n            \x3c\/div\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Page1.css\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePage1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22page-box\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                this is page1~\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n        )\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e好了，现在\x3ccode\x3enpm start\x3c\/code\x3e去看效果吧。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader16\x22\x3e编译图片\x3c\/h1\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save-dev url-loader file-loader\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e \x3ccode\x3erules\x3c\/code\x3e增加\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    test: \/\\.(png|jpg|gif)$\/,\n    use: [{\n        loader: \x27url-loader\x27,\n        options: {\n            limit: 8192\n        }\n    }]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpg|gif)$\/\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [{\n        \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e8192\x3c\/span\x3e\n        }\n    }]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eoptions limit 8192\x3c\/code\x3e意思是，小于等于8K的图片会被转成\x3ccode\x3ebase64\x3c\/code\x3e编码，直接插入HTML中，减少\x3ccode\x3eHTTP\x3c\/code\x3e请求。\x3c\/p\x3e\n\x3cp\x3e我们来用\x3ccode\x3ePage1\x3c\/code\x3e 测试下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/pages\/Page1\nmkdir images\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/pages\/Page1\nmkdir images\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e给\x3ccode\x3eimages\x3c\/code\x3e文件夹放一个图片。\x3c\/p\x3e\n\x3cp\x3e修改代码，引用图片\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3esrc\/pages\/Page1\/Page1.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27;\n\nimport \x27.\/Page1.css\x27;\n\nimport image from \x27.\/images\/brickpsert.jpg\x27;\n\nexport default class Page1 extends Component {\n    render() {\n        return (\n            \x3cdiv className=\x26quot;page-box\x26quot;\x3e\n                this is page1~\n                \x3cimg src={image}\/\x3e\n            \x3c\/div\x3e\n        )\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Page1.css\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e image \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/images\/brickpsert.jpg\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePage1\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e (\n            \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclassName\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22page-box\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                this is page1~\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eimg\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{image}\/\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        )\n    }\n}\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以去看看效果啦。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader17\x22\x3e按需加载\x3c\/h1\x3e\n\x3cp\x3e为什么要实现按需加载？\x3c\/p\x3e\n\x3cp\x3e我们现在看到，打包完后，所有页面只生成了一个\x3ccode\x3ebuild.js\x3c\/code\x3e,当我们首屏加载的时候，就会很慢。因为他也下载了别的页面的\x3ccode\x3ejs\x3c\/code\x3e了哦。\x3c\/p\x3e\n\x3cp\x3e如果每个页面都打包了自己单独的JS，在进入自己页面的时候才加载对应的js，那首屏加载就会快很多哦。\x3c\/p\x3e\n\x3cp\x3e在 \x3ccode\x3ereact-router 2.0\x3c\/code\x3e时代， 按需加载需要用到的最关键的一个函数，就是\x3ccode\x3erequire.ensure()\x3c\/code\x3e，它是按需加载能够实现的核心。\x3c\/p\x3e\n\x3cp\x3e在4.0版本，官方放弃了这种处理按需加载的方式，选择了一个更加简洁的处理方式。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/reacttraining.com\/react-router\/web\/guides\/code-splitting\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e传送门\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e根据官方示例，我们开搞\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ccode\x3enpm install bundle-loader --save-dev\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e新建\x3ccode\x3ebundle.js\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/router\ntouch Bundle.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/router\ntouch Bundle.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/router\/Bundle.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React, {Component} from \x27react\x27\n\nclass Bundle extends Component {\n    state = {\n        \/\/ short for \x26quot;module\x26quot; but that\x27s a keyword in js, so \x26quot;mod\x26quot;\n        mod: null\n    };\n\n    componentWillMount() {\n        this.load(this.props)\n    }\n\n    componentWillReceiveProps(nextProps) {\n        if (nextProps.load !== this.props.load) {\n            this.load(nextProps)\n        }\n    }\n\n    load(props) {\n        this.setState({\n            mod: null\n        });\n        props.load((mod) =\x3e {\n            this.setState({\n                \/\/ handle both es imports and cjs\n                mod: mod.default ? mod.default : mod\n            })\n        })\n    }\n\n    render() {\n        return this.props.children(this.state.mod)\n    }\n}\n\nexport default Bundle;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React, {Component} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBundle\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eComponent\x3c\/span\x3e \x3c\/span\x3e{\n    state = {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ short for \x22module\x22 but that\x27s a keyword in js, so \x22mod\x22\x3c\/span\x3e\n        mod: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n    };\n\n    componentWillMount() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props)\n    }\n\n    componentWillReceiveProps(nextProps) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (nextProps.load !== \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.load) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.load(nextProps)\n        }\n    }\n\n    load(props) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n            \x3cspan class=\x22hljs-attr\x22\x3emod\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e\n        });\n        props.load(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3emod\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setState({\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ handle both es imports and cjs\x3c\/span\x3e\n                mod: mod.default ? mod.default : mod\n            })\n        })\n    }\n\n    render() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.props.children(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.state.mod)\n    }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e Bundle;\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e改造路由器\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e\x3ccode\x3esrc\/router\/router.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import React from \x27react\x27;\n\nimport {BrowserRouter as Router, Route, Switch, Link} from \x27react-router-dom\x27;\n\nimport Bundle from \x27.\/Bundle\x27;\n\nimport Home from \x27bundle-loader?lazy\x26amp;name=home!pages\/Home\/Home\x27;\nimport Page1 from \x27bundle-loader?lazy\x26amp;name=page1!pages\/Page1\/Page1\x27;\nimport Counter from \x27bundle-loader?lazy\x26amp;name=counter!pages\/Counter\/Counter\x27;\nimport UserInfo from \x27bundle-loader?lazy\x26amp;name=userInfo!pages\/UserInfo\/UserInfo\x27;\n\nconst Loading = function () {\n    return \x3cdiv\x3eLoading...\x3c\/div\x3e\n};\n\nconst createComponent = (component) =\x3e () =\x3e (\n    \x3cBundle load={component}\x3e\n        {\n            (Component) =\x3e Component ? \x3cComponent\/\x3e : \x3cLoading\/\x3e\n        }\n    \x3c\/Bundle\x3e\n);\n\nconst getRouter = () =\x3e (\n    \x3cRouter\x3e\n        \x3cdiv\x3e\n            \x3cul\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/\x26quot;\x3e首页\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/page1\x26quot;\x3ePage1\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/counter\x26quot;\x3eCounter\x3c\/Link\x3e\x3c\/li\x3e\n                \x3cli\x3e\x3cLink to=\x26quot;\/userinfo\x26quot;\x3eUserInfo\x3c\/Link\x3e\x3c\/li\x3e\n            \x3c\/ul\x3e\n            \x3cSwitch\x3e\n                \x3cRoute exact path=\x26quot;\/\x26quot; component={createComponent(Home)}\/\x3e\n                \x3cRoute path=\x26quot;\/page1\x26quot; component={createComponent(Page1)}\/\x3e\n                \x3cRoute path=\x26quot;\/counter\x26quot; component={createComponent(Counter)}\/\x3e\n                \x3cRoute path=\x26quot;\/userinfo\x26quot; component={createComponent(UserInfo)}\/\x3e\n            \x3c\/Switch\x3e\n        \x3c\/div\x3e\n    \x3c\/Router\x3e\n);\n\nexport default getRouter;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e React \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {BrowserRouter \x3cspan class=\x22hljs-keyword\x22\x3eas\x3c\/span\x3e Router, Route, Switch, Link} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27react-router-dom\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Bundle \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/Bundle\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Home \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27bundle-loader?lazy\x26amp;name=home!pages\/Home\/Home\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Page1 \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27bundle-loader?lazy\x26amp;name=page1!pages\/Page1\/Page1\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Counter \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27bundle-loader?lazy\x26amp;name=counter!pages\/Counter\/Counter\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e UserInfo \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27bundle-loader?lazy\x26amp;name=userInfo!pages\/UserInfo\/UserInfo\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Loading = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3eLoading...\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e createComponent = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ecomponent\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e () =\x26gt; (\n    \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eBundle\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e{component}\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        {\n            (Component) =\x26gt; Component ? \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eComponent\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e : \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eLoading\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n        }\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eBundle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\n);\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e getRouter = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e (\n    \x26lt;Router\x26gt;\n        \x26lt;div\x26gt;\n            \x26lt;ul\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/\x22\x26gt;首页\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/page1\x22\x26gt;Page1\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/counter\x22\x26gt;Counter\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n                \x26lt;li\x26gt;\x26lt;Link to=\x22\/userinfo\x22\x26gt;UserInfo\x26lt;\/Link\x26gt;\x26lt;\/li\x26gt;\n            \x26lt;\/ul\x26gt;\n            \x26lt;Switch\x26gt;\n                \x26lt;Route exact path=\x22\/\x22 component={createComponent(Home)}\/\x26gt;\n                \x26lt;Route path=\x22\/page1\x22 component={createComponent(Page1)}\/\x26gt;\n                \x26lt;Route path=\x22\/counter\x22 component={createComponent(Counter)}\/\x26gt;\n                \x26lt;Route path=\x22\/userinfo\x22 component={createComponent(UserInfo)}\/\x26gt;\n            \x26lt;\/Switch\x26gt;\n        \x26lt;\/div\x26gt;\n    \x26lt;\/Router\x26gt;\n);\n\nexport default getRouter;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在你可以\x3ccode\x3enpm start\x3c\/code\x3e，打开浏览器，看是不是进入新的页面，都会加载自己的JS的~\x3c\/p\x3e\n\x3cp\x3e但是你可能发现，名字都是\x3ccode\x3e0.bundle.js\x3c\/code\x3e这样子的，这分不清楚是哪个页面的\x3ccode\x3ejs\x3c\/code\x3e呀！\x3c\/p\x3e\n\x3cp\x3e我们修改下\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e,加个\x3ccode\x3echunkFilename\x3c\/code\x3e。\x3ccode\x3echunkFilename\x3c\/code\x3e是除了\x3ccode\x3eentry\x3c\/code\x3e定义的入口\x3ccode\x3ejs\x3c\/code\x3e之外的\x3ccode\x3ejs\x3c\/code\x3e~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    output: {\n        path: path.join(__dirname, \x27.\/dist\x27),\n        filename: \x27bundle.js\x27,\n        chunkFilename: \x27[name].js\x27\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    output: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27bundle.js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3echunkFilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].js\x27\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在你运行发现名字变成\x3ccode\x3ehome.js\x3c\/code\x3e,这样的了。棒棒哒！\x3c\/p\x3e\n\x3cp\x3e那么问题来了\x3ccode\x3ehome\x3c\/code\x3e是在哪里设置的？\x3ccode\x3ewebpack\x3c\/code\x3e怎么知道他叫\x3ccode\x3ehome\x3c\/code\x3e？\x3c\/p\x3e\n\x3cp\x3e其实在这里我们定义了，\x3ccode\x3erouter.js\x3c\/code\x3e里面\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eimport Home from \x27bundle-loader?lazy\x26amp;name=home!pages\/Home\/Home\x27;\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e看到没。这里有个\x3ccode\x3ename=home\x3c\/code\x3e。嘿嘿。\x3c\/p\x3e\n\x3cp\x3e参考地址：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/www.jianshu.com\/p\/8dd98a7028e0\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.jianshu.com\/p\/8dd9...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/ReactTraining\/react-router\/blob\/master\/packages\/react-router-dom\/docs\/guides\/code-splitting.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/ReactTrain...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007949841\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/react-china.org\/t\/webpack-react-router\/10123\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/react-china.org\/t\/webp...\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/58f9717e44d9040069d06cd6\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/juejin.im\/post\/58f971...\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch1 id=\x22articleHeader18\x22\x3e缓存\x3c\/h1\x3e\n\x3cp\x3e想象一下这个场景~\x3c\/p\x3e\n\x3cp\x3e我们网站上线了，用户第一次访问首页，下载了\x3ccode\x3ehome.js\x3c\/code\x3e，第二次访问又下载了\x3ccode\x3ehome.js\x3c\/code\x3e~\x3c\/p\x3e\n\x3cp\x3e这肯定不行呀，所以我们一般都会做一个缓存，用户下载一次\x3ccode\x3ehome.js\x3c\/code\x3e后，第二次就不下载了。\x3c\/p\x3e\n\x3cp\x3e有一天，我们更新了\x3ccode\x3ehome.js\x3c\/code\x3e，但是用户不知道呀，用户还是使用本地旧的\x3ccode\x3ehome.js\x3c\/code\x3e。出问题了~\x3c\/p\x3e\n\x3cp\x3e怎么解决？每次代码更新后，打包生成的名字不一样。比如第一次叫\x3ccode\x3ehome.a.js\x3c\/code\x3e，第二次叫\x3ccode\x3ehome.b.js\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e文档\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/caching\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我们照着文档来\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    output: {\n        path: path.join(__dirname, \x27.\/dist\x27),\n        filename: \x27[name].[hash].js\x27,\n        chunkFilename: \x27[name].[chunkhash].js\x27\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    output: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[hash].js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3echunkFilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e每次打包都用增加\x3ccode\x3ehash\x3c\/code\x3e~\x3c\/p\x3e\n\x3cp\x3e现在我们试试，是不是修改了文件，打包后相应的文件名字就变啦？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981900\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981900\x22 alt=\x22package\x22 title=\x22package\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e但是你可能发现了，网页打开报错了~因为你\x3ccode\x3edist\/index.html\x3c\/code\x3e里面引用\x3ccode\x3ejs\x3c\/code\x3e名字还是\x3ccode\x3ebundle.js\x3c\/code\x3e老名字啊,改成新的名字就可以啦。\x3c\/p\x3e\n\x3cp\x3e啊~那岂不是我每次编译打包，都得去改一下js名字？欲知后事如何，且看下节分享。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader19\x22\x3eHtmlWebpackPlugin\x3c\/h1\x3e\n\x3cp\x3e这个插件，每次会自动把js插入到你的模板\x3ccode\x3eindex.html\x3c\/code\x3e里面去。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install html-webpack-plugin --save-dev\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e新建模板\x3ccode\x3eindex.html\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\ntouch index.html\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\ntouch index.html\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/index.html\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!doctype html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3eDocument\x3c\/title\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n\x3cdiv id=\x26quot;app\x26quot;\x3e\x3c\/div\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x26lt;!doctype html\x26gt;\n\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eDocument\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22app\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e，增加\x3ccode\x3eplugin\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27);\n\n    plugins: [new HtmlWebpackPlugin({\n        filename: \x27index.html\x27,\n        template: path.join(__dirname, \x27src\/index.html\x27)\n    })],\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e);\n\n    plugins: [\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/index.html\x27\x3c\/span\x3e)\n    })],\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3enpm start\x3c\/code\x3e运行项目，看看是不是能正常访问啦。~\x3c\/p\x3e\n\x3cp\x3e说明一下：\x3ccode\x3enpm start\x3c\/code\x3e打包后的文件存在内存中，你看不到的。~ 你可以把遗留\x3ccode\x3edist\/index.html\x3c\/code\x3e删除掉了。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader20\x22\x3e提取公共代码\x3c\/h1\x3e\n\x3cp\x3e想象一下，我们的主文件，原来的\x3ccode\x3ebundle.js\x3c\/code\x3e里面是不是包含了\x3ccode\x3ereact\x3c\/code\x3e,\x3ccode\x3eredux\x3c\/code\x3e,\x3ccode\x3ereact-router\x3c\/code\x3e等等\x3cbr\x3e这些代码？？这些代码基本上不会改变的。但是，他们合并在\x3ccode\x3ebundle.js\x3c\/code\x3e里面，每次项目发布，重新请求\x3ccode\x3ebundle.js\x3c\/code\x3e的时候，相当于重新请求了\x3cbr\x3e\x3ccode\x3ereact\x3c\/code\x3e等这些公共库。浪费了~\x3c\/p\x3e\n\x3cp\x3e我们把\x3ccode\x3ereact\x3c\/code\x3e这些不会改变的公共库提取出来，用户缓存下来。从此以后，用户再也不用下载这些库了，无论是否发布项目。嘻嘻。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack\x3c\/code\x3e文档给了教程，\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/caching#-extracting-boilerplate-\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    var webpack = require(\x27webpack\x27);\n\n    entry: {\n        app: [\n            \x27react-hot-loader\/patch\x27,\n            path.join(__dirname, \x27src\/index.js\x27)\n        ],\n        vendor: [\x27react\x27, \x27react-router-dom\x27, \x27redux\x27, \x27react-dom\x27, \x27react-redux\x27]\n    }\n    \n        \/*plugins*\/\n        new webpack.optimize.CommonsChunkPlugin({\n            name: \x27vendor\x27\n        })\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\n    entry: {\n        \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: [\n            \x3cspan class=\x22hljs-string\x22\x3e\x27react-hot-loader\/patch\x27\x3c\/span\x3e,\n            path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/index.js\x27\x3c\/span\x3e)\n        ],\n        \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-router-dom\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e]\n    }\n    \n        \x3cspan class=\x22hljs-comment\x22\x3e\/*plugins*\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e\n        })\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e把\x3ccode\x3ereact\x3c\/code\x3e等库生成打包到\x3ccode\x3evendor.hash.js\x3c\/code\x3e里面去。\x3c\/p\x3e\n\x3cp\x3e但是你现在可能发现编译生成的文件\x3ccode\x3eapp.[hash].js\x3c\/code\x3e和\x3ccode\x3evendor.[hash].js\x3c\/code\x3e生成的\x3ccode\x3ehash\x3c\/code\x3e一样的，这里是个问题，因为呀，你每次修改代码,都会导致\x3ccode\x3evendor.[hash].js\x3c\/code\x3e名字改变，那我们提取出来的意义也就没了。其实文档上写的很清楚，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22   output: {\n        path: path.join(__dirname, \x27.\/dist\x27),\n        filename: \x27[name].[hash].js\x27, \/\/这里应该用chunkhash替换hash\n        chunkFilename: \x27[name].[chunkhash].js\x27\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e   output: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[hash].js\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/这里应该用chunkhash替换hash\x3c\/span\x3e\n        chunkFilename: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e但是无奈，如果用\x3ccode\x3echunkhash\x3c\/code\x3e，会报错。和\x3ccode\x3ewebpack-dev-server --hot\x3c\/code\x3e不兼容，具体\x3ca href=\x22https:\/\/github.com\/webpack\/webpack-dev-server\/issues\/377\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看这里\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e现在我们在配置开发版配置文件，就向\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e妥协，因为我们要用他。问题先放这里，等会我们配置正式版\x3ccode\x3ewebpack.config.js\x3c\/code\x3e的时候要解决这个问题。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader21\x22\x3e生产坏境构建\x3c\/h1\x3e\n\x3cblockquote\x3e\x3cp\x3e开发环境(development)和生产环境(production)的构建目标差异很大。在开发环境中，我们需要具有强大的、具有实时重新加载(live reloading)或热模块替换(hot module replacement)能力的 source map 和 localhost server。而在生产环境中，我们的目标则转向于关注更小的 bundle，更轻量的 source map，以及更优化的资源，以改善加载时间。由于要遵循逻辑分离，我们通常建议为每个环境编写彼此独立的 webpack 配置。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e文档\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/production\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e看这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我们要开始做了~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22touch webpack.config.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3etouch webpack.config.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在\x3ccode\x3ewebpack.dev.config.js\x3c\/code\x3e的基础上先做以下几个修改~\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e先删除\x3ccode\x3ewebpack-dev-server\x3c\/code\x3e相关的东西~\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3edevtool\x3c\/code\x3e的值改成\x3ccode\x3echeap-module-source-map\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e刚才说的\x3ccode\x3ehash\x3c\/code\x3e改成\x3ccode\x3echunkhash\x3c\/code\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const path = require(\x27path\x27);\nvar HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27);\nvar webpack = require(\x27webpack\x27);\n\nmodule.exports = {\n    devtool: \x27cheap-module-source-map\x27,\n    entry: {\n        app: [\n            path.join(__dirname, \x27src\/index.js\x27)\n        ],\n        vendor: [\x27react\x27, \x27react-router-dom\x27, \x27redux\x27, \x27react-dom\x27, \x27react-redux\x27]\n    },\n    output: {\n        path: path.join(__dirname, \x27.\/dist\x27),\n        filename: \x27[name].[chunkhash].js\x27,\n        chunkFilename: \x27[name].[chunkhash].js\x27\n    },\n    module: {\n        rules: [{\n            test: \/\\.js$\/,\n            use: [\x27babel-loader\x27],\n            include: path.join(__dirname, \x27src\x27)\n        }, {\n            test: \/\\.css$\/,\n            use: [\x27style-loader\x27, \x27css-loader\x27]\n        }, {\n            test: \/\\.(png|jpg|gif)$\/,\n            use: [{\n                loader: \x27url-loader\x27,\n                options: {\n                    limit: 8192\n                }\n            }]\n        }]\n    },\n    plugins: [\n        new HtmlWebpackPlugin({\n            filename: \x27index.html\x27,\n            template: path.join(__dirname, \x27src\/index.html\x27)\n        }),\n        new webpack.optimize.CommonsChunkPlugin({\n            name: \x27vendor\x27\n        })\n    ],\n\n    resolve: {\n        alias: {\n            pages: path.join(__dirname, \x27src\/pages\x27),\n            component: path.join(__dirname, \x27src\/component\x27),\n            router: path.join(__dirname, \x27src\/router\x27),\n            actions: path.join(__dirname, \x27src\/redux\/actions\x27),\n            reducers: path.join(__dirname, \x27src\/redux\/reducers\x27)\n        }\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e HtmlWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27html-webpack-plugin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e webpack = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27webpack\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n    \x3cspan class=\x22hljs-attr\x22\x3edevtool\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27cheap-module-source-map\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eentry\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3eapp\x3c\/span\x3e: [\n            path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/index.js\x27\x3c\/span\x3e)\n        ],\n        \x3cspan class=\x22hljs-attr\x22\x3evendor\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27react\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-router-dom\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-dom\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27react-redux\x27\x3c\/span\x3e]\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eoutput\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27.\/dist\x27\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3echunkFilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[chunkhash].js\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [{\n            \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.js$\/\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27babel-loader\x27\x3c\/span\x3e],\n            \x3cspan class=\x22hljs-attr\x22\x3einclude\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\x27\x3c\/span\x3e)\n        }, {\n            \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.css$\/\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27style-loader\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27css-loader\x27\x3c\/span\x3e]\n        }, {\n            \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.(png|jpg|gif)$\/\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: [{\n                \x3cspan class=\x22hljs-attr\x22\x3eloader\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27url-loader\x27\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e: {\n                    \x3cspan class=\x22hljs-attr\x22\x3elimit\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e8192\x3c\/span\x3e\n                }\n            }]\n        }]\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e HtmlWebpackPlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3etemplate\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/index.html\x27\x3c\/span\x3e)\n        }),\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n            \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27vendor\x27\x3c\/span\x3e\n        })\n    ],\n\n    \x3cspan class=\x22hljs-attr\x22\x3eresolve\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ealias\x3c\/span\x3e: {\n            \x3cspan class=\x22hljs-attr\x22\x3epages\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/pages\x27\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/component\x27\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3erouter\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/router\x27\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3eactions\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/redux\/actions\x27\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3ereducers\x3c\/span\x3e: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27src\/redux\/reducers\x27\x3c\/span\x3e)\n        }\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在\x3ccode\x3epackage.json\x3c\/code\x3e增加打包脚本\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e\x22build\x22:\x22webpack --config webpack.config.js\x22\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e然后执行\x3ccode\x3enpm run build\x3c\/code\x3e~看看\x3ccode\x3edist\x3c\/code\x3e文件夹是不是生成了我们发布要用的所有文件哦？\x3c\/p\x3e\n\x3cp\x3e接下来我们还是要优化正式版配置文件~\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader22\x22\x3e文件压缩\x3c\/h1\x3e\n\x3cp\x3e\x3ccode\x3ewebpack\x3c\/code\x3e使用\x3ccode\x3eUglifyJSPlugin\x3c\/code\x3e来压缩生成的文件。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm i --save-dev uglifyjs-webpack-plugin\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const UglifyJSPlugin = require(\x27uglifyjs-webpack-plugin\x27)\n\nmodule.exports = {\n  plugins: [\n    new UglifyJSPlugin()\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e UglifyJSPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27uglifyjs-webpack-plugin\x27\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UglifyJSPlugin()\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3enpm run build\x3c\/code\x3e发现打包文件大小减小了好多。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981901\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981901\x22 alt=\x22uglify\x22 title=\x22uglify\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader23\x22\x3e指定环境\x3c\/h1\x3e\n\x3cblockquote\x3e\x3cp\x3e许多 library 将通过与 process.env.NODE_ENV 环境变量关联，以决定 library 中应该引用哪些内容。例如，当不处于生产环境中时，某些 library 为了使调试变得容易，可能会添加额外的日志记录(log)和测试(test)。其实，当使用 process.env.NODE_ENV === \x27production\x27 时，一些 library 可能针对具体用户的环境进行代码优化，从而删除或添加一些重要代码。我们可以使用 webpack 内置的 DefinePlugin 为所有的依赖定义这个变量：\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  plugins: [\n       new webpack.DefinePlugin({\n          \x27process.env\x27: {\n              \x27NODE_ENV\x27: JSON.stringify(\x27production\x27)\n           }\n       })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n       \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.DefinePlugin({\n          \x3cspan class=\x22hljs-string\x22\x3e\x27process.env\x27\x3c\/span\x3e: {\n              \x3cspan class=\x22hljs-string\x22\x3e\x27NODE_ENV\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eJSON\x3c\/span\x3e.stringify(\x3cspan class=\x22hljs-string\x22\x3e\x27production\x27\x3c\/span\x3e)\n           }\n       })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3enpm run build\x3c\/code\x3e后发现\x3ccode\x3evendor.[hash].js\x3c\/code\x3e又变小了。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010981902\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010981902\x22 alt=\x22uglify\x22 title=\x22uglify\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader24\x22\x3e优化缓存\x3c\/h1\x3e\n\x3cp\x3e刚才我们把\x3ccode\x3e[name].[hash].js\x3c\/code\x3e变成\x3ccode\x3e[name].[chunkhash].js\x3c\/code\x3e后，\x3ccode\x3enpm run build\x3c\/code\x3e后，\x3cbr\x3e发现\x3ccode\x3eapp.xxx.js\x3c\/code\x3e和\x3ccode\x3evendor.xxx.js\x3c\/code\x3e不一样了哦。\x3c\/p\x3e\n\x3cp\x3e但是现在又有一个问题了。\x3c\/p\x3e\n\x3cp\x3e你随便修改代码一处，例如\x3ccode\x3eHome.js\x3c\/code\x3e，随便改变个字，你发现\x3ccode\x3ehome.xxx.js\x3c\/code\x3e名字变化的同时，\x3cbr\x3e\x3ccode\x3evendor.xxx.js\x3c\/code\x3e名字也变了。这不行啊。这和没拆分不是一样一样了吗？我们本意是\x3ccode\x3evendor.xxx.js\x3c\/code\x3e\x3cbr\x3e名字永久不变，一直缓存在用户本地的。~\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/caching\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e推荐了一个插件\x3ca href=\x22https:\/\/doc.webpack-china.org\/plugins\/hashed-module-ids-plugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHashedModuleIdsPlugin\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    plugins: [\n        new webpack.HashedModuleIdsPlugin()\n    ]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    plugins: [\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.HashedModuleIdsPlugin()\n    ]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在你打包，修改代码再试试，是不是名字不变啦？错了，现在打包，我发现名字还是变了，经过比对文档，我发现还要加一个\x3ccode\x3eruntime\x3c\/code\x3e代码抽取，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new webpack.optimize.CommonsChunkPlugin({\n    name: \x27runtime\x27\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e webpack.optimize.CommonsChunkPlugin({\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27runtime\x27\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e加上这句话就好了~为什么呢？看下\x3ca href=\x22https:\/\/doc.webpack-china.org\/concepts\/manifest\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e解释\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e注意，引入顺序在这里很重要。CommonsChunkPlugin 的 \x27vendor\x27 实例，必须在 \x27runtime\x27 实例之前引入。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader25\x22\x3epublic path\x3c\/h1\x3e\n\x3cp\x3e想象一个场景，我们的静态文件放在了单独的静态服务器上去了，那我们打包的时候，如何让静态文件的链接定位到静态服务器呢？\x3c\/p\x3e\n\x3cp\x3e看文档\x3ca href=\x22https:\/\/doc.webpack-china.org\/guides\/public-path\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePublic Path\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e \x3ccode\x3eoutput\x3c\/code\x3e 中增加一个\x3ccode\x3epublicPath\x3c\/code\x3e，我们当前用\x3ccode\x3e\/\x3c\/code\x3e，相对于当前路径，如果你要改成别的\x3ccode\x3eurl\x3c\/code\x3e，就改这里就好了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    output: {\n        publicPath : \x27\/\x27\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    output: {\n        \x3cspan class=\x22hljs-attr\x22\x3epublicPath\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader26\x22\x3e打包优化\x3c\/h1\x3e\n\x3cp\x3e你现在打开\x3ccode\x3edist\x3c\/code\x3e，是不是发现好多好多文件，每次打包后的文件在这里混合了？我们希望每次打包前自动清理下\x3ccode\x3edist\x3c\/code\x3e文件。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install clean-webpack-plugin --save-dev\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const CleanWebpackPlugin = require(\x27clean-webpack-plugin\x27);\n\n\nplugins: [\n    new CleanWebpackPlugin([\x27dist\x27])\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e CleanWebpackPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27clean-webpack-plugin\x27\x3c\/span\x3e);\n\n\nplugins: [\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CleanWebpackPlugin([\x3cspan class=\x22hljs-string\x22\x3e\x27dist\x27\x3c\/span\x3e])\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在\x3ccode\x3enpm run bundle\x3c\/code\x3e试试，是不是之前的都清空了。当然我们之前的\x3ccode\x3eapi\x3c\/code\x3e文件夹也被清空了，不过没关系哦~本来就是测试用的。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader27\x22\x3e抽取css\x3c\/h1\x3e\n\x3cp\x3e目前我们的\x3ccode\x3ecss\x3c\/code\x3e是直接打包进\x3ccode\x3ejs\x3c\/code\x3e里面的，我们希望能单独生成\x3ccode\x3ecss\x3c\/code\x3e文件。\x3c\/p\x3e\n\x3cp\x3e我们使用\x3ca href=\x22https:\/\/github.com\/webpack-contrib\/extract-text-webpack-plugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eextract-text-webpack-plugin\x3c\/a\x3e来实现。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save-dev extract-text-webpack-plugin\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3ewebpack.config.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const ExtractTextPlugin = require(\x26quot;extract-text-webpack-plugin\x26quot;);\n\nmodule.exports = {\n  module: {\n    rules: [\n      {\n        test: \/\\.css$\/,\n        use: ExtractTextPlugin.extract({\n          fallback: \x26quot;style-loader\x26quot;,\n          use: \x26quot;css-loader\x26quot;\n        })\n      }\n    ]\n  },\n  plugins: [\n     new ExtractTextPlugin({\n         filename: \x27[name].[contenthash:5].css\x27,\n         allChunks: true\n     })\n  ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ExtractTextPlugin = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22extract-text-webpack-plugin\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3emodule\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-attr\x22\x3erules\x3c\/span\x3e: [\n      {\n        \x3cspan class=\x22hljs-attr\x22\x3etest\x3c\/span\x3e: \x3cspan class=\x22hljs-regexp\x22\x3e\/\\.css$\/\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: ExtractTextPlugin.extract({\n          \x3cspan class=\x22hljs-attr\x22\x3efallback\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22style-loader\x22\x3c\/span\x3e,\n          \x3cspan class=\x22hljs-attr\x22\x3euse\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22css-loader\x22\x3c\/span\x3e\n        })\n      }\n    ]\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eplugins\x3c\/span\x3e: [\n     \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e ExtractTextPlugin({\n         \x3cspan class=\x22hljs-attr\x22\x3efilename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27[name].[contenthash:5].css\x27\x3c\/span\x3e,\n         \x3cspan class=\x22hljs-attr\x22\x3eallChunks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n     })\n  ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3enpm run build\x3c\/code\x3e后发现单独生成了\x3ccode\x3ecss\x3c\/code\x3e文件哦\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader28\x22\x3e使用\x3ccode\x3eaxios\x3c\/code\x3e和\x3ccode\x3emiddleware\x3c\/code\x3e优化API请求\x3c\/h1\x3e\n\x3cp\x3e先安装下\x3ca href=\x22https:\/\/github.com\/mzabriskie\/axios\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eaxios\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm install --save axios\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e我们之前项目的一次API请求是这样写的哦~\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eaction\x3c\/code\x3e创建函数是这样的。比我们现在写的\x3ccode\x3efetch\x3c\/code\x3e简单多了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export function getUserInfo() {\n    return {\n        types: [GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL],\n        promise: client =\x3e client.get(`http:\/\/localhost:8080\/api\/user.json`)\n        afterSuccess:(dispatch,getState,response)=\x3e{\n            \/*请求成功后执行的函数*\/\n        },\n        otherData:otherData\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetUserInfo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3etypes\x3c\/span\x3e: [GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL],\n        \x3cspan class=\x22hljs-attr\x22\x3epromise\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eclient\x3c\/span\x3e =\x26gt;\x3c\/span\x3e client.get(\x3cspan class=\x22hljs-string\x22\x3e`http:\/\/localhost:8080\/api\/user.json`\x3c\/span\x3e)\n        afterSuccess:\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3edispatch,getState,response\x3c\/span\x3e)=\x26gt;\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/*请求成功后执行的函数*\/\x3c\/span\x3e\n        },\n        \x3cspan class=\x22hljs-attr\x22\x3eotherData\x3c\/span\x3e:otherData\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在dispatch(getUserInfo())后，通过\x3ccode\x3eredux\x3c\/code\x3e中间件来处理请求逻辑。\x3c\/p\x3e\n\x3cp\x3e中间件的教程看\x3ca href=\x22http:\/\/cn.redux.js.org\/docs\/advanced\/Middleware.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e这里\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我们想想中间件的逻辑\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e请求前\x3ccode\x3edispatch\x3c\/code\x3e \x3ccode\x3eREQUEST\x3c\/code\x3e请求。\x3c\/li\x3e\n\x3cli\x3e成功后\x3ccode\x3edispatch\x3c\/code\x3e \x3ccode\x3eSUCCESS\x3c\/code\x3e请求，如果定义了\x3ccode\x3eafterSuccess()\x3c\/code\x3e函数，调用它。\x3c\/li\x3e\n\x3cli\x3e失败后\x3ccode\x3edispatch\x3c\/code\x3e \x3ccode\x3eFAIL\x3c\/code\x3e请求。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e来写一个\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22cd src\/redux\nmkdir middleware\ncd middleware\ntouch promiseMiddleware.js\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ecd src\/redux\nmkdir middleware\ncd middleware\ntouch promiseMiddleware.js\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3esrc\/redux\/middleware\/promiseMiddleware.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import axios from \x27axios\x27;\n\nexport default  store =\x3e next =\x3e action =\x3e {\n    const {dispatch, getState} = store;\n    \/*如果dispatch来的是一个function，此处不做处理，直接进入下一级*\/\n    if (typeof action === \x27function\x27) {\n        action(dispatch, getState);\n    }\n    \/*解析action*\/\n    const {\n        promise,\n        types,\n        afterSuccess,\n        ...rest\n    } = action;\n\n    \/*没有promise，证明不是想要发送ajax请求的，就直接进入下一步啦！*\/\n    if (!action.promise) {\n        return next(action);\n    }\n\n    \/*解析types*\/\n    const [REQUEST,\n        SUCCESS,\n        FAILURE] = types;\n\n    \/*开始请求的时候，发一个action*\/\n    next({\n        ...rest,\n        type: REQUEST\n    });\n    \/*定义请求成功时的方法*\/\n    const onFulfilled = result =\x3e {\n        next({\n            ...rest,\n            result,\n            type: SUCCESS\n        });\n        if (afterSuccess) {\n            afterSuccess(dispatch, getState, result);\n        }\n    };\n    \/*定义请求失败时的方法*\/\n    const onRejected = error =\x3e {\n        next({\n            ...rest,\n            error,\n            type: FAILURE\n        });\n    };\n\n    return promise(axios).then(onFulfilled, onRejected).catch(error =\x3e {\n        console.error(\x27MIDDLEWARE ERROR:\x27, error);\n        onRejected(error)\n    })\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e  store =\x26gt; \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3enext\x3c\/span\x3e =\x26gt;\x3c\/span\x3e action =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {dispatch, getState} = store;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*如果dispatch来的是一个function，此处不做处理，直接进入下一级*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e action === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n        action(dispatch, getState);\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*解析action*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {\n        promise,\n        types,\n        afterSuccess,\n        ...rest\n    } = action;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*没有promise，证明不是想要发送ajax请求的，就直接进入下一步啦！*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!action.promise) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e next(action);\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*解析types*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e [REQUEST,\n        SUCCESS,\n        FAILURE] = types;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*开始请求的时候，发一个action*\/\x3c\/span\x3e\n    next({\n        ...rest,\n        \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: REQUEST\n    });\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*定义请求成功时的方法*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e onFulfilled = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresult\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        next({\n            ...rest,\n            result,\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: SUCCESS\n        });\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (afterSuccess) {\n            afterSuccess(dispatch, getState, result);\n        }\n    };\n    \x3cspan class=\x22hljs-comment\x22\x3e\/*定义请求失败时的方法*\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e onRejected = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        next({\n            ...rest,\n            error,\n            \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: FAILURE\n        });\n    };\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e promise(axios).then(onFulfilled, onRejected).catch(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerror\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.error(\x3cspan class=\x22hljs-string\x22\x3e\x27MIDDLEWARE ERROR:\x27\x3c\/span\x3e, error);\n        onRejected(error)\n    })\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改\x3ccode\x3esrc\/redux\/store.js\x3c\/code\x3e来应用这个中间件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import {createStore, applyMiddleware} from \x27redux\x27;\nimport combineReducers from \x27.\/reducers.js\x27;\n\nimport promiseMiddleware from \x27.\/middleware\/promiseMiddleware\x27\n\nlet store = createStore(combineReducers, applyMiddleware(promiseMiddleware));\n\nexport default store;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {createStore, applyMiddleware} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27redux\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e combineReducers \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/reducers.js\x27\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e promiseMiddleware \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/middleware\/promiseMiddleware\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e store = createStore(combineReducers, applyMiddleware(promiseMiddleware));\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e store;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e修改\x3ccode\x3esrc\/redux\/actions\/userInfo.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22export const GET_USER_INFO_REQUEST = \x26quot;userInfo\/GET_USER_INFO_REQUEST\x26quot;;\nexport const GET_USER_INFO_SUCCESS = \x26quot;userInfo\/GET_USER_INFO_SUCCESS\x26quot;;\nexport const GET_USER_INFO_FAIL = \x26quot;userInfo\/GET_USER_INFO_FAIL\x26quot;;\n\nexport function getUserInfo() {\n    return {\n        types: [GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL],\n        promise: client =\x3e client.get(`http:\/\/localhost:8080\/api\/user.json`)\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e GET_USER_INFO_REQUEST = \x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\/GET_USER_INFO_REQUEST\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e GET_USER_INFO_SUCCESS = \x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\/GET_USER_INFO_SUCCESS\x22\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e GET_USER_INFO_FAIL = \x3cspan class=\x22hljs-string\x22\x3e\x22userInfo\/GET_USER_INFO_FAIL\x22\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3egetUserInfo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3etypes\x3c\/span\x3e: [GET_USER_INFO_REQUEST, GET_USER_INFO_SUCCESS, GET_USER_INFO_FAIL],\n        \x3cspan class=\x22hljs-attr\x22\x3epromise\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eclient\x3c\/span\x3e =\x26gt;\x3c\/span\x3e client.get(\x3cspan class=\x22hljs-string\x22\x3e`http:\/\/localhost:8080\/api\/user.json`\x3c\/span\x3e)\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是不是简单清新很多啦？\x3c\/p\x3e\n\x3cp\x3e修改\x3ccode\x3esrc\/redux\/reducers\/userInfo.js\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        case GET_USER_INFO_SUCCESS:\n            return {\n                ...state,\n                isLoading: false,\n                userInfo: action.result.data,\n                errorMsg: \x27\x27\n            };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e        \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e GET_USER_INFO_SUCCESS:\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n                ...state,\n                \x3cspan class=\x22hljs-attr\x22\x3eisLoading\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3euserInfo\x3c\/span\x3e: action.result.data,\n                \x3cspan class=\x22hljs-attr\x22\x3eerrorMsg\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n            };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eaction.userInfo\x3c\/code\x3e修改成了\x3ccode\x3eaction.result.data\x3c\/code\x3e。你看中间件，请求成功，会给\x3ccode\x3eaction\x3c\/code\x3e增加一个\x3ccode\x3eresult\x3c\/code\x3e字段来存储响应结果哦~不用手动传了。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enpm start\x3c\/code\x3e看看我们的网络请求是不是正常哦。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader29\x22\x3e调整文本编辑器\x3c\/h1\x3e\n\x3cp\x3e使用自动编译代码时，可能会在保存文件时遇到一些问题。某些编辑器具有“安全写入”功能，可能会影响重新编译。\x3c\/p\x3e\n\x3cp\x3e要在一些常见的编辑器中禁用此功能，请查看以下列表：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eSublime Text 3 - 在用户首选项(user preferences)中添加 atomic_save: \x22false\x22。\x3c\/li\x3e\n\x3cli\x3eIntelliJ - 在首选项(preferences)中使用搜索，查找到 \x22safe write\x22 并且禁用它。\x3c\/li\x3e\n\x3cli\x3eVim - 在设置(settings)中增加 :set backupcopy=yes。\x3c\/li\x3e\n\x3cli\x3eWebStorm - 在 Preferences \x26gt; Appearance \x26amp; Behavior \x26gt; System Settings 中取消选中 Use \x22safe write\x22。\x3c\/li\x3e\n\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从零搭建React全家桶框架教程</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010981888">https://segmentfault.com/a/1190000010981888</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/scyesvxiw7/" target="_blank">https://alili.tech/archive/scyesvxiw7/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>