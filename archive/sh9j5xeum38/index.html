<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Electron 实战桌面计算器应用"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Electron 实战桌面计算器应用 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/sh9j5xeum38/",
				"appid": "1613049289050283", 
				"title": "Electron 实战桌面计算器应用 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-02T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/43fpgepgp8i/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/iatzr9kkqg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&text=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&text=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&title=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&is_video=false&description=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&title=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&title=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&title=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsh9j5xeum38%2f&title=Electron%20%e5%ae%9e%e6%88%98%e6%a1%8c%e9%9d%a2%e8%ae%a1%e7%ae%97%e5%99%a8%e5%ba%94%e7%94%a8"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Electron 实战桌面计算器应用</h1><div class="meta"><div class="postdate"><time datetime="2019-01-02" itemprop="datePublished">2019-01-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3eElectron 是一个搭建跨平台桌面应用的框架，仅仅使用 JavaScript、HTML 以及 CSS，即可快速而容易地搭建一个原生应用。这对于想要涉及其他领域的开发者来说是一个非常大的福利。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e项目介绍\x3c\/h2\x3e\n\x3cp\x3e仓库地址：\x3ca href=\x22https:\/\/github.com\/lin-xin\/calculator\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elin-xin\/calculator\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e我这里通过 Electron 实现了仿 iPhone 的计算器，通过菜单可以切换横屏和竖屏，横屏有更多的运算。而对于 JavaScript 进行浮点数计算来说，精度丢失是个很大问题，所以我这里使用了第三方库 math.js 来解决这个精度的问题。\x3cbr\x3e尽可能的实现了跟 iPhone 一样的运算：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e1 \x2b 2 × 3 = 7\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e3 \x2b= 6 (再按 = 等于 9)\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e0.1 \x2b 0.2 = 0.3 (浮点数精度处理)\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010994892\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010994892\x22 alt=\x22Image text\x22 title=\x22Image text\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010994893\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010994893\x22 alt=\x22Image text\x22 title=\x22Image text\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e不过我下面并不是要讲计算器，而是用到的 Electron 的知识点。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e生命周期\x3c\/h2\x3e\n\x3cp\x3e在主进程中通过 app 模块控制整个应用的生命周期。\x3c\/p\x3e\n\x3cp\x3e当 Electron 完成初始化时触发 ready 事件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.on(\x27ready\x27, () =\x3e {\n    \/\/ 创建窗口、加载页面等操作\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eapp.on(\x3cspan class=\x22hljs-string\x22\x3e\x27ready\x27\x3c\/span\x3e, () =\x26gt; {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建窗口、加载页面等操作\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当所有的窗口都被关闭时会触发 window-all-closed 事件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22app.on(\x27window-all-closed\x27, () =\x3e {\n    if(process.platform !== \x27darwin\x27){\n        app.quit();     \/\/ 退出应用\n    }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eapp.on(\x3cspan class=\x22hljs-string\x22\x3e\x27window-all-closed\x27\x3c\/span\x3e, () =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(process.platform !== \x3cspan class=\x22hljs-string\x22\x3e\x27darwin\x27\x3c\/span\x3e){\n        app.quit();     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 退出应用\x3c\/span\x3e\n    }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在开发中发现，没有监听该事件，打包后的应用关闭后，进程还保留着，会占用系统的内存。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e窗口\x3c\/h2\x3e\n\x3cp\x3e本来我们的 html 只显示在浏览器中，而 electron 提供了一个 BrowserWindow 模块用于创建和控制浏览器窗口，我们的页面就是显示在这样的窗口中。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e创建窗口\x3c\/h3\x3e\n\x3cp\x3e通过关键字 new 实例化返回 win 对象，该对象有丰富的方法对窗口进行控制。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22win = new BrowserWindow({\n    width: 390,         \/\/ 窗口宽度\n    height: 670,        \/\/ 窗口高度\n    fullscreen: false,  \/\/ 不允许全屏\n    resizable: false    \/\/ 不允许改变窗口size，不然布局就乱了啊\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3ewin = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BrowserWindow({\n    \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e390\x3c\/span\x3e,         \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 窗口宽度\x3c\/span\x3e\n    height: \x3cspan class=\x22hljs-number\x22\x3e670\x3c\/span\x3e,        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 窗口高度\x3c\/span\x3e\n    fullscreen: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e,  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不允许全屏\x3c\/span\x3e\n    resizable: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不允许改变窗口size，不然布局就乱了啊\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e加载页面\x3c\/h3\x3e\n\x3cp\x3e窗口创建完是一片空白的，可以通过 win.loadURL() 来加载要显示的页面。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const path = require(\x27path\x27);\nconst url = require(\x27url\x27);\n\nwin.loadURL(url.format({    \/\/ 加载本地的文件\n    pathname: path.join(__dirname, \x27index.html\x27),\n    protocol: \x27file\x27,\n    slashes: true\n}))\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e path = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27path\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e url = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27url\x27\x3c\/span\x3e);\n\nwin.loadURL(url.format({    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载本地的文件\x3c\/span\x3e\n    pathname: path.join(__dirname, \x3cspan class=\x22hljs-string\x22\x3e\x27index.html\x27\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-attr\x22\x3eprotocol\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27file\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3eslashes\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n}))\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也可以直接加载远程链接 win.loadURL(\x27\x3ca href=\x22http:\/\/blog.gdfengshuo.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.gdfengshuo.com\x3c\/a\x3e\x27);\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e菜单\x3c\/h2\x3e\n\x3cp\x3e桌面应用菜单栏是最常见的功能。Electron 提供了 Menu 模块来创建原生的应用菜单和 context 菜单，\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const template = [                              \/\/ 创建菜单模板\n    {\n        label: \x27查看\x27,\n        submenu: [\n            {label: \x27竖屏\x27, type: \x27radio\x27, checked: true},      \/\/ type 属性让菜单为 radio 可选\n            {label: \x27横屏\x27, type: \x27radio\x27, checked: false},\n            {label: \x27重载\x27,role:\x27reload\x27},\n            {label: \x27退出\x27,role:\x27quit\x27},\n        ]\n    }\n]\n\nconst menu = Menu.buildFromTemplate(template);  \/\/ 通过模板返回菜单的数组\nMenu.setApplicationMenu(menu);                  \/\/ 将该数组设置为菜单\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e template = [                              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建菜单模板\x3c\/span\x3e\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27查看\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3esubmenu\x3c\/span\x3e: [\n            {\x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27竖屏\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27radio\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3echecked\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e},      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ type 属性让菜单为 radio 可选\x3c\/span\x3e\n            {\x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27横屏\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27radio\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3echecked\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e},\n            {\x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27重载\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3erole\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27reload\x27\x3c\/span\x3e},\n            {\x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27退出\x27\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3erole\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27quit\x27\x3c\/span\x3e},\n        ]\n    }\n]\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e menu = Menu.buildFromTemplate(template);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 通过模板返回菜单的数组\x3c\/span\x3e\nMenu.setApplicationMenu(menu);                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将该数组设置为菜单\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在子菜单中，通过点击竖屏或横屏来进行一些操作，那就可以给 submenu 监听 click 事件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const template = [\n    {\n        label: \x27查看\x27,\n        submenu: [\n            {\n                label: \x27横屏\x27\n                click: () =\x3e {              \/\/ 监听横屏的点击事件\n                    win.setSize(670,460);   \/\/ 设置窗口的宽高\n                }\n            }\n        ]\n    }\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e template = [\n    {\n        \x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27查看\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3esubmenu\x3c\/span\x3e: [\n            {\n                \x3cspan class=\x22hljs-attr\x22\x3elabel\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27横屏\x27\x3c\/span\x3e\n                click: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 监听横屏的点击事件\x3c\/span\x3e\n                    win.setSize(\x3cspan class=\x22hljs-number\x22\x3e670\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e460\x3c\/span\x3e);   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置窗口的宽高\x3c\/span\x3e\n                }\n            }\n        ]\n    }\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e主进程和渲染进程通信\x3c\/h2\x3e\n\x3cp\x3e虽然点击横屏的时候，可以设置窗口的宽高，但是要如何去触发页面里的方法，这里就需要主进程跟渲染进程之间进行通信。\x3c\/p\x3e\n\x3cp\x3e主进程，可以理解为 main.js 用来写 electron api 的就是主进程，渲染进程就是渲染出来的页面。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3eipcMain\x3c\/h3\x3e\n\x3cp\x3e在主进程中可以使用 ipcMain 模块，它控制着由渲染进程(web page)发送过来的异步或同步消息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const {ipcMain} = require(\x27electron\x27)\nipcMain.on(\x27send-message\x27, (event, arg) =\x3e {\n    event.sender.send(\x27reply-message\x27, \x27hello world\x27)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {ipcMain} = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e)\nipcMain.on(\x3cspan class=\x22hljs-string\x22\x3e\x27send-message\x27\x3c\/span\x3e, (event, arg) =\x26gt; {\n    event.sender.send(\x3cspan class=\x22hljs-string\x22\x3e\x27reply-message\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27hello world\x27\x3c\/span\x3e)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eipcMain 监听 send-message 事件，当消息到达时可以调用 event.sender.send 来回复异步消息，向渲染进程发送 reply-message 事件，也可以带着参数发送过去。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3eipcRenderer\x3c\/h3\x3e\n\x3cp\x3e在渲染进程可以调用 ipcRenderer 模块向主进程发送同步或异步消息，也可以收到主进程的相应。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const {ipcRenderer} = require(\x27electron\x27)\nipcRenderer.on(\x27reply-message\x27, (event, arg) =\x3e {\n    console.log(arg);       \/\/ hello world\n})\n\nipcRenderer.send(\x27anything\x27, \x27hello everyone\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {ipcRenderer} = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e)\nipcRenderer.on(\x3cspan class=\x22hljs-string\x22\x3e\x27reply-message\x27\x3c\/span\x3e, (event, arg) =\x26gt; {\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(arg);       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ hello world\x3c\/span\x3e\n})\n\nipcRenderer.send(\x3cspan class=\x22hljs-string\x22\x3e\x27anything\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27hello everyone\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eipcRenderer 可以监听到来自主进程的 reply-message 事件并拿到参数进行操作，也可以使用 send() 方法向主进程发送消息。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3ewebContents\x3c\/h3\x3e\n\x3cp\x3ewebContents 是一个事件发出者，它负责渲染并控制网页，也是 BrowserWindow 对象的属性。在 ipcMain 中的 event.sender，返回发送消息的 webContents 对象，所以包含着 send() 方法用于发送消息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const win = BrowserWindow.fromId(1);        \/\/ fromId() 方法找到ID为1的窗口\nwin.webContents.on(\x27todo\x27, () =\x3e {\n    win.webContents.send(\x27done\x27, \x27well done!\x27)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e win = BrowserWindow.fromId(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ fromId() 方法找到ID为1的窗口\x3c\/span\x3e\nwin.webContents.on(\x3cspan class=\x22hljs-string\x22\x3e\x27todo\x27\x3c\/span\x3e, () =\x26gt; {\n    win.webContents.send(\x3cspan class=\x22hljs-string\x22\x3e\x27done\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27well done!\x27\x3c\/span\x3e)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3eremote\x3c\/h3\x3e\n\x3cp\x3eremote 模块提供了一种在渲染进程（网页）和主进程之间进行进程间通讯（IPC）的简便途径。在 Electron 中，有许多模块只存在主进程中，想要调用这些模块的方法需要通过 ipc 模块向主进程发送消息，让主进程调用这些方法。而使用 remote 模块，则可以在渲染进程中调用这些只存在于主进程对象的方法了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const {remote} = require(\x27electron\x27)\nconst BrowserWindow = remote.BrowserWindow      \/\/ 访问主进程中的BrowserWindow模块\n\nlet win = new BrowserWindow();                  \/\/ 其他的跟主进程的操作都一样\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {remote} = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e BrowserWindow = remote.BrowserWindow      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 访问主进程中的BrowserWindow模块\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e win = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e BrowserWindow();                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 其他的跟主进程的操作都一样\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eremote 模块除了可以访问主进程的内置模块，自身还有一些方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22remote.require(module)          \/\/ 返回在主进程中执行 require(module) 所返回的对象\nremote.getCurrentWindow()       \/\/ 返回该网页所属的 BrowserWindow 对象\nremote.getCurrentWebContents()  \/\/ 返回该网页的 WebContents 对象\nremote.getGlobal(name)          \/\/ 返回在主进程中名为 name 的全局变量(即 global[name])\nremote.process                  \/\/ 返回主进程中的 process 对象，等同于 remote.getGlobal(\x27process\x27) 但是有缓存\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eremote.require(\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e)          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回在主进程中执行 require(module) 所返回的对象\x3c\/span\x3e\nremote.getCurrentWindow()       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回该网页所属的 BrowserWindow 对象\x3c\/span\x3e\nremote.getCurrentWebContents()  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回该网页的 WebContents 对象\x3c\/span\x3e\nremote.getGlobal(name)          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回在主进程中名为 name 的全局变量(即 global[name])\x3c\/span\x3e\nremote.process                  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 返回主进程中的 process 对象，等同于 remote.getGlobal(\x27process\x27) 但是有缓存\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3eshell 模块\x3c\/h2\x3e\n\x3cp\x3e使用系统默认应用管理文件和 URL，而且在主进程和渲染进程中都可以用到该模块。在菜单中，我想点击子菜单打开一个网站，那么就可以用到 shell.openExternal() 方法，则会在默认浏览器中打开 URL\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const {shell} = require(\x27electron\x27);\nshell.openExternal(\x27https:\/\/github.com\/lin-xin\/calculator\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e {shell} = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27electron\x27\x3c\/span\x3e);\nshell.openExternal(\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/github.com\/lin-xin\/calculator\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e打包应用\x3c\/h2\x3e\n\x3cp\x3e其实将程序打包成桌面应用才是比较麻烦的事。我这里尝试了 electron-packager 和 electron-builder。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3eelectron-packager\x3c\/h3\x3e\n\x3cp\x3eelectron-packager 可以将项目打包成各平台可直接运行的程序，而不是安装包。\x3c\/p\x3e\n\x3cp\x3e先使用 npm 安装： npm install electron-packager -S\x3c\/p\x3e\n\x3cp\x3e运行打包命令：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22electron-packager .\/ 计算器 --platform=win32 --overwrite --icon=.\/icon.ico\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs brainfuck\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3eelectron\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3epackager\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e计算器\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eplatform=win32\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eoverwrite\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-literal\x22\x3e-\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eicon=\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/icon\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e.\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3eico\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e打包会把项目文件包括 node_modules 也一起打包进去，当然可以通过 --ignore=node_modules 来忽略文件，但是如果项目中有用到第三方库，忽略的话则找不到文件报错了。\x3c\/p\x3e\n\x3cp\x3e正确的做法就是严格区分 dependencies 和 devDependencies，打包的时候只会把 dependencies 的库打包，而使用 cnpm 安装的会有一大堆 .0.xx@xxx 的文件，也会被打包，所以最好不要用 cnpm\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3eelectron-builder\x3c\/h3\x3e\n\x3cp\x3eelectron-builder 是基于 electron-packager 打包出来的程序再做安装处理，将项目打包成安装文件。\x3c\/p\x3e\n\x3cp\x3e安装：npm install electron-builder -S\x3c\/p\x3e\n\x3cp\x3e打包：electron-builder --win\x3c\/p\x3e\n\x3cp\x3e打包过程中，第一次下载 electron 可能会出现连接超时，可以使用 yarn 试试。还有 winCodeSign 和 nsis-resources 也可能会失败，可以参考 \x3ca href=\x22https:\/\/github.com\/electron-userland\/electron-builder\/issues\/1859\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eelectron-builder\/issues\x3c\/a\x3e 解决。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3eElectron 用起来还是相对容易的，可以创建个简单的桌面应用，只是打包的过程比较容易遇到问题，网上好像也有一键打包的工具，没尝试过。以上也都是基于 windows 7 的实践，毕竟没有 Mac 搞不了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e更多文章：\x3ca href=\x22http:\/\/blog.gdfengshuo.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3elinxin\/blog\x3c\/a\x3e\n\x3c\/h3\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Electron 实战桌面计算器应用</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010994887">https://segmentfault.com/a/1190000010994887</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/sh9j5xeum38/" target="_blank">https://alili.tech/archive/sh9j5xeum38/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>