<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="随机生成指定面积单连通区域"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>随机生成指定面积单连通区域 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ssgl9ms28o/",
				"appid": "1613049289050283", 
				"title": "随机生成指定面积单连通区域 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-07T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/g283dt5ddfc/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/oxpbdur5ixq/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&text=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&text=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&title=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&is_video=false&description=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&title=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&title=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&title=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fssgl9ms28o%2f&title=%e9%9a%8f%e6%9c%ba%e7%94%9f%e6%88%90%e6%8c%87%e5%ae%9a%e9%9d%a2%e7%a7%af%e5%8d%95%e8%bf%9e%e9%80%9a%e5%8c%ba%e5%9f%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">随机生成指定面积单连通区域</h1><div class="meta"><div class="postdate"><time datetime="2018-12-07" itemprop="datePublished">2018-12-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e原文链接：\x3ca href=\x22https:\/\/xcoder.in\/2018\/04\/01\/random-connected-area\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/xcoder.in\/2018\/04\/01\/random-connected-area\/\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e最近在知乎上看到一个问题，「\x3ca href=\x22https:\/\/www.zhihu.com\/question\/269483551\/answer\/354477009\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e随机生成指定面积单连通区域？\x3c\/a\x3e」，感觉还挺有意思的，于是整理一下写一篇新文章。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e问题阐述\x3c\/h2\x3e\n\x3cp\x3e如下图所示，在 10x10 的区域中，随机生成面积为 6 的单连通区域，该「随机」包括「位置随机」以及「形状随机」。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167828?w=2888\x26amp;h=3124\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167828?w=2888\x26amp;h=3124\x22 alt=\x22示意图\x22 title=\x22示意图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e注意：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e单连通区域定义是该区域每一个区块上下左右至少连着另一个区块；\x3c\/li\x3e\n\x3cli\x3e采用周期性结构，超出右边移到最左边，以此类推。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e其中点 2 可以分采用和不采用周期性结构分别讨论。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e随便说说\x3c\/h2\x3e\n\x3cp\x3e这个问题，我不知道原题提问者想要做什么事。但是就这题本身而言，我们可以拿它去生成一个随机地图，例如：\x3c\/p\x3e\n\x3cblockquote\x3e建造、等待的沙盒类手游，游戏中有一个空岛，玩家能在上面建造自己的建筑然后等待各种事件完成。\x3cstrong\x3e空岛形状随机生成，并且都联通且面积一定，这样每个玩家进去的时候就能得到不同地形\x3c\/strong\x3e。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e解决一下\x3c\/h2\x3e\n\x3cp\x3e在得知了问题原题之后，我们就可以照着题目的意思开始解决了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eDFS\x3c\/h3\x3e\n\x3cp\x3e其实这么一个问题一出现，脑子里面就瞬间涌出几个词汇：\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Depth-first_search\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eDFS\x3c\/a\x3e、\x3ca href=\x22https:\/\/en.wikipedia.org\/wiki\/Flood_fill\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eFlood fill\x3c\/a\x3e、\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%B9%B6%E6%9F%A5%E9%9B%86\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e并查集\x3c\/a\x3e等等。\x3c\/p\x3e\n\x3cp\x3e那么其实这最粗暴的办法相当于你假想有一个连通区域，然后你去 Flood fill 它——至于墙在哪，在递归的每一个节点的时候\x3cstrong\x3e随机一下搜索方向的顺序就可以了\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch4\x3e实现外壳\x3c\/h4\x3e\n\x3cp\x3e我们先实现一个类的框架吧（我是 Node.js 开发者，自然用 JavaScript 进行 Demo 的输出）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const INIT = Symbol(\x26quot;init\x26quot;);\n\nclass Filler {\n    \/**\n     * Filler 构造函数\n     * @constructor\n     * @param {Number} length 地图总宽高\n     * @param {Number} needArea 需要填充的区域面积\n     *\/\n    constructor(length, needArea) {\n        this.length = length;\n        this.needArea = needArea;\n    }\n\n    \/**\n     * 初始化地图\n     *\/\n    [INIT]() {\n        \/**\n         * 为了方便，地图就用一个二维字符数组表示\n         *\n         *   \x2b . 代表空地\n         *   \x2b x 代表填充\n         *\/\n        this.map = [];\n        this.count = 0;\n        for(let i = 0; i \x3c this.length; i\x2b\x2b) {\n            let row = [];\n            for (let j = 0; j \x3c this.length; j\x2b\x2b) row.push(\x26quot;.\x26quot;);\n            this.map.push(row);\n        }\n     }\n\n     \/**\n      * 填充递归函数\n      * @param {Number} x 坐标 X 轴的值\n      * @param {Number} y 坐标 Y 轴的值\n      * @return 填充好的地图二维数组\n      *\/\n     fill(x, y) {\n        \/\/ 待实现\n     }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e INIT = \x3cspan class=\x22hljs-built_in\x22\x3eSymbol\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22init\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFiller\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * Filler 构造函数\n     * @constructor\n     * @param {Number} length 地图总宽高\n     * @param {Number} needArea 需要填充的区域面积\n     *\/\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(length, needArea) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length = length;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.needArea = needArea;\n    }\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/**\n     * 初始化地图\n     *\/\x3c\/span\x3e\n    [INIT]() {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/**\n         * 为了方便，地图就用一个二维字符数组表示\n         *\n         *   \x2b . 代表空地\n         *   \x2b x 代表填充\n         *\/\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map = [];\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.count = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length; i\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e row = [];\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length; j\x2b\x2b) row.push(\x3cspan class=\x22hljs-string\x22\x3e\x22.\x22\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map.push(row);\n        }\n     }\n\n     \x3cspan class=\x22hljs-comment\x22\x3e\/**\n      * 填充递归函数\n      * @param {Number} x 坐标 X 轴的值\n      * @param {Number} y 坐标 Y 轴的值\n      * @return 填充好的地图二维数组\n      *\/\x3c\/span\x3e\n     fill(x, y) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 待实现\x3c\/span\x3e\n     }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e非周期性实现\x3c\/h4\x3e\n\x3cp\x3e有了架子之后，我们就可以实现递归函数 \x3ccode\x3efill\x3c\/code\x3e 了，整理一下流程如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e随机一个起点位置，并以此开始递归搜索；\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3ccode\x3efill(x, y)\x3c\/code\x3e 进入递归搜索：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e如果需要初始化地图就调用 \x3ccode\x3ethis[INIT]()\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3ethis.count\x2b\x2b\x3c\/code\x3e，表示填充区域面积加了 \x3ccode\x3e1\x3c\/code\x3e，并在数组中将该位置填充为 \x3ccode\x3ex\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3ccode\x3ethis.count\x3c\/code\x3e 是否等于所需要的面积：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e若等于，则返回当前的地图状态；\x3c\/li\x3e\n\x3cli\x3e若不等于，则继续 2.4；\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3cli\x3e随机四个方向的顺序；\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e对四个方向进行循环：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3ex\x3c\/code\x3e、\x3ccode\x3ey\x3c\/code\x3e 轴的值按当前方向走一个算出新的坐标值 \x3ccode\x3enewX\x3c\/code\x3e 和 \x3ccode\x3enewY\x3c\/code\x3e；\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e判断坐标是否合法（越界算非法）：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e若非法则回 2.5 继续下一个方向；\x3c\/li\x3e\n\x3cli\x3e若合法则继续 2.5.3；\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3cli\x3e递归 \x3ccode\x3efill(newX, newY)\x3c\/code\x3e 得到结果，若有结果则返回；\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3cli\x3e若循环完四个方向都还没返回结果则会跳到这一步来，这个时候进行状态还原，递归跳回上一层进行下一个状态的搜索。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e在这里「状态还原」表示把 \x3ccode\x3ethis.count--\x3c\/code\x3e 还原回当前坐标填充前的状态，并且把当前填充的 \x3ccode\x3e\x27x\x27\x3c\/code\x3e 给还原回 \x3ccode\x3e\x27.\x27\x3c\/code\x3e。\x3c\/blockquote\x3e\n\x3cp\x3e照着上面的流程很快就能得出代码结论：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const _ = require(\x26quot;lodash\x26quot;);\n\nclass Filler {\n    ...\n\n    fill(x, y) {\n        \/\/ 初始化地图\n        const needInit = !arguments[2];\n        if(needInit) this[INIT]();\n\n        \/\/ 如果当前坐标已被填充，则返回空\n        if(this.map[x][y] === \x26quot;x\x26quot;) return;\n\n        \/\/ 填充当前坐标\n        this.count\x2b\x2b;\n        this.map[x][y] = \x26quot;x\x26quot;;\n\n        \/\/ 填充满了则返回当前地图\n        if(this.count === this.needArea) return Object.assign([], this.map);\n\n        \/\/ 随机四个方向的顺序\n        const dirs = _.shuffle([ [ 0, 1 ], [ 0, -1 ], [ 1, 0 ], [ -1, 0 ] ]);\n\n        \/\/ 循环四个方向\n        for(let i = 0; i \x3c 4; i\x2b\x2b) {\n            const dir = dirs[i];\n            let newX = x \x2b dir[0];\n            let newY = y \x2b dir[1];\n\n            \/\/ 判断边界\n            {\n                if(newX \x3c 0 || newX \x3e= this.length || newY \x3c 0 || newY \x3e= this.length) continue;\n            }\n\n            \/\/ 进入下一层递归并得到结果\n            const ret = this.fill(newX, newY, true);\n\n            \/\/ 若结果非空则返回结果\n            if(ret) return ret;\n        }\n\n        \/\/ 状态还原\n        this.count--;\n        this.map[x][y] = \x26quot;.\x26quot;;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFiller\x3c\/span\x3e \x3c\/span\x3e{\n    ...\n\n    fill(x, y) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 初始化地图\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e needInit = !\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e[\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e];\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(needInit) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[INIT]();\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果当前坐标已被填充，则返回空\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x][y] === \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 填充当前坐标\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.count\x2b\x2b;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x][y] = \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 填充满了则返回当前地图\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.count === \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.needArea) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.assign([], \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map);\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 随机四个方向的顺序\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dirs = _.shuffle([ [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ], [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e ], [ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], [ \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ]);\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 循环四个方向\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e; i\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dir = dirs[i];\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e newX = x \x2b dir[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e];\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e newY = y \x2b dir[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e];\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断边界\x3c\/span\x3e\n            {\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newX \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || newX \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length || newY \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || newY \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n            }\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 进入下一层递归并得到结果\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ret = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.fill(newX, newY, \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 若结果非空则返回结果\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(ret) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret;\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 状态还原\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.count--;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x][y] = \x3cspan class=\x22hljs-string\x22\x3e\x22.\x22\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这么一来，类就写好了。接下去我们只要实现一些交互的代码，就可以看效果了。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/x2ur8kvj\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点我\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/x2ur8kvj\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e进入 JSFiddle 看效果。\x3c\/blockquote\x3e\n\x3cp\x3e如果懒得进入 JSFiddle 看，也可以看看下面的几个截图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167829?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167829?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e10x10 填 50 效果图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167830?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167830?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e10x10 填 6 效果图\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167831?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167831?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e50x50 填 50 效果图\x3c\/p\x3e\n\x3ch4\x3e周期性实现\x3c\/h4\x3e\n\x3cp\x3e其实原题说了一个条件，那就是\x3cstrong\x3e采用周期性结构，超出右边移到最左边，以此类推\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e而我们前文的代码其实是照着非周期性结构来实现的。不过如果我们要将其改成周期性实现也很简单，只需要把前文代码中边界判断的那一句代码改为周期性计算的代码即可，也就是说要把这段代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 判断边界\n{\n    if(newX \x3c 0 || newX \x3e= this.length || newY \x3c 0 || newY \x3e= this.length) continue;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断边界\x3c\/span\x3e\n{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newX \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || newX \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length || newY \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || newY \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e改为：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 周期性计算\n{\n    if(newX \x3c 0) newX = this.length - 1;\n    if(newX \x3e= this.length) newX = 0;\n    if(newY \x3c 0) newY = this.length - 1;\n    if(newY \x3e= this.length) newY = 0;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 周期性计算\x3c\/span\x3e\n{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newX \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) newX = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newX \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) newX = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newY \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) newY = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(newY \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) newY = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个时候出来的效果就是这样的了：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167832?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167832?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e10x10 填 50 周期性效果图\x3c\/p\x3e\n\x3ch4\x3e抛弃状态还原\x3c\/h4\x3e\n\x3cp\x3e至此为止 DFS 的代码基本上完成了。不过目前来说，当然这个算法的一个缺陷就是，当需要面积与总面积比例比较大的时候，有可能陷入搜索的死循环（或者说效率特别低），因为要不断复盘。\x3c\/p\x3e\n\x3cp\x3e所以我们可以做点改造——由于我们不是真的为了搜索到某个状态，而只是为了填充我们的小点点，那么 DFS 中比较经典的「状态还原」就不需要了，也就是说：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.count--;\nthis.mat[x][y] = \x26quot;.\x26quot;;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.count--;\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.mat[x][y] = \x3cspan class=\x22hljs-string\x22\x3e\x22.\x22\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这两行代码可以删掉了，用删掉上面两行代码的代码跑一下，我用 50x50 填充 800 格子的效果：\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167833?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167833?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167834?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167834?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167835?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167835?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167836?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167836?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e继续之前的 50x50 填充 50：\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167837?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167837?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167838?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167838?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167839?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167839?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167840?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167840?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e生成「胖胖的」区域\x3c\/h3\x3e\n\x3cp\x3e上面 DFS 的方法，由于每次都要走完一条路，虽然会转弯导致黏连，但在填充区域很小的情况下，很容易生成“瘦瘦的区域”。\x3c\/p\x3e\n\x3cp\x3e这里再给出另一个方法，一个 \x3ccode\x3efor\x3c\/code\x3e 搞定的，思路如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e先随机一个起始点，并将该点加入边界池；\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e循环 N - 1 次（N 为所需要填充的面积）：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e从边界池中随机取出一个边界；\x3c\/li\x3e\n\x3cli\x3e算出与其接壤的四个点，取出还未被填充的点；\x3c\/li\x3e\n\x3cli\x3e在取出的点中随机一个将其填充；\x3c\/li\x3e\n\x3cli\x3e填充后计算改点接壤的四个点是否有全都是已经填充了的，若不是，则将该坐标加入边界池；\x3c\/li\x3e\n\x3cli\x3e拿着刚才计算的接壤的四个点，分别判断其是否周边四个点都已被填充，若是且该点在边界池中，则从边界池拿走；\x3c\/li\x3e\n\x3cli\x3e回到第二大步继续循环；\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3cli\x3e返回填充好的结果。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e给出代码 Demo：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function random(max) {\n    return Math.round(Math.random() * max);\n}\n\nclass Filler2 {\n    constructor(length, needArea) {\n        this.length = length;\n        this.needArea = needArea;\n    }\n\n    _getContiguous(frontier) {\n        return Filler2.DIRS.map(dir =\x3e ({\n            x: frontier.x \x2b dir[0],\n            y: frontier.y \x2b dir[1]\n        }));\n    }\n\n    fill() {\n        const mat = [];\n        for (let i = 0; i \x3c this.length; i\x2b\x2b) {\n            let row = [];\n            for (let j = 0; j \x3c this.length; j\x2b\x2b) row.push(\x26quot;.\x26quot;);\n            mat.push(row);\n        }\n\n        const start = {\n            x: random(this.length - 1),\n            y: random(this.length - 1)\n        };\n        mat[start.x][start.y] = \x26quot;x\x26quot;;\n\n        let frontierCount = 1;\n        const frontiers = {\n            [`${start.x}:${start.y}`]: true\n        };\n\n        for (let i = 1; i \x3c this.needArea; i\x2b\x2b) {\n            \/\/ 取出一个边界\n            const randIdx = random(frontierCount - 1);\n            const frontier = Object.keys(frontiers)[randIdx].split(\x26quot;:\x26quot;).map(n =\x3e parseInt(n));\n\n            \/\/ _getContiguous 算出接壤坐标，filter 去除无用坐标\n            const newCoors = this._getContiguous({\n                x: frontier[0],\n                y: frontier[1]\n            }).filter(coor =\x3e {\n                if (coor.x \x3c 0 || coor.y \x3c 0 || coor.x \x3e= this.length || coor.y \x3e= this.length) return false;\n                if (mat[coor.x][coor.y] === \x26quot;x\x26quot;) return false;\n                return true;\n            });\n\n            \/\/ 随机取一个坐标\n            const newCoor = newCoors[random(0, newCoors.length - 1)];\n\n            \/\/ 填充进去\n            mat[newCoor.x][newCoor.y] = \x26quot;x\x26quot;;\n\n            \/\/ 获取接壤坐标\n            const contiguousOfNewCoor = this._getContiguous(newCoor).filter(coor =\x3e {\n                if (coor.x \x3c 0 || coor.y \x3c 0 || coor.x \x3e= this.length || coor.y \x3e= this.length) return false;\n                return true;\n            });\n\n            \/\/ 若有一个接壤点为空，就认为当前坐标是边界，若是边界则把当前坐标加入对象\n            if (contiguousOfNewCoor.reduce((ret, coor) =\x3e {\n                    if (mat[coor.x][coor.y] === \x26quot;x\x26quot;) return ret;\n                    return true;\n                }, false)) {\n                frontiers[`${newCoor.x}:${newCoor.y}`] = true;\n                frontierCount\x2b\x2b;\n            }\n\n            \/\/ 再检查接壤的坐标是否继续为边界\n            for (let i = 0; i \x3c contiguousOfNewCoor.length; i\x2b\x2b) {\n                const cur = contiguousOfNewCoor[i];\n\n                const isFrontier = this._getContiguous(cur).filter(coor =\x3e {\n                    if (coor.x \x3c 0 || coor.y \x3c 0 || coor.x \x3e= this.length || coor.y \x3e= this.length) return false;\n                    return true;\n                }).reduce((ret, coor) =\x3e {\n                    if (mat[coor.x][coor.y] === \x26quot;x\x26quot;) return ret;\n                    return true;\n                }, false);\n\n                \/\/ 若不是边界的话，只管删除\n                if (!isFrontier \x26amp;\x26amp; frontiers[`${cur.x}:${cur.y}`]) {\n                    delete frontiers[`${cur.x}:${cur.y}`];\n                    frontierCount--;\n                }\n            }\n        }\n\n        \/\/ 一圈下来，就出结果了\n        return mat;\n    }\n}\n\nFiller2.DIRS = [ [ 0, 1 ], [ 0, -1 ], [ 1, 0 ], [ -1, 0 ] ];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3erandom\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3emax\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.round(\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.random() * max);\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFiller2\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(length, needArea) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length = length;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.needArea = needArea;\n    }\n\n    _getContiguous(frontier) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e Filler2.DIRS.map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e =\x26gt;\x3c\/span\x3e ({\n            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: frontier.x \x2b dir[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e],\n            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: frontier.y \x2b dir[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n        }));\n    }\n\n    fill() {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mat = [];\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length; i\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e row = [];\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; j \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length; j\x2b\x2b) row.push(\x3cspan class=\x22hljs-string\x22\x3e\x22.\x22\x3c\/span\x3e);\n            mat.push(row);\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e start = {\n            \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: random(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n            \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: random(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n        };\n        mat[start.x][start.y] = \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e frontierCount = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e frontiers = {\n            [\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${start.x}\x3c\/span\x3e:\x3cspan class=\x22hljs-subst\x22\x3e${start.y}\x3c\/span\x3e`\x3c\/span\x3e]: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n        };\n\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.needArea; i\x2b\x2b) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 取出一个边界\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e randIdx = random(frontierCount - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e frontier = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.keys(frontiers)[randIdx].split(\x3cspan class=\x22hljs-string\x22\x3e\x22:\x22\x3c\/span\x3e).map(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3en\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(n));\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ _getContiguous 算出接壤坐标，filter 去除无用坐标\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e newCoors = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._getContiguous({\n                \x3cspan class=\x22hljs-attr\x22\x3ex\x3c\/span\x3e: frontier[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e],\n                \x3cspan class=\x22hljs-attr\x22\x3ey\x3c\/span\x3e: frontier[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n            }).filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecoor\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (coor.x \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || coor.y \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || coor.x \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length || coor.y \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mat[coor.x][coor.y] === \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            });\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 随机取一个坐标\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e newCoor = newCoors[random(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, newCoors.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)];\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 填充进去\x3c\/span\x3e\n            mat[newCoor.x][newCoor.y] = \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e;\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取接壤坐标\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e contiguousOfNewCoor = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._getContiguous(newCoor).filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecoor\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (coor.x \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || coor.y \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || coor.x \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length || coor.y \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            });\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 若有一个接壤点为空，就认为当前坐标是边界，若是边界则把当前坐标加入对象\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (contiguousOfNewCoor.reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eret, coor\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mat[coor.x][coor.y] === \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret;\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e)) {\n                frontiers[\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${newCoor.x}\x3c\/span\x3e:\x3cspan class=\x22hljs-subst\x22\x3e${newCoor.y}\x3c\/span\x3e`\x3c\/span\x3e] = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                frontierCount\x2b\x2b;\n            }\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 再检查接壤的坐标是否继续为边界\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; contiguousOfNewCoor.length; i\x2b\x2b) {\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cur = contiguousOfNewCoor[i];\n\n                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e isFrontier = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e._getContiguous(cur).filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ecoor\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (coor.x \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || coor.y \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || coor.x \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length || coor.y \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                }).reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eret, coor\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mat[coor.x][coor.y] === \x3cspan class=\x22hljs-string\x22\x3e\x22x\x22\x3c\/span\x3e) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret;\n                    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n                }, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 若不是边界的话，只管删除\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!isFrontier \x26amp;\x26amp; frontiers[\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${cur.x}\x3c\/span\x3e:\x3cspan class=\x22hljs-subst\x22\x3e${cur.y}\x3c\/span\x3e`\x3c\/span\x3e]) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3edelete\x3c\/span\x3e frontiers[\x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${cur.x}\x3c\/span\x3e:\x3cspan class=\x22hljs-subst\x22\x3e${cur.y}\x3c\/span\x3e`\x3c\/span\x3e];\n                    frontierCount--;\n                }\n            }\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 一圈下来，就出结果了\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e mat;\n    }\n}\n\nFiller2.DIRS = [ [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e ], [ \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e ], [ \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ], [ \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ] ];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3e注意\x3c\/strong\x3e：上面的代码是我一溜烟写出来的，所以并没有后续优化代码简洁度，其实很多地方的代码可以抽象并复用的，懒得改了，能看就好了。用的时候就跟之前 DFS 代码一样 \x3ccode\x3enew\x3c\/code\x3e 一个 \x3ccode\x3eFiller2\x3c\/code\x3e 出来并 \x3ccode\x3efill\x3c\/code\x3e 就好了。\x3cp\x3e效果依然可以去 \x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/36f6obca\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/36f6obca\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e 看。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e或者也可以直接看效果图：\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167841?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167841?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167842?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167842?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167843?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167843?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167844?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167844?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e50x50 填充 800 胖胖的区域\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167845?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167845?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167846?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167846?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167847?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167847?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167848?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167848?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e50x50 填充 50 胖胖的区域\x3c\/p\x3e\n\x3cp\x3e显而易见，跟之前 DFS 生成出来的奇形怪状相比，这种算法生成的连通区域更像是一块 Mainland，而前者则更像是一个洼地沼泽或者丛林。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e结合一下？\x3c\/h3\x3e\n\x3cp\x3e前面两种算法，一个是生成瘦瘦的稀奇古怪的面积，一个是生成胖胖的区域。有没有办法说在生成胖胖的区域的情况下允许一定的稀奇古怪的形状呢？\x3c\/p\x3e\n\x3cp\x3e其实将两种算法结合一下就好了。结合的做法有很多，这里举一个例子，大家可以自己再去想一些出来。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e首先将需要的区域对半分（即配比 1 : 1），例如如果需要 800，就分为 400 跟 400。（为了长得好看，其实这个比例可以自行调配）\x3c\/li\x3e\n\x3cli\x3e将前一半的区域用 \x3ccode\x3efor\x3c\/code\x3e 生成胖胖的区域；\x3c\/li\x3e\n\x3cli\x3e将剩下的区域随机几次，每次随机一个剩下所需要的面积以内的数，将这个数字作为 DFS 所需要生成的面积量，并从边界数组中随机取一个边界坐标并计算其合法接壤坐标开始进行 DFS 得到结果；\x3c\/li\x3e\n\x3cli\x3e循环第 3 步知道所需区域面积符合要求为止。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3e注意\x3c\/strong\x3e：为了保证每次 DFS 一开始的时候都能取到最新的边界坐标，在 DFS 流程中的时候每标一个区域填充也必须走一遍边界坐标更新的逻辑。\x3c\/blockquote\x3e\n\x3cp\x3e具体代码就不放文章里面解析了，大家也可以到 \x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/0bnzpw8d\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/0bnzpw8d\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e 中去观看。\x3c\/p\x3e\n\x3cp\x3e或者也可以直接看效果图：\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167849?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167849?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167850?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167850?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167851?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167851?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167852?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167852?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e50x50 填充 800 混合区域（配比 3 : 1）\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167853?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167853?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167854?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167854?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167855?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167855?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167856?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167856?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e50x50 填充 50 胖胖的区域（配比 4 : 1）\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e还能更丧心病狂吗？\x3c\/h3\x3e\n\x3cp\x3e结合了两种算法，我们得到了一个我认为可能会更好看一点的区域。\x3c\/p\x3e\n\x3cp\x3e此外，我们还能继续「丧心病狂」一点，例如两种方式交替出现，流程如下：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e指定特定方法和面积，奇数次用 \x3ccode\x3efor\x3c\/code\x3e，偶数次用 DFS；\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e如果是 \x3ccode\x3efor\x3c\/code\x3e 则随机一个 \x3ccode\x3eMath.min(剩余面积, 总面积 \/ 4)\x3c\/code\x3e 的数字；\x3c\/li\x3e\n\x3cli\x3e如果是 DFS 则随机一个 \x3ccode\x3eMath.min(剩余面积, 总面积 \/ 10)\x3c\/code\x3e 的数字；\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/li\x3e\n\x3cli\x3e从边界数组中取一个坐标，并从合法接壤坐标中取一个坐标出来；\x3c\/li\x3e\n\x3cli\x3e以第 2 步取出的坐标为起点，使用第 1 步指定的方法生成第 1 步指定的面积的单连通区域；\x3c\/li\x3e\n\x3cli\x3e如果生成面积仍小于指定面积，则回到第 1 步继续循环，否则返回当前结果。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e依旧是给出 \x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/5rx7vdzL\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle 的预览\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/5rx7vdzL\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e。\x3c\/p\x3e\n\x3cp\x3e或者也可以直接看效果图：\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167857?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167857?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167858?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167858?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167859?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167859?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167860?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167860?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e50x50 填充 800 丧病区域\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167861?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167861?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167862?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167862?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167863?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167863?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167864?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167864?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e50x50 填充 800 丧病区域\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3e注意\x3c\/strong\x3e：这里只给出思路，具体配比和详细流程大家可以继续优化。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e几张效果对比图\x3c\/h2\x3e\n\x3cp\x3e最后，这里给出几张 10x10 填 50 的效果图放一起对比一下。\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167865?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167865?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167866?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167866?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167867?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167867?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167868?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167868?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167869?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167869?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167870?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167870?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167871?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167871?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\x3ctr\x3e\n\x3ctd\x3eDFS\x3c\/td\x3e\n\x3ctd\x3e周期性 DFS\x3c\/td\x3e\n\x3ctd\x3e非还原 DFS\x3c\/td\x3e\n\x3ctd\x3e非还原周期性 DFS\x3c\/td\x3e\n\x3ctd\x3e胖胖的\x3c\/td\x3e\n\x3ctd\x3e结合\x3c\/td\x3e\n\x3ctd\x3e更丧病\x3c\/td\x3e\n\x3c\/tr\x3e\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e以及，几张 50x50 填充 800 面积的效果图对比。\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167872?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167872?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167872?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167872?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167873?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167873?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167874?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167874?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167875?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167875?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167876?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167876?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014167877?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014167877?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\x3ctr\x3e\n\x3ctd\x3eDFS\x3c\/td\x3e\n\x3ctd\x3e周期性 DFS\x3c\/td\x3e\n\x3ctd\x3e非还原 DFS\x3c\/td\x3e\n\x3ctd\x3e非还原周期性 DFS\x3c\/td\x3e\n\x3ctd\x3e胖胖的\x3c\/td\x3e\n\x3ctd\x3e结合\x3c\/td\x3e\n\x3ctd\x3e更丧病\x3c\/td\x3e\n\x3c\/tr\x3e\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e我错了之『真·单连通区域』\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e之所以多出一节来，是因为我在写回答以及这篇文章的时候脑抽了一下，迷迷糊糊想成了连通区域，感谢评论区童鞋的提醒。实际上单连通区域要稍微复杂一些。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e在拓扑学中，单连通是拓扑空间的一种性质。直观地说，单连通空间中所有闭曲线都能连续地搜索至一点。此性质可以由空间的基本群刻画。\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308443?w=440\x26amp;h=330\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308443?w=440\x26amp;h=330\x22 alt=\x22连通区域\x22 title=\x22连通区域\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x26lt;center\x26gt;这个空间不是单连通的，它有三个洞\x26lt;\/center\x26gt;\x3c\/p\x3e\n\x3cp\x3e——\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E5%96%AE%E9%80%A3%E9%80%9A\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e单连通@Wikipedia\x3c\/a\x3e\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e对于非周期性的区域来说\x3c\/strong\x3e，生成一个单连通区域只要在上面的方法里面加点料就可以了。即在一个位置填充的时候，判断一下将它填充进去之后是否会出现所谓的「洞」。而这一点在非周期性区域中，由于在填充当前坐标前，已存在的区域已经是一个单连通区域，所以枚举一下几种情况即可排除非单连通区域的情况：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e新加的坐标其上下都有填充，但其左右为空；或者左右都有填充，但其上下为空；\x3c\/li\x3e\n\x3cli\x3e新加的坐标只有一面相邻有填充，但该面对面的边所对应的两个角对过去至少有一个角与其它坐标共享顶点；\x3c\/li\x3e\n\x3cli\x3e新加的坐标同一个顶点的两条边有接壤，且其对角顶点对过去的坐标与其共享顶点。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cblockquote\x3e而对于周期性的区域来说，暂时我还没想到很好的办法。\x3c\/blockquote\x3e\n\x3cp\x3e对于情况一而言，如果处于对面的两接壤坐标都有填充，且再多一个接壤面的话，原小区域内只有可能是「\x3cstrong\x3e匚\x3c\/strong\x3e」型，那么填充进去只会形成一个 2x3 的实心区域，而如果只有处于对面的两个接壤坐标有填充的话，说明原小区域有两个面对面隔空的区域，它们形成单连通区域的大前提就是从其它地方绕出去将它们连起来，若这个时候将它们闭合的话，势必会形成一个空洞，如下图所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308444?w=228\x26amp;h=208\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308444?w=228\x26amp;h=208\x22 alt=\x22情况一\x22 title=\x22情况一\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对于情况二而言，如果只有一面有填充，但是对面的顶点有共享的话，可以类比为情况一，举例如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308445?w=212\x26amp;h=257\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308445?w=212\x26amp;h=257\x22 alt=\x22情况二\x22 title=\x22情况二\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e对于情况三而言，其实就是情况二加一条边有填充，如果在情况二的情况下，在上图“原”的区域下方的空若已有填充，那么在“新”的位置填充进去，就形不成空洞了。毕竟如果“空”的位置已有填充的话，若先前状态生成没有洞的连通区域，则“空”下方也必定不是一个空洞的区域。\x3c\/p\x3e\n\x3cp\x3e在解析完三种情况后，算法就明朗起来——在上面的 DFS 算法每次执行填充操作的时候，都判断一下当前填充是否符合刚才列举的三种情况，若符合，则不填充该点。\x3c\/p\x3e\n\x3cp\x3e所以只需对 DFS 的那个代码做一下修改就好了，首先把状态还原两行代码删掉，然后在之前\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (newX \x3c 0 || newX \x3e= this.length || newY \x3c 0 || newY \x3e= this.length) continue;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (newX \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || newX \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length || newY \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || newY \x26gt;= \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length) \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这句代码之下加一个条件判断就好了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if(this.willBreak(newX, newY)) {\n    continue;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.willBreak(newX, newY)) {\n    \x3cspan class=\x22hljs-keyword\x22\x3econtinue\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e剩下的就是去实现 \x3ccode\x3ethis.willBreak()\x3c\/code\x3e 函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class Filler {\n    ...\n    \n    willBreak(x, y) {\n        \/\/ 九宫格除自己以外的其它格状态\n        let u = false, d = false, l = false, r = false;\n        let lu = false, ld = false, ru = false, rd = false;\n        if(x - 1 \x3e= 0 \x26amp;\x26amp; this.map[x - 1][y] === \x27x\x27) u = true;\n        if(x \x2b 1 \x3c this.length \x26amp;\x26amp; this.map[x \x2b 1][y] === \x27x\x27) d = true;\n        if(y - 1 \x3e= 0 \x26amp;\x26amp; this.map[x][y - 1] === \x27x\x27) l = true;\n        if(y \x2b 1 \x3c this.length \x26amp;\x26amp; this.map[x][y \x2b 1] === \x27x\x27) r = true;\n        if(x - 1 \x3e= 0 \x26amp;\x26amp; y - 1 \x3e= 0 \x26amp;\x26amp; this.map[x - 1][y - 1] === \x27x\x27) lu = true;\n        if(x - 1 \x3e= 0 \x26amp;\x26amp; y \x2b 1 \x3c this.length \x26amp;\x26amp; this.map[x - 1][y \x2b 1] === \x27x\x27) ru = true;\n        if(x \x2b 1 \x3c this.length \x26amp;\x26amp; y - 1 \x3e= 0 \x26amp;\x26amp; this.map[x \x2b 1][y - 1] === \x27x\x27) ld = true;\n        if(x \x2b 1 \x3c this.length \x26amp;\x26amp; y \x2b 1 \x3c this.length \x26amp;\x26amp; this.map[x \x2b 1][y \x2b 1] === \x27x\x27) rd = true;\n        \n        \/\/ 情况 1\n        if((l \x26amp; r) ^ (u \x26amp; d)) return true;\n        \n        \/\/ 情况 2\n        if(l \x2b r \x2b u \x2b d === 1) {\n            if(l \x26amp;\x26amp; (ru || rd)) return true;\n            if(r \x26amp;\x26amp; (lu || ld)) return true;\n            if(u \x26amp;\x26amp; (ld || rd)) return true;\n            if(d \x26amp;\x26amp; (lu || ru)) return true;\n        }\n        \n        \/\/ 情况 3\n        if(l \x2b r \x2b u \x2b d === 2) {\n            \/\/ 情况 1 已经被 return 了，所以相加为 2 的肯定是共享顶点\n            if(l \x26amp;\x26amp; u \x26amp;\x26amp; rd) return true;\n            if(l \x26amp;\x26amp; d \x26amp;\x26amp; ru) return true;\n            if(r \x26amp;\x26amp; u \x26amp;\x26amp; ld) return true;\n            if(r \x26amp;\x26amp; d \x26amp;\x26amp; lu) return true;\n        }\n        \n        return false;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eFiller\x3c\/span\x3e \x3c\/span\x3e{\n    ...\n    \n    willBreak(x, y) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 九宫格除自己以外的其它格状态\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e u = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, d = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, l = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, r = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e lu = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, ld = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, ru = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, rd = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e][y] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) u = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(x \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e][y] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) d = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(y - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x][y - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) l = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(y \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x][y \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) r = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; y - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e][y - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) lu = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; y \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e][y \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) ru = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(x \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length \x26amp;\x26amp; y - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e][y - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) ld = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(x \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length \x26amp;\x26amp; y \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.map[x \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e][y \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e] === \x3cspan class=\x22hljs-string\x22\x3e\x27x\x27\x3c\/span\x3e) rd = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 情况 1\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e((l \x26amp; r) ^ (u \x26amp; d)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 情况 2\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(l \x2b r \x2b u \x2b d === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(l \x26amp;\x26amp; (ru || rd)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(r \x26amp;\x26amp; (lu || ld)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(u \x26amp;\x26amp; (ld || rd)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(d \x26amp;\x26amp; (lu || ru)) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        }\n        \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 情况 3\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(l \x2b r \x2b u \x2b d === \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 情况 1 已经被 return 了，所以相加为 2 的肯定是共享顶点\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(l \x26amp;\x26amp; u \x26amp;\x26amp; rd) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(l \x26amp;\x26amp; d \x26amp;\x26amp; ru) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(r \x26amp;\x26amp; u \x26amp;\x26amp; ld) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(r \x26amp;\x26amp; d \x26amp;\x26amp; lu) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        }\n        \n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e进 \x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/yxjmdvh7\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/yxjmdvh7\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e 看完整代码。\x3c\/blockquote\x3e\n\x3cp\x3e然后是 50x50 填充 800 的效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308446?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308446?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e以及 10x10 填充 50：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308447?w=160\x26amp;h=160\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308447?w=160\x26amp;h=160\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3e注意：\x3c\/strong\x3e左下角的洞看起来是洞，实际上是处于边界了，而填充区域无法与边界合成闭合区域，实际上将地图往外想想空一格就可以知道它并不是一个洞了。当然如果读者执意不允许这种情况发生，那么只需要在 \x3ccode\x3ewillBreak()\x3c\/code\x3e 函数判断的时候做点手脚就可以了，至于怎么做手脚大家自己想吧。\x3c\/blockquote\x3e\n\x3cp\x3e这种情况生成的地图比较像迷宫，哪怕是针对「胖胖的区域」做这个改进，\x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/qswaevtL\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/qswaevtL\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e 出来的也是下面的效果：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308448?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308448?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e所以呢，继续优化——我们知道有三种情况是会生成非单连通区域的，所以当我们探测到这种情况的时候，去 BFS 它内外区域，看看究竟是哪个区域被封闭出一个空洞来，探测出来之后再看看我们目前还需要填充的区域面积跟这个空洞的面积是否够用，若够用则将空洞补起来，不够用则当前一步重新来过——即再随机一个坐标看看行不行。\x3c\/p\x3e\n\x3cp\x3e思想说出来了，具体的实现还是看看我写在 \x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/2mkce52a\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/2mkce52a\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e 里面的代码吧。\x3c\/p\x3e\n\x3cp\x3e50x50 填充 800 的效果如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308449?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308449?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这么一来，我们很容易能跟 DFS 的算法结合起来，即之前说过的更丧病的算法。结合方法很简单，分别把改进过的 DFS 和胖胖区域的算法一起融合进之前丧病算法的代码中就好了。老样子我还是把代码更新到了 \x3ca href=\x22https:\/\/jsfiddle.net\/XadillaX\/5rx7vdzL\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSFiddle\x3c\/a\x3e\x3cbutton class=\x22btn btn-xs btn-default ml10 preview\x22 data-url=\x22XadillaX\/5rx7vdzL\/\x22 data-typeid=\x220\x22\x3e点击预览\x3c\/button\x3e 里面。大家看看 50x50 填充 800 的效果吧：\x3c\/p\x3e\n\x3ctable\x3e\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22center\x22\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308450?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308450?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308451?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308451?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308452?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308452?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3cth align=\x22center\x22\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014308453?w=800\x26amp;h=800\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014308453?w=800\x26amp;h=800\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\x3c\/table\x3e\n\x3cp\x3e最后，由于一开始文章写的概念性错误给大家带来的不变表示非常抱歉，好在最后我还是补全了一下文章。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e小结\x3c\/h2\x3e\n\x3cp\x3e本文主要还是讲了，如何随机生成一个指定面积的单连通区域。从一开始拍脑袋就能想到 DFS 开始，延伸到胖胖的区域，然后从个人认为「图不好看」开始，想办法如何结合一下两种算法使其变得更自然。\x3c\/p\x3e\n\x3cp\x3e针对同一件事的算法们并非一成不变或者不可结合的。不是说该 DFS 就只能 DFS，该 \x3ccode\x3efor\x3c\/code\x3e 就只能 \x3ccode\x3efor\x3c\/code\x3e，稍微结合一下也许食用效果更佳哦。\x3c\/p\x3e\n\x3cp\x3e哦对了，在这之前还有一个例子就是我在三年多前写的主题色提取的文章《\x3ca href=\x22https:\/\/xcoder.in\/2014\/09\/17\/theme-color-extract\/#%E6%88%91%E6%98%AF%E6%80%8E%E4%B9%88%E5%81%9A%E7%9A%84\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e图片主题色提取算法小结\x3c\/a\x3e》，其中就讲到我最后的方法就是结合了八叉树算法和最小差值法，使其在提取比较贴近的颜色同时又能够规范化提取出来的颜色。\x3c\/p\x3e\n\x3cp\x3e总之就是多想想，与诸君共勉。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>随机生成指定面积单连通区域</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014167823">https://segmentfault.com/a/1190000014167823</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ssgl9ms28o/" target="_blank">https://alili.tech/archive/ssgl9ms28o/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>