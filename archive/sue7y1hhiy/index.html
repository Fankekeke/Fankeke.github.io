<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="从ES6重新认识JavaScript设计模式(二): 工厂模式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>从ES6重新认识JavaScript设计模式(二): 工厂模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/sue7y1hhiy/",
				"appid": "1613049289050283", 
				"title": "从ES6重新认识JavaScript设计模式(二): 工厂模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-07T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9y6p875iupb/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/w85hqdsjihg/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&text=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&text=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&title=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&is_video=false&description=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&title=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&title=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&title=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fsue7y1hhiy%2f&title=%e4%bb%8eES6%e9%87%8d%e6%96%b0%e8%ae%a4%e8%af%86JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%28%e4%ba%8c%29%3a%20%e5%b7%a5%e5%8e%82%e6%a8%a1%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">从ES6重新认识JavaScript设计模式(二): 工厂模式</h1><div class="meta"><div class="postdate"><time datetime="2018-12-07" itemprop="datePublished">2018-12-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e1 什么是工厂模式?\x3c\/h2\x3e\n\x3cp\x3e工厂模式是用来创建对象的一种最常用的设计模式。我们不暴露创建对象的具体逻辑，而是将将逻辑封装在一个函数中，那么这个函数就可以被视为一个工厂。工厂模式根据抽象程度的不同可以分为：简单工厂，工厂方法和抽象工厂。\x3c\/p\x3e\n\x3cp\x3e如果只接触过JavaScript这门语言的的人可能会对\x3ccode\x3e抽象\x3c\/code\x3e这个词的概念有点模糊，因为JavaScript一直将\x3ccode\x3eabstract\x3c\/code\x3e作为保留字而没有去实现它。如果不能很好的理解\x3ccode\x3e抽象\x3c\/code\x3e的概念，那么就很难理解工厂模式中的三种方法的异同。所以，我们先以一个场景去简单的讲述一下抽象和工厂的概念。\x3c\/p\x3e\n\x3cblockquote\x3e想象一下你的女朋友生日要到了，你想知道她想要什么，于是你问她：“亲爱的，生日要到了你想要什么生日礼物啊？”\x3cp\x3e正巧你女朋友是个猫奴，最经迷上了抖音上的一只超级可爱的苏格兰折耳猫，她也很想要一只网红同款猫。\x3c\/p\x3e\n\x3cp\x3e于是她回答你说：“亲爱的，我想要一只动物。”\x3c\/p\x3e\n\x3cp\x3e你心平气和的问她：“想要什么\x3cstrong\x3e动物\x3c\/strong\x3e啊？” \x3c\/p\x3e\n\x3cp\x3e你女友说：“我想要\x3cstrong\x3e猫科动物\x3c\/strong\x3e。”\x3c\/p\x3e\n\x3cp\x3e这时你内心就纳闷了，猫科动物有老虎，狮子，豹子，猞猁，还有各种小猫，我哪里知道你要什么？\x3c\/p\x3e\n\x3cp\x3e于是你问女友：“你要哪种猫科动物啊？”  \x3c\/p\x3e\n\x3cp\x3e“笨死了，还要哪种，肯定是小猫咪啊，难道我们家还能像迪拜土豪那样养老虎啊！”你女朋友答道。\x3c\/p\x3e\n\x3cp\x3e“好好， 那你想要哪个\x3cstrong\x3e品种\x3c\/strong\x3e的猫呢？”你问道\x3c\/p\x3e\n\x3cp\x3e“我想要外国的品种, 不要中国的土猫” 你女友傲娇的回答到。\x3c\/p\x3e\n\x3cp\x3e这时你已经快奔溃了，作为程序员的你再也受不了这种挤牙膏式的提问，于是你哀求到：“亲爱的，你就直接告诉我你到底想要哪个品种，哪个颜色，多大的猫？”\x3c\/p\x3e\n\x3cp\x3e你女友想了想抖音的那只猫，回答道：“我想要一只灰色的，不超过1岁的苏格兰短耳猫！”\x3c\/p\x3e\n\x3cp\x3e于是，你在女友生日当天到全国最大的\x3cstrong\x3e宠物批发市场\x3c\/strong\x3e里面去，挑了\x3cstrong\x3e一只“灰色的，不超过1岁的苏格兰短耳猫”\x3c\/strong\x3e回家送给了你女友, 圆了你女友拥有网红同款猫的梦想!\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e上面中你最终买到并送给女友\x3cstrong\x3e那只猫\x3c\/strong\x3e可以被看作是一个\x3cstrong\x3e实例对象\x3c\/strong\x3e，\x3cstrong\x3e宠物批发市场\x3c\/strong\x3e可以看作是一个\x3cstrong\x3e工厂\x3c\/strong\x3e，我们可以认为它是一个函数，这个工厂函数里面有着各种各样的动物，那么你是如何获取到实例的呢？因为你给宠物批发市场传递了正确的\x3cstrong\x3e参数\x3c\/strong\x3e, \x3cstrong\x3e“color: 灰色”\x3c\/strong\x3e，\x3cstrong\x3e“age: 不超过1岁”\x3c\/strong\x3e，\x3cstrong\x3e\x22breed:苏格兰短耳\x22\x3c\/strong\x3e，**“category： \x3cbr\x3e猫\x22\x3cstrong\x3e。前面的对话中, 你女朋友回答“动物”，“猫科动物”，“国外的品种”让你不明白她到底想要什么，就是因为她说得太抽象了。她回答的是一大类动物的共有特征而不是具体动物，这种将复杂事物的一个或多个共有特征抽取出来的思维过程就是\x3c\/strong\x3e抽象**。\x3c\/p\x3e\n\x3cp\x3e既然已经明白了抽象的概念，下面我们来看一下之前提到的工厂模式的三种实现方法： 简单工厂模式、工厂方法模式、抽象工厂模式。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e1.1 简单工厂模式\x3c\/h3\x3e\n\x3cp\x3e简单工厂模式又叫静态工厂模式，由一个工厂对象决定创建某一种产品对象类的实例。主要用来创建同一类对象。\x3c\/p\x3e\n\x3cp\x3e在实际的项目中，我们常常需要根据用户的权限来渲染不同的页面，高级权限的用户所拥有的页面有些是无法被低级权限的用户所查看。所以我们可以在不同权限等级用户的构造函数中，保存该用户能够看到的页面。在根据权限实例化用户。代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let UserFactory = function (role) {\n  function SuperAdmin() {\n    this.name = \x26quot;超级管理员\x26quot;,\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27, \x27权限管理\x27]\n  }\n  function Admin() {\n    this.name = \x26quot;管理员\x26quot;,\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27]\n  }\n  function NormalUser() {\n    this.name = \x27普通用户\x27,\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n\n  switch (role) {\n    case \x27superAdmin\x27:\n      return new SuperAdmin();\n      break;\n    case \x27admin\x27:\n      return new Admin();\n      break;\n    case \x27user\x27:\n      return new NormalUser();\n      break;\n    default:\n      throw new Error(\x27参数错误, 可选参数:superAdmin、admin、user\x27);\n  }\n}\n\n\/\/调用\nlet superAdmin = UserFactory(\x27superAdmin\x27);\nlet admin = UserFactory(\x27admin\x27) \nlet normalUser = UserFactory(\x27user\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e UserFactory = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3erole\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSuperAdmin\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x22超级管理员\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27权限管理\x27\x3c\/span\x3e]\n  }\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eAdmin\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x22管理员\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e]\n  }\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eNormalUser\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x27普通用户\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e]\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (role) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e SuperAdmin();\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Admin();\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e NormalUser();\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27参数错误, 可选参数:superAdmin、admin、user\x27\x3c\/span\x3e);\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e superAdmin = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e admin = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e) \n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e normalUser = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eUserFactory\x3c\/code\x3e就是一个简单工厂，在该函数中有3个构造函数分别对应不同的权限的用户。当我们调用工厂函数时，只需要传递\x3ccode\x3esuperAdmin\x3c\/code\x3e, \x3ccode\x3eadmin\x3c\/code\x3e, \x3ccode\x3euser\x3c\/code\x3e这三个可选参数中的一个获取对应的实例对象。你也许发现，我们的这三类用户的构造函数内部很相识，我们还可以对其进行优化。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let UserFactory = function (role) {\n  function User(opt) {\n    this.name = opt.name;\n    this.viewPage = opt.viewPage;\n  }\n\n  switch (role) {\n    case \x27superAdmin\x27:\n      return new User({ name: \x27超级管理员\x27, viewPage: [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27, \x27权限管理\x27] });\n      break;\n    case \x27admin\x27:\n      return new User({ name: \x27管理员\x27, viewPage: [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27] });\n      break;\n    case \x27user\x27:\n      return new User({ name: \x27普通用户\x27, viewPage: [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27] });\n      break;\n    default:\n      throw new Error(\x27参数错误, 可选参数:superAdmin、admin、user\x27)\n  }\n}\n\n\/\/调用\nlet superAdmin = UserFactory(\x27superAdmin\x27);\nlet admin = UserFactory(\x27admin\x27) \nlet normalUser = UserFactory(\x27user\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e UserFactory = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3erole\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eopt\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = opt.name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = opt.viewPage;\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (role) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27超级管理员\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eviewPage\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27权限管理\x27\x3c\/span\x3e] });\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27管理员\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eviewPage\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e] });\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27普通用户\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eviewPage\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e] });\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27参数错误, 可选参数:superAdmin、admin、user\x27\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e superAdmin = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e admin = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e) \n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e normalUser = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e简单工厂的优点在于，你只需要一个正确的参数，就可以获取到你所需要的对象，而无需知道其创建的具体细节。但是在函数内包含了所有对象的创建逻辑（构造函数）和判断逻辑的代码，每增加新的构造函数还需要修改判断逻辑代码。当我们的对象不是上面的3个而是30个或更多时，这个函数会成为一个庞大的超级函数，便得难以维护。所以，简单工厂只能作用于\x3cstrong\x3e创建的对象数量较少，对象的创建逻辑不复杂时使用\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.2 工厂方法模式\x3c\/h3\x3e\n\x3cp\x3e工厂方法模式的本意是将实际创建对象的工作推迟到子类中，这样核心类就变成了抽象类。但是在JavaScript中很难像传统面向对象那样去实现创建抽象类。所以在JavaScript中我们只需要参考它的核心思想即可。我们可以将工厂方法看作是一个实例化对象的工厂类。\x3c\/p\x3e\n\x3cp\x3e在简单工厂模式中，我们每添加一个构造函数需要修改两处代码。现在我们使用工厂方法模式改造上面的代码，刚才提到，工厂方法我们只把它看作是一个实例化对象的工厂，它只做实例化对象这一件事情！ 我们采用安全模式创建对象。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/安全模式创建的工厂方法函数\nlet UserFactory = function(role) {\n  if(this instanceof UserFactory) {\n    var s = new this[role]();\n    return s;\n  } else {\n    return new UserFactory(role);\n  }\n}\n\n\/\/工厂方法函数的原型中设置所有对象的构造函数\nUserFactory.prototype = {\n  SuperAdmin: function() {\n    this.name = \x26quot;超级管理员\x26quot;,\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27, \x27权限管理\x27]\n  },\n  Admin: function() {\n    this.name = \x26quot;管理员\x26quot;,\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27]\n  },\n  NormalUser: function() {\n    this.name = \x27普通用户\x27,\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\n\/\/调用\nlet superAdmin = UserFactory(\x27SuperAdmin\x27);\nlet admin = UserFactory(\x27Admin\x27) \nlet normalUser = UserFactory(\x27NormalUser\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/安全模式创建的工厂方法函数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e UserFactory = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3erole\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e UserFactory) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e s = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[role]();\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e s;\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory(role);\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/工厂方法函数的原型中设置所有对象的构造函数\x3c\/span\x3e\nUserFactory.prototype = {\n  \x3cspan class=\x22hljs-attr\x22\x3eSuperAdmin\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x22超级管理员\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27权限管理\x27\x3c\/span\x3e]\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eAdmin\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x22管理员\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e]\n  },\n  \x3cspan class=\x22hljs-attr\x22\x3eNormalUser\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x27普通用户\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e]\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e superAdmin = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27SuperAdmin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e admin = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27Admin\x27\x3c\/span\x3e) \n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e normalUser = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27NormalUser\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的这段代码就很好的解决了每添加一个构造函数就需要修改两处代码的问题，如果我们需要添加新的角色，只需要在\x3ccode\x3eUserFactory.prototype\x3c\/code\x3e中添加。例如，我们需要添加一个\x3ccode\x3eVipUser\x3c\/code\x3e:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22UserFactory.prototype = {\n  \/\/....\n  VipUser: function() {\n    this.name = \x27付费用户\x27,    \n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27VIP页\x27]\n  }\n}\n\n\/\/调用\nlet vipUser = UserFactory(\x27VipUser\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3eUserFactory.prototype = {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/....\x3c\/span\x3e\n  VipUser: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = \x3cspan class=\x22hljs-string\x22\x3e\x27付费用户\x27\x3c\/span\x3e,    \n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27VIP页\x27\x3c\/span\x3e]\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vipUser = UserFactory(\x3cspan class=\x22hljs-string\x22\x3e\x27VipUser\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的这段代码中，使用到的安全模式可能很难一次就能理解。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let UserFactory = function(role) {\n  if(this instanceof UserFactory) {\n    var s = new this[role]();\n    return s;\n  } else {\n    return new UserFactory(role);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e UserFactory = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3erole\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e UserFactory) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e s = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[role]();\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e s;\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory(role);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e因为我们将\x3ccode\x3eSuperAdmin\x3c\/code\x3e、\x3ccode\x3eAdmin\x3c\/code\x3e、\x3ccode\x3eNormalUser\x3c\/code\x3e等构造函数保存到了\x3ccode\x3eUserFactory.prototype\x3c\/code\x3e中，也就意味着我们必须实例化\x3ccode\x3eUserFactory\x3c\/code\x3e函数才能够进行以上对象的实例化。如下面代码所示\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let UserFactory = function() {}\n\nUserFactory.prototype = {\n \/\/...\n}\n\n\/\/调用\nlet factory = new UserFactory();\nlet superAdmin = new factory.SuperAdmin();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e UserFactory = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n\nUserFactory.prototype = {\n \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e factory = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory();\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e superAdmin = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e factory.SuperAdmin();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的调用函数的过程中, 一旦我们在任何阶段忘记使用\x3ccode\x3enew\x3c\/code\x3e, 那么就无法正确获取到\x3ccode\x3esuperAdmin\x3c\/code\x3e这个对象。但是一旦使用安全模式去进行实例化，就能很好解决上面的问题。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e1.3 抽象工厂模式\x3c\/h3\x3e\n\x3cp\x3e上面介绍了简单工厂模式和工厂方法模式都是直接生成实例，但是抽象工厂模式不同，抽象工厂模式并不直接生成实例， 而是用于对产品类簇的创建。\x3c\/p\x3e\n\x3cp\x3e上面例子中的\x3ccode\x3esuperAdmin\x3c\/code\x3e，\x3ccode\x3eadmin\x3c\/code\x3e，\x3ccode\x3euser\x3c\/code\x3e三种用户角色，其中\x3ccode\x3euser\x3c\/code\x3e可能是使用不同的社交媒体账户进行注册的，例如：\x3ccode\x3ewechat\x3c\/code\x3e，\x3ccode\x3eqq\x3c\/code\x3e，\x3ccode\x3eweibo\x3c\/code\x3e。那么这三类社交媒体账户就是对应的类簇。在抽象工厂中，类簇一般用父类定义，并在父类中定义一些抽象方法，再通过抽象工厂让子类继承父类。所以，抽象工厂其实是\x3cstrong\x3e实现子类继承父类的方法\x3c\/strong\x3e。\x3c\/p\x3e\n\x3cp\x3e上面提到的抽象方法是指声明但不能使用的方法。在其他传统面向对象的语言中常用\x3ccode\x3eabstract\x3c\/code\x3e进行声明，但是在JavaScript中，\x3ccode\x3eabstract\x3c\/code\x3e是属于保留字，但是我们可以通过在类的方法中抛出错误来模拟抽象类。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let WechatUser = function() {}\nWechatUser.prototype = {\n  getName: function() {\n    return new Error(\x27抽象方法不能调用\x27);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e WechatUser = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\nWechatUser.prototype = {\n  \x3cspan class=\x22hljs-attr\x22\x3egetName\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27抽象方法不能调用\x27\x3c\/span\x3e);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码中的\x3ccode\x3egetPrice\x3c\/code\x3e就是抽象方法，我们定义它但是却没有去实现。如果子类继承\x3ccode\x3eWechatUser\x3c\/code\x3e但是并没有去重写\x3ccode\x3egetName\x3c\/code\x3e，那么子类的实例化对象就会调用父类的\x3ccode\x3egetName\x3c\/code\x3e方法并抛出错误提示。\x3c\/p\x3e\n\x3cp\x3e下面我们分别来实现账号管理的抽象工厂方法:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let AccountAbstractFactory = function(subType, superType) {\n  \/\/判断抽象工厂中是否有该抽象类\n  if(typeof AccountAbstractFactory[superType] === \x27function\x27) {\n    \/\/缓存类\n    function F() {};\n    \/\/继承父类属性和方法\n    F.prototype = new AccountAbstractFactory[superType] ();\n    \/\/将子类的constructor指向子类\n    subType.constructor = subType;\n    \/\/子类原型继承父类\n    subType.prototype = new F();\n\n  } else {\n    throw new Error(\x27抽象类不存在!\x27)\n  }\n}\n\n\/\/微信用户抽象类\nAccountAbstractFactory.WechatUser = function() {\n  this.type = \x27wechat\x27;\n}\nAccountAbstractFactory.WechatUser.prototype = {\n  getName: function() {\n    return new Error(\x27抽象方法不能调用\x27);\n  }\n}\n\n\/\/qq用户抽象类\nAccountAbstractFactory.QqUser = function() {\n  this.type = \x27qq\x27;\n}\nAccountAbstractFactory.QqUser.prototype = {\n  getName: function() {\n    return new Error(\x27抽象方法不能调用\x27);\n  }\n}\n\n\/\/新浪微博用户抽象类\nAccountAbstractFactory.WeiboUser = function() {\n  this.type = \x27weibo\x27;\n}\nAccountAbstractFactory.WeiboUser.prototype = {\n  getName: function() {\n    return new Error(\x27抽象方法不能调用\x27);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e AccountAbstractFactory = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esubType, superType\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/判断抽象工厂中是否有该抽象类\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e AccountAbstractFactory[superType] === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/缓存类\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eF\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{};\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/继承父类属性和方法\x3c\/span\x3e\n    F.prototype = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e AccountAbstractFactory[superType] ();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/将子类的constructor指向子类\x3c\/span\x3e\n    subType.constructor = subType;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/子类原型继承父类\x3c\/span\x3e\n    subType.prototype = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e F();\n\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27抽象类不存在!\x27\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/微信用户抽象类\x3c\/span\x3e\nAccountAbstractFactory.WechatUser = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.type = \x3cspan class=\x22hljs-string\x22\x3e\x27wechat\x27\x3c\/span\x3e;\n}\nAccountAbstractFactory.WechatUser.prototype = {\n  \x3cspan class=\x22hljs-attr\x22\x3egetName\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27抽象方法不能调用\x27\x3c\/span\x3e);\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/qq用户抽象类\x3c\/span\x3e\nAccountAbstractFactory.QqUser = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.type = \x3cspan class=\x22hljs-string\x22\x3e\x27qq\x27\x3c\/span\x3e;\n}\nAccountAbstractFactory.QqUser.prototype = {\n  \x3cspan class=\x22hljs-attr\x22\x3egetName\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27抽象方法不能调用\x27\x3c\/span\x3e);\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/新浪微博用户抽象类\x3c\/span\x3e\nAccountAbstractFactory.WeiboUser = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.type = \x3cspan class=\x22hljs-string\x22\x3e\x27weibo\x27\x3c\/span\x3e;\n}\nAccountAbstractFactory.WeiboUser.prototype = {\n  \x3cspan class=\x22hljs-attr\x22\x3egetName\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27抽象方法不能调用\x27\x3c\/span\x3e);\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eAccountAbstractFactory \x3c\/code\x3e就是一个抽象工厂方法，该方法在参数中传递子类和父类，在方法体内部实现了子类对父类的继承。对抽象工厂方法添加抽象类的方法我们是通过点语法进行添加的。\x3c\/p\x3e\n\x3cp\x3e下面我们来定义普通用户的子类:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/普通微信用户子类\nfunction UserOfWechat(name) {\n  this.name = name;\n  this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n}\n\/\/抽象工厂实现WechatUser类的继承\nAccountAbstractFactory(UserOfWechat, \x27WechatUser\x27);\n\/\/子类中重写抽象方法\nUserOfWechat.prototype.getName = function() {\n  return this.name;\n}\n\n\/\/普通qq用户子类\nfunction UserOfQq(name) {\n  this.name = name;\n  this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n}\n\/\/抽象工厂实现QqUser类的继承\nAccountAbstractFactory(UserOfQq, \x27QqUser\x27);\n\/\/子类中重写抽象方法\nUserOfQq.prototype.getName = function() {\n  return this.name;\n}\n\n\/\/普通微博用户子类\nfunction UserOfWeibo(name) {\n  this.name = name;\n  this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n}\n\/\/抽象工厂实现WeiboUser类的继承\nAccountAbstractFactory(UserOfWeibo, \x27WeiboUser\x27);\n\/\/子类中重写抽象方法\nUserOfWeibo.prototype.getName = function() {\n  return this.name;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/普通微信用户子类\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserOfWechat\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e]\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/抽象工厂实现WechatUser类的继承\x3c\/span\x3e\nAccountAbstractFactory(UserOfWechat, \x3cspan class=\x22hljs-string\x22\x3e\x27WechatUser\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/子类中重写抽象方法\x3c\/span\x3e\nUserOfWechat.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/普通qq用户子类\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserOfQq\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e]\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/抽象工厂实现QqUser类的继承\x3c\/span\x3e\nAccountAbstractFactory(UserOfQq, \x3cspan class=\x22hljs-string\x22\x3e\x27QqUser\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/子类中重写抽象方法\x3c\/span\x3e\nUserOfQq.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name;\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/普通微博用户子类\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserOfWeibo\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e]\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/抽象工厂实现WeiboUser类的继承\x3c\/span\x3e\nAccountAbstractFactory(UserOfWeibo, \x3cspan class=\x22hljs-string\x22\x3e\x27WeiboUser\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/子类中重写抽象方法\x3c\/span\x3e\nUserOfWeibo.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述代码我们分别定义了\x3ccode\x3eUserOfWechat\x3c\/code\x3e，\x3ccode\x3eUserOfQq\x3c\/code\x3e，\x3ccode\x3eUserOfWeibo\x3c\/code\x3e三种类。这三个类作为子类通过抽象工厂方法实现继承。特别需要注意的是，调用抽象工厂方法后不要忘记重写抽象方法，否则在子类的实例中调用抽象方法会报错。\x3c\/p\x3e\n\x3cp\x3e我们来分别对这三种类进行实例化，检测抽象工厂方法是实现了类簇的管理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/实例化微信用户\nlet wechatUserA = new UserOfWechat(\x27微信小李\x27);\nconsole.log(wechatUserA.getName(), wechatUserA.type); \/\/微信小李 wechat\nlet wechatUserB = new UserOfWechat(\x27微信小王\x27);\nconsole.log(wechatUserB.getName(), wechatUserB.type); \/\/微信小王 wechat\n\n\/\/实例化qq用户\nlet qqUserA = new UserOfQq(\x27QQ小李\x27);\nconsole.log(qqUserA.getName(), qqUserA.type); \/\/QQ小李 qq\nlet qqUserB = new UserOfQq(\x27QQ小王\x27);\nconsole.log(qqUserB.getName(), qqUserB.type); \/\/QQ小王 qq\n\n\/\/实例化微博用户\nlet weiboUserA =new UserOfWeibo(\x27微博小李\x27);\nconsole.log(weiboUserA.getName(), weiboUserA.type); \/\/微博小李 weibo\nlet weiboUserB =new UserOfWeibo(\x27微博小王\x27);\nconsole.log(weiboUserB.getName(), weiboUserB.type); \/\/微博小王 weibo\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs gauss\x22\x3e\x3ccode class=\x22JavaScripts\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化微信用户\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e wechatUserA = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserOfWechat(\x27微信小李\x27);\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(wechatUserA.\x3cspan class=\x22hljs-built_in\x22\x3egetName\x3c\/span\x3e(), wechatUserA.\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/微信小李 wechat\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e wechatUserB = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserOfWechat(\x27微信小王\x27);\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(wechatUserB.\x3cspan class=\x22hljs-built_in\x22\x3egetName\x3c\/span\x3e(), wechatUserB.\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/微信小王 wechat\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化qq用户\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e qqUserA = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserOfQq(\x27QQ小李\x27);\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(qqUserA.\x3cspan class=\x22hljs-built_in\x22\x3egetName\x3c\/span\x3e(), qqUserA.\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/QQ小李 qq\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e qqUserB = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserOfQq(\x27QQ小王\x27);\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(qqUserB.\x3cspan class=\x22hljs-built_in\x22\x3egetName\x3c\/span\x3e(), qqUserB.\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/QQ小王 qq\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化微博用户\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e weiboUserA =\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserOfWeibo(\x27微博小李\x27);\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(weiboUserA.\x3cspan class=\x22hljs-built_in\x22\x3egetName\x3c\/span\x3e(), weiboUserA.\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/微博小李 weibo\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e weiboUserB =\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserOfWeibo(\x27微博小王\x27);\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(weiboUserB.\x3cspan class=\x22hljs-built_in\x22\x3egetName\x3c\/span\x3e(), weiboUserB.\x3cspan class=\x22hljs-built_in\x22\x3etype\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/微博小王 weibo\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从打印结果上看，\x3ccode\x3eAccountAbstractFactory\x3c\/code\x3e这个抽象工厂很好的实现了它的作用，将不同用户账户按照社交媒体这一个类簇进行了分类。这就是抽象工厂的作用，它不直接创建实例，而是通过类的继承进行类簇的管理。抽象工厂模式一般用在多人协作的超大型项目中，并且严格的要求项目以面向对象的思想进行完成。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e2 ES6中的工厂模式\x3c\/h2\x3e\n\x3cp\x3eES6中给我们提供了\x3ccode\x3eclass\x3c\/code\x3e新语法，虽然\x3ccode\x3eclass\x3c\/code\x3e本质上是一颗语法糖，并也没有改变JavaScript是使用原型继承的语言，但是确实让对象的创建和继承的过程变得更加的清晰和易读。下面我们使用ES6的新语法来重写上面的例子。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e2.1 ES6重写简单工厂模式\x3c\/h3\x3e\n\x3cp\x3e使用ES6重写简单工厂模式时，我们不再使用构造函数创建对象，而是使用\x3ccode\x3eclass\x3c\/code\x3e的新语法，并使用\x3ccode\x3estatic\x3c\/code\x3e关键字将简单工厂封装到\x3ccode\x3eUser\x3c\/code\x3e类的静态方法中:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/User类\nclass User {\n  \/\/构造器\n  constructor(opt) {\n    this.name = opt.name;\n    this.viewPage = opt.viewPage;\n  }\n\n  \/\/静态方法\n  static getInstance(role) {\n    switch (role) {\n      case \x27superAdmin\x27:\n        return new User({ name: \x27超级管理员\x27, viewPage: [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27, \x27权限管理\x27] });\n        break;\n      case \x27admin\x27:\n        return new User({ name: \x27管理员\x27, viewPage: [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27] });\n        break;\n      case \x27user\x27:\n        return new User({ name: \x27普通用户\x27, viewPage: [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27] });\n        break;\n      default:\n        throw new Error(\x27参数错误, 可选参数:superAdmin、admin、user\x27)\n    }\n  }\n}\n\n\/\/调用\nlet superAdmin = User.getInstance(\x27superAdmin\x27);\nlet admin = User.getInstance(\x27admin\x27);\nlet normalUser = User.getInstance(\x27user\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/User类\x3c\/span\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/构造器\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(opt) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = opt.name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = opt.viewPage;\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/静态方法\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3estatic\x3c\/span\x3e getInstance(role) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (role) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27超级管理员\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eviewPage\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27权限管理\x27\x3c\/span\x3e] });\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27管理员\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eviewPage\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e] });\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User({ \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27普通用户\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3eviewPage\x3c\/span\x3e: [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e] });\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27参数错误, 可选参数:superAdmin、admin、user\x27\x3c\/span\x3e)\n    }\n  }\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/调用\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e superAdmin = User.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e admin = User.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e normalUser = User.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e2.2 ES6重写工厂方法模式\x3c\/h3\x3e\n\x3cp\x3e在上文中我们提到，工厂方法模式的本意是将实际创建对象的工作推迟到子类中，这样核心类就变成了抽象类。但是JavaScript的\x3ccode\x3eabstract\x3c\/code\x3e是一个保留字，并没有提供抽象类，所以之前我们只是借鉴了工厂方法模式的核心思想。\x3c\/p\x3e\n\x3cp\x3e虽然ES6也没有实现\x3ccode\x3eabstract\x3c\/code\x3e，但是我们可以使用\x3ccode\x3enew.target\x3c\/code\x3e来模拟出抽象类。\x3ccode\x3enew.target\x3c\/code\x3e指向直接被\x3ccode\x3enew\x3c\/code\x3e执行的构造函数，我们对\x3ccode\x3enew.target\x3c\/code\x3e进行判断，如果指向了该类则抛出错误来使得该类成为抽象类。下面我们来改造代码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class User {\n  constructor(name = \x27\x27, viewPage = []) {\n    if(new.target === User) {\n      throw new Error(\x27抽象类不能实例化!\x27);\n    }\n    this.name = name;\n    this.viewPage = viewPage;\n  }\n}\n\nclass UserFactory extends User {\n  constructor(name, viewPage) {\n    super(name, viewPage)\n  }\n  create(role) {\n    switch (role) {\n      case \x27superAdmin\x27: \n        return new UserFactory( \x27超级管理员\x27, [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27, \x27应用数据\x27, \x27权限管理\x27] );\n        break;\n      case \x27admin\x27:\n        return new UserFactory( \x27普通用户\x27, [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27] );\n        break;\n      case \x27user\x27:\n        return new UserFactory( \x27普通用户\x27, [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27] );\n        break;\n      default:\n        throw new Error(\x27参数错误, 可选参数:superAdmin、admin、user\x27)\n    }\n  }\n}\n\nlet userFactory = new UserFactory();\nlet superAdmin = userFactory.create(\x27superAdmin\x27);\nlet admin = userFactory.create(\x27admin\x27);\nlet user = userFactory.create(\x27user\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(name = \x27\x27, viewPage = []) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e.target === User) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27抽象类不能实例化!\x27\x3c\/span\x3e);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = viewPage;\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserFactory\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econstructor\x3c\/span\x3e(name, viewPage) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(name, viewPage)\n  }\n  create(role) {\n    \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (role) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e: \n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory( \x3cspan class=\x22hljs-string\x22\x3e\x27超级管理员\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27应用数据\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27权限管理\x27\x3c\/span\x3e] );\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory( \x3cspan class=\x22hljs-string\x22\x3e\x27普通用户\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e] );\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory( \x3cspan class=\x22hljs-string\x22\x3e\x27普通用户\x27\x3c\/span\x3e, [\x3cspan class=\x22hljs-string\x22\x3e\x27首页\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27通讯录\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27发现页\x27\x3c\/span\x3e] );\n        \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n        \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27参数错误, 可选参数:superAdmin、admin、user\x27\x3c\/span\x3e)\n    }\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e userFactory = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e UserFactory();\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e superAdmin = userFactory.create(\x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e admin = userFactory.create(\x3cspan class=\x22hljs-string\x22\x3e\x27admin\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e user = userFactory.create(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e2.3 ES6重写抽象工厂模式\x3c\/h3\x3e\n\x3cp\x3e抽象工厂模式并不直接生成实例， 而是用于对产品类簇的创建。我们同样使用\x3ccode\x3enew.target\x3c\/code\x3e语法来模拟抽象类，并通过继承的方式创建出\x3ccode\x3eUserOfWechat\x3c\/code\x3e, \x3ccode\x3eUserOfQq\x3c\/code\x3e, \x3ccode\x3eUserOfWeibo\x3c\/code\x3e这一系列子类类簇。使用\x3ccode\x3egetAbstractUserFactor\x3c\/code\x3e来返回指定的类簇。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22class User {\n  constructor(type) {\n    if (new.target === User) {\n      throw new Error(\x27抽象类不能实例化!\x27)\n    }\n    this.type = type;\n  }\n}\n\nclass UserOfWechat extends User {\n  constructor(name) {\n    super(\x27wechat\x27);\n    this.name = name;\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\nclass UserOfQq extends User {\n  constructor(name) {\n    super(\x27qq\x27);\n    this.name = name;\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\nclass UserOfWeibo extends User {\n  constructor(name) {\n    super(\x27weibo\x27);\n    this.name = name;\n    this.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\nfunction getAbstractUserFactory(type) {\n  switch (type) {\n    case \x27wechat\x27:\n      return UserOfWechat;\n      break;\n    case \x27qq\x27:\n      return UserOfQq;\n      break;\n    case \x27weibo\x27:\n      return UserOfWeibo;\n      break;\n    default:\n      throw new Error(\x27参数错误, 可选参数:superAdmin、admin、user\x27)\n  }\n}\n\nlet WechatUserClass = getAbstractUserFactory(\x27wechat\x27);\nlet QqUserClass = getAbstractUserFactory(\x27qq\x27);\nlet WeiboUserClass = getAbstractUserFactory(\x27weibo\x27);\n\nlet wechatUser = new WechatUserClass(\x27微信小李\x27);\nlet qqUser = new QqUserClass(\x27QQ小李\x27);\nlet weiboUser = new WeiboUserClass(\x27微博小李\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scala\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e.target === \x3cspan class=\x22hljs-type\x22\x3eUser\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eError\x3c\/span\x3e(\x27抽象类不能实例化!\x27)\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e = \x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e\x3c\/span\x3e;\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserOfWechat\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(name) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(\x3cspan class=\x22hljs-symbol\x22\x3e\x27wecha\x3c\/span\x3et\x27);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserOfQq\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(name) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(\x3cspan class=\x22hljs-symbol\x22\x3e\x27q\x3c\/span\x3eq\x27);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUserOfWeibo\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eextends\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eUser\x3c\/span\x3e \x3c\/span\x3e{\n  constructor(name) {\n    \x3cspan class=\x22hljs-keyword\x22\x3esuper\x3c\/span\x3e(\x3cspan class=\x22hljs-symbol\x22\x3e\x27weib\x3c\/span\x3eo\x27);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.viewPage = [\x27首页\x27, \x27通讯录\x27, \x27发现页\x27]\n  }\n}\n\nfunction getAbstractUserFactory(\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e) \x3c\/span\x3e{\n  switch (\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x27wecha\x3c\/span\x3et\x27:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eUserOfWechat\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x27q\x3c\/span\x3eq\x27:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eUserOfQq\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-symbol\x22\x3e\x27weib\x3c\/span\x3eo\x27:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eUserOfWeibo\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eError\x3c\/span\x3e(\x27参数错误, 可选参数:superAdmin、admin、user\x27)\n  }\n}\n\nlet \x3cspan class=\x22hljs-type\x22\x3eWechatUserClass\x3c\/span\x3e = getAbstractUserFactory(\x3cspan class=\x22hljs-symbol\x22\x3e\x27wecha\x3c\/span\x3et\x27);\nlet \x3cspan class=\x22hljs-type\x22\x3eQqUserClass\x3c\/span\x3e = getAbstractUserFactory(\x3cspan class=\x22hljs-symbol\x22\x3e\x27q\x3c\/span\x3eq\x27);\nlet \x3cspan class=\x22hljs-type\x22\x3eWeiboUserClass\x3c\/span\x3e = getAbstractUserFactory(\x3cspan class=\x22hljs-symbol\x22\x3e\x27weib\x3c\/span\x3eo\x27);\n\nlet wechatUser = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eWechatUserClass\x3c\/span\x3e(\x27微信小李\x27);\nlet qqUser = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eQqUserClass\x3c\/span\x3e(\x3cspan class=\x22hljs-symbol\x22\x3e\x27QQ\x3c\/span\x3e小李\x27);\nlet weiboUser = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eWeiboUserClass\x3c\/span\x3e(\x27微博小李\x27);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e3 工厂模式的项目实战应用\x3c\/h2\x3e\n\x3cp\x3e在实际的前端业务中，最常用的简单工厂模式。如果不是超大型的项目，是很难有机会使用到工厂方法模式和抽象工厂方法模式的。下面我介绍在Vue项目中实际使用到的简单工厂模式的应用。\x3c\/p\x3e\n\x3cp\x3e在普通的vue \x2b vue-router的项目中，我们通常将所有的路由写入到\x3ccode\x3erouter\/index.js\x3c\/code\x3e这个文件中。下面的代码我相信vue的开发者会非常熟悉，总共有5个页面的路由：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ index.js\n\nimport Vue from \x27vue\x27\nimport Router from \x27vue-router\x27\nimport Login from \x27..\/components\/Login.vue\x27\nimport SuperAdmin from \x27..\/components\/SuperAdmin.vue\x27\nimport NormalAdmin from \x27..\/components\/Admin.vue\x27\nimport User from \x27..\/components\/User.vue\x27\nimport NotFound404 from \x27..\/components\/404.vue\x27\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    \/\/重定向到登录页\n    {\n      path: \x27\/\x27,\n      redirect: \x27\/login\x27\n    },\n    \/\/登陆页\n    {\n      path: \x27\/login\x27,\n      name: \x27Login\x27,\n      component: Login\n    },\n    \/\/超级管理员页面\n    {\n      path: \x27\/super-admin\x27,\n      name: \x27SuperAdmin\x27,\n      component: SuperAdmin\n    },\n    \/\/普通管理员页面\n    {\n      path: \x27\/normal-admin\x27,\n      name: \x27NormalAdmin\x27,\n      component: NormalAdmin\n    },\n    \/\/普通用户页面\n    {\n      path: \x27\/user\x27,\n      name: \x27User\x27,\n      component: User\n    },\n    \/\/404页面\n    {\n      path: \x27*\x27,\n      name: \x27NotFound404\x27,\n      component: NotFound404\n    }\n  ]\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ index.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue from \x27vue\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Router from \x27vue-router\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Login from \x27..\/components\/Login.vue\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e SuperAdmin from \x27..\/components\/SuperAdmin.vue\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e NormalAdmin from \x27..\/components\/Admin.vue\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e User from \x27..\/components\/User.vue\x27\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e NotFound404 from \x27..\/components\/404.vue\x27\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/重定向到登录页\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n      redirect: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/登陆页\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-keyword\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Login\x27\x3c\/span\x3e,\n      component: Login\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/超级管理员页面\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/super-admin\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-keyword\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27SuperAdmin\x27\x3c\/span\x3e,\n      component: SuperAdmin\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/普通管理员页面\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/normal-admin\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-keyword\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27NormalAdmin\x27\x3c\/span\x3e,\n      component: NormalAdmin\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/普通用户页面\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/user\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-keyword\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e,\n      component: User\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/404页面\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-built_in\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-keyword\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27NotFound404\x27\x3c\/span\x3e,\n      component: NotFound404\n    }\n  ]\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当涉及权限管理页面的时候，通常需要在用户登陆根据权限开放固定的访问页面并进行相应权限的页面跳转。但是如果我们还是按照老办法将所有的路由写入到\x3ccode\x3erouter\/index.js\x3c\/code\x3e这个文件中，那么低权限的用户如果知道高权限路由时，可以通过在浏览器上输入url跳转到高权限的页面。所以我们必须在登陆的时候根据权限使用\x3ccode\x3evue-router\x3c\/code\x3e提供的\x3ccode\x3eaddRoutes\x3c\/code\x3e方法给予用户相对应的路由权限。这个时候就可以使用简单工厂方法来改造上面的代码。\x3c\/p\x3e\n\x3cp\x3e在\x3ccode\x3erouter\/index.js\x3c\/code\x3e文件中，我们只提供\x3ccode\x3e\/login\x3c\/code\x3e这一个路由页面。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/index.js\n\nimport Vue from \x27vue\x27\nimport Router from \x27vue-router\x27\nimport Login from \x27..\/components\/Login.vue\x27\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    \/\/重定向到登录页\n    {\n      path: \x27\/\x27,\n      redirect: \x27\/login\x27\n    },\n    \/\/登陆页\n    {\n      path: \x27\/login\x27,\n      name: \x27Login\x27,\n      component: Login\n    }\n  ]\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/index.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-router\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Login \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/Login.vue\x27\x3c\/span\x3e\n\nVue.use(Router)\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Router({\n  \x3cspan class=\x22hljs-attr\x22\x3eroutes\x3c\/span\x3e: [\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/重定向到登录页\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3eredirect\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/登陆页\x3c\/span\x3e\n    {\n      \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Login\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: Login\n    }\n  ]\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们在\x3ccode\x3erouter\/\x3c\/code\x3e文件夹下新建一个\x3ccode\x3erouterFactory.js\x3c\/code\x3e文件，导出\x3ccode\x3erouterFactory\x3c\/code\x3e简单工厂函数，用于根据用户权限提供路由权限，代码如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/routerFactory.js\n\nimport SuperAdmin from \x27..\/components\/SuperAdmin.vue\x27\nimport NormalAdmin from \x27..\/components\/Admin.vue\x27\nimport User from \x27..\/components\/User.vue\x27\nimport NotFound404 from \x27..\/components\/404.vue\x27\n\nlet AllRoute = [\n  \/\/超级管理员页面\n  {\n    path: \x27\/super-admin\x27,\n    name: \x27SuperAdmin\x27,\n    component: SuperAdmin\n  },\n  \/\/普通管理员页面\n  {\n    path: \x27\/normal-admin\x27,\n    name: \x27NormalAdmin\x27,\n    component: NormalAdmin\n  },\n  \/\/普通用户页面\n  {\n    path: \x27\/user\x27,\n    name: \x27User\x27,\n    component: User\n  },\n  \/\/404页面\n  {\n    path: \x27*\x27,\n    name: \x27NotFound404\x27,\n    component: NotFound404\n  }\n]\n\nlet routerFactory = (role) =\x3e {\n  switch (role) {\n    case \x27superAdmin\x27:\n      return {\n        name: \x27SuperAdmin\x27,\n        route: AllRoute\n      };\n      break;\n    case \x27normalAdmin\x27:\n      return {\n        name: \x27NormalAdmin\x27,\n        route: AllRoute.splice(1)\n      }\n      break;\n    case \x27user\x27:\n      return {\n        name: \x27User\x27,\n        route:  AllRoute.splice(2)\n      }\n      break;\n    default: \n      throw new Error(\x27参数错误! 可选参数: superAdmin, normalAdmin, user\x27)\n  }\n}\n\nexport { routerFactory }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/routerFactory.js\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e SuperAdmin \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/SuperAdmin.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e NormalAdmin \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/Admin.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e User \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/User.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e NotFound404 \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/components\/404.vue\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e AllRoute = [\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/超级管理员页面\x3c\/span\x3e\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/super-admin\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27SuperAdmin\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: SuperAdmin\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/普通管理员页面\x3c\/span\x3e\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/normal-admin\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27NormalAdmin\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: NormalAdmin\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/普通用户页面\x3c\/span\x3e\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/user\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: User\n  },\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/404页面\x3c\/span\x3e\n  {\n    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27*\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27NotFound404\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3ecomponent\x3c\/span\x3e: NotFound404\n  }\n]\n\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e routerFactory = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3erole\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (role) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27superAdmin\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27SuperAdmin\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eroute\x3c\/span\x3e: AllRoute\n      };\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27normalAdmin\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27NormalAdmin\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eroute\x3c\/span\x3e: AllRoute.splice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e:\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3eroute\x3c\/span\x3e:  AllRoute.splice(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e)\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e: \n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27参数错误! 可选参数: superAdmin, normalAdmin, user\x27\x3c\/span\x3e)\n  }\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e { routerFactory }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在登陆页导入该方法，请求登陆接口后根据权限添加路由:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/Login.vue\n\nimport {routerFactory} from \x27..\/router\/routerFactory.js\x27\nexport default {\n  \/\/... \n  methods: {\n    userLogin() {\n      \/\/请求登陆接口, 获取用户权限, 根据权限调用this.getRoute方法\n      \/\/..\n    },\n    \n    getRoute(role) {\n      \/\/根据权限调用routerFactory方法\n      let routerObj = routerFactory(role);\n      \n      \/\/给vue-router添加该权限所拥有的路由页面\n      this.$router.addRoutes(routerObj.route);\n      \n      \/\/跳转到相应页面\n      this.$router.push({name: routerObj.name})\n    }\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/Login.vue\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e {routerFactory} \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27..\/router\/routerFactory.js\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/... \x3c\/span\x3e\n  methods: {\n    userLogin() {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/请求登陆接口, 获取用户权限, 根据权限调用this.getRoute方法\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/..\x3c\/span\x3e\n    },\n    \n    getRoute(role) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/根据权限调用routerFactory方法\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e routerObj = routerFactory(role);\n      \n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/给vue-router添加该权限所拥有的路由页面\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.addRoutes(routerObj.route);\n      \n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/跳转到相应页面\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$router.push({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: routerObj.name})\n    }\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在实际项目中，因为使用\x3ccode\x3ethis.$router.addRoutes\x3c\/code\x3e方法添加的路由刷新后不能保存，所以会导致路由无法访问。通常的做法是本地加密保存用户信息，在刷新后获取本地权限并解密，根据权限重新添加路由。这里因为和工厂模式没有太大的关系就不再赘述。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e上面说到的三种工厂模式和上文的单例模式一样，都是属于创建型的设计模式。简单工厂模式又叫静态工厂方法，用来创建某一种产品对象的实例，用来创建单一对象；工厂方法模式是将创建实例推迟到子类中进行；抽象工厂模式是对类的工厂抽象用来创建产品类簇，不负责创建某一类产品的实例。在实际的业务中，需要根据实际的业务复杂度来选择合适的模式。对于非大型的前端应用来说，灵活使用简单工厂其实就能解决大部分问题。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>从ES6重新认识JavaScript设计模式(二): 工厂模式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014196851">https://segmentfault.com/a/1190000014196851</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/sue7y1hhiy/" target="_blank">https://alili.tech/archive/sue7y1hhiy/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>