<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="如何写一个微信小程序组件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>如何写一个微信小程序组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/t0k3738i5pc/",
				"appid": "1613049289050283", 
				"title": "如何写一个微信小程序组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-03T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/tn6nd0xnyld/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/8kgw62s7sl2/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&text=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&text=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&title=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&is_video=false&description=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&title=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&title=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&title=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft0k3738i5pc%2f&title=%e5%a6%82%e4%bd%95%e5%86%99%e4%b8%80%e4%b8%aa%e5%be%ae%e4%bf%a1%e5%b0%8f%e7%a8%8b%e5%ba%8f%e7%bb%84%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">如何写一个微信小程序组件</h1><div class="meta"><div class="postdate"><time datetime="2019-01-03" itemprop="datePublished">2019-01-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e背景\x3c\/h2\x3e\n\x3cp\x3e先谈下背景，在做一款产品的时候需要用到日期选择器，但是官方的却不太满足需求，因为无法选择农历啊。所以自己来造一个轮子好了，造轮子之前先想想啊，万一以后多个地方要用到，多个项目要用，怎么办呢？\x3c\/p\x3e\n\x3cp\x3e那把这个轮子抽象，定义输入输出，即接口。组件里面怎么运转调用方不管啊，给了什么输入，就只管结果好了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e组件三要素\x3c\/h2\x3e\n\x3cp\x3e组件的三要素就是小程序定义的三种文件：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3ejs\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewxml\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3ewxss\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e因为js本身就是模块化开发，所以这天然有利于组件化。wxml和wxss呢，定义了组件的皮肤，小程序的模板template标签可以方便wxml的复用。至于wxss，没有独立出来，目前没发现要怎么整合到独立的组件中去，而不与其他的wxss发生耦合。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!--\n  index: int\n  msg: string\n  time: string\n--\x3e\n\x3ctemplate name=\x26quot;myTemplate\x26quot;\x3e\n  \x3cview\x3e\n    \x3ctext\x3e \x22{{\x22index\x22}}\x22: \x22{{\x22msg\x22}}\x22 \x3c\/text\x3e\n    \x3ctext\x3e Time: \x22{{\x22time\x22}}\x22 \x3c\/text\x3e\n  \x3c\/view\x3e\n\x3c\/template\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs django\x22\x3e\x3ccode\x3e\x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--\n  index: int\n  msg: string\n  time: string\n--\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22myTemplate\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22index\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e: \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22msg\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e Time: \x3c\/span\x3e\x3cspan class=\x22hljs-template-variable\x22\x3e\x22{{\x22time\x22}}\x22\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etext\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eview\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e用法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/  如果模板是写在单独的wxml文件，则要inport，引入。路径则是当前文件的相对路径。\n\n\x3cimport src=\x26quot;..\/cal\/calendar.wxml\x26quot;\x3e\x3c\/import\x3e\n\n\x3ctemplate is=\x26quot;myTemplate\x26quot; data=\x26quot;\x22{{\x22...item\x22}}\x22\x26quot;\/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xl\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/  如果模板是写在单独的wxml文件，则要inport，引入。路径则是当前文件的相对路径。\x3c\/span\x3e\n\n\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e src=\x3cspan class=\x22hljs-string\x22\x3e\x22..\/cal\/calendar.wxml\x22\x3c\/span\x3e\x26gt;\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e\x26gt;\n\n\x26lt;template \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22myTemplate\x22\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22{{\x22...item\x22}}\x22\x22\x3c\/span\x3e\/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e需要注意的是data数据是有单独的作用域的，只能使用data传入的数据。具体的理解就是：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22data: {\n    item: {\n        index: int\n        msg: string\n        time: string\n    },\n    index: int\n    msg: string\n    time: string\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3edat\x3cspan class=\x22hljs-variable\x22\x3ea:\x3c\/span\x3e {\n    item: {\n        \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eint\x3c\/span\x3e\n        ms\x3cspan class=\x22hljs-variable\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\n        time: \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-built_in\x22\x3eindex\x3c\/span\x3e: \x3cspan class=\x22hljs-keyword\x22\x3eint\x3c\/span\x3e\n    ms\x3cspan class=\x22hljs-variable\x22\x3eg:\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\n    time: \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e模板里面的数据实际显示的是item的属性，而不是和item同级的属性。\x3cbr\x3e模板还有一种用法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate is=\x26quot;myTemplate\x26quot; data=\x26quot;\x22{{\x22index,msg,time\x22}}\x22\x26quot;\/\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs d\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eis\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22myTemplate\x22\x3c\/span\x3e data=\x3cspan class=\x22hljs-string\x22\x3e\x22\x22{{\x22index,msg,time\x22}}\x22\x22\x3c\/span\x3e\/\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样就要传入模板中用到的三个变量，而不是item一个对象。模板渲染的结果则是最外层的index属性，而不是item的index属性值。\x3c\/p\x3e\n\x3cp\x3e...符号是扩展运算符，理解为将一个对象所以的属性展开传递给模板，这样的好处是不要传递多个，写出的代码更加简洁。扩展运算符是ES6的特性，有兴趣可以\x3ca href=\x22http:\/\/wiki.jikexueyuan.com\/project\/es6\/function.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e深入学习\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e如果运用扩展运算符给模板传入数据，像上面怎么去更新单个key的值呢？小程序提供了可以根据属性路径更新的方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 更新单个key，\nthis.setData({\n    index: 1\n});\n\/* 更新对象中的单个key\nitem: {\n   index: int\n   msg: string\n   time: string\n}\n*\/\nthis.setData({\n    \x27item.index\x27: 1\n});\n\n\/\/ path必须是字符串，不能是变量替代。下面是不行的\npath =  \x27item.index\x27;\nthis.setData({\n   path: 1\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更新单个key，\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n    index: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n});\n\x3cspan class=\x22hljs-comment\x22\x3e\/* 更新对象中的单个key\nitem: {\n   index: int\n   msg: string\n   time: string\n}\n*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n    \x3cspan class=\x22hljs-string\x22\x3e\x27item.index\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ path必须是字符串，不能是变量替代。下面是不行的\x3c\/span\x3e\npath =  \x3cspan class=\x22hljs-string\x22\x3e\x27item.index\x27\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setData({\n   path: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e虽然用法上是有点限制，但也避免了传入一堆的参数给模板。\x3c\/p\x3e\n\x3cp\x3e值得注意的是入参data的item必须是有初始化值，否则会报错。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e日历组件\x3c\/h2\x3e\n\x3cp\x3e所以利用template和js就可以打造一款组件了。先看下我所做的组件：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000010753996\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000010753996\x22 alt=\x22小程序日历\x22 title=\x22小程序日历\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e定义一个wxml文件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate name=\x26quot;calendar\x26quot;\x3e\n...\n\x3c\/template\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cpp\x22\x3e\x3ccode\x3e\x26lt;\x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e name=\x3cspan class=\x22hljs-string\x22\x3e\x22calendar\x22\x3c\/span\x3e\x26gt;\n...\n\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e定义一个js文件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nclass Calendar {\n...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\n\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCalendar\x3c\/span\x3e \x3c\/span\x3e{\n...\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e日期类有自己的作用域名，所以组件内部的事件导致数据更新的时候，还是要用页面更新数据的方法this.setData，所以必须要将页面对象传递给组件内部。\x3c\/p\x3e\n\x3cp\x3e页面调用组件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ this 是当前页面page对象，含有setData方法。\nvar calendar = new Calendar(this, function(date) {\n  that.setData({\n      date: date\n  })\n});\n\n\/\/ 当选择日期变化的时候，组件内部事件： this.pageCtx 则是page上下文，即上面实例化组件入参的this对象。\nchangeCalendarTab(e) {\n   this.pageCtx.setData({\n       \x27calendar_data.selectDateType\x27:\n           \x2be.target.dataset.tap\n   });\n   this.data.selectDateType = \x2be.target.dataset.tap;\n   this.changeCallBack \x26amp;\x26amp; this.changeCallBack(this.getCurrentSelectDate());\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs kotlin\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ this 是当前页面page对象，含有setData方法。\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e calendar = new Calendar(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, function(date) {\n  that.setData({\n      date: date\n  })\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当选择日期变化的时候，组件内部事件： this.pageCtx 则是page上下文，即上面实例化组件入参的this对象。\x3c\/span\x3e\nchangeCalendarTab(e) {\n   \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pageCtx.setData({\n       \x3cspan class=\x22hljs-string\x22\x3e\x27calendar_data.selectDateType\x27\x3c\/span\x3e:\n           \x2be.target.dataset.tap\n   });\n   \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e.selectDateType = \x2be.target.dataset.tap;\n   \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.changeCallBack \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.changeCallBack(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getCurrentSelectDate());\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e具体组件请参考我的github：\x3ca href=\x22https:\/\/github.com\/iamaddy\/calendar\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecalendar\x3c\/a\x3e。\x3c\/p\x3e\n\x3cp\x3e这样就完成了一个组件编写，任何需要用到的地方都可以引入了。小程序一个不太好的地方是没有包管理的概念，导致跨项目见的公共模块复用起来比较麻烦，下次进行单独讲解。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3eby addy 原创文章，欢迎转载，但希望全文转载，注明本文地址。本文地址：\x3ca href=\x22http:\/\/www.iamaddy.net\/2017\/06\/how-to-make-a-wxapp-component\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.iamaddy.net\/2017\/0...\x3c\/a\x3e\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e憋走，点赞是美意，打赏是鼓励~\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>如何写一个微信小程序组件</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010753991">https://segmentfault.com/a/1190000010753991</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/t0k3738i5pc/" target="_blank">https://alili.tech/archive/t0k3738i5pc/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>