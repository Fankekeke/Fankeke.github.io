<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="webpack externals 深入理解"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>webpack externals 深入理解 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/t7glydl0pk/",
				"appid": "1613049289050283", 
				"title": "webpack externals 深入理解 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-25T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/6rf481q50wr/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ps718ztwf3d/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&text=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&text=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&title=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&is_video=false&description=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&title=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&title=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&title=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft7glydl0pk%2f&title=webpack%20externals%20%e6%b7%b1%e5%85%a5%e7%90%86%e8%a7%a3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">webpack externals 深入理解</h1><div class="meta"><div class="postdate"><time datetime="2018-12-25" itemprop="datePublished">2018-12-25</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e按照官方文档的解释，如果我们想引用一个库，但是又不想让webpack打包，并且又不影响我们在程序中以CMD、AMD或者window\/global全局等方式进行使用，那就可以通过配置externals。这个功能主要是用在创建一个库的时候用的，但是也可以在我们项目开发中充分使用。\x3c\/p\x3e\n\x3cp\x3e假设：我们开发了一个自己的库，里面引用了lodash这个包，经过webpack打包的时候，发现如果把这个lodash包打入进去，打包文件就会非常大。那么我们就可以externals的方式引入。也就是说，自己的库本身不打包这个lodash，需要用户环境提供。\x3c\/p\x3e\n\x3cp\x3e使用lodash\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import _ from \x27lodash\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e _ \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27lodash\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e配置externals\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals: {\n  \x26quot;lodash\x26quot;: {\n        commonjs: \x26quot;lodash\x26quot;,\/\/如果我们的库运行在Node.js环境中，import _ from \x27lodash\x27等价于const _ = require(\x27lodash\x27)\n        commonjs2: \x26quot;lodash\x26quot;,\/\/同上\n        amd: \x26quot;lodash\x26quot;,\/\/如果我们的库使用require.js等加载,等价于 define([\x26quot;lodash\x26quot;], factory);\n        root: \x26quot;_\x26quot;\/\/如果我们的库在浏览器中使用，需要提供一个全局的变量‘_’，等价于 var _ = (window._) or (_);\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexternals: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e: {\n        \x3cspan class=\x22hljs-attr\x22\x3ecommonjs\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/如果我们的库运行在Node.js环境中，import _ from \x27lodash\x27等价于const _ = require(\x27lodash\x27)\x3c\/span\x3e\n        commonjs2: \x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/同上\x3c\/span\x3e\n        amd: \x3cspan class=\x22hljs-string\x22\x3e\x22lodash\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/如果我们的库使用require.js等加载,等价于 define([\x22lodash\x22], factory);\x3c\/span\x3e\n        root: \x3cspan class=\x22hljs-string\x22\x3e\x22_\x22\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/如果我们的库在浏览器中使用，需要提供一个全局的变量‘_’，等价于 var _ = (window._) or (_);\x3c\/span\x3e\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e总得来说，externals配置就是为了使\x3ccode\x3eimport _ from \x27lodash\x27\x3c\/code\x3e这句代码，在本身不引入lodash的情况下，能够在各个环境都能解释执行。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e有一点需要注意的是，假如lodash中在浏览器环境中不提供\x3ccode\x3e_\x3c\/code\x3e的全局变量，那么就没有办法使用。这个\x22_\x22是不能随便乱写的。如果外部库lodash提供的是全局变量\x3ccode\x3elodash\x3c\/code\x3e,那你就得使用\x3ccode\x3elodash\x3c\/code\x3e。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e如果你写的库要支持各种环境，你需要设置output中的libraryTarget为umd，也就是将打包的文件，生成为umd规范，适用于各种环境。libraryTarget和externals有藕断丝连的关系，后面会提到。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e下面进入正题，externals的配置有以下几种：array , object ,reg。这三种形式都可以传入，前者其实是对后者的包含。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.tangshuang.net\/3343.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e参考这里\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3eArray\x3c\/h3\x3e\n\x3cp\x3e数组内的每一个元素又可以是多种形式，包括object, reg, function, string\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals: [\n    { \/\/ ① object形式\n          jquery: \x27jQuery\x27, \/\/ \n        a: false, \/\/ 不是external，配置错误\n        b: true, \/\/ b 是 external， `module.exports = b`，适用于你所引用的库暴露出的变量和你所使用的库的名称一致的情况，比如moment\n        \x26quot;.\/c\x26quot;: \x26quot;c\x26quot;, \/\/ \x26quot;.\/c\x26quot; 是 external `module.exports = c`\n        \x26quot;.\/d\x26quot;: \x26quot;var d\x26quot;, \/\/ \x26quot;.\/d\x26quot; 是 external `module.exports = .\/d`  语法错误\n        \x26quot;.\/f\x26quot;: \x26quot;commonjs2 .\/a\/b\x26quot;, \/\/ \x26quot;.\/f\x26quot; 是 external `module.exports = require(\x26quot;.\/a\/b\x26quot;)`\n        \x26quot;.\/f\x26quot;: \x26quot;commonjs .\/a\/b\x26quot;, \/\/ ...和 commonjs2一样\n        \x26quot;.\/f\x26quot;: \x26quot;this .\/a\/b\x26quot;, \/\/ \x26quot;.\/f\x26quot; 是 external `(function() { module.exports = this[\x26quot;.\/a\/b\x26quot;]; }())`\n    },\n    \/\/ abc -\x3e require(\x26quot;abc\x26quot;)\n    \/^[a-z\\-0-9]\x2b$\/, \/\/ ② reg形式\n    function(context, request, callback) { \/\/ ③ function形式\n        \/\/ Every module prefixed with \x26quot;global-\x26quot; becomes external\n        \/\/ \x26quot;global-abc\x26quot; -\x3e abc\n        if(\/^global-\/.test(request))\n            return callback(null, \x26quot;var \x26quot; \x2b request.substr(7));\n        callback();\n    },\n    \x26quot;.\/e\x26quot; \/\/ \x26quot;.\/e\x26quot; 是 external ( require(\x26quot;.\/e\x26quot;) ) \/\/ ④ string形式\n]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexternals: [\n    { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ① object形式\x3c\/span\x3e\n          jquery: \x3cspan class=\x22hljs-string\x22\x3e\x27jQuery\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x3c\/span\x3e\n        a: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不是external，配置错误\x3c\/span\x3e\n        b: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ b 是 external， `module.exports = b`，适用于你所引用的库暴露出的变量和你所使用的库的名称一致的情况，比如moment\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/c\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22c\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/c\x22 是 external `module.exports = c`\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/d\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22var d\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/d\x22 是 external `module.exports = .\/d`  语法错误\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/f\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22commonjs2 .\/a\/b\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/f\x22 是 external `module.exports = require(\x22.\/a\/b\x22)`\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/f\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22commonjs .\/a\/b\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...和 commonjs2一样\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/f\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22this .\/a\/b\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/f\x22 是 external `(function() { module.exports = this[\x22.\/a\/b\x22]; }())`\x3c\/span\x3e\n    },\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ abc -\x26gt; require(\x22abc\x22)\x3c\/span\x3e\n    \/^[a-z\\\x3cspan class=\x22hljs-number\x22\x3e-0\x3c\/span\x3e\x3cspan class=\x22hljs-number\x22\x3e-9\x3c\/span\x3e]\x2b$\/, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ② reg形式\x3c\/span\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3econtext, request, callback\x3c\/span\x3e) \x3c\/span\x3e{ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ③ function形式\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Every module prefixed with \x22global-\x22 becomes external\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22global-abc\x22 -\x26gt; abc\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-regexp\x22\x3e\/^global-\/\x3c\/span\x3e.test(request))\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e callback(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22var \x22\x3c\/span\x3e \x2b request.substr(\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e));\n        callback();\n    },\n    \x3cspan class=\x22hljs-string\x22\x3e\x22.\/e\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/e\x22 是 external ( require(\x22.\/e\x22) ) \/\/ ④ string形式\x3c\/span\x3e\n]\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eObject\x3c\/h3\x3e\n\x3cp\x3eObject形式和上面类似，但是它里面一定是key: value的形式，所以像上面那种string的形式就不可能出现在object形式中。这种情况下使用的最多。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals:{ \n          jquery: \x27jQuery\x27, \/\/ \n        a: false, \/\/ 不是external，配置错误\n        b: true, \/\/ b 是 external， `module.exports = b`，适用于你所引用的库暴露出的变量和你所使用的库的名称一致的情况，比如moment\n        \x26quot;.\/c\x26quot;: \x26quot;c\x26quot;, \/\/ \x26quot;.\/c\x26quot; 是 external `module.exports = c`\n        \x26quot;.\/d\x26quot;: \x26quot;var d\x26quot;, \/\/ \x26quot;.\/d\x26quot; 是 external `module.exports = .\/d`  语法错误\n        \x26quot;.\/f\x26quot;: \x26quot;commonjs2 .\/a\/b\x26quot;, \/\/ \x26quot;.\/f\x26quot; 是 external `module.exports = require(\x26quot;.\/a\/b\x26quot;)`\n        \x26quot;.\/f\x26quot;: \x26quot;commonjs .\/a\/b\x26quot;, \/\/ ...和 commonjs2一样\n        \x26quot;.\/f\x26quot;: \x26quot;this .\/a\/b\x26quot;, \/\/ \x26quot;.\/f\x26quot; 是 external `(function() { module.exports = this[\x26quot;.\/a\/b\x26quot;]; }())`\n    },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexternals:{ \n          \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27jQuery\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x3c\/span\x3e\n        a: \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 不是external，配置错误\x3c\/span\x3e\n        b: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ b 是 external， `module.exports = b`，适用于你所引用的库暴露出的变量和你所使用的库的名称一致的情况，比如moment\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/c\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22c\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/c\x22 是 external `module.exports = c`\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/d\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22var d\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/d\x22 是 external `module.exports = .\/d`  语法错误\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/f\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22commonjs2 .\/a\/b\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/f\x22 是 external `module.exports = require(\x22.\/a\/b\x22)`\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/f\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22commonjs .\/a\/b\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...和 commonjs2一样\x3c\/span\x3e\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/f\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22this .\/a\/b\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x22.\/f\x22 是 external `(function() { module.exports = this[\x22.\/a\/b\x22]; }())`\x3c\/span\x3e\n    },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ereg就不介绍了，也就是正则匹配的形式。可以类比Array类型中的string。\x3c\/p\x3e\n\x3cp\x3eexternals引入jquery后，那么不管在代码中使用\x3ccode\x3eimport $ from \x27jquery\x27\x3c\/code\x3e还是\x3ccode\x3evar $ = require(\x27jquery\x27);\x3c\/code\x3e,这些代码都能在浏览器中很好的执行。这很好的验证了使用externals的情况。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e想引用一个库，但是又不想让webpack打包，并且又不影响我们在程序中以CMD、AMD或者window\/global全局等方式进行使用\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e那如果想要这样使用\x3ccode\x3e import $ from \x27jquery\x27\x3c\/code\x3e，并且想在Node环境中使用，那么就必须要使用这样\x3ccode\x3e    jquery: \x27commonjs2 jquery\x27\x3c\/code\x3e使用。这样webpack就会把你所需要的模块打包成\x3ccode\x3emodule.exports = require(\x27jquery\x27)\x3c\/code\x3e，可以再Node环境中使用。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eexternals\x3c\/code\x3e 支持以下模块上下文(module context)\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eglobal\x3c\/strong\x3e - 外部 library 能够作为全局变量使用。用户可以通过在 script 标签中引入来实现。这是 externals 的默认设置。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3ecommonjs\x3c\/strong\x3e - 用户(consumer)应用程序可能使用 CommonJS 模块系统，因此外部 library 应该使用 CommonJS 模块系统，并且应该是一个 CommonJS 模块。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3ecommonjs2\x3c\/strong\x3e - 类似上面几行，但导出的是 \x3ccode\x3emodule.exports.default\x3c\/code\x3e。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e\x3cstrong\x3eamd\x3c\/strong\x3e - 类似上面几行，但使用 AMD 模块系统。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e不同环境设置externals方式\x3c\/h3\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e如果你的代码想运行在Node环境中，那么你需要在external中添加前缀commonjs2或者commonjs\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals:{\n  react:\x27commonjs2 react\x27,\n  jquery:\x27commonjs2 jquery\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexternals:{\n  \x3cspan class=\x22hljs-attr\x22\x3ereact\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27commonjs2 react\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27commonjs2 jquery\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e如果需要requirejs等符合AMD规范的环境中加载，那就要添加amd\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals:{\n  react:\x27amd React\x27,\n  jquery:\x27amd jQuery\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexternals:{\n  \x3cspan class=\x22hljs-attr\x22\x3ereact\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27amd React\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27amd jQuery\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e\x3cp\x3e如果要在浏览器中运行，那么不用添加什么前缀，默认设置就是global。\x3c\/p\x3e\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals:{\n  react:\x27React\x27,\n  jquery:\x27jQuery\x27\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eexternals:{\n  \x3cspan class=\x22hljs-attr\x22\x3ereact\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27React\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3ejquery\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27jQuery\x27\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也可以这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22externals:[\x26quot;React\x26quot;,\x26quot;jQuery\x26quot;]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs avrasm\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-symbol\x22\x3eexternals:\x3c\/span\x3e[\x3cspan class=\x22hljs-string\x22\x3e\x22React\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22jQuery\x22\x3c\/span\x3e]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种方式配置下，就是配置你所引用你的库暴露出的全局变量。上面两种模式下或者说，如果你想运行代码在浏览器中，你所引用的包，必须暴露出一个全局变量。如果没有，这种方式不适合在浏览器下使用，可以尝试dll的方式。\x3c\/p\x3e\n\x3cp\x3e这里你可以看出，不同模式下，value是不一样的。2，3模式下，是要引入去全局变量，1模式是要加载包名。那如果这个包的包名和在浏览器下引入的全局变量一致，上面就可以写成一样了，比如moment。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e\n\x3ccode\x3eexternals\x3c\/code\x3e和\x3ccode\x3elibraryTarget\x3c\/code\x3e的关系\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3cp\x3elibraryTarget配置如何暴露 library。如果不设置library,那这个library就不暴露。就相当于一个自执行函数\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3eexternals是决定的是以哪种模式去加载所引入的额外的包\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3elibraryTarget决定了你的library运行在哪个环境，哪个环境也就决定了你哪种模式去加载所引入的额外的包。也就是说，externals应该和libraryTarget保持一致。library运行在浏览器中的，你设置externals的模式为commonjs，那代码肯定就运行不了了。\x3c\/p\x3e\x3c\/li\x3e\n\x3cli\x3e\x3cp\x3e如果是应用程序开发，一般是运行在浏览器环境libraryTarget可以不设置，externals默认的模式是global，也就是以全局变量的模式加载所引入外部的库。\x3c\/p\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e参考：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.css88.com\/doc\/webpack2\/guides\/author-libraries\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.css88.com\/doc\/webp...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.css88.com\/doc\/webpack2\/configuration\/externals\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.css88.com\/doc\/webp...\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.tangshuang.net\/3343.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.tangshuang.net\/334...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>webpack externals 深入理解</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012113011">https://segmentfault.com/a/1190000012113011</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/t7glydl0pk/" target="_blank">https://alili.tech/archive/t7glydl0pk/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>