<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="three.js 入门详解(二)"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>three.js 入门详解(二) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/t8p8w683km/",
				"appid": "1613049289050283", 
				"title": "three.js 入门详解(二) | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-24T02:30:06"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/cjtcf9f7b7f/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/el0qwk9hsr/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&text=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&text=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&title=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&is_video=false&description=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&title=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&title=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&title=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ft8p8w683km%2f&title=three.js%20%e5%85%a5%e9%97%a8%e8%af%a6%e8%a7%a3%28%e4%ba%8c%29"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">three.js 入门详解(二)</h1><div class="meta"><div class="postdate"><time datetime="2018-12-24" itemprop="datePublished">2018-12-24</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e9. 动画\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e在本章之前，所有画面都是静止的，本章将介绍如果使用Three.js进行动态画面的渲染。此外，将会介绍一个Three.js作者写的另外一个库，用来观测每秒帧数(\x3ccode\x3eFPS\x3c\/code\x3e)。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e9.1 实现动画效果\x3c\/h3\x3e\n\x3ch4\x3e9.1.1 动画原理\x3c\/h4\x3e\n\x3cul\x3e\n\x3cli\x3e在这里，我们将动态画面简称为动画(\x3ccode\x3eanimation\x3c\/code\x3e)。正如动画片的原理一样，动画的本质是利用了人眼的视觉暂留特性，快速地变换画面，从而产生物体在运动的假象。而对于Three.js程序而言，动画的实现也是通过在\x3ccode\x3e每秒钟多次重绘\x3c\/code\x3e画面实现的。\x3c\/li\x3e\n\x3cli\x3e为了衡量画面切换速度，引入了每秒帧数\x3ccode\x3eFPS(Frames Per Second)\x3c\/code\x3e的概念，是指\x3ccode\x3e每秒画面重绘的次数\x3c\/code\x3e。FPS越\x3ccode\x3e大\x3c\/code\x3e，则动画效果越\x3ccode\x3e平滑\x3c\/code\x3e，当FPS小于\x3ccode\x3e20\x3c\/code\x3e时，一般就能明显感受到画面的\x3ccode\x3e卡滞\x3c\/code\x3e现象。\x3c\/li\x3e\n\x3cli\x3e那么FPS是不是越大越好呢？其实也未必。当FPS足够大(\x3ccode\x3e比如达到60\x3c\/code\x3e)，再增加帧数人眼也不会感受到明显的变化，反而相应地就要消耗更多资源(比如电影的胶片就需要更长了，或是电脑刷新画面需要消耗计算资源等等)。因此，选择一个适中的FPS即可。\x3c\/li\x3e\n\x3cli\x3eNTSC标准的电视FPS是30，PAL标准的电视FPS是25，电影的FPS标准为24。而对于Three.js动画而言，一般FPS在\x3ccode\x3e30\x3c\/code\x3e到\x3ccode\x3e60\x3c\/code\x3e之间都是可取的。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch4\x3e9.1.2 setInterval方法\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e如果要设置特定的FPS(虽然严格来说，即使使用这种方法，JavaScript也不能保证帧数精确性)，可以使用JavaScript DOM定义的方法：\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22setInterval(fn,mesc)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3esetInterval(fn,mesc)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e其中，\x3ccode\x3efn\x3c\/code\x3e是每过\x3ccode\x3emsec\x3c\/code\x3e毫秒执行的\x3ccode\x3e函数\x3c\/code\x3e，如果将\x3ccode\x3efn\x3c\/code\x3e定义为重绘画面的函数，就能实现动画效果。\x3ccode\x3esetInterval\x3c\/code\x3e函数返回一个变量\x3ccode\x3etimer\x3c\/code\x3e，如果需要停止重绘，需要使用\x3ccode\x3eclearInterval\x3c\/code\x3e方法，并传入该变量\x3ccode\x3etimer\x3c\/code\x3e，具体的做法为：\x3c\/li\x3e\n\x3cli\x3e1、首先，在\x3ccode\x3einit\x3c\/code\x3e函数中定义每\x3ccode\x3e20毫秒\x3c\/code\x3e执行\x3ccode\x3edraw\x3c\/code\x3e函数的\x3ccode\x3esetInterval\x3c\/code\x3e，返回值记录在全局变量\x3ccode\x3etimer\x3c\/code\x3e中：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22timer = setInterval(draw,20);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3etimer = setInterval(draw,\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e2、在\x3ccode\x3edraw\x3c\/code\x3e函数中，我们首先设定在每帧中的变化(毕竟，如果每帧都是相同的，即使重绘再多次，还是不会有动画的效果)，这里我们让场景中的长方体绕\x3ccode\x3ey\x3c\/code\x3e轴转动。然后，执行渲染：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    \/\/ 每过20ms 就会执行一次这个函数，rotation.y就会加0.01\n    \/\/ 转完360度就会进行取余，所以就会一直转下去\n    mesh.rotation.y = (mesh.rotation.y \x2b 0.01) % (Math.PI * 2);\n    renderer.render(scene, camera);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 每过20ms 就会执行一次这个函数，rotation.y就会加0.01\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 转完360度就会进行取余，所以就会一直转下去\x3c\/span\x3e\n    mesh.rotation.y = (mesh.rotation.y \x2b \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e) % (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    renderer.render(scene, camera);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e这样，每\x3ccode\x3e20\x3c\/code\x3e毫秒就会调用一次\x3ccode\x3edraw\x3c\/code\x3e函数，改变长方体的旋转值，然后进行重绘。最终得到的效果就是\x3ccode\x3eFPS\x3c\/code\x3e为\x3ccode\x3e50\x3c\/code\x3e的旋转长方体。\x3c\/li\x3e\n\x3cli\x3e3、我们在HTML中添加两个按钮，一个是按下后停止动画，另一个是按下后继续动画：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbutton id=\x26quot;stopBtn\x26quot; onclick=\x26quot;stop()\x26quot;\x3eStop\x3c\/button\x3e \n\x3cbutton id=\x26quot;startBtn\x26quot; onclick=\x26quot;start()\x26quot;\x3eStart\x3c\/button\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stopBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stop()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStop\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22startBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22start()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStart\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e4、对应的\x3ccode\x3estop\x3c\/code\x3e和\x3ccode\x3estart\x3c\/code\x3e函数为：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function stop() {\n    if (timer !== null) {\n        clearInterval(timer);\n        timer = null;\n    }\n}\n\nfunction start() {\n    if (timer == null) {\n        clearInterval(timer);\n        timer = setInterval(draw, 20);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n        clearInterval(timer);\n        timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    }\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estart\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n        clearInterval(timer);\n        timer = setInterval(draw, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e完整代码：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3e动画效果\x3c\/title\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var mesh = null;\n        var timer = null;\n\n        function init() {\n            renderer = new THREE.WebGLRenderer({\n                canvas: document.getElementById(\x27mainCanvas\x27)\n            });\n            renderer.setClearColor(0x000000);\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);\n            camera.position.set(5, 5, 20);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            mesh = new THREE.Mesh(new THREE.CubeGeometry(1, 2, 3),\n                new THREE.MeshLambertMaterial({\n                    color: 0xffff00\n                }));\n            scene.add(mesh);\n\n            var light = new THREE.DirectionalLight(0xffffff);\n            light.position.set(20, 10, 5);\n            scene.add(light);\n\n            timer = setInterval(draw, 20);\n        }\n\n        function draw() {\n            mesh.rotation.y = (mesh.rotation.y \x2b 0.01) % (Math.PI * 2);\n            renderer.render(scene, camera);\n        }\n\n        function stop() {\n            if (timer !== null) {\n                clearInterval(timer);\n                timer = null;\n            }\n        }\n\n        function start() {\n            if (timer == null) {\n                clearInterval(timer);\n                timer = setInterval(draw, 20);\n\n            }\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init()\x26quot;\x3e\n    \x3ccanvas id=\x26quot;mainCanvas\x26quot; width=\x26quot;800px\x26quot; height=\x26quot;600px\x26quot;\x3e\x3c\/canvas\x3e\n    \x3cbutton id=\x26quot;stopBtn\x26quot; onclick=\x26quot;stop()\x26quot;\x3eStop\x3c\/button\x3e\n    \x3cbutton id=\x26quot;startBtn\x26quot; onclick=\x26quot;start()\x26quot;\x3eStart\x3c\/button\x3e\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e动画效果\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mesh = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({\n                \x3cspan class=\x22hljs-attr\x22\x3ecanvas\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27mainCanvas\x27\x3c\/span\x3e)\n            });\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0x000000\x3c\/span\x3e);\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            mesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e\n                }));\n            scene.add(mesh);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n            scene.add(light);\n\n            timer = setInterval(draw, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            mesh.rotation.y = (mesh.rotation.y \x2b \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e) % (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n            renderer.render(scene, camera);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n                clearInterval(timer);\n                timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n            }\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estart\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n                clearInterval(timer);\n                timer = setInterval(draw, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n\n            }\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mainCanvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800px\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22600px\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stopBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stop()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStop\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22startBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22start()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStart\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238932?w=503\x26amp;h=399\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238932?w=503\x26amp;h=399\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e9.1.3 requestAnimationFrame方法\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e大多数时候，我们并不在意多久重绘一次，这时候就适合用\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e方法了。它告诉浏览器在合适的时候调用指定函数，通常可能达到\x3ccode\x3e60FPS\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e\n\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e同样有对应的\x3ccode\x3ecancelAnimationFrame\x3c\/code\x3e取消动画：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function stop() {\n    if (timer !== null) {\n        cancelAnimationFrame(timer);\n        timer = null;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n        cancelAnimationFrame(timer);\n        timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e和\x3ccode\x3esetInterval\x3c\/code\x3e不同的是，由于\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e只请求一帧画面，因此，除了在\x3ccode\x3einit\x3c\/code\x3e函数中需要调用，在被其调用的函数中需要再次调用\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    mesh.rotation.y = (mesh.rotation.y \x2b 0.01) % (Math.PI * 2);\n    renderer.render(scene, camera);\n    timer = requestAnimationFrame(draw);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    mesh.rotation.y = (mesh.rotation.y \x2b \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e) % (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    renderer.render(scene, camera);\n    timer = requestAnimationFrame(draw);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e因为\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e较为“年轻”，因而一些老的浏览器使用的是试验期的名字：\x3ccode\x3emozRequestAnimationFrame\x3c\/code\x3e、\x3ccode\x3ewebkitRequestAnimationFrame\x3c\/code\x3e、\x3ccode\x3emsRequestAnimationFrame\x3c\/code\x3e，为了支持这些浏览器，我们最好在调用之前，先判断是否定义了\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e以及上述函数：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var requestAnimationFrame = window.requestAnimationFrame \n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame\n        || window.msRequestAnimationFrame;\nwindow.requestAnimationFrame = requestAnimationFrame;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e requestAnimationFrame = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame \n        || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.mozRequestAnimationFrame\n        || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webkitRequestAnimationFrame\n        || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.msRequestAnimationFrame;\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame = requestAnimationFrame;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e完整代码：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3e动画效果\x3c\/title\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var requestAnimationFrame = window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        window.requestAnimationFrame = requestAnimationFrame;\n\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var mesh = null;\n        var timer = null;\n\n        function init() {\n            renderer = new THREE.WebGLRenderer({\n                canvas: document.getElementById(\x27mainCanvas\x27)\n            });\n            renderer.setClearColor(0x000000);\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);\n            camera.position.set(5, 5, 20);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            mesh = new THREE.Mesh(new THREE.CubeGeometry(1, 2, 3),\n                new THREE.MeshLambertMaterial({\n                    color: 0xffff00\n                }));\n            scene.add(mesh);\n\n            var light = new THREE.DirectionalLight(0xffffff);\n            light.position.set(20, 10, 5);\n            scene.add(light);\n\n            id = requestAnimationFrame(draw);\n        }\n\n        function draw() {\n            mesh.rotation.y = (mesh.rotation.y \x2b 0.01) % (Math.PI * 2);\n            renderer.render(scene, camera);\n            timer = requestAnimationFrame(draw);\n        }\n\n        function stop() {\n            if (timer !== null) {\n                cancelAnimationFrame(timer);\n                timer = null;\n            }\n        }\n\n        function start() {\n            if (timer == null) {\n                timer = requestAnimationFrame(draw);\n            }\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init()\x26quot;\x3e\n    \x3ccanvas id=\x26quot;mainCanvas\x26quot; width=\x26quot;800px\x26quot; height=\x26quot;600px\x26quot;\x3e\x3c\/canvas\x3e\n    \x3cbutton id=\x26quot;stopBtn\x26quot; onclick=\x26quot;stop()\x26quot;\x3eStop\x3c\/button\x3e\n    \x3cbutton id=\x26quot;startBtn\x26quot; onclick=\x26quot;start()\x26quot;\x3eStart\x3c\/button\x3e\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e动画效果\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e requestAnimationFrame = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame ||\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.mozRequestAnimationFrame ||\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webkitRequestAnimationFrame ||\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.msRequestAnimationFrame;\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame = requestAnimationFrame;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mesh = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({\n                \x3cspan class=\x22hljs-attr\x22\x3ecanvas\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27mainCanvas\x27\x3c\/span\x3e)\n            });\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0x000000\x3c\/span\x3e);\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            mesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e\n                }));\n            scene.add(mesh);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n            scene.add(light);\n\n            id = requestAnimationFrame(draw);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            mesh.rotation.y = (mesh.rotation.y \x2b \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e) % (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n            renderer.render(scene, camera);\n            timer = requestAnimationFrame(draw);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n                cancelAnimationFrame(timer);\n                timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n            }\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estart\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n                timer = requestAnimationFrame(draw);\n            }\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mainCanvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800px\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22600px\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stopBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stop()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStop\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22startBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22start()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStart\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3esetInterval和requestAnimationFrame的区别：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3esetInterval\x3c\/code\x3e方法与\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e方法的区别较为微妙。一方面，最明显的差别表现在\x3ccode\x3esetInterval\x3c\/code\x3e可以手动设定\x3ccode\x3eFPS\x3c\/code\x3e，而\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e则会自动设定\x3ccode\x3eFPS\x3c\/code\x3e；但另一方面，即使是\x3ccode\x3esetInterval\x3c\/code\x3e也不能保证按照给定的FPS执行，在浏览器处理繁忙时，很可能低于设定值。当浏览器达不到设定的调用周期时，\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e采用跳过某些帧的方式来表现动画，虽然会有卡滞的效果但是整体速度不会拖慢，而\x3ccode\x3esetInterval\x3c\/code\x3e会因此使整个程序放慢运行，但是每一帧都会绘制出来；\x3c\/li\x3e\n\x3cli\x3e总而言之，\x3ccode\x3erequestAnimationFrame\x3c\/code\x3e适用于对于\x3ccode\x3e时间较为敏感\x3c\/code\x3e的环境（但是动画逻辑更加复杂），而\x3ccode\x3esetInterval\x3c\/code\x3e则可在保证程序的运算不至于导致延迟的情况下提供更加简洁的逻辑（无需自行处理时间）。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e9.2 使用stat.js记录FPS\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e\x3ccode\x3estat.js\x3c\/code\x3e是Three.js的作者\x3ccode\x3eMr.Doob\x3c\/code\x3e的另一个有用的JavaScript库。很多情况下，我们希望知道\x3ccode\x3e实时的FPS\x3c\/code\x3e信息，从而更好地监测动画效果。这时候，stat.js就能提供一个很好的帮助，它占据屏幕中的一小块位置(如左上角)，效果为：\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238933?w=80\x26amp;h=48\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238933?w=80\x26amp;h=48\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e，单击后显示每帧渲染时间：\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238934?w=80\x26amp;h=48\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238934?w=80\x26amp;h=48\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e首先，我们需要下载\x3ccode\x3estat.js\x3c\/code\x3e文件，可以在\x3ca href=\x22https:\/\/github.com\/mrdoob\/stats.js\/blob\/master\/build\/stats.min.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/mrdoob\/stats.js\/blob\/master\/build\/stats.min.js\x3c\/a\x3e找到。下载后，将其放在项目文件夹下，然后在HTML中引用：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;stat.js\x26quot;\x3e\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stat.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e在页面初始化的时候，对其初始化并将其添加至屏幕一角。这里，我们以左上角为例：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var stat = null;\n\nfunction init() {\n    stat = new Stats();\n    stat.domElement.style.position = \x27absolute\x27;\n    stat.domElement.style.left = \x270px\x27;\n    stat.domElement.style.top = \x270px\x27;\n    document.body.appendChild(stat.domElement);\n\n    \/\/ Three.js init ...\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stat = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    stat = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Stats();\n    stat.domElement.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27absolute\x27\x3c\/span\x3e;\n    stat.domElement.style.left = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n    stat.domElement.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(stat.domElement);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Three.js init ...\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e然后，在上一节介绍的动画重绘函数\x3ccode\x3edraw\x3c\/code\x3e中调用\x3ccode\x3estat.begin();\x3c\/code\x3e与\x3ccode\x3estat.end();\x3c\/code\x3e分别表示一帧的开始与结束：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    stat.begin();\n\n    mesh.rotation.y = (mesh.rotation.y \x2b 0.01) % (Math.PI * 2);\n    renderer.render(scene, camera);\n\n    stat.end();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    stat.begin();\n\n    mesh.rotation.y = (mesh.rotation.y \x2b \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e) % (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    renderer.render(scene, camera);\n\n    stat.end();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e完整代码：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3estats\x3c\/title\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;Stats.js\x26quot;\x3e\x3c\/script\x3e\n\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var requestAnimationFrame = window.requestAnimationFrame ||\n            window.mozRequestAnimationFrame ||\n            window.webkitRequestAnimationFrame ||\n            window.msRequestAnimationFrame;\n        window.requestAnimationFrame = requestAnimationFrame;\n\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var mesh = null;\n        var id = null;\n\n        var stat = null;\n\n        function init() {\n            stat = new Stats();\n            stat.domElement.style.position = \x27absolute\x27;\n            stat.domElement.style.left = \x270px\x27;\n            stat.domElement.style.top = \x270px\x27;\n            document.body.appendChild(stat.domElement);\n\n            renderer = new THREE.WebGLRenderer({\n                canvas: document.getElementById(\x27mainCanvas\x27)\n            });\n            renderer.setClearColor(0x000000);\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);\n            camera.position.set(5, 5, 20);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            mesh = new THREE.Mesh(new THREE.CubeGeometry(1, 2, 3),\n                new THREE.MeshLambertMaterial({\n                    color: 0xffff00\n                }));\n            scene.add(mesh);\n\n            var light = new THREE.DirectionalLight(0xffffff);\n            light.position.set(20, 10, 5);\n            scene.add(light);\n\n            timer = requestAnimationFrame(draw);\n        }\n\n        function draw() {\n            stat.begin();\n\n            mesh.rotation.y = (mesh.rotation.y \x2b 0.01) % (Math.PI * 2);\n            renderer.render(scene, camera);\n            timer = requestAnimationFrame(draw);\n\n            stat.end();\n        }\n\n        function stop() {\n            if (timer !== null) {\n                cancelAnimationFrame(timer);\n                timer = null;\n            }\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init()\x26quot;\x3e\n    \x3ccanvas id=\x26quot;mainCanvas\x26quot; width=\x26quot;800px\x26quot; height=\x26quot;600px\x26quot;\x3e\x3c\/canvas\x3e\n    \x3cbutton id=\x26quot;stopBtn\x26quot; onclick=\x26quot;stop()\x26quot;\x3eStop\x3c\/button\x3e\n\n\x3c\/body\x3e\n\n\x3c\/html\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3estats\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Stats.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e requestAnimationFrame = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame ||\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.mozRequestAnimationFrame ||\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webkitRequestAnimationFrame ||\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.msRequestAnimationFrame;\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame = requestAnimationFrame;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mesh = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e id = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stat = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            stat = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Stats();\n            stat.domElement.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27absolute\x27\x3c\/span\x3e;\n            stat.domElement.style.left = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n            stat.domElement.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(stat.domElement);\n\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({\n                \x3cspan class=\x22hljs-attr\x22\x3ecanvas\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27mainCanvas\x27\x3c\/span\x3e)\n            });\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0x000000\x3c\/span\x3e);\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            mesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e\n                }));\n            scene.add(mesh);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n            scene.add(light);\n\n            timer = requestAnimationFrame(draw);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            stat.begin();\n\n            mesh.rotation.y = (mesh.rotation.y \x2b \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e) % (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n            renderer.render(scene, camera);\n            timer = requestAnimationFrame(draw);\n\n            stat.end();\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n                cancelAnimationFrame(timer);\n                timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n            }\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mainCanvas\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ewidth\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22800px\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheight\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22600px\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecanvas\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stopBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stop()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eStop\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e9.3 弹球案例\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e本节我们将使用一个弹球的例子来完整地学习使用动画效果。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e1、首先，我们把通用的框架部分写好，按照之前的方法实现动画重绘函数，并加入stat.js库：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var requestAnimationFrame = window.requestAnimationFrame \n        || window.mozRequestAnimationFrame\n        || window.webkitRequestAnimationFrame\n        || window.msRequestAnimationFrame;\nwindow.requestAnimationFrame = requestAnimationFrame;\n\nvar stat;\nvar renderer;\nvar scene;\nvar camera;\nvar light;\n\nfunction init() {\n    stat = new Stats();\n    stat.domElement.style.position = \x27absolute\x27;\n    stat.domElement.style.left= \x270px\x27;\n    stat.domElement.style.top = \x270px\x27;\n    document.body.appendChild(stat.domElement);\n\n    renderer = new THREE.WebGLRenderer({\n        canvas: document.getElementById(\x27mainCanvas\x27)\n    });\n    scene = new THREE.Scene();\n\n    timer = requestAnimationFrame(draw);\n}\n\nfunction draw() {\n    stat.begin();\n\n    renderer.render(scene, camera);\n\n    timer = requestAnimationFrame(draw);\n\n    stat.end();\n}\n\nfunction stop() {\n    if (timer !== null) {\n        cancelAnimationFrame(timer);\n        timer = null;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e requestAnimationFrame = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame \n        || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.mozRequestAnimationFrame\n        || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webkitRequestAnimationFrame\n        || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.msRequestAnimationFrame;\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame = requestAnimationFrame;\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stat;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light;\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    stat = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Stats();\n    stat.domElement.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27absolute\x27\x3c\/span\x3e;\n    stat.domElement.style.left= \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n    stat.domElement.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(stat.domElement);\n\n    renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({\n        \x3cspan class=\x22hljs-attr\x22\x3ecanvas\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27mainCanvas\x27\x3c\/span\x3e)\n    });\n    scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n    timer = requestAnimationFrame(draw);\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    stat.begin();\n\n    renderer.render(scene, camera);\n\n    timer = requestAnimationFrame(draw);\n\n    stat.end();\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3estop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (timer !== \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n        cancelAnimationFrame(timer);\n        timer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e2、然后，为了实现弹球弹动的效果，我们创建一个\x3ccode\x3e球体\x3c\/code\x3e作为弹球模型，创建一个\x3ccode\x3e平面\x3c\/code\x3e作为弹球反弹的平面。为了在\x3ccode\x3edraw\x3c\/code\x3e函数中改变弹球的位置，我们可以声明一个全局变量\x3ccode\x3eballMesh\x3c\/code\x3e，以及弹球半径\x3ccode\x3eballRadius\x3c\/code\x3e。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var ballMesh;\nvar ballRadius = 0.5;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ballMesh;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ballRadius = \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e3、在\x3ccode\x3einit\x3c\/code\x3e函数中添加\x3ccode\x3e球体\x3c\/code\x3e和\x3ccode\x3e平面\x3c\/code\x3e，使弹球位于平面上，平面采用棋盘格图像作材质：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 加载贴图\ntexture = THREE.ImageUtils.loadTexture(\x27images\/chess.png\x27, {}, function() {\n    renderer.render(scene, camera);\n});\ntexture.wrapS = texture.wrapT = THREE.RepeatWrapping;\ntexture.repeat.set(4, 4);\n\n\/\/ 平面模型\nvar plane = new THREE.Mesh(new THREE.PlaneGeometry(8, 8),\n    new THREE.MeshLambertMaterial({\n        map: texture\n    }));\n\/\/ 沿x轴旋转-90度\nplane.rotation.x = Math.PI \/ -2;\nscene.add(plane);\n\n\/\/ 球模型\nballMesh = new THREE.Mesh(new THREE.SphereGeometry(ballRadius, 40, 16),\n    new THREE.MeshLambertMaterial({\n        color: 0xffff00\n    }));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载贴图\x3c\/span\x3e\ntexture = THREE.ImageUtils.loadTexture(\x3cspan class=\x22hljs-string\x22\x3e\x27images\/chess.png\x27\x3c\/span\x3e, {}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    renderer.render(scene, camera);\n});\ntexture.wrapS = texture.wrapT = THREE.RepeatWrapping;\ntexture.repeat.set(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 平面模型\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PlaneGeometry(\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n        \x3cspan class=\x22hljs-attr\x22\x3emap\x3c\/span\x3e: texture\n    }));\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 沿x轴旋转-90度\x3c\/span\x3e\nplane.rotation.x = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e-2\x3c\/span\x3e;\nscene.add(plane);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 球模型\x3c\/span\x3e\nballMesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.SphereGeometry(ballRadius, \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e),\n    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n        \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e\n    }));\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e4、为了记录弹球的状态，我们至少需要\x3ccode\x3e位置\x3c\/code\x3e、\x3ccode\x3e速度\x3c\/code\x3e、\x3ccode\x3e加速度\x3c\/code\x3e三个矢量，为了简单起见，这里弹球只做竖直方向上的自由落体运动，因此位置、速度、加速度只要各用一个变量表示。其中，位置就是\x3ccode\x3eballMesh.position.y\x3c\/code\x3e，不需要额外的变量，因此我们在全局声明\x3ccode\x3e速度v\x3c\/code\x3e和\x3ccode\x3e加速度a\x3c\/code\x3e：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var v = 0;\nvar a = -0.01;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e-0.01\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e这里，\x3ccode\x3ea = -0.01\x3c\/code\x3e代表每帧小球向\x3ccode\x3ey\x3c\/code\x3e方向\x3ccode\x3e负方向\x3c\/code\x3e移动\x3ccode\x3e0.01\x3c\/code\x3e个单位。\x3c\/li\x3e\n\x3cli\x3e5、一开始，弹球从高度为\x3ccode\x3emaxHeight\x3c\/code\x3e(自己定义的一个高度)处自由下落，掉落到平面上时会\x3ccode\x3e反弹\x3c\/code\x3e，并且速度有\x3ccode\x3e损耗\x3c\/code\x3e。当速度很小的时候，弹球会在平面上作振幅微小的抖动，所以，当速度足够小时，我们需要让弹球停止跳动。因此，定义一个全局变量表示是否在运动，初始值为\x3ccode\x3efalse\x3c\/code\x3e：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var isMoving = false;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isMoving = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e6、在HTML中定义一个按钮，点击按钮时，弹球从最高处下落：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbutton id=\x26quot;dropBtn\x26quot; onclick=\x26quot;drop()\x26quot;\x3eDrop\x3c\/button\x3e\n\n\x3cscript\x3e\n    function drop() {\n        isMoving = true;\n        ballMesh.position.y = maxHeight;\n        v = 0;\n    }\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22dropBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drop()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eDrop\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22actionscript\x22\x3e\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrop\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n        isMoving = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n        ballMesh.position.y = maxHeight;\n        v = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e7、下面就是最关键的函数了，在draw函数中，需要判断当前的isMoving值，并且更新小球的速度和位置：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    stat.begin();\n    if (isMoving) {\n        ballMesh.position.y \x2b= v;\n        \/\/ a= -0.01\n        v \x2b= a;\n        \/\/ 当小球从定义的高度落到小球停在平面时的高度的时候\n        if (ballMesh.position.y \x3c= ballRadius) {\n            \/\/ 让小球弹起来\n            v = -v * 0.9;\n        }\n        \/\/ 当小球的速度小于设定值的时候\n        if (Math.abs(v) \x3c 0.001) {\n            \/\/ 让它停下来\n            isMoving = false;\n            ballMesh.position.y = ballRadius;\n        }\n    }\n    renderer.render(scene, camera);\n    requestAnimationFrame(draw);\n    stat.end();\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    stat.begin();\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isMoving) {\n        ballMesh.position.y \x2b= v;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ a= -0.01\x3c\/span\x3e\n        v \x2b= a;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当小球从定义的高度落到小球停在平面时的高度的时候\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ballMesh.position.y \x26lt;= ballRadius) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 让小球弹起来\x3c\/span\x3e\n            v = -v * \x3cspan class=\x22hljs-number\x22\x3e0.9\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当小球的速度小于设定值的时候\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(v) \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0.001\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 让它停下来\x3c\/span\x3e\n            isMoving = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n            ballMesh.position.y = ballRadius;\n        }\n    }\n    renderer.render(scene, camera);\n    requestAnimationFrame(draw);\n    stat.end();\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\x3cstrong\x3e完整代码：\x3c\/strong\x3e\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3ctitle\x3e弹弹弹\x3c\/title\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;Stats.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cstyle\x3e\n        * {\n            margin: 0;\n            padding: 0;\n        }\n        \n        body {\n            position: fixed;\n        }\n        \n        button {\n            position: fixed;\n            left: 50%;\n            margin-left: -50px;\n            bottom: 20%;\n            width: 100px;\n            height: 30px;\n            background-color: #d3d3d3;\n            border: none;\n            border-radius: 15px;\n            outline: none;\n            font-size: 18px;\n            font-weight: 700;\n            color: #333;\n            box-shadow: -1px -1px 1px #fff, 1px 1px 1px #000;\n        }\n    \x3c\/style\x3e\n    \x3cscript\x3e\n        var stat;\n        var renderer;\n        var scene;\n        var camera;\n        var light;\n        var texture;\n        var ballMesh;\n        var ballRadius = 0.5;\n\n        var isMoving = false;\n        var maxHeight = 5;\n        var v = 0;\n        var a = -0.01;\n\n        function init() {\n            \/\/ 处理requireAnimationFrame兼容性\n            var requestAnimationFrame = window.requestAnimationFrame ||\n                window.mozRequestAnimationFrame ||\n                window.webkitRequestAnimationFrame ||\n                window.msRequestAnimationFrame;\n            window.requestAnimationFrame = requestAnimationFrame;\n\n            \/\/ FPS 插件\n            stat = new Stats();\n            stat.domElement.style.position = \x27absolute\x27;\n            stat.domElement.style.left = \x270px\x27;\n            stat.domElement.style.top = \x270px\x27;\n            document.body.appendChild(stat.domElement);\n\n            \/\/ 渲染器\n            renderer = new THREE.WebGLRenderer({\n                antialias: true\n            });\n            width = window.innerWidth;\n            height = window.innerHeight;\n            renderer.setSize(width, height);\n            document.body.appendChild(renderer.domElement);\n            renderer.setClearColor(0xd3d3d3);\n\n            \/\/ 场景\n            scene = new THREE.Scene();\n\n            \/\/ 相机\n            camera = new THREE.OrthographicCamera(width \/ -128, width \/ 128, height \/ 128, height \/ -128, 1, 1000);\n            camera.position.set(10, 15, 25);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            \/\/ 添加光照\n            light = new THREE.DirectionalLight(0xffffff);\n            light.position.set(-10, 30, 25);\n            scene.add(light);\n\n            \/\/ 加载贴图\n            texture = THREE.ImageUtils.loadTexture(\x27images\/chess.png\x27, {}, function() {\n                renderer.render(scene, camera);\n            });\n            texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n            texture.repeat.set(4, 4);\n\n            \/\/ 平面模型\n            var plane = new THREE.Mesh(new THREE.PlaneGeometry(8, 8),\n                new THREE.MeshLambertMaterial({\n                    map: texture\n                }));\n            \/\/ 沿x轴旋转-90度\n            plane.rotation.x = Math.PI \/ -2;\n            scene.add(plane);\n\n            \/\/ 球模型\n            ballMesh = new THREE.Mesh(new THREE.SphereGeometry(ballRadius, 40, 16),\n                new THREE.MeshLambertMaterial({\n                    color: 0xffff00\n                }));\n            \/\/ 设置球的位置\n            ballMesh.position.y = ballRadius;\n            scene.add(ballMesh);\n\n            \/\/ 坐标轴\n            \/* drawAxes(scene);\n            function drawAxes(scene) {\n                \/\/ x-axis\n                var xGeo = new THREE.Geometry();\n                xGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n                xGeo.vertices.push(new THREE.Vector3(7, 0, 0));\n                var xMat = new THREE.LineBasicMaterial({\n                    color: 0xff0000\n                });\n                var xAxis = new THREE.Line(xGeo, xMat);\n                scene.add(xAxis);\n\n                \/\/ y-axis\n                var yGeo = new THREE.Geometry();\n                yGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n                yGeo.vertices.push(new THREE.Vector3(0, 7, 0));\n                var yMat = new THREE.LineBasicMaterial({\n                    color: 0x00ff00\n                });\n                var yAxis = new THREE.Line(yGeo, yMat);\n                scene.add(yAxis);\n\n                \/\/ z-axis\n                var zGeo = new THREE.Geometry();\n                zGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n                zGeo.vertices.push(new THREE.Vector3(0, 0, 7));\n                var zMat = new THREE.LineBasicMaterial({\n                    color: 0x00ccff\n                });\n                var zAxis = new THREE.Line(zGeo, zMat);\n                scene.add(zAxis);\n\n            } *\/\n            requestAnimationFrame(draw);\n        }\n\n        \/\/ 计算球运动的速度和位置\n        function draw() {\n            stat.begin();\n            if (isMoving) {\n                ballMesh.position.y \x2b= v;\n                \/\/ a= -0.01\n                v \x2b= a;\n                \/\/ 当小球从定义的高度落到小球停在平面时的高度的时候\n                if (ballMesh.position.y \x3c= ballRadius) {\n                    \/\/ 让小球弹起来\n                    v = -v * 0.9;\n                }\n                \/\/ 当小球的速度小于设定值的时候\n                if (Math.abs(v) \x3c 0.001) {\n                    \/\/ 让它停下来\n                    isMoving = false;\n                    ballMesh.position.y = ballRadius;\n                }\n            }\n            renderer.render(scene, camera);\n            requestAnimationFrame(draw);\n            stat.end();\n        }\n        \/\/ 触发函数\n        function drop() {\n            isMoving = true;\n            \/\/ 小球起落位置\n            ballMesh.position.y = maxHeight;\n            \/\/ 加速度为0\n            v = 0;\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init();\x26quot;\x3e\n    \x3cbutton id=\x26quot;dropBtn\x26quot; onclick=\x26quot;drop();\x26quot;\x3eDrop\x3c\/button\x3e\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e弹弹弹\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22Stats.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n        * {\n            \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n        \n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: fixed;\n        }\n        \n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebutton\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: fixed;\n            \x3cspan class=\x22hljs-attribute\x22\x3eleft\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e50%\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3emargin-left\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e50px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ebottom\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e20%\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e100px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e30px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ebackground-color\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#d3d3d3\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3eborder\x3c\/span\x3e: none;\n            \x3cspan class=\x22hljs-attribute\x22\x3eborder-radius\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e15px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3eoutline\x3c\/span\x3e: none;\n            \x3cspan class=\x22hljs-attribute\x22\x3efont-size\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e18px\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3efont-weight\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e700\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e#333\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3ebox-shadow\x3c\/span\x3e: -\x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e -\x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e#fff\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e1px\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e#000\x3c\/span\x3e;\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stat;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e texture;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ballMesh;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ballRadius = \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e isMoving = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e maxHeight = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e v = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e-0.01\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理requireAnimationFrame兼容性\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e requestAnimationFrame = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame ||\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.mozRequestAnimationFrame ||\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.webkitRequestAnimationFrame ||\n                \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.msRequestAnimationFrame;\n            \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame = requestAnimationFrame;\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ FPS 插件\x3c\/span\x3e\n            stat = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Stats();\n            stat.domElement.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27absolute\x27\x3c\/span\x3e;\n            stat.domElement.style.left = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n            stat.domElement.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x270px\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(stat.domElement);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染器\x3c\/span\x3e\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({\n                \x3cspan class=\x22hljs-attr\x22\x3eantialias\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n            });\n            width = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.innerWidth;\n            height = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.innerHeight;\n            renderer.setSize(width, height);\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(renderer.domElement);\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0xd3d3d3\x3c\/span\x3e);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 场景\x3c\/span\x3e\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 相机\x3c\/span\x3e\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(width \/ \x3cspan class=\x22hljs-number\x22\x3e-128\x3c\/span\x3e, width \/ \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e, height \/ \x3cspan class=\x22hljs-number\x22\x3e128\x3c\/span\x3e, height \/ \x3cspan class=\x22hljs-number\x22\x3e-128\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 添加光照\x3c\/span\x3e\n            light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e-10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            scene.add(light);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加载贴图\x3c\/span\x3e\n            texture = THREE.ImageUtils.loadTexture(\x3cspan class=\x22hljs-string\x22\x3e\x27images\/chess.png\x27\x3c\/span\x3e, {}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                renderer.render(scene, camera);\n            });\n            texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n            texture.repeat.set(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 平面模型\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PlaneGeometry(\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3emap\x3c\/span\x3e: texture\n                }));\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 沿x轴旋转-90度\x3c\/span\x3e\n            plane.rotation.x = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e-2\x3c\/span\x3e;\n            scene.add(plane);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 球模型\x3c\/span\x3e\n            ballMesh = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.SphereGeometry(ballRadius, \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e\n                }));\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置球的位置\x3c\/span\x3e\n            ballMesh.position.y = ballRadius;\n            scene.add(ballMesh);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 坐标轴\x3c\/span\x3e\n            \x3cspan class=\x22hljs-comment\x22\x3e\/* drawAxes(scene);\n            function drawAxes(scene) {\n                \/\/ x-axis\n                var xGeo = new THREE.Geometry();\n                xGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n                xGeo.vertices.push(new THREE.Vector3(7, 0, 0));\n                var xMat = new THREE.LineBasicMaterial({\n                    color: 0xff0000\n                });\n                var xAxis = new THREE.Line(xGeo, xMat);\n                scene.add(xAxis);\n\n                \/\/ y-axis\n                var yGeo = new THREE.Geometry();\n                yGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n                yGeo.vertices.push(new THREE.Vector3(0, 7, 0));\n                var yMat = new THREE.LineBasicMaterial({\n                    color: 0x00ff00\n                });\n                var yAxis = new THREE.Line(yGeo, yMat);\n                scene.add(yAxis);\n\n                \/\/ z-axis\n                var zGeo = new THREE.Geometry();\n                zGeo.vertices.push(new THREE.Vector3(0, 0, 0));\n                zGeo.vertices.push(new THREE.Vector3(0, 0, 7));\n                var zMat = new THREE.LineBasicMaterial({\n                    color: 0x00ccff\n                });\n                var zAxis = new THREE.Line(zGeo, zMat);\n                scene.add(zAxis);\n\n            } *\/\x3c\/span\x3e\n            requestAnimationFrame(draw);\n        }\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 计算球运动的速度和位置\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            stat.begin();\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isMoving) {\n                ballMesh.position.y \x2b= v;\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ a= -0.01\x3c\/span\x3e\n                v \x2b= a;\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当小球从定义的高度落到小球停在平面时的高度的时候\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (ballMesh.position.y \x26lt;= ballRadius) {\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 让小球弹起来\x3c\/span\x3e\n                    v = -v * \x3cspan class=\x22hljs-number\x22\x3e0.9\x3c\/span\x3e;\n                }\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 当小球的速度小于设定值的时候\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(v) \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0.001\x3c\/span\x3e) {\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 让它停下来\x3c\/span\x3e\n                    isMoving = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n                    ballMesh.position.y = ballRadius;\n                }\n            }\n            renderer.render(scene, camera);\n            requestAnimationFrame(draw);\n            stat.end();\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 触发函数\x3c\/span\x3e\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrop\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            isMoving = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 小球起落位置\x3c\/span\x3e\n            ballMesh.position.y = maxHeight;\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 加速度为0\x3c\/span\x3e\n            v = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init();\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22dropBtn\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drop();\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3eDrop\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238935?w=503\x26amp;h=486\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238935?w=503\x26amp;h=486\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e10. 外部模型\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e前面我们了解到，使用Three.js创建常见几何体是十分方便的，但是对于人或者动物这样非常复杂的模型使用几何体组合就非常麻烦了。因此，Three.js允许用户导入由3ds Max等工具制作的三维模型，并添加到场景中。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e本章以3ds Max为例，介绍如何导入外部模型。\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e10.1 支持格式\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3eThree.js有一系列导入外部文件的辅助函数，是在\x3ccode\x3ethree.js\x3c\/code\x3e之外的，使用前需要额外下载，在\x3ca href=\x22https:\/\/github.com\/mrdoob\/three.js\/tree\/master\/examples\/js\/loaders\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/mrdoob\/three.js\/tree\/master\/examples\/js\/loaders\x3c\/a\x3e可以找到,选择对应的模型加载器，系在下来。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3e*.obj\x3c\/code\x3e是最常用的模型格式，导入\x3ccode\x3e*.obj\x3c\/code\x3e文件需要\x3ccode\x3eOBJLoader.js\x3c\/code\x3e；导入带\x3ccode\x3e*.mtl\x3c\/code\x3e材质的\x3ccode\x3e*.obj\x3c\/code\x3e文件需要\x3ccode\x3eMTLLoader.js\x3c\/code\x3e以及\x3ccode\x3eOBJMTLLoader.js\x3c\/code\x3e。另有\x3ccode\x3ePLYLoader.js\x3c\/code\x3e、\x3ccode\x3eSTLLoader.js\x3c\/code\x3e等分别对应不同格式的加载器，可以根据模型格式自行选择。\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e目前，支持的模型格式有：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ccode\x3e*.obj\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.obj, *.mtl\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.dae\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.ctm\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.ply\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.stl\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.wrl\x3c\/code\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ccode\x3e*.vtk\x3c\/code\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e10.2 无材质的模型\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e本节中，我们将将导出的没有材质的模型使用Three.js导入场景中。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e首先，下载\x3ca href=\x22https:\/\/raw.githubusercontent.com\/mrdoob\/three.js\/master\/examples\/js\/loaders\/OBJLoader.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eOBJLoader.js\x3c\/a\x3e并在HTML的\x26lt;head\x26gt;中使用：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;OBJLoader.js\x26quot;\x3e\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22OBJLoader.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e然后，我们需要准备一个\x3ccode\x3e*.obj\x3c\/code\x3e模型，在\x3ccode\x3einit\x3c\/code\x3e函数中，创建\x3ccode\x3eloader\x3c\/code\x3e变量，用于导入模型：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var loader = new THREE.OBJLoader();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OBJLoader();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e\n\x3ccode\x3eloader\x3c\/code\x3e导入模型的时候，接受两个参数，第一个表示\x3ccode\x3e模型路径\x3c\/code\x3e，第二个表示\x3ccode\x3e完成导入后的回调函数\x3c\/code\x3e，一般我们需要在这个回调函数中将导入的模型\x3ccode\x3e添加\x3c\/code\x3e到场景中。\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22loader.load(\x27..\/lib\/port.obj\x27, function(obj) {\n    \/\/储存到全局变量中\n    mesh = obj; \n    scene.add(obj);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eloader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/lib\/port.obj\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/储存到全局变量中\x3c\/span\x3e\n    mesh = obj; \n    scene.add(obj);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e可以看到一个没有材质的茶壶\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238936?w=503\x26amp;h=380\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238936?w=503\x26amp;h=380\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e我们在重绘函数中让茶壶旋转：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function draw() {\n    renderer.render(scene, camera);\n\n    mesh.rotation.y \x2b= 0.01;\n    if (mesh.rotation.y \x3e Math.PI * 2) {\n        mesh.rotation.y -= Math.PI * 2;\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    renderer.render(scene, camera);\n\n    mesh.rotation.y \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mesh.rotation.y \x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n        mesh.rotation.y -= \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e可以看到在某些角度时，好像有些面片没有被绘制出来，因而后方的茶嘴似乎穿越到前方了：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238937?w=503\x26amp;h=380\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238937?w=503\x26amp;h=380\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e这是由于默认的情况下，只有正面的面片被绘制，而如果需要\x3ccode\x3e双面绘制\x3c\/code\x3e，需要这样设置：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var loader = new THREE.OBJLoader();\nloader.load(\x27port.obj\x27, function(obj) {\n    obj.traverse(function(child) {\n        if (child instanceof THREE.Mesh) {\n            child.material.side = THREE.DoubleSide;\n        }\n    });\n\n    mesh = obj;\n    scene.add(obj);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OBJLoader();\nloader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.obj\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n    obj.traverse(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (child \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e THREE.Mesh) {\n            child.material.side = THREE.DoubleSide;\n        }\n    });\n\n    mesh = obj;\n    scene.add(obj);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e完整代码：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;OBJLoader.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cstyle\x3e\n        * {\n            margin: 0;\n            padding: 0;\n        }\n        \n        body {\n            position: fixed;\n        }\n    \x3c\/style\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var mesh = null;\n        var id = null;\n\n        function init() {\n            renderer = new THREE.WebGLRenderer();\n            renderer.setSize(800, 600);\n            document.body.appendChild(renderer.domElement);\n            renderer.setClearColor(0x000000);\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-8, 8, 6, -6, 0.1, 100);\n            camera.position.set(15, 25, 25);\n            camera.lookAt(new THREE.Vector3(0, 2, 0));\n            scene.add(camera);\n\n            var loader = new THREE.OBJLoader();\n            loader.load(\x27port.obj\x27, function(obj) {\n                obj.traverse(function(child) {\n                    if (child instanceof THREE.Mesh) {\n                        child.material.side = THREE.DoubleSide;\n                    }\n                });\n\n                mesh = obj;\n                scene.add(obj);\n            });\n\n            var light = new THREE.DirectionalLight(0xffffff);\n            light.position.set(20, 10, 5);\n            scene.add(light);\n\n            id = setInterval(draw, 20);\n        }\n\n        function draw() {\n            renderer.render(scene, camera);\n\n            mesh.rotation.y \x2b= 0.01;\n            if (mesh.rotation.y \x3e Math.PI * 2) {\n                mesh.rotation.y -= Math.PI * 2;\n            }\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init()\x26quot;\x3e\n\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22OBJLoader.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n        * {\n            \x3cspan class=\x22hljs-attribute\x22\x3emargin\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-attribute\x22\x3epadding\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n        }\n        \n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-attribute\x22\x3eposition\x3c\/span\x3e: fixed;\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mesh = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e id = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer();\n            renderer.setSize(\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(renderer.domElement);\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0x000000\x3c\/span\x3e);\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OBJLoader();\n            loader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.obj\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n                obj.traverse(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (child \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e THREE.Mesh) {\n                        child.material.side = THREE.DoubleSide;\n                    }\n                });\n\n                mesh = obj;\n                scene.add(obj);\n            });\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n            scene.add(light);\n\n            id = setInterval(draw, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer.render(scene, camera);\n\n            mesh.rotation.y \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (mesh.rotation.y \x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n                mesh.rotation.y -= \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            }\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238938?w=503\x26amp;h=402\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238938?w=503\x26amp;h=402\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e10.3 有材质的模型\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e模型的材质可以有两种定义方式，一种是在\x3ccode\x3e代码中\x3c\/code\x3e导入模型后设置材质，另一种是在建模软件中\x3ccode\x3e导出材质\x3c\/code\x3e信息。下面，我们将分别介绍这两种方法。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch4\x3e10.3.1 代码中设置材质\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e这种方法与上一节类似，不同之处在于回调函数中设置模型的材质：\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var loader = new THREE.OBJLoader();\nloader.load(\x27port.obj\x27, function(obj) {\n    obj.traverse(function(child) {\n        if (child instanceof THREE.Mesh) {\n            \/* 修改这里以下的代码 *\/\n            child.material = new THREE.MeshLambertMaterial({\n                color: 0xffff00,\n                side: THREE.DoubleSide\n            });\n            \/* 修改这里以上的代码 *\/\n        }\n    });\n\n    mesh = obj;\n    scene.add(obj);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e loader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OBJLoader();\nloader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.obj\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobj\x3c\/span\x3e) \x3c\/span\x3e{\n    obj.traverse(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (child \x3cspan class=\x22hljs-keyword\x22\x3einstanceof\x3c\/span\x3e THREE.Mesh) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/* 修改这里以下的代码 *\/\x3c\/span\x3e\n            child.material = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e,\n                \x3cspan class=\x22hljs-attr\x22\x3eside\x3c\/span\x3e: THREE.DoubleSide\n            });\n            \x3cspan class=\x22hljs-comment\x22\x3e\/* 修改这里以上的代码 *\/\x3c\/span\x3e\n        }\n    });\n\n    mesh = obj;\n    scene.add(obj);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238939?w=503\x26amp;h=380\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238939?w=503\x26amp;h=380\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3e10.3.2 建模软件中设置材质\x3c\/h4\x3e\n\x3cblockquote\x3e\x3cp\x3e导出3D模型的时候，选择导出\x3ccode\x3eport.obj\x3c\/code\x3e模型文件以及\x3ccode\x3eport.mtl\x3c\/code\x3e材质文件。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e现在，我们不再使用\x3ccode\x3eOBJLoader.js\x3c\/code\x3e，而是使用\x3ccode\x3eMTLLoader.js\x3c\/code\x3e与\x3ccode\x3eOBJMTLLoader.js\x3c\/code\x3e，并且要按该\x3ccode\x3e顺序\x3c\/code\x3e引用：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;MTLLoader.js\x26quot;\x3e\x3c\/script\x3e\n\x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;OBJMTLLoader.js\x26quot;\x3e\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22MTLLoader.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22OBJMTLLoader.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e调用的方法也略有不同：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var mtlLoader = new THREE.MTLLoader();\nmtlLoader.setPath(\x27\x27);\nmtlLoader.load(\x27port.mtl\x27, function(materials) {\n    materials.preload();\n    \/\/ model loader\n    var objLoader = new THREE.OBJLoader();\n    objLoader.setMaterials(materials);\n    objLoader.setPath(\x27\x27);\n    objLoader.load(\x27port.obj\x27, function(object) {\n        object.position.y = -95;\n        \/\/ if has object, add to scene\n        if (object.children.length \x3e 0) {\n            scene.add(object.children[0]);\n        }\n    });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mtlLoader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MTLLoader();\nmtlLoader.setPath(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\nmtlLoader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.mtl\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ematerials\x3c\/span\x3e) \x3c\/span\x3e{\n    materials.preload();\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ model loader\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objLoader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OBJLoader();\n    objLoader.setMaterials(materials);\n    objLoader.setPath(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n    objLoader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.obj\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobject\x3c\/span\x3e) \x3c\/span\x3e{\n        object.position.y = \x3cspan class=\x22hljs-number\x22\x3e-95\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ if has object, add to scene\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (object.children.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            scene.add(object.children[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n        }\n    });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e完整代码：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n\x3chtml\x3e\n\n\x3chead\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;MTLLoader.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;OBJLoader.js\x26quot;\x3e\x3c\/script\x3e\n\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var mesh = null;\n        var id = null;\n\n        function init() {\n            renderer = new THREE.WebGLRenderer();\n            renderer.setSize(800, 600);\n            document.body.appendChild(renderer.domElement);\n            renderer.setClearColor(0x000000);\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-8, 8, 6, -6, 0.1, 100);\n            camera.position.set(15, 25, 25);\n            camera.lookAt(new THREE.Vector3(0, 2, 0));\n            scene.add(camera);\n\n            \/\/ material loader\n            var mtlLoader = new THREE.MTLLoader();\n            mtlLoader.setPath(\x27\x27);\n            mtlLoader.load(\x27port.mtl\x27, function(materials) {\n                materials.preload();\n                \/\/ model loader\n                var objLoader = new THREE.OBJLoader();\n                objLoader.setMaterials(materials);\n                objLoader.setPath(\x27\x27);\n                objLoader.load(\x27port.obj\x27, function(object) {\n                    object.position.y = -95;\n                    \/\/ if has object, add to scene\n                    if (object.children.length \x3e 0) {\n                        scene.add(object.children[0]);\n                    }\n\n                });\n                mesh = materials;\n                console.log(mesh);\n            });\n            var light = new THREE.DirectionalLight(0xffffff);\n            light.position.set(20, 10, 5);\n            scene.add(light);\n\n            id = setInterval(draw, 20);\n        }\n\n        function draw() {\n            renderer.render(scene, camera);\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init()\x26quot;\x3e\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22MTLLoader.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22OBJLoader.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mesh = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e id = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer();\n            renderer.setSize(\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(renderer.domElement);\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0x000000\x3c\/span\x3e);\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ material loader\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mtlLoader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MTLLoader();\n            mtlLoader.setPath(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n            mtlLoader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.mtl\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ematerials\x3c\/span\x3e) \x3c\/span\x3e{\n                materials.preload();\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ model loader\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e objLoader = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OBJLoader();\n                objLoader.setMaterials(materials);\n                objLoader.setPath(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n                objLoader.load(\x3cspan class=\x22hljs-string\x22\x3e\x27port.obj\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eobject\x3c\/span\x3e) \x3c\/span\x3e{\n                    object.position.y = \x3cspan class=\x22hljs-number\x22\x3e-95\x3c\/span\x3e;\n                    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ if has object, add to scene\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (object.children.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n                        scene.add(object.children[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]);\n                    }\n\n                });\n                mesh = materials;\n                \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(mesh);\n            });\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e);\n            scene.add(light);\n\n            id = setInterval(draw, \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer.render(scene, camera);\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e导出时自带的效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238940?w=503\x26amp;h=380\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238940?w=503\x26amp;h=380\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e11. 光与影\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e图像渲染的丰富效果很大程度上也要归功于光与影的利用。真实世界中的光影效果非常复杂，但是其本质—光的传播原理却又是非常单一的，这便是自然界繁简相成的又一例证。为了使计算机模拟丰富的光照效果，人们提出了几种不同的光源模型（\x3ccode\x3e环境光\x3c\/code\x3e、\x3ccode\x3e平行光\x3c\/code\x3e、\x3ccode\x3e点光源\x3c\/code\x3e、\x3ccode\x3e聚光灯\x3c\/code\x3e等），在不同场合下组合利用，将能达到很好的光照效果。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e在Three.js中，光源与阴影的创建和使用是十分方便的。在学会了如何控制光影的基本方法之后，如果能将其灵活应用，将能使场景的渲染效果更加丰富逼真。在本章中，我们将探讨四种常用的光源（环境光、点光源、平行光、聚光灯）和阴影带来的效果，以及如何去创建使用光影。\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e11.1 环境光(AmbientLight)\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e环境光是指\x3ccode\x3e场景整体\x3c\/code\x3e的光照效果，是由于场景内若干光源的多次反射形成的亮度一致的效果，通常用来为整个场景指定一个基础亮度。因此，环境光没有明确的光源位置，在各处形成的亮度也是一致的。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e在设置环境光时，只需指定光的颜色：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var light = new THREE.AmbientLight(hex);\nscene.add(light);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.AmbientLight(hex);\nscene.add(light);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e其中\x3ccode\x3ehex\x3c\/code\x3e是十六进制的RGB颜色信息，如红色表示为\x3ccode\x3e0xff0000\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e但是，如果此时场景中没有物体，只添加了这个环境光，那么渲染的结果仍然是一片黑。所以，我们添加两个长方体看下效果：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 创建一个绿色的正方体\nvar greenCube = new THREE.Mesh(new THREE.CubeGeometry(2, 2, 2),\n        new THREE.MeshLambertMaterial({color: 0x00ff00}));\ngreenCube.position.x = 3;\nscene.add(greenCube);\n\n\/\/ 创建一个白色的正方体\nvar whiteCube = new THREE.Mesh(new THREE.CubeGeometry(2, 2, 2),\n        new THREE.MeshLambertMaterial({color: 0xffffff}));\nwhiteCube.position.x = -3;\nscene.add(whiteCube);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建一个绿色的正方体\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e greenCube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0x00ff00\x3c\/span\x3e}));\ngreenCube.position.x = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\nscene.add(greenCube);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建一个白色的正方体\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e whiteCube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e),\n        \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e}));\nwhiteCube.position.x = \x3cspan class=\x22hljs-number\x22\x3e-3\x3c\/span\x3e;\nscene.add(whiteCube);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果如图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238941?w=503\x26amp;h=340\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238941?w=503\x26amp;h=340\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e如果想让环境光暗些，可以将其设置为\x3ccode\x3enew THREE.AmbientLight(0xcccccc)\x3c\/code\x3e等，效果为：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238942?w=503\x26amp;h=340\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238942?w=503\x26amp;h=340\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e11.2 点光源(PointLight)\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e点光源是不计光源大小，可以看作一个点发出的光源。点光源照到不同物体表面的亮度是线性递减的，因此，离点光源距离越\x3ccode\x3e远\x3c\/code\x3e的物体会显得越\x3ccode\x3e暗\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e点光源的构造函数是：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22THREE.PointLight(hex, intensity, distance);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eTHREE.PointLight(hex, intensity, distance);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e其中，\x3ccode\x3ehex\x3c\/code\x3e是光源十六进制的颜色值；\x3ccode\x3eintensity\x3c\/code\x3e是亮度，缺省值为\x3ccode\x3e1\x3c\/code\x3e，表示\x3ccode\x3e100%\x3c\/code\x3e亮度；\x3ccode\x3edistance\x3c\/code\x3e是光源最远照射到的距离，缺省值为\x3ccode\x3e0\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e创建点光源并将其添加到场景中的完整做法是：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var light = new THREE.PointLight(0xffffff, 2, 100);\nlight.position.set(0, 1.5, 2);\nscene.add(light);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PointLight(\x3cspan class=\x22hljs-number\x22\x3e0xffffff\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\nlight.position.set(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1.5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\nscene.add(light);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238943?w=503\x26amp;h=340\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238943?w=503\x26amp;h=340\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e注意，这里光在每个面上的亮度是不同的，对于每个三角面片，将根据三个顶点的亮度进行插值。\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e11.3 平行光(DirectionalLight)\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e我们都知道，太阳光常常被看作平行光，这是因为相对地球上物体的尺度而言，太阳离我们的距离足够远。对于任意平行的平面，平行光照射的亮度都是相同的，而与平面所在位置无关。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e平行光的构造函数是：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22THREE.DirectionalLight(hex, intensity)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eTHREE.DirectionalLight(hex, intensity)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e其中，\x3ccode\x3ehex\x3c\/code\x3e是光源十六进制的颜色值；\x3ccode\x3eintensity\x3c\/code\x3e是亮度，缺省值为\x3ccode\x3e1\x3c\/code\x3e，表示\x3ccode\x3e100%\x3c\/code\x3e亮度。\x3c\/li\x3e\n\x3cli\x3e此外，对于平行光而言，设置光源\x3ccode\x3e位置\x3c\/code\x3e尤为重要。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var light = new THREE.DirectionalLight();\nlight.position.set(2, 5, 3);\nscene.add(light);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight();\nlight.position.set(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\nscene.add(light);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e注意，这里设置光源位置并不意味着所有光从\x3ccode\x3e(2, 5, 3)\x3c\/code\x3e点射出（如果是的话，就成了点光源），而是意味着，平行光将以\x3ccode\x3e矢量(-2, -5, -3)\x3c\/code\x3e的方向照射到所有平面。因此，平面亮度与平面的位置无关，而只与平面的\x3ccode\x3e法向量\x3c\/code\x3e相关。只要平面是平行的，那么得到的光照也一定是相同的。\x3c\/li\x3e\n\x3cli\x3e示例代码：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript\x3e\n        var stat;\n        var renderer;\n        var scene;\n        var camera;\n\n        function init() {\n\n            \/\/ 渲染器\n            renderer = new THREE.WebGLRenderer({\n                antialias: true\n            });\n            renderer.setSize(800, 600);\n            document.body.appendChild(renderer.domElement);\n            renderer.setClearColor(0x000000);\n\n            \/\/ 场景\n            scene = new THREE.Scene();\n\n            \/\/ 相机\n            var camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);\n            camera.position.set(5, 15, 25);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            \/\/ 平行光\n            var light = new THREE.DirectionalLight();\n            light.position.set(2, 5, 3);\n            scene.add(light);\n            \n            \/\/ 右侧正方体\n            var rightCube = new THREE.Mesh(new THREE.CubeGeometry(1, 1, 1),\n                new THREE.MeshLambertMaterial({\n                    color: 0x00ff00\n                }));\n            rightCube.position.x = 1;\n            rightCube.position.y = -1;\n            scene.add(rightCube);\n            \n            \/\/ 左侧正方体\n            var leftCube = new THREE.Mesh(new THREE.CubeGeometry(1, 1, 1),\n                new THREE.MeshLambertMaterial({\n                    color: 0x00ff00\n                }));\n            leftCube.position.x = -1;\n            scene.add(leftCube);\n\n            \/\/ 渲染\n            renderer.render(scene, camera);\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init();\x26quot;\x3e\n\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e stat;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染器\x3c\/span\x3e\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer({\n                \x3cspan class=\x22hljs-attr\x22\x3eantialias\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n            });\n            renderer.setSize(\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(renderer.domElement);\n            renderer.setClearColor(\x3cspan class=\x22hljs-number\x22\x3e0x000000\x3c\/span\x3e);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 场景\x3c\/span\x3e\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 相机\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 平行光\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.DirectionalLight();\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n            scene.add(light);\n            \n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 右侧正方体\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e rightCube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0x00ff00\x3c\/span\x3e\n                }));\n            rightCube.position.x = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n            rightCube.position.y = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n            scene.add(rightCube);\n            \n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 左侧正方体\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e leftCube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0x00ff00\x3c\/span\x3e\n                }));\n            leftCube.position.x = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n            scene.add(leftCube);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染\x3c\/span\x3e\n            renderer.render(scene, camera);\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init();\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238944?w=503\x26amp;h=340\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238944?w=503\x26amp;h=340\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3e11.4 聚光灯(SpotLight)\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e可以看出，聚光灯是一种特殊的点光源，它能够朝着一个方向投射光线。聚光灯投射出的是类似\x3ccode\x3e圆锥形\x3c\/code\x3e的光线，这与我们现实中看到的聚光灯是一致的。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\x3cli\x3e其构造函数为：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22THREE.SpotLight(hex, intensity, distance, angle, exponent)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3eTHREE.SpotLight(hex, intensity, distance, angle, exponent)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e相比点光源，多了\x3ccode\x3eangle\x3c\/code\x3e和\x3ccode\x3eexponent\x3c\/code\x3e两个参数。\x3ccode\x3eangle\x3c\/code\x3e是聚光灯的张角，缺省值是\x3ccode\x3eMath.PI \/ 3\x3c\/code\x3e，最大值是\x3ccode\x3eMath.PI \/ 2\x3c\/code\x3e；\x3ccode\x3eexponent\x3c\/code\x3e是光强在偏离\x3ccode\x3etarget\x3c\/code\x3e的衰减指数（target需要在之后定义，缺省值为\x3ccode\x3e(0, 0, 0)\x3c\/code\x3e），缺省值是\x3ccode\x3e10\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e在调用构造函数之后，除了设置光源本身的位置，一般还需要设置\x3ccode\x3etarget\x3c\/code\x3e：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22light.position.set(x1, y1, z1);\nlight.target.position.set(x2, y2, z2);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3elight.position.set(x1, y1, z1);\nlight.target.position.set(x2, y2, z2);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e除了设置\x3ccode\x3elight.target.position\x3c\/code\x3e的方法外，如果想让聚光灯跟着某一物体移动（就像真的聚光灯！），可以\x3ccode\x3etarget\x3c\/code\x3e指定为\x3ccode\x3e该物体\x3c\/code\x3e：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var cube = new THREE.Mesh(new THREE.CubeGeometry(1, 1, 1),\n                    new THREE.MeshLambertMaterial({color: 0x00ff00}));\n\nvar light = new THREE.SpotLight(0xffff00, 1, 100, Math.PI \/ 6, 25);\nlight.target = cube;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n                    \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0x00ff00\x3c\/span\x3e}));\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.SpotLight(\x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\nlight.target = cube;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e示例代码：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var cube = null;\n        var alpha = 0;\n\n        function init() {\n            renderer = new THREE.WebGLRenderer();\n            renderer.setSize(800, 600);\n\n            document.body.appendChild(renderer.domElement);\n\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);\n            camera.position.set(5, 15, 25);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            \/\/ 平面\n            var plane = new THREE.Mesh(new THREE.PlaneGeometry(8, 8, 16, 16),\n                new THREE.MeshLambertMaterial({\n                    color: 0xcccccc\n                }));\n            plane.rotation.x = -Math.PI \/ 2;\n            plane.position.y = -1;\n            plane.receiveShadow = true;\n            scene.add(plane);\n\n            \/\/ 立方体\n            cube = new THREE.Mesh(new THREE.CubeGeometry(1, 1, 1),\n                new THREE.MeshLambertMaterial({\n                    color: 0x00ff00,\n                }));\n            cube.position.x = 2;\n            scene.add(cube);\n\n            \/\/ 聚光灯\n            var light = new THREE.SpotLight(0xffff00, 1, 100, Math.PI \/ 6, 25);\n            light.position.set(2, 5, 3);\n            light.target = cube;\n            scene.add(light);\n\n            \/\/ 环境光\n            var ambient = new THREE.AmbientLight(0x666666);\n            scene.add(ambient);\n\n            requestAnimationFrame(draw);\n        }\n\n        function draw() {\n            alpha \x2b= 0.01;\n            if (alpha \x3e Math.PI * 2) {\n                alpha -= Math.PI * 2;\n            }\n\n            cube.position.set(2 * Math.cos(alpha), 0, 2 * Math.sin(alpha));\n\n            renderer.render(scene, camera);\n\n            requestAnimationFrame(draw);\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init();\x26quot;\x3e\n\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cube = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e alpha = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer();\n            renderer.setSize(\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e);\n\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(renderer.domElement);\n\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 平面\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PlaneGeometry(\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xcccccc\x3c\/span\x3e\n                }));\n            plane.rotation.x = -\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            plane.position.y = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n            plane.receiveShadow = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            scene.add(plane);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 立方体\x3c\/span\x3e\n            cube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0x00ff00\x3c\/span\x3e,\n                }));\n            cube.position.x = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            scene.add(cube);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 聚光灯\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.SpotLight(\x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n            light.target = cube;\n            scene.add(light);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 环境光\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ambient = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.AmbientLight(\x3cspan class=\x22hljs-number\x22\x3e0x666666\x3c\/span\x3e);\n            scene.add(ambient);\n\n            requestAnimationFrame(draw);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            alpha \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (alpha \x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n                alpha -= \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            }\n\n            cube.position.set(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(alpha), \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(alpha));\n\n            renderer.render(scene, camera);\n\n            requestAnimationFrame(draw);\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init();\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238945?w=503\x26amp;h=383\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238945?w=503\x26amp;h=383\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e11.5 阴影\x3c\/h3\x3e\n\x3cblockquote\x3e\x3cp\x3e明暗是相对的，阴影的形成也就是因为比周围获得的光照更少。因此，要形成阴影，光源必不可少。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cul\x3e\n\x3cli\x3e在Three.js中，能形成阴影的光源只有\x3ccode\x3eTHREE.DirectionalLight\x3c\/code\x3e与\x3ccode\x3eTHREE.SpotLight\x3c\/code\x3e；而相对地，能表现阴影效果的材质只有\x3ccode\x3eTHREE.LambertMaterial\x3c\/code\x3e与\x3ccode\x3eTHREE.PhongMaterial\x3c\/code\x3e。因而在设置光源和材质的时候，一定要注意这一点。\x3c\/li\x3e\n\x3cli\x3e\x3cstrong\x3e下面，我们以聚光灯为例，在之前的基础上增加阴影效果。\x3c\/strong\x3e\x3c\/li\x3e\n\x3cli\x3e首先，我们需要在初始化时，告诉渲染器渲染阴影：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22renderer.shadowMapEnabled = true;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3erenderer.shadowMapEnabled = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e然后，对于光源以及所有要产生阴影的物体调用：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 上面的案例，产生阴影的物体是正方体\ncube.castShadow = true;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 上面的案例，产生阴影的物体是正方体\x3c\/span\x3e\ncube.castShadow = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e对于接收阴影的物体调用：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 接收阴影的物体是平面\nplan.receiveShadow = true;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 接收阴影的物体是平面\x3c\/span\x3e\nplan.receiveShadow = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e比如场景中一个\x3ccode\x3e平面\x3c\/code\x3e上有一个\x3ccode\x3e正方体\x3c\/code\x3e，想要让聚光灯照射在正方体上，产生的阴影投射在平面上，那么就需要对聚光灯和正方体调用\x3ccode\x3ecastShadow = true\x3c\/code\x3e，对于平面调用\x3ccode\x3ereceiveShadow = true\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e以上就是产生阴影效果的必要步骤了，不过通常还需要设置光源的阴影相关属性，才能正确显示出阴影效果。\x3c\/li\x3e\n\x3cli\x3e对于\x3ccode\x3e聚光灯\x3c\/code\x3e，需要设置\x3ccode\x3eshadowCameraNear\x3c\/code\x3e、\x3ccode\x3eshadowCameraFar\x3c\/code\x3e、\x3ccode\x3eshadowCameraFov\x3c\/code\x3e三个值，类比我们在第二章学到的透视投影照相机，只有介于\x3ccode\x3eshadowCameraNear\x3c\/code\x3e与\x3ccode\x3eshadowCameraFar\x3c\/code\x3e之间的物体将产生阴影，\x3ccode\x3eshadowCameraFov\x3c\/code\x3e表示张角。\x3c\/li\x3e\n\x3cli\x3e对于\x3ccode\x3e平行光\x3c\/code\x3e，需要设置\x3ccode\x3eshadowCameraNear\x3c\/code\x3e、\x3ccode\x3eshadowCameraFar\x3c\/code\x3e、\x3ccode\x3eshadowCameraLeft\x3c\/code\x3e、\x3ccode\x3eshadowCameraRight\x3c\/code\x3e、\x3ccode\x3eshadowCameraTop\x3c\/code\x3e以及\x3ccode\x3eshadowCameraBottom\x3c\/code\x3e六个值，相当于正交投影照相机的六个面。同样，只有在这六个面围成的长方体内的物体才会产生阴影效果。\x3c\/li\x3e\n\x3cli\x3e为了看到阴影照相机的位置，通常可以在调试时开启\x3ccode\x3elight.shadowCameraVisible = true\x3c\/code\x3e。\x3c\/li\x3e\n\x3cli\x3e如果想要修改阴影的深浅，可以通过设置\x3ccode\x3eshadowDarkness\x3c\/code\x3e，该值的范围是\x3ccode\x3e0\x3c\/code\x3e到\x3ccode\x3e1\x3c\/code\x3e，越小越浅。\x3c\/li\x3e\n\x3cli\x3e另外，这里实现阴影效果的方法是\x3ccode\x3eShadow Mapping\x3c\/code\x3e，即阴影是作为渲染前计算好的贴图贴上去的，因而会受到贴图\x3ccode\x3e像素大小\x3c\/code\x3e的限制。所以可以通过设置\x3ccode\x3eshadowMapWidth\x3c\/code\x3e与\x3ccode\x3eshadowMapHeight\x3c\/code\x3e值控制贴图的大小，来改变阴影的精确度。\x3c\/li\x3e\n\x3cli\x3e而如果想实现\x3ccode\x3e软阴影\x3c\/code\x3e的效果，可以通过\x3ccode\x3erenderer.shadowMapSoft = true;\x3c\/code\x3e方便地实现。\x3c\/li\x3e\n\x3cli\x3e完整代码：\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!DOCTYPE html\x3e\n\x3chtml lang=\x26quot;en\x26quot;\x3e\n\n\x3chead\x3e\n    \x3cmeta charset=\x26quot;UTF-8\x26quot;\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot; src=\x26quot;js\/three.js\x26quot;\x3e\x3c\/script\x3e\n    \x3cscript type=\x26quot;text\/javascript\x26quot;\x3e\n        var scene = null;\n        var camera = null;\n        var renderer = null;\n\n        var cube = null;\n        var alpha = 0;\n\n        function init() {\n            renderer = new THREE.WebGLRenderer();\n            renderer.setSize(800, 600);\n\n            document.body.appendChild(renderer.domElement);\n            renderer.shadowMapEnabled = true;\n\n\n            scene = new THREE.Scene();\n\n            camera = new THREE.OrthographicCamera(-5, 5, 3.75, -3.75, 0.1, 100);\n            camera.position.set(5, 15, 25);\n            camera.lookAt(new THREE.Vector3(0, 0, 0));\n            scene.add(camera);\n\n            var plane = new THREE.Mesh(new THREE.PlaneGeometry(8, 8, 16, 16),\n                new THREE.MeshLambertMaterial({\n                    color: 0xcccccc\n                }));\n            plane.rotation.x = -Math.PI \/ 2;\n            plane.position.y = -1;\n            plane.receiveShadow = true;\n            scene.add(plane);\n\n            cube = new THREE.Mesh(new THREE.CubeGeometry(1, 1, 1),\n                new THREE.MeshLambertMaterial({\n                    color: 0x00ff00\n                }));\n            cube.position.x = 2;\n            cube.castShadow = true;\n            scene.add(cube);\n\n            var light = new THREE.SpotLight(0xffff00, 1, 100, Math.PI \/ 6, 25);\n            light.position.set(2, 5, 3);\n            light.target = cube;\n            light.castShadow = true;\n\n            light.shadowCameraNear = 2;\n            light.shadowCameraFar = 10;\n            light.shadowCameraFov = 30;\n\n            light.shadowMapWidth = 1024;\n            light.shadowMapHeight = 1024;\n            light.shadowDarkness = 0.3;\n\n            scene.add(light);\n\n            \/\/ ambient light\n            var ambient = new THREE.AmbientLight(0x666666);\n            scene.add(ambient);\n\n            requestAnimationFrame(draw);\n        }\n\n        function draw() {\n            alpha \x2b= 0.01;\n            if (alpha \x3e Math.PI * 2) {\n                alpha -= Math.PI * 2;\n            }\n\n            cube.position.set(2 * Math.cos(alpha), 0, 2 * Math.sin(alpha));\n\n            renderer.render(scene, camera);\n\n            requestAnimationFrame(draw);\n        }\n    \x3c\/script\x3e\n\x3c\/head\x3e\n\n\x3cbody onload=\x26quot;init();\x26quot;\x3e\n\n\x3c\/body\x3e\n\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-meta\x22\x3e\x26lt;!DOCTYPE html\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3elang\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22en\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22UTF-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22js\/three.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\/javascript\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22javascript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e scene = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e camera = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e renderer = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e cube = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e alpha = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einit\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            renderer = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.WebGLRenderer();\n            renderer.setSize(\x3cspan class=\x22hljs-number\x22\x3e800\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e600\x3c\/span\x3e);\n\n            \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(renderer.domElement);\n            renderer.shadowMapEnabled = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n\n            scene = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Scene();\n\n            camera = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.OrthographicCamera(\x3cspan class=\x22hljs-number\x22\x3e-5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e-3.75\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\n            camera.position.set(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            camera.lookAt(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Vector3(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e));\n            scene.add(camera);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e plane = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.PlaneGeometry(\x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0xcccccc\x3c\/span\x3e\n                }));\n            plane.rotation.x = -\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            plane.position.y = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n            plane.receiveShadow = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            scene.add(plane);\n\n            cube = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.Mesh(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.CubeGeometry(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e),\n                \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.MeshLambertMaterial({\n                    \x3cspan class=\x22hljs-attr\x22\x3ecolor\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e0x00ff00\x3c\/span\x3e\n                }));\n            cube.position.x = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            cube.castShadow = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            scene.add(cube);\n\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e light = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.SpotLight(\x3cspan class=\x22hljs-number\x22\x3e0xffff00\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e25\x3c\/span\x3e);\n            light.position.set(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n            light.target = cube;\n            light.castShadow = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n\n            light.shadowCameraNear = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            light.shadowCameraFar = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n            light.shadowCameraFov = \x3cspan class=\x22hljs-number\x22\x3e30\x3c\/span\x3e;\n\n            light.shadowMapWidth = \x3cspan class=\x22hljs-number\x22\x3e1024\x3c\/span\x3e;\n            light.shadowMapHeight = \x3cspan class=\x22hljs-number\x22\x3e1024\x3c\/span\x3e;\n            light.shadowDarkness = \x3cspan class=\x22hljs-number\x22\x3e0.3\x3c\/span\x3e;\n\n            scene.add(light);\n\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ambient light\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ambient = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e THREE.AmbientLight(\x3cspan class=\x22hljs-number\x22\x3e0x666666\x3c\/span\x3e);\n            scene.add(ambient);\n\n            requestAnimationFrame(draw);\n        }\n\n        \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edraw\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            alpha \x2b= \x3cspan class=\x22hljs-number\x22\x3e0.01\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (alpha \x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n                alpha -= \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI * \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            }\n\n            cube.position.set(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(alpha), \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(alpha));\n\n            renderer.render(scene, camera);\n\n            requestAnimationFrame(draw);\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonload\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22init();\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e效果图：\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012238946?w=503\x26amp;h=383\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012238946?w=503\x26amp;h=383\x22 alt=\x22image\x22 title=\x22image\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e补充问题\x3c\/h2\x3e\n\x3cp\x3e\x26lt;span id = \x22jump\x22\x26gt;\x26lt;\/span\x26gt;\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e本地服务器\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e1、\x3ca href=\x22https:\/\/nodejs.org\/en\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e下载安装\x3c\/a\x3enode.js，因为node.js自带npm\x3c\/li\x3e\n\x3cli\x3e2、打开电脑命令行工具，输入\x3ccode\x3enpm install -g live-server\x3c\/code\x3e 全局安装\x3c\/li\x3e\n\x3cli\x3e3、在需要运行文件的文件夹下，按住shift键，点击鼠标右键\x3ccode\x3e在此处打开命令窗口\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e4、输入\x3ccode\x3elive-server\x3c\/code\x3e回车\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/www.npmjs.com\/package\/live-server\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enmp官方说明\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>three.js 入门详解(二)</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012238927">https://segmentfault.com/a/1190000012238927</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/t8p8w683km/" target="_blank">https://alili.tech/archive/t8p8w683km/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>