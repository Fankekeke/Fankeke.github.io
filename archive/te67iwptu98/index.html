<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="自动 Import 工具，前端打字员的自我救赎"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>自动 Import 工具，前端打字员的自我救赎 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/te67iwptu98/",
				"appid": "1613049289050283", 
				"title": "自动 Import 工具，前端打字员的自我救赎 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-18T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/02f077f7lrrm/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/icaaxbb2r9d/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&text=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&text=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&title=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&is_video=false&description=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&title=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&title=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&title=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fte67iwptu98%2f&title=%e8%87%aa%e5%8a%a8%20Import%20%e5%b7%a5%e5%85%b7%ef%bc%8c%e5%89%8d%e7%ab%af%e6%89%93%e5%ad%97%e5%91%98%e7%9a%84%e8%87%aa%e6%88%91%e6%95%91%e8%b5%8e"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">自动 Import 工具，前端打字员的自我救赎</h1><div class="meta"><div class="postdate"><time datetime="2018-12-18" itemprop="datePublished">2018-12-18</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch1 id=\x22articleHeader0\x22\x3e自动 import 工具\x3c\/h1\x3e\n\x3cp\x3e先推荐两个干货，关于正则的\x3cbr\x3e\x3ca href=\x22https:\/\/regexr.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregexr\x3c\/a\x3e，\x3ca href=\x22https:\/\/regexper.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregexper\x3c\/a\x3e，前者验证正则是否和预期一样，后者以图的形式表达正则，有助于理解天书般的别人写的正则\x3c\/p\x3e\n\x3cp\x3e作为一个前端打字员，一个经常遇到的场景就是在\x3cstrong\x3e路由文件中引入模块\x3c\/strong\x3e，比如这样\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012792021?w=1610\x26amp;h=404\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012792021?w=1610\x26amp;h=404\x22 alt=\x22Screenshot_2018-01-11 01.02.52_b1KSEv\x22 title=\x22Screenshot_2018-01-11 01.02.52_b1KSEv\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e在 \x3ccode\x3erouter\/index.js\x3c\/code\x3e 中写入\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport Router from \x27vue-router\x27\n\nconst About = () =\x3e import(\x27..\/pages\/About.vue\x27)\nconst Home = () =\x3e import(\x27..\/pages\/Home.vue\x27)\n\nVue.use(Router)\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-router\x27\x3c\/span\x3e\n\nconst About = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/About.vue\x27\x3c\/span\x3e)\nconst Home = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/Home.vue\x27\x3c\/span\x3e)\n\nVue.use(Router)\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果修改了模块的名字，增加了模块或者删除了模块，就需要重新修改这个路由文件\x3c\/p\x3e\n\x3cp\x3e总是做这么机械的事情无异于消耗我这个\x3cstrong\x3e前端打字员\x3c\/strong\x3e的寿命\x3c\/p\x3e\n\x3cp\x3e不能忍，遂写个工具\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e整理思路如下\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012792022?w=1466\x26amp;h=770\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012792022?w=1466\x26amp;h=770\x22 alt=\x22Screenshot_2018-01-11 01.01.36_00Cube\x22 title=\x22Screenshot_2018-01-11 01.01.36_00Cube\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其中，监视目录下文件的变动依靠的是 \x3cstrong\x3enode\x3c\/strong\x3e API 中\x3ccode\x3efs.watch(filename[, options][, listener])\x3c\/code\x3e\x3c\/p\x3e\n\x3cp\x3e替换目标文件中引入模块的部分，则是通过正则来实现\x3c\/p\x3e\n\x3cp\x3e在这里五星推荐一个验证正则是否正确的网站，\x3ca href=\x22https:\/\/regexr.com\/?30jrh\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eregexr\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e代码实现\x3c\/h3\x3e\n\x3cp\x3e监视包含模块的目录\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fs.watch(dir, {\n  recursive: true \/\/ 目录下子目录也被监视\n}, (event, filename) =\x3e { \n\/\/ event 是文件变动的类型，添加文件、删除文件和修改文件名都是\x27rename\x27 事件\n\/\/ filename 是变化的文件或目录\n  if(event === \x27rename\x27){ \/\/ 判断文件变动类型\n    \n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs cs\x22\x3e\x3ccode\x3efs.watch(dir, {\n  recursive: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 目录下子目录也被监视\x3c\/span\x3e\n}, (\x3cspan class=\x22hljs-keyword\x22\x3eevent\x3c\/span\x3e, filename) =\x26gt; { \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ event 是文件变动的类型，添加文件、删除文件和修改文件名都是\x27rename\x27 事件\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ filename 是变化的文件或目录\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3eevent\x3c\/span\x3e === \x3cspan class=\x22hljs-string\x22\x3e\x27rename\x27\x3c\/span\x3e){ \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 判断文件变动类型\x3c\/span\x3e\n    \n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当发生\x3cstrong\x3erename\x3c\/strong\x3e事件后，需要重新获得目录下(\x3cstrong\x3efrom\x3c\/strong\x3e)所有的模块，包括模块名\x3cstrong\x3emoduleName\x3c\/strong\x3e，模块文件相对于引用模块文件(\x3cstrong\x3eto\x3c\/strong\x3e)的相对路径\x3cstrong\x3emodulePath\x3c\/strong\x3e，将它们存入变量\x3cstrong\x3emodules\x3c\/strong\x3e中\x3c\/p\x3e\n\x3cp\x3e实际项目中，模块通常都是\x3cstrong\x3e.vue\x3c\/strong\x3e文件，或者\x3cstrong\x3e.jsx\x3c\/strong\x3e文件，因此只将这些作为模块，在路由文件中引用\x3c\/p\x3e\n\x3cp\x3e另外有些模块文件因为各种原因，希望人工引入，而不被\x3cstrong\x3ewatch\x3c\/strong\x3e，这样的文件存入\x3cstrong\x3eexcludeArr\x3c\/strong\x3e中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const _ = require(\x27lodash\x27)\nlet excludeArr = [...]\nlet modules = []\nlet extname = \x27.vue\x27\nlet from = \x27.\/src\/pages\x27\nlet to = \x27.\/src\/router\/index.js\x26quot;\x27\n\nconst mapDir = d =\x3e {\n    \/\/ 获得当前文件夹下的所有的文件夹和文件\n    const [dirs, files] = _(fs.readdirSync(d)).partition(p =\x3e\n        fs.statSync(path.join(d, p)).isDirectory()\n    )\n\n    \/\/ 映射文件夹\n    dirs.forEach(dir =\x3e {\n        modules.concat(mapDir(path.join(d, dir)))\n    })\n\n    \/\/ 映射文件\n    files.forEach(file =\x3e {\n        \/\/ 文件后缀名\n        let filename = path.join(d, file)\n        if (path.extname(file) === extname) {\n            if (!excludeArr.includes(path.resolve(__dirname, filename))) {\n                let moduleName = path.basename(file, extname)\n                \/\/ 若存在 -\n                if (moduleName.match(\x27-\x27)) {\n                    moduleName = moduleName.replace(\n                        \/(-)(.{1})\/,\n                        (match, p1, p2, offset, string) =\x3e p2.toUpperCase()\n                    )\n                }\n                modules.push({\n                    moduleName,\n                    modulePath: path.relative(path.dirname(to), filename)\n                })\n            }\n        }\n    })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e _ = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27lodash\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e excludeArr = [...]\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e modules = []\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e extname = \x3cspan class=\x22hljs-string\x22\x3e\x27.vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/pages\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e to = \x3cspan class=\x22hljs-string\x22\x3e\x27.\/src\/router\/index.js\x22\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mapDir = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ed\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获得当前文件夹下的所有的文件夹和文件\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e [dirs, files] = _(fs.readdirSync(d)).partition(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ep\x3c\/span\x3e =\x26gt;\x3c\/span\x3e\n        fs.statSync(path.join(d, p)).isDirectory()\n    )\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 映射文件夹\x3c\/span\x3e\n    dirs.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3edir\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        modules.concat(mapDir(path.join(d, dir)))\n    })\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 映射文件\x3c\/span\x3e\n    files.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3efile\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 文件后缀名\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e filename = path.join(d, file)\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (path.extname(file) === extname) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!excludeArr.includes(path.resolve(__dirname, filename))) {\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e moduleName = path.basename(file, extname)\n                \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 若存在 -\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (moduleName.match(\x3cspan class=\x22hljs-string\x22\x3e\x27-\x27\x3c\/span\x3e)) {\n                    moduleName = moduleName.replace(\n                        \x3cspan class=\x22hljs-regexp\x22\x3e\/(-)(.{1})\/\x3c\/span\x3e,\n                        \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ematch, p1, p2, offset, \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e p2.toUpperCase()\n                    )\n                }\n                modules.push({\n                    moduleName,\n                    modulePath: path.relative(path.dirname(to), filename)\n                })\n            }\n        }\n    })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e生成好新的待引入的模块后，接下来就是在路由文件中，将对应的内容替换掉\x3c\/p\x3e\n\x3cp\x3e所以需要读写文件以及正则替换\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22                const regex = \/\\\/\\*\\sautoImport(.*\\n)*\\\/\\*\\sautoImport\\s\\*\\\/\/g\n                let importStr = \x27\x27\n                modules.forEach((m, index) =\x3e {\n                    importStr =\n                        importStr \x2b\n                        fillTemplate(template, m.moduleName, m.modulePath) \x2b\n                        (cache.length - 1 === index ? \x27\x27 : \x27\\n\x27)\n                })\n                fs.readFile(to, \x27utf8\x27, (err, data) =\x3e {\n                    if (err) return console.log(err)\n                    let result = \x27\x27\n                    if (data.match(regex)) {\n                        result = data.replace(\n                            regex,\n                            `\/* autoImport *\/\n${importStr}\n\/* autoImport *\/`\n                        )\n                    } else {\n                        \/* 首次插入在文件最后的import插入 *\/\n                        result = data.replace(\n                            \/(.*import.*)(\\n)([^(import)])\/,\n                            (match, p1, p2, p3, offset, string) =\x3e {\n                                return `${p1}\n\/* autoImport *\/\n${importStr}\n\/* autoImport *\/\n${p3}`\n                            }\n                        )\n                    }\n\n                    fs.writeFile(to, result, \x27utf8\x27, err =\x3e {\n                        if (err) return console.log(err)\n                    })\n                })\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e                \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e regex = \x3cspan class=\x22hljs-regexp\x22\x3e\/\\\/\\*\\sautoImport(.*\\n)*\\\/\\*\\sautoImport\\s\\*\\\/\/g\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e importStr = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n                modules.forEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3em, index\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                    importStr =\n                        importStr \x2b\n                        fillTemplate(template, m.moduleName, m.modulePath) \x2b\n                        (cache.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e === index ? \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27\\n\x27\x3c\/span\x3e)\n                })\n                fs.readFile(to, \x3cspan class=\x22hljs-string\x22\x3e\x27utf8\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, data\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n                    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e result = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e\n                    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (data.match(regex)) {\n                        result = data.replace(\n                            regex,\n                            \x3cspan class=\x22hljs-string\x22\x3e`\/* autoImport *\/\n\x3cspan class=\x22hljs-subst\x22\x3e${importStr}\x3c\/span\x3e\n\/* autoImport *\/`\x3c\/span\x3e\n                        )\n                    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                        \x3cspan class=\x22hljs-comment\x22\x3e\/* 首次插入在文件最后的import插入 *\/\x3c\/span\x3e\n                        result = data.replace(\n                            \x3cspan class=\x22hljs-regexp\x22\x3e\/(.*import.*)(\\n)([^(import)])\/\x3c\/span\x3e,\n                            \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ematch, p1, p2, p3, offset, \x3cspan class=\x22hljs-built_in\x22\x3estring\x3c\/span\x3e\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n                                \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e`\x3cspan class=\x22hljs-subst\x22\x3e${p1}\x3c\/span\x3e\n\/* autoImport *\/\n\x3cspan class=\x22hljs-subst\x22\x3e${importStr}\x3c\/span\x3e\n\/* autoImport *\/\n\x3cspan class=\x22hljs-subst\x22\x3e${p3}\x3c\/span\x3e`\x3c\/span\x3e\n                            }\n                        )\n                    }\n\n                    fs.writeFile(to, result, \x3cspan class=\x22hljs-string\x22\x3e\x27utf8\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n                        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(err)\n                    })\n                })\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中\x3ccode\x3e\/\\\/\\*\\sautoImport(.*\\n)*\\\/\\*\\sautoImport\\s\\*\\\/\/g\x3c\/code\x3e是用于匹配两段注释\x3ccode\x3e\/* autoImport *\/\x3c\/code\x3e及其中间的内容\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22import Vue from \x27vue\x27\nimport Router from \x27vue-router\x27\n\/* autoImport *\/\nconst About = () =\x3e import(\x27..\/pages\/About.vue\x27)\nconst Home = () =\x3e import(\x27..\/pages\/Home.vue\x27)\n\/* autoImport *\/\n\nVue.use(Router)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Router \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-router\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/* autoImport *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e About = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/About.vue\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e Home = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27..\/pages\/Home.vue\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/* autoImport *\/\x3c\/span\x3e\n\nVue.use(Router)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当第一次使用，没有\x3ccode\x3e\/* autoImport *\/\x3c\/code\x3e时，就需要在最后一个\x3cstrong\x3eimport\x3c\/strong\x3e后面，插入引入的模块\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22data.replace(\n                            \/(.*import.*)(\\n)([^(import)])\/,\n                            (match, p1, p2, p3, offset, string) =\x3e {\n                                return `${p1}\n\/* autoImport *\/\n${importStr}\n\/* autoImport *\/\n${p3}`\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs armasm\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-symbol\x22\x3edata.replace\x3c\/span\x3e(\n                            \/(.*\x3cspan class=\x22hljs-meta\x22\x3eimport\x3c\/span\x3e.*)(\\n)([^(\x3cspan class=\x22hljs-meta\x22\x3eimport\x3c\/span\x3e)])\/,\n                            (match, \x3cspan class=\x22hljs-built_in\x22\x3ep1\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ep2\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ep3\x3c\/span\x3e, offset, \x3cspan class=\x22hljs-keyword\x22\x3estring) \x3c\/span\x3e=\x26gt; {\n                                return `${\x3cspan class=\x22hljs-built_in\x22\x3ep1\x3c\/span\x3e}\n\x3cspan class=\x22hljs-comment\x22\x3e\/* autoImport *\/\x3c\/span\x3e\n${importStr}\n\x3cspan class=\x22hljs-comment\x22\x3e\/* autoImport *\/\x3c\/span\x3e\n${\x3cspan class=\x22hljs-built_in\x22\x3ep3\x3c\/span\x3e}`\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这里还可以自定义了引入模块的方式，例如懒加载，\x3ccode\x3e\x22const moduleName = () =\x26gt; import(modulePath)\x22\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const template = \x26quot;const moduleName = () =\x3e import(modulePath)\x26quot;\nconst fillTemplate = (template, moduleName, modulePath) =\x3e\n    template\n        .replace(\x27moduleName\x27, moduleName)\n        .replace(\x27modulePath\x27, `\x27${modulePath}\x27`)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22const moduleName = () =\x26gt; import(modulePath)\x22\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e fillTemplate = (\x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e, moduleName, modulePath) =\x26gt;\n    \x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e\n        .replace(\x3cspan class=\x22hljs-string\x22\x3e\x27moduleName\x27\x3c\/span\x3e, moduleName)\n        .replace(\x3cspan class=\x22hljs-string\x22\x3e\x27modulePath\x27\x3c\/span\x3e, `\x3cspan class=\x22hljs-string\x22\x3e\x27${modulePath}\x27\x3c\/span\x3e`)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了工具的灵活性，把可配置项写成json文件的形式\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22{\n    \x26quot;extname\x26quot;: \x26quot;.vue\x26quot;,\n    \x26quot;from\x26quot;: \x26quot;src\/pages\x26quot;,\n    \x26quot;to\x26quot;: \x26quot;src\/router\/index.js\x26quot;,\n    \x26quot;template\x26quot;: \x26quot;const moduleName = () =\x3e import(modulePath)\x26quot;,\n    \x26quot;exclude\x26quot;: [\n        \x26quot;.\/src\/pages\/login.vue\x26quot;,\n        \x26quot;.\/src\/pages\/404.vue\x26quot;,\n        \x26quot;.\/src\/pages\/overall\/**\x26quot;,\n        \x26quot;.\/src\/pages\/account-result\/**\x26quot;\n    ]\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs json\x22\x3e\x3ccode\x3e{\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22extname\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22.vue\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22from\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22src\/pages\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22to\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22src\/router\/index.js\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22template\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22const moduleName = () =\x26gt; import(modulePath)\x22\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attr\x22\x3e\x22exclude\x22\x3c\/span\x3e: [\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/src\/pages\/login.vue\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/src\/pages\/404.vue\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/src\/pages\/overall\/**\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-string\x22\x3e\x22.\/src\/pages\/account-result\/**\x22\x3c\/span\x3e\n    ]\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后通过以下的方式来获得\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const config = fs.readFileSync(\x27.\/autoImport.json\x27)\nconst { extname, from, to, template, exclude } = JSON.parse(config)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econfig\x3c\/span\x3e = fs.readFileSync(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/autoImport.json\x27\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { extname, from, to, \x3cspan class=\x22hljs-keyword\x22\x3etemplate\x3c\/span\x3e, exclude } = JSON.parse(\x3cspan class=\x22hljs-built_in\x22\x3econfig\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e后记\x3c\/h3\x3e\n\x3cp\x3e下一步准备把这个工具写成webpack的插件，名字我都起好了，\x3ca href=\x22https:\/\/github.com\/nbb3210\/AutoImportPlugin\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAutoImportPlugin\x3c\/a\x3e，先在github上占了个坑，\x3cstrong\x3e顺手给颗星，不用改Bug\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e同时准备用更加成熟的模块\x3ca href=\x22https:\/\/github.com\/paulmillr\/chokidar\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echokidar\x3c\/a\x3e来代替原生的\x3cstrong\x3ewatch\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e工具有问题提issue啊\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>自动 Import 工具，前端打字员的自我救赎</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012792016">https://segmentfault.com/a/1190000012792016</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/te67iwptu98/" target="_blank">https://alili.tech/archive/te67iwptu98/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>