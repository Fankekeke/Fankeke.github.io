<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="前端真的能做到彻底权限控制吗？"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>前端真的能做到彻底权限控制吗？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/tpz4toa2wpa/",
				"appid": "1613049289050283", 
				"title": "前端真的能做到彻底权限控制吗？ | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-19T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/9ofuxk8xd6e/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/itwqh9ynvb/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&text=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&text=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&title=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&is_video=false&description=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&title=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&title=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&title=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ftpz4toa2wpa%2f&title=%e5%89%8d%e7%ab%af%e7%9c%9f%e7%9a%84%e8%83%bd%e5%81%9a%e5%88%b0%e5%bd%bb%e5%ba%95%e6%9d%83%e9%99%90%e6%8e%a7%e5%88%b6%e5%90%97%ef%bc%9f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">前端真的能做到彻底权限控制吗？</h1><div class="meta"><div class="postdate"><time datetime="2018-12-19" itemprop="datePublished">2018-12-19</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e有一天突然想到一个问题，web端的权限控制：\x3cbr\x3e1.真的能控制权限吗？\x3cbr\x3e2.仅仅靠前端，能不能做到真正的权限控制？\x3cbr\x3e3.如果需要后台配合，应该如何配合？\x3cbr\x3e可能这是一个老生常谈的问题，但还是想整理下，有误的地方望大家指出。\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e何为权限控制\x3c\/h1\x3e\n\x3cp\x3e权限控制大致分为两个维度:\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3cstrong\x3e垂直维度\x3c\/strong\x3e: 控制用户可以访问哪些url的权限\x3c\/li\x3e\n\x3cli\x3e\n\x3cstrong\x3e水平维度\x3c\/strong\x3e: 控制用户访问特定url，获取哪些数据的权限（e.g. 普通用户、管理员、超级管理员访问同一url，获取的数据是不同的）\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3eWeb权限控制方案List\x3c\/h1\x3e\n\x3cul\x3e\n\x3cli\x3e前后端不分离：以Java为例，后端通过jsp、freemark、thmeleaf等模板来渲染相应权限的数据，渲染完呈现在浏览器端\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e前后端分离：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eSPA单页面应用，路由由前端控制，前端通过js控制hash路由的权限\x3c\/li\x3e\n\x3cli\x3eSSR服务端渲染，Node中间层做代理路由，判断权限渲染特定的路由至浏览器端\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3eSPA前端权限控制方案\x3c\/h1\x3e\n\x3cblockquote\x3eSPA: 单页Web应用（single page web application）将所有web活动局限于一个html页面中，利用js通过hash或者浏览器history api来实现无刷新路由跳转，前后端通过ajax数据通信，避免了浏览器的刷新重新加载，为用户提供流程的操作体验。这意味着前端接管了路由层，需要通过调用前端自身的MVC模块，来渲染不同的页面。\x3c\/blockquote\x3e\n\x3cp\x3eBase on：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eVue 前端MVVM框架\x3c\/li\x3e\n\x3cli\x3eVuex 状态管理机\x3c\/li\x3e\n\x3cli\x3eVue-router 路由\x3c\/li\x3e\n\x3cli\x3eAxios HTTP请求库\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e1.登陆事件Login\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 1.触发登陆事件\ndispatch(\x27login\x27)\n \n\/\/ actions\ncommit(types.LOGIN_SUCCESS, res.data.data)\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1.触发登陆事件\x3c\/span\x3e\ndispatch(\x3cspan class=\x22hljs-string\x22\x3e\x27login\x27\x3c\/span\x3e)\n \n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ actions\x3c\/span\x3e\ncommit(types.LOGIN_SUCCESS, res.data.data)\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e2.获取Token，经Base64编码后存至sessionStorage\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ mutations\nconst mutations = {\n    [types.LOGIN_SUCCESS] (state, data) {\n        state.authlock = false\n    \/\/ 2.登陆成功回调拿到token,经Base64 编码后存入本地sessionStorage\n        let token = Base64.encode(data \x2b \x27:HIKDATAE\x27)\n        sessionStorage.setItem(\x27userToken\x27, token)\n    \/\/ 路由跳转至目标页面\n        router.push({name: \x27xxx\x27})\n    },\n    [types.LOGOUT_SUCCESS] (state) {\n        state.authlock = true\n    \/\/ 登出成功回调,移除本地token\n        sessionStorage.removeItem(\x27userToken\x27)\n        router.push({name: \x27Login\x27})\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ mutations\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mutations = {\n    [types.LOGIN_SUCCESS] (state, data) {\n        state.authlock = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 2.登陆成功回调拿到token,经Base64 编码后存入本地sessionStorage\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e token = Base64.encode(data \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27:HIKDATAE\x27\x3c\/span\x3e)\n        sessionStorage.setItem(\x3cspan class=\x22hljs-string\x22\x3e\x27userToken\x27\x3c\/span\x3e, token)\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 路由跳转至目标页面\x3c\/span\x3e\n        router.push({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27xxx\x27\x3c\/span\x3e})\n    },\n    [types.LOGOUT_SUCCESS] (state) {\n        state.authlock = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 登出成功回调,移除本地token\x3c\/span\x3e\n        sessionStorage.removeItem(\x3cspan class=\x22hljs-string\x22\x3e\x27userToken\x27\x3c\/span\x3e)\n        router.push({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Login\x27\x3c\/span\x3e})\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e3.所有HTTP Header Authorization 加上编码后的token(前后端可约定规则)\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Axios 请求钩子（request）\naxios.interceptors.request.use(req =\x3e {\n    let token = sessionStorage.getItem(\x27user\x27)     \n    if (token) {         \n        \/\/ 3.token 存在,则在之后所有请求的http请求头 Authorization 带上base64编码后的token,后台拿到token后进行验证权限         \n        req.headers.Authorization = `Basic ${token}`     \n    }\n    req.data = qs.stringify(req.data)     \n    return req \n}, error =\x3e {\n    return Promise.reject(error) \n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Axios 请求钩子（request）\x3c\/span\x3e\naxios.interceptors.request.use(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ereq\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e token = sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x27user\x27\x3c\/span\x3e)     \n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (token) {         \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 3.token 存在,则在之后所有请求的http请求头 Authorization 带上base64编码后的token,后台拿到token后进行验证权限         \x3c\/span\x3e\n        req.headers.Authorization = \x3cspan class=\x22hljs-string\x22\x3e`Basic \x3cspan class=\x22hljs-subst\x22\x3e${token}\x3c\/span\x3e`\x3c\/span\x3e     \n    }\n    req.data = qs.stringify(req.data)     \n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e req \n}, error =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(error) \n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e浏览器http header\x3c\/blockquote\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ohce3yxd6.bkt.clouddn.com\/httpau.png\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ohce3yxd6.bkt.clouddn.com\/httpau.png\x22 alt=\x22FEAuths\x22 title=\x22FEAuths\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e4.请求拦截：后台拿到token后对每个请求进行校验，若校验失败返回401，前端response钩子里统一catch error 跳转至登陆页面\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Axios 请求钩子（response）\naxios.interceptors.response.use(res =\x3e {\n    return res\n}, error =\x3e {\n    if (error.response) {\n        switch (error.response.status) {\n        \/\/ 4.所有接口response校验钩子,若token检验失败,后台返回 401 error code, 清除token信息并跳转到登录页面\n            case 401:\n                store.commit(types.LOGOUT)\n                router.replace({\n                    path: \x27\/login\x27\n        })\n    }\n    }\n    return Promise.reject(error)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Axios 请求钩子（response）\x3c\/span\x3e\naxios.interceptors.response.use(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eres\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e res\n}, error =\x26gt; {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (error.response) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eswitch\x3c\/span\x3e (error.response.status) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 4.所有接口response校验钩子,若token检验失败,后台返回 401 error code, 清除token信息并跳转到登录页面\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3ecase\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e401\x3c\/span\x3e:\n                store.commit(types.LOGOUT)\n                router.replace({\n                    \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e\n        })\n    }\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.reject(error)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e5.路由跳转拦截：任意路由跳转时，在路由beforeEach钩子里校验本地是否存在token，若没有，则跳转至登陆页面\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 路由钩子(每个路由跳转前调起beforeEach钩子)\nrouter.beforeEach((to, from, next) =\x3e {\n  if (to.path === \x27\/login\x27) {\n    sessionStorage.removeItem(\x27userToken\x27)\n  }\n  let user = sessionStorage.getItem(\x27userToken\x27)\n  if (!user \x26amp;\x26amp; to.path !== \x27\/login\x27) {\n    \/\/ 若本地token不存在,则任意路由跳转的时候,重定向至login 登陆页面\n    next({ path: \x27\/login\x27 })\n  } else {\n    next()\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 路由钩子(每个路由跳转前调起beforeEach钩子)\x3c\/span\x3e\nrouter.beforeEach(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eto, \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e, next\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (to.path === \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e) {\n    sessionStorage.removeItem(\x3cspan class=\x22hljs-string\x22\x3e\x27userToken\x27\x3c\/span\x3e)\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e user = sessionStorage.getItem(\x3cspan class=\x22hljs-string\x22\x3e\x27userToken\x27\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!user \x26amp;\x26amp; to.path !== \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 若本地token不存在,则任意路由跳转的时候,重定向至login 登陆页面\x3c\/span\x3e\n    next({ \x3cspan class=\x22hljs-attr\x22\x3epath\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27\/login\x27\x3c\/span\x3e })\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n    next()\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e6.登出Logout：清楚本地sessionStorage的token信息\x3c\/h2\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ mutations\nconst mutations = {\n    ...\n    [types.LOGOUT_SUCCESS] (state) {\n        state.authlock = true\n    \/\/ 登出成功回调,移除本地token\n        sessionStorage.removeItem(\x27userToken\x27)\n    router.push({name: \x27Login\x27})\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ mutations\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e mutations = {\n    ...\n    [types.LOGOUT_SUCCESS] (state) {\n        state.authlock = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 登出成功回调,移除本地token\x3c\/span\x3e\n        sessionStorage.removeItem(\x3cspan class=\x22hljs-string\x22\x3e\x27userToken\x27\x3c\/span\x3e)\n    router.push({\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Login\x27\x3c\/span\x3e})\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e流程示意图如下:\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22http:\/\/ohce3yxd6.bkt.clouddn.com\/FEAuth_yepanmeng.png\x22 src=\x22https:\/\/static.alili.techhttp:\/\/ohce3yxd6.bkt.clouddn.com\/FEAuth_yepanmeng.png\x22 alt=\x22FEAuth\x22 title=\x22FEAuth\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cblockquote\x3e写完才觉得，什么才是真正的安全权限？任重而道远。。。\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>前端真的能做到彻底权限控制吗？</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012675759">https://segmentfault.com/a/1190000012675759</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/tpz4toa2wpa/" target="_blank">https://alili.tech/archive/tpz4toa2wpa/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>