<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="AJAX的出现与跨域处理"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>AJAX的出现与跨域处理 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/tzqmkebytcl/",
				"appid": "1613049289050283", 
				"title": "AJAX的出现与跨域处理 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-15T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/e2aiqzy3ml/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/sipq7zh1d8/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&text=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&text=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&title=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&is_video=false&description=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&title=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&title=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&title=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2ftzqmkebytcl%2f&title=AJAX%e7%9a%84%e5%87%ba%e7%8e%b0%e4%b8%8e%e8%b7%a8%e5%9f%9f%e5%a4%84%e7%90%86"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">AJAX的出现与跨域处理</h1><div class="meta"><div class="postdate"><time datetime="2018-12-15" itemprop="datePublished">2018-12-15</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e\n\x3ccode\x3eXMLHttpRequest\x3c\/code\x3e \x3ccode\x3eJSON\x3c\/code\x3e \x3ccode\x3eAJAX\x3c\/code\x3e \x3ccode\x3eCORS\x3c\/code\x3e  四个名词来开会\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e如何发请求\x3c\/h3\x3e\n\x3cp\x3e在前端的世界里也逛荡了不少日子了，目前已经get到大约5种发起请求的方式，主流的、非主流的。\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth align=\x22left\x22\x3e何种方式\x3c\/th\x3e\n\x3cth\x3e请求方法\x3c\/th\x3e\n\x3cth\x3e \x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e最常见的\x3ccode\x3eform\x3c\/code\x3e表单\x3c\/td\x3e\n\x3ctd\x3e默认\x3ccode\x3eGET\x3c\/code\x3e，多用\x3ccode\x3ePOST\x3c\/code\x3e,只此两种\x3c\/td\x3e\n\x3ctd\x3e会刷新页面或者新开页面\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e\n\x3ccode\x3ea\x3c\/code\x3e 标签\x3c\/td\x3e\n\x3ctd\x3e\n\x3ccode\x3eGET\x3c\/code\x3e请求\x3c\/td\x3e\n\x3ctd\x3e也会刷新页面或者新开页面\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e\n\x3ccode\x3eimg\x3c\/code\x3e的\x3ccode\x3esrc\x3c\/code\x3e属性\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eGET\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e只能以图片的形式展现\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e\n\x3ccode\x3elink\x3c\/code\x3e标签\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eGET\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e只能以\x3ccode\x3eCSS\x3c\/code\x3e、\x3ccode\x3efavicon\x3c\/code\x3e的形式展现\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd align=\x22left\x22\x3e\n\x3ccode\x3escript\x3c\/code\x3e标签\x3c\/td\x3e\n\x3ctd\x3e\x3ccode\x3eGET\x3c\/code\x3e\x3c\/td\x3e\n\x3ctd\x3e只能以脚本的形式运行\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e可是\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e我们可能想用\x3ccode\x3eGET\x3c\/code\x3e \x3ccode\x3ePOST\x3c\/code\x3e \x3ccode\x3ePUT\x3c\/code\x3e \x3ccode\x3eDELETE\x3c\/code\x3e 方法\x3c\/li\x3e\n\x3cli\x3e不想刷新整个页面，想用一种更易于理解的方式来响应\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3eAJAX出现\x3c\/h3\x3e\n\x3ch4\x3e浏览器和服务器交互模式 V1.0\x3c\/h4\x3e\n\x3cp\x3e在\x3ccode\x3eAJAX\x3c\/code\x3e未出现之前，浏览器想从服务器获得资源，注意是获取资源，会经过如下一个过程\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e浏览器发起请求-\x26gt;服务器接到请求响应给你HTML文档-\x26gt;浏览器收到资源，刷新页面，加载获得的的HTML。简略的过程\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e我称这种交互方式是 V1.0，此时还是以获取资源为导向。后来随着时代的发展，人们日益增长的文化需求成为了社会的主要矛盾……有一天，小明看了一篇报道，他只是想在下面评论一下，发表对实事的\x3cstrong\x3e\x3cem\x3e亲切问候\x3c\/em\x3e\x3c\/strong\x3e，问候完了，唉，你给我刷新页面干啥，我只是想评论一下啊。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013072207\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013072207\x22 alt=\x22什么鬼\x22 title=\x22什么鬼\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e大概那是网民们第一次对 \x3cstrong\x3e良好的用户体验\x3c\/strong\x3e 提出了要求。后来的苹果爸爸，把大家惯坏了，天天嚷着 \x22你这产品用户体验太差了\x22……\x3c\/p\x3e\n\x3cp\x3e彼时，微软还是对web做出了很大的贡献的。\x3c\/p\x3e\n\x3ch4\x3e交互模式2.0\x3c\/h4\x3e\n\x3cp\x3e大约1999年，微软发布\x3ccode\x3eIE 5.0\x3c\/code\x3e版本，它允许JavaScript脚本向服务器发起HTTP请求。不过很遗憾，当时也没有火起来，直到2004年Gmail发布和2005年Google Map发布，才引起广泛重视。2005年，一个叫Jesse James Garrett的人提出了一个新术语----\x3ccode\x3eAJAX\x3c\/code\x3e，它是一系列技术的组合体，全称是 \x3ccode\x3eAsynchronous JavaScript \x2b XML\x3c\/code\x3e(异步的JS和XML)可以阻止页面整体刷新，只是动态响应用户的操作，快速显示到局部，用户就可以很愉快的继续上网了。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/Guide\/AJAX\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAJAX\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e可以看出IE当时还是很猛的，随着IE 6.0 市场份额进一步扩大，IE已经把火狐整的半死不活，放眼整个浏览器市场，微软是当之无愧的王者，后来微软就把浏览器团队解散了……不得不说这是一波神操作，能与之媲美的操作大概只有\x3ccode\x3e残血我能反杀\x3c\/code\x3e \x3ccode\x3e塔下我能秀他\x3c\/code\x3e了。微软强行为后续各家浏览器的发展提供了优秀的工程师，尤其是08、09年出生的谷歌浏览器，再看如今的IE……\x3c\/p\x3e\n\x3cp\x3e既然\x3ccode\x3eAJAX\x3c\/code\x3e是一系列的技术的组合体，接下来认识一下其中的几位主角\x3c\/p\x3e\n\x3ch4\x3eXMLHttpRequest\x3c\/h4\x3e\n\x3cp\x3e\x3ccode\x3eXMLHttpRequest\x3c\/code\x3e对象是用来在浏览器和服务器之间传输数据的。\x3c\/p\x3e\n\x3cp\x3e古代的操作的是：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e浏览器构造\x3ccode\x3eXMLHttpRequest\x3c\/code\x3e实例化对象\x3c\/li\x3e\n\x3cli\x3e用这个对象发起请求\x3c\/li\x3e\n\x3cli\x3e服务器响应一个\x3ccode\x3eXML\x3c\/code\x3e格式的字符串，是字符串，是字符串，是字符串，也就是说响应的第四部分是字符串。\x3c\/li\x3e\n\x3cli\x3eJS解析符合XML格式的字符串，更新局部页面。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e什么是\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/XML_%E4%BB%8B%E7%BB%8D\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eXML\x3c\/a\x3e，\x3cstrong\x3e可扩展\x3c\/strong\x3e标记语言。\x3c\/p\x3e\n\x3cp\x3e以上是最初的用法，用的是\x3ccode\x3eXML\x3c\/code\x3e，前端代码片段如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  let request = new XMLHttpRequest() \/\/实例化XMLHttpRequest对象\n  request.onreadystatechange = () =\x3e {\n    if (request.readyState === 4) {\n      console.log(\x27请求和响应都完毕了\x27)\n\n      if (request.status \x3e= 200 \x26amp;\x26amp; request.status \x3c= 300) {\n        console.log(\x27说明请求成功了\x27)\n        console.log(request.responseText)\n        let parser = new DOMParser()\n        let xmlDoc = parser.parseFromString(request.responseText, \x26quot;text\/xml\x26quot;) \n        \/\/用parser解析request.responseText\n        let c = xmlDoc.getElementsByTagName(\x27body\x27)[0].textContent\n        console.log(c)\n      } else if (request.status \x3e= 400)  {\n        console.log(\x27说明请求失败了\x27)\n        \n      }\n    }\n    \n  }\n  request.open(\x27GET\x27, \x27\/xxx\x27) \/\/配置request\n  request.send()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e request = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e XMLHttpRequest() \x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化XMLHttpRequest对象\x3c\/span\x3e\n  request.onreadystatechange = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.readyState === \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27请求和响应都完毕了\x27\x3c\/span\x3e)\n\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.status \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e \x26amp;\x26amp; request.status \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27说明请求成功了\x27\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(request.responseText)\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e parser = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e DOMParser()\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e xmlDoc = parser.parseFromString(request.responseText, \x3cspan class=\x22hljs-string\x22\x3e\x22text\/xml\x22\x3c\/span\x3e) \n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/用parser解析request.responseText\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e c = xmlDoc.getElementsByTagName(\x3cspan class=\x22hljs-string\x22\x3e\x27body\x27\x3c\/span\x3e)[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].textContent\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(c)\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.status \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e)  {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27说明请求失败了\x27\x3c\/span\x3e)\n        \n      }\n    }\n    \n  }\n  request.open(\x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\/xxx\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/配置request\x3c\/span\x3e\n  request.send()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e服务器端的对应代码片段如下\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    ...\n    response.statusCode = 200\n    response.setHeader(\x27Content-Type\x27, \x27text\/xml;charset=utf-8\x27)\n    response.write(`\n    \n    \x3cnote\x3e\n      \x3cto\x3e木木\x3c\/to\x3e\n      \x3cfrom\x3e少少\x3c\/from\x3e\n      \x3cheading\x3e你好哇\x3c\/heading\x3e\n      \x3cbody\x3e好久不见啊\x3c\/body\x3e\n    \x3c\/note\x3e\n    `)\n    response.end()\n    ...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e    ...\n    response.statusCode = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e\n    response.setHeader(\x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27text\/xml;charset=utf-8\x27\x3c\/span\x3e)\n    response.write(\x3cspan class=\x22hljs-string\x22\x3e`\n    \n    \x26lt;note\x26gt;\n      \x26lt;to\x26gt;木木\x26lt;\/to\x26gt;\n      \x26lt;from\x26gt;少少\x26lt;\/from\x26gt;\n      \x26lt;heading\x26gt;你好哇\x26lt;\/heading\x26gt;\n      \x26lt;body\x26gt;好久不见啊\x26lt;\/body\x26gt;\n    \x26lt;\/note\x26gt;\n    `\x3c\/span\x3e)\n    response.end()\n    ...\x3c\/code\x3e\x3c\/pre\x3e\n\x3chr\x3e\n\x3cp\x3e本地模拟的话,一定要记得开俩不同的端口\x3cbr\x3e例如:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22node server.js 8001\nnode server.js 8002\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs crmsh\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eserver\x3c\/span\x3e.js \x3cspan class=\x22hljs-number\x22\x3e8001\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3enode\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eserver\x3c\/span\x3e.js \x3cspan class=\x22hljs-number\x22\x3e8002\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3chr\x3e\n\x3ch4\x3eXMLHttpRequest实例的\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/XMLHttpRequest\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e详解\x3c\/a\x3e\n\x3c\/h4\x3e\n\x3cp\x3e正如上面的前端代码片段写的一样，主要用到了\x3ccode\x3eopen()\x3c\/code\x3e \x3ccode\x3esend()\x3c\/code\x3e方法， \x3ccode\x3eonreadystatechange\x3c\/code\x3e \x3ccode\x3ereadyState\x3c\/code\x3e 属性。\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3erequest.open(method, URL, async)方法。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e一般用三个参数，第一个参数是请求的方法，可以用\x3ccode\x3eGET POST DELETE PUT\x3c\/code\x3e等等，URL是用访问的路径，async是是否使用同步，默认true,开启异步，不需要做修改即可，所以实际中只写前两个参数\x3c\/li\x3e\n\x3cli\x3e如果非要写false，开启同步，\x3ca href=\x22http:\/\/javascript.ruanyifeng.com\/bom\/ajax.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e会对浏览器有阻塞效应\x3c\/a\x3e，而且如果值为false,则send()方法\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/XMLHttpRequest\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e不会返回任何东西\x3c\/a\x3e，直到接受到了服务器的返回数据\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3erequest.send()方法。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e发送请求. 如果该请求是异步模式(默认),该方法会立刻返回. 相反,如果请求是同步模式,则直到请求的响应完全接受以后,该方法才会返回\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3ccode\x3ereadyState\x3c\/code\x3e属性。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e\n\x3cp\x3e描述请求的五个状态。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e0 === 常量 \x3ccode\x3eUNSENT \x3c\/code\x3e(未打开)  open()方法未调用\x3c\/li\x3e\n\x3cli\x3e1 ===  \x3ccode\x3eOPENED\x3c\/code\x3e  (未发送)   只是open()方法调用了\x3c\/li\x3e\n\x3cli\x3e2 === \x3ccode\x3eHEADERS_RECEIVED (已获取响应头)\x3c\/code\x3e send()方法调用了，响应头和响应状态已经返回了\x3c\/li\x3e\n\x3cli\x3e3 === \x3ccode\x3eLOADING (正在下载响应体)\x3c\/code\x3e  响应体下载中，\x3ccode\x3eresponseText\x3c\/code\x3e已经获取了部分数据\x3c\/li\x3e\n\x3cli\x3e4 === \x3ccode\x3eDONE (请求完成)\x3c\/code\x3e  整个响应过程完毕了。 \x3cstrong\x3e\x3cem\x3e这个值是实际中用到的。\x3c\/em\x3e\x3c\/strong\x3e\n\x3c\/li\x3e\n\x3cli\x3e只要不等于4，就表示请求还在进行中。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3eresponseText\x3c\/code\x3e属性是此次响应的文本内容。\x3c\/li\x3e\n\x3cli\x3e\n\x3cp\x3e\x3ccode\x3eonreadystatechange\x3c\/code\x3e属性。\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ccode\x3ereadyState\x3c\/code\x3e属性的值发生改变，就会触发\x3ccode\x3ereadyStateChange\x3c\/code\x3e事件。\x3c\/li\x3e\n\x3cli\x3e我们可以通过\x3ccode\x3eonReadyStateChange\x3c\/code\x3e属性，指定这个事件的回调函数，对不同状态进行不同处理。尤其是当状态变为4的时候，表示通信成功，这时回调函数就可以处理服务器传送回来的数据。即前面的代码片段的处理方式。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e其他的方法、属性、事件详见\x3ca href=\x22http:\/\/javascript.ruanyifeng.com\/bom\/ajax.html#toc22\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e阮一峰博客\x3c\/a\x3e、\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/XMLHttpRequest\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN文档\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3chr\x3e\n\x3cp\x3e习惯用\x3ccode\x3ejavaScript\x3c\/code\x3e的前端是不想和\x3ccode\x3eXML\x3c\/code\x3e打交道的，应该用一种符合\x3ccode\x3ejs\x3c\/code\x3e风格的数据格式语言。\x3c\/p\x3e\n\x3chr\x3e\n\x3ch4\x3eJSON\x3c\/h4\x3e\n\x3cp\x3e后来一个美国程序员\x3ca href=\x22https:\/\/zh.wikipedia.org\/wiki\/%E9%81%93%E6%A0%BC%E6%8B%89%E6%96%AF%C2%B7%E5%85%8B%E7%BE%85%E5%85%8B%E7%A6%8F%E7%89%B9\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e道格拉斯·克罗克福特\x3c\/a\x3e发明了\x3ccode\x3eJSON\x3c\/code\x3e，解决了上面的问题，这货还写了一本蝴蝶书\x3ca href=\x22https:\/\/book.douban.com\/subject\/3590768\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript语言精粹\x3c\/a\x3e，还发明了一个\x3ca href=\x22http:\/\/zhenhua-lee.github.io\/tools\/linter.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJS校验器\x3c\/a\x3e ----JSLint。\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cstrong\x3eJSON\x3c\/strong\x3e(JavaScript Object Notation) 是一种轻量级的数据交换格式。 易于人阅读和编写。同时也易于机器解析和生成。 它基于\x3ca href=\x22http:\/\/www.crockford.com\/javascript\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript Programming Language\x3c\/a\x3e, \x3ca href=\x22http:\/\/www.ecma-international.org\/publications\/files\/ecma-st\/ECMA-262.pdf\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eStandard ECMA-262 3rd Edition - December 1999\x3c\/a\x3e的一个子集。 JSON采用完全独立于语言的文本格式，但是也使用了类似于C语言家族的习惯（包括C, C\x2b\x2b, C#, Java, JavaScript, Perl, Python等）。 这些特性使JSON成为理想的数据交换语言。\x3c\/blockquote\x3e\n\x3cp\x3e以上是\x3ca href=\x22http:\/\/json.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJSON官网\x3c\/a\x3e的简介，可以看出它是一门全新的语言，\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/JSON\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e不是JavaScript的子集\x3c\/a\x3e。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\n\x3ccode\x3eJSON\x3c\/code\x3e很简单，数据类型和JS有点不同的地方。\x3c\/li\x3e\x3c\/ol\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3eJavaScript\x3c\/th\x3e\n\x3cth\x3eJSON\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3estring\x3c\/td\x3e\n\x3ctd\x3e\x22string\x22 必须写双引号\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3enumber\x3c\/td\x3e\n\x3ctd\x3enumber\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eobject\x3c\/td\x3e\n\x3ctd\x3e{\x22object\x22: \x22name\x22} 必须双引号\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eundefined\x3c\/td\x3e\n\x3ctd\x3e没有\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3enull\x3c\/td\x3e\n\x3ctd\x3enull\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eboolean\x3c\/td\x3e\n\x3ctd\x3e直接写true false\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3earray\x3c\/td\x3e\n\x3ctd\x3earray\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3efunction\x3c\/td\x3e\n\x3ctd\x3e没有\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3evariable\x3c\/td\x3e\n\x3ctd\x3e \x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3col\x3e\x3cli\x3e浏览器的全局对象\x3ccode\x3ewindow\x3c\/code\x3e上有\x3ccode\x3eJSON\x3c\/code\x3e对象，直接使用\x3ccode\x3ewindow.JSON.parse(string)\x3c\/code\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let string = request.responseText\nlet json = window.JSON.parse(string) \/\/string 要符合JSON的格式\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e string = request.responseText\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e json = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.JSON.parse(string) \x3cspan class=\x22hljs-comment\x22\x3e\/\/string 要符合JSON的格式\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上是JSON解析部分的代码。\x3c\/p\x3e\n\x3cp\x3e此时服务器端代码是\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22response.statusCode = 200\nresponse.setHeader(\x27Content-Type\x27, \x27text\/json;charset=utf-8\x27)\nresponse.write(`\n    {\n      \x26quot;note\x26quot; : {\n        \x26quot;to\x26quot; : \x26quot;木木\x26quot;,\n        \x26quot;from\x26quot; : \x26quot;少少\x26quot;,\n        \x26quot;heading\x26quot; : \x26quot;你好哇\x26quot;,\n        \x26quot;content\x26quot; : \x26quot;好久不见啊\x26quot;\n      }\n    }\n`)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eresponse.statusCode = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e\nresponse.setHeader(\x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27text\/json;charset=utf-8\x27\x3c\/span\x3e)\nresponse.write(\x3cspan class=\x22hljs-string\x22\x3e`\n    {\n      \x22note\x22 : {\n        \x22to\x22 : \x22木木\x22,\n        \x22from\x22 : \x22少少\x22,\n        \x22heading\x22 : \x22你好哇\x22,\n        \x22content\x22 : \x22好久不见啊\x22\n      }\n    }\n`\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e我们浏览器有同源政策，不是\x3cstrong\x3e同协议 同域名 同端口\x3c\/strong\x3e 的网页无法相互访问。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e4.\x3ccode\x3eAJAX\x3c\/code\x3e恰好是同源政策的拥趸\x3c\/p\x3e\n\x3ch4\x3eCORS\x3c\/h4\x3e\n\x3col\x3e\n\x3cli\x3e\n\x3cp\x3e如果\x3ccode\x3eAJAX\x3c\/code\x3e向非同源的地址发起请求，会报错。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e这种错误无法通过状态码识别，因为HTTP回应的状态码有可能是200，也就是说即使你看到了200的正确码，也没有用\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\n\x3cli\x3e但是form表单无视同源政策，可以发起跨域请求。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbutton id=\x26quot;myButton\x26quot;\x3e点我\x3c\/button\x3e\n\x3cform action=\x26quot;https:\/\/www.baidu.com\x26quot; method=\x26quot;get\x26quot;\x3e\n   \x3cinput type=\x26quot;password\x26quot; name=\x26quot;password\x26quot;\x3e\n   \x3cinput type=\x26quot;submit\x26quot; value=\x26quot;提交\x26quot;\x3e\n\x3c\/form\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3ebutton\x3c\/span\x3e id=\x3cspan class=\x22hljs-string\x22\x3e\x22myButton\x22\x3c\/span\x3e\x26gt;点我\x26lt;\/button\x26gt;\n\x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3eform\x3c\/span\x3e action=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/www.baidu.com\x22\x3c\/span\x3e method=\x3cspan class=\x22hljs-string\x22\x3e\x22get\x22\x3c\/span\x3e\x26gt;\n   \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e type=\x3cspan class=\x22hljs-string\x22\x3e\x22password\x22\x3c\/span\x3e name=\x3cspan class=\x22hljs-string\x22\x3e\x22password\x22\x3c\/span\x3e\x26gt;\n   \x26lt;\x3cspan class=\x22hljs-selector-tag\x22\x3einput\x3c\/span\x3e type=\x3cspan class=\x22hljs-string\x22\x3e\x22submit\x22\x3c\/span\x3e value=\x3cspan class=\x22hljs-string\x22\x3e\x22提交\x22\x3c\/span\x3e\x26gt;\n\x26lt;\/form\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上述请求响应都没有问题\x3cbr\x3e然而对于\x3ccode\x3eAJAX\x3c\/code\x3e就不行\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22...\nrequest.open(\x27GET\x27, \x27http:\/\/www.baidu.com\x27)\n...\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e...\nrequest.open(\x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.baidu.com\x27\x3c\/span\x3e)\n...\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000013072208\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000013072208\x22 alt=\x22同源的保护\x22 title=\x22同源的保护\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e这是为什么呢,因为\x3c\/li\x3e\x3c\/ul\x3e\n\x3cblockquote\x3e原页面用 form 提交到另一个域名之后，原页面的脚本无法获取新页面中的内容,所以浏览器认为这是安全的。\x3cbr\x3e而 AJAX 是可以读取响应内容的，因此浏览器不能允许你这样做。如果你细心的话你会发现，其实请求已经发送出去了，你只是拿不到响应而已。\x3cbr\x3e所以浏览器这个策略的本质是，一个域名的 JS ，在未经允许的情况下，不得读取另一个域名的内容。但浏览器并不阻止你向另一个域名发送请求。\x3cp\x3e作者：方应杭\x3cbr\x3e链接：\x3ca href=\x22https:\/\/www.zhihu.com\/question\/31592553\/answer\/190789780\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.zhihu.com\/questio...\x3c\/a\x3e\x3cbr\x3e来源：知乎\x3cbr\x3e著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3chr\x3e\n\x3cp\x3e那么如何让\x3ccode\x3eAJAX\x3c\/code\x3e跨域发起请求呢。\x3cbr\x3e答案是\x3ccode\x3eCORS\x3c\/code\x3e\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e\n\x3cp\x3e\x3ccode\x3eCORS\x3c\/code\x3e目前是W3C的标准，它允许浏览器跨域发起\x3ccode\x3eXMLHttpRequest\x3c\/code\x3e请求，而且可以发起多种请求，不像\x3ccode\x3eJSONP\x3c\/code\x3e只能发起\x3ccode\x3eGET\x3c\/code\x3e请求，全称是\x22跨域\/源资源共享\x22（Cross-origin resource sharing）。\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e如果想要发起跨域请求 例如: \x3ca href=\x22http:\/\/wushao.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/wushao.com\x3c\/a\x3e:8001 要想访问 \x3ca href=\x22http:\/\/shaolin.com\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/shaolin.com\x3c\/a\x3e:8002,可以做如下处理\x3c\/li\x3e\x3c\/ul\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 request.open(\x27GET\x27, \x27http:\/\/wushao.com:8001\/xxx\x27) \/\/配置request\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs arduino\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e request.\x3cspan class=\x22hljs-built_in\x22\x3eopen\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/wushao.com:8001\/xxx\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/配置request\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e服务器端的代码需要做如下处理\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22response.setHeader(\x27Access-Control-Allow-Origin\x27, \x27http:\/\/shaolin.com:8002\x27)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eresponse\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setHeader\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Access-Control-Allow-Origin\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/shaolin.com:8002\x27\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一定要注意是谁去访问谁,8001去访问8002,那么8001的前端代码要告诉8002的后端代码,咱们是一家人,你和浏览器说说别让它禁我了。\x3c\/p\x3e\n\x3ch4\x3eAJAX一些其他知识\x3c\/h4\x3e\n\x3cp\x3e既然可以发请求,那么请求头的四部分如何获得的,响应的四部分又是如何获得呢\x3c\/p\x3e\n\x3ch5\x3e获得请求和响应头\x3c\/h5\x3e\n\x3col\x3e\x3cli\x3e获得请求头的方法\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22request.open(\x27GET\x27, \x27http:\/\/shaolin.com:8002\/xxx\x27)\/\/ 请求的第一部分\nrequest.setRequestHeader(\x27Content-Type\x27, \x27x-www-form-urlencoded\x27)\/\/请求的第二部分\nrequest.setRequestHeader(\x27wushao\x27, \x2718\x27) \/\/请求的第二部分\nrequest.send(\x27我要设置请求的第四部分\x27) \/\/请求的第四部分\nrequest.send(\x27name=wushao\x26amp;password=wushao\x27) \/\/请求的第四部分\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3erequest\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.open\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/shaolin.com:8002\/xxx\x27\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 请求的第一部分\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3erequest\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setRequestHeader\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27x-www-form-urlencoded\x27\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e\/\/请求的第二部分\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3erequest\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setRequestHeader\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27wushao\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x2718\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/请求的第二部分\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3erequest\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.send\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27我要设置请求的第四部分\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/请求的第四部分\x3c\/span\x3e\n\x3cspan class=\x22hljs-selector-tag\x22\x3erequest\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.send\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27name=wushao\x26amp;password=wushao\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/请求的第四部分\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对应的典型的http请求四部分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22GET \/xxx HTTP\/1.1\nHOST: http:\/\/shaolin.com:8002\nContent-Type: x-www-form-urlencoded\nwushao: 18\n\nname=wushao\x26amp;password=wushao\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs http\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3eGET\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\/xxx\x3c\/span\x3e HTTP\/1.1\n\x3cspan class=\x22hljs-attribute\x22\x3eHOST\x3c\/span\x3e: http:\/\/shaolin.com:8002\n\x3cspan class=\x22hljs-attribute\x22\x3eContent-Type\x3c\/span\x3e: x-www-form-urlencoded\n\x3cspan class=\x22hljs-attribute\x22\x3ewushao\x3c\/span\x3e: 18\n\n\x3cspan class=\x22ini\x22\x3e\x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=wushao\x26amp;password=wushao\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3col\x3e\x3cli\x3e获得响应的方法\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22request.status \/\/响应的第一部分 200\nrequest.statusText \/\/响应的第一部分 OK\nrequest.getAllResponseHeaders \/\/响应的第二部分,这个方法好啊,全部的响应头\nrequest.getResponseHeader(\x27Content-Type\x27) \/\/响应的第二部分具体的\nrequest.responseText \/\/响应的第四部分\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3erequest\x3cspan class=\x22hljs-selector-class\x22\x3e.status\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/响应的第一部分 200\x3c\/span\x3e\nrequest\x3cspan class=\x22hljs-selector-class\x22\x3e.statusText\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/响应的第一部分 OK\x3c\/span\x3e\nrequest\x3cspan class=\x22hljs-selector-class\x22\x3e.getAllResponseHeaders\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/响应的第二部分,这个方法好啊,全部的响应头\x3c\/span\x3e\nrequest.getResponseHeader(\x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/响应的第二部分具体的\x3c\/span\x3e\nrequest\x3cspan class=\x22hljs-selector-class\x22\x3e.responseText\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/响应的第四部分\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e对应的典型的http响应的四部分\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22HTTP\/1.1 200 OK\nContent-Type: text\/json;charset=utf-8\n\n{\n      \x26quot;note\x26quot; : {\n        \x26quot;to\x26quot; : \x26quot;木木\x26quot;,\n        \x26quot;from\x26quot; : \x26quot;少少\x26quot;,\n        \x26quot;heading\x26quot; : \x26quot;你好哇\x26quot;,\n        \x26quot;content\x26quot; : \x26quot;好久不见啊\x26quot;\n      }\n }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs http\x22\x3e\x3ccode\x3eHTTP\/1.1 \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e OK\n\x3cspan class=\x22hljs-attribute\x22\x3eContent-Type\x3c\/span\x3e: text\/json;charset=utf-8\n\n\x3cspan class=\x22json\x22\x3e{\n      \x3cspan class=\x22hljs-attr\x22\x3e\x22note\x22\x3c\/span\x3e : {\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22to\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22木木\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22from\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22少少\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22heading\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22你好哇\x22\x3c\/span\x3e,\n        \x3cspan class=\x22hljs-attr\x22\x3e\x22content\x22\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x22好久不见啊\x22\x3c\/span\x3e\n      }\n }\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e回顾一下各个status对应的意思\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22100\n200 === OK，请求成功\n301 === 被请求的资源已永久移动到新位置\n302 === 请求临时重定向，要求客户端执行临时重定向\n304 === 和上次请求一样，未改变\n403 === 服务器已经理解请求，但是拒绝访问\n404 === 请求失败，服务器上没有这个资源\n502 === 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。\n503 === Service Unavailable 由于临时的服务器维护或者过载，服务器当前无法处理请求。\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs basic\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e200 \x3c\/span\x3e=== OK，请求成功\n\x3cspan class=\x22hljs-symbol\x22\x3e301 \x3c\/span\x3e=== 被请求的资源已永久移动到新位置\n\x3cspan class=\x22hljs-symbol\x22\x3e302 \x3c\/span\x3e=== 请求临时重定向，要求客户端执行临时重定向\n\x3cspan class=\x22hljs-symbol\x22\x3e304 \x3c\/span\x3e=== 和上次请求一样，未改变\n\x3cspan class=\x22hljs-symbol\x22\x3e403 \x3c\/span\x3e=== 服务器已经理解请求，但是拒绝访问\n\x3cspan class=\x22hljs-symbol\x22\x3e404 \x3c\/span\x3e=== 请求失败，服务器上没有这个资源\n\x3cspan class=\x22hljs-symbol\x22\x3e502 \x3c\/span\x3e=== 作为网关或者代理工作的服务器尝试执行请求时，从上游服务器接收到无效的响应。\n\x3cspan class=\x22hljs-symbol\x22\x3e503 \x3c\/span\x3e=== Service Unavailable 由于临时的服务器维护或者过载，服务器当前无法处理请求。\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e练习一下JQuery封装AJAX\x3c\/h5\x3e\n\x3col\x3e\x3cli\x3e初级的jq封装\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e这是一个很简陋的效果，首先我还是把jq假设的很简单，就是一个window的属性，请轻喷……\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.jQuery = function (nodeOrSelector) {\n  let nodes = {}\n  nodes.addClass = function () {}\n  nodes.html = function () {}\n  return nodes\n}\n\nwindow.jQuery.ajax = function (options) {\n  let url = options.url\n  let method = options.method\n  let headers = options.headers\n  let body = options.body\n  let successFn = options.successFn\n  let failFn = options.failFn\n\n  let request = new XMLHttpRequest() \/\/实例化XMLHttpRequest对象\n  request.open(method, url) \n  for (let key in headers) {\n    let value = headers[key]\n    request.setRequestHeader(key, value)\n  }\n  request.onreadystatechange = () =\x3e {\n    if (request.readyState === 4) {\n      if (request.status \x3e= 200 \x26amp;\x26amp; request.status \x3c= 300) {\n        successFn.call(undefined, request.responseText)\n      } else if (request.status \x3e= 400)  {\n        failFn.call(undefined, request)\n      }\n    }\n  }\n  request.send(body)\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.jQuery = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3enodeOrSelector\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e nodes = {}\n  nodes.addClass = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n  nodes.html = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e nodes\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.jQuery.ajax = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e url = options.url\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e method = options.method\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e headers = options.headers\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e body = options.body\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e successFn = options.successFn\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e failFn = options.failFn\n\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e request = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e XMLHttpRequest() \x3cspan class=\x22hljs-comment\x22\x3e\/\/实例化XMLHttpRequest对象\x3c\/span\x3e\n  request.open(method, url) \n  \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e headers) {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e value = headers[key]\n    request.setRequestHeader(key, value)\n  }\n  request.onreadystatechange = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.readyState === \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.status \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e \x26amp;\x26amp; request.status \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e) {\n        successFn.call(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, request.responseText)\n      } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.status \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e)  {\n        failFn.call(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, request)\n      }\n    }\n  }\n  request.send(body)\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上就是jq对ajax的简陋的封装，ajax()方法接受一个对象作为参数，这个对象有很多键。这些键就是http请求的头的各个部分，以及一个成功函数和一个失败函数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22myButton.addEventListener(\x27click\x27, (e) =\x3e {\n    \n  window.jQuery.ajax ({\n    url: \x27\/xxx\x27,\n    method: \x27POST\x27,\n    headers: {\n      \x27content-type\x27: \x27application\/x-www-form-urlencoded\x27,\n      \x27wushao\x27: \x2718\x27\n    },\n    body: \x27a=1\x26amp;b=6\x27, \n    successFn: (x) =\x3e {\n     ...\n    }, \n    failFn: (x) =\x3e {\n     ...\n    }\n  }) \n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3emyButton.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \n  \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.jQuery.ajax ({\n    url: \x3cspan class=\x22hljs-string\x22\x3e\x27\/xxx\x27\x3c\/span\x3e,\n    method: \x3cspan class=\x22hljs-string\x22\x3e\x27POST\x27\x3c\/span\x3e,\n    headers: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27content-type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/x-www-form-urlencoded\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27wushao\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2718\x27\x3c\/span\x3e\n    },\n    body: \x3cspan class=\x22hljs-string\x22\x3e\x27a=1\x26amp;b=6\x27\x3c\/span\x3e, \n    successFn: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(x)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n     ...\n    }, \n    failFn: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(x)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n     ...\n    }\n  }) \n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上就是简化后的使用方法，给button绑定事件的时候，函数体直接就是ajax()\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e目前你会发现options这个对象傻傻的，因为总有一些用户不希望只传一个参数。所以我们稍微改造一下。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let url\n  if (arguments.length === 1) {\n    url = options.url\n  } else if (arguments.length === 2) {\n     url = arguments[0]\n     options = arguments[1]\n  }\n\n  let method = options.method\n  let headers = options.headers\n  let body = options.body\n  let successFn = options.successFn\n  let failFn = options.failFn\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs nix\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e url\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (arguments.\x3cspan class=\x22hljs-attr\x22\x3elength\x3c\/span\x3e === \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e = options.url\n  } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (arguments.\x3cspan class=\x22hljs-attr\x22\x3elength\x3c\/span\x3e === \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) {\n     \x3cspan class=\x22hljs-attr\x22\x3eurl\x3c\/span\x3e = arguments[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e]\n     \x3cspan class=\x22hljs-attr\x22\x3eoptions\x3c\/span\x3e = arguments[\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n  }\n\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3emethod\x3c\/span\x3e = options.method\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eheaders\x3c\/span\x3e = options.headers\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ebody\x3c\/span\x3e = options.body\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esuccessFn\x3c\/span\x3e = options.successFn\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3efailFn\x3c\/span\x3e = options.failFn\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e加了一点，判断ajax()的参数个数。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e一千个人有一千零一个成功或失败函数的写法，所以为了维护世界和平，大家约定俗成了一套理论 \x3cstrong\x3ePromise\x3c\/strong\x3e \x3cstrong\x3ethen( )\x3c\/strong\x3e\n\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/Promise这个对象呢，大概长这个样子，真实面目我是没见过\n\/\/简单的写一下promise\nwindow.Promise = function (fn) {\n\/\/...一些其他代码\nreturn {\n  then: function () {}\n }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/Promise这个对象呢，大概长这个样子，真实面目我是没见过\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/简单的写一下promise\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.Promise = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3efn\x3c\/span\x3e) \x3c\/span\x3e{\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/...一些其他代码\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-attr\x22\x3ethen\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3ePromise这个构造函数呢，又会返回一个函数，这个返回的函数一个then属性，value又是一个函数。处处都体现着函数是第一公民的地位！！！\x3cbr\x3e那我们可以利用这个强大的Promise对象搞一些事情了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/第一步的代码改造成这样，第一步用到了ES6的解构赋值法\nwindow.jQuery.ajax = function ({url, method, body, headers}) {\n  return new Promise(function (resolve, reject) {\n    let request = new XMLHttpRequest()\n    request.open(method, url)\n\n    for(let key in headers) {\n      let value = headers[key]\n      request.setRequestHeader(key, value)\n    }\n\n    request.onreadystatechange = () =\x3e {\n      if (request.readyState === 4) {\n        if (request.status \x3e= 200 \x26amp;\x26amp; request.status \x3c= 300) {\n          resolve.call(undefined, request.responseText)\n        } else if (request.status \x3e= 400) {\n          reject.call(undefined, request)\n        }\n      }\n    }\n    request.send(body)\n  })\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/第一步的代码改造成这样，第一步用到了ES6的解构赋值法\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.jQuery.ajax = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e{url, method, body, headers}\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eresolve, reject\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e request = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e XMLHttpRequest()\n    request.open(method, url)\n\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e key \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e headers) {\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e value = headers[key]\n      request.setRequestHeader(key, value)\n    }\n\n    request.onreadystatechange = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.readyState === \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.status \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e \x26amp;\x26amp; request.status \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e) {\n          resolve.call(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, request.responseText)\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (request.status \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e400\x3c\/span\x3e) {\n          reject.call(\x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e, request)\n        }\n      }\n    }\n    request.send(body)\n  })\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e关于解构赋值：ES6 允许按照一定模式，从数组和对象中提取值，对变量进行赋值，这被称为解构（Destructuring）\x3cbr\x3e详见\x3ca href=\x22http:\/\/es6.ruanyifeng.com\/#docs\/destructuring\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eES6解构赋值\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/经过上面这么一折腾，可以很简单的使用了\nmyButton.addEventListener(\x27click\x27, (e) =\x3e {\n   let promise = window.jQuery.ajax({\n     url: \x27\/xxx\x27,\n     method: \x27get\x27,\n     headers: {\n      \x27content-type\x27: \x27application\/x-www-form-urlencoded\x27,\n      \x27wushao\x27: \x2718\x27\n     }\n   })\n   \n   promise.then(\n     (responseText) =\x3e {\n       console.log(responseText)\n     },\n     (request) =\x3e {\n       console.log(request)\n     }\n   ) \n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e经过上面这么一折腾，可以很简单的使用了\nmyButton.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n   let promise = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.jQuery.ajax({\n     url: \x3cspan class=\x22hljs-string\x22\x3e\x27\/xxx\x27\x3c\/span\x3e,\n     method: \x3cspan class=\x22hljs-string\x22\x3e\x27get\x27\x3c\/span\x3e,\n     headers: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27content-type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/x-www-form-urlencoded\x27\x3c\/span\x3e,\n      \x3cspan class=\x22hljs-string\x22\x3e\x27wushao\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x2718\x27\x3c\/span\x3e\n     }\n   })\n   \n   promise.\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\n     \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(responseText)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n       \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(responseText)\n     },\n     \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(request)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n       \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(request)\n     }\n   ) \n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意then可以传入两个函数，第一个函数表示成功了执行这个，第二个函数表示失败了执行这个，而且可以进行链式调用，一直点下去。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e所以实际上jq的写法大多是这么写的\x3c\/li\x3e\x3c\/ol\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22myButton.addEventListener(\x27click\x27, (e) =\x3e {\n    $.ajax({\n      url: \x27\/xxx\x27,\n      type: \x27GET\x27,\n    }).then(\n      (responseText) =\x3e {\n        console.log(responseText)\n        return responseText\n      },\n      (request) =\x3e {\n        console.log(\x27error\x27)\n        return \x27已经处理\x27\n      }\n    ).then(\n      (responseText) =\x3e {\n        console.log(responseText)\n      },\n      (request) =\x3e {\n        console.log(error2)\n      }\n    )\n\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3emyButton.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x27click\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    $.ajax({\n      url: \x3cspan class=\x22hljs-string\x22\x3e\x27\/xxx\x27\x3c\/span\x3e,\n      type: \x3cspan class=\x22hljs-string\x22\x3e\x27GET\x27\x3c\/span\x3e,\n    }).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(responseText)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(responseText)\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e responseText\n      },\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(request)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27error\x27\x3c\/span\x3e)\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27已经处理\x27\x3c\/span\x3e\n      }\n    ).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(responseText)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(responseText)\n      },\n      \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(request)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(error2)\n      }\n    )\n\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e链式调用的意思就是：成功函数成功了，就执行第二个then的第一个函数；成功函数失败了，就执行第二个then的第二个函数。\x3c\/p\x3e\n\x3cp\x3e完整代码详见\x3ca href=\x22https:\/\/github.com\/codevvvv9\/AJAXDemo_nodeJsServer\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e我的gitHub\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>AJAX的出现与跨域处理</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013072204">https://segmentfault.com/a/1190000013072204</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/tzqmkebytcl/" target="_blank">https://alili.tech/archive/tzqmkebytcl/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>