<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="匠心打造Vue侧滑菜单组件"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>匠心打造Vue侧滑菜单组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/wkrnz3e43r8/",
				"appid": "1613049289050283", 
				"title": "匠心打造Vue侧滑菜单组件 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-21T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lxn9ilbvhi/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/0xsbp5ipwxbm/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&text=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&text=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&title=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&is_video=false&description=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&title=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&title=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&title=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwkrnz3e43r8%2f&title=%e5%8c%a0%e5%bf%83%e6%89%93%e9%80%a0Vue%e4%be%a7%e6%bb%91%e8%8f%9c%e5%8d%95%e7%bb%84%e4%bb%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">匠心打造Vue侧滑菜单组件</h1><div class="meta"><div class="postdate"><time datetime="2018-12-21" itemprop="datePublished">2018-12-21</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e本文介绍一个简单的DrawerLayout（类似Android的DrawerLayout）布局组件的实现，基于\x3ca href=\x22http:\/\/vuejs.org\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eVue.js\x3c\/a\x3e。介绍的内容已经制作成 \x3ca href=\x22https:\/\/github.com\/hjl19911127\/vue-drawer-layout\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-drawer-layout\x3c\/a\x3e 组件。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e大家有兴趣先用手机扫一扫这个二维码，或者\x3ca href=\x22http:\/\/chat.codehuang.com\/message\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点我\x3c\/a\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012472642?w=132\x26amp;h=132\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012472642?w=132\x26amp;h=132\x22 alt=\x22试一试\x22 title=\x22试一试\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e然后点击页面中左上角的头像打开drawer或者向右向左拖拽，就可以看到下面gif的效果，打开自己的手机QQ，是不是很像:)\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012472643\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012472643\x22 alt=\x22演示\x22 title=\x22演示\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e谷歌官方把这种布局叫做DrawerLayout（抽屉式导航栏）。那么我们要如何实现呢，好了正片开始！\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3eHTML结构\x3c\/h2\x3e\n\x3cp\x3e页面结构很简单，一个抽屉，一个主容器，内容可以利用slot支持外部自行定制。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;drawer-layout\x26quot;\x3e\n    \x3c!--抽屉--\x3e\n    \x3cdiv class=\x26quot;drawer-wrap\x26quot;\x3e\n        \x3cslot name=\x26quot;drawer\x26quot;\x3e\x3c\/slot\x3e\n    \x3c\/div\x3e\n    \x3c!--主容器--\x3e\n    \x3cdiv class=\x26quot;content-wrap\x26quot;\x3e\n        \x3c!--遮罩--\x3e\n        \x3cdiv class=\x26quot;drawer-mask\x26quot;\x3e\x3c\/div\x3e\n        \x3cslot name=\x26quot;content\x26quot;\x3e\x3c\/slot\x3e\n    \x3c\/div\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawer-layout\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--抽屉--\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawer-wrap\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawer\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--主容器--\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content-wrap\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--遮罩--\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawer-mask\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22content\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e抽屉一开始是隐藏在左侧屏幕外的，故设置\x3ccode\x3eleft:-100%\x3c\/code\x3e使其整个都藏在外部\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e使用Touch\x3c\/h2\x3e\n\x3cp\x3e首先，判断浏览器是否支持\x3ccode\x3etouchEvent\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    let isTouch = \x27ontouchstart\x27 in window;\n    let mouseEvents = isTouch ?\n        {\n            down: \x27touchstart\x27,\n            move: \x27touchmove\x27,\n            up: \x27touchend\x27,\n            over: \x27touchstart\x27,\n            out: \x27touchend\x27\n        } :\n        {\n            down: \x27mousedown\x27,\n            move: \x27mousemove\x27,\n            up: \x27mouseup\x27,\n            over: \x27mouseover\x27,\n            out: \x27mouseout\x27\n        };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e isTouch = \x3cspan class=\x22hljs-string\x22\x3e\x27ontouchstart\x27\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ein\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e mouseEvents = isTouch ?\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3edown\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3emove\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27touchmove\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eup\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27touchend\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eover\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27touchstart\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eout\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27touchend\x27\x3c\/span\x3e\n        } :\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3edown\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27mousedown\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3emove\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27mousemove\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eup\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27mouseup\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eover\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27mouseover\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-attr\x22\x3eout\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27mouseout\x27\x3c\/span\x3e\n        };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e绑定\x3ccode\x3etouchdown\x3c\/code\x3e事件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    document.addEventListener(mouseEvents.down, initDrag, false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(mouseEvents.down, initDrag, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e先定义一些变量，手指按下的x坐标记为\x3ccode\x3estartX\x3c\/code\x3e，滑动中手指的位置x坐标记为\x3ccode\x3enowX\x3c\/code\x3e，drawer的x坐标偏移量记为\x3ccode\x3estartPos\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let startX, nowX, startPos;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e startX, nowX, startPos;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e触发\x3ccode\x3etouchstart\x3c\/code\x3e时，记录起始位置并绑定\x3ccode\x3etouchmove\x3c\/code\x3e，注意：如果是\x3ccode\x3emouseEvent\x3c\/code\x3e，通过\x3ccode\x3ee.clientX\x3c\/code\x3e来获取当前的x坐标，如果是\x3ccode\x3etouchEvent\x3c\/code\x3e，要通过\x3ccode\x3ee.changedTouches[0].clientX\x3c\/code\x3e来获取x坐标\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const initDrag = function (e) {\n    startX = e.clientX || e.changedTouches[0].clientX; \/\/记录手指按下的位置\n    startPos = this.pos; \/\/记录drawer的上次位置\n    document.addEventListener(mouseEvents.move, drag, false);\n    document.addEventListener(mouseEvents.up, removeDrag, false);\n}.bind(this);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initDrag = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    startX = e.clientX || e.changedTouches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].clientX; \x3cspan class=\x22hljs-comment\x22\x3e\/\/记录手指按下的位置\x3c\/span\x3e\n    startPos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pos; \x3cspan class=\x22hljs-comment\x22\x3e\/\/记录drawer的上次位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(mouseEvents.move, drag, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(mouseEvents.up, removeDrag, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n}.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const drag = function (e) {\n    nowX = e.clientX || e.changedTouches[0].clientX; \/\/滑动中手指的位置x坐标\n    let pos = startPos \x2b nowX - startX; \n    pos = Math.min(width, pos); \/\/不能超过滑动最大值\n    pos = Math.max(0, pos); \/\/不能小于0\n    this.pos = pos; \/\/设置滚动距离为拖动的距离\n}.bind(this);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e drag = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    nowX = e.clientX || e.changedTouches[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e].clientX; \x3cspan class=\x22hljs-comment\x22\x3e\/\/滑动中手指的位置x坐标\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e pos = startPos \x2b nowX - startX; \n    pos = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(width, pos); \x3cspan class=\x22hljs-comment\x22\x3e\/\/不能超过滑动最大值\x3c\/span\x3e\n    pos = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, pos); \x3cspan class=\x22hljs-comment\x22\x3e\/\/不能小于0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pos = pos; \x3cspan class=\x22hljs-comment\x22\x3e\/\/设置滚动距离为拖动的距离\x3c\/span\x3e\n}.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e那么，手指滑动的距离就是\x3ccode\x3enowX - startX\x3c\/code\x3e，当前drawer的位置为\x3ccode\x3estartPos \x2b nowX - startX\x3c\/code\x3e，这样抽屉已经跟随手指向右移动了，并且不会超过我们设置的拖动最大值。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e区分垂直滑动和水平滑动\x3c\/h2\x3e\n\x3cp\x3e接下来你会发现一个问题，当手指垂直滚动主内容时，向右滑动手指也会拖出抽屉，这时应该做一件事：区分垂直滑动和水平滑动\x3c\/p\x3e\n\x3cp\x3e当然，办法有很多，这里先介绍一种利用三角函数来判定的方法\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012472644?w=220\x26amp;h=178\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012472644?w=220\x26amp;h=178\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e假设，上图中的每个箭头是手指滑动的方向，绿色箭头代表可以拖出抽屉，红色箭头代表不可以拖出（注意，红色箭头也是有x坐标的偏移量的）。即当不可以拖出抽屉时，应触发默认事件，比如垂直方向的滚动等等。\x3c\/p\x3e\n\x3cp\x3e当手指按下触发\x3ccode\x3etouchstart\x3c\/code\x3e时，记录初始位置P\x3csub\x3e0\x3c\/sub\x3e；当滑动手指时，触发的第一次\x3ccode\x3etouchmove\x3c\/code\x3e时，记录位置P\x3csub\x3e1\x3c\/sub\x3e，我们将P\x3csub\x3e0\x3c\/sub\x3e到P\x3csub\x3e1\x3c\/sub\x3e的矢量记为S（原谅我这个灵魂画手）\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012472646?w=364\x26amp;h=242\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012472646?w=364\x26amp;h=242\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这时候很容易看出，∠θ大于某个值时，比如30度，就可能是垂直方向的滚动操作而不是拖动抽屉。所以，可以根据\x3ccode\x3ey\/x\x26gt;tan30°\x3c\/code\x3e得到判断条件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if (isVerticle === undefined) isVerticle = Math.abs(nowY - startY) \/ Math.abs(nowX - startX) \x3e (Math.sqrt(3) \/ 3);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isVerticle === \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) isVerticle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(nowY - startY) \/ \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.abs(nowX - startX) \x26gt; (\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e) \/ \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当\x3ccode\x3eisVerticle\x3c\/code\x3e为\x3ccode\x3etrue\x3c\/code\x3e时，不执行drawer的拖动\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e让Drawer动起来\x3c\/h2\x3e\n\x3cp\x3e我们使用css3的\x3ccode\x3etransition\x3c\/code\x3e属性使drawer具有过渡动画效果，这里写一个\x3ccode\x3emoving\x3c\/code\x3e类\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.moving\n    transition transform .3s ease\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22stylus hljs\x22\x3e\x3ccode class=\x22stylus\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.moving\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attribute\x22\x3etransition\x3c\/span\x3e transform .\x3cspan class=\x22hljs-number\x22\x3e3s\x3c\/span\x3e ease\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e别忘了加上class绑定，拖动时是不需要过渡动画的（要跟随手指），而松开手指时才需要过渡动画。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cdiv class=\x26quot;drawer-wrap\x26quot; :class=\x26quot;{\x27moving\x27:moving,\x27will-change\x27:willChange}\x26quot;\n     :style=\x26quot;{width:`${width}px`,left:`-${width)}px`,transform:`translate3d(${pos}px,0,0)`}\x26quot;\x3e\n    \x3cslot name=\x26quot;drawer\x26quot;\x3e\x3c\/slot\x3e\n\x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawer-wrap\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{\x27moving\x27:moving,\x27will-change\x27:willChange}\x22\x3c\/span\x3e\n     \x3cspan class=\x22hljs-attr\x22\x3e:style\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{width:`${width}px`,left:`-${width)}px`,transform:`translate3d(${pos}px,0,0)`}\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22drawer\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以绑定\x3ccode\x3etouchend\x3c\/code\x3e事件的方法时要做这些步骤\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const removeDrag = function (e) {\n    if (isVerticle !== undefined) {\n        if (!isVerticle) {\/\/当判定为抽屉拖动才进入\n            let pos = this.pos;\n            this.visible = pos \x3e width * 3 \/ 5 \/\/当前位置如果大于总宽度的3\/5就判定为全部展开抽屉，否则将抽屉弹回隐藏\n            if (this.pos \x3e 0 \x26amp;\x26amp; this.pos \x3c width) this.moving = true;\/\/如果位置已经处于最小值或最大值处，不需要有动画效果了\n        }\n        this.pos = this.visible ? width : 0;\n    }\n    if (!this.moving) {\n        this.willChange = false; \/\/留个悬念\n    }\n    isVerticle = undefined;\n    \/\/取消touchmove和touchend事件绑定\n    document.removeEventListener(mouseEvents.move, drag, false);\n    document.removeEventListener(mouseEvents.up, removeDrag, false);\n}.bind(this);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e removeDrag = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (isVerticle !== \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!isVerticle) {\x3cspan class=\x22hljs-comment\x22\x3e\/\/当判定为抽屉拖动才进入\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e pos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pos;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible = pos \x26gt; width * \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/当前位置如果大于总宽度的3\/5就判定为全部展开抽屉，否则将抽屉弹回隐藏\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pos \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pos \x26lt; width) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.moving = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\x3cspan class=\x22hljs-comment\x22\x3e\/\/如果位置已经处于最小值或最大值处，不需要有动画效果了\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.pos = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible ? width : \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.moving) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.willChange = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/留个悬念\x3c\/span\x3e\n    }\n    isVerticle = \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/取消touchmove和touchend事件绑定\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.removeEventListener(mouseEvents.move, drag, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.removeEventListener(mouseEvents.up, removeDrag, \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n}.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面你可能发现代码里有个\x3ccode\x3ethis.willChange = false\x3c\/code\x3e，它是干啥的捏？下面我们请出css的\x3ccode\x3ewill-change\x3c\/code\x3e大法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.will-change\n    will-change transform\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22stylus hljs\x22\x3e\x3ccode class=\x22stylus\x22\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.will-change\x3c\/span\x3e\n    will-change \x3cspan class=\x22hljs-attribute\x22\x3etransform\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3eCSS 属性 will-change 为web开发者提供了一种告知浏览器该元素会有哪些变化的方法，这样浏览器可以在元素属性真正发生变化之前提前做好对应的优化准备工作。 这种优化可以将一部分复杂的计算工作提前准备好，使页面的反应更为快速灵敏。\x3c\/blockquote\x3e\n\x3cp\x3e其实是我们在\x3ccode\x3etouchstart\x3c\/code\x3e可以预先告知浏览器抽屉可能要发生位移\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const initDrag = function (e) {\n    \/\/...\n    this.willChange = true;\n}.bind(this);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e initDrag = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ee\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.willChange = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n}.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当然最后别忘了在\x3ccode\x3etransitionend\x3c\/code\x3e事件后把\x3ccode\x3etransition\x3c\/code\x3e和\x3ccode\x3ewill-change\x3c\/code\x3e去掉，让浏览器歇一会儿~\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e还有什么可以优化的？\x3c\/h2\x3e\n\x3cp\x3e上面说的已经基本上把主要功能实现了，但是这其中还有没有哪里可以优化的？\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012472647?w=1484\x26amp;h=28\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012472647?w=1484\x26amp;h=28\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e咦？\x3ccode\x3epassive\x3c\/code\x3e是什么鬼？\x3c\/p\x3e\n\x3cblockquote\x3e网站使用被动事件侦听器以提升滚动性能，在您的触摸和滚轮事件侦听器上设置 passive 选项可提升滚动性能 \x3ca href=\x22https:\/\/developers.google.com\/web\/tools\/lighthouse\/audits\/passive-event-listeners?hl=zh-cn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e具体看这里\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e原来这是现代浏览器的一个新特性，我们需要以新的方式来绑定我们的touch事件，当然首先先检测一下是否支持\x3ccode\x3epassive\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const supportsPassive = (() =\x3e {\n    let supportsPassive = false;\n    try {\n        const opts = Object.defineProperty({}, \x27passive\x27, {\n            get: function () {\n                supportsPassive = true;\n            }\n        });\n        window.addEventListener(\x26quot;test\x26quot;, null, opts);\n    } catch (e) {\n    }\n    return supportsPassive;\n})();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e supportsPassive = \x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3e(\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e supportsPassive = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3etry\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e opts = \x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.defineProperty({}, \x3cspan class=\x22hljs-string\x22\x3e\x27passive\x27\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-attr\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                supportsPassive = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n            }\n        });\n        \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.addEventListener(\x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, opts);\n    } \x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e (e) {\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e supportsPassive;\n})();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e于是我们的绑定事件代码变成这样\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22document.addEventListener(mouseEvents.move, drag, supportsPassive ? {passive: true} : false);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.addEventListener(mouseEvents.move, drag, supportsPassive ? {\x3cspan class=\x22hljs-attr\x22\x3epassive\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e} : \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e是否有效果呢？有兴趣的朋友可以\x3ca href=\x22https:\/\/developers.google.com\/web\/updates\/2016\/06\/passive-event-listeners?hl=zh-cn\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e点这里\x3c\/a\x3e看国外大神的视频\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e写在最后\x3c\/h2\x3e\n\x3cp\x3e本文介绍了实现抽屉式导航栏的主要过程，详细代码已封装成\x3ca href=\x22https:\/\/github.com\/hjl19911127\/vue-drawer-layout\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-drawer-layout\x3c\/a\x3e组件，支持更丰富的定制和使用方式，具体文档可以访问我的\x3ca href=\x22https:\/\/github.com\/hjl19911127\/vue-drawer-layout\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e或者\x3ca href=\x22https:\/\/www.npmjs.com\/package\/vue-drawer-layout\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enpm\x3c\/a\x3e官网检索。欢迎各位多多提issue，不吝赐教，感谢！\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>匠心打造Vue侧滑菜单组件</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012472637">https://segmentfault.com/a/1190000012472637</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/wkrnz3e43r8/" target="_blank">https://alili.tech/archive/wkrnz3e43r8/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>