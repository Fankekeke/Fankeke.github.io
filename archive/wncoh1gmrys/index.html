<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="React 设计模式和场景分析"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>React 设计模式和场景分析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/wncoh1gmrys/",
				"appid": "1613049289050283", 
				"title": "React 设计模式和场景分析 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-04T02:30:05"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/18wpz39xcbg/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/0q7rtlrfe1k/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&text=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&text=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&title=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&is_video=false&description=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&title=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&title=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&title=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwncoh1gmrys%2f&title=React%20%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e5%92%8c%e5%9c%ba%e6%99%af%e5%88%86%e6%9e%90"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">React 设计模式和场景分析</h1><div class="meta"><div class="postdate"><time datetime="2018-12-04" itemprop="datePublished">2018-12-04</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014482098\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014482098\x22 alt=\x22Kygo on live\x22 title=\x22Kygo on live\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这一周连续发表了两篇关于 React 的文章：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/35789551\x22 rel=\x22nofollow noreferrer\x22\x3e组件复用那些事儿 - React 实现按需加载轮子\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/35833143\x22 rel=\x22nofollow noreferrer\x22\x3eReact 应用设计之道 - curry 化妙用\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e其中涉及到 React 组件复用、轮子设计相关话题，并配合相关场景实例进行了分析。这些内容都算是 React 设计模式，一提到 Design Patterns，读者大可不必恐惧，事实上这都是 React 开发应用灵活性的体现。今天这篇文章，我们继续通过一个场景，循序渐进，通过一步步优化设计来进行加深理解。\x3c\/p\x3e\n\x3ch2\x3e场景介绍\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014482099?w=435\x26amp;h=408\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014482099?w=435\x26amp;h=408\x22 alt=\x22页面展现\x22 title=\x22页面展现\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e屏幕左侧大面积展现区块内容，点击 continue 按钮，切换为下条内容信息；右侧是一个导航条，指示当前区块展示信息条目。\x3c\/p\x3e\n\x3cp\x3e如果看 Gif 图不过瘾，可以到 \x3ca href=\x22https:\/\/codesandbox.io\/s\/5x22900pnl?from-embed\x22 rel=\x22nofollow noreferrer\x22\x3eCodeSandbox\x3c\/a\x3e 进行在线了解。\x3c\/p\x3e\n\x3cp\x3e具体代码结构为：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eclass App extends Component {\n  render() {\n    return (\n        \x26lt;Stepper stage={1}\/\x26gt;\n    );\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eStepper 组件 \x27stage\x27 prop 表示默认开始第几个区块，同时具用同名 \x27stage\x27 状态。stage 在这里表示左侧一个个内容区块。\x3cbr\x3ehandleClick 方法对 this.stata.stage 进行切换。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e\nclass Stepper extends Component {\n  state = {\n    stage: this.props.stage\n  }\n  static defaultProps = {\n    stage: 1\n  }\n  handleClick = () =\x26gt; {\n    this.setState({ stage: this.state.stage \x2b 1 })\n  }\n  render() {\n    const { stage } = this.state;\n    return (\n      \x26lt;div style={styles.container}\x26gt;\n            \x26lt;Progress stage={stage}\/\x26gt;\n            \x26lt;Steps handleClick={this.handleClick} stage={stage}\/\x26gt;\n      \x26lt;\/div\x26gt;\n    );\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们看到，Stepper 组件包含 Progress 组件（左侧导航）以及 Steps 组件。\x3cbr\x3e这样的代码运行良好，但是在复用性和灵活性上有一些问题。比如：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e如果我们需要切换 Progress 和 Steps 组件（左右）展示顺序怎么办？\x3c\/li\x3e\n\x3cli\x3e如果我们的 Stepper 需要承载更多的 stages 怎么办？\x3c\/li\x3e\n\x3cli\x3e如果我们需要更改某个 stage 内容怎么办？\x3c\/li\x3e\n\x3cli\x3e如果我们想要切换 stages 顺序该怎么办？\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e现有代码基础上，这些问题都可以解决。但是需要重新更改组件编写内容。如果某天又新增或者调整了需求，组件内容同样又需要改写。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e接下来，我们用另一种方式实现需求，使得代码更加灵活，复用性更强。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch2\x3e重新设计\x3c\/h2\x3e\n\x3cp\x3e仔细观察 Stepper 组件：它包含了当前区块 stage，以及一个更改 stage 的方法，渲染了两个子组件。\x3c\/p\x3e\n\x3cp\x3e我们使用 Function as Child Component 手段，将 Stepper 组件重构。（如果对 Function as Child Component 不熟悉，请参考我之前文章 \x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/35789551\x22 rel=\x22nofollow noreferrer\x22\x3e组件复用那些事儿 - React 实现按需加载轮子\x3c\/a\x3e）\x3c\/p\x3e\n\x3cp\x3e如下图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014482100\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014482100\x22 alt=\x22 Function as Child Component 重构\x22 title=\x22 Function as Child Component 重构\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3eProgress 和 Steps 组件不再直接出现在 Stepper 组件的 render 方法中。我们使用 this.props.children 对 Stepper 组件的所有子组件进行渲染。这样 Stepper 组件渲染的内容更加灵活。\x3c\/p\x3e\n\x3cp\x3e但是仅仅这样的修改是不可能完成需求的，当用户点击 continue 按钮，stage 并不会进行切换。因为 Progress 和 Steps 组件无法再通过 props 感知 stage 和 handleClick 方法。\x3c\/p\x3e\n\x3cp\x3e为了解决这个问题，\x3cstrong\x3e我们可以手动遍历 Stepper 组件的子节点，并对相应 props 一一注入\x3c\/strong\x3e。如下代码：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3econst children = React.Children.map(this.props.children, child =\x26gt; {\n        return React.cloneElement(child, {stage, handleClick: this.handleClick})\n    })\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e借助 React.Children.map 进行子节点遍历，并通过 React.cloneElement 方法对子组件进行拷贝，这个方法通过第二个参数，具有添加额外 props 的能力。Stepper 组件的 render 方法只需要具体应用：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3econst { stage } = this.state;\nconst children = React.Children.map(this.props.children, child =\x26gt; {\n    return React.cloneElement(child, {stage, handleClick: this.handleClick})\n})\nreturn (\n    \x26lt;div style={styles.container}\x26gt;\n        {children}\n    \x26lt;\/div\x26gt;\n    );\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样一来，应用又一次正确运转！\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eclass App extends Component {\n  render() {\n    return (\n      \x26lt;div\x26gt;\n        \x26lt;Stepper stage={1}\x26gt;\n          \x26lt;Progress \/\x26gt;\n          \x26lt;Steps \/\x26gt;\n        \x26lt;\/Stepper\x26gt;\n      \x26lt;\/div\x26gt;\n    );\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样的手段，我们也可以应用到 Progress 组件当中。这里不再一一展开。\x3c\/p\x3e\n\x3ch2\x3e使用 Static Properties\x3c\/h2\x3e\n\x3cp\x3e值得一提的是，我们可以使用 Static Properties 增强代码的可读性。Static Properties 允许我们在 class 当中直接对方法进行调用。首先，我们在 Stepper 组件中创建两个 static 方法，并赋值给 Progress 组件和 Steps 组件：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3estatic Progress = Progress;\nstatic Steps = Steps\n\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e现在，在 App.js 中我们可以直接：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e\nimport React, { Component } from \x27react\x27;\nimport Stepper from \x22.\/Stepper\x22\n\nclass App extends Component {\n  render() {\n    return (\n      \x26lt;Stepper stage={1}\x26gt;\n        \x26lt;Stepper.Progress \/\x26gt;\n        \x26lt;Stepper.Steps \/\x26gt;\n      \x26lt;\/Stepper\x26gt;\n    );\n  }\n}\nexport default App;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样的好处体现在不用一次次地 import 进来 Progress 组件和 Steps 组件，它们都将作为 Stepper 的静态属性出现。我个人并不是很喜欢这种做法。\x3c\/p\x3e\n\x3ch2\x3e使用 React Transition Group\x3c\/h2\x3e\n\x3cp\x3e我们使用 React Transition Group 对 Steps 组件内容添加过渡动画。只有当 props.num 与 this.props.stage 相等时，区块内容设置为可见：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3e\nclass Steps extends Component {\n    render() {\n        const {stage,handleClick} = this.props\n        const children = React.Children.map(this.props.children, child =\x26gt; {\n            console.log(child.props)\n            return (\n                stage === child.props.num \x26amp;\x26amp;\n                \x26lt;Transition appear={true} timeout={300} onEntering={entering} onExiting={exiting}\x26gt;\n                    {child}\n                \x26lt;\/Transition\x26gt;\n            )\n        })\n        return (\n            \x26lt;div style={styles.stagesContainer}\x26gt;\n                \x26lt;div style={styles.stages}\x26gt;\n                    \x26lt;TransitionGroup\x26gt;\n                        {children}\n                    \x26lt;\/TransitionGroup\x26gt;\n                \x26lt;\/div\x26gt;\n                \x26lt;div style={styles.stageButton}\x26gt;\n                    \x26lt;Button disabled={stage === 4} click={handleClick}\x26gt;Continue\x26lt;\/Button\x26gt;\n                \x26lt;\/div\x26gt;\n            \x26lt;\/div\x26gt;\n        );\n    }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们也可以给 Steps 组件添加任意个内容：\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eimport Stepper from \x22.\/Stepper\x22\n\nclass App extends Component {\n  render() {\n    return (\n        \x26lt;Stepper stage={1}\x26gt;\n          \x26lt;Stepper.Progress\x26gt;\n            \x26lt;Stepper.Stage num={1} \/\x26gt;\n            \x26lt;Stepper.Stage num={2} \/\x26gt;\n            \x26lt;Stepper.Stage num={3} \/\x26gt;\n          \x26lt;\/Stepper.Progress\x26gt;\n          \x26lt;Stepper.Steps\x26gt;\n            \x26lt;Stepper.Step num={1} text={\x22Stage 1\x22}\/\x26gt;\n            \x26lt;Stepper.Step num={2} text={\x22Stage 2\x22}\/\x26gt;\n            \x26lt;Stepper.Step num={3} text={\x22Stage 3\x22}\/\x26gt;\n            \x26lt;Stepper.Step num={4} text={\x22Stage 4\x22}\/\x26gt;\n          \x26lt;\/Stepper.Steps\x26gt;\n        \x26lt;\/Stepper\x26gt;\n    );\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e重新设计之后，整个应用变得更加灵活，复用性更强。我们可以指定任意个 stages，每一个 stage 文本内容也可以自定义设置，同样 stages 排列顺序等都可以随意搭配。\x3c\/p\x3e\n\x3cp\x3e重构代码以及效果可以访问\x3ca href=\x22https:\/\/codesandbox.io\/s\/5x22900pnl?from-embed\x22 rel=\x22nofollow noreferrer\x22\x3e这里\x3c\/a\x3e查看。\x3c\/p\x3e\n\x3ch2\x3e思考及待续\x3c\/h2\x3e\n\x3cp\x3e如果你觉得上述代码完美无懈可击，那显然想简单了。需求是变化多端的，如果我们想在 Steps 区块上，加一个大标题呢？\x3c\/p\x3e\n\x3cpre\x3e\x3ccode\x3eclass App extends Component {\n  render() {\n    return (\n        \x26lt;Stepper stage={1}\x26gt;\n          \x26lt;Stepper.Progress\x26gt;\n            \x26lt;Stepper.Stage num={1} \/\x26gt;\n            \x26lt;Stepper.Stage num={2} \/\x26gt;\n            \x26lt;Stepper.Stage num={3} \/\x26gt;\n          \x26lt;\/Stepper.Progress\x26gt;\n          \x26lt;div\x26gt;\n            \x26lt;div\x26gt;Title\x26lt;\/div\x26gt;\n            \x26lt;Stepper.Steps\x26gt;\n              \x26lt;Stepper.Step num={1} text={\x22Stage 1\x22}\/\x26gt;\n              \x26lt;Stepper.Step num={2} text={\x22Stage 2\x22}\/\x26gt;\n              \x26lt;Stepper.Step num={3} text={\x22Stage 3\x22}\/\x26gt;\n              \x26lt;Stepper.Step num={4} text={\x22Complete!\x22}\/\x26gt;\n            \x26lt;\/Stepper.Steps\x26gt;\n          \x26lt;\/div\x26gt;\n        \x26lt;\/Stepper\x26gt;\n    );\n  }\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如图，\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000014482101\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000014482101\x22 alt=\x22加入标题\x22 title=\x22加入标题\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这样一来，Stepper.Steps 组件再也不是 Stepper 组件的直接唯一子节点了，那预期之中的 props 自然又一次无法取得！\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e问题也不仅仅于此\x3c\/strong\x3e。笔者本人不是很喜欢类似 React.cloneElement 顶层 API，除了偏好以外，也有一个难以规避的问题：\x3cstrong\x3e在使用 React.cloneElement 扩充 props 时，如果出现 props 命名冲突怎么办？\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e比如一个 \x26lt;input\x26gt; 遇见了命名为 value 的 prop，后果可想而知。\x3c\/p\x3e\n\x3cp\x3e那么问题来了，是否有更优雅高效的方法解决上述问题？或者，是否有更好的方式，实现更灵活的设计？\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e答案一定是有的，我将会留在下一篇文章进行讲解。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e本文源于：\x3ca href=\x22https:\/\/itnext.io\/using-advanced-design-patterns-to-create-flexible-and-reusable-react-components-part-1-dd495fa1823\x22 rel=\x22nofollow noreferrer\x22\x3eHow To Master Advanced React Design Patterns\x3c\/a\x3e，部分内容有改动。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e广告时间：\x3c\/strong\x3e\x3cbr\x3e如果你对前端发展，尤其对 React 技术栈感兴趣：我的新书中，也许有你想看到的内容。关注作者 \x3ca href=\x22https:\/\/www.zhihu.com\/people\/lucas-hc\/activities\x22 rel=\x22nofollow noreferrer\x22\x3eLucas HC\x3c\/a\x3e，新书出版将会有送书活动。\x3c\/p\x3e\n\x3cp\x3eHappy Coding!\x3c\/p\x3e\n\x3cp\x3ePS: 作者\x26nbsp;\x3ca href=\x22http:\/\/link.zhihu.com\/?target=https%3A\/\/github.com\/HOUCe\x22 rel=\x22nofollow noreferrer\x22\x3eGithub仓库\x3c\/a\x3e\x26nbsp;和\x26nbsp;\x3ca href=\x22https:\/\/www.zhihu.com\/people\/lucas-hc\/answers\x22 rel=\x22nofollow noreferrer\x22\x3e知乎问答链接\x3c\/a\x3e\x26nbsp;欢迎各种形式交流！\x3c\/p\x3e\n\x3cp\x3e我的其他几篇关于React技术栈的文章：\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/28905707\x22 rel=\x22nofollow noreferrer\x22\x3e从setState promise化的探讨 体会React团队设计思想\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/35833143\x22 rel=\x22nofollow noreferrer\x22\x3eReact 应用设计之道 - curry 化妙用\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/35789551\x22 rel=\x22nofollow noreferrer\x22\x3e组件复用那些事儿 - React 实现按需加载轮子\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/27825741\x22 rel=\x22nofollow noreferrer\x22\x3e通过实例，学习编写 React 组件的“最佳实践”\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/27727292\x22 rel=\x22nofollow noreferrer\x22\x3eReact 组件设计和分解思考\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/zhuanlan.zhihu.com\/p\/28905707\/edit\x22 rel=\x22nofollow noreferrer\x22\x3e从 React 绑定 this，看 JS 语言发展和框架设计\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/link.zhihu.com\/?target=http%3A\/\/www.jianshu.com\/p\/49029b49f2b4\x22 rel=\x22nofollow noreferrer\x22\x3e做出Uber移动网页版还不够 极致性能打造才见真章**\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/link.zhihu.com\/?target=http%3A\/\/www.jianshu.com\/p\/cde3cf7e2760\x22 rel=\x22nofollow noreferrer\x22\x3eReact\x2bRedux打造“NEWS EARLY”单页应用 一个项目理解最前沿技术栈真谛\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>React 设计模式和场景分析</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014482093">https://segmentfault.com/a/1190000014482093</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/wncoh1gmrys/" target="_blank">https://alili.tech/archive/wncoh1gmrys/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>