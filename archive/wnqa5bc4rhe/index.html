<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Mpvue 小程序转 Web 实践总结"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Mpvue 小程序转 Web 实践总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/wnqa5bc4rhe/",
				"appid": "1613049289050283", 
				"title": "Mpvue 小程序转 Web 实践总结 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-09T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lwfk0wapcsd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/a2b69jmmlof/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&text=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&text=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&title=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&is_video=false&description=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&title=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&title=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&title=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fwnqa5bc4rhe%2f&title=Mpvue%20%e5%b0%8f%e7%a8%8b%e5%ba%8f%e8%bd%ac%20Web%20%e5%ae%9e%e8%b7%b5%e6%80%bb%e7%bb%93"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Mpvue 小程序转 Web 实践总结</h1><div class="meta"><div class="postdate"><time datetime="2018-12-09" itemprop="datePublished">2018-12-09</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e介绍\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/Meituan-Dianping\/mpvue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMpvue\x3c\/a\x3e 是一个使用 Vue.js 开发小程序的前端框架。框架基于 Vue.js 核心，修改了 Vue.js 的 runtime 和 compiler 实现，使其可以运行在小程序环境中，从而为小程序开发引入了整套 Vue.js 开发体验，同样也使得一套代码同时复用在小程序和 Web 中成为可能。本文将以 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eIT之家Lite\x3c\/a\x3e 小程序的 Web 转换经过为线索，大致介绍一下转换的基本步骤及需要注意的一些事项。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e目录结构\x3c\/h2\x3e\n\x3cblockquote\x3e省略了部分与转换无关的文件\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22├─build\n├─config\n├─src\n│ ├─components\n│ ├─pages\n│ ├─store\n│ ├─styles\n│ ├─utils\n│ │  ├─api.js\n│ │  ├─index.js\n│ │  ├─request.js\n│ │  └─wx.js\n│ ├─App.vue\n│ └─main.js\n├─package-lock.json\n└─package.json\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e├─build\n├─config\n├─src\n│ ├─components\n│ ├─pages\n│ ├─store\n│ ├─styles\n│ ├─utils\n│ │  ├─api\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│ │  ├─index\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│ │  ├─request\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│ │  └─wx\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n│ ├─App\x3cspan class=\x22hljs-selector-class\x22\x3e.vue\x3c\/span\x3e\n│ └─main\x3cspan class=\x22hljs-selector-class\x22\x3e.js\x3c\/span\x3e\n├─package-lock\x3cspan class=\x22hljs-selector-class\x22\x3e.json\x3c\/span\x3e\n└─package.json\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e转换步骤\x3c\/h2\x3e\n\x3cp\x3e0.前期准备\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e建议使用 git 进行分支管理\x3c\/li\x3e\n\x3cli\x3e尽量避免使用不必要的小程序特有标签，如 text，image 等 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/9137744e25000cbaa82529639976b3ddea3b5f1b\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#9137744\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3e避免直接使用 wx 对象，使用 \x3ccode\x3eimport wx from \x27wx\x27\x3c\/code\x3e 的方式引入，便于 web 中改写 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/c3ef6e771dc6e767fed9316fd62bed53581763f2\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#c3ef6e7\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/utils\/wx.js\nexport default wx\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/utils\/wx.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e wx\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3e使用 \x3ca href=\x22https:\/\/github.com\/wendux\/fly\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eflyio\x3c\/a\x3e 作为请求库，配置 alias 将 flyio 指向 \x3ccode\x3eflyio\/dist\/npm\/wx\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e基于原分支新建 web-version 分支\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e1.修改打包配置\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e可以在原有配置基础上修改，主要涉及 entry、target 及 loader 相关的配置项，这里我直接通过 vue-cli 生成了一个新的项目，复制 build、config 文件夹及 eslint、babel 等的配置文件替换原有配置，使用新项目的 package.json 并做相应修改，新建项目时各选项尽量与原项目保持一致 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/ece3a76590df79a3ee19e2fa0a4c7ce07cb77227\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#ece3a76\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3e修改 main.js，指定挂载元素，顺利的话，这步之后执行 \x3ccode\x3enpm run dev\x3c\/code\x3e 便已经可以跑起来了，有报错的话解决相应错误即可\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e2.配置路由\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e添加 vue-router，并进行相应配置，建议使用 history 模式 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/ddf94bca7d432ee7ac436f74ed27b4d6bf482e6e\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#ddf94bc\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3e修改路由参数获取相关的代码 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/b9491979a07940cfb9dd690fb26833cc71d0184d\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#b949197\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3e使用 router-link 替换 a 标签，避免页面重载 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/eb092972647bb6d903f02bba3c6e38335d1b8b90\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#eb09297\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e3.调整请求接口\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e配置 alias 将 flyio 指向 \x3ccode\x3eflyio\/dist\/npm\/fly\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e小程序中不会有跨域的问题，但 web 中需配合后端进行请求转发或通过其他方式来解决这一问题 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/f96397539da68b31d05bc7c84b9208b565d3fc55\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#f963975\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e4.转换小程序组件及 API\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e底部导航栏，自己布局实现 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/8d6d98bb477cd001c1f0168b5b13e7a77bdf56cb\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#8d6d98b\x3c\/a\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22.nav(v-if=\x26quot;$route.meta.nav\x26quot;)\n  a.nav-item(href=\x26quot;\/pages\/news\/list\x26quot;)\n    img.nav-icon(v-if=\x26quot;$route.name === \x27NewsList\x27\x26quot;, src=\x26quot;\/static\/assets\/news-active.png\x26quot;)\n    img.nav-icon(v-else, src=\x26quot;\/static\/assets\/news.png\x26quot;)\n    .nav-title(:class=\x26quot;{ active: $route.name === \x27NewsList\x27 }\x26quot;) 资讯\n  a.nav-item(href=\x26quot;\/pages\/quanzi\/list\x26quot;)\n    img.nav-icon(v-if=\x26quot;$route.name === \x27QuanziList\x27\x26quot;, src=\x26quot;\/static\/assets\/quanzi-active.png\x26quot;)\n    img.nav-icon(v-else, src=\x26quot;\/static\/assets\/quanzi.png\x26quot;)\n    .nav-title(:class=\x26quot;{ active: $route.name === \x27QuanziList\x27 }\x26quot;) 圈子\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode class=\x22pug\x22\x3e.nav(v-\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22$route.meta.nav\x22\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e.nav-item(href=\x3cspan class=\x22hljs-string\x22\x3e\x22\/pages\/news\/list\x22\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e.nav-\x3cspan class=\x22hljs-attribute\x22\x3eicon\x3c\/span\x3e(v-if=\x3cspan class=\x22hljs-string\x22\x3e\x22$route.name === \x27NewsList\x27\x22\x3c\/span\x3e, src=\x3cspan class=\x22hljs-string\x22\x3e\x22\/static\/assets\/news-active.png\x22\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e.nav-\x3cspan class=\x22hljs-attribute\x22\x3eicon\x3c\/span\x3e(v-else, src=\x3cspan class=\x22hljs-string\x22\x3e\x22\/static\/assets\/news.png\x22\x3c\/span\x3e)\n    .nav-title(:class=\x3cspan class=\x22hljs-string\x22\x3e\x22{ active: $route.name === \x27NewsList\x27 }\x22\x3c\/span\x3e) 资讯\n  \x3cspan class=\x22hljs-selector-tag\x22\x3ea\x3c\/span\x3e.nav-item(href=\x3cspan class=\x22hljs-string\x22\x3e\x22\/pages\/quanzi\/list\x22\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e.nav-\x3cspan class=\x22hljs-attribute\x22\x3eicon\x3c\/span\x3e(v-if=\x3cspan class=\x22hljs-string\x22\x3e\x22$route.name === \x27QuanziList\x27\x22\x3c\/span\x3e, src=\x3cspan class=\x22hljs-string\x22\x3e\x22\/static\/assets\/quanzi-active.png\x22\x3c\/span\x3e)\n    \x3cspan class=\x22hljs-selector-tag\x22\x3eimg\x3c\/span\x3e.nav-\x3cspan class=\x22hljs-attribute\x22\x3eicon\x3c\/span\x3e(v-else, src=\x3cspan class=\x22hljs-string\x22\x3e\x22\/static\/assets\/quanzi.png\x22\x3c\/span\x3e)\n    .nav-title(:class=\x3cspan class=\x22hljs-string\x22\x3e\x22{ active: $route.name === \x27QuanziList\x27 }\x22\x3c\/span\x3e) 圈子\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\n\x3cli\x3erich-text 组件，使用 v-html 实现 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/1945f3f7bbe62b9a6913701910775739ac433909\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#1945f3f\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3eswiper 组件，使用 \x3ca href=\x22https:\/\/github.com\/zwhGithub\/vue-swiper\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-swiper-component\x3c\/a\x3e 实现 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/f4a4e1a094d08a274782ef19e0e5361f5d546557\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#f4a4e1a\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3etoast 及 loading 接口，使用 \x3ca href=\x22https:\/\/github.com\/lin-xin\/vue-toast\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue2-toast\x3c\/a\x3e 实现 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/cb1d9d3f75e9fbf42d2b98f80a51e124de52a38c\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#cb1d9d3\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ src\/utils\/wx.js\nimport Vue from \x27vue\x27\n\nexport default {\n  showNavigationBarLoading () {\n    Vue.prototype.$loading(\x27加载中\x27)\n  },\n  hideNavigationBarLoading () {\n    Vue.prototype.$loading.close()\n  },\n  showToast ({ title }) {\n    Vue.prototype.$toast.center(title)\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ src\/utils\/wx.js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3eexport\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3edefault\x3c\/span\x3e {\n  showNavigationBarLoading () {\n    Vue.prototype.$loading(\x3cspan class=\x22hljs-string\x22\x3e\x27加载中\x27\x3c\/span\x3e)\n  },\n  hideNavigationBarLoading () {\n    Vue.prototype.$loading.close()\n  },\n  showToast ({ title }) {\n    Vue.prototype.$toast.center(title)\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e下拉刷新及上拉加载，使用 \x3ca href=\x22https:\/\/github.com\/stackjie\/vue-pull-to\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3evue-pull-to\x3c\/a\x3e 实现 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/38647dba1f4552cb1fb316ba00e33170b4330102\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#38647db\x3c\/a\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\x3cp\x3e5.Web 优化\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e使用 \x3ca href=\x22https:\/\/github.com\/jgthms\/minireset.css\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eminireset\x3c\/a\x3e 重置浏览器默认样式，部分标签在小程序中的默认样式与浏览器不同，也需进行处理 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/e98f5ba8cdced6cbe0c9a14beb22ecd457884123\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#e98f5ba\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3e引入 \x3ca href=\x22https:\/\/github.com\/babel\/babel\/tree\/master\/packages\/babel-polyfill\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebabel-polyfill\x3c\/a\x3e，提高兼容性 \x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\/commit\/c1841663bf56c308229380f4400bd68b4c54b2b3\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e#c184166\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e维护\x3c\/h2\x3e\n\x3cp\x3e在初步完成 Web 版的转换之后，便可以再次切换回主分支，后续的 feature 及 bugfix 均在主分支进行，待主分支发版后切换到 web 分支进行一次合并操作，可能会产生少量冲突，但也都会比较容易解决，最后处理下新引入的小程序特性即可，整体而言可维护性还是比较好的\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e总结\x3c\/h2\x3e\n\x3cp\x3e整个转换过程还是比较顺利的，主体部分约 1 个多小时完成，相对于小程序 web 的环境更为开放，所以大部分小程序的 api 可以通过各种方式模拟，由于是在两个不同的分支进行，也可以放心地使用各种浏览器端地特性，下面是几点开发及转换中的建议：\x3c\/p\x3e\n\x3cul\x3e\x3cli\x3e下拉刷新及上拉加载尽量以 method 的形式实现，便于 web 中复用\x3c\/li\x3e\x3c\/ul\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22onPullDownRefresh () {\n  this.refresh()\n},\nonReachBottom () {\n  this.loadmore()\n},\nmethods: {\n  ...mapActions([\n    \x27getSlides\x27,\n    \x27getNews\x27\n  ]),\n  async refresh () {\n    await Promise.all([\n      this.getNews({ r: 2, init: true }),\n      this.getSlides()\n    ])\n    wx.stopPullDownRefresh()\n  },\n  loadmore () {\n    const { news } = this\n    const lastnews = news[news.length - 1]\n    this.getNews({ r: Date.parse(new Date(lastnews.postdate)) })\n  },\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3eonPullDownRefresh () {\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.refresh()\n},\nonReachBottom () {\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.loadmore()\n},\n\x3cspan class=\x22hljs-attr\x22\x3emethods\x3c\/span\x3e: {\n  ...mapActions([\n    \x3cspan class=\x22hljs-string\x22\x3e\x27getSlides\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27getNews\x27\x3c\/span\x3e\n  ]),\n  \x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e refresh () {\n    \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e.all([\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getNews({ \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-attr\x22\x3einit\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e }),\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getSlides()\n    ])\n    wx.stopPullDownRefresh()\n  },\n  loadmore () {\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e { news } = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e lastnews = news[news.length - \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getNews({ \x3cspan class=\x22hljs-attr\x22\x3er\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e.parse(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e(lastnews.postdate)) })\n  },\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cul\x3e\x3cli\x3e样式及脚本尽量不要直接修改原有代码，可通过 mixin、新建 style 标签等方式实现，避免造成冲突\x3c\/li\x3e\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e展望\x3c\/h2\x3e\n\x3cul\x3e\n\x3cli\x3e双端统一的 UI 库，目前来看只能使用一些简单的 css 类库\x3c\/li\x3e\n\x3cli\x3e更好的路由支持，理想状态下，可以通过 vue-router 的配置文件自动生成各页面的 main.js 文件，并配置 entry，开发 .vue 文件时，可以直接使用 \x3ccode\x3ethis.$route\x3c\/code\x3e \x3ccode\x3ethis.$router\x3c\/code\x3e 及 \x3ccode\x3erouter-link\x3c\/code\x3e 完成相关操作，避免每次手动修改\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e附\x3c\/h2\x3e\n\x3col\x3e\x3cli\x3eGit 仓库\x3c\/li\x3e\x3c\/ol\x3e\n\x3cul\x3e\n\x3cli\x3eMpvue：\x3ca href=\x22https:\/\/github.com\/Meituan-Dianping\/mpvue\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/Meituan-Dianping\/mpvue\x3c\/a\x3e\n\x3c\/li\x3e\n\x3cli\x3eIT之家Lite：\x3ca href=\x22https:\/\/github.com\/F-loat\/ithome-lite\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/F-loat\/ithome-lite\x3c\/a\x3e\n\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3col\x3e\x3cli\x3eDemo\x3c\/li\x3e\x3c\/ol\x3e\n\x3cul\x3e\x3cli\x3eIT之家Lite Web 版: \x3ca href=\x22http:\/\/ithome.f-loat.xyz\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/ithome.f-loat.xyz\x3c\/a\x3e\n\x3c\/li\x3e\x3c\/ul\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Mpvue 小程序转 Web 实践总结</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013977813">https://segmentfault.com/a/1190000013977813</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/wnqa5bc4rhe/" target="_blank">https://alili.tech/archive/wnqa5bc4rhe/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>