<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="http,ajax,$.ajax,vue-resource,axios的知识大串联"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>http,ajax,$.ajax,vue-resource,axios的知识大串联 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/xguyruf1y4/",
				"appid": "1613049289050283", 
				"title": "http,ajax,$.ajax,vue-resource,axios的知识大串联 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-10T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/q9um4pcjud/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/df7x1upzgv6/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&text=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&text=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&title=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&is_video=false&description=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&title=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&title=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&title=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fxguyruf1y4%2f&title=http%2cajax%2c%24.ajax%2cvue-resource%2caxios%e7%9a%84%e7%9f%a5%e8%af%86%e5%a4%a7%e4%b8%b2%e8%81%94"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">http,ajax,$.ajax,vue-resource,axios的知识大串联</h1><div class="meta"><div class="postdate"><time datetime="2018-12-10" itemprop="datePublished">2018-12-10</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cblockquote\x3e前端越来越工程化,而ajax是整个前端的核心,所以ES规则和各种封装的工具类越来越多;\x3cbr\x3e借此机会我把http,XMLHttpRequest,ajax,$.ajax,vue-resource,axios做了一个知识大串联,本文主要是侧重将知识串成一条线,自己也复习下,希望也能帮到你们\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e1.http请求\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e1.1 什么是http\x3c\/h3\x3e\n\x3cp\x3ehttp是超文本传输协议英文简称,是基于TCP\/IP通信协议来传递数据。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e1.2三个特点\x3c\/h3\x3e\n\x3cp\x3e1.HTTP是无连接：每次只处理一个请求,处理完毕断开再处理下一个请求;\x3cbr\x3e2.HTTP是媒体独立的：可以处理知道的能处理的数据类型,就是我们在请求的时候需要设置的请求头的内容,\x3ca href=\x22http:\/\/www.runoob.com\/http\/http-content-type.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHTTP content-type内容\x3c\/a\x3e\x3cbr\x3e3.HTTP是无状态：就是没有办法记住上一次请求的状态;\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e1.3怎么解决无状态\x3c\/h3\x3e\n\x3cp\x3e1.由于很多需求是要记住上一次请求的状态信息，如登录状态的保持，所以要有对应的解决方案，那就是cookie和session\x3cbr\x3e2.cookie简单的实现过程：后台通过req.header获取请求头的内容===\x26gt;调用res处理===\x26gt;cookie写入响应头===\x26gt;返回数据写入响应体===\x26gt;结束响应===\x26gt;响应头响应体；\x3cbr\x3e3.session实现过程:后台调用HttpServletRequest的getSession方法===\x26gt;生成并发送给客户端session id,调用session相关方法增加内容===\x26gt;客户端请求携带seession id===\x26gt;服务端对应session id相应的Session,并重新创建session\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e1.4请求过程\x3c\/h3\x3e\n\x3cp\x3e域名解析 --\x26gt; 发起TCP的3次握手(试探并建立TCP\/IP连接) --\x26gt; 建立TCP连接后发起http请求(请求行,请求头,请求主体) --\x26gt; 服务器响应http请求(响应行,响应头,响应主体)--\x26gt;四次挥手(中断这次TCP连接)\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e2 XMLHttpRequest\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e2.1定义:\x3c\/h3\x3e\n\x3cp\x3e是ajax的核心,提供了对 HTTP 协议的完全的访问,包括用get,post或head请求的能力,也就是可以理解为XMLHttpRequest对象里面对http协议请求进行了封装,并暴露一些属性和方法。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e2.2属性：\x3c\/h3\x3e\n\x3cp\x3e1.readyState：XMLHttpRequest创建后方法调用的每个阶段对应的状态值,值为0-4,0--\x26gt;创建对象，1--\x26gt;请求行执行,2--\x26gt;请求主体执行,3--\x26gt;响应头已经接收完,响应主体正在接收,4--\x26gt;请求完成\x3cbr\x3e2.responseText：响应主体内容\x3cbr\x3e3.responseXML：对请求的响应，解析为 XML 并作为 Document 对象返回。如果响应体不是“text\/xml”返回null。\x3cbr\x3e4.status：状态值\x3cbr\x3e5.withCredentials:是一个布尔值, 默认为false, 表示跨域请求中不发送cookies等信息. 当它设置为true时, cookies , authorization headers 或者TLS客户端证书 都可以正常发送和接收. 显然它的值对同域请求没有影响.IE10才支持\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3e2.3事件\x3c\/h3\x3e\n\x3cp\x3eonreadystatechange:readyState值改变会触发的事件句柄函数,主要就是监听该对象的每个阶段变化\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e2.4方法\x3c\/h3\x3e\n\x3cp\x3e1.abort():取消响应,如ajax中需要终止请求就是调用该方法,原理就是把 XMLHttpRequest 对象重置为 readyState 为 0 的状态\x3cbr\x3e2.getAllResponseHeaders()\/getResponseHeader():返回所有或单个的响应头\x3c\/p\x3e\n\x3cp\x3e3.open(method,url,async,username,password):请求行。\x3cbr\x3e  method可以是get,post,head,put和delete,url一般是同源的(不同源就是常说的跨域)；\x3cbr\x3e  async值默认是true(表示异步的),可以设置为false,表示同步；\x3cbr\x3e  username 和 password 参数是可选的，为 url 所需的授权提供认证资格\x3c\/p\x3e\n\x3cp\x3e4.setRequestHeader(\x22Content-type\x22,format):设置请求头,如果请求行的方法是get可不设置\x3cbr\x3e  format值一般有四种(主要针对post提交):\x3cbr\x3e  默认纯文本:\x22text\/plain; charset=utf-8\x22,其中charset=utf-8可省略\x3cbr\x3e  json格式:\x22application\/json\x22\x3cbr\x3e  表单默认:application\/x-www-form-urlencoded,浏览器的原生 form 表单，如果不设置 enctype 属性就会以该格式提交,如果是form表单可设置enctype属性为multipart\/form-data上传文件\x3cbr\x3e  html:text\/html\x3c\/p\x3e\n\x3cp\x3e4.send(data):请求主体,发送请求，如果请求行是get时data默认为空\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e2.5 版本\x3c\/h3\x3e\n\x3cp\x3e分为XMLHttpRequest Level 1和XMLHttpRequest Level 2\x3cbr\x3e两者的不同看阮大哥的:\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2012\/09\/xmlhttprequest_level_2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eXMLHttpRequest Level 2 使用指南\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e3.ajax\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e3.1 定义\x3c\/h3\x3e\n\x3cp\x3e全称Asynchronous Javascript And XML，实际上就是利用XMLHttpRequest 对象或者ActiveXObject（兼容IE）实现页面的局部请求数据功能。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e3.2 请求实现\x3c\/h3\x3e\n\x3cp\x3e1.创建异步对象\x3cbr\x3elet xhr = new XMLHttpRequest();\/\/IE5和6是new ActiveXObject(),IE8,9是XDomainRequest()\x3cbr\x3e2.请求行\x3cbr\x3exhr.open(\x27get\x27, url);\/\/可以是get,post,head,put和delete\x3cbr\x3e3.请求头(get可省略)\x3cbr\x3exhr.setRequestHeader(\x22Content-type\x22, \x22application\/x-www-form-urlencoded\x22);\/\/格式见上面XMLHttpRequest请求头方法格式\x3cbr\x3e4.监听响应头和主体\x3cbr\x3e通过onreadystatechange 监听返回状态,通过XMLHttpRequest的getResponseHeader()判断响应头信息,得到对应的响应内容responseText或responseXML,代码如下\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e3.3 封装一个原生的ajax请求\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*\n  type：请求方法\n  data: 发送的数据\n  url: 请求的url\n  success:回掉函数\n*\/\najax: function (option) {\n  \/\/1.创建异步对象\n  var xhr = new XMLHttpRequest();\n  \/\/2.请求行\n  if (option.type == \x27get\x27 \x26amp;\x26amp; option.data) {\n    option.url \x2b= \x27?\x27;\n    option.url \x2b= option.data;\n    \/\/ 如果是get请求 那么 把data 设置为null 发送的时候 就相当于 发送null\n    option.data = null;\n  }\n  xhr.open(option.type, option.url);\n  \/\/3.请求头(get请求可以省略)\n  if (option.type == \x27post\x27 \x26amp;\x26amp; option.data) {\n    xhr.setRequestHeader(\x26quot;Content-type\x26quot;,\x26quot;application\/x-www-form-urlencoded\x26quot;);\n  }\n  \/\/4.注册状态改变事件\n  xhr.onreadystatechange = function () {\n    if (xhr.readyState == 4 \x26amp;\x26amp; xhr.status == 200){\n      let type = xhr.getResponseHeader(\x27content-type\x27);\n      if (type.indexOf(\x27json\x27) != -1) {\n       option.success(JSON.parse(xhr.responseText));\n         return;\n      }\n      if (type.indexOf(\x27xml\x27) != -1) {\n        option.success(xhr.responseXML);\n        return;\n      }\n      option.success(xhr.responseText);\n    }\n  }\n\n  \/\/5.发送请求\n  xhr.send(option.data);\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/*\n  type：请求方法\n  data: 发送的数据\n  url: 请求的url\n  success:回掉函数\n*\/\x3c\/span\x3e\najax: function (option) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/1.创建异步对象\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e xhr = \x3cspan class=\x22hljs-literal\x22\x3enew\x3c\/span\x3e XMLHttpRequest();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/2.请求行\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (option.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e == \x3cspan class=\x22hljs-string\x22\x3e\x27get\x27\x3c\/span\x3e \x26amp;\x26amp; option.\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e) {\n    option.url \x2b= \x3cspan class=\x22hljs-string\x22\x3e\x27?\x27\x3c\/span\x3e;\n    option.url \x2b= option.\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果是get请求 那么 把data 设置为null 发送的时候 就相当于 发送null\x3c\/span\x3e\n    option.\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3enull\x3c\/span\x3e;\n  }\n  xhr.open(option.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e, option.url);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/3.请求头(get请求可以省略)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (option.\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e == \x3cspan class=\x22hljs-string\x22\x3e\x27post\x27\x3c\/span\x3e \x26amp;\x26amp; option.\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e) {\n    xhr.setRequestHeader(\x3cspan class=\x22hljs-string\x22\x3e\x22Content-type\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22application\/x-www-form-urlencoded\x22\x3c\/span\x3e);\n  }\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/4.注册状态改变事件\x3c\/span\x3e\n  xhr.onreadystatechange = function () {\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (xhr.readyState == \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e \x26amp;\x26amp; xhr.status == \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e){\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e = xhr.getResponseHeader(\x3cspan class=\x22hljs-string\x22\x3e\x27content-type\x27\x3c\/span\x3e);\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27json\x27\x3c\/span\x3e) != \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n       option.success(JSON.parse(xhr.responseText));\n         \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27xml\x27\x3c\/span\x3e) != \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n        option.success(xhr.responseXML);\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n      }\n      option.success(xhr.responseText);\n    }\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/5.发送请求\x3c\/span\x3e\n  xhr.send(option.\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e);\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader16\x22\x3e3.4 get和post对比\x3c\/h3\x3e\n\x3cp\x3e1.发送数据形式不同:\x3cbr\x3eget是拼接到URL后面,默认形式是QueryString,\x3cbr\x3epost默认是Request Payload(因为XMLHttpRequest默认的请求头格式是text\/plain),一般设置请求头设置了application\/x-www-form-urlencoded就转化为From Data格式,\x3cbr\x3e为什么要设置转化?Request Payload后台通过request.getParameter(name)无法获取数据\x3cbr\x3e2.发送数据大小:\x3cbr\x3eget是拼接到URl上的,IE对URL长度的限制是2083字节(2K\x2b35字节),火狐和谷歌无限制,服务器可限制\x3cbr\x3epost前端无限定大小,服务器可限制\x3cbr\x3e3.安全性:\x3cbr\x3epost比get安全,因为get是在URL中,所以数据暴露在外面,而且一般浏览器会缓存浏览的URL\x3cbr\x3e如果要绝对的安全可以使用https传输\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader17\x22\x3e4. 跨域\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3e4.1 什么叫跨域\x3c\/h3\x3e\n\x3cp\x3e就是不同源,同源指的是URL(统一资源定位符)的协议名,域名和端口名相同\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3e4.2 同源限制的内容\x3c\/h3\x3e\n\x3cp\x3eCookie、LocalStorage和IndexDB(浏览器自带的一个数据库)无法获取;\x3cbr\x3eDOM无法获得;\x3cbr\x3eAJAX请求不能发送;\x3cbr\x3e所以同源策略设置的目的就是为了保证用户信息的安全,防止浏览器受到XSS、CSFR等攻击。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3e4.3 跨域常见的8种方式\x3c\/h3\x3e\n\x3cp\x3e一看8种，其实常用的只有三种，前面三种是比较常用的：\x3c\/p\x3e\n\x3cp\x3e1.JSONP:就是利用\x26lt;script\x26gt;的src属性不受同源的限制,对应的用callback接收返回值;\x3c\/p\x3e\n\x3cp\x3e2.CORS(跨域资源共享):\x3cbr\x3e  \x26lt;1\x26gt;简单请求:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV52Af?w=744\x26amp;h=354\x22 src=\x22https:\/\/static.alili.tech\/img\/bV52Af?w=744\x26amp;h=354\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e服务器设置:前端设置XMLHttpRequest的withCredentials为true,服务器设置Access-Control-\x3cbr\x3e  Allow-Credentials: true\x3c\/p\x3e\n\x3cp\x3e\x26lt;2\x26gt;非简单请求:除了简单请求之外的,请求方法是PUT或DELETE，或者Content-Type字段的类型是application\/json\x3cbr\x3e  跨域方法:浏览器先预检,服务器回应\x3cbr\x3e更多详情参照阮老师的\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2016\/04\/cors.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e跨域资源共享 CORS 详解\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x26lt;3\x26gt;反向代理:\x3cbr\x3e   原理:而nginx通过检测url前缀，把http请求转发到后面真实的物理服务器。并通过rewrite命令把前缀再去掉。这样真实的服务器就可以正确处理请求，并且并不知道这个请求是来自代理服务器的\x3c\/p\x3e\n\x3cp\x3e\x26lt;4\x26gt;WebSockets\x3cbr\x3eWebSocket是HTML5新出的一种通信协议，是http协议支持长连接的一个优化,使用ws:\/\/（非加密）和wss:\/\/（加密）作为协议前缀。主要是该协议不实行同源政策，只要服务器支持\x3cbr\x3e详情参照:\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/WebSocket\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebSocket - Web API 接口 | MDN\x3c\/a\x3e\x3cbr\x3e大家有没想一个问题,WebScoket无同源限制难道不会有攻击吗?\x3cbr\x3e其实那些跨域的URL是需要服务器授权的,没有授权的则无法访问.\x3cbr\x3e详情参照:\x3ca href=\x22http:\/\/www.techweb.com.cn\/network\/system\/2017-08-17\/2575047.shtml\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebSocket通信协议应用安全问题分析\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3e前面5种都是支持ajax请求的跨域方法 \x3cbr\x3e  JSONP只适用于get方法做跨域,CORS和反向代理适用于所有请求方法;\x3cbr\x3eJSONP适合所有浏览器,CORS只支持IE10及以上\x3cbr\x3e   WebSocket只能发送纯文本数据，所以如果发送复杂的格式的数据可以用JSON.STRINGFY来把数据序列化一下,而且有IE10及以上才支持\x3c\/blockquote\x3e\n\x3cp\x3e\x26lt;5\x26gt;document.domain \x2b iframe 跨域:\x3cbr\x3e 只可以非同源共享cookie,DOM\x3c\/p\x3e\n\x3cp\x3e\x26lt;6\x26gt;window.name \x2b iframe 跨域\x3c\/p\x3e\n\x3cp\x3e\x26lt;7\x26gt;跨文档通信API(Cross-document messaging)之window.postMessage\x3cbr\x3eHTML5新引入的,可以跨域LocalStorage\x3c\/p\x3e\n\x3cp\x3e\x26lt;8\x26gt;片段识别符\x3cbr\x3e片段识别符指的是，URL的#号后面的部分，如果只是改变片段标识符，页面将不会重新刷新,父子窗口可以相互改变该标识符\x3cbr\x3e详情参照:\x3ca href=\x22http:\/\/blog.csdn.net\/u013084331\/article\/details\/51114288\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e浏览器的跨域问题以及解决方案\x3c\/a\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader21\x22\x3e5. ajax的几种封装类\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader22\x22\x3e5.1 $.ajax\x3c\/h3\x3e\n\x3cp\x3e常见的三种用法:\x3cbr\x3e 1.$.get\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    $.get(url,data,success(response,status,xhr),dataType)\n    \/\/data为传入的数据\n    \/\/\x26quot;xml\x26quot;,\x26quot;html\x26quot;,\x26quot;text\x26quot;,\x26quot;script\x26quot;,\x26quot;json\x26quot;,\x26quot;jsonp\x26quot;,\n    eg:\n    $.get(\x26quot;test.cgi\x26quot;, { name: \x26quot;John\x26quot;, time: \x26quot;2pm\x26quot; },\n      function(data){\n        alert(\x26quot;Data Loaded: \x26quot; \x2b data);\n    });\n    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haskell\x22\x3e\x3ccode\x3e    $.get(url,\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e,success(\x3cspan class=\x22hljs-title\x22\x3eresponse\x3c\/span\x3e,\x3cspan class=\x22hljs-title\x22\x3estatus\x3c\/span\x3e,\x3cspan class=\x22hljs-title\x22\x3exhr\x3c\/span\x3e),dataType)\x3c\/span\x3e\n    \/\/\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e为传入的数据\x3c\/span\x3e\n    \/\/\x3cspan class=\x22hljs-string\x22\x3e\x22xml\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22html\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22script\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22json\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22jsonp\x22\x3c\/span\x3e,\n    eg:\n    $.get(\x3cspan class=\x22hljs-string\x22\x3e\x22test.cgi\x22\x3c\/span\x3e, { name: \x3cspan class=\x22hljs-string\x22\x3e\x22John\x22\x3c\/span\x3e, time: \x3cspan class=\x22hljs-string\x22\x3e\x222pm\x22\x3c\/span\x3e },\n      function(\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e){\n        \x3cspan class=\x22hljs-title\x22\x3ealert\x3c\/span\x3e(\x22\x3cspan class=\x22hljs-type\x22\x3eData\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3eLoaded\x3c\/span\x3e: \x22 \x2b \x3cspan class=\x22hljs-title\x22\x3edata\x3c\/span\x3e);\n    });\x3c\/span\x3e\n    \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.$.post\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$.post(url,data,success(data, textStatus, jqXHR),dataType)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haskell\x22\x3e\x3ccode\x3e$.post(url,\x3cspan class=\x22hljs-class\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3edata\x3c\/span\x3e,success(\x3cspan class=\x22hljs-title\x22\x3edata\x3c\/span\x3e, \x3cspan class=\x22hljs-title\x22\x3etextStatus\x3c\/span\x3e, \x3cspan class=\x22hljs-title\x22\x3ejqXHR\x3c\/span\x3e),dataType)\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.$.ajax\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$.ajax({\n\/\/常四个参数和一个回调函数\n  url: url,\n  data: data,\n  success: success,\n  dataType: dataType\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs dts\x22\x3e\x3ccode\x3e$.ajax({\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/常四个参数和一个回调函数\x3c\/span\x3e\n\x3cspan class=\x22hljs-symbol\x22\x3e  url:\x3c\/span\x3e url,\n\x3cspan class=\x22hljs-symbol\x22\x3e  data:\x3c\/span\x3e data,\n\x3cspan class=\x22hljs-symbol\x22\x3e  success:\x3c\/span\x3e success,\n\x3cspan class=\x22hljs-symbol\x22\x3e  dataType:\x3c\/span\x3e dataType\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更多参数和回调函数见:\x3ca href=\x22http:\/\/www.w3school.com.cn\/jquery\/ajax_ajax.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ejQuery ajax - ajax() 方法\x3c\/a\x3e\x3cbr\x3e4.三种对比\x3cbr\x3e$.get和$post是$.ajax的简写形式,三种方法跨域的方法都是jsonp\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3e5.2 fetch\x3c\/h3\x3e\n\x3cp\x3e1.语法\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 fetch(url, {\n  method: \x26quot;POST\x26quot;,\/\/请求方法\n  body: JSON.stringify(data),\/\/请求主体\n  headers: {\n    \x26quot;Content-Type\x26quot;: \x26quot;application\/json\x26quot;\/\/请求头\n  },\n  mode:cors,\/\/请求的模式，值还可为no-cors 或者 same-origin\n  credentials: \x26quot;same-origin\x26quot;\/\/请求权限\n}).then(function(response) {\n  response.status     \/\/=\x3e 请求结果参数number 100–599\n  response.statusText \/\/=\x3e 请求结果状态String\n  response.headers    \/\/=\x3e 返回头部信息Headers\n  response.url        \/\/=\x3e String\n\nresponse.text()\/\/方法还有json(),blob(),arrayBuffer(),formData()\n.then(function(responseText) { ... })\n}, function(error) {\n  error.message \/\/=\x3e String\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stylus\x22\x3e\x3ccode\x3e fetch(url, {\n  method: \x3cspan class=\x22hljs-string\x22\x3e\x22POST\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/请求方法\x3c\/span\x3e\n  \x3cspan class=\x22hljs-selector-tag\x22\x3ebody\x3c\/span\x3e: JSON.stringify(data),\x3cspan class=\x22hljs-comment\x22\x3e\/\/请求主体\x3c\/span\x3e\n  headers: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x22Content-Type\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22application\/json\x22\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/请求头\x3c\/span\x3e\n  },\n  mode:cors,\x3cspan class=\x22hljs-comment\x22\x3e\/\/请求的模式，值还可为no-cors 或者 same-origin\x3c\/span\x3e\n  credentials: \x3cspan class=\x22hljs-string\x22\x3e\x22same-origin\x22\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/请求权限\x3c\/span\x3e\n}).then(function(response) {\n  response\x3cspan class=\x22hljs-selector-class\x22\x3e.status\x3c\/span\x3e     \x3cspan class=\x22hljs-comment\x22\x3e\/\/=\x26gt; 请求结果参数number 100–599\x3c\/span\x3e\n  response\x3cspan class=\x22hljs-selector-class\x22\x3e.statusText\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/=\x26gt; 请求结果状态String\x3c\/span\x3e\n  response\x3cspan class=\x22hljs-selector-class\x22\x3e.headers\x3c\/span\x3e    \x3cspan class=\x22hljs-comment\x22\x3e\/\/=\x26gt; 返回头部信息Headers\x3c\/span\x3e\n  response\x3cspan class=\x22hljs-selector-class\x22\x3e.url\x3c\/span\x3e        \x3cspan class=\x22hljs-comment\x22\x3e\/\/=\x26gt; String\x3c\/span\x3e\n\nresponse.text()\x3cspan class=\x22hljs-comment\x22\x3e\/\/方法还有json(),blob(),arrayBuffer(),formData()\x3c\/span\x3e\n.then(function(responseText) { ... })\n}, function(error) {\n  error\x3cspan class=\x22hljs-selector-class\x22\x3e.message\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/=\x26gt; String\x3c\/span\x3e\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.fetch的get使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fetch(url)\/\/options省略表示get\n  .then(function(response) {\n    return response.json();\/\/生成json,\n  }).then(function(data) {\n    console.log(data);\n  }).catch(function(e) {\n    console.log(\x26quot;Oops, error\x26quot;);\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs scilab\x22\x3e\x3ccode\x3efetch(url)\x3cspan class=\x22hljs-comment\x22\x3e\/\/options省略表示get\x3c\/span\x3e\n  .\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(response)\x3c\/span\x3e {\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e response.json();\x3cspan class=\x22hljs-comment\x22\x3e\/\/生成json,\x3c\/span\x3e\n  }).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(data)\x3c\/span\x3e {\x3c\/span\x3e\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(data);\n  }).\x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(e)\x3c\/span\x3e {\x3c\/span\x3e\n    console.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22Oops, error\x22\x3c\/span\x3e);\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.fetch的post使用\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22fetch(\x27\/users\x27, {\n  method: \x27POST\x27,\n  headers: {\n    \x27Accept\x27: \x27application\/json\x27,\n    \x27Content-Type\x27: \x27application\/json\x27\n  },\n  body: JSON.stringify({\n    name: \x27Hubot\x27,\n    login: \x27hubot\x27,\n  })\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3efetch\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27\/users\x27\x3c\/span\x3e, {\n  \x3cspan class=\x22hljs-attribute\x22\x3emethod\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27POST\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attribute\x22\x3eheaders\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27Accept\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27Content-Type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27application\/json\x27\x3c\/span\x3e\n  },\n  \x3cspan class=\x22hljs-attribute\x22\x3ebody\x3c\/span\x3e: JSON.stringify({\n    \x3cspan class=\x22hljs-attribute\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27Hubot\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-attribute\x22\x3elogin\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27hubot\x27\x3c\/span\x3e,\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3efetch的详细使用:\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007019545\x22\x3e【译】fetch用法说明\x3c\/a\x3e\x3cbr\x3e4.fetch怎么实现跨域\x3c\/p\x3e\n\x3cp\x3emode的三个值的含义\x3cbr\x3esame-origin：该模式是不允许跨域的，它需要遵守同源策略，否则浏览器会返回一个error告知不能跨域；其对应的response type为basic。\x3cbr\x3ecors: 该模式支持跨域请求，顾名思义它是以CORS的形式跨域；当然该模式也可以同域请求不需要后端额外的CORS支持；其对应的response-type为cors。\x3cbr\x3eno-cors: 该模式用于跨域请求但是服务器不带CORS响应头，也就是服务端不支持CORS；这也是fetch的特殊跨域请求方式；其对应的response-type为opaque\x3cbr\x3e所以服务器支持则可以设置CORS,不支持可以设置no-cors\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader24\x22\x3e5.3 vue-resource\x3c\/h3\x3e\n\x3cp\x3e1.使用过程\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*安装*\/\nnpm install vue-resource --save\n\/*引入Vue框架*\/\nimport Vue from \x27vue\x27\n\/*引入资源请求插件*\/\nimport VueResource from \x27vue-resource\x27\n\/*使用VueResource插件*\/\nVue.use(VueResource)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/*安装*\/\x3c\/span\x3e\nnpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e vue-\x3cspan class=\x22hljs-keyword\x22\x3eresource\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e--save\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*引入Vue框架*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*引入资源请求插件*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e VueResource \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue-resource\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*使用VueResource插件*\/\x3c\/span\x3e\nVue.use(VueResource)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.$http.get\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22this.$http.get(\x27\/someUrl\x27, [options]).then((response) =\x3e {\n    \/\/ 响应成功回调\n}, (response) =\x3e {\n    \/\/ 响应错误回调\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coffeescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$http.get(\x3cspan class=\x22hljs-string\x22\x3e\x27\/someUrl\x27\x3c\/span\x3e, [options]).\x3cspan class=\x22hljs-keyword\x22\x3ethen\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(response)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 响应成功回调\n}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e(response)\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-regexp\x22\x3e\/\/\x3c\/span\x3e 响应错误回调\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.options参数值\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV53ko?w=645\x26amp;h=587\x22 src=\x22https:\/\/static.alili.tech\/img\/bV53ko?w=645\x26amp;h=587\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e如果Web服务器无法处理PUT,PATCH和DELETE这种REST风格的请求，可以启用enulateHTTP现象。启用该选项后，请求会以普通的POST方法发出，并且HTTP头信息的X-HTTP-Method-Override属性会设置为实际的HTTP方法\x3c\/p\x3e\n\x3cp\x3e3.$http.post\x3cbr\x3epost请求默认的请求类型是request payload,根据上面get和post对比中提到request payload形式对后台获取数据不友好,所以需要将emulateJSON设置为true\x3c\/p\x3e\n\x3cp\x3e4.拦截器(inteceptor)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Vue.http.interceptors.push({\nrequest: function ( request ) {\n    \/\/ 更改请求类型为POST\n    request.method = \x27POST\x27;\n    return request;\n},\nresponse: function ( response ) {\n    \/\/ 修改返回数据\n    response.data = [{\n        custom: \x27custom\x27\n    }];\n    return response;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3eVue.http.interceptors.push({\nrequest: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e( request )\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 更改请求类型为POST\x3c\/span\x3e\n    request.method = \x3cspan class=\x22hljs-string\x22\x3e\x27POST\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e request;\n},\nresponse: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e( response )\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 修改返回数据\x3c\/span\x3e\n    response.data = [{\n        custom: \x3cspan class=\x22hljs-string\x22\x3e\x27custom\x27\x3c\/span\x3e\n    }];\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e response;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e});\x3c\/p\x3e\n\x3cp\x3e5.跨域\x3c\/p\x3e\n\x3cp\x3eJSONP:\x3c\/p\x3e\n\x3cp\x3eVue.http.jsonp(url,{params: {name=\x27张三\x27},jsonp:\x22_callback\x22})\x3cbr\x3eparams是要发送的数据对象，jsonp是设置回调的名称，也就是上面的callback名称；（不设置默认为callback），后台获取发送过去的”_callpack”的值，将这个值拼接到返回的json数据上\x3cbr\x3eCORS:\x3cbr\x3e如果浏览器支持XMLHttpRequest Level 2在Broswer就可以设置\x3cbr\x3eVue.http.options.xhr = { withCredentials: true }\x3cbr\x3e服务端启用支持\x3cbr\x3e反向代理:在vue项目下的 config\/index.js 文件里面配置代理proxyTable\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader25\x22\x3e5.4 axios\x3c\/h3\x3e\n\x3cp\x3e1.使用过程\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/*安装*\/\nnpm install axios --save\n\/*引入Vue框架*\/\nimport Vue from \x27vue\x27\n\/*引入资源请求插件*\/\nimport axios from \x27axios\x27\n\/*使用VueResource插件*\/\nVue.use(axios)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs sql\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/*安装*\/\x3c\/span\x3e\nnpm \x3cspan class=\x22hljs-keyword\x22\x3einstall\x3c\/span\x3e axios \x3cspan class=\x22hljs-comment\x22\x3e--save\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*引入Vue框架*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e Vue \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27vue\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*引入资源请求插件*\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e axios \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27axios\x27\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/*使用VueResource插件*\/\x3c\/span\x3e\nVue.use(axios)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e2.axios.get\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22axios#get(url[,config])\naxios.get(getUrl, {\n    params: {\n      \x27getAjaxDataObj1\x27: getAjaxData.obj1,\/\/obj1为getAjaxData的一个属性\n      \x27getAjaxDataObj2\x27: getAjaxData.obj2\n    }\n  }).then(data=\x3e{\n      \/\/成功返回\n  }).catch(err=\x3e{\n      \/\/错误返回\n  })\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3eaxios\x3c\/span\x3e\x3cspan class=\x22hljs-selector-id\x22\x3e#get\x3c\/span\x3e(url[,config])\n\x3cspan class=\x22hljs-selector-tag\x22\x3eaxios\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.get\x3c\/span\x3e(getUrl, {\n    \x3cspan class=\x22hljs-attribute\x22\x3eparams\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27getAjaxDataObj1\x27\x3c\/span\x3e: getAjaxData.obj1,\x3cspan class=\x22hljs-comment\x22\x3e\/\/obj1为getAjaxData的一个属性\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x27getAjaxDataObj2\x27\x3c\/span\x3e: getAjaxData.obj2\n    }\n  })\x3cspan class=\x22hljs-selector-class\x22\x3e.then\x3c\/span\x3e(data=\x26gt;{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/成功返回\x3c\/span\x3e\n  })\x3cspan class=\x22hljs-selector-class\x22\x3e.catch\x3c\/span\x3e(err=\x26gt;{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/错误返回\x3c\/span\x3e\n  })\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e3.axios.post\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22axios#post(url[,config])\naxios.post(postUrl, {\n      \x27postAjaxDataObj1\x27: postAjaxData.obj1,\/\/obj1为postAjaxData的一个属性\n      \x27postAjaxDataObj2\x27: postAjaxData.obj2\n  }).then(data=\x3e{\n      \/\/成功返回\n  }).catch(err=\x3e{\n      \/\/错误返回\n  })\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs php\x22\x3e\x3ccode\x3eaxios\x3cspan class=\x22hljs-comment\x22\x3e#post(url[,config])\x3c\/span\x3e\naxios.post(postUrl, {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27postAjaxDataObj1\x27\x3c\/span\x3e: postAjaxData.obj1,\x3cspan class=\x22hljs-comment\x22\x3e\/\/obj1为postAjaxData的一个属性\x3c\/span\x3e\n      \x3cspan class=\x22hljs-string\x22\x3e\x27postAjaxDataObj2\x27\x3c\/span\x3e: postAjaxData.obj2\n  }).then(data=\x26gt;{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/成功返回\x3c\/span\x3e\n  }).\x3cspan class=\x22hljs-keyword\x22\x3ecatch\x3c\/span\x3e(err=\x26gt;{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/错误返回\x3c\/span\x3e\n  })\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e4.axios.post请求的问题\x3cbr\x3e默认请求数据格式是application\/json,如果后台不支持这种form Data形式,则需要:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22在Browser中\n\x3c1.\x3e设置请求头格式\n在config配置headers: {\x27X-Requested-With\x27:\x27XMLHttpRequest\x27},\n\x3c2.\x3e格式化数据\n方法一:\n并引入axios里面内置的qs,不需要重新下载\nimport qs from \x27qs\x27\naxios.post(\x27\/foo\x27, qs.stringify({ \x27bar\x27: 123 }));\n方法二:\nlet params = new URLSearchParams();\nparams.append(\x27param1\x27, \x27value1\x27);\nparams.append(\x27param2\x27, \x27value2\x27);\naxios.post(\x27\/foo\x27, params);\n\n在node中\nlet querystring = require(\x27querystring\x27);\/\/直接引入node的querystring模块\naxios.post(\x27http:\/\/something.com\/\x27, querystring.stringify({ foo: \x27bar\x27 }));\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e在Browser中\n\x26lt;\x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e\x26gt;设置请求头格式\n在config配置headers: {\x3cspan class=\x22hljs-string\x22\x3e\x27X-Requested-With\x27\x3c\/span\x3e:\x3cspan class=\x22hljs-string\x22\x3e\x27XMLHttpRequest\x27\x3c\/span\x3e},\n\x26lt;\x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e\x26gt;格式化数据\n方法一:\n并引入axios里面内置的qs,不需要重新下载\n\x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e qs from \x3cspan class=\x22hljs-string\x22\x3e\x27qs\x27\x3c\/span\x3e\naxios.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/foo\x27\x3c\/span\x3e, qs.stringify({ \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e123\x3c\/span\x3e }));\n方法二:\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e = \x3cspan class=\x22hljs-literal\x22\x3enew\x3c\/span\x3e URLSearchParams();\n\x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.append(\x3cspan class=\x22hljs-string\x22\x3e\x27param1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27value1\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e.append(\x3cspan class=\x22hljs-string\x22\x3e\x27param2\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27value2\x27\x3c\/span\x3e);\naxios.post(\x3cspan class=\x22hljs-string\x22\x3e\x27\/foo\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3eparams\x3c\/span\x3e);\n\n在node中\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e querystring = \x3cspan class=\x22hljs-keyword\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27querystring\x27\x3c\/span\x3e);\x3cspan class=\x22hljs-comment\x22\x3e\/\/直接引入node的querystring模块\x3c\/span\x3e\naxios.post(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/something.com\/\x27\x3c\/span\x3e, querystring.stringify({ foo: \x3cspan class=\x22hljs-string\x22\x3e\x27bar\x27\x3c\/span\x3e }));\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e4.config的常见参数:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/`url`是请求的服务器地址\n  url:\x27\/user\x27,\n  \/\/`method`是请求资源的方式\n  method:\x27get\x27\/\/default\n\/\/如果`url`不是绝对地址，那么`baseURL`将会加到`url`的前面\n  \/\/当`url`是相对地址的时候，设置`baseURL`会非常的方便\n  baseURL:\x27https:\/\/some-domain.com\/api\/\x27,\n\/\/`headers`选项是需要被发送的自定义请求头信息\n  headers: {\x27X-Requested-With\x27:\x27XMLHttpRequest\x27},\n\/\/`withCredentails`选项表明了是否是跨域请求\n  withCredentials:false,\/\/default\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs oxygene\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/`url`是请求的服务器地址\x3c\/span\x3e\n  url:\x3cspan class=\x22hljs-string\x22\x3e\x27\/user\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/`method`是请求资源的方式\x3c\/span\x3e\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3emethod\x3c\/span\x3e:\x3c\/span\x3e\x3cspan class=\x22hljs-string\x22\x3e\x27get\x27\x3c\/span\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/default\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/如果`url`不是绝对地址，那么`baseURL`将会加到`url`的前面\x3c\/span\x3e\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/当`url`是相对地址的时候，设置`baseURL`会非常的方便\x3c\/span\x3e\n  baseURL:\x3cspan class=\x22hljs-string\x22\x3e\x27https:\/\/some-domain.com\/api\/\x27\x3c\/span\x3e,\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/`headers`选项是需要被发送的自定义请求头信息\x3c\/span\x3e\n  headers: \x3cspan class=\x22hljs-comment\x22\x3e{\x27X-Requested-With\x27:\x27XMLHttpRequest\x27}\x3c\/span\x3e,\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/`withCredentails`选项表明了是否是跨域请求\x3c\/span\x3e\n  withCredentials:\x3cspan class=\x22hljs-keyword\x22\x3efalse\x3c\/span\x3e,\x3cspan class=\x22hljs-comment\x22\x3e\/\/default\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e详情请见:\x3ca href=\x22https:\/\/www.jianshu.com\/p\/df464b26ae58\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eaxios\x3c\/a\x3e\x3cbr\x3e4.axios的inteceptor(拦截器)\x3c\/p\x3e\n\x3cp\x3e主要分为请求和响应两种拦截器,请求拦截一般就是配置对应的请求头信息(适用与常见请求方法,虽然ajax的get方法没有请求头,但是axios里面进行啦封装),响应一般就是对reponse进行拦截处理,如果返回结果为[]可以转化为0\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22axios.interceptors.request.use(config =\x3e {\n  config.headers.cityCode = window.sessionStorage.cityCode \/\/jsCookie.get(\x27cityCode\x27)\n  return config\n},\naxios.interceptors.response.use((response) =\x3e{\n  let data = response.data\n  if(response.request.responseType === \x27arraybuffer\x27\x26amp;\x26amp;!data.length){\n    reponse.date=0\n  }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3eaxios.interceptors.request.use(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3econfig\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  config.headers.cityCode = \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.sessionStorage.cityCode \x3cspan class=\x22hljs-comment\x22\x3e\/\/jsCookie.get(\x27cityCode\x27)\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e config\n},\naxios.interceptors.response.use(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eresponse\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e data = response.data\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(response.request.responseType === \x3cspan class=\x22hljs-string\x22\x3e\x27arraybuffer\x27\x3c\/span\x3e\x26amp;\x26amp;!data.length){\n    reponse.date=\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n  }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e5.跨域\x3cbr\x3eCORS:设置config里面的withCredentails为true\x3cbr\x3e反向代理:和vue-resource一样\x3cbr\x3eJSONP:axios里没有进行封装,但是github推荐了一种方法:\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV53wV?w=579\x26amp;h=272\x22 src=\x22https:\/\/static.alili.tech\/img\/bV53wV?w=579\x26amp;h=272\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e详情请见:\x3ca href=\x22https:\/\/github.com\/axios\/axios\/blob\/master\/COOKBOOK.md#jsonp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub中JSONP的实现\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader26\x22\x3e5.5为什么尤大大放弃维护vue-resource\x3c\/h3\x3e\n\x3cp\x3e我看了一下他的博客,大概意思是vue-resource之前是官方维护的,但是不同的路由和状态管理,ajax并不是一个问题域,需要与Vue核心深度整合,一个纯粹的第三方库能很好解决这个问题\x3cbr\x3e原文链接(需要翻墙):\x3ca href=\x22https:\/\/medium.com\/the-vue-point\/retiring-vue-resource-871a82880af4\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eRetiring vue-resource\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader27\x22\x3e5.6 ajax,$.ajax,vue-resource和axios对比\x3c\/h3\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV53Rt?w=561\x26amp;h=386\x22 src=\x22https:\/\/static.alili.tech\/img\/bV53Rt?w=561\x26amp;h=386\x22 alt=\x22ajax对比\x22 title=\x22ajax对比\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader28\x22\x3e结语\x3c\/h2\x3e\n\x3cblockquote\x3e很开心你还能看到这里,整个文章概念还是挺多的,\x3cbr\x3e希望这次梳理对你串联http,ajax,XMLHttpRequest,$ajax,vue-resource和axios有帮助。如果文章内容有错误欢迎指出交流！\x3cbr\x3e可以先收藏着,想看的时候再慢慢体会。\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader29\x22\x3e参考文章：\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22http:\/\/www.runoob.com\/http\/http-content-type.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.runoob.com\/http\/ht...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2012\/09\/xmlhttprequest_level_2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ruanyifeng.com\/blo...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.ruanyifeng.com\/blog\/2016\/04\/cors.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.ruanyifeng.com\/blo...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/API\/WebSocket\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/developer.mozilla.org...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.techweb.com.cn\/network\/system\/2017-08-17\/2575047.shtml\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.techweb.com.cn\/net...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/blog.csdn.net\/u013084331\/article\/details\/51114288\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/blog.csdn.net\/u0130843...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/www.w3school.com.cn\/jquery\/ajax_ajax.asp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/www.w3school.com.cn\/jq...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000007019545\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/www.jianshu.com\/p\/df464b26ae58\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/www.jianshu.com\/p\/df4...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/github.com\/axios\/axios\/blob\/master\/COOKBOOK.md#jsonp\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/axios\/axio...\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/medium.com\/the-vue-point\/retiring-vue-resource-871a82880af4\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/medium.com\/the-vue-po...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>http,ajax,$.ajax,vue-resource,axios的知识大串联</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000013820162">https://segmentfault.com/a/1190000013820162</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/xguyruf1y4/" target="_blank">https://alili.tech/archive/xguyruf1y4/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>