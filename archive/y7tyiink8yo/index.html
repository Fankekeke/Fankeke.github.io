<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript 单例模式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript 单例模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/y7tyiink8yo/",
				"appid": "1613049289050283", 
				"title": "JavaScript 单例模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-17T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/7vnq7d9c3sa/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/c3pv8aj59t/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&text=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&text=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&title=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&is_video=false&description=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&title=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&title=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&title=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fy7tyiink8yo%2f&title=JavaScript%20%e5%8d%95%e4%be%8b%e6%a8%a1%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript 单例模式</h1><div class="meta"><div class="postdate"><time datetime="2018-12-17" itemprop="datePublished">2018-12-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch3 id=\x22articleHeader0\x22\x3e定义\x3c\/h3\x3e\n\x3cp\x3e确保一个类仅有一个实例，并提供一个访问它的全局访问点。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e单例模式使用的场景\x3c\/h3\x3e\n\x3cp\x3e比如线程池、全局缓存等。我们所熟知的浏览器的window对象就是一个单例，在JavaScript开发中，对于这种只需要一个的对象，我们的实现往往使用单例。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e实现单例模式 （不透明的）\x3c\/h3\x3e\n\x3cp\x3e一般我们是这样实现单例的，用一个变量来标志当前的类已经创建过对象，如果下次获取当前类的实例时，直接返回之前创建的对象即可。代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 定义一个类\nfunction Singleton(name) {\n    this.name = name;\n    this.instance = null;\n}\n\/\/ 原型扩展类的一个方法getName()\nSingleton.prototype.getName = function() {\n    console.log(this.name)\n};\n\/\/ 获取类的实例\nSingleton.getInstance = function(name) {\n    if(!this.instance) {\n        this.instance = new Singleton(name);\n    }\n    return this.instance\n};\n\n\/\/ 获取对象1\nvar a = Singleton.getInstance(\x27a\x27);\n\/\/ 获取对象2\nvar b = Singleton.getInstance(\x27b\x27);\n\/\/ 进行比较\nconsole.log(a === b);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 定义一个类\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSingleton\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 原型扩展类的一个方法getName()\x3c\/span\x3e\nSingleton.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name)\n};\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取类的实例\x3c\/span\x3e\nSingleton.getInstance = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance) {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Singleton(name);\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取对象1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = Singleton.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取对象2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = Singleton.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 进行比较\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a === b);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们也可以使用闭包来实现：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Singleton(name) {\n    this.name = name;\n}\n\/\/ 原型扩展类的一个方法getName()\nSingleton.prototype.getName = function() {\n    console.log(this.name)\n};\n\/\/ 获取类的实例\nSingleton.getInstance = (function() {\n    var instance = null;\n    return function(name) {\n        if(!this.instance) {\n            this.instance = new Singleton(name);\n        }\n        return this.instance\n    }        \n})();\n\n\/\/ 获取对象1\nvar a = Singleton.getInstance(\x27a\x27);\n\/\/ 获取对象2\nvar b = Singleton.getInstance(\x27b\x27);\n\/\/ 进行比较\nconsole.log(a === b);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSingleton\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 原型扩展类的一个方法getName()\x3c\/span\x3e\nSingleton.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name)\n};\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取类的实例\x3c\/span\x3e\nSingleton.getInstance = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e instance = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Singleton(name);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.instance\n    }        \n})();\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取对象1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = Singleton.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取对象2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = Singleton.getInstance(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 进行比较\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a === b);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个单例实现获取对象的方式经常见于新手的写法，这种方式获取对象虽然简单，但是这种实现方式不透明。知道的人可以通过 \x3ccode\x3eSingleton.getInstance()\x3c\/code\x3e 获取对象，不知道的需要研究代码的实现，这样不好。这与我们常见的用 \x3ccode\x3enew\x3c\/code\x3e 关键字来获取对象有出入，实际意义不大。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e实现单例模式 （透明的）\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var Singleton = (function(){\n    var instance;\n    var CreateSingleton = function (name) {\n        this.name = name;\n\n        if(instance) {\n            return instance;\n        }\n        \/\/ 打印实例名字\n        this.getName();\n\n        \/\/ instance = this;\n        \/\/ return instance;\n        return instance = this;\n    }\n    \/\/ 获取实例的名字\n    CreateSingleton.prototype.getName = function() {\n        console.log(this.name)\n    }\n\n    return CreateSingleton;\n})();\n\/\/ 创建实例对象1\nvar a = new Singleton(\x27a\x27);\n\/\/ 创建实例对象2\nvar b = new Singleton(\x27b\x27);\n\nconsole.log(a===b);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Singleton = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e instance;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e CreateSingleton = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(instance) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e instance;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 打印实例名字\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getName();\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ instance = this;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ return instance;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e instance = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取实例的名字\x3c\/span\x3e\n    CreateSingleton.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name)\n    }\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e CreateSingleton;\n})();\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建实例对象1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Singleton(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建实例对象2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Singleton(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a===b);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种单例模式我以前用过一次，但是使用起来很别扭，我也见过别人用这种方式实现过走马灯的效果，因为走马灯在我们的应用中绝大多数只有一个。\x3c\/p\x3e\n\x3cp\x3e这里先说一下为什么感觉不对劲，因为在这个单例的构造函数中一共干了两件事，一个是创建对象并打印实例名字，另一个是保证只有一个实例对象。这样代码量大的化不方便管理，应该尽量做到职责单一。\x3c\/p\x3e\n\x3cp\x3e我们通常会将代码改成下面这个样子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 单例构造函数\nfunction CreateSingleton (name) {\n    this.name = name;\n    this.getName();\n};\n\n\/\/ 获取实例的名字\nCreateSingleton.prototype.getName = function() {\n    console.log(this.name)\n};\n\/\/ 单例对象\nvar Singleton = (function(){\n    var instance;\n    return function (name) {\n        if(!instance) {\n            instance = new CreateSingleton(name);\n        }\n        return instance;\n    }\n})();\n\n\/\/ 创建实例对象1\nvar a = new Singleton(\x27a\x27);\n\/\/ 创建实例对象2\nvar b = new Singleton(\x27b\x27);\n\nconsole.log(a===b);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单例构造函数\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eCreateSingleton\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getName();\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取实例的名字\x3c\/span\x3e\nCreateSingleton.prototype.getName = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name)\n};\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单例对象\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Singleton = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e instance;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3ename\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!instance) {\n            instance = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e CreateSingleton(name);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e instance;\n    }\n})();\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建实例对象1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Singleton(\x3cspan class=\x22hljs-string\x22\x3e\x27a\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建实例对象2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Singleton(\x3cspan class=\x22hljs-string\x22\x3e\x27b\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a===b);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种实现方式我们就比较熟悉了，我们在开发中经常会使用中间类，通过它来实现原类所不具有的特殊功能。有的人把这种实现方式叫做代理，这的确是单例模式的一种应用，稍后将在代理模式进行详解。\x3c\/p\x3e\n\x3cp\x3e说了这么多我们还是在围绕着传统的单例模式实现在进行讲解，那么具有JavaScript特色的单例模式是什么呢。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eJavaScript单例模式\x3c\/h3\x3e\n\x3cp\x3e在我们的开发中，很多同学可能并不知道单例到底是什么，应该如何使用单例，但是他们所写的代码却刚好满足了单例模式的要求。如要实现一个登陆弹窗，不管那个页面或者在页面的那个地方单击登陆按钮，都会弹出登录窗。一些同学就会写一个全局的对象来实现登陆窗口功能，是的，这样的确可以实现所要求的登陆效果，也符合单例模式的要求，但是这种实现其实是一个巧合，或者一个美丽的错误。由于全局对象，或者说全局变量正好符合单例的能够全局访问，而且是唯一的。但是我们都知道，全局变量是可以被覆盖的，特别是对于初级开发人员来说，刚开始不管定义什么基本都是全局的，这样的好处是方便访问，坏处是一不留意就会引起冲突，特别是在做一个团队合作的大项目时，所以成熟的有经验的开发人员尽量减少全局的声明。\x3c\/p\x3e\n\x3cp\x3e而在开发中我们避免全局变量污染的通常做法如下：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e全局命名空间\x3c\/li\x3e\n\x3cli\x3e使用闭包\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e它们的共同点是都可以定义自己的成员、存储数据。区别是全局命名空间的所有方法和属性都是公共的，而闭包可以实现方法和属性的私有化。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e惰性单例模式\x3c\/h3\x3e\n\x3cp\x3e说实话，在我下决心学习设计模式之前我并不知道，单例模式还分惰性单例模式，直到我看了曾探大神的《JvaScript设计模式与开发实践》后才知道了还有惰性单例模式，那么什么是惰性单例模式呢？在说惰性单例模式之前，请允许我先说一个我们都知道的lazyload加载图片，它就是惰性加载，只当含有图片资源的dom元素出现在媒体设备的可视区时，图片资源才会被加载，这种加载模式就是惰性加载；还有就是下拉刷新资源也是惰性加载，当你触发下拉刷新事件资源才会被加载等。而惰性单例模式的原理也是这样的，只有当触发创建实例对象时，实例对象才会被创建。这样的实例对象创建方式在开发中很有必要的。\x3c\/p\x3e\n\x3cp\x3e就如同我们刚开始介绍的用 \x3ccode\x3eSingleton.getInstance\x3c\/code\x3e 创建实例对象一样，虽然这种方式实现了惰性单例，但是正如我们刚开始说的那样这并不是一个好的实现方式。下面就来介绍一个好的实现方式。\x3c\/p\x3e\n\x3cp\x3e遮罩层相信大家对它都不陌生。它在开发中比较常见，实现起来也比较简单。在每个人的开发中实现的方式不尽相同。这个最好的实现方式还是用单例模式。有的人实现直接在页面中加入一个div然后设置display为none，这样不管我们是否使用遮罩层页面都会加载这个div，如果是多个页面就是多个div的开销；也有的人使用js创建一个div，当需要时就用将其加入到body中，如果不需要就删除，这样频繁地操作dom对页面的性能也是一种消耗；还有的人是在前一种的基础上用一个标识符来判断，当遮罩层是第一次出现就向页面添加，不需要时隐藏，如果不是就是用前一次的添加的。\x3c\/p\x3e\n\x3cp\x3e实现代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ html\n\n\x3cbutton id=\x26quot;btn\x26quot;\x3eclick it\x3c\/button\x3e\n\n\/\/ js\nvar createMask = (function() {\n    var mask;\n    return function() {\n        if(!mask) {\n            \/\/ 创建div元素\n            var mask = document.createElement(\x27div\x27);\n            \/\/ 设置样式\n            mask.style.position = \x27fixed\x27;\n            mask.style.top = \x270\x27;\n            mask.style.right = \x270\x27;\n            mask.style.bottom = \x270\x27;\n            mask.style.left = \x270\x27;\n            mask.style.opacity = \x27\x27;\n            mask.style.display = \x27none\x27;\n            document.body.appendChild(mask);\n        }\n\n        return mask;\n    }        \n})();\n\ndocument.getElementById(\x27btn\x27).onclick = function() {\n    var maskLayer = createMask();\n    maskLayer.style.display = \x27block\x27;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ html\x3c\/span\x3e\n\n\x26lt;button id=\x3cspan class=\x22hljs-string\x22\x3e\x22btn\x22\x3c\/span\x3e\x26gt;click it\x26lt;\/button\x26gt;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ js\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e createMask = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mask;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(!mask) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建div元素\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mask = document.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置样式\x3c\/span\x3e\n            mask.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27fixed\x27\x3c\/span\x3e;\n            mask.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n            mask.style.right = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n            mask.style.bottom = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n            mask.style.left = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n            mask.style.opacity = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n            mask.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n            document.body.appendChild(mask);\n        }\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e mask;\n    }        \n})();\n\ndocument.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27btn\x27\x3c\/span\x3e).onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e maskLayer = createMask();\n    maskLayer.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们发现在开发中并不会单独使用遮罩层，遮罩层和弹出窗是经常结合在一起使用，前面我们提到过登陆弹窗使用单例模式实现也是最适合的。那么我们是不是要将上面的代码拷贝一份呢？当然我们还有好的实现方式，那就是将上面单例中代码变化的部分和不变的部分，分离开来。\x3c\/p\x3e\n\x3cp\x3e代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var singleton = function(fn) {\n    var instance;\n    return function() {\n        return instance || (instance = fn.apply(this, arguments));\n    }\n};\n\/\/ 创建遮罩层\nvar createMask = function(){\n    \/\/ 创建div元素\n    var mask = document.createElement(\x27div\x27);\n    \/\/ 设置样式\n    mask.style.position = \x27fixed\x27;\n    mask.style.top = \x270\x27;\n    mask.style.right = \x270\x27;\n    mask.style.bottom = \x270\x27;\n    mask.style.left = \x270\x27;\n    mask.style.opacity = \x27o.75\x27;\n    mask.style.backgroundColor = \x27#000\x27;\n    mask.style.display = \x27none\x27;\n    mask.style.zIndex = \x2798\x27;\n    document.body.appendChild(mask);\n    \/\/ 单击隐藏遮罩层\n    mask.onclick = function(){\n        this.style.display = \x27none\x27;\n    }\n    return mask;\n};\n\n\/\/ 创建登陆窗口\nvar createLogin = function() {\n    \/\/ 创建div元素\n    var login = document.createElement(\x27div\x27);\n    \/\/ 设置样式\n    login.style.position = \x27fixed\x27;\n    login.style.top = \x2750%\x27;\n    login.style.left = \x2750%\x27;\n    login.style.zIndex = \x27100\x27;\n    login.style.display = \x27none\x27;\n    login.style.padding = \x2750px 80px\x27;\n    login.style.backgroundColor = \x27#fff\x27;\n    login.style.border = \x271px solid #ccc\x27;\n    login.style.borderRadius = \x276px\x27;\n\n    login.innerHTML = \x27login it\x27;\n\n    document.body.appendChild(login);\n\n    return login;\n};\n\ndocument.getElementById(\x27btn\x27).onclick = function() {\n    var oMask = singleton(createMask)();\n    oMask.style.display = \x27block\x27;\n    var oLogin = singleton(createLogin)();\n    oLogin.style.display = \x27block\x27;\n    var w = parseInt(oLogin.clientWidth);\n    var h = parseInt(oLogin.clientHeight);\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e singleton = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3efn\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e instance;\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e instance || (instance = fn.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e));\n    }\n};\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建遮罩层\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e createMask = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建div元素\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e mask = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置样式\x3c\/span\x3e\n    mask.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27fixed\x27\x3c\/span\x3e;\n    mask.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n    mask.style.right = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n    mask.style.bottom = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n    mask.style.left = \x3cspan class=\x22hljs-string\x22\x3e\x270\x27\x3c\/span\x3e;\n    mask.style.opacity = \x3cspan class=\x22hljs-string\x22\x3e\x27o.75\x27\x3c\/span\x3e;\n    mask.style.backgroundColor = \x3cspan class=\x22hljs-string\x22\x3e\x27#000\x27\x3c\/span\x3e;\n    mask.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n    mask.style.zIndex = \x3cspan class=\x22hljs-string\x22\x3e\x2798\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(mask);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单击隐藏遮罩层\x3c\/span\x3e\n    mask.onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e mask;\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建登陆窗口\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e createLogin = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 创建div元素\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e login = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置样式\x3c\/span\x3e\n    login.style.position = \x3cspan class=\x22hljs-string\x22\x3e\x27fixed\x27\x3c\/span\x3e;\n    login.style.top = \x3cspan class=\x22hljs-string\x22\x3e\x2750%\x27\x3c\/span\x3e;\n    login.style.left = \x3cspan class=\x22hljs-string\x22\x3e\x2750%\x27\x3c\/span\x3e;\n    login.style.zIndex = \x3cspan class=\x22hljs-string\x22\x3e\x27100\x27\x3c\/span\x3e;\n    login.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27none\x27\x3c\/span\x3e;\n    login.style.padding = \x3cspan class=\x22hljs-string\x22\x3e\x2750px 80px\x27\x3c\/span\x3e;\n    login.style.backgroundColor = \x3cspan class=\x22hljs-string\x22\x3e\x27#fff\x27\x3c\/span\x3e;\n    login.style.border = \x3cspan class=\x22hljs-string\x22\x3e\x271px solid #ccc\x27\x3c\/span\x3e;\n    login.style.borderRadius = \x3cspan class=\x22hljs-string\x22\x3e\x276px\x27\x3c\/span\x3e;\n\n    login.innerHTML = \x3cspan class=\x22hljs-string\x22\x3e\x27login it\x27\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.body.appendChild(login);\n\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e login;\n};\n\n\x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27btn\x27\x3c\/span\x3e).onclick = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oMask = singleton(createMask)();\n    oMask.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oLogin = singleton(createLogin)();\n    oLogin.style.display = \x3cspan class=\x22hljs-string\x22\x3e\x27block\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e w = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(oLogin.clientWidth);\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e h = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(oLogin.clientHeight);\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在上面的实现中将单例模式的惰性实现部分提取出来，实现了惰性实现代码的复用，其中使用apply改变改变了fn内的this指向，使用 \x3ccode\x3e||\x3c\/code\x3e 预算简化代码的书写。\x3c\/p\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/lvzhenbang\/article\/blob\/master\/design-pattern\/index.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e设计模式相关文章\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript 单例模式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012842251">https://segmentfault.com/a/1190000012842251</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/y7tyiink8yo/" target="_blank">https://alili.tech/archive/y7tyiink8yo/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>