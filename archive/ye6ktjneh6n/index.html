<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="利用 electron-builder 实现 electron app 的署名／打包／发布以及自动更新"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>利用 electron-builder 实现 electron app 的署名／打包／发布以及自动更新 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ye6ktjneh6n/",
				"appid": "1613049289050283", 
				"title": "利用 electron-builder 实现 electron app 的署名／打包／发布以及自动更新 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-17T02:30:07"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/gycygxpqvtd/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/3wbavsguv3h/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&text=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&text=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&title=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&is_video=false&description=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&title=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&title=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&title=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fye6ktjneh6n%2f&title=%e5%88%a9%e7%94%a8%20electron-builder%20%e5%ae%9e%e7%8e%b0%20electron%20app%20%e7%9a%84%e7%bd%b2%e5%90%8d%ef%bc%8f%e6%89%93%e5%8c%85%ef%bc%8f%e5%8f%91%e5%b8%83%e4%bb%a5%e5%8f%8a%e8%87%aa%e5%8a%a8%e6%9b%b4%e6%96%b0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">利用 electron-builder 实现 electron app 的署名／打包／发布以及自动更新</h1><div class="meta"><div class="postdate"><time datetime="2018-12-17" itemprop="datePublished">2018-12-17</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3e笔者系 electron-builder 贡献者之一（#12）\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3eelectron-builder 是什么\x3c\/h1\x3e\n\x3cp\x3e官方解释如下：\x3c\/p\x3e\n\x3cblockquote\x3eA complete solution to package and build a ready for distribution Electron app with “auto update” support out of the box\x3c\/blockquote\x3e\n\x3cp\x3e简单来说，electron-builder 就是一个可以将 electron app 打包成安装器 (installer)，以及可以为 electron app 提供自动更新功能的全家桶。\x3c\/p\x3e\n\x3cp\x3e接下来分别介绍 electron-builder 的两大功能：署名\/打包\/发布 和 自动更新\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e署名\/打包\/发布流程\x3c\/h1\x3e\n\x3cp\x3e想要将开发完成的 app 署名打包成安装器 (installer) 发布出去，需要进行以下几个步骤\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e署名\x3c\/li\x3e\n\x3cli\x3e打包\x3c\/li\x3e\n\x3cli\x3e发布\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eelectron-builder 的强大之处在于，以上几个步骤可以一键完成，甚至包括打包成不同平台版本 (etc. macOS, windows...)\x3c\/p\x3e\n\x3cp\x3e但是，在让 electron-builder 为我们完成以上步骤之前，它必须知道一系列信息才能进行署名／打包／发布一系列流程。它需要知道的信息有：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e署名：署名证书在哪里，以及使用署名证书的密码等信息\x3c\/li\x3e\n\x3cli\x3e打包：打包的安装器面向的平台，是 macOS, windows 还是 linux ，以及安装器的格式等等\x3c\/li\x3e\n\x3cli\x3e发布：要将打包好的安装器发布到的服务器，那么就需要和服务器进行链接的验证信息\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e配置署名环节所需信息\x3c\/h2\x3e\n\x3cblockquote\x3e如果你进行署名打包的机器是 macOS 而且打包的安装器对应的平台也是 macOS 的话，electron-builder 会自动检测你 keychain 里面可用的署名证书然后自动使用，那么就不需要手动配置署名信息了。\x3c\/blockquote\x3e\n\x3cp\x3e要配置署名环节的各种信息，有两种方式（选其一即可，推荐在环境变量方式）\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e在 package.json 里设置\x3c\/li\x3e\n\x3cli\x3e在环境变量中设置\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e在 package.json 里的设置方式\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 对于 windows 平台的安装器\n\x26quot;win\x26quot;: {\n  \x26quot;target\x26quot;: [\n  {\n  \x26quot;signingHashAlgorithms\x26quot;: \x26quot;sha1\x26quot;,\n  \x26quot;sign\x26quot;: \x26quot;********\x26quot;,\n  \x26quot;certificationFile\x26quot;: \x26quot;..\/..\/*****\x26quot;,\n  \x26quot;certificatePassword\x26quot;: \x26quot;******\x26quot;\n  }\n  ]\n},\n\n\/\/ 对于 macOS 平台的安装器\n\x26quot;mac\x26quot;: {\n  \x26quot;identity\x26quot;: \x26quot;****\x26quot; \/\/ The name of certificate to use when signing.\n  },\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs 1c\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对于 windows 平台的安装器\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e\x22win\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22target\x22\x3c\/span\x3e: [\n  {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22signingHashAlgorithms\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22sha1\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22sign\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22********\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22certificationFile\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22..\/..\/*****\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22certificatePassword\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22******\x22\x3c\/span\x3e\n  }\n  ]\n},\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 对于 macOS 平台的安装器\x3c\/span\x3e\n\x3cspan class=\x22hljs-string\x22\x3e\x22mac\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22identity\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22****\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ The name of certificate to use when signing.\x3c\/span\x3e\n  },\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在环境变量中配置\x3c\/p\x3e\n\x3ctable\x3e\n\x3cthead\x3e\x3ctr\x3e\n\x3cth\x3eEnv Name\x3c\/th\x3e\n\x3cth\x3eDescription\x3c\/th\x3e\n\x3c\/tr\x3e\x3c\/thead\x3e\n\x3ctbody\x3e\n\x3ctr\x3e\n\x3ctd\x3eCSC_LINK\x3c\/td\x3e\n\x3ctd\x3eThe HTTPS link (or base64-encoded data, or file:\/\/ link, or local path) to certificate (\x3cem\x3e.p12 or \x3c\/em\x3e.pfx file). Shorthand ~\/ is supported (home directory).\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eCSC_KEY_PASSWORD\x3c\/td\x3e\n\x3ctd\x3eThe password to decrypt the certificate given in CSC_LINK.\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eCSC_NAME\x3c\/td\x3e\n\x3ctd\x3emacOS-only Name of a certificate (to retrieve from login.keychain). Useful on a development machine (not on CI) if you have several identities (otherwise don\x27t specify it).\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eCSC_IDENTITY_AUTO_DISCOVERY\x3c\/td\x3e\n\x3ctd\x3etrue or false. Defaults to true — on a macOS development machine valid and appropriate identity from your keychain will be automatically used.\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3ctr\x3e\n\x3ctd\x3eCSC_KEYCHAIN\x3c\/td\x3e\n\x3ctd\x3eThe keychain name. Used if CSC_LINK is not specified. Defaults to system default keychain.\x3c\/td\x3e\n\x3c\/tr\x3e\n\x3c\/tbody\x3e\n\x3c\/table\x3e\n\x3cp\x3e注意：如果你是在 macOS 上打包面向 windows 平台的安装器，必须增加两个不同的环境变量 WIN_CSC_LINK 和 WIN_CSC_KEY_PASSWORD\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e配置打包环节所需信息\x3c\/h2\x3e\n\x3cp\x3e所谓打包环节所需信息，就是指定安装器（installer）的一系列配置信息。比如说运行环境，安装器格式，版权信息，安装器命名等等。这些信息都是在 package.json 中配置。比如：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;win\x26quot;: {\n  \x26quot;target\x26quot;: [\n  {\n  \x26quot;target\x26quot;: \x26quot;nsis\x26quot;,\n  \x26quot;arch\x26quot;: [\n  \x26quot;x64\x26quot;,\n  \x26quot;ia32\x26quot;\n  ],\n  ......\n  }\n  ]\n},\n\n\x26quot;mac\x26quot;: {\n  \x26quot;category\x26quot;: \x26quot;your.app.category.type\x26quot;,\n  \x26quot;target\x26quot;: [\n  \x26quot;zip\x26quot;,\n  \x26quot;dmg\x26quot;\n  ],\n  },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs clean\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22win\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22target\x22\x3c\/span\x3e: [\n  {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22target\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22nsis\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22arch\x22\x3c\/span\x3e: [\n  \x3cspan class=\x22hljs-string\x22\x3e\x22x64\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22ia32\x22\x3c\/span\x3e\n  ],\n  ......\n  }\n  ]\n},\n\n\x3cspan class=\x22hljs-string\x22\x3e\x22mac\x22\x3c\/span\x3e: {\n  \x3cspan class=\x22hljs-string\x22\x3e\x22category\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22your.app.category.type\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22target\x22\x3c\/span\x3e: [\n  \x3cspan class=\x22hljs-string\x22\x3e\x22zip\x22\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-string\x22\x3e\x22dmg\x22\x3c\/span\x3e\n  ],\n  },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e更多详细配置，请参考\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/www.electron.build\/configuration\/mac\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emacOS详细配置\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/www.electron.build\/configuration\/win\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWindows详细配置\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/www.electron.build\/configuration\/linux\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eLinux详细配置\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e配置发布环节所需信息\x3c\/h2\x3e\n\x3cp\x3e署名，打包完成后的安装器需要上传发布到服务器（比如说S3），那么electron-builder就需要将链接服务器的验证信息（比如账号／密码，或者各种 Token 等等）。\x3c\/p\x3e\n\x3cp\x3e由于发布的服务器种类各异，所以针对不停的服务器，配置的方式不尽相同\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eBintray\x3c\/h3\x3e\n\x3cp\x3e通过\x3ca href=\x22https:\/\/bintray.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBintray\x3c\/a\x3e发布的话，需要一个 API key，这个API key 可以从用户主页获取到(\x22Edit Your Profile\x22 -\x26gt; API Key)，将这个 API key 配置到环境变量 BT_TOKEN 即可\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eGenericServer\x3c\/h3\x3e\n\x3cp\x3eGeneric 方式是针对可以直接上传不需要验证的服务器，无需格外配置信息。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3eGithubOptions\x3c\/h3\x3e\n\x3cp\x3e使用GitHub发布服务器的话，也需要一个TOKEN，这个TOKEN可以在GitHub上创建，可以参考\x3ca href=\x22https:\/\/github.com\/settings\/tokens\/new\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eGitHub Token 创建方法\x3c\/a\x3e。获取到这个Token之后，将它放到环境变量 GH_TOKEN 中既可。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3eS3Options\x3c\/h3\x3e\n\x3cp\x3e如果使用 Amazon S3 作为发布服务器的话，还需要额外安装一个 electron-publisher-s3 模块（可以通过npm 或者 yarn 来安装）\x3c\/p\x3e\n\x3cp\x3e同样的使用 Amazon S3 也需要验证，在 AWS 上获取你的验证信息，获取到你在AWS上的 KEY ID 和 ACCESS＿KEY 之后，然后分别放到环境变量　AWS_ACCESS_KEY_ID 和 AWS_SECRET_ACCESS_KEY 里面。或者你也可以放到 ~\/.aws\/credentials 里面。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3eSpacesOptions\x3c\/h3\x3e\n\x3cp\x3e如果你使用 DigitalOcean Spaces 作为发布服务器的话，获取到 access key 之后，然后在放到环境变量 DO_KEY_ID 和 DO_SECRET_KEY 里面即可\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3e署名\/打包\/发布 一键完成\x3c\/h2\x3e\n\x3cp\x3e上面的信息都配置好了的话，运行以下命令\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3e$ build --publish\x3c\/code\x3e \x3c\/p\x3e\n\x3cp\x3e即可一键完成 署名\/打包\/发布 流程\x3c\/p\x3e\n\x3cp\x3e更多详细信息可以参考官网 \x3ca href=\x22https:\/\/www.electron.build\/cli\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eCLI详细说明\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3e自动更新功能\x3c\/h1\x3e\n\x3cp\x3eelectron app 的自动更新方案，可以大概分为以下两种：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e有更新服务器 (with update server) 的方案\x3c\/li\x3e\n\x3cli\x3e无更新服务器（without update server）的方案\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3eelectron-updater 就是针对没有更新服务器的情况而生的解决方案。（PS：有更新服务器的解决方案，可以通过electron自带的autoUpdater来实现，具体的解决方案会在文章最后说明，在这里主要讲解electron-builder全家桶的使用方法）\x3c\/p\x3e\n\x3cp\x3e在 electron-builder 中，这个叫做 electron-updater 的模块与 electron-builder 本体不同，它是一个 runtime-dependency ，也就是放在package.json的\x3ccode\x3edependencies\x3c\/code\x3e里面的一个模块(PS: 而 electron-builder 是放在\x3ccode\x3edevDependencies\x3c\/code\x3e里面的)\x3c\/p\x3e\n\x3cp\x3eelectron-updater 功能强大之处在于，它支持多种无服务器自动更新方案。这里的无服务器并不是指的真的没有服务器。具体来说就是在这种方案里没有计算服务器 (eg. EC2)，只有静态文件服务器 (eg. S3)\x3c\/p\x3e\n\x3cp\x3eelectron-updater 模块通过检测静态文件服务器上面的最新release版本号，将它与本地版本号进行对比，从而得知是否需要自动更新。\x3c\/p\x3e\n\x3cp\x3e话不多说，我们直接来看代码\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const electron = require(\x26quot;electron\x26quot;);\nconst updater = require(\x26quot;electron-updater\x26quot;);\nconst autoUpdater = updater.autoUpdater;\n\nautoUpdater.setFeedURL({\n  provider: \x26quot;generic\x26quot;, \/\/ 这里还可以是 github, s3, bintray\n  url: \x26quot;https:\/\/gitlab.com\/_example_repo_\/-\/jobs\/artifacts\/master\/raw\/dist?job=build\x26quot;\n});\n\nautoUpdater.on(\x27update-available\x27, function (info) {\n  console.log(\x27Update available.\x27);\n});\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e electron = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22electron\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e updater = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22electron-updater\x22\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e autoUpdater = updater.autoUpdater;\n\nautoUpdater.setFeedURL({\n  \x3cspan class=\x22hljs-attr\x22\x3eprovider\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22generic\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这里还可以是 github, s3, bintray\x3c\/span\x3e\n  url: \x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/gitlab.com\/_example_repo_\/-\/jobs\/artifacts\/master\/raw\/dist?job=build\x22\x3c\/span\x3e\n});\n\nautoUpdater.on(\x3cspan class=\x22hljs-string\x22\x3e\x27update-available\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3einfo\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27Update available.\x27\x3c\/span\x3e);\n});\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e仅用两行就完成了最基本的新版本的检测机制，更多详细的API可以参考\x3ca href=\x22https:\/\/www.electron.build\/auto-update#module_electron-updater\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader12\x22\x3e附录：有更新服务器的自动更新方案\x3c\/h1\x3e\n\x3cp\x3e带有更新服务器的自动更新方案主要由 electron 自带的 autoUpdater 和 外部更新服务器组成\x3c\/p\x3e\n\x3cp\x3e常用的第三方服务有\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/zeit\/hazel\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eHazel\x3c\/a\x3e - 是一个开源的 update server. 主要利用了 Github 的 release tag 来进行新版本的发布通知。\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/GitbookIO\/nuts\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNuts\x3c\/a\x3e – 也是一个开源的 update server, 也是利用了 Github 的 release tag 来进行新版本的发布通知。不同的是，它可以将 新版本缓存到本地硬盘，同时还支持 private repo。同时 Heroku 里面提供的 update server 就是 Nuts，在 Heroku 里面可以轻松启动一个 Nuts 服务。\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/ArekSredzki\/electron-release-server\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eelectron-release-server\x3c\/a\x3e – 提供了一个 dashboard 来监控 release\x3c\/li\x3e\n\x3cli\x3e\n\x3ca href=\x22https:\/\/github.com\/NucleusPowered\/Nucleus\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eNucleus\x3c\/a\x3e - 这是一个由 Atlassian 公司维护的 update server, 它可以同时支持多个 app 和 channel。而且因为是通过静态文件服务器实现的，所以大大减少了计算消耗。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e大家可以根据自己的需求来选择搭建自己的更新服务器，具体做法可以参考各自的 GitHub 。\x3c\/p\x3e\n\x3cp\x3e而在 app 方面，只需要增加以下代码，就可以实现最基本的更新检测\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\nvar app = require(\x27app\x27);\nvar os = require(\x27os\x27);\nvar autoUpdater = require(\x27auto-updater\x27);\n\nvar platform = os.platform() \x2b \x27_\x27 \x2b os.arch();\nvar version = app.getVersion();\n\nautoUpdater.setFeedURL(\x27http:\/\/download.myapp.com\/update\/\x27\x2bplatform\x2b\x27\/\x27\x2bversion);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e app = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e os = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27os\x27\x3c\/span\x3e);\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e autoUpdater = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27auto-updater\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e platform = os.platform() \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27_\x27\x3c\/span\x3e \x2b os.arch();\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e version = app.getVersion();\n\nautoUpdater.setFeedURL(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/download.myapp.com\/update\/\x27\x3c\/span\x3e\x2bplatform\x2b\x3cspan class=\x22hljs-string\x22\x3e\x27\/\x27\x3c\/span\x3e\x2bversion);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/nicholaslee119.github.io\/2018\/01\/11\/electronBuilder%E5%85%A8%E5%AE%B6%E6%A1%B6%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e笔者博客\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>利用 electron-builder 实现 electron app 的署名／打包／发布以及自动更新</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012839354">https://segmentfault.com/a/1190000012839354</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ye6ktjneh6n/" target="_blank">https://alili.tech/archive/ye6ktjneh6n/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>