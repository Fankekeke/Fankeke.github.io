<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【教学向】再加150行代码教你实现一个低配版的web component库（1） —设计篇"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【教学向】再加150行代码教你实现一个低配版的web component库（1） —设计篇 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ygsf1yzn5zr/",
				"appid": "1613049289050283", 
				"title": "【教学向】再加150行代码教你实现一个低配版的web component库（1） —设计篇 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2019-01-02T02:30:09"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/3u2l1jf5l4/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/el4853ftm8v/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&text=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&text=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&title=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&is_video=false&description=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&title=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&title=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&title=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fygsf1yzn5zr%2f&title=%e3%80%90%e6%95%99%e5%ad%a6%e5%90%91%e3%80%91%e5%86%8d%e5%8a%a0150%e8%a1%8c%e4%bb%a3%e7%a0%81%e6%95%99%e4%bd%a0%e5%ae%9e%e7%8e%b0%e4%b8%80%e4%b8%aa%e4%bd%8e%e9%85%8d%e7%89%88%e7%9a%84web%20component%e5%ba%93%ef%bc%881%ef%bc%89%20%e2%80%94%e8%ae%be%e8%ae%a1%e7%af%87"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【教学向】再加150行代码教你实现一个低配版的web component库（1） —设计篇</h1><div class="meta"><div class="postdate"><time datetime="2019-01-02" itemprop="datePublished">2019-01-02</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e上两篇Mvvm教程的热度超出我的预期，很多码友留言表扬同时希望我继续出下一篇教程，当时我也半开玩笑说只要点赞超10就兑现承诺，没想到还真破了10，所以就有了今天的文章。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e准备工作\x3c\/h2\x3e\n\x3cp\x3e熟读 \x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010744960\x22\x3e【教学向】150行代码教你实现一个低配版的MVVM库（1）- 原理篇\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010752076\x22 target=\x22_blank\x22\x3e【教学向】150行代码教你实现一个低配版的MVVM库（2）- 代码篇\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e本篇是在上两篇的基础之上对代码进行进一步扩展，从而实现web component功能，所以读者务必掌握mvvm的实现机制才能深入理解本篇的内容（mvvm是web component的基石）。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader2\x22\x3e什么才是好的 web component 设计\x3c\/h2\x3e\n\x3cp\x3e目前市面上各大主流前端框架，凡事带web component功能的，他们的设计水准基本都不入我的法眼，唯一看得上眼的是google的polymer，但是在某些API设计层面也显得略微繁琐（想了解polymer的朋友看一翻一下我专栏里面10篇\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000003810019\x22\x3epolymer入门系列教程\x3c\/a\x3e）\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e什么是component\x3c\/h3\x3e\n\x3cp\x3ehtml提供的原生标签，比如DIV, BUTTON, INPUT家族，Hx家族等等，这些就好比俄罗斯方块里的一块块标准积木,我们称它们为stand component\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVp8Zb\x22 src=\x22https:\/\/static.alili.tech\/img\/bVp8Zb\x22 alt=\x222164182735-560b52e32e896\x22 title=\x222164182735-560b52e32e896\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e某一天这些积木不能满足你的需求了，被扩展或被组合形成了\x3cstrong\x3e非基本\x3c\/strong\x3e形状\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVp9hq\x22 src=\x22https:\/\/static.alili.tech\/img\/bVp9hq\x22 alt=\x222061348422-560b891619854\x22 title=\x222061348422-560b891619854\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这些新形状就是custom component，自定义组件！为什么要有component呢，好处是什么呢？\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 1. 可以复用\n 2. 结构清晰\n 3. 独立开发\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e 可以复用\n \x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e 结构清晰\n \x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e 独立开发\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你稍微开动下脑筋就能分析出来了，我就不展开了。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e我心目中的web component\x3c\/h3\x3e\n\x3cp\x3e在座的各位都写过index.html么？很简单\x3cbr\x3e主要就分成3大块内容，style, dom, script\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!--样式--\x3e\n\x3cstyle\x3e\n\x3c\/style\x3e\n\x3c!--DOM UI--\x3e\n\x3cbody\x3e\n\x3c\/body\x3e\n\x3c!--逻辑--\x3e\n\x3cscript\x3e\n\x3c\/script\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--样式--\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--DOM UI--\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--逻辑--\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后外面用个\x26lt;html\x26gt;\x26lt;\/html\x26gt;包裹\x3c\/p\x3e\n\x3cp\x3e所以这期低配版web component库设计目的很简单，作为一个开发人员，我希望在写一个\x3cstrong\x3ecustom component\x3c\/strong\x3e的时候也能按照index.html的原生风格来写，这是多么的优雅，自然，没有学习成本啊！\x3cbr\x3e这也应该是无数人心目中的web component设计\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eAPI设计\x3c\/h3\x3e\n\x3cp\x3e所以，我们的SegmentFault.js v2.0的Web Component的设计宗旨就是，尽量接近原生的html结构和使用习惯,\x3cstrong\x3e接近原生从而把学习成本降到最低，是我追求的东西\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- myComp.html \/\/文件名还是以.html结尾,自然 --\x3e\n\x3csf-component\x3e\n    \x3cstyle\x3e\n        \x3c!--css--\x3e\n    \x3c\/style\x3e\n    \x3ctemplate\x3e\n        \x3c!-- any dom--\x3e\n    \x3ctemplate\x3e\n    \x3cscript\x3e\n        \/\/js\n    \x3c\/script\x3e\n\x3csf-component\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- myComp.html \/\/文件名还是以.html结尾,自然 --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22xml\x22\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!--css--\x26gt;\x3c\/span\x3e\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- any dom--\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22actionscript\x22\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/js\x3c\/span\x3e\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e写个具体的例子\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- myComp.html --\x3e\n\x3csf-component\x3e\n    \x3cstyle\x3e\n        button{\n            color:red;\n        }\n        p{\n            color:yellow;\n        }\n    \x3c\/style\x3e\n    \x3ctemplate\x3e\n        \x3cdiv\x3e\n            \x3cinput type=\x26quot;text\x26quot; sf-value=\x26quot;this.message\x26quot;\/\x3e\n            \x3cbutton sf-innerText=\x26quot;this.buttonName\x26quot; onclick=\x26quot;this.clickHandler()\x26quot;\x3e\x3c\/button\x3e\n            \x3cp sf-innerText=\x26quot;this.message\x26quot;\x3e \n            \x3c\/p\x3e\n        \x3c\/div\x3e\n    \x3c\/template\x3e\n    \x3cscript\x3e\n        this.message = \x26quot;this is a component\x26quot;;\n        this.buttonName = \x26quot;click me\x26quot;;\n        this.clickHandler = function(){\n            alert(this.message);\n        };\n    \x3c\/script\x3e\n\x3c\/sf-component\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- myComp.html --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebutton\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e:red;\n        }\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e:yellow;\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-value\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.message\x22\x3c\/span\x3e\/\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-innerText\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.buttonName\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.clickHandler()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-innerText\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.message\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e \n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22actionscript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.message = \x3cspan class=\x22hljs-string\x22\x3e\x22this is a component\x22\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.buttonName = \x3cspan class=\x22hljs-string\x22\x3e\x22click me\x22\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clickHandler = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n            alert(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.message);\n        };\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e一个Component的描述文件定义好了，那么接下去就是如何引入它了。沿用上篇Mvvm中的风格，我们给SegmentFault这个Class弄个registerComponent(tagName,compPath)方法，比如在index.html中\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var sf = new SegmentFault();\nsf.registerController(\x26quot;xxx\x26quot;,xxx);\n...\nsf.registerComponent(\x26quot;my-comp\x26quot;,\x26quot;components\/myComp.html\x26quot;);\n...\nsf.init();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3esf\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e SegmentFault();\n\x3cspan class=\x22hljs-built_in\x22\x3esf\x3c\/span\x3e.registerController(\x3cspan class=\x22hljs-string\x22\x3e\x22xxx\x22\x3c\/span\x3e,xxx);\n...\n\x3cspan class=\x22hljs-built_in\x22\x3esf\x3c\/span\x3e.registerComponent(\x3cspan class=\x22hljs-string\x22\x3e\x22my-comp\x22\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x22components\/myComp.html\x22\x3c\/span\x3e);\n...\n\x3cspan class=\x22hljs-built_in\x22\x3esf\x3c\/span\x3e.init();\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e而在父组件中我们就可以通过\x22my-comp\x22这个我们刚刚注册时起的标签名来引入这个组件\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbody\x3e\n    \x3cdiv\x3e...\x3cdiv\x3e\n    \x3cmy-comp\x3e\x3c\/my-comp\x3e\n\x3c\/body\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e...\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emy-comp\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3emy-comp\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e怎么样！四个字：干净利落\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e一个Web Component库必须具备的基本素（功）养（能）\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 1. Mvvm 具备双向绑定功能\n 2. Shadow Style 具有独立的不污染全局的css功能\n 3. Communication 具有和父子兄弟组件通讯的功能\n 4. 拥有生命周期 （属于高级功能，本低配版库不涉及）\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lsl\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e Mvvm 具备双向绑定功能\n \x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e Shadow Style 具有独立的不污染全局的css功能\n \x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e Communication 具有和父子兄弟组件通讯的功能\n \x3cspan class=\x22hljs-number\x22\x3e4.\x3c\/span\x3e 拥有生命周期 （属于高级功能，本低配版库不涉及）\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e第一点Mvvm\x3c\/h4\x3e\n\x3cp\x3eMvvm之前已经实现，我们只要套用之前的实现即可\x3c\/p\x3e\n\x3ch4\x3e第二点Shadow Style\x3c\/h4\x3e\n\x3cp\x3e可能很多人对这个没什么概念，我沿用前文中的内容，比如我们在component中定义了它的style，如\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3c!-- myComp.html --\x3e\n\x3csf-component\x3e\n    \x3cstyle\x3e\n        button{\n            color:red;\n        }\n        p{\n            color:yellow;\n        }\n    \x3c\/style\x3e\n    \x3ctemplate\x3e\n        \x3cdiv\x3e\n            ...\n        \x3c\/div\x3e\n    \x3c\/template\x3e\n    \x3cscript\x3e\n        ...\n    \x3c\/script\x3e\n\x3c\/sf-component\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- myComp.html --\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22css\x22\x3e\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ebutton\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e:red;\n        }\n        \x3cspan class=\x22hljs-selector-tag\x22\x3ep\x3c\/span\x3e{\n            \x3cspan class=\x22hljs-attribute\x22\x3ecolor\x3c\/span\x3e:yellow;\n        }\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            ...\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n        ...\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里我们在\x26lt;style\x26gt;\x26lt;\/style\x26gt;标签中，定义了css，其中p和button的写法在传统观念中都是会影响html页面中所有的p元素和button元素的，这是我们不希望发生的，我们希望的是这个\x26lt;style\x26gt;\x26lt;\/style\x26gt;标签生效的作用域仅仅是在当前的，被定义的component中。这种有独立作用域的css就叫Shadow Style。\x3c\/p\x3e\n\x3cp\x3e要实现Shadow Style，其实有比较简单的做法，本篇设计篇中不会涉及，你可以趁此独立思考下，待下篇看看是否与我不谋而合，或者有比我更加高级的方案。\x3c\/p\x3e\n\x3ch4\x3e第三点Communication\x3c\/h4\x3e\n\x3cp\x3e即组件之间的通讯，经常有人在sf中问到这个组件通讯问题，其实这个问题是有比较标准的答案的，即3点\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 1. 父子通讯: 父-\x3e子 通过 set 属性， 子-\x3e父 抛事件\n 2. 兄弟通讯: 大儿子 抛事件给 -\x3e 父 -\x3e set 小儿子 的属性\n 3. 远亲通讯: 走消息总线 （其实就在一个单例上搞事件机制）\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs coq\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-number\x22\x3e1.\x3c\/span\x3e 父子通讯: 父-\x26gt;子 通过 \x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3e 属性， 子-\x26gt;父 抛事件\n \x3cspan class=\x22hljs-number\x22\x3e2.\x3c\/span\x3e 兄弟通讯: 大儿子 抛事件给 -\x26gt; 父 -\x26gt; \x3cspan class=\x22hljs-built_in\x22\x3eset\x3c\/span\x3e 小儿子 的属性\n \x3cspan class=\x22hljs-number\x22\x3e3.\x3c\/span\x3e 远亲通讯: 走消息总线 （其实就在一个单例上搞事件机制）\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e要实现通讯机制，其实也不复杂，主要就2个功能，1 父组件可以set子组件的属性， 2 组件可以向外层抛事件，外层也可以监听组件抛出的事件，所以，我们会如此设计这块的内容，觉个例子,代码说话\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cbody\x3e\n    \x3cdiv\x3e...\x3cdiv\x3e\n    \x3cmy-comp sf-msg=\x26quot;vm.message\x26quot; sf-oncustomevent=\x26quot;vm.customEventHandler\x26quot;\x3e\x3c\/my-comp\x3e\n\x3c\/body\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs vim\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;body\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;div\x26gt;\x3c\/span\x3e...\x3cspan class=\x22hljs-symbol\x22\x3e\x26lt;div\x26gt;\x3c\/span\x3e\n    \x26lt;my-\x3cspan class=\x22hljs-keyword\x22\x3ecomp\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3esf\x3c\/span\x3e-msg=\x3cspan class=\x22hljs-string\x22\x3e\x22vm.message\x22\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3esf\x3c\/span\x3e-oncustomevent=\x3cspan class=\x22hljs-string\x22\x3e\x22vm.customEventHandler\x22\x3c\/span\x3e\x26gt;\x26lt;\/my-\x3cspan class=\x22hljs-keyword\x22\x3ecomp\x3c\/span\x3e\x26gt;\n\x26lt;\/body\x26gt;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e大家注意看，从父组件的角度，我可以使用\x3cstrong\x3esf-\x3c\/strong\x3e \x2b propertyName(这里是msg) 来实现外部父组件对组件的赋值，而且还能使用\x3cstrong\x3esf-on\x3c\/strong\x3e \x2b 自定义事件名称（这里是customevent） 对组件进行监听。\x3c\/p\x3e\n\x3cp\x3e换个角度，从子组件角度出发，我可以被外部赋值，我可以可以向外部dispatch事件。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3csf-component\x3e\n    \x3cstyle\x3e\n        \/\/...\n    \x3c\/style\x3e\n    \x3ctemplate\x3e\n        \x3cdiv\x3e\n            \x3cdiv class=\x26quot;compClass\x26quot;\x3e\n                \x3cinput type=\x26quot;text\x26quot; sf-value=\x26quot;this.message\x26quot; \/\x3e\n                \x3cbutton sf-innerText=\x26quot;this.buttonName\x26quot; onclick=\x26quot;this.clickHandler()\x26quot;\x3e\x3c\/button\x3e\n                \x3cmy-comp2 sf-msg=\x26quot;this.message\x26quot;\x3e\x3c\/my-comp2\x3e\n                \x3cp sf-innerText=\x26quot;this.message \x2b \x27, hi Component1\x27\x26quot;\x3e\n                \x3c\/p\x3e\n            \x3c\/div\x3e\n        \x3c\/div\x3e\n    \x3c\/template\x3e\n    \x3cscript\x3e\n        this.buttonName = \x26quot;click me\x26quot;;\n        this.clickHandler = function () {\n            alert(this.message);\n            this.dispatchEvent(\x26quot;customevent\x26quot;, \x26quot;hello world\x26quot;);\/\/为component的vm,内置一个dispatchEvent方法，用法和原生的事件机制一毛一样。\n        };\n        Object.defineProperty(this, \x26quot;msg\x26quot;, {\n            set: function (value) {\n                if (value) {\n                    this.message = value;\n                }\n            }\n        });\n    \x3c\/script\x3e\n\x3c\/sf-component\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs xml\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\n        \/\/...\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3estyle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22compClass\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22text\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-value\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.message\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-innerText\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.buttonName\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eonclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.clickHandler()\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebutton\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emy-comp2\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-msg\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.message\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3emy-comp2\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esf-innerText\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22this.message \x2b \x27, hi Component1\x27\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n                \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n            \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22actionscript\x22\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.buttonName = \x3cspan class=\x22hljs-string\x22\x3e\x22click me\x22\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clickHandler = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n            alert(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.message);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.dispatchEvent(\x3cspan class=\x22hljs-string\x22\x3e\x22customevent\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22hello world\x22\x3c\/span\x3e);\x3cspan class=\x22hljs-comment\x22\x3e\/\/为component的vm,内置一个dispatchEvent方法，用法和原生的事件机制一毛一样。\x3c\/span\x3e\n        };\n        Object.defineProperty(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22msg\x22\x3c\/span\x3e, {\n            \x3cspan class=\x22hljs-keyword\x22\x3eset\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(value)\x3c\/span\x3e \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (value) {\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.message = value;\n                }\n            }\n        });\n    \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esf-component\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e使用Object.defineProperty可以很大程度上满足我们对set property的需求，另外再给component的vm挂载一个内置的函数this.dispatchEvent来发送自定义事件我们就功德圆满了。\x3c\/p\x3e\n\x3ch4\x3e第四点生命周期\x3c\/h4\x3e\n\x3cp\x3e你可以给一个组件：由注册-\x26gt;加载定义-\x26gt;显示到DOM Tree-\x26gt;内容更新-\x26gt;从DOM Tree移除-\x26gt;销毁 等一系时间节点定义他的生命周期，如果是做的比较考究的库，你可以把这这些时间节点的变更都一一向用户通知，或者提供api供用户控制。本文设计的低配版库阉割了这部分高级功能，我们就是一教学向的库，不整这些有的没的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e结语\x3c\/h2\x3e\n\x3cp\x3e至此，设计篇结束，主要介绍了一下本教学库的设计理念和一些web component的基本概念，欢迎点赞收藏评论，投硬笔投香蕉\x3c\/p\x3e\n\x3cp\x3e如果本文阅读没有问题，请继续服用下一篇\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010895646\x22 target=\x22_blank\x22\x3e【教学向】150行代码教你实现一个低配版的MVVM库（2）- 代码篇\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e相关阅读\x3c\/h3\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010744960\x22\x3e【教学向】150行代码教你实现一个低配版的MVVM库（1）- 原理篇\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010752076\x22 target=\x22_blank\x22\x3e【教学向】150行代码教你实现一个低配版的MVVM库（2）- 代码篇\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010877602\x22\x3e【教学向】再加150行代码教你实现一个低配版的web component库（1） —设计篇\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000010895646\x22 target=\x22_blank\x22\x3e【教学向】再加150行代码教你实现一个低配版的web component库（2） —原理篇\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【教学向】再加150行代码教你实现一个低配版的web component库（1） —设计篇</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000010877602">https://segmentfault.com/a/1190000010877602</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ygsf1yzn5zr/" target="_blank">https://alili.tech/archive/ygsf1yzn5zr/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>