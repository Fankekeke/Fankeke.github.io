<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript设计模式之结构型设计模式"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript设计模式之结构型设计模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ykduof3gh7d/",
				"appid": "1613049289050283", 
				"title": "JavaScript设计模式之结构型设计模式 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-20T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/oyc8oeyxub/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/9x3k49on2u/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&text=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&text=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&title=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&is_video=false&description=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&title=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&title=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&title=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fykduof3gh7d%2f&title=JavaScript%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f%e4%b9%8b%e7%bb%93%e6%9e%84%e5%9e%8b%e8%ae%be%e8%ae%a1%e6%a8%a1%e5%bc%8f"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript设计模式之结构型设计模式</h1><div class="meta"><div class="postdate"><time datetime="2018-12-20" itemprop="datePublished">2018-12-20</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3egithub 全文地址 ： \x3ca href=\x22https:\/\/github.com\/Nealyang\/YOU-SHOULD-KNOW-JS\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eYOU-SHOULD-KNOW-JS\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3ch2 id=\x22articleHeader0\x22\x3eJavaScript设计模式之外观模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e外观模式：为一组复杂子系统接口提供一个更高级的统一接口，通过这个接口使得对子系统访问更加的容易。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e代码演示\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 使用外观模式注册事件监听\nfunction addEvent(dom,type,fn) {\n  if(dom.addEventListener){\n      dom.addEventListener(type,fn,false);\n  }else if(dom.attachEvent){\n      dom.attachEvent(\x27on\x27\x2btype,fn);\n  }else{\n      dom[\x27on\x27\x2btype] = fn;\n  }\n}\n\/\/ 使用外观模式获取事件对象\n\nvar getEvent = function(event) {\n  return event || window.event;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs typescript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用外观模式注册事件监听\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eaddEvent\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edom,\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e,fn\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(dom.addEventListener){\n      dom.addEventListener(\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e,fn,\x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e);\n  }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(dom.attachEvent){\n      dom.attachEvent(\x3cspan class=\x22hljs-string\x22\x3e\x27on\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e,fn);\n  }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n      dom[\x3cspan class=\x22hljs-string\x22\x3e\x27on\x27\x3c\/span\x3e\x2b\x3cspan class=\x22hljs-keyword\x22\x3etype\x3c\/span\x3e] = fn;\n  }\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 使用外观模式获取事件对象\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e getEvent = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eevent\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e event || \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.event;\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过对接口的二次封装，使其简单易用，隐藏起内部的复杂度，外观模式就是对接口的外层包装，以供上层代码调用。因此外观模式封装的接口方法不需要接口的具体实现，只需要按照接口的使用规则使用即可\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3eJavaScript设计模式之适配器模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e适配器模式：将一个类的接口转换为另外一个类的接口以满足用户的需求，使类之间的接口不兼容问题通过适配器得以解决。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e代码演示\x3c\/h3\x3e\n\x3cp\x3e书中这里说的比价没意思，这里我拿汤姆大叔的例子来说下\x3c\/p\x3e\n\x3cp\x3e我们来举一个例子，鸭子（Dock）有飞（fly）和嘎嘎叫（quack）的行为，而火鸡虽然也有飞（fly）的行为，但是其叫声是咯咯的（gobble）。如果你非要火鸡也要实现嘎嘎叫（quack）这个动作，那我们可以复用鸭子的quack方法，但是具体的叫还应该是咯咯的，此时，我们就可以创建一个火鸡的适配器，以便让火鸡也支持quack方法，其内部还是要调用gobble。\x3c\/p\x3e\n\x3cp\x3e首先要先定义鸭子和火鸡的抽象行为，也就是各自的方法函数：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/鸭子\nvar Duck = function(){\n\n};\nDuck.prototype.fly = function(){\nthrow new Error(\x26quot;该方法必须被重写!\x26quot;);\n};\nDuck.prototype.quack = function(){\nthrow new Error(\x26quot;该方法必须被重写!\x26quot;);\n}\n\n\/\/火鸡\nvar Turkey = function(){\n\n};\nTurkey.prototype.fly = function(){\n    throw new Error(\x26quot; 该方法必须被重写 !\x26quot;);\n};\nTurkey.prototype.gobble = function(){\n    throw new Error(\x26quot; 该方法必须被重写 !\x26quot;);\n};\n\n\n\/\/鸭子\nvar MallardDuck = function () {\n    Duck.apply(this);\n};\nMallardDuck.prototype = new Duck(); \/\/原型是Duck\nMallardDuck.prototype.fly = function () {\n    console.log(\x26quot;可以飞翔很长的距离!\x26quot;);\n};\nMallardDuck.prototype.quack = function () {\n    console.log(\x26quot;嘎嘎！嘎嘎！\x26quot;);\n};\n\n\/\/火鸡\nvar WildTurkey = function () {\n    Turkey.apply(this);\n};\nWildTurkey.prototype = new Turkey(); \/\/原型是Turkey\nWildTurkey.prototype.fly = function () {\n    console.log(\x26quot;飞翔的距离貌似有点短!\x26quot;);\n};\nWildTurkey.prototype.gobble = function () {\n    console.log(\x26quot;咯咯！咯咯！\x26quot;);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/鸭子\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Duck = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n\n};\nDuck.prototype.fly = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22该方法必须被重写!\x22\x3c\/span\x3e);\n};\nDuck.prototype.quack = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n\x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22该方法必须被重写!\x22\x3c\/span\x3e);\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/火鸡\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Turkey = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n\n};\nTurkey.prototype.fly = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22 该方法必须被重写 !\x22\x3c\/span\x3e);\n};\nTurkey.prototype.gobble = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22 该方法必须被重写 !\x22\x3c\/span\x3e);\n};\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/鸭子\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e MallardDuck = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    Duck.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n};\nMallardDuck.prototype = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Duck(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/原型是Duck\x3c\/span\x3e\nMallardDuck.prototype.fly = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22可以飞翔很长的距离!\x22\x3c\/span\x3e);\n};\nMallardDuck.prototype.quack = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22嘎嘎！嘎嘎！\x22\x3c\/span\x3e);\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/火鸡\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e WildTurkey = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    Turkey.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n};\nWildTurkey.prototype = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Turkey(); \x3cspan class=\x22hljs-comment\x22\x3e\/\/原型是Turkey\x3c\/span\x3e\nWildTurkey.prototype.fly = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22飞翔的距离貌似有点短!\x22\x3c\/span\x3e);\n};\nWildTurkey.prototype.gobble = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x22咯咯！咯咯！\x22\x3c\/span\x3e);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e为了让火鸡也支持quack方法，我们创建了一个新的火鸡适配器TurkeyAdapter：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var TurkeyAdapter = function(oTurkey){\n    Duck.apply(this);\n    this.oTurkey = oTurkey;\n};\nTurkeyAdapter.prototype = new Duck();\nTurkeyAdapter.prototype.quack = function(){\n    this.oTurkey.gobble();\n};\nTurkeyAdapter.prototype.fly = function(){\n    var nFly = 0;\n    var nLenFly = 5;\n    for(; nFly \x3c nLenFly;){\n        this.oTurkey.fly();\n        nFly = nFly \x2b 1;\n    }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e TurkeyAdapter = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(oTurkey)\x3c\/span\x3e\x3c\/span\x3e{\n    Duck.apply(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.oTurkey = oTurkey;\n};\nTurkeyAdapter.prototype = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Duck();\nTurkeyAdapter.prototype.quack = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.oTurkey.gobble();\n};\nTurkeyAdapter.prototype.fly = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nFly = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e nLenFly = \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(; nFly \x26lt; nLenFly;){\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.oTurkey.fly();\n        nFly = nFly \x2b \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e该构造函数接受一个火鸡的实例对象，然后使用Duck进行apply，其适配器原型是Duck，然后要重新修改其原型的quack方法，以便内部调用oTurkey.gobble()方法。其fly方法也做了一些改变，让火鸡连续飞5次（内部也是调用自身的oTurkey.fly()方法）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    var oMallardDuck = new MallardDuck();\n    var oWildTurkey = new WildTurkey();\n    var oTurkeyAdapter = new TurkeyAdapter(oWildTurkey);\n    \n    \/\/原有的鸭子行为\n    oMallardDuck.fly();\n    oMallardDuck.quack();\n    \n    \/\/原有的火鸡行为\n    oWildTurkey.fly();\n    oWildTurkey.gobble();\n    \n    \/\/适配器火鸡的行为（火鸡调用鸭子的方法名称）\n    oTurkeyAdapter.fly();\n    oTurkeyAdapter.quack();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pony\x22\x3e\x3ccode\x3e    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oMallardDuck = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eMallardDuck\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-title\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eoWildTurkey\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eWildTurkey\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-title\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eoTurkeyAdapter\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eTurkeyAdapter\x3c\/span\x3e(oWildTurkey);\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/原有的鸭子行为\x3c\/span\x3e\n    \x3cspan class=\x22hljs-title\x22\x3eoMallardDuck\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3efly\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-title\x22\x3eoMallardDuck\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3equack\x3c\/span\x3e();\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/原有的火鸡行为\x3c\/span\x3e\n    \x3cspan class=\x22hljs-title\x22\x3eoWildTurkey\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3efly\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-title\x22\x3eoWildTurkey\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3egobble\x3c\/span\x3e();\n    \n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/适配器火鸡的行为（火鸡调用鸭子的方法名称）\x3c\/span\x3e\n    \x3cspan class=\x22hljs-title\x22\x3eoTurkeyAdapter\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3efly\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-title\x22\x3eoTurkeyAdapter\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3equack\x3c\/span\x3e();\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3eJavaScript设计模式之代理模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e代理模式：由于一个对象不能直接引用另一个对象，所以需要代理对象在这两个对象之间起到中介的作用\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e代码演示\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 先声明美女对象\nvar girl = function (name) {\n    this.name = name;\n};\n\n\/\/ 这是dudu\nvar dudu = function (girl) {\n    this.girl = girl;\n    this.sendGift = function (gift) {\n        alert(\x26quot;Hi \x26quot; \x2b girl.name \x2b \x26quot;, dudu送你一个礼物：\x26quot; \x2b gift);\n    }\n};\n\n\/\/ 大叔是代理\nvar proxyTom = function (girl) {\n    this.girl = girl;\n    this.sendGift = function (gift) {\n        (new dudu(girl)).sendGift(gift); \/\/ 替dudu送花咯\n    }\n};\n\nvar proxy = new proxyTom(new girl(\x26quot;酸奶小妹\x26quot;));\nproxy.sendGift(\x26quot;999朵玫瑰\x26quot;);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 先声明美女对象\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e girl = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(name)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.name = name;\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 这是dudu\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e dudu = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(girl)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.girl = girl;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.sendGift = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(gift)\x3c\/span\x3e \x3c\/span\x3e{\n        alert(\x3cspan class=\x22hljs-string\x22\x3e\x22Hi \x22\x3c\/span\x3e \x2b girl.name \x2b \x3cspan class=\x22hljs-string\x22\x3e\x22, dudu送你一个礼物：\x22\x3c\/span\x3e \x2b gift);\n    }\n};\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 大叔是代理\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxyTom = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(girl)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.girl = girl;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.sendGift = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(gift)\x3c\/span\x3e \x3c\/span\x3e{\n        (\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e dudu(girl)).sendGift(gift); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 替dudu送花咯\x3c\/span\x3e\n    }\n};\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e proxy = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e proxyTom(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e girl(\x3cspan class=\x22hljs-string\x22\x3e\x22酸奶小妹\x22\x3c\/span\x3e));\nproxy.sendGift(\x3cspan class=\x22hljs-string\x22\x3e\x22999朵玫瑰\x22\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e假如dudu要送酸奶小妹玫瑰花，却不知道她的联系方式或者不好意思，想委托大叔去送这些玫瑰，那大叔就是个代理\x3c\/p\x3e\n\x3cp\x3e其实在日常开发中，我们遇到很多这种情况，比如跨域，之前总结过跨域的所有东西，其中的jsonp，window.name还是location.hash都是通过代理模式来实现的。\x3c\/p\x3e\n\x3cp\x3e代理模式具体的从我的另一篇文章，JavaScript中的跨域总结去体会哈\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3eJavaScript设计模式之装饰着模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e装饰着模式，在不改变源对象的基础上，通过对其进行包装拓展使原有对象可以满足用户的更复杂需求\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3e代码演示\x3c\/h3\x3e\n\x3cp\x3e这里我拿给输入框添加事件举例\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var decorator = function(input ,fn) {\n  \/\/获取时间源\n  var input = document.getElementById(input);\n  if(typeof input.onclick === \x27function\x27){\n      \/\/缓存事件源原有的回调函数\n      var oldClickFn = input.onclick;\n      input.onclick = function (ev) { \n          oldClickFn();\n          fn();\n       }\n  }else{\n      input.onclick = fn;\n  }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs verilog\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e decorator = \x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e ,fn) {\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/获取时间源\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e = document\x3cspan class=\x22hljs-variable\x22\x3e.getElementById\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(typeof \x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.onclick\x3c\/span\x3e === \x27\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e\x27){\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/缓存事件源原有的回调函数\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e oldClickFn = \x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.onclick\x3c\/span\x3e;\n      \x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.onclick\x3c\/span\x3e = \x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (ev) { \n          oldClickFn();\n          fn();\n       }\n  }\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3einput\x3c\/span\x3e\x3cspan class=\x22hljs-variable\x22\x3e.onclick\x3c\/span\x3e = fn;\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e装饰着模式很简单，就是对原有对象的属性和方法的添加。相比于之前说的适配器模式是对原有对象的适配，添加的方法和原有的方法功能上大致相似。但是装饰着提供的方法和原有方法功能项则有一定的区别，且不需要去了解原有对象的功能。只要原封不动的去使用就行。不需要知道具体的实现细节。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3eJavaScript设计模式之桥接模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e桥接模式：在系统沿着多个维度变化的时候，不增加起复杂度已达到解耦的目的\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3e应用场景\x3c\/h3\x3e\n\x3cp\x3e在我们日常开发中，需要对相同的逻辑做抽象的处理。桥接模式就是为了解决这类的需求。\x3c\/p\x3e\n\x3cp\x3e桥接模式最主要的特点就是将实现层和抽象层解耦分离，是两部分可以独立变化\x3c\/p\x3e\n\x3cp\x3e比如我们写一个跑步游戏，对于游戏中的人和精灵都是动作单元。而他们的动作也是非常的统一。比如人和精灵和球运动都是x，y坐标的改变，球的颜色和精灵的颜色绘制方式也非常的类似。\x3cbr\x3e我们就可以将这些方法给抽象出来。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3e代码演示\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/运动单元\nfunction Speed(x,y) {\n  this.x = x;\n  this.y = y;\n}\nSpeed.prototype.run = function() {\n  console.log(\x27动起来\x27);\n}\n\/\/ 着色单元\nfunction Color(cl) {\n  this.color = cl;\n}\nColor.prototype.draw = function() {\n  console.log(\x27绘制色彩\x27)\n}\n\n\/\/ 变形单元\nfunction Shape(ap) {\n  this.shape = ap;\n}\nShape.prototype.change = function() {\n  console.log(\x27改变形状\x27);\n}\n\/\/说话单元\nfunction Speak(wd) {\n  this.word = wd;\n}\nSpeak.prototype.say = function() {\n  console.log(\x27请开始你的表演\x27)\n}\n\n\n\/\/创建球类，并且它可以运动可以着色\nfunction Ball(x,y,c) {\n  this.speed = new Speed(x,y);\n  this.color = new Color(c);\n}\nBall.prototype.init = function() {\n  \/\/实现运动和着色\n  this.speed.run();\n  this.color.draw();\n}\n\nfunction People(x,y,f) {\n  this.speed = new Speed(x,y);\n  this.speak = new Speak(f);\n}\n\nPeople.prototype.init = function() {\n  this.speed.run();\n  this.speak.say();\n}\n\/\/...\n\n\n\/\/当我们实例化一个人物对象的时候，他就可以有对应的方法实现了\n\nvar p =new People(10,12,\x27我是一个人\x27);\np.init();\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/运动单元\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSpeed\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex,y\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.x = x;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.y = y;\n}\nSpeed.prototype.run = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27动起来\x27\x3c\/span\x3e);\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 着色单元\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eColor\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecl\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color = cl;\n}\nColor.prototype.draw = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27绘制色彩\x27\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 变形单元\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eShape\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eap\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.shape = ap;\n}\nShape.prototype.change = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27改变形状\x27\x3c\/span\x3e);\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/说话单元\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eSpeak\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewd\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.word = wd;\n}\nSpeak.prototype.say = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27请开始你的表演\x27\x3c\/span\x3e)\n}\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/创建球类，并且它可以运动可以着色\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eBall\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex,y,c\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Speed(x,y);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Color(c);\n}\nBall.prototype.init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/实现运动和着色\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed.run();\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.color.draw();\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ePeople\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex,y,f\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Speed(x,y);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speak = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Speak(f);\n}\n\nPeople.prototype.init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speed.run();\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.speak.say();\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/...\x3c\/span\x3e\n\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/当我们实例化一个人物对象的时候，他就可以有对应的方法实现了\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p =\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e People(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e12\x3c\/span\x3e,\x3cspan class=\x22hljs-string\x22\x3e\x27我是一个人\x27\x3c\/span\x3e);\np.init();\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader16\x22\x3eJavaScript设计模式之组合模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e组合模式：又称部分-整体模式，将对象组合成树形结构以表示成“部分整体”的层次结构。组合模式使得用户对单个对象以及组合对象的使用具有一致性\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3e使用场景\x3c\/h3\x3e\n\x3cp\x3e我们平时开发过程中，一定会遇到这种情况：同时处理简单对象和由简单对象组成的复杂对象，这些简单对象和复杂对象会组合成树形结构，在客户端对其处理的时候要保持一致性。比如电商网站中的产品订单，每一张产品订单可能有多个子订单组合，比如操作系统的文件夹，每个文件夹有多个子文件夹或文件，我们作为用户对其进行复制，删除等操作时，不管是文件夹还是文件，对我们操作者来说是一样的。在这种场景下，就非常适合使用组合模式来实现。\x3c\/p\x3e\n\x3cp\x3e组合模式主要有三个角色：\x3c\/p\x3e\n\x3cp\x3e（1）抽象组件（Component）：抽象类，主要定义了参与组合的对象的公共接口\x3c\/p\x3e\n\x3cp\x3e（2）子对象（Leaf）：组成组合对象的最基本对象\x3c\/p\x3e\n\x3cp\x3e（3）组合对象（Composite）：由子对象组合起来的复杂对象\x3c\/p\x3e\n\x3cp\x3e理解组合模式的关键是要理解组合模式对单个对象和组合对象使用的一致性，我们接下来说说组合模式的实现加深理解。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3e代码演示\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 抽象一个虚拟父类\nvar News = function() {\n  this.children = [];\n  this.element = null;\n}\n\nNews.prototype = {\n    init:function() {\n      throw new Error(\x27请重写你的方法\x27);\n    },\n    add:function() {\n              throw new Error(\x27请重写你的方法\x27);\n            },\n    getElement:function() {\n                    throw new Error(\x27请重写你的方法\x27);\n                  },\n}\n\nfunction iniheritObject(o) {\n  function F() {}\n  F.prototype = o;\n  return new F();\n}\n\nfunction inheritPrototype(subClass,superClass) {\n  var p = iniheritObject(superClass.prototype);\n  p.constructor = subClass;\n  subClass.prototype = p;\n}\n\/\/容器类\nvar Container = function(id,parent) {\n  News.call(this);\n  this.id = id;\n  this.parent = parent;\n  this.init();\n}\n\n\/\/寄生式继承父类原型方法\ninheritPrototype(Container,News);\n\nContainer.prototype.init = function() {\n  this.element = document.createElement(\x27ul\x27);\n  this.element.id = this.id;\n  this.element.className = \x27new-container\x27;\n}\n\nContainer.prototype.add = function(child) {\n  this.children.push(child);\n  this.element.appendChild(child.getElement());\n  return this;\n}\n\nContainer.prototype.getElement = function() {\n  return this.element;\n}\n\nContainer.prototype.show = function() {\n  this.parent.appendChild(this.element)\n}\n\/\/同样下一层极的行成员集合类以及后面新闻组合体类\nvar Item = function(classname) {\n  News.call(this);\n  this.classname = classname;\n  this.init();\n}\ninheritPrototype(Item,News);\nItem.prototype.init = function() {\n  this.element = document.createElement(\x27li\x27);\n  this.element.className = this.classname;\n}\nItem.prototype.add = function(child) {\n  this.children.push(child);\n  this.element.appendChild(child.getElement());\n  return this;\n}\nItem.prototype.getElement = function() {\n  return this.element;\n}\n\nvar NewsGroup = function(className) {\n  News.call(this);\n  this.classname = classname|| \x27\x27;\n  this.init();\n}\ninheritPrototype(NewsGroup,News);\nNewsGroup.prototype.init = function() {\n  this.element = document.createElement(\x27div\x27);\n  this.element.className = this.classname;\n}\nNewsGroup.prototype.add = function(child) {\n  this.children.push(child);\n  this.element.appendChild(child.getElement());\n  return this;\n}\nNewsGroup.prototype.getElement = function() {\n  return this.element;\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 抽象一个虚拟父类\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e News = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.children = [];\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n}\n\nNews.prototype = {\n    \x3cspan class=\x22hljs-attr\x22\x3einit\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27请重写你的方法\x27\x3c\/span\x3e);\n    },\n    \x3cspan class=\x22hljs-attr\x22\x3eadd\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n              \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27请重写你的方法\x27\x3c\/span\x3e);\n            },\n    \x3cspan class=\x22hljs-attr\x22\x3egetElement\x3c\/span\x3e:\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n                    \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27请重写你的方法\x27\x3c\/span\x3e);\n                  },\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einiheritObject\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eo\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eF\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n  F.prototype = o;\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e F();\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3einheritPrototype\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esubClass,superClass\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e p = iniheritObject(superClass.prototype);\n  p.constructor = subClass;\n  subClass.prototype = p;\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/容器类\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Container = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eid,parent\x3c\/span\x3e) \x3c\/span\x3e{\n  News.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id = id;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.parent = parent;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init();\n}\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/寄生式继承父类原型方法\x3c\/span\x3e\ninheritPrototype(Container,News);\n\nContainer.prototype.init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27ul\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.id = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.id;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.className = \x3cspan class=\x22hljs-string\x22\x3e\x27new-container\x27\x3c\/span\x3e;\n}\n\nContainer.prototype.add = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.children.push(child);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.appendChild(child.getElement());\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n}\n\nContainer.prototype.getElement = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element;\n}\n\nContainer.prototype.show = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.parent.appendChild(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element)\n}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/同样下一层极的行成员集合类以及后面新闻组合体类\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e Item = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eclassname\x3c\/span\x3e) \x3c\/span\x3e{\n  News.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.classname = classname;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init();\n}\ninheritPrototype(Item,News);\nItem.prototype.init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27li\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.className = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.classname;\n}\nItem.prototype.add = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.children.push(child);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.appendChild(child.getElement());\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n}\nItem.prototype.getElement = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element;\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e NewsGroup = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eclassName\x3c\/span\x3e) \x3c\/span\x3e{\n  News.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.classname = classname|| \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.init();\n}\ninheritPrototype(NewsGroup,News);\nNewsGroup.prototype.init = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.createElement(\x3cspan class=\x22hljs-string\x22\x3e\x27div\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.className = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.classname;\n}\nNewsGroup.prototype.add = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3echild\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.children.push(child);\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element.appendChild(child.getElement());\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e;\n}\nNewsGroup.prototype.getElement = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.element;\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以后面我们在使用的时候，创建新闻类，利用之前定义的组合元素去组合就可以了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader20\x22\x3eJavaScript设计模式之享元模式\x3c\/h2\x3e\n\x3ch3 id=\x22articleHeader21\x22\x3e概念\x3c\/h3\x3e\n\x3cp\x3e享元模式：运用共享技术有效的支持大量细粒度对象，避免对象之间拥有相同内容造成的不必要开销\x3c\/p\x3e\n\x3cp\x3e主要用来优化程序的性能，适合解决大量类似的对象产生的性能问题。享元模式通过分析应用程序的对象，将其解析为内在数据和外在数据，减少对象数量，从而提高程序的性能。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader22\x22\x3e基础知识\x3c\/h3\x3e\n\x3cp\x3e享元模式通过共享大量的细粒度的对象，减少对象的数量，从而减少对象的内存，提高应用程序的性能。其基本思想就是分解现有类似对象的组成，将其展开为可以共享的内在数据和不可共享的外在数据，我们称内在数据的对象为享元对象。通常还需要一个工厂类来维护内在数据。\x3c\/p\x3e\n\x3cp\x3e在JS中，享元模式主要有下面几个角色组成：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e客户端：用来调用享元工厂来获取内在数据的类，通常是应用程序所需的对象\x3c\/li\x3e\n\x3cli\x3e享元工厂：用来维护享元数据的类\x3c\/li\x3e\n\x3cli\x3e享元类：保持内在数据的类\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3e基本实现\x3c\/h3\x3e\n\x3cp\x3e我们举个例子进行说明：苹果公司批量生产iphone，iphone的大部分数据比如型号，屏幕都是一样，少数部分数据比如内存有分16G,32G等。未使用享元模式前，我们写代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function Iphone(model, screen, memory, SN) {\n    this. model  = model;\n    this.screen = screen;\n    this.memory = memory;\n    this.SN = SN;\n}\nvar phones = [];\nfor (var i = 0; i \x3c 1000000; i\x2b\x2b) {\n    var memory = i % 2 == 0 ? 16 : 32;\n    phones.push(new Iphone(\x26quot;iphone6s\x26quot;, 5.0, memory, i));\n}\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIphone\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(model, screen, memory, SN)\x3c\/span\x3e \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e. model  = model;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.screen = screen;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.memory = memory;\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.SN = SN;\n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e phones = [];\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-number\x22\x3e1000000\x3c\/span\x3e; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e memory = i % \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e;\n    phones.push(\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Iphone(\x3cspan class=\x22hljs-string\x22\x3e\x22iphone6s\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5.0\x3c\/span\x3e, memory, i));\n}\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这段代码中，创建了一百万个iphone，每个iphone都独立申请一个内存。但是我们仔细观察可以看到，大部分iphone都是类似的，只是内存和序列号不一样，如果是一个对性能要求比较高的程序，我们就要考虑去优化它。\x3cbr\x3e 大量相似对象的程序，我们就可以考虑用享元模式去优化它，我们分析出大部分的iphone的型号，屏幕，内存都是一样的，那这部分数据就可以公用，就是享元模式中的内在数据，定义享元类如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 function IphoneFlyweight(model, screen, memory) {\n      this.model = model;\n      this.screen = screen;\n      this.memory = memory;\n  }\n  \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIphoneFlyweight\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(model, screen, memory)\x3c\/span\x3e \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.model = model;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.screen = screen;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.memory = memory;\n  }\n  \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e我们定义了iphone的享元类，其中包含型号，屏幕和内存三个数据。我们还需要一个享元工厂来维护这些数据：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 var flyweightFactory = (function () {\n     var iphones = {};\n     return {\n         get: function (model, screen, memory) {\n             var key = model \x2b screen \x2b memory;\n             if (!iphones[key]) {\n                 iphones[key] = new IphoneFlyweight(model, screen, memory);\n             }\n             return iphones[key];\n         }\n     };\n })();\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e flyweightFactory = (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e \x3c\/span\x3e{\n     \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e iphones = {};\n     \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e {\n         \x3cspan class=\x22hljs-keyword\x22\x3eget\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-params\x22\x3e(model, screen, memory)\x3c\/span\x3e \x3c\/span\x3e{\n             \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e key = model \x2b screen \x2b memory;\n             \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!iphones[key]) {\n                 iphones[key] = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e IphoneFlyweight(model, screen, memory);\n             }\n             \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e iphones[key];\n         }\n     };\n })();\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在这个工厂中，我们定义了一个字典来保存享元对象，提供一个方法根据参数来获取享元对象，如果字典中有则直接返回，没有则创建一个返回。\x3cbr\x3e接着我们创建一个客户端类，这个客户端类就是修改自iphone类：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 function Iphone(model, screen, memory, SN) {\n     this.flyweight = flyweightFactory.get(model, screen, memory);\n     this.SN = SN;\n }\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs actionscript\x22\x3e\x3ccode\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eIphone\x3c\/span\x3e\x3cspan class=\x22hljs-params\x22\x3e(model, screen, memory, SN)\x3c\/span\x3e \x3c\/span\x3e{\n     \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.flyweight = flyweightFactory.get(model, screen, memory);\n     \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.SN = SN;\n }\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后我们依旧像之间那样生成多个iphone\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var phones = [];\nfor (var i = 0; i \x3c 1000000; i\x2b\x2b) {\n    var memory = i % 2 == 0 ? 16 : 32;\n    phones.push(new Iphone(\x26quot;iphone6s\x26quot;, 5.0, memory, i));\n}\nconsole.log(phones);\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e phones = [];\n\x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-number\x22\x3e1000000\x3c\/span\x3e; i\x2b\x2b) {\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e memory = i \x3cspan class=\x22hljs-symbol\x22\x3e%\x3c\/span\x3e \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e ? \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e : \x3cspan class=\x22hljs-number\x22\x3e32\x3c\/span\x3e;\n    phones.\x3cspan class=\x22hljs-built_in\x22\x3epush\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e Iphone(\x3cspan class=\x22hljs-string\x22\x3e\x22iphone6s\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5.0\x3c\/span\x3e, memory, i));\n}\nconsole.\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e(phones);\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里的关键就在于Iphone构造函数里面的this.flyweight = flyweightFactory.get(model, screen, memory)。这句代码通过享元工厂去获取享元数据，而在享元工厂里面，如果已经存在相同数据的对象则会直接返回对象，多个iphone对象共享这部分相同的数据，所以原本类似的数据已经大大减少，减少的内存的占用。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader24\x22\x3e在DOM中的使用\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3cul class=\x26quot;menu\x26quot;\x3e\n    \x3cli class=\x26quot;item\x26quot;\x3e选项1\x3c\/li\x3e\n    \x3cli class=\x26quot;item\x26quot;\x3e选项2\x3c\/li\x3e\n    \x3cli class=\x26quot;item\x26quot;\x3e选项3\x3c\/li\x3e\n    \x3cli class=\x26quot;item\x26quot;\x3e选项4\x3c\/li\x3e\n    \x3cli class=\x26quot;item\x26quot;\x3e选项5\x3c\/li\x3e\n    \x3cli class=\x26quot;item\x26quot;\x3e选项6\x3c\/li\x3e\n\x3c\/ul\x3e\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs stata\x22\x3e\x3ccode\x3e\x26lt;ul \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22menu\x22\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item\x22\x3c\/span\x3e\x26gt;选项1\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item\x22\x3c\/span\x3e\x26gt;选项2\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item\x22\x3c\/span\x3e\x26gt;选项3\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item\x22\x3c\/span\x3e\x26gt;选项4\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item\x22\x3c\/span\x3e\x26gt;选项5\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n    \x26lt;\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item\x22\x3c\/span\x3e\x26gt;选项6\x26lt;\/\x3cspan class=\x22hljs-keyword\x22\x3eli\x3c\/span\x3e\x26gt;\n\x26lt;\/ul\x26gt;\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e点击菜单项，进行相应的操作，我们通过jQuery来绑定事件，一般会这么做：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 $(\x26quot;.item\x26quot;).on(\x26quot;click\x26quot;, function () {\n     console.log($(this).text());\n })\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e $(\x3cspan class=\x22hljs-string\x22\x3e\x22.item\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x22click\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n     \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log($(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e).text());\n })\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e给每个列表项绑定事件，点击输出相应的文本。这样看暂时没有什么问题，但是如果是一个很长的列表，尤其是在移动端特别长的列表时，就会有性能问题，因为每个项都绑定了事件，都占用了内存。但是这些事件处理程序其实都是很类似的，我们就要对其优化。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\n $(\x26quot;.menu\x26quot;).on(\x26quot;click\x26quot;, \x26quot;.item\x26quot;, function () {\n     console.log($(this).text());\n })\n \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs javascript\x22\x3e\x3ccode\x3e\n $(\x3cspan class=\x22hljs-string\x22\x3e\x22.menu\x22\x3c\/span\x3e).on(\x3cspan class=\x22hljs-string\x22\x3e\x22click\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x22.item\x22\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n     \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log($(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e).text());\n })\n \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过这种方式进行事件绑定，可以减少事件处理程序的数量，这种方式叫做事件委托，也是运用了享元模式的原理。事件处理程序是公用的内在部分，每个菜单项各自的文本就是外在部分。我们简单说下事件委托的原理：点击菜单项，事件会从li元素冒泡到ul元素，我们绑定事件到ul上，实际上就绑定了一个事件，然后通过事件参数event里面的target来判断点击的具体是哪一个元素，比如低级第一个li元素，event.target就是li，这样就能拿到具体的点击元素了，就可以根据不同元素进行不同的处理。\x3c\/p\x3e\n\x3cblockquote\x3e参考地址：\x3ca href=\x22http:\/\/luopq.com\/2015\/11\/20\/design-pattern-flyweight\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttp:\/\/luopq.com\/2015\/11\/20\/d...\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript设计模式之结构型设计模式</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012585364">https://segmentfault.com/a/1190000012585364</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ykduof3gh7d/" target="_blank">https://alili.tech/archive/ykduof3gh7d/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>