<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="基于vue-cli搭建多模块且各模块独立打包的项目"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>基于vue-cli搭建多模块且各模块独立打包的项目 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ys7c1rkntdd/",
				"appid": "1613049289050283", 
				"title": "基于vue-cli搭建多模块且各模块独立打包的项目 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-03T02:30:08"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/rsktiicfvqj/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/mdukp9h9zjl/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&text=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&text=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&title=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&is_video=false&description=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&title=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&title=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&title=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fys7c1rkntdd%2f&title=%e5%9f%ba%e4%ba%8evue-cli%e6%90%ad%e5%bb%ba%e5%a4%9a%e6%a8%a1%e5%9d%97%e4%b8%94%e5%90%84%e6%a8%a1%e5%9d%97%e7%8b%ac%e7%ab%8b%e6%89%93%e5%8c%85%e7%9a%84%e9%a1%b9%e7%9b%ae"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">基于vue-cli搭建多模块且各模块独立打包的项目</h1><div class="meta"><div class="postdate"><time datetime="2018-12-03" itemprop="datePublished">2018-12-03</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2\x3egithub地址\x3c\/h2\x3e\n\x3cp\x3e\x3ca href=\x22https:\/\/github.com\/shuidian\/vue-multipage\x22 rel=\x22nofollow noreferrer\x22\x3ehttps:\/\/github.com\/shuidian\/v...\x3c\/a\x3e\x3cbr\x3e为了充分发扬拿来主义的原则，先放出github地址，clone下来即可测试运行效果。如果觉得还可以的话，请点star，为更多人提供方便。\x3c\/p\x3e\n\x3ch2\x3e背景\x3c\/h2\x3e\n\x3cp\x3e在实际的开发过程中，单页应用并不能满足所有的场景。传统单页应用所生成的成果物，在单个系统功能拆分和多个系统灵活组装时并不方便。举个例子，我们在A系统中开发了一个实时视频预览模块和一个gis模块，传统方式打包A系统，我们会生成一个静态资源包，这个包，包含了实时视频预览模块和gis模块在内的所有模块。那么，现在有一个新的系统要做，碰巧需要原来A系统中的gis模块，那么我们只能把A系统打包，然后拿过来，通过引入url的方式，只使用其中的一个模块。这样做的问题很明显，我只需要A系统中的一个模块，但是我要引入整个A系统的资源包，这显然不合理。那么我们的需求就是从这里产生的，如果我们在开发系统A时，能够按模块划分生成多份静态资源包，最终的成果物中，会有多个子目录，每个子目录可独立运行，完成一个业务功能。这样的话，我们有任何系统需要我们开发过的任何模块，都可以直接打包指定的模块，灵活组装。\x3c\/p\x3e\n\x3ch2\x3e场景分析\x3c\/h2\x3e\n\x3cp\x3e首先，这种方案不是完全适合任何场景的，在使用时，还需要注意鉴别是否适用于当前业务场景。下面分析一下这种方式的优缺点：\x3c\/p\x3e\n\x3cp\x3e优点：\x3cbr\x3e1、可与其他系统灵活组装\x3cbr\x3e2、各个模块相互不受影响，所以不受框架和开发模式的制约\x3cbr\x3e3、不同模块可以分开部署\x3cbr\x3e4、后期维护风险小，可以持续的、稳定的进行维护（万一哪天vue\/react\/angular被淘汰了，不会受太大影响，每个模块分别迭代就好）\x3c\/p\x3e\n\x3cp\x3e缺点：\x3cbr\x3e1、各个模块有相互独立的资源包，那么如果有相同的资源引用，不能复用\x3cbr\x3e2、模块的组装要依赖iframe，所以要对浏览器安全设置、cookie共享等问题进行单独处理\x3cbr\x3e3、用iframe来包裹组件，组件所能控制到的范围就是其所在的iframe，当涉及到全屏的应用场景时，会比较麻烦\x3cbr\x3e4、不同组件之间的通信比较麻烦\x3c\/p\x3e\n\x3cp\x3e以上只是分析应用场景，下面重点讲解一下如何实现多模块独立打包。\x3c\/p\x3e\n\x3ch2\x3e我们的目标\x3c\/h2\x3e\n\x3cp\x3evue-cli默认打包方式的成果物与我们修改后生成的成果物结构对比如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV9hOU?w=247\x26amp;h=152\x22 src=\x22https:\/\/static.alili.tech\/img\/bV9hOU?w=247\x26amp;h=152\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV9hO5?w=258\x26amp;h=214\x22 src=\x22https:\/\/static.alili.tech\/img\/bV9hO5?w=258\x26amp;h=214\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e上图为默认配置下，打包成果物的目录结构，下图为我们修改配置后，打包成果物的目录结构\x3c\/p\x3e\n\x3ch2\x3e思路分析\x3c\/h2\x3e\n\x3cp\x3e我们最终输出的成果物是多个独立的目录，那么我们就应该区分这些模块，最好的方式就是每个模块的代码放在不同的目录中，所以我们需要在src中创建每个模块的目录。暂时我们以a,b,c三个模块为例，由于我们现在的项目是多模块的，每个模块都应该有独立的入口，所以我们修改src目录结构如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV9hSV?w=228\x26amp;h=251\x22 src=\x22https:\/\/static.alili.tech\/img\/bV9hSV?w=228\x26amp;h=251\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其他目录你怎么命名，以及要不要都无所谓，主要是modules目录，我们会在下面创建若干个模块。原来的src下的main.js、index.html和app.vue已经没用了，可以删掉了。然后模块内的目录结构如下图所示：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV9hWB?w=288\x26amp;h=442\x22 src=\x22https:\/\/static.alili.tech\/img\/bV9hWB?w=288\x26amp;h=442\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e聪明的同学已经看出来了，这里其实就是跟原来的src下的main.js、index.html和app.vue一样的，只不过我们把main.js改成了index.js而已。那么如果模块内要使用路由、状态管理都可以根据自己的需求去配置了，如何配置就不在这里讨论了。\x3c\/p\x3e\n\x3cp\x3e那么如何从这些模块开始，把项目最终编译成三个独立的静态资源包呢？简单来说，其实就是循环跑三次打包脚本，每次打包一个模块，然后修改一下文件输出路径，把编译好的文件输出到dist目录下的a,b,c目录中。这样最基本的模块分开打包功能就完成了，但是还有以下一些问题需要处理。\x3c\/p\x3e\n\x3cp\x3e1、这样打出的包，各个模块彼此独立。如果有这些模块是在一个系统中使用的，那么应该把多个模块重复的东西抽取出来复用。\x3cbr\x3e2、如果只需要系统中的部分模块，那么应该只打包需要的模块，并且把需要打包的模块之间的重复代码抽取出来复用。\x3c\/p\x3e\n\x3ch2\x3e问题解决方案\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e针对第一个问题：\x3c\/strong\x3e实质上只要把webpack配置成多入口的方式即可，这样在编译时webpack可以把模块之间的重复代码抽取出来，最终的成果物就是一个静态资源包加多个html文件。这种方式的成果物目录结构如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV9laF?w=354\x26amp;h=315\x22 src=\x22https:\/\/static.alili.tech\/img\/bV9laF?w=354\x26amp;h=315\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e针对第二个问题：\x3c\/strong\x3e其实跟第一个问题一样，只不过把webpack的入口配置成可变的就可以了，需要打包哪些模块，就把入口设置为哪些模块即可。这种方式的成果物目录如下（假设要打包a，c两个模块）：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV9k8n?w=330\x26amp;h=275\x22 src=\x22https:\/\/static.alili.tech\/img\/bV9k8n?w=330\x26amp;h=275\x22 alt=\x22clipboard.png\x22 title=\x22clipboard.png\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2\x3e修改webpack配置的详细步骤\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3e第一步：\x3c\/strong\x3e增加build\/module-conf.js用来处理获取模块目录等问题\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3e\nvar chalk = require(\x27chalk\x27)\nvar glob = require(\x27glob\x27)\n\n\/\/ 获取所有的moduleList\nvar moduleList = []\nvar moduleSrcArray = glob.sync(\x27.\/src\/modules\/*\x27)\nfor(var x in moduleSrcArray){\n  moduleList.push(moduleSrcArray[x].split(\x27\/\x27)[3])\n}\n\/\/ 检测是否在输入的参数是否在允许的list中\nvar checkModule = function () {\n  var module = process.env.MODULE_ENV\n  \/\/ 检查moduleList是否有重复\n  var hash = {}\n  var repeatList = []\n  for(var l = 0;l \x26lt; moduleList.length; l\x2b\x2b){\n    if(hash[moduleList[l]]){\n      repeatList.push(moduleList[l])\n    }\n    hash[moduleList[l]] = true\n  }\n  if(repeatList.length \x26gt; 0){\n    console.log(chalk.red(\x27moduleList 有重复：\x27))\n    console.log(chalk.red(repeatList.toString()))\n    return false\n  }\n  let result = true\n  let illegalParam = \x27\x27\n  for (let moduleToBuild of module.split(\x27,\x27)) {\n    if (moduleList.indexOf(moduleToBuild) === -1) {\n      result = false\n      illegalParam = moduleToBuild\n      break\n    }\n  }\n  if(result === false){\n    console.log(chalk.red(\x27参数错误，允许的参数为：\x27))\n    console.log(chalk.green(moduleList.toString()))\n    console.log(chalk.yellow(`非法参数：${illegalParam}`))\n  }\n  return result\n}\n\n\/\/ 获取当前要打包的模块列表\nfunction getModuleToBuild () {\n  let moduleToBuild = []\n  if (process.env.NODE_ENV === \x27production\x27) {\n    \/* 部署态，构建要打包的模块列表，如果指定了要打包的模块，那么按照指定的模块配置入口\n    *  这里有个特性，即使参数未传，那么获取到的undefined也是字符串类型的，不是undefined类型\n    * *\/\n    if (process.env.MODULE_ENV !== \x27undefined\x27) {\n      moduleToBuild = process.env.MODULE_ENV.split(\x27,\x27)\n    } else {\n      \/\/ 如果未指定要打包的模块，那么打包所有模块\n      moduleToBuild = moduleList\n    }\n  } else {\n    \/\/ 开发态，获取所有的模块列表\n    moduleToBuild = moduleList\n  }\n  return moduleToBuild\n}\n\nexports.moduleList = moduleList\nexports.checkModule = checkModule\nexports.getModuleToBuild = getModuleToBuild\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第二步：\x3c\/strong\x3e增加build\/build-all.js用来处理循环执行打包命令\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3econst path = require(\x27path\x27)\nconst execFileSync = require(\x27child_process\x27).execFileSync;\nconst moduleList = require(\x27.\/module-conf\x27).moduleList || []\n\nconst buildFile = path.join(__dirname, \x27build.js\x27)\n\nfor( const module of moduleList){\n  console.log(\x27正在编译:\x27,module)\n  \/\/ 异步执行构建文件，并传入两个参数，module：当前打包模块，separate：当前打包模式（分开打包）\n  execFileSync( \x27node\x27, [buildFile, module, \x27separate\x27], {})\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第三步：\x3c\/strong\x3e修改build\/build.js增加MODULE_ENV参数，用来记录当前打包的模块名称，增加MODE_ENV参数，用来记录当前打包的模式\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3e\x27use strict\x27\nrequire(\x27.\/check-versions\x27)()\nconst chalk = require(\x27chalk\x27)\n\nprocess.env.NODE_ENV = \x27production\x27\n\/\/ MODULE_ENV用来记录当前打包的模块名称\nprocess.env.MODULE_ENV = process.argv[2]\n\/\/ MODE_ENV用来记录当前打包的模式，total代表整体打包（静态资源在同一个目录下，可以复用重复的文件），separate代表分开打包（静态资源按模块名称分别独立打包，不能复用重复的文件）\nprocess.env.MODE_ENV = process.argv[3]\n\n\/\/ 如果有传参时，对传入的参数进行检测，如果参数非法，那么停止打包操作\nconst checkModule = require(\x27.\/module-conf\x27).checkModule\nif (process.env.MODULE_ENV !== \x27undefined\x27 \x26amp;\x26amp; !checkModule()) {\n  return\n}\n\nconst path = require(\x27path\x27)\nconst ora = require(\x27ora\x27)\nconst rm = require(\x27rimraf\x27)\nconst webpack = require(\x27webpack\x27)\nconst config = require(\x27..\/config\x27)\nconst webpackConfig = require(\x27.\/webpack.prod.conf\x27)\n\nconst spinner = ora(\x27building for production...\x27)\nspinner.start()\n\nrm(path.join(config.build.assetsRoot, config.build.assetsSubDirectory), err =\x26gt; {\n  if (err) throw err\n  webpack(webpackConfig, (err, stats) =\x26gt; {\n    spinner.stop()\n    if (err) throw err\n    process.stdout.write(stats.toString({\n      colors: true,\n      modules: false,\n      children: false, \/\/ If you are using ts-loader, setting this to true will make TypeScript errors show up during build.\n      chunks: false,\n      chunkModules: false\n    }) \x2b \x27\\n\\n\x27)\n\n    if (stats.hasErrors()) {\n      console.log(chalk.red(\x27  Build failed with errors.\\n\x27))\n      process.exit(1)\n    }\n\n    console.log(chalk.cyan(\x27  Build complete.\\n\x27))\n    console.log(chalk.yellow(\n      \x27  Tip: built files are meant to be served over an HTTP server.\\n\x27 \x2b\n      \x27  Opening index.html over file:\/\/ won\\\x27t work.\\n\x27\n    ))\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第四步：\x3c\/strong\x3e修改config\/index.js的配置，修改打包时的出口目录配置、html入口模板的配置以及静态资源路径配置\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3e\x27use strict\x27\n\/\/ Template version: 1.3.1\n\/\/ see http:\/\/vuejs-templates.github.io\/webpack for documentation.\n\nconst path = require(\x27path\x27)\n\nconst MODULE = process.env.MODULE_ENV || \x27undefined\x27\n\/\/ 入口模板路径\nconst htmlTemplate =  `.\/src\/modules\/${MODULE}\/index.html`\n\nmodule.exports = {\n  dev: {\n\n    \/\/ Paths\n    assetsSubDirectory: \x27static\x27,\n    assetsPublicPath: \x27\/\x27,\n    proxyTable: {},\n\n    \/\/ Various Dev Server settings\n    host: \x27localhost\x27, \/\/ can be overwritten by process.env.HOST\n    port: 8086, \/\/ can be overwritten by process.env.PORT, if port is in use, a free one will be determined\n    autoOpenBrowser: false,\n    errorOverlay: true,\n    notifyOnErrors: true,\n    poll: false, \/\/ https:\/\/webpack.js.org\/configuration\/dev-server\/#devserver-watchoptions-\n\n    \/\/ Use Eslint Loader?\n    \/\/ If true, your code will be linted during bundling and\n    \/\/ linting errors and warnings will be shown in the console.\n    useEslint: true,\n    \/\/ If true, eslint errors and warnings will also be shown in the error overlay\n    \/\/ in the browser.\n    showEslintErrorsInOverlay: false,\n\n    \/**\n     * Source Maps\n     *\/\n\n    \/\/ https:\/\/webpack.js.org\/configuration\/devtool\/#development\n    devtool: \x27cheap-module-eval-source-map\x27,\n\n    \/\/ If you have problems debugging vue-files in devtools,\n    \/\/ set this to false - it *may* help\n    \/\/ https:\/\/vue-loader.vuejs.org\/en\/options.html#cachebusting\n    cacheBusting: true,\n\n    cssSourceMap: true\n  },\n\n  build: {\n    \/\/ Template for index.html\n    index: path.resolve(__dirname, \x27..\/dist\x27, MODULE, \x27index.html\x27),\n    \/\/ 加入html入口\n    htmlTemplate: htmlTemplate,\n    \/\/ Paths\n    \/\/ assetsRoot: path.resolve(__dirname, \x27..\/dist\x27, MODULE),\n    \/\/ 这里判断一下打包的模式，如果是分开打包，要把成果物放到以模块命名的文件夹中\n    assetsRoot: process.env.MODE_ENV === \x27separate\x27 ? path.resolve(__dirname, \x27..\/dist\x27, MODULE) : path.resolve(__dirname, \x27..\/dist\x27),\n    assetsSubDirectory: \x27static\x27,\n    \/\/ 这里的路径改成相对路径，原来是assetsPublicPath: \x27\/\x27,\n    \/\/ assetsPublicPath: \x27\/\x27,\n    assetsPublicPath: \x27\x27,\n\n    \/**\n     * Source Maps\n     *\/\n\n    productionSourceMap: true,\n    \/\/ https:\/\/webpack.js.org\/configuration\/devtool\/#production\n    devtool: \x27#source-map\x27,\n\n    \/\/ Gzip off by default as many popular static hosts such as\n    \/\/ Surge or Netlify already gzip all static assets for you.\n    \/\/ Before setting to `true`, make sure to:\n    \/\/ npm install --save-dev compression-webpack-plugin\n    productionGzip: false,\n    productionGzipExtensions: [\x27js\x27, \x27css\x27],\n\n    \/\/ Run the build command with an extra argument to\n    \/\/ View the bundle analyzer report after build finishes:\n    \/\/ `npm run build --report`\n    \/\/ Set to `true` or `false` to always turn it on or off\n    bundleAnalyzerReport: process.env.npm_config_report\n  }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第五步：\x3c\/strong\x3e修改webpack.base.conf.js的入口配置，根据传参，动态配置入口文件\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3eentry() {\n    \/\/ 初始化入口配置\n    const entry = {}\n    \/\/ 所有模块的列表\n    const moduleToBuild = require(\x27.\/module-conf\x27).getModuleToBuild() || []\n    \/\/ 根据传入的待打包目录名称，构建多入口配置\n    for (let module of moduleToBuild) {\n      entry[module] = `.\/src\/modules\/${module}\/index.js`\n    }\n    return entry\n  },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第六步：\x3c\/strong\x3e修改webpack.dev.conf.js的配置,增加多入口时webpackHtmlPlugin插件的配置，增加静态资源服务器的配置\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3e\x27use strict\x27\nconst utils = require(\x27.\/utils\x27)\nconst webpack = require(\x27webpack\x27)\nconst config = require(\x27..\/config\x27)\nconst merge = require(\x27webpack-merge\x27)\nconst path = require(\x27path\x27)\nconst baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\nconst CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\nconst HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\nconst FriendlyErrorsPlugin = require(\x27friendly-errors-webpack-plugin\x27)\nconst portfinder = require(\x27portfinder\x27)\n\nconst HOST = process.env.HOST\nconst PORT = process.env.PORT \x26amp;\x26amp; Number(process.env.PORT)\nconst moduleList = require(\x27.\/module-conf\x27).moduleList || []\n\/\/ 组装多个（有几个module就有几个htmlWebpackPlugin）htmlWebpackPlugin，然后追加到配置中\nconst htmlWebpackPlugins = []\nfor (let module of moduleList) {\n  htmlWebpackPlugins.push(new HtmlWebpackPlugin({\n    filename: `${module}\/index.html`,\n    template: `.\/src\/modules\/${module}\/index.html`,\n    inject: true,\n    chunks: [module]\n  }))\n}\n\nconst devWebpackConfig = merge(baseWebpackConfig, {\n  module: {\n    rules: utils.styleLoaders({ sourceMap: config.dev.cssSourceMap, usePostCSS: true })\n  },\n  \/\/ cheap-module-eval-source-map is faster for development\n  devtool: config.dev.devtool,\n\n  \/\/ these devServer options should be customized in \/config\/index.js\n  devServer: {\n    clientLogLevel: \x27warning\x27,\n    historyApiFallback: {\n      rewrites: [\n        { from: \/.*\/, to: path.posix.join(config.dev.assetsPublicPath, \x27index.html\x27) },\n      ],\n    },\n    hot: true,\n    contentBase: false, \/\/ since we use CopyWebpackPlugin.\n    compress: true,\n    host: HOST || config.dev.host,\n    port: PORT || config.dev.port,\n    open: config.dev.autoOpenBrowser,\n    overlay: config.dev.errorOverlay\n      ? { warnings: false, errors: true }\n      : false,\n    publicPath: config.dev.assetsPublicPath,\n    proxy: config.dev.proxyTable,\n    quiet: true, \/\/ necessary for FriendlyErrorsPlugin\n    watchOptions: {\n      poll: config.dev.poll,\n    },\n    setup(app) {\n      \/\/ 写个小路由，打开浏览器的时候可以选一个开发路径\n      let html = `\x26lt;html\x26gt;\x26lt;head\x26gt;\x26lt;title\x26gt;调试页面\x26lt;\/title\x26gt;`\n      html \x2b= `\x26lt;style\x26gt;body{margin: 0}.module-menu{float: left;width: 200px;height: 100%;padding: 0 8px;border-right: 1px solid #00ffff;box-sizing: border-box}.module-container{float: left;width: calc(100% - 200px);height: 100%}.module-container iframe{width: 100%;height: 100%}\x26lt;\/style\x26gt;`\n      html \x2b= `\x26lt;\/head\x26gt;\x26lt;body\x26gt;\x26lt;div class=\x22module-menu\x22\x26gt;`\n      for(let module of moduleList){\n        html \x2b= `\x26lt;a href=\x22\/${module}\/index.html\x22 target=\x22container\x22\x26gt;${module.toString()}\x26lt;\/a\x26gt;\x26lt;br\x26gt;`\n      }\n      html \x2b= `\x26lt;\/div\x26gt;`\n      html \x2b= `\x26lt;div class=\x22module-container\x22\x26gt;\x26lt;iframe src=\x22\/${moduleList[0]}\/index.html\x22 name=\x22container\x22 frameborder=\x220\x22\x26gt;\x26lt;\/iframe\x26gt;\x26lt;\/div\x26gt;`\n      html \x2b= `\x26lt;\/body\x26gt;\x26lt;\/html\x26gt;`\n      \/\/ let sentHref = \x27\x27\n      \/\/ for(var module in moduleList){\n      \/\/   sentHref \x2b= \x27\x26lt;a href=\x22\/\x27\x2b moduleList[module] \x2b\x27\/index.html\x22\x26gt;点我调试模块：\x27\x2b moduleList[module].toString() \x2b\x27\x26lt;\/a\x26gt; \x26lt;br\x26gt;\x27\n      \/\/ }\n      app.get(\x27\/moduleList\x27, (req, res, next) =\x26gt; {\n        res.send(html)\n      })\n      \/\/ 访问根路径时重定向到moduleList\n      app.get(\x27\/\x27, (req, res, next) =\x26gt; {\n        res.redirect(\x27\/moduleList\x27)\n      })\n    }\n  },\n  plugins: [\n    new webpack.DefinePlugin({\n      \x27process.env\x27: require(\x27..\/config\/dev.env\x27)\n    }),\n    new webpack.HotModuleReplacementPlugin(),\n    new webpack.NamedModulesPlugin(), \/\/ HMR shows correct file names in console on update.\n    new webpack.NoEmitOnErrorsPlugin(),\n    \/\/ copy custom static assets\n    new CopyWebpackPlugin([\n      {\n        from: path.resolve(__dirname, \x27..\/static\x27),\n        to: config.dev.assetsSubDirectory,\n        ignore: [\x27.*\x27]\n      }\n    ]),\n    \/\/ https:\/\/github.com\/ampedandwired\/html-webpack-plugin\n    \/\/ new HtmlWebpackPlugin({\n    \/\/   filename: \x27a\/index.html\x27,\n    \/\/   template: \x27.\/src\/modules\/a\/index.html\x27,\n    \/\/   inject: true,\n    \/\/   chunks: [\x27a\x27]\n    \/\/ }),\n  ].concat(htmlWebpackPlugins)\n})\n\nmodule.exports = new Promise((resolve, reject) =\x26gt; {\n  portfinder.basePort = process.env.PORT || config.dev.port\n  portfinder.getPort((err, port) =\x26gt; {\n    if (err) {\n      reject(err)\n    } else {\n      \/\/ publish the new Port, necessary for e2e tests\n      process.env.PORT = port\n      \/\/ add port to devServer config\n      devWebpackConfig.devServer.port = port\n\n      \/\/ Add FriendlyErrorsPlugin\n      devWebpackConfig.plugins.push(new FriendlyErrorsPlugin({\n        compilationSuccessInfo: {\n          messages: [`Your application is running here: http:\/\/${devWebpackConfig.devServer.host}:${port}`],\n        },\n        onErrors: config.dev.notifyOnErrors\n          ? utils.createNotifierCallback()\n          : undefined\n      }))\n\n      resolve(devWebpackConfig)\n    }\n  })\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第七步：\x3c\/strong\x3e修改webpack.prod.conf.js的配置,增加对不同打包模式的处理。\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22javascript\x22\x3e\x27use strict\x27\nconst path = require(\x27path\x27)\nconst utils = require(\x27.\/utils\x27)\nconst webpack = require(\x27webpack\x27)\nconst config = require(\x27..\/config\x27)\nconst merge = require(\x27webpack-merge\x27)\nconst baseWebpackConfig = require(\x27.\/webpack.base.conf\x27)\nconst CopyWebpackPlugin = require(\x27copy-webpack-plugin\x27)\nconst HtmlWebpackPlugin = require(\x27html-webpack-plugin\x27)\nconst ExtractTextPlugin = require(\x27extract-text-webpack-plugin\x27)\nconst OptimizeCSSPlugin = require(\x27optimize-css-assets-webpack-plugin\x27)\nconst UglifyJsPlugin = require(\x27uglifyjs-webpack-plugin\x27)\n\nconst env = process.env.NODE_ENV === \x27testing\x27\n  ? require(\x27..\/config\/test.env\x27)\n  : require(\x27..\/config\/prod.env\x27)\n\/\/ 获取所有模块列表\nconst moduleToBuild = require(\x27.\/module-conf\x27).getModuleToBuild() || []\n\/\/ 组装多个（有几个module就有几个htmlWebpackPlugin）htmlWebpackPlugin，然后追加到配置中\nconst htmlWebpackPlugins = []\n\/\/ 判断一下是否为分开打包模式\nif (process.env.MODE_ENV === \x27separate\x27) {\n  \/\/ 分开打包时是通过重复运行指定模块打包命令实现的，所以每次都是单个html文件，只要配置一个htmlPlugin\n  htmlWebpackPlugins.push(new HtmlWebpackPlugin({\n    filename: process.env.NODE_ENV === \x27testing\x27\n      ? \x27index.html\x27\n      : config.build.index,\n    \/\/ template: \x27index.html\x27,\n    template: config.build.htmlTemplate,\n    inject: true,\n    minify: {\n      removeComments: true,\n      collapseWhitespace: true,\n      removeAttributeQuotes: true\n      \/\/ more options:\n      \/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\n    },\n    \/\/ necessary to consistently work with multiple chunks via CommonsChunkPlugin\n    chunksSortMode: \x27dependency\x27\n  }))\n} else {\n  \/\/ 一起打包时是通过多入口实现的，所以要配置多个htmlPlugin\n  for (let module of moduleToBuild) {\n    htmlWebpackPlugins.push(new HtmlWebpackPlugin({\n      filename: `${module}.html`,\n      template: `.\/src\/modules\/${module}\/index.html`,\n      inject: true,\n      \/\/ 这里要指定把哪些chunks追加到html中，默认会把所有入口的chunks追加到html中，这样是不行的\n      chunks: [\x27vendor\x27, \x27manifest\x27, module],\n      \/\/ filename: process.env.NODE_ENV === \x27testing\x27\n      \/\/   ? \x27index.html\x27\n      \/\/   : config.build.index,\n      \/\/ template: \x27index.html\x27,\n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n        \/\/ more options:\n        \/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\n      },\n      \/\/ necessary to consistently work with multiple chunks via CommonsChunkPlugin\n      chunksSortMode: \x27dependency\x27\n    }))\n  }\n}\n\n\/\/ 获取当前打包的目录名称\nconst webpackConfig = merge(baseWebpackConfig, {\n  module: {\n    rules: utils.styleLoaders({\n      sourceMap: config.build.productionSourceMap,\n      extract: true,\n      usePostCSS: true\n    })\n  },\n  devtool: config.build.productionSourceMap ? config.build.devtool : false,\n  output: {\n    path: config.build.assetsRoot,\n    filename: utils.assetsPath(\x27js\/[name].[chunkhash].js\x27),\n    chunkFilename: utils.assetsPath(\x27js\/[id].[chunkhash].js\x27)\n  },\n  plugins: [\n    \/\/ http:\/\/vuejs.github.io\/vue-loader\/en\/workflow\/production.html\n    new webpack.DefinePlugin({\n      \x27process.env\x27: env\n    }),\n    new UglifyJsPlugin({\n      uglifyOptions: {\n        compress: {\n          warnings: false\n        }\n      },\n      sourceMap: config.build.productionSourceMap,\n      parallel: true\n    }),\n    \/\/ extract css into its own file\n    new ExtractTextPlugin({\n      filename: utils.assetsPath(\x27css\/[name].[contenthash].css\x27),\n      \/\/ Setting the following option to `false` will not extract CSS from codesplit chunks.\n      \/\/ Their CSS will instead be inserted dynamically with style-loader when the codesplit chunk has been loaded by webpack.\n      \/\/ It\x27s currently set to `true` because we are seeing that sourcemaps are included in the codesplit bundle as well when it\x27s `false`,\n      \/\/ increasing file size: https:\/\/github.com\/vuejs-templates\/webpack\/issues\/1110\n      allChunks: true,\n    }),\n    \/\/ Compress extracted CSS. We are using this plugin so that possible\n    \/\/ duplicated CSS from different components can be deduped.\n    new OptimizeCSSPlugin({\n      cssProcessorOptions: config.build.productionSourceMap\n        ? { safe: true, map: { inline: false } }\n        : { safe: true }\n    }),\n    \/\/ generate dist index.html with correct asset hash for caching.\n    \/\/ you can customize output by editing \/index.html\n    \/\/ see https:\/\/github.com\/ampedandwired\/html-webpack-plugin\n    \/*\n    new HtmlWebpackPlugin({\n      filename: process.env.NODE_ENV === \x27testing\x27\n        ? \x27index.html\x27\n        : config.build.index,\n      \/\/ template: \x27index.html\x27,\n      template: config.build.htmlTemplate,\n      inject: true,\n      minify: {\n        removeComments: true,\n        collapseWhitespace: true,\n        removeAttributeQuotes: true\n        \/\/ more options:\n        \/\/ https:\/\/github.com\/kangax\/html-minifier#options-quick-reference\n      },\n      \/\/ necessary to consistently work with multiple chunks via CommonsChunkPlugin\n      chunksSortMode: \x27dependency\x27\n    }),\n    *\/\n    \/\/ keep module.id stable when vendor modules does not change\n    new webpack.HashedModuleIdsPlugin(),\n    \/\/ enable scope hoisting\n    new webpack.optimize.ModuleConcatenationPlugin(),\n    \/\/ split vendor js into its own file\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27vendor\x27,\n      minChunks (module) {\n        \/\/ any required modules inside node_modules are extracted to vendor\n        return (\n          module.resource \x26amp;\x26amp;\n          \/\\.js$\/.test(module.resource) \x26amp;\x26amp;\n          module.resource.indexOf(\n            path.join(__dirname, \x27..\/node_modules\x27)\n          ) === 0\n        )\n      }\n    }),\n    \/\/ extract webpack runtime and module manifest to its own file in order to\n    \/\/ prevent vendor hash from being updated whenever app bundle is updated\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27manifest\x27,\n      minChunks: Infinity\n    }),\n    \/\/ This instance extracts shared chunks from code splitted chunks and bundles them\n    \/\/ in a separate chunk, similar to the vendor chunk\n    \/\/ see: https:\/\/webpack.js.org\/plugins\/commons-chunk-plugin\/#extra-async-commons-chunk\n    new webpack.optimize.CommonsChunkPlugin({\n      name: \x27app\x27,\n      async: \x27vendor-async\x27,\n      children: true,\n      minChunks: 3\n    }),\n\n    \/\/ copy custom static assets\n    new CopyWebpackPlugin([\n      {\n        from: path.resolve(__dirname, \x27..\/static\x27),\n        to: config.build.assetsSubDirectory,\n        ignore: [\x27.*\x27]\n      }\n    ])\n  ].concat(htmlWebpackPlugins)\n})\n\nif (config.build.productionGzip) {\n  const CompressionWebpackPlugin = require(\x27compression-webpack-plugin\x27)\n\n  webpackConfig.plugins.push(\n    new CompressionWebpackPlugin({\n      asset: \x27[path].gz[query]\x27,\n      algorithm: \x27gzip\x27,\n      test: new RegExp(\n        \x27\\\\.(\x27 \x2b\n        config.build.productionGzipExtensions.join(\x27|\x27) \x2b\n        \x27)$\x27\n      ),\n      threshold: 10240,\n      minRatio: 0.8\n    })\n  )\n}\n\nif (config.build.bundleAnalyzerReport) {\n  const BundleAnalyzerPlugin = require(\x27webpack-bundle-analyzer\x27).BundleAnalyzerPlugin\n  webpackConfig.plugins.push(new BundleAnalyzerPlugin())\n}\n\nmodule.exports = webpackConfig\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e第八步：\x3c\/strong\x3e修改package.json，增加npm run build-all指令\x3c\/p\x3e\n\x3cpre\x3e\x3ccode class=\x22json\x22\x3e\x22scripts\x22: {\n    \x22dev\x22: \x22webpack-dev-server --inline --progress --config build\/webpack.dev.conf.js\x22,\n    \x22start\x22: \x22npm run dev\x22,\n    \x22unit\x22: \x22jest --config test\/unit\/jest.conf.js --coverage\x22,\n    \x22test\x22: \x22npm run unit\x22,\n    \x22lint\x22: \x22eslint --ext .js,.vue src test\/unit\x22,\n    \x22build\x22: \x22node build\/build.js\x22,\n    \x22build-all\x22: \x22node build\/build-all.js\x22\n  },\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2\x3e构建指令\x3c\/h2\x3e\n\x3cp\x3e\x3cstrong\x3enpm run build\x3c\/strong\x3e \/\/ 打包全部模块到一个资源包下面，每个模块的入口是module.html文件，静态资源都在static目录中，这种方式可以复用重复的资源\x3cbr\x3e\x3cstrong\x3enpm run build moduleName1,moduleName2,...\x3c\/strong\x3e \/\/ 打包指定模块到一个资源包下面,每个模块的入口是module.html文件，静态资源都在static目录中，这种方式可以复用重复的资源\x3cbr\x3e\x3cstrong\x3enpm run build-all\x3c\/strong\x3e \/\/ 打包所有模块，然后每个模块彼此独立，有几个模块，就产生几个静态资源包，这种方式不会复用重复的资源\x3c\/p\x3e\n\x3cp\x3e本文是在参考了以下文章的内容之后写的，在原有的基础上做了一些扩展，支持多入口模式\x3cbr\x3e参考资料：\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009543196\x22\x3e\x3c\/a\x3e\x3ca href=\x22https:\/\/segmentfault.com\/a\/1190000009543196\x22\x3ehttps:\/\/segmentfault.com\/a\/11...\x3c\/a\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>基于vue-cli搭建多模块且各模块独立打包的项目</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014571631">https://segmentfault.com/a/1190000014571631</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ys7c1rkntdd/" target="_blank">https://alili.tech/archive/ys7c1rkntdd/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>