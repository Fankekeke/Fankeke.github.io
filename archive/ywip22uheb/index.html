<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="JavaScript 优雅的实现方式包含你可能不知道的知识点"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>JavaScript 优雅的实现方式包含你可能不知道的知识点 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/ywip22uheb/",
				"appid": "1613049289050283", 
				"title": "JavaScript 优雅的实现方式包含你可能不知道的知识点 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-21T02:30:11"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/nzqbz1ylkus/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/5fxzcoakai2/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&text=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&text=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&title=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&is_video=false&description=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&title=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&title=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&title=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fywip22uheb%2f&title=JavaScript%20%e4%bc%98%e9%9b%85%e7%9a%84%e5%ae%9e%e7%8e%b0%e6%96%b9%e5%bc%8f%e5%8c%85%e5%90%ab%e4%bd%a0%e5%8f%af%e8%83%bd%e4%b8%8d%e7%9f%a5%e9%81%93%e7%9a%84%e7%9f%a5%e8%af%86%e7%82%b9"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">JavaScript 优雅的实现方式包含你可能不知道的知识点</h1><div class="meta"><div class="postdate"><time datetime="2018-12-21" itemprop="datePublished">2018-12-21</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cp\x3e\x3cstrong\x3e有些东西很好用，但是你未必知道；有些东西你可能用过，但是你未必知道原理。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e实现一个目的有多种途径，俗话说，条条大路通罗马。很多内容来自平时的一些收集以及过往博客文章底下的精彩评论，收集整理拓展一波，发散一下大家的思维以及拓展一下知识面。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e茴字有四种写法，233333...， 文末有彩蛋有惊喜。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader0\x22\x3e1、简短优雅地实现 sleep 函数\x3c\/h3\x3e\n\x3cp\x3e很多语言都有 \x3ccode\x3esleep\x3c\/code\x3e 函数，显然 \x3ccode\x3ejs\x3c\/code\x3e 没有，那么如何能简短优雅地实现这个方法？\x3c\/p\x3e\n\x3ch4\x3e1.1 普通版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function sleep(sleepTime) {\n    for(var start = \x2bnew Date; \x2bnew Date - start \x3c= sleepTime;) {}\n}\nvar t1 = \x2bnew Date()\nsleep(3000)\nvar t2 = \x2bnew Date()\nconsole.log(t2 - t1)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esleep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3esleepTime\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e start = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e; \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e - start \x26lt;= sleepTime;) {}\n}\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e t1 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\nsleep(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e t2 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(t2 - t1)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：简单粗暴，通俗易懂。\x3cbr\x3e缺点：这是最简单粗暴的实现，确实 sleep 了，也确实卡死了，CPU 会飙升，无论你的服务器 CPU 有多么 Niubility。\x3c\/p\x3e\n\x3ch4\x3e1.2  Promise 版本\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function sleep(time) {\n  return new Promise(resolve =\x3e setTimeout(resolve, time))\n}\n\nconst t1 = \x2bnew Date()\nsleep(3000).then(() =\x3e {\n  const t2 = \x2bnew Date()\n  console.log(t2 - t1)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esleep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etime\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e =\x26gt;\x3c\/span\x3e setTimeout(resolve, time))\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t1 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\nsleep(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e).then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t2 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(t2 - t1)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：这种方式实际上是用了 setTimeout，没有形成进程阻塞，不会造成性能和负载问题。\x3cbr\x3e缺点：虽然不像 callback 套那么多层，但仍不怎么美观，而且当我们需要在某过程中需要停止执行（或者在中途返回了错误的值），还必须得层层判断后跳出，非常麻烦，而且这种异步并不是那么彻底，还是看起来别扭。\x3c\/p\x3e\n\x3ch4\x3e1.3 Generator 版本\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function sleep(delay) {\n  return function(cb) {\n    setTimeout(cb.bind(this), delay)\n  };\n}\n\nfunction* genSleep() {\n  const t1 = \x2bnew Date()\n  yield sleep(3000)\n  const t2 = \x2bnew Date()\n  console.log(t2 - t1)\n}\n\nasync(genSleep)\n\nfunction async(gen) {\n  const iter = gen()\n  function nextStep(it) {\n    if (it.done) return\n    if (typeof it.value === \x26quot;function\x26quot;) {\n      it.value(function(ret) {\n        nextStep(iter.next(ret))\n      })\n    } else {\n      nextStep(iter.next(it.value))\n    }\n  }\n  nextStep(iter.next())\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esleep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edelay\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecb\x3c\/span\x3e) \x3c\/span\x3e{\n    setTimeout(cb.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e), delay)\n  };\n}\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e* \x3cspan class=\x22hljs-title\x22\x3egenSleep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t1 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e sleep(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t2 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(t2 - t1)\n}\n\n\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e(genSleep)\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3easync\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3egen\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e iter = gen()\n  \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enextStep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eit\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (it.done) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e it.value === \x3cspan class=\x22hljs-string\x22\x3e\x22function\x22\x3c\/span\x3e) {\n      it.value(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eret\x3c\/span\x3e) \x3c\/span\x3e{\n        nextStep(iter.next(ret))\n      })\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n      nextStep(iter.next(it.value))\n    }\n  }\n  nextStep(iter.next())\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：同 Promise 优点，另外代码就变得非常简单干净，没有 then 那么生硬和恶心。\x3cbr\x3e缺点：但不足也很明显，就是每次都要执行 next() 显得很麻烦，虽然有 \x3ca href=\x22https:\/\/github.com\/tj\/co\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3eco\x3c\/strong\x3e\x3c\/a\x3e（第三方包）可以解决，但就多包了一层，不好看，错误也必须按 \x3ca href=\x22https:\/\/github.com\/tj\/co\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3eco\x3c\/strong\x3e\x3c\/a\x3e 的逻辑来处理，不爽。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ca href=\x22https:\/\/github.com\/tj\/co\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e\x3cstrong\x3eco\x3c\/strong\x3e\x3c\/a\x3e 之所以这么火并不是没有原因的，当然不是仅仅实现 \x3ccode\x3esleep\x3c\/code\x3e 这么无聊的事情，而是它活生生的借着\x3ccode\x3egenerator\/yield\x3c\/code\x3e 实现了很类似 \x3ccode\x3easync\/await\x3c\/code\x3e 的效果！这一点真是让我三观尽毁刮目相看。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const co = require(\x26quot;co\x26quot;)\nfunction sleep(delay) {\n  return function(cb) {\n    setTimeout(cb.bind(this), delay)\n  }\n}\n\nco(function*() {\n  const t1 = \x2bnew Date()\n  yield sleep(3000)\n  const t2 = \x2bnew Date()\n  console.log(t2 - t1)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e co = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22co\x22\x3c\/span\x3e)\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esleep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edelay\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ecb\x3c\/span\x3e) \x3c\/span\x3e{\n    setTimeout(cb.bind(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e), delay)\n  }\n}\n\nco(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e*(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t1 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-keyword\x22\x3eyield\x3c\/span\x3e sleep(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t2 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(t2 - t1)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3e1.4 Async\/Await 版本\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function sleep(delay) {\n  return new Promise(reslove =\x3e {\n    setTimeout(reslove, delay)\n  })\n}\n\n!async function test() {\n  const t1 = \x2bnew Date()\n  await sleep(3000)\n  const t2 = \x2bnew Date()\n  console.log(t2 - t1)\n}()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esleep\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edelay\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ereslove\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n    setTimeout(reslove, delay)\n  })\n}\n\n!\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t1 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e sleep(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e)\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t2 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(t2 - t1)\n}()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：同 Promise 和 Generator 优点。 Async\/Await 可以看做是 Generator 的语法糖，Async 和 Await 相较于 * 和 yield 更加语义，另外各个函数都是扁平的，不会产生多余的嵌套，代码更加清爽易读。\x3cbr\x3e缺点： ES7 语法存在兼容性问题，有 babel 一切兼容性都不是问题\x3c\/p\x3e\n\x3cp\x3e至于 \x3ccode\x3eAsync\/Await\x3c\/code\x3e 比 \x3ccode\x3ePromise\x3c\/code\x3e 和 \x3ccode\x3eGenerator\x3c\/code\x3e 的好处可以参考这两篇文章：\x3cbr\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/59f9ce7a51882554f666220f\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eAsync\/Await 比 Generator 的四个改进点\x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22https:\/\/juejin.im\/post\/58ede4c1b123db43cc365551\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e关于Async\/Await替代Promise的6个理由\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e1.5 不要忘了开源的力量\x3c\/h4\x3e\n\x3cp\x3e\x3cstrong\x3e在 javascript 优雅的写 sleep 等于如何优雅的不优雅，2333\x3c\/strong\x3e\x3c\/p\x3e\n\x3cblockquote\x3e这里有 C\x2b\x2b 实现的模块：\x3ca href=\x22https:\/\/github.com\/ErikDubbelboer\/node-sleep\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ehttps:\/\/github.com\/ErikDubbel...\x3c\/a\x3e\n\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const sleep = require(\x26quot;sleep\x26quot;)\n\nconst t1 = \x2bnew Date()\nsleep.msleep(3000)\nconst t2 = \x2bnew Date()\nconsole.log(t2 - t1)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e sleep = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22sleep\x22\x3c\/span\x3e)\n\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t1 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\nsleep.msleep(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e)\n\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e t2 = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(t2 - t1)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：能够实现更加精细的时间精确度，而且看起来就是真的 sleep 函数，清晰直白。\x3cbr\x3e缺点：缺点需要安装这个模块，\x3ccode\x3e^_^\x3c\/code\x3e，这也许算不上什么缺点。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e从一个间简简单单的 sleep 函数我们就就可以管中窥豹，看见 JavaScript 近几年来不断快速的发展，不单单是异步编程这一块，还有各种各样的新技术和新框架，见证了 JavaScript 的繁荣。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：Async\/Await是目前前端异步书写最优雅的一种方式\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e2、获取时间戳\x3c\/h3\x3e\n\x3cp\x3e上面第一个用多种方式实现 \x3ccode\x3esleep\x3c\/code\x3e 函数，我们可以发现代码有 \x3ccode\x3e\x2bnew Date()\x3c\/code\x3e获取时间戳的用法，这只是其中的一种，下面就说一下其他两种以及 \x3ccode\x3e\x2bnew Date()\x3c\/code\x3e的原理。\x3c\/p\x3e\n\x3ch4\x3e2.1 普通版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var timestamp=new Date().getTime()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timestamp=\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e().getTime()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：具有普遍性，大家都用这个\x3cbr\x3e缺点：目前没有发现\x3c\/p\x3e\n\x3ch4\x3e2.2 进阶版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var timestamp = (new Date()).valueOf()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timestamp = (\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()).valueOf()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3evalueOf 方法返回对象的原始值(Primitive,\x27Null\x27,\x27Undefined\x27,\x27String\x27,\x27Boolean\x27,\x27Number\x27五种基本数据类型之一)，可能是字符串、数值或 bool 值等，看具体的对象。\x3c\/blockquote\x3e\n\x3cp\x3e优点：说明开发者原始值有一个具体的认知，让人眼前一亮。\x3cbr\x3e缺点: 目前没有发现\x3c\/p\x3e\n\x3ch4\x3e2.3 终极版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var timestamp = \x2bnew Date()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e timestamp = \x2b\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：对 JavaScript 隐式转换掌握的比较牢固的一个表现\x3cbr\x3e缺点：目前没有发现\x3c\/p\x3e\n\x3cp\x3e现在就简单分析一下为什么 \x3ccode\x3e\x2bnew Date()\x3c\/code\x3e 拿到的是时间戳。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e一言以蔽之，这是隐式转换的玄学，实质还是调用了 valueOf() 的方法。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们先看看 \x3ccode\x3eECMAScript\x3c\/code\x3e 规范对一元运算符的规范：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e一元\x2b 运算符\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e一元 \x3ccode\x3e\x2b\x3c\/code\x3e 运算符将其操作数转换为 \x3ccode\x3eNumber\x3c\/code\x3e 类型并反转其正负。注意负的 \x3ccode\x3e\x2b0\x3c\/code\x3e 产生 \x3ccode\x3e-0\x3c\/code\x3e，负的 \x3ccode\x3e-0\x3c\/code\x3e 产生 \x3ccode\x3e\x2b0\x3c\/code\x3e。产生式 \x3ccode\x3eUnaryExpression : - UnaryExpression\x3c\/code\x3e 按照下面的过程执行。\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e令 expr 为解释执行 UnaryExpression 的结果 .\x3c\/li\x3e\n\x3cli\x3e令 oldValue 为 ToNumber(GetValue(expr)).\x3c\/li\x3e\n\x3cli\x3e如果 oldValue is NaN ，return NaN.\x3c\/li\x3e\n\x3cli\x3e返回 oldValue 取负（即，算出一个数字相同但是符号相反的值）的结果。\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e\x2bnew Date() 相当于 ToNumber(new Date())\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e我们再来看看 \x3ccode\x3eECMAScript\x3c\/code\x3e 规范对 \x3ccode\x3eToNumber\x3c\/code\x3e 的定义：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554826?w=720\x26amp;h=345\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554826?w=720\x26amp;h=345\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们知道 \x3ccode\x3enew Date()\x3c\/code\x3e 是个对象，满足上面的 \x3ccode\x3eToPrimitive()\x3c\/code\x3e，所以进而成了 \x3ccode\x3eToPrimitive(new Date())\x3c\/code\x3e。\x3c\/p\x3e\n\x3cp\x3e接着我们再来看看 \x3ccode\x3eECMAScript\x3c\/code\x3e 规范对 \x3ccode\x3eToPrimitive\x3c\/code\x3e 的定义，一层一层来，抽丝剥茧。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554827?w=720\x26amp;h=293\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554827?w=720\x26amp;h=293\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这个 \x3ccode\x3eToPrimitive\x3c\/code\x3e 刚开始可能不太好懂，我来大致解释一下吧：\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3eToPrimitive(obj,preferredType)\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eJavaScript\x3c\/code\x3e 引擎内部转换为原始值 \x3ccode\x3eToPrimitive(obj,preferredType)\x3c\/code\x3e 函数接受两个参数，第一个 \x3ccode\x3eobj\x3c\/code\x3e 为被转换的对象，第二个\x3ccode\x3epreferredType\x3c\/code\x3e 为希望转换成的类型（默认为空，接受的值为 \x3ccode\x3eNumber\x3c\/code\x3e 或 \x3ccode\x3eString\x3c\/code\x3e）\x3c\/p\x3e\n\x3cp\x3e在执行 \x3ccode\x3eToPrimitive(obj,preferredType)\x3c\/code\x3e 时如果第二个参数为空并且 \x3ccode\x3eobj\x3c\/code\x3e 为 \x3ccode\x3eDate\x3c\/code\x3e 的实例时，此时 \x3ccode\x3epreferredType\x3c\/code\x3e 会被设置为 \x3ccode\x3eString\x3c\/code\x3e，其他情况下 \x3ccode\x3epreferredType\x3c\/code\x3e 都会被设置为\x3ccode\x3eNumber\x3c\/code\x3e 如果 \x3ccode\x3epreferredType\x3c\/code\x3e 为 \x3ccode\x3eNumber\x3c\/code\x3e，\x3ccode\x3eToPrimitive\x3c\/code\x3e 执行过程如下：\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e如果obj为原始值，直接返回；\x3c\/li\x3e\n\x3cli\x3e否则调用 obj.valueOf()，如果执行结果是原始值，返回之；\x3c\/li\x3e\n\x3cli\x3e否则调用 obj.toString()，如果执行结果是原始值，返回之；\x3c\/li\x3e\n\x3cli\x3e否则抛异常。\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e如果 \x3ccode\x3epreferredType\x3c\/code\x3e 为 \x3ccode\x3eString\x3c\/code\x3e，将上面的第2步和第3步调换，即：\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e如果obj为原始值，直接返回；\x3c\/li\x3e\n\x3cli\x3e否则调用 obj.toString()，如果执行结果是原始值，返回之；\x3c\/li\x3e\n\x3cli\x3e否则调用 obj.valueOf()，如果执行结果是原始值，返回之；\x3c\/li\x3e\n\x3cli\x3e否则抛异常。\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e首先我们要明白 \x3ccode\x3eobj.valueOf()\x3c\/code\x3e 和 \x3ccode\x3eobj.toString()\x3c\/code\x3e 还有原始值分别是什么意思,这是弄懂上面描述的前提之一:\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3etoString\x3c\/code\x3e 用来返回对象的字符串表示。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var obj = {};\nconsole.log(obj.toString());\/\/[object Object]\n\nvar arr2 = [];\nconsole.log(arr2.toString());\/\/\x26quot;\x26quot;空字符串\n\nvar date = new Date();\nconsole.log(date.toString());\/\/Sun Feb 28 2016 13:40:36 GMT\x2b0800 (中国标准时间)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {};\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj.toString());\x3cspan class=\x22hljs-comment\x22\x3e\/\/[object Object]\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr2 = [];\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(arr2.toString());\x3cspan class=\x22hljs-comment\x22\x3e\/\/\x22\x22空字符串\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e date = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e();\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(date.toString());\x3cspan class=\x22hljs-comment\x22\x3e\/\/Sun Feb 28 2016 13:40:36 GMT\x2b0800 (中国标准时间)\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e\x3ccode\x3evalueOf\x3c\/code\x3e 方法返回对象的原始值，可能是字符串、数值或 \x3ccode\x3ebool\x3c\/code\x3e 值等，看具体的对象。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var obj = {\n  name: \x26quot;obj\x26quot;\n}\nconsole.log(obj.valueOf()) \/\/Object {name: \x26quot;obj\x26quot;}\n\nvar arr1 = [1]\nconsole.log(arr1.valueOf()) \/\/[1]\n\nvar date = new Date()\nconsole.log(date.valueOf())\/\/1456638436303\n如代码所示，三个不同的对象实例调用valueOf返回不同的数据\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {\n  \x3cspan class=\x22hljs-attr\x22\x3ename\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22obj\x22\x3c\/span\x3e\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(obj.valueOf()) \x3cspan class=\x22hljs-comment\x22\x3e\/\/Object {name: \x22obj\x22}\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr1 = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(arr1.valueOf()) \x3cspan class=\x22hljs-comment\x22\x3e\/\/[1]\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e date = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eDate\x3c\/span\x3e()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(date.valueOf())\x3cspan class=\x22hljs-comment\x22\x3e\/\/1456638436303\x3c\/span\x3e\n如代码所示，三个不同的对象实例调用valueOf返回不同的数据\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e原始值指的是 \x3ccode\x3e\x27Null\x27,\x27Undefined\x27,\x27String\x27,\x27Boolean\x27,\x27Number\x27,\x27Symbol\x27\x3c\/code\x3e 6种基本数据类型之一，上面已经提到过这个概念，这里再次申明一下。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e最后分解一下其中的过程：\x3ccode\x3e\x2bnew Date():\x3c\/code\x3e\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3col\x3e\x3cli\x3e运算符 \x3ccode\x3enew\x3c\/code\x3e 的优先级高于一元运算符 \x3ccode\x3e\x2b\x3c\/code\x3e，所以过程可以分解为：\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3evar time=new Date();\x3cbr\x3e\x2btime\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e根据上面提到的规则相当于：\x3ccode\x3eToNumber(time)\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3etime\x3c\/code\x3e 是个日期对象，根据 \x3ccode\x3eToNumber\x3c\/code\x3e 的转换规则，所以相当于：\x3ccode\x3eToNumber(ToPrimitive(time))\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e根据 \x3ccode\x3eToPrimitive\x3c\/code\x3e 的转换规则：\x3ccode\x3eToNumber(time.valueOf())\x3c\/code\x3e，\x3ccode\x3etime.valueOf()\x3c\/code\x3e 就是 原始值 得到的是个时间戳，假设 \x3ccode\x3etime.valueOf()=1503479124652\x3c\/code\x3e\n\x3c\/li\x3e\n\x3cli\x3e所以 \x3ccode\x3eToNumber(1503479124652)\x3c\/code\x3e 返回值是 \x3ccode\x3e1503479124652\x3c\/code\x3e 这个数字。\x3c\/li\x3e\n\x3cli\x3e分析完毕\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：隐式转换的妙用\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e3、数组去重\x3c\/h3\x3e\n\x3cp\x3e注：暂不考虑\x3ccode\x3e对象字面\x3c\/code\x3e量，\x3ccode\x3e函数\x3c\/code\x3e等引用类型的去重，也不考虑 \x3ccode\x3eNaN\x3c\/code\x3e, \x3ccode\x3eundefined\x3c\/code\x3e, \x3ccode\x3enull\x3c\/code\x3e等特殊类型情况。\x3c\/p\x3e\n\x3cblockquote\x3e数组样本：[1, 1, \x271\x27, \x272\x27, 1]\x3c\/blockquote\x3e\n\x3ch5\x3e3.1 普通版\x3c\/h5\x3e\n\x3cp\x3e\x3ccode\x3e无需思考，我们可以得到 O(n^2) 复杂度的解法。定义一个变量数组 res 保存结果，遍历需要去重的数组，如果该元素已经存在在 res 中了，则说明是重复的元素，如果没有，则放入 res 中。\x3c\/code\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = [1, 1, \x271\x27, \x272\x27, 1]\nfunction unique(arr) {\n    var res = []\n    for (var i = 0, len = arr.length; i \x3c len; i\x2b\x2b) {\n        var item = arr[i]\n        for (var j = 0, len = res.length; j \x3c jlen; j\x2b\x2b) {\n            if (item === res[j]) \/\/arr数组的item在res已经存在,就跳出循环\n                break\n        }\n        if (j === jlen) \/\/循环完毕,arr数组的item在res找不到,就push到res数组中\n            res.push(item)\n    }\n    return res\n}\nconsole.log(unique(a)) \/\/ [1, 2, \x26quot;1\x26quot;]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x272\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eunique\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e res = []\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len = arr.length; i \x26lt; len; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e item = arr[i]\n        \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e j = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len = res.length; j \x26lt; jlen; j\x2b\x2b) {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (item === res[j]) \x3cspan class=\x22hljs-comment\x22\x3e\/\/arr数组的item在res已经存在,就跳出循环\x3c\/span\x3e\n                \x3cspan class=\x22hljs-keyword\x22\x3ebreak\x3c\/span\x3e\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (j === jlen) \x3cspan class=\x22hljs-comment\x22\x3e\/\/循环完毕,arr数组的item在res找不到,就push到res数组中\x3c\/span\x3e\n            res.push(item)\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e res\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(unique(a)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ [1, 2, \x221\x22]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点： 没有任何兼容性问题，通俗易懂，没有任何理解成本\x3cbr\x3e缺点： 看起来比较臃肿比较繁琐，时间复杂度比较高\x3ccode\x3eO(n^2)\x3c\/code\x3e\x3c\/p\x3e\n\x3ch4\x3e3.2 进阶版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a =  [1, 1, \x271\x27, \x272\x27, 1]\nfunction unique(arr) {\n    return arr.filter(function(ele,index,array){\n        return array.indexOf(ele) === index\/\/很巧妙,这样筛选一对一的,过滤掉重复的\n    })\n}\nconsole.log(unique(a)) \/\/ [1, 2, \x26quot;1\x26quot;]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a =  [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x272\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eunique\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e arr.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eele,index,array\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e array.indexOf(ele) === index\x3cspan class=\x22hljs-comment\x22\x3e\/\/很巧妙,这样筛选一对一的,过滤掉重复的\x3c\/span\x3e\n    })\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(unique(a)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ [1, 2, \x221\x22]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：很简洁，思维也比较巧妙，直观易懂。\x3cbr\x3e缺点：不支持 \x3ccode\x3eIE9\x3c\/code\x3e 以下的浏览器，时间复杂度还是\x3ccode\x3eO(n^2)\x3c\/code\x3e\x3c\/p\x3e\n\x3ch4\x3e3.3 时间复杂度为O(n)\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a =  [1, 1, \x271\x27, \x272\x27, 1]\nfunction unique(arr) {\n    var obj = {}\n    return arr.filter(function(item, index, array){\n        return obj.hasOwnProperty(typeof item \x2b item) ? \n        false : \n        (obj[typeof item \x2b item] = true)\n    })\n}\n\nconsole.log(unique(a)) \/\/ [1, 2, \x26quot;1\x26quot;]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a =  [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x271\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x272\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e]\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eunique\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e obj = {}\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e arr.filter(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eitem, index, array\x3c\/span\x3e)\x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e obj.hasOwnProperty(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e item \x2b item) ? \n        \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e : \n        (obj[\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e item \x2b item] = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)\n    })\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(unique(a)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ [1, 2, \x221\x22]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：\x3ccode\x3ehasOwnProperty\x3c\/code\x3e 是对象的属性(名称)存在性检查方法。对象的属性可以基于 \x3ccode\x3eHash\x3c\/code\x3e 表实现，因此对属性进行访问的时间复杂度可以达到\x3ccode\x3eO(1)\x3c\/code\x3e;\x3cbr\x3e\x3ccode\x3efilter\x3c\/code\x3e 是数组迭代的方法，内部还是一个 \x3ccode\x3efor\x3c\/code\x3e 循环，所以时间复杂度是 \x3ccode\x3eO(n)\x3c\/code\x3e。\x3cbr\x3e缺点：不兼容 \x3ccode\x3eIE9\x3c\/code\x3e 以下浏览器，其实也好解决，把 \x3ccode\x3efilter\x3c\/code\x3e 方法用 \x3ccode\x3efor\x3c\/code\x3e 循环代替或者自己模拟一个 filter 方法。\x3c\/p\x3e\n\x3ch4\x3e3.4 终极版\x3c\/h4\x3e\n\x3cblockquote\x3e以 Set 为例，ES6 提供了新的数据结构 Set。它类似于数组，但是成员的值都是唯一的，没有重复的值。\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const unique = a =\x3e [...new Set(a)]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e unique = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3ea\x3c\/span\x3e =\x26gt;\x3c\/span\x3e [...new \x3cspan class=\x22hljs-built_in\x22\x3eSet\x3c\/span\x3e(a)]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：\x3ccode\x3eES6\x3c\/code\x3e 语法，简洁高效，我们可以看到，去重方法从原始的 \x3ccode\x3e14\x3c\/code\x3e 行代码到 \x3ccode\x3eES6\x3c\/code\x3e 的 \x3ccode\x3e1\x3c\/code\x3e 行代码，其实也说明了 \x3ccode\x3eJavaScript\x3c\/code\x3e 这门语言在不停的进步，相信以后的开发也会越来越高效。\x3cbr\x3e缺点：兼容性问题，现代浏览器才支持，有 \x3ccode\x3ebabel\x3c\/code\x3e 这些都不是问题。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：ES6 新的数据结构 Set 去重\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e4、数字格式化 1234567890 --\x26gt; 1,234,567,890\x3c\/h3\x3e\n\x3ch4\x3e4.1 普通版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function formatNumber(str) {\n  let arr = [],\n    count = str.length\n\n  while (count \x3e= 3) {\n    arr.unshift(str.slice(count - 3, count))\n    count -= 3\n  }\n\n  \/\/ 如果是不是3的倍数就另外追加到上去\n  str.length % 3 \x26amp;\x26amp; arr.unshift(str.slice(0, str.length % 3))\n\n  return arr.toString()\n\n}\nconsole.log(formatNumber(\x26quot;1234567890\x26quot;)) \/\/ 1,234,567,890\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eformatNumber\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estr\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = [],\n    count = str.length\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (count \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e) {\n    arr.unshift(str.slice(count - \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, count))\n    count -= \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e\n  }\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果是不是3的倍数就另外追加到上去\x3c\/span\x3e\n  str.length % \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e \x26amp;\x26amp; arr.unshift(str.slice(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, str.length % \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e))\n\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e arr.toString()\n\n}\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(formatNumber(\x3cspan class=\x22hljs-string\x22\x3e\x221234567890\x22\x3c\/span\x3e)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1,234,567,890\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：自我感觉比网上写的一堆 for循环 还有 if-else 判断的逻辑更加清晰直白。\x3cbr\x3e缺点：太普通\x3c\/p\x3e\n\x3ch4\x3e4.2 进阶版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function formatNumber(str) {\n\n  \/\/ [\x26quot;0\x26quot;, \x26quot;9\x26quot;, \x26quot;8\x26quot;, \x26quot;7\x26quot;, \x26quot;6\x26quot;, \x26quot;5\x26quot;, \x26quot;4\x26quot;, \x26quot;3\x26quot;, \x26quot;2\x26quot;, \x26quot;1\x26quot;]\n  return str.split(\x26quot;\x26quot;).reverse().reduce((prev, next, index) =\x3e {\n    return ((index % 3) ? next : (next \x2b \x27,\x27)) \x2b prev\n  })\n}\n\nconsole.log(formatNumber(\x26quot;1234567890\x26quot;)) \/\/ 1,234,567,890\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eformatNumber\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estr\x3c\/span\x3e) \x3c\/span\x3e{\n\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ [\x220\x22, \x229\x22, \x228\x22, \x227\x22, \x226\x22, \x225\x22, \x224\x22, \x223\x22, \x222\x22, \x221\x22]\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.split(\x3cspan class=\x22hljs-string\x22\x3e\x22\x22\x3c\/span\x3e).reverse().reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3eprev, next, index\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ((index % \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e) ? next : (next \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27,\x27\x3c\/span\x3e)) \x2b prev\n  })\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(formatNumber(\x3cspan class=\x22hljs-string\x22\x3e\x221234567890\x22\x3c\/span\x3e)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1,234,567,890\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：把 JS 的 API 玩的了如指掌\x3cbr\x3e缺点：可能没那么好懂，不过读懂之后就会发出我怎么没想到的感觉\x3c\/p\x3e\n\x3ch4\x3e4.3 正则版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function formatNumber(str) {\n  return str.replace(\/\\B(?=(\\d{3})\x2b(?!\\d))\/g, \x27,\x27)\n}\n\nconsole.log(formatNumber(\x26quot;123456789\x26quot;)) \/\/ 1,234,567,890\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eformatNumber\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3estr\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e str.replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/\\B(?=(\\d{3})\x2b(?!\\d))\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27,\x27\x3c\/span\x3e)\n}\n\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(formatNumber(\x3cspan class=\x22hljs-string\x22\x3e\x22123456789\x22\x3c\/span\x3e)) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1,234,567,890\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面简单分析下正则\x3ccode\x3e\/\\B(?=(\\d{3})\x2b(?!\\d))\/g\x3c\/code\x3e：\x3c\/p\x3e\n\x3cblockquote\x3e\x3col\x3e\n\x3cli\x3e\n\x3ccode\x3e\/\\B(?=(\\d{3})\x2b(?!\\d))\/g\x3c\/code\x3e：正则匹配边界\x3ccode\x3e\\B\x3c\/code\x3e，边界后面必须跟着\x3ccode\x3e(\\d{3})\x2b(?!\\d)\x3c\/code\x3e;\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e(\\d{3})\x2b\x3c\/code\x3e：必须是1个或多个的3个连续数字;\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e(?!\\d)\x3c\/code\x3e：第2步中的3个数字不允许后面跟着数字;\x3c\/li\x3e\n\x3cli\x3e\n\x3ccode\x3e(\\d{3})\x2b(?!\\d)\x3c\/code\x3e：所以匹配的边界后面必须跟着\x3ccode\x3e3*n\x3c\/code\x3e（n\x26gt;=1）的数字。\x3c\/li\x3e\n\x3c\/ol\x3e\x3c\/blockquote\x3e\n\x3cp\x3e最终把匹配到的所有边界换成\x3ccode\x3e,\x3c\/code\x3e即可达成目标。\x3c\/p\x3e\n\x3cp\x3e优点：代码少，浓缩的就是精华\x3cbr\x3e缺点：需要对正则表达式的位置匹配有一个较深的认识，门槛大一点\x3c\/p\x3e\n\x3ch4\x3e4.4 API版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(123456789).toLocaleString(\x27en-US\x27)  \/\/ 1,234,567,890\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e(\x3cspan class=\x22hljs-number\x22\x3e123456789\x3c\/span\x3e).toLocaleString(\x3cspan class=\x22hljs-string\x22\x3e\x27en-US\x27\x3c\/span\x3e)  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1,234,567,890\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如图，你可能还不知道 \x3ccode\x3eJavaScript\x3c\/code\x3e 的 \x3ccode\x3etoLocaleString\x3c\/code\x3e 还可以这么玩。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554828?w=1194\x26amp;h=442\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554828?w=1194\x26amp;h=442\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e还可以使用\x3c\/strong\x3e\x26nbsp;\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Intl\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eIntl对象 - MDN\x3c\/a\x3e\x3c\/p\x3e\n\x3cblockquote\x3eIntl 对象是 ECMAScript 国际化 API 的一个命名空间，它提供了精确的字符串对比，数字格式化，日期和时间格式化。Collator，NumberFormat 和 DateTimeFormat 对象的构造函数是 Intl 对象的属性。\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22new Intl.NumberFormat().format(1234567890) \/\/ 1,234,567,890\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eIntl\x3c\/span\x3e.NumberFormat().format(\x3cspan class=\x22hljs-number\x22\x3e1234567890\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 1,234,567,890\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：简单粗暴，直接调用 API\x3cbr\x3e缺点：\x3ca href=\x22https:\/\/caniuse.com\/#search=Intl\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eIntl兼容性\x3c\/a\x3e不太好，不过 toLocaleString的话 IE6 都支持\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：Intl对象 和 toLocaleString的方法。\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3e5、交换两个整数\x3c\/h3\x3e\n\x3cp\x3elet a = 3,b = 4 变成 a = 4, b = 3\x3c\/p\x3e\n\x3ch4\x3e5.1 普通版\x3c\/h4\x3e\n\x3cp\x3e首先最常规的办法，引入一个 temp 中间变量\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let a = 3,b = 4\nlet temp = a\na = b\nb = temp\nconsole.log(a, b)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,b = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e temp = a\na = b\nb = temp\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a, b)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：一眼能看懂就是最好的优点\x3cbr\x3e缺点：硬说缺点就是引入了一个多余的变量\x3c\/p\x3e\n\x3ch4\x3e5.2 进阶版\x3c\/h4\x3e\n\x3cp\x3e在不引入中间变量的情况下也能交互两个变量\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let a = 3,b = 4\na \x2b= b\nb = a - b\na -= b\nconsole.log(a, b)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,b = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\na \x2b= b\nb = a - b\na -= b\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a, b)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：比起楼上那种没有引入多余的变量，比上面那一种稍微巧妙一点\x3cbr\x3e缺点：当然缺点也很明显，整型数据溢出，比如说对于32位字符最大表示有符号数字是2147483647，也就是Math.pow(2,31)-1，如果是2147483645和2147483646交换就失败了。\x3c\/p\x3e\n\x3ch4\x3e5.3 终极版\x3c\/h4\x3e\n\x3cp\x3e利用一个数异或本身等于０和异或运算符合交换率。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let a = 3,b = 4\n  a ^= b\n  b ^= a\n  a ^= b\nconsole.log(a, b)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,b = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e\n  a ^= b\n  b ^= a\n  a ^= b\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a, b)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面用竖式进行简单说明：(10进制化为二进制)\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    a = 011\n(^) b = 100\n则  a = 111(a ^ b的结果赋值给a，a已变成了7)\n(^) b = 100\n则  b = 011(b^a的结果赋给b，b已经变成了3)\n(^) a = 111\n则  a = 100(a^b的结果赋给a，a已经变成了4)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e    a = \x3cspan class=\x22hljs-number\x22\x3e011\x3c\/span\x3e\n(^) b = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e\n则  a = \x3cspan class=\x22hljs-number\x22\x3e111\x3c\/span\x3e(a ^ b的结果赋值给a，a已变成了\x3cspan class=\x22hljs-number\x22\x3e7\x3c\/span\x3e)\n(^) b = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e\n则  b = \x3cspan class=\x22hljs-number\x22\x3e011\x3c\/span\x3e(b^a的结果赋给b，b已经变成了\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e)\n(^) a = \x3cspan class=\x22hljs-number\x22\x3e111\x3c\/span\x3e\n则  a = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e(a^b的结果赋给a，a已经变成了\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从上面的竖式可以清楚的看到利用异或运算实现两个值交换的基本过程。\x3c\/p\x3e\n\x3cp\x3e下面从深层次剖析一下：\x3c\/p\x3e\n\x3cblockquote\x3e\n\x3cp\x3e1.对于开始的两个赋值语句，a = a ^ b，b = b ^ a，相当于b = b ^ (a ^ b) = a  ^ b ^ b，而b ^ b 显然等于0。因此b = a ^ 0，显然结果为a。\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e同理可以分析第三个赋值语句，a = a ^ b = (a ^ b) ^ a = b\x3c\/li\x3e\x3c\/ol\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e注：\x3c\/p\x3e\n\x3col\x3e\x3cli\x3e^ 即”异或“运算符。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cblockquote\x3e它的意思是判断两个相应的位值是否为”异“，为”异\x22(值不同)就取真（1）;否则为假（0）。\x3c\/blockquote\x3e\n\x3col\x3e\x3cli\x3e^ 运算符的特点是与0异或，保持原值；与本身异或，结果为0。\x3c\/li\x3e\x3c\/ol\x3e\n\x3cp\x3e优点：不存在引入中间变量，不存在整数溢出\x3cbr\x3e缺点：前端对位操作这一块可能了解不深，不容易理解\x3c\/p\x3e\n\x3ch4\x3e5.4 究极版\x3c\/h4\x3e\n\x3cp\x3e熟悉 \x3ccode\x3eES6\x3c\/code\x3e 语法的人当然不会对解构陌生\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 3,b = 4;\n[b, a] = [a, b]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,b = \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e;\n[b, a] = [a, b]\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中的解构的原理，我暂时还没读过 ES6的规范，不知道具体的细则，不过我们可以看看 \x3ccode\x3ebabel\x3c\/code\x3e 是自己编译的，我们可以看出点门路。\x3c\/p\x3e\n\x3cp\x3e哈哈，简单粗暴，不知道有没有按照 ES 的规范，其实可以扒一扒 v8的源码，chrome 已经实现这种解构用法。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554829?w=1932\x26amp;h=896\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554829?w=1932\x26amp;h=896\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e这个例子和前面的例子编写风格有何不同\x3c\/strong\x3e，你如果细心的话就会发现这两行代码多了一个\x3cstrong\x3e分号\x3c\/strong\x3e，对于我这种编码不写分号的洁癖者，为什么加一个分号在这里，其实是有原因的，这里就简单普及一下，\x3cstrong\x3e建议大家还是写代码写上分号\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch4\x3e5.4 ECMAScript 自动分号;插入(作为补充，防止大家以后踩坑)\x3c\/h4\x3e\n\x3cp\x3e尽管 JavaScript 有 C 的代码风格，但是它不强制要求在代码中使用分号，实际上可以省略它们。\x3c\/p\x3e\n\x3cp\x3eJavaScript 不是一个没有分号的语言，恰恰相反上它需要分号来就解析源代码。 因此 JavaScript 解析器在遇到由于缺少分号导致的解析错误时，会自动在源代码中插入分号。\x3c\/p\x3e\n\x3ch5\x3e5.4.1例子\x3c\/h5\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = function() {\n} \/\/ 解析错误，分号丢失\ntest()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n} \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 解析错误，分号丢失\x3c\/span\x3e\ntest()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e自动插入分号，解析器重新解析。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var foo = function() {\n}; \/\/ 没有错误，解析继续\ntest()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e foo = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n}; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 没有错误，解析继续\x3c\/span\x3e\ntest()\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e5.4.2工作原理\x3c\/h5\x3e\n\x3cp\x3e下面的代码没有分号，因此解析器需要自己判断需要在哪些地方插入分号。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function(window, undefined) {\n    function test(options) {\n        log(\x27testing!\x27)\n\n        (options.list || []).forEach(function(i) {\n\n        })\n\n        options.value.test(\n            \x27long string to pass here\x27,\n            \x27and another long string to pass\x27\n        )\n\n        return\n        {\n            foo: function() {}\n        }\n    }\n    window.test = test\n\n})(window)\n\n(function(window) {\n    window.someLibrary = {}\n})(window)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow, undefined\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n        log(\x3cspan class=\x22hljs-string\x22\x3e\x27testing!\x27\x3c\/span\x3e)\n\n        (options.list || []).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) \x3c\/span\x3e{\n\n        })\n\n        options.value.test(\n            \x3cspan class=\x22hljs-string\x22\x3e\x27long string to pass here\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27and another long string to pass\x27\x3c\/span\x3e\n        )\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n        {\n            \x3cspan class=\x22hljs-attr\x22\x3efoo\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n        }\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.test = test\n\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e)\n\n(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.someLibrary = {}\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是解析器\x22猜测\x22的结果。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22(function(window, undefined) {\n    function test(options) {\n\n        \/\/ 没有插入分号，两行被合并为一行\n        log(\x27testing!\x27)(options.list || []).forEach(function(i) {\n\n        }); \/\/ \x3c- 插入分号\n\n        options.value.test(\n            \x27long string to pass here\x27,\n            \x27and another long string to pass\x27\n        ); \/\/ \x3c- 插入分号\n\n        return; \/\/ \x3c- 插入分号, 改变了 return 表达式的行为\n        { \/\/ 作为一个代码段处理\n            foo: function() {}\n        }; \/\/ \x3c- 插入分号\n    }\n    window.test = test; \/\/ \x3c- 插入分号\n\n\/\/ 两行又被合并了\n})(window)(function(window) {\n    window.someLibrary = {}; \/\/ \x3c- 插入分号\n})(window); \/\/\x3c- 插入分号\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow, undefined\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3etest\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eoptions\x3c\/span\x3e) \x3c\/span\x3e{\n\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 没有插入分号，两行被合并为一行\x3c\/span\x3e\n        log(\x3cspan class=\x22hljs-string\x22\x3e\x27testing!\x27\x3c\/span\x3e)(options.list || []).forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ei\x3c\/span\x3e) \x3c\/span\x3e{\n\n        }); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n\n        options.value.test(\n            \x3cspan class=\x22hljs-string\x22\x3e\x27long string to pass here\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27and another long string to pass\x27\x3c\/span\x3e\n        ); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号, 改变了 return 表达式的行为\x3c\/span\x3e\n        { \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 作为一个代码段处理\x3c\/span\x3e\n            foo: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{}\n        }; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.test = test; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 两行又被合并了\x3c\/span\x3e\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e)(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ewindow\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.someLibrary = {}; \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x26lt;- 插入分号\x3c\/span\x3e\n})(\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/\x26lt;- 插入分号\x3c\/span\x3e\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e解析器显著改变了上面代码的行为，在另外一些情况下也会做出错误的处理。\x3c\/p\x3e\n\x3ch5\x3e5.4.3 ECMAScript对自动分号插入的规则\x3c\/h5\x3e\n\x3cp\x3e我们翻到7.9章节，看看其中插入分号的机制和原理，清楚只写以后就可以尽量以后少踩坑\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e必须用分号终止某些 ECMAScript 语句 ( 空语句 , 变量声明语句 , 表达式语句 , do-while 语句 , continue 语句 , break 语句 , return 语句 ,throw 语句 )。这些分号总是明确的显示在源文本里。然而，为了方便起见，某些情况下这些分号可以在源文本里省略。描述这种情况会说：这种情况下给源代码的 token 流自动插入分号。\x3c\/strong\x3e\u2028\u2028\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572288?w=1968\x26amp;h=766\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572288?w=1968\x26amp;h=766\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000008572289?w=1796\x26amp;h=666\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000008572289?w=1796\x26amp;h=666\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e还是比较抽象，看不太懂是不是，不要紧，我们看看实际例子，总结出几个规律就行，我们先不看抽象的，看着头晕，看看具体的总结说明， \x3cstrong\x3e化抽象为具体\x3c\/strong\x3e 。\x3c\/p\x3e\n\x3cp\x3e首先这些规则是基于两点：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e以换行为基础；\x3c\/li\x3e\n\x3cli\x3e解析器会尽量将新行并入当前行，当且仅当符合ASI规则时才会将新行视为独立的语句。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3ch6\x3e5.4.3.1 ASI的规则\x3c\/h6\x3e\n\x3cp\x3e\x3cstrong\x3e1. 新行并入当前行将构成非法语句，自动插入分号。\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22if(1 \x3c 10) a = 1\nconsole.log(a)\n\/\/ 等价于\nif(1 \x3c 10) a = 1;\nconsole.log(a);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e) a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e \x26lt; \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e) a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(a);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 在continue,return,break,throw后自动插入分号\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22return\n{a: 1}\n\/\/ 等价于\nreturn;\n{a: 1};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e\n{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e}\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n{\x3cspan class=\x22hljs-attr\x22\x3ea\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e3. \x2b\x2b、--后缀表达式作为新行的开始，在行首自动插入分号\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22a\n\x2b\x2b\nc\n\/\/ 等价于\na;\n\x2b\x2bc;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3ea\n\x2b\x2b\nc\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\na;\n\x2b\x2bc;\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e4. 代码块的最后一个语句会自动插入分号\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function(){ a = 1 }\n\/\/ 等价于\nfunction(){ a = 1; }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{ a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e }\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等价于\x3c\/span\x3e\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e)\x3c\/span\x3e{ a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e; }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch6\x3e5.4.3.2 No ASI的规则\x3c\/h6\x3e\n\x3cp\x3e\x3cstrong\x3e1. 新行以 ( 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 1\nvar b = a\n(a\x2bb).toString()\n\/\/ 会被解析为以a\x2bb为入参调用函数a，然后调用函数返回值的toString函数\nvar a = 1\nvar b =a(a\x2bb).toString()\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n(a\x2bb).toString()\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会被解析为以a\x2bb为入参调用函数a，然后调用函数返回值的toString函数\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b =a(a\x2bb).toString()\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e2. 新行以 [ 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = [\x27a1\x27, \x27a2\x27]\nvar b = a\n[0,1].slice(1)\n\/\/ 会被解析先获取a[1]，然后调用a[1].slice(1)。\n\/\/ 由于逗号位于[]内，且不被解析为数组字面量，而被解析为运算符，而逗号运算符会先执\n行左侧表达式，然后执行右侧表达式并且以右侧表达式的计算结果作为返回值\nvar a = [\x27a1\x27, \x27a2\x27]\nvar b = a[0,1].slice(1)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = [\x3cspan class=\x22hljs-string\x22\x3e\x27a1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27a2\x27\x3c\/span\x3e]\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].slice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会被解析先获取a[1]，然后调用a[1].slice(1)。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 由于逗号位于[]内，且不被解析为数组字面量，而被解析为运算符，而逗号运算符会先执\x3c\/span\x3e\n行左侧表达式，然后执行右侧表达式并且以右侧表达式的计算结果作为返回值\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = [\x3cspan class=\x22hljs-string\x22\x3e\x27a1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27a2\x27\x3c\/span\x3e]\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e].slice(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e3. 新行以 \/ 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 1\nvar b = a\n\/test\/.test(b)\n\/\/ \/会被解析为整除运算符，而不是正则表达式字面量的起始符号。浏览器中会报test前多了个.号\nvar a = 1\nvar b = a \/ test \/ .test(b)\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n\/test\/.test(b)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ \/会被解析为整除运算符，而不是正则表达式字面量的起始符号。浏览器中会报test前多了个.号\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a \/ test \/ .test(b)\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e4. 新行以 \x2b 、 - 、 % 和 * 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 2\nvar b = a\n\x2ba\n\/\/ 会解析如下格式\nvar a = 2\nvar b = a \x2b a\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n\x2ba\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会解析如下格式\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a \x2b a\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cstrong\x3e5. 新行以 , 或 . 开始\x3c\/strong\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var a = 2\nvar b = a\n.toString()\nconsole.log(typeof b)\n\/\/ 会解析为\nvar a = 2\nvar b = a.toString()\nconsole.log(typeof b)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a\n.toString()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e b)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 会解析为\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e b = a.toString()\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e b)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e到这里我们已经对ASI的规则有一定的了解了，另外还有一样有趣的事情，就是“空语句”。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 三个空语句\n;;;\n\n\/\/ 只有if条件语句，语句块为空语句。\n\/\/ 可实现unless条件语句的效果\nif(1\x3e2);else\n  console.log(\x272 is greater than 1 always!\x27);\n\n\/\/ 只有while条件语句，循环体为空语句。\nvar a = 1\nwhile(\x2b\x2ba \x3c 100);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 三个空语句\x3c\/span\x3e\n;;;\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只有if条件语句，语句块为空语句。\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 可实现unless条件语句的效果\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\x26gt;\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e\n  \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x272 is greater than 1 always!\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 只有while条件语句，循环体为空语句。\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e a = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e(\x2b\x2ba \x26lt; \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e5.4.4 结论\x3c\/h5\x3e\n\x3cp\x3e建议绝对不要省略分号，同时也提倡将花括号和相应的表达式放在一行， 对于只有一行代码的 if 或者 else 表达式，也不应该省略花括号。 这些良好的编程习惯不仅可以提到代码的一致性，而且可以防止解析器改变代码行为的错误处理。\x3cbr\x3e\u2028\x3ca href=\x22https:\/\/www.zhihu.com\/question\/20298345\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e关于JavaScript 语句后应该加分号么？(点我查看)\x3c\/a\x3e我们可以看看知乎上大牛们对着个问题的看法。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：原来 JavaScript 还有位操作以及分号的使用细则\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3e6、将 argruments 对象(类数组)转换成数组\x3c\/h3\x3e\n\x3cp\x3e\x3ccode\x3e{0:1,1:2,2:3,length:3}\x3c\/code\x3e这种形式的就属于类数组，就是按照数组下标排序的对象，还有一个 \x3ccode\x3elength \x3c\/code\x3e属性，有时候我们需要这种对象能调用数组下的一个方法，这时候就需要把把类数组转化成真正的数组。\x3c\/p\x3e\n\x3ch4\x3e6.1 普通版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var makeArray = function(array) {\n  var ret = []\n  if (array != null) {\n    var i = array.length\n    if (i == null || typeof array === \x26quot;string\x26quot;) ret[0] = array\n    else while (i) ret[--i] = array[i];\n  }\n  return ret\n}\nmakeArray({0:1,1:2,2:3,length:3}) \/\/[1,2,3]\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e makeArray = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earray\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e ret = []\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (array != \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i = array.length\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i == \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e array === \x3cspan class=\x22hljs-string\x22\x3e\x22string\x22\x3c\/span\x3e) ret[\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e] = array\n    \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ewhile\x3c\/span\x3e (i) ret[--i] = array[i];\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e ret\n}\nmakeArray({\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e,\x3cspan class=\x22hljs-attr\x22\x3elength\x3c\/span\x3e:\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e}) \x3cspan class=\x22hljs-comment\x22\x3e\/\/[1,2,3]\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：通用版本，没有任何兼容性问题\x3cbr\x3e缺点：太普通\x3c\/p\x3e\n\x3ch4\x3e6.2 进阶版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var arr = Array.prototype.slice.call(arguments);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.prototype.slice.call(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这种应该是大家用过最常用的方法，至于为什么可以这么用，很多人估计也是一知半解，反正我看见大家这么用我也这么用，要搞清为什么里面的原因，我们还是从规范和源码说起。\x3c\/p\x3e\n\x3cp\x3e照着规范的流程，自己看看推演一下就明白了：\x3cbr\x3e\x3ca href=\x22http:\/\/es5.github.io\/#x15.4.4.10\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e英文版15.4.4.10 Array.prototype.slice (start, end) \x3c\/a\x3e\x3cbr\x3e\x3ca href=\x22http:\/\/yanhaijing.com\/es5\/#352\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e中文版15.4.4.10 Array.prototype.slice (start, end) \x3c\/a\x3e\x3cbr\x3e如果你想知道 \x3ccode\x3eJavaScript\x3c\/code\x3e 的 \x3ccode\x3esort\x3c\/code\x3e 排序的机制，到底是哪种排序好，用的哪种，也可以从规范看出端倪。\x3c\/p\x3e\n\x3cp\x3e在官方的解释中，如\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Array\/slice\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e[mdn\x3c\/a\x3e]\x3c\/p\x3e\n\x3cblockquote\x3eThe slice() method returns a shallow copy of a portion of an array into a new array object.\x3c\/blockquote\x3e\n\x3cp\x3e\x3cstrong\x3e简单的说就是根据参数，返回数组的一部分的 \x3ccode\x3ecopy\x3c\/code\x3e。所以了解其内部实现才能确定它是如何工作的。所以查看 \x3ccode\x3eV8\x3c\/code\x3e 源码中的 \x3ccode\x3eArray.js\x3c\/code\x3e     可以看到如下的代码：\x3c\/strong\x3e\x3c\/p\x3e\n\x3cp\x3e方法  \x3ccode\x3eArraySlice\x3c\/code\x3e，\x3ca href=\x22https:\/\/github.com\/v8\/v8\/blob\/ad82a40509c5b5b4680d4299c8f08d6c6d31af3c\/src\/js\/array.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e源码地址\x3c\/a\x3e，第 \x3ccode\x3e660\x3c\/code\x3e 行,直接添加到 \x3ccode\x3eArray.prototype\x3c\/code\x3e 上的“入口”，内部经过参数、类型等等的判断处理，分支为 \x3ccode\x3eSparseSlice\x3c\/code\x3e 和 \x3ccode\x3eSimpleSlice\x3c\/code\x3e 处理。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3eslice.call\x3c\/code\x3e 的作用原理就是，利用 \x3ccode\x3ecall\x3c\/code\x3e，将 \x3ccode\x3eslice\x3c\/code\x3e 的方法作用于 \x3ccode\x3earrayLike\x3c\/code\x3e，\x3ccode\x3eslice\x3c\/code\x3e 的两个参数为空，\x3ccode\x3eslice\x3c\/code\x3e 内部解析使得 \x3ccode\x3earguments.lengt\x3c\/code\x3e 等于0的时候 相当于处理 \x3ccode\x3eslice(0)\x3c\/code\x3e ： 即选择整个数组，\x3ccode\x3eslice\x3c\/code\x3e 方法内部没有强制判断必须是 \x3ccode\x3eArray\x3c\/code\x3e 类型，\x3ccode\x3eslice\x3c\/code\x3e 返回的是新建的数组（使用循环取值）”，所以这样就实现了类数组到数组的转化，\x3ccode\x3ecall\x3c\/code\x3e 这个神奇的方法、\x3ccode\x3eslice\x3c\/code\x3e 的处理缺一不可。\x3c\/p\x3e\n\x3cp\x3e直接看 \x3ccode\x3eslice\x3c\/code\x3e 怎么实现的吧。其实就是将 \x3ccode\x3earray-like\x3c\/code\x3e 对象通过下标操作放进了新的 \x3ccode\x3eArray\x3c\/code\x3e 里面：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ This will work for genuine arrays, array-like objects, \n    \/\/ NamedNodeMap (attributes, entities, notations),\n    \/\/ NodeList (e.g., getElementsByTagName), HTMLCollection (e.g., childNodes),\n    \/\/ and will not fail on other DOM objects (as do DOM elements in IE \x3c 9)\n    Array.prototype.slice = function(begin, end) {\n      \/\/ IE \x3c 9 gets unhappy with an undefined end argument\n      end = (typeof end !== \x27undefined\x27) ? end : this.length;\n\n      \/\/ For native Array objects, we use the native slice function\n      if (Object.prototype.toString.call(this) === \x27[object Array]\x27){\n        return _slice.call(this, begin, end); \n      }\n\n      \/\/ For array like object we handle it ourselves.\n      var i, cloned = [],\n        size, len = this.length;\n\n      \/\/ Handle negative value for \x26quot;begin\x26quot;\n      var start = begin || 0;\n      start = (start \x3e= 0) ? start : Math.max(0, len \x2b start);\n\n      \/\/ Handle negative value for \x26quot;end\x26quot;\n      var upTo = (typeof end == \x27number\x27) ? Math.min(end, len) : len;\n      if (end \x3c 0) {\n        upTo = len \x2b end;\n      }\n\n      \/\/ Actual expected size of the slice\n      size = upTo - start;\n\n      if (size \x3e 0) {\n        cloned = new Array(size);\n        if (this.charAt) {\n          for (i = 0; i \x3c size; i\x2b\x2b) {\n            cloned[i] = this.charAt(start \x2b i);\n          }\n        } else {\n          for (i = 0; i \x3c size; i\x2b\x2b) {\n            cloned[i] = this[start \x2b i];\n          }\n        }\n      }\n\n      return cloned;\n    };\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ This will work for genuine arrays, array-like objects, \x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ NamedNodeMap (attributes, entities, notations),\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ NodeList (e.g., getElementsByTagName), HTMLCollection (e.g., childNodes),\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ and will not fail on other DOM objects (as do DOM elements in IE \x26lt; 9)\x3c\/span\x3e\n    \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.prototype.slice = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ebegin, end\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ IE \x26lt; 9 gets unhappy with an undefined end argument\x3c\/span\x3e\n      end = (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e end !== \x3cspan class=\x22hljs-string\x22\x3e\x27undefined\x27\x3c\/span\x3e) ? end : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length;\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ For native Array objects, we use the native slice function\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eObject\x3c\/span\x3e.prototype.toString.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e) === \x3cspan class=\x22hljs-string\x22\x3e\x27[object Array]\x27\x3c\/span\x3e){\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e _slice.call(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e, begin, end); \n      }\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ For array like object we handle it ourselves.\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e i, cloned = [],\n        size, len = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.length;\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Handle negative value for \x22begin\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e start = begin || \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n      start = (start \x26gt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) ? start : \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.max(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, len \x2b start);\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Handle negative value for \x22end\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e upTo = (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e end == \x3cspan class=\x22hljs-string\x22\x3e\x27number\x27\x3c\/span\x3e) ? \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(end, len) : len;\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (end \x26lt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n        upTo = len \x2b end;\n      }\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Actual expected size of the slice\x3c\/span\x3e\n      size = upTo - start;\n\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (size \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n        cloned = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e(size);\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.charAt) {\n          \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; size; i\x2b\x2b) {\n            cloned[i] = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.charAt(start \x2b i);\n          }\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; size; i\x2b\x2b) {\n            cloned[i] = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e[start \x2b i];\n          }\n        }\n      }\n\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e cloned;\n    };\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：最常用的版本，兼容性较强\x3cbr\x3e缺点：ie 低版本，无法处理 dom 集合的 slice call 转数组。（虽然具有数值键值、length 符合ArrayLike 的定义，却报错）搜索资料得到 ：因为 ie 下的 dom 对象是以 com 对象的形式实现的，js 对象与com对象不能进行转换 。\x3c\/p\x3e\n\x3ch4\x3e6.3 ES6 版本\x3c\/h4\x3e\n\x3cp\x3e使用 \x3ccode\x3eArray.from\x3c\/code\x3e, 值需要对象有 \x3ccode\x3elength\x3c\/code\x3e 属性, 就可以转换成数组\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var arr = Array.from(arguments);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr = \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.from(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e扩展运算符\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var args = [...arguments];\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e args = [...arguments];\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eES6\x3c\/code\x3e 中的扩展运算符...也能将某些数据结构转换成数组，这种数据结构必须有便利器接口。\x3cbr\x3e优点：直接使用内置 API，简单易维护\x3cbr\x3e缺点：兼容性，使用 babel 的 profill 转化可能使代码变多，文件包变大\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：slice 方法的具体原理\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3e7、数字取整 2.33333 =\x26gt; 2\x3c\/h3\x3e\n\x3ch4\x3e7.1 普通版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const a = parseInt(2.33333)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e a = \x3cspan class=\x22hljs-built_in\x22\x3eparseInt\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e2.33333\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eparseInt()\x3c\/code\x3e 函数解析一个字符串参数，并返回一个指定基数的整数 (数学系统的基础)。这个估计是直接取整最常用的方法了。\x3cbr\x3e更多关于 \x3ccode\x3eparseInt()\x3c\/code\x3e 函数可以查看\x26nbsp;\x3ca href=\x22https:\/\/developer.mozilla.org\/zh-CN\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/parseInt\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMDN 文档\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3e7.2 进阶版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const a = Math.trunc(2.33333)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e a = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.trunc(\x3cspan class=\x22hljs-number\x22\x3e2.33333\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3eMath.trunc()\x3c\/code\x3e 方法会将数字的小数部分去掉，只保留整数部分。\x3cbr\x3e特别要注意的是：\x3ccode\x3eInternet Explorer\x3c\/code\x3e 不支持这个方法，不过写个 \x3ccode\x3ePolyfill\x3c\/code\x3e 也很简单：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Math.trunc = Math.trunc || function(x) {\n  if (isNaN(x)) {\n    return NaN;\n  }\n  if (x \x3e 0) {\n    return Math.floor(x);\n  }\n  return Math.ceil(x);\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.trunc = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.trunc || \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3ex\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eisNaN\x3c\/span\x3e(x)) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-literal\x22\x3eNaN\x3c\/span\x3e;\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (x \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.floor(x);\n  }\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.ceil(x);\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e数学的事情还是用数学方法来处理比较好。\x3c\/p\x3e\n\x3ch4\x3e7.3 黑科技版\x3c\/h4\x3e\n\x3ch5\x3e7.3.1 ~~number\x3c\/h5\x3e\n\x3cp\x3e双波浪线 ~~ 操作符也被称为“双按位非”操作符。你通常可以使用它作为代替 Math.trunc() 的更快的方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(~~47.11)  \/\/ -\x3e 47\nconsole.log(~~1.9999) \/\/ -\x3e 1\nconsole.log(~~3)      \/\/ -\x3e 3\nconsole.log(~~[])     \/\/ -\x3e 0\nconsole.log(~~NaN)    \/\/ -\x3e 0\nconsole.log(~~null)   \/\/ -\x3e 0\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~\x3cspan class=\x22hljs-number\x22\x3e47.11\x3c\/span\x3e)  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 47\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~\x3cspan class=\x22hljs-number\x22\x3e1.9999\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 1\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e)      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 3\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~[])     \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 0\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~\x3cspan class=\x22hljs-literal\x22\x3eNaN\x3c\/span\x3e)    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 0\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e)   \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 0\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e失败时返回0,这可能在解决 Math.trunc() 转换错误返回 NaN 时是一个很好的替代。\x3cbr\x3e但是当数字范围超出 ±2^31−1 即：2147483647 时，异常就出现了：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 异常情况\nconsole.log(~~2147493647.123) \/\/ -\x3e -2147473649 ?\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 异常情况\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(~~\x3cspan class=\x22hljs-number\x22\x3e2147493647.123\x3c\/span\x3e) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; -2147473649 ?\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e7.3.2 number | 0\x3c\/h5\x3e\n\x3cp\x3e| (按位或) 对每一对比特位执行或（OR）操作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(20.15|0);          \/\/ -\x3e 20\nconsole.log((-20.15)|0);       \/\/ -\x3e -20\nconsole.log(3000000000.15|0);  \/\/ -\x3e -1294967296 ?\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e20.15\x3c\/span\x3e|\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 20\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((\x3cspan class=\x22hljs-number\x22\x3e-20.15\x3c\/span\x3e)|\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; -20\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e3000000000.15\x3c\/span\x3e|\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; -1294967296 ?\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e7.3.3 number ^ 0\x3c\/h5\x3e\n\x3cp\x3e^ (按位异或)，对每一对比特位执行异或（XOR）操作。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(20.15^0);          \/\/ -\x3e 20\nconsole.log((-20.15)^0);       \/\/ -\x3e -20\nconsole.log(3000000000.15^0);  \/\/ -\x3e -1294967296 ?\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e20.15\x3c\/span\x3e^\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; 20\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log((\x3cspan class=\x22hljs-number\x22\x3e-20.15\x3c\/span\x3e)^\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; -20\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e3000000000.15\x3c\/span\x3e^\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ -\x26gt; -1294967296 ?\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch5\x3e7.3.4 number \x26lt;\x26lt; 0\x3c\/h5\x3e\n\x3cp\x3e\x26lt;\x26lt; (左移) 操作符会将第一个操作数向左移动指定的位数。向左被移出的位被丢弃，右侧用 0 补充。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22console.log(20.15 \x3c \x3c 0);     \/\/ -\x3e 20\nconsole.log((-20.15) \x3c \x3c 0);  \/\/-20\nconsole.log(3000000000.15 \x3c\x3c 0);  \/\/ -\x3e -1294967296 ?\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-number\x22\x3e20.15\x3c\/span\x3e \x26lt; \x3cspan class=\x22xml\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt; \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e);     \/\/ \x3cspan class=\x22hljs-attr\x22\x3e-\x3c\/span\x3e\x26gt;\x3c\/span\x3e 20\nconsole.log((-20.15) \x3cspan class=\x22hljs-tag\x22\x3e\x26lt; \x26lt; \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e);  \/\/\x3cspan class=\x22hljs-attr\x22\x3e-20\x3c\/span\x3e\n\x3cspan class=\x22hljs-attr\x22\x3econsole.log\x3c\/span\x3e(\x3cspan class=\x22hljs-attr\x22\x3e3000000000.15\x3c\/span\x3e \x26lt;\x26lt; \x3cspan class=\x22hljs-attr\x22\x3e0\x3c\/span\x3e);  \/\/ \x3cspan class=\x22hljs-attr\x22\x3e-\x3c\/span\x3e\x26gt;\x3c\/span\x3e -1294967296 ?\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面这些按位运算符方法执行很快，当你执行数百万这样的操作非常适用，速度明显优于其他方法。但是代码的可读性比较差。还有一个特别要注意的地方，处理比较大的数字时（当数字范围超出 ±2^31−1 即：2147483647），会有一些异常情况。使用的时候明确的检查输入数值的范围。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3e8、数组求和\x3c\/h3\x3e\n\x3ch4\x3e8.1 普通版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let arr = [1, 2, 3, 4, 5]\nfunction sum(arr){\n    let x = 0\n    for(let i = 0; i \x3c arr.length; i\x2b\x2b){\n        x \x2b= arr[i]\n    }\n    return x\n}\nsum(arr) \/\/ 15\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e]\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esum\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e)\x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e(\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; arr.length; i\x2b\x2b){\n        x \x2b= arr[i]\n    }\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e x\n}\nsum(arr) \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 15\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：通俗易懂，简单粗暴\x3cbr\x3e缺点：没有亮点，太通俗\x3c\/p\x3e\n\x3ch4\x3e8.2 优雅版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let arr = [1, 2, 3, 4, 5]\nfunction sum(arr) {\nreturn arr.reduce((a, b) =\x3e a \x2b b)\n}\nsum(arr) \/\/15\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e]\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esum\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e) \x3c\/span\x3e{\n\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e arr.reduce(\x3cspan class=\x22hljs-function\x22\x3e(\x3cspan class=\x22hljs-params\x22\x3ea, b\x3c\/span\x3e) =\x26gt;\x3c\/span\x3e a \x2b b)\n}\nsum(arr) \x3cspan class=\x22hljs-comment\x22\x3e\/\/15\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：简单明了，数组迭代器方式清晰直观\x3cbr\x3e缺点：不兼容 IE 9以下浏览器\x3c\/p\x3e\n\x3ch4\x3e8.3 终极版\x3c\/h4\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22let arr = [1, 2, 3, 4, 5]\nfunction sum(arr) {\nreturn eval(arr.join(\x26quot;\x2b\x26quot;))\n}\nsum(arr) \/\/15\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22JavaScript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e]\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3esum\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3earr\x3c\/span\x3e) \x3c\/span\x3e{\n\x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eeval\x3c\/span\x3e(arr.join(\x3cspan class=\x22hljs-string\x22\x3e\x22\x2b\x22\x3c\/span\x3e))\n}\nsum(arr) \x3cspan class=\x22hljs-comment\x22\x3e\/\/15\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e优点：让人一时看不懂的就是\x22好方法\x22。\x3cbr\x3e缺点：\x3c\/p\x3e\n\x3cblockquote\x3eeval 不容易调试。用 chromeDev 等调试工具无法打断点调试，所以麻烦的东西也是不推荐使用的…\x3cp\x3e性能问题，在旧的浏览器中如果你使用了eval，性能会下降10倍。在现代浏览器中有两种编译模式：fast path和slow path。fast path是编译那些稳定和可预测（stable and predictable）的代码。而明显的，eval 不可预测，所以将会使用 slow path ，所以会慢。\x3c\/p\x3e\n\x3c\/blockquote\x3e\n\x3cp\x3e更多关于 \x3ccode\x3eeval\x3c\/code\x3e 的探讨可以关注这篇文章: \x3ca href=\x22https:\/\/www.zhihu.com\/question\/20591877\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eJavaScript 为什么不推荐使用 eval？\x3c\/a\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e你可能不知道的前端知识点：eval的使用细则\x3c\/strong\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3e最后\x3c\/h3\x3e\n\x3cp\x3e\x3cstrong\x3e祝大家圣诞快乐?，欢迎补充和交流。\x3c\/strong\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554830?w=846\x26amp;h=1030\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554830?w=846\x26amp;h=1030\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554831?w=1116\x26amp;h=1078\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554831?w=1116\x26amp;h=1078\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000012554832?w=500\x26amp;h=278\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000012554832?w=500\x26amp;h=278\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>JavaScript 优雅的实现方式包含你可能不知道的知识点</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000012554823">https://segmentfault.com/a/1190000012554823</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/ywip22uheb/" target="_blank">https://alili.tech/archive/ywip22uheb/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>