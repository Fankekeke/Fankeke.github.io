<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="基于HTML5和WebGL的三维可视立体动态流程图"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>基于HTML5和WebGL的三维可视立体动态流程图 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/z1s3jxecrpf/",
				"appid": "1613049289050283", 
				"title": "基于HTML5和WebGL的三维可视立体动态流程图 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-29T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/sqg8r7lzehk/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ztods7enf0c/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&text=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&text=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&title=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&is_video=false&description=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&title=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&title=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&title=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz1s3jxecrpf%2f&title=%e5%9f%ba%e4%ba%8eHTML5%e5%92%8cWebGL%e7%9a%84%e4%b8%89%e7%bb%b4%e5%8f%af%e8%a7%86%e7%ab%8b%e4%bd%93%e5%8a%a8%e6%80%81%e6%b5%81%e7%a8%8b%e5%9b%be"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">基于HTML5和WebGL的三维可视立体动态流程图</h1><div class="meta"><div class="postdate"><time datetime="2018-12-29" itemprop="datePublished">2018-12-29</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e惯例先扯点闲篇\x3c\/h2\x3e\n\x3cp\x3e记得15年那会儿，我给人讲WebGL，还得从头科普，三令五申要用Chrome，末了再强调一句，记得启用WebGL功能。今天，但凡懂点儿Web开发的，都会来一句“网页3D用WebGL”。\x3c\/p\x3e\n\x3cp\x3e怎么形容这种感受呢？\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWrUS?w=255\x26amp;h=255\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWrUS?w=255\x26amp;h=255\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这两年的技术发展，大家想必都看在眼里，单用“爆发”二字，实在难以描述其中的惊天巨变。而回到网页3D这个话题上，我想，最大的驱动力，莫过于16年至今虚拟现实的迅速崛起，彻底推进了三维可视化技术的突飞猛进，而物联网发力，又开启了一扇通往新世界的大门。\x3c\/p\x3e\n\x3cp\x3e游戏界至今争论不休的Unity还是HTML5，依我看至少WebGL活的好好的，而插件技术么，则让我想起了一首悲伤的歌：dying in the sun…\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3e三维可视化应用盘点\x3c\/h1\x3e\n\x3cp\x3e今天当然还是给大家介绍一款最新的三维可视化成果，开始正题前，我想先盘点一下这两年还算靠谱的一些三维应用。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e工业\x3c\/strong\x3e上的，偏销售侧有复杂零件的三维展示，依托零件原有模型，做好参数转换，比较容易实现。偏管理侧，主要是厂房车间和生产设备的三维监控；\x3cstrong\x3e电力行业\x3c\/strong\x3e，有无人值守变电站的巡检和监控，结合三维可以进行远程巡检作业，降低人工作业的风险；\x3cstrong\x3e仓库和粮仓\x3c\/strong\x3e，引入三维后，可以结合库房系统、环境系统，进行全方位的管理；\x3cstrong\x3e矿山和隧道\x3c\/strong\x3e，这个很好理解：作业越是危险、对环境要求越高的地方，越是需要虚拟仿真；\x3cstrong\x3e3D家装设计\x3c\/strong\x3e, 通常是在线模式，拖拽设计，结合家具贩售，早先是以Stage3D为主，这两年也看到很多WebGL的案例；\x3cstrong\x3e博物馆、图书馆、档案馆\x3c\/strong\x3e的导览结合解说，复杂设备的虚拟仿真\x3cstrong\x3e培训\x3c\/strong\x3e，\x3cstrong\x3e商品展示\x3c\/strong\x3e，这个比较多了，像虚拟试衣间，商品的三维在线浏览，比如刚看到这款霸气侧漏的零食：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWrWy?w=1270\x26amp;h=855\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWrWy?w=1270\x26amp;h=855\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e开个玩笑。其实不管哪个行业，三维应用很大的一部分工作量源于建模，而这次我们想分享的是和上述应用完全不同的一个案例。\x3c\/p\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e正文\x3c\/h1\x3e\n\x3cp\x3e这次的案例，对模型几乎没有要求，只是用了最基本的形状元素，但是却可以解决企业在不断发展壮大，尤其是信息化进程不断深入的过程中，都会遇到的问题，那就是如何将\x3cstrong\x3e复杂流程可视化\x3c\/strong\x3e。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e什么是流程？\x3c\/h2\x3e\n\x3cp\x3e流程，看起来很简答的两个字，英文process。我们这里所说的流程，主要是企业的\x3cstrong\x3e业务流程\x3c\/strong\x3e，如生产流程、各类行政申请流程、财务审批流程、人事处理流程、质量控制及客服流程等等。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e业务流程对于企业的意义不仅仅在于对企业关键业务的一种描述；更在于对企业的业务运营有着指导意义，这种意义体现在对资源的优化、对企业组织机构的优化以及对管理制度的一系列改变。这种优化的目的实际也是企业所追求的目标：降低企业的运营成本，提高对市场需求的响应速度，争取企业利润的最大化。（from智库百科MBAlib）\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e为啥我突然开始拽商业名词了呢？因为，这是甲方爸爸给出的一个难题。\x3c\/p\x3e\n\x3cp\x3e甲方爸爸的企业，部门繁多，流程复杂，为了提升业务流程的效率，同时优化企业自身的管理，提出了一个将其现有业务流程进行三维可视化的需求。\x3c\/p\x3e\n\x3cp\x3e为什么要把流程进行三维可视化呢？\x3c\/p\x3e\n\x3cp\x3e通俗的说，因为平面的实在是看不清理不顺了；时髦点讲，只有\x3cstrong\x3e“升维”\x3c\/strong\x3e，才能展示和包容更多的信息。\x3c\/p\x3e\n\x3cp\x3e看到这里的三体同好们，请不要吝啬向我隔空挥舞小手！\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWrZO?w=240\x26amp;h=240\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWrZO?w=240\x26amp;h=240\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e举个栗子\x3c\/h2\x3e\n\x3cp\x3e甲方爸爸的信息实在太多，而且不能透露，我们就找其中几个简单的举个例子，比如每个企业每天都在处理的报账流程：(应要求马赛克了一些文字）\x3c\/p\x3e\n\x3cp\x3e报账流程业务图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWW86?w=585\x26amp;h=586\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWW86?w=585\x26amp;h=586\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e二层逻辑交互图：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWW9a?w=800\x26amp;h=608\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWW9a?w=800\x26amp;h=608\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e报账业务基础架构：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWW9h?w=512\x26amp;h=712\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWW9h?w=512\x26amp;h=712\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e看到如此复杂的结构，无论你是以下哪种表情，都不要惊慌：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWr5i?w=166\x26amp;h=134\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWr5i?w=166\x26amp;h=134\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWr4D?w=154\x26amp;h=134\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWr4D?w=154\x26amp;h=134\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWr5m?w=136\x26amp;h=134\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWr5m?w=136\x26amp;h=134\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e流程结构梳理\x3c\/h2\x3e\n\x3cp\x3e我们先简单梳理下流程图的大致框架，一共可以分为五层：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e业务流程层：起点、审批、服务；\x3c\/li\x3e\n\x3cli\x3e应用逻辑层：WEB服务、数据库服务、定时作业服务、接口服务、应用服务；\x3c\/li\x3e\n\x3cli\x3e实例：WEB服务实例、财辅数据库实例、支付服务实例；\x3c\/li\x3e\n\x3cli\x3eOS：EB服务OS、财辅数据库OS；\x3c\/li\x3e\n\x3cli\x3e硬件：主机、交换机。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWr7F?w=255\x26amp;h=255\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWr7F?w=255\x26amp;h=255\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e初稿\x3c\/h2\x3e\n\x3cp\x3e为了让这五层之间的关系一目了然，分层展示是必不可少的。每个层次里，又分为几个模块，层次与层次、模块与模块之间都有业务上的联系。根据梳理的逻辑关系，我先整了一个初稿。流程和业务先用简单的方块和圆柱代替，底层的机柜模型，直接用存货模型，机房相关的模型，我们大大的有。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU4KI?w=1347\x26amp;h=614\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU4KI?w=1347\x26amp;h=614\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e虽然看起来层次感有了，不过这只是个整体的框架demo，我们在这基础上一步步修改。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e圆弧效果\x3c\/h2\x3e\n\x3cp\x3e说下层模型的圆弧效果。为了把每个层做成圆弧的效果，我把层模型拆解成了由9个简单模型组合而成，上图给你们看（原谅我图画得渣渣）。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU7cW?w=1043\x26amp;h=437\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU7cW?w=1043\x26amp;h=437\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e模型1、2、3、4、5均为厚度相同的立方体，模型6、7、8、9为大小相等的1\/4圆柱体，9个模型组合成层模型。\x3c\/p\x3e\n\x3cp\x3e模型1的代码：（模型1,2,3,4,5差不多，就只贴模型1的代码了。）\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var centerNode = new mono.Cube({\n    width: width,\n    height: height,\n    depth: depth,\n});\ncenterNode.s({\n    \x27m.type\x27: \x27phong\x27,\n    \x27m.color\x27: color\n});\n    \x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e centerNode = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.Cube({\n    \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e,\n    depth: depth,\n});\ncenterNode.s({\n    \x27m.type\x27: \x27phong\x27,\n    \x27m.\x3cspan class=\x22hljs-built_in\x22\x3ecolor\x3c\/span\x3e\x27: \x3cspan class=\x22hljs-built_in\x22\x3ecolor\x3c\/span\x3e\n});\n    \x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e模型6的代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var leftTopCylinder = new mono.Cylinder({\n    radiusTop: radius,\n    radiusBottom: radius,\n    height: height,\n    arcLength: Math.PI \/ 2, \/\/圆柱的圆弧所占长度\n    arcStart: Math.PI \/\/圆弧开始的角度\n});\n    \nleftTopCylinder.s({\n    \x27m.type\x27: \x27phong\x27,\n    \x27m.color\x27: color\n});\nleftTopCylinder.p(-width \/ 2, 0, -depth \/ 2);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs processing\x22\x3e\x3ccode\x3evar leftTopCylinder = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e mono.Cylinder({\n    radiusTop: radius,\n    radiusBottom: radius,\n    \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e,\n    arcLength: Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-comment\x22\x3e\/\/圆柱的圆弧所占长度\x3c\/span\x3e\n    arcStart: Math.\x3cspan class=\x22hljs-literal\x22\x3ePI\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/圆弧开始的角度\x3c\/span\x3e\n});\n    \nleftTopCylinder.s({\n    \x3cspan class=\x22hljs-string\x22\x3e\x27m.type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27phong\x27\x3c\/span\x3e,\n    \x3cspan class=\x22hljs-string\x22\x3e\x27m.color\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-built_in\x22\x3ecolor\x3c\/span\x3e\n});\nleftTopCylinder.p(-\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, -depth \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e9个模型合并：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var combo = new mono.ComboNode([centerNode, leftNode, rightNode, topNode, bottomNode, leftTopCylinder, rightTopCylinder, leftBottomCylinder, rightBottomCylinder],[\x27\x2b\x27],true);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs haxe\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e combo = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-type\x22\x3emono\x3c\/span\x3e.ComboNode([centerNode, leftNode, rightNode, topNode, bottomNode, leftTopCylinder, rightTopCylinder, leftBottomCylinder, rightBottomCylinder],[\x3cspan class=\x22hljs-string\x22\x3e\x27\x2b\x27\x3c\/span\x3e],\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e背景和配色\x3c\/h2\x3e\n\x3cp\x3e首先，增加了背景图片，选取的是一张星空的图片，之后根据背景修改了配色和部分模型。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWXa0?w=800\x26amp;h=405\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWXa0?w=800\x26amp;h=405\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e效果还是不错的，看起来更加大气。增加背景代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22network.setClearColor(0, 0, 0);\nnetwork.setClearAlpha(0);\nnetwork.setBackgroundImage(\x27.\/images\/background.jpg\x27);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3enetwork\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setClearColor\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\x3cspan class=\x22hljs-selector-tag\x22\x3enetwork\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setClearAlpha\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n\x3cspan class=\x22hljs-selector-tag\x22\x3enetwork\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.setBackgroundImage\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27.\/images\/background.jpg\x27\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e文字\x3c\/h2\x3e\n\x3cp\x3e图中显示文字类似对话框的东西其实是billboard，先创建一个billboard，再用canvas画一张图作为贴图贴到上面就可以了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var billboard = new mono.Billboard();\nvar canvas = document.createElement(\x27canvas\x27);\n    var context = canvas.getContext(\x272d\x27);\n    context.font = \x26quot;130px 微软雅黑\x26quot;;\n\n    var array = [];\n    if (text.indexOf(\x26quot;\\n\x26quot;)) {\n        array = text.split(\x26quot;\\n\x26quot;);\n    } else {\n        array = [text]\n    }\n    var length = 0;\n    for (var i = 0; i \x3c array.length; i\x2b\x2b) {\n        if (i == 0) {\n            length = context.measureText(array[i]).width;\n        } else {\n            length = Math.max(context.measureText(array[i]).width, length);\n        }\n    }\n\n    var size = mono.Utils.getMaxTextSize(array, context.font);\n    var width = mono.Utils.nextPowerOfTwo(length);\n    var oHeight = size.height;\n    var arrowHeight = 40;\n    var arrowWidth = 80;\n    var height = mono.Utils.nextPowerOfTwo(oHeight \x2b arrowHeight);\n\n    canvas.height = height;\n    canvas.width = width;\n    var lineHeight =(height - arrowHeight - 40) \/ array.length;\n    var oLineHeight = oHeight \/ array.length;\n    var radius = width \/ 16;\n\n    var context = canvas.getContext(\x272d\x27);\n    context.globalAlpha = 0.9;\n    context.fillStyle = bgColor;\n    context.save();\n    context.beginPath();\n    context.moveTo(radius \x2b 10, 10);\n    context.lineTo(width - radius - 10, 10);\n    context.arcTo(width - 10, 10, width - 10, radius \x2b 10, radius);\n    context.lineTo(width - 10, height - arrowHeight - radius - 10);\n    context.arcTo(width - 10, height - arrowHeight - 10, width - radius -10, height - arrowHeight - 10, radius);\n    context.lineTo(width \/ 2 \x2b arrowWidth \/ 2 - 10, height - arrowHeight - 10);\n    context.lineTo(width \/ 2 - 10, height - 10);\n    context.lineTo(width \/ 2 - arrowWidth \/ 2 - 10, height - arrowHeight - 10);\n    context.lineTo(radius \x2b 10, height - arrowHeight - 10);\n    context.arcTo(10, height - arrowHeight - 10, 10, height - arrowHeight - radius - 10, radius);\n    context.lineTo(10, radius \x2b 10);\n    context.arcTo(10, 10, radius \x2b 10, 10, radius);\n    context.closePath();\n    context.fill();\n    context.globalAlpha = 1;\n    context.lineWidth = 10;\n    context.strokeStyle = bgColor;\n    context.stroke();\n    context.restore();\n\n    context.fillStyle = fontColor;\n    context.textBaseline = \x27middle\x27;\n    context.font = \x26quot;120px 微软雅黑\x26quot;;\n    for (var i = 0; i \x3c array.length; i\x2b\x2b) {\n        var text = array[i];\n        length = context.measureText(text).width;\n        context.fillText(text, (width - length) \/ 2, lineHeight * (i \x2b 0.5));\n    }\n    billboard.s({\n        \x27m.texture.image\x27: canvas,\n        \x27m.texture.offset\x27: new mono.Vec2(0, 0.005),\n        \x27m.texture.anisotropy\x27: 8,\n        \x27m.alignment\x27: mono.BillboardAlignment.bottomCenter\n    });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs maxima\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e billboard = \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.Billboard();\n\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e canvas = document.createElement(\x27canvas\x27);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e = canvas.getContext(\x272d\x27);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3efont\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22130px 微软雅黑\x22\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e = [];\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (text.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x22\\n\x22\x3c\/span\x3e)) {\n        \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e = text.\x3cspan class=\x22hljs-built_in\x22\x3esplit\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x22\\n\x22\x3c\/span\x3e);\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e = [text]\n    }\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (i == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.measureText(\x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e[i]).\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e = Math.\x3cspan class=\x22hljs-built_in\x22\x3emax\x3c\/span\x3e(\x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.measureText(\x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e[i]).\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e);\n        }\n    }\n\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e size = \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.Utils.getMaxTextSize(\x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3efont\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.Utils.nextPowerOfTwo(\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e oHeight = size.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e arrowHeight = \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e arrowWidth = \x3cspan class=\x22hljs-number\x22\x3e80\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.Utils.nextPowerOfTwo(oHeight \x2b arrowHeight);\n\n    canvas.\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e;\n    canvas.\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e lineHeight =(\x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e40\x3c\/span\x3e) \/ \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e oLineHeight = oHeight \/ \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e16\x3c\/span\x3e;\n\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e = canvas.getContext(\x272d\x27);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.globalAlpha = \x3cspan class=\x22hljs-number\x22\x3e0.9\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fillStyle = bgColor;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3esave\x3c\/span\x3e();\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.beginPath();\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.moveTo(\x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.arcTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.arcTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e -\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x2b arrowWidth \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - arrowWidth \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.arcTo(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eheight\x3c\/span\x3e - arrowHeight - \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e - \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineTo(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.arcTo(\x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e, \x3cspan class=\x22hljs-built_in\x22\x3eradius\x3c\/span\x3e);\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.closePath();\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fill();\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.globalAlpha = \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.lineWidth = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.strokeStyle = bgColor;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.stroke();\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.restore();\n\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fillStyle = fontColor;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.textBaseline = \x27middle\x27;\n    \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3efont\x3c\/span\x3e = \x3cspan class=\x22hljs-string\x22\x3e\x22120px 微软雅黑\x22\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-keyword\x22\x3efor\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e i = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e; i \x26lt; \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e.\x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e; i\x2b\x2b) {\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e text = \x3cspan class=\x22hljs-built_in\x22\x3earray\x3c\/span\x3e[i];\n        \x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e = \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.measureText(text).\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-built_in\x22\x3econtext\x3c\/span\x3e.fillText(text, (\x3cspan class=\x22hljs-built_in\x22\x3ewidth\x3c\/span\x3e - \x3cspan class=\x22hljs-built_in\x22\x3elength\x3c\/span\x3e) \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, lineHeight * (i \x2b \x3cspan class=\x22hljs-number\x22\x3e0.5\x3c\/span\x3e));\n    }\n    billboard.s({\n        \x27m.texture.\x3cspan class=\x22hljs-built_in\x22\x3eimage\x3c\/span\x3e\x27: canvas,\n        \x27m.texture.offset\x27: \x3cspan class=\x22hljs-built_in\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.Vec2(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0.005\x3c\/span\x3e),\n        \x27m.texture.anisotropy\x27: \x3cspan class=\x22hljs-number\x22\x3e8\x3c\/span\x3e,\n        \x27m.alignment\x27: \x3cspan class=\x22hljs-built_in\x22\x3emono\x3c\/span\x3e.BillboardAlignment.bottomCenter\n    });\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3eobj模型\x3c\/h2\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU7pG?w=604\x26amp;h=191\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU7pG?w=604\x26amp;h=191\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e这两种属于obj模型，是设计小姐姐做的，然后我们通过make.Default.register函数定义模型，通过make.Default.load函数加载使用模型。\x3c\/p\x3e\n\x3cp\x3e为了使效果更逼真，我们给模型做了环境贴图。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22 object3d.setStyle(\x27m.envmap.image\x27, make.Default.getEnvMap(\x27envmap5\x27));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs autoit\x22\x3e\x3ccode style=\x22word-break: break-word; white-space: initial;\x22\x3e object3d.setStyle(\x3cspan class=\x22hljs-string\x22\x3e\x27m.envmap.image\x27\x3c\/span\x3e, make.\x3cspan class=\x22hljs-keyword\x22\x3eDefault\x3c\/span\x3e.getEnvMap(\x3cspan class=\x22hljs-string\x22\x3e\x27envmap5\x27\x3c\/span\x3e))\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU7o4?w=510\x26amp;h=260\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU7o4?w=510\x26amp;h=260\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader11\x22\x3e动画\x3c\/h2\x3e\n\x3cp\x3e单纯的静态图看起来有些单调，所以我们给连线加了动画效果：找一张一半透明一半有颜色的图片，作为贴图贴在连线上，利用动画函数使贴图不断平移，就实现了下面的效果。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU5xn?w=308\x26amp;h=219\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU5xn?w=308\x26amp;h=219\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader12\x22\x3e实体模型\x3c\/h2\x3e\n\x3cp\x3e最底层的模型采用了实体模型，真实感更强：\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU7sJ?w=400\x26amp;h=287\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU7sJ?w=400\x26amp;h=287\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader13\x22\x3e嵌套关系\x3c\/h2\x3e\n\x3cp\x3e上面也提到过，层与层、层内各个模块中之间存在错综复杂的多层嵌套关系，为了展现这种关系，那肯定就要连线，话不多说，直接上图。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWXbe?w=800\x26amp;h=589\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWXbe?w=800\x26amp;h=589\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e线的类型有两种，层与层之间的连线类型是link，每层模块之间的连线类型是pathLink，创建pathLInk代码如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22createPathLink: function (data) {\n    var box = main.sceneManager.getDataBox();\n    var fromNode = main.sceneManager.getNodeByDataOrId(data.fromId);\n    var toNode = main.sceneManager.getNodeByDataOrId(data.toId);\n    var radius = data.path.radius || 3;\n    var color = data.path.color || \x27yellow\x27;\n    var endCap = data.path.endCap;\n    var startCap = data.path.startCap;\n    var linkType = data.routeType;\n    var flow = data.path.flow || \x27\x27;\n    var workflowId = data.workflowId || \x27\x27; \n    if (fromNode \x26amp;\x26amp; toNode) {\n        var link = new mono.PathLink(fromNode, toNode, data.id);\n        var plength = link.getPath().getLength();\n        link.setRadius(radius);\n        link.s({\n            \x27m.type\x27: \x27phong\x27,\n            \x27m.color\x27: color,\n            \x27m.ambient\x27: color\n        });\n        link.workflowId = workflowId;\n        if (endCap) {\n            var endCapSize = data.path.endCapSize || 10;\n            var endCapR = data.path.endCapR || 2;\n            link.setEndCap(endCap);\n            link.setEndCapSize(endCapSize);\n            link.setEndCapR(endCapR);\n        }\n        if (startCap) {\n            var startCapSize = data.path.startCapSize || 10;\n            var startCapR = data.path.startCapR || 2;\n            link.setStartCap(startCap);\n            link.setStartCapSize(startCapSize);\n            link.setStartCapR(startCapR);\n        }\n        if (linkType) {\n            link.setLinkType(linkType);\n        }\n        box.add(link);\n    }\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3ecreatePathLink: function (\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e) {\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e box = main.sceneManager.getDataBox();\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e fromNode = main.sceneManager.getNodeByDataOrId(\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.fromId);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e toNode = main.sceneManager.getNodeByDataOrId(\x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.toId);\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e radius = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.radius || \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e color = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.color || \x3cspan class=\x22hljs-string\x22\x3e\x27yellow\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e endCap = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.endCap;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e startCap = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.startCap;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e linkType = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.routeType;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e flow = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.flow || \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n    \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e workflowId = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.workflowId || \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e; \n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (fromNode \x26amp;\x26amp; toNode) {\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e = \x3cspan class=\x22hljs-literal\x22\x3enew\x3c\/span\x3e mono.PathLink(fromNode, toNode, \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.id);\n        \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e plength = \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.getPath().getLength();\n        \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setRadius(radius);\n        \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.s({\n            \x3cspan class=\x22hljs-string\x22\x3e\x27m.type\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27phong\x27\x3c\/span\x3e,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27m.color\x27\x3c\/span\x3e: color,\n            \x3cspan class=\x22hljs-string\x22\x3e\x27m.ambient\x27\x3c\/span\x3e: color\n        });\n        \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.workflowId = workflowId;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (endCap) {\n            \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e endCapSize = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.endCapSize || \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e endCapR = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.endCapR || \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setEndCap(endCap);\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setEndCapSize(endCapSize);\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setEndCapR(endCapR);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (startCap) {\n            \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e startCapSize = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.startCapSize || \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-built_in\x22\x3evar\x3c\/span\x3e startCapR = \x3cspan class=\x22hljs-built_in\x22\x3edata\x3c\/span\x3e.path.startCapR || \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setStartCap(startCap);\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setStartCapSize(startCapSize);\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setStartCapR(startCapR);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (linkType) {\n            \x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setLinkType(linkType);\n        }\n        box.add(\x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e);\n    }\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3elink类型连线与pathLink类型连线大体相同，之所以层与层之间选择link类型，有两个原因：一是当镜头拉近时，link类型的连线粗细不会改变，二是便于控制拐点，就是下图中的红圈处。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU7iI?w=148\x26amp;h=124\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU7iI?w=148\x26amp;h=124\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22link.setLinkType(\x27control\x27);\/\/control属性控制连线的拐点\nlink.setControls(controls);\/\/controls为数组\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lasso\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setLinkType(\x3cspan class=\x22hljs-string\x22\x3e\x27control\x27\x3c\/span\x3e);\x3cspan class=\x22hljs-comment\x22\x3e\/\/control属性控制连线的拐点\x3c\/span\x3e\n\x3cspan class=\x22hljs-keyword\x22\x3elink\x3c\/span\x3e.setControls(controls);\x3cspan class=\x22hljs-comment\x22\x3e\/\/controls为数组\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这样就可以呈现图中的伞状效果啦。\x3c\/p\x3e\n\x3cp\x3e为了增加点朦胧感以及让伞状效果更好，我们特意添加了一点光环，有没有感觉金光从天而降呢？此时请想象自己45°角仰望天空，金光照在脸上。\x3cbr\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU58r?w=1796\x26amp;h=893\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU58r?w=1796\x26amp;h=893\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader14\x22\x3e流程动画\x3c\/h2\x3e\n\x3cp\x3e基础打好，下面就可以加上动画，执行流程了。先上图：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU5EO?w=1393\x26amp;h=563\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU5EO?w=1393\x26amp;h=563\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e点击左边的按钮，出现图中的白色小球，沿着连线运动，完整展现整个流程步骤。当然，镜头会随着小球切换，这样小球时刻在视线正中，妈妈再也不用担心我的视线被挡住。\x3c\/p\x3e\n\x3cp\x3e镜头切换的代码也很简单：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var pos = link.getPointAt(v);\nworkflowSphere.p(pos);\nbillboard.p(pos.clone().add(new mono.Vec3(0, 250, 0)));\nvar camera = main.sceneManager.network3d.getCamera();\ncamera.lookAt(pos);\ncamera.p(pos.clone().sub(this._cameraOffset));\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs pony\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pos = link.getPointAt(v);\nworkflowSphere.p(pos);\nbillboard.p(pos.clone().add(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3emono\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3eVec3\x3c\/span\x3e(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e)));\n\x3cspan class=\x22hljs-title\x22\x3evar\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3ecamera\x3c\/span\x3e = \x3cspan class=\x22hljs-title\x22\x3emain\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3esceneManager\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3enetwork3d\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3egetCamera\x3c\/span\x3e();\n\x3cspan class=\x22hljs-title\x22\x3ecamera\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3elookAt\x3c\/span\x3e(pos);\n\x3cspan class=\x22hljs-title\x22\x3ecamera\x3c\/span\x3e.\x3cspan class=\x22hljs-title\x22\x3ep\x3c\/span\x3e(pos.clone().\x3cspan class=\x22hljs-title\x22\x3esub\x3c\/span\x3e(this._cameraOffset));\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader15\x22\x3e数据\x3c\/h2\x3e\n\x3cp\x3e最后聊聊数据。为了方（tou）便(lan)，我们将流程图的所有数据都存放在后台。在后端页面，可以设置流程图的结构、逻辑、流程节点的样式等。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVU7ma?w=1857\x26amp;h=556\x22 src=\x22https:\/\/static.alili.tech\/img\/bVU7ma?w=1857\x26amp;h=556\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e利用Ajax获取模型数据，然后三行代码便可建造一个3D流程图系统。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22dataManager.addCategoryFromJson(loadData.categories);\ndataManager.addDataTypeFromJson(loadData.datatypes);\ndataManager.addDataFromJson(loadData.datas);\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs css\x22\x3e\x3ccode\x3e\x3cspan class=\x22hljs-selector-tag\x22\x3edataManager\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.addCategoryFromJson\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3eloadData\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.categories\x3c\/span\x3e);\n\x3cspan class=\x22hljs-selector-tag\x22\x3edataManager\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.addDataTypeFromJson\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3eloadData\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.datatypes\x3c\/span\x3e);\n\x3cspan class=\x22hljs-selector-tag\x22\x3edataManager\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.addDataFromJson\x3c\/span\x3e(\x3cspan class=\x22hljs-selector-tag\x22\x3eloadData\x3c\/span\x3e\x3cspan class=\x22hljs-selector-class\x22\x3e.datas\x3c\/span\x3e);\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e同样，可以在后端页面设置连线的样式、颜色、起点、终点等等，获取到连线数据后，利用上文提到的方法便可绘制出所需要的连线。连动画的起点、走向同样可以在后端页面设置。\x3c\/p\x3e\n\x3cp\x3e如果甲方爸爸觉得某个流程有问题，需要修改时，不要怕，默默打开后端页面改几个节点就好了。速度这么快，快夸我快夸我。\x3c\/p\x3e\n\x3cp\x3e总而言之，只需要通过数据配置即可生成不同的三维流程，满足客户的各种需求。\x3c\/p\x3e\n\x3cp\x3e对demo感兴趣的同学，可以给我发邮件：tw-service@servasoft.com，甲方爸爸的数据不能给你，demo还是可以给你们看一眼的。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bVWsNV?w=213\x26amp;h=207\x22 src=\x22https:\/\/static.alili.tech\/img\/bVWsNV?w=213\x26amp;h=207\x22 alt=\x22图片描述\x22 title=\x22图片描述\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>基于HTML5和WebGL的三维可视立体动态流程图</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011511528">https://segmentfault.com/a/1190000011511528</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/z1s3jxecrpf/" target="_blank">https://alili.tech/archive/z1s3jxecrpf/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>