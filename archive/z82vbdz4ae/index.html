<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="element 源码学习三 —— select 源码学习"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>element 源码学习三 —— select 源码学习 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/z82vbdz4ae/",
				"appid": "1613049289050283", 
				"title": "element 源码学习三 —— select 源码学习 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-08T02:30:30"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/lvxlz8rnbfs/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/4hmr0x9y6hu/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&text=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&text=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&title=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&is_video=false&description=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&title=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&title=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&title=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fz82vbdz4ae%2f&title=element%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0%e4%b8%89%20%e2%80%94%e2%80%94%20select%20%e6%ba%90%e7%a0%81%e5%ad%a6%e4%b9%a0"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">element 源码学习三 —— select 源码学习</h1><div class="meta"><div class="postdate"><time datetime="2018-12-08" itemprop="datePublished">2018-12-08</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3cblockquote\x3eselect 选择器是个比较复杂的组件了，通过不同的配置可以有多种用法。有必要单独学习学习。\x3c\/blockquote\x3e\n\x3ch1 id=\x22articleHeader0\x22\x3e整体结构\x3c\/h1\x3e\n\x3cp\x3e以下是 select 的 template 结构，已去掉了一部分代码便于查看整体结构：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3ctemplate\x3e\n  \x3cdiv\x3e\n    \x3c!-- 多选 --\x3e\n    \x3cdiv\n      v-if=\x26quot;multiple\x26quot;\n      ref=\x26quot;tags\x26quot;\x3e\n      \x3c!-- collapse tags 多选时是否将选中值按文字的形式展示 --\x3e\n      \x3cspan v-if=\x26quot;collapseTags \x26amp;\x26amp; selected.length\x26quot;\x3e\n        \x3cel-tag\n          type=\x26quot;info\x26quot;\n          disable-transitions\x3e\n          \x3cspan class=\x26quot;el-select__tags-text\x26quot;\x3e\x22{{\x22 selected[0].currentLabel \x22}}\x22\x3c\/span\x3e\n        \x3c\/el-tag\x3e\n        \x3cel-tag\n          v-if=\x26quot;selected.length \x3e 1\x26quot;\n          type=\x26quot;info\x26quot;\n          disable-transitions\x3e\n          \x3cspan class=\x26quot;el-select__tags-text\x26quot;\x3e\x2b \x22{{\x22 selected.length - 1 \x22}}\x22\x3c\/span\x3e\n        \x3c\/el-tag\x3e\n      \x3c\/span\x3e\n      \x3c!-- 多选，多个 el-tag 组成 --\x3e\n      \x3ctransition-group @after-leave=\x26quot;resetInputHeight\x26quot; v-if=\x26quot;!collapseTags\x26quot;\x3e\n        \x3cel-tag\n          v-for=\x26quot;item in selected\x26quot;\n          :key=\x26quot;getValueKey(item)\x26quot;\n          type=\x26quot;info\x26quot;\n          disable-transitions\x3e\n          \x3cspan class=\x26quot;el-select__tags-text\x26quot;\x3e\x22{{\x22 item.currentLabel \x22}}\x22\x3c\/span\x3e\n        \x3c\/el-tag\x3e\n      \x3c\/transition-group\x3e\n      \x3c!-- 可输入文本的查询框 --\x3e\n      \x3cinput\n        v-model=\x26quot;query\x26quot;\n        v-if=\x26quot;filterable\x26quot;\n        ref=\x26quot;input\x26quot;\x3e\n    \x3c\/div\x3e\n    \x3c!-- 显示结果框 read-only --\x3e\n    \x3cel-input\n      ref=\x26quot;reference\x26quot;\n      v-model=\x26quot;selectedLabel\x26quot;\x3e\n      \x3c!-- 用户显示清空和向下箭头 --\x3e\n      \x3ci slot=\x26quot;suffix\x26quot;\x3e\x3c\/i\x3e\n    \x3c\/el-input\x3e\n    \x3c!-- 下拉菜单 --\x3e\n    \x3ctransition\x3e\n      \x3cel-select-menu\n        ref=\x26quot;popper\x26quot;\n        v-show=\x26quot;visible \x26amp;\x26amp; emptyText !== false\x26quot;\x3e\n        \x3cel-scrollbar\n          tag=\x26quot;ul\x26quot;\n          wrap-class=\x26quot;el-select-dropdown__wrap\x26quot;\n          view-class=\x26quot;el-select-dropdown__list\x26quot;\n          ref=\x26quot;scrollbar\x26quot;\n          v-show=\x26quot;options.length \x3e 0 \x26amp;\x26amp; !loading\x26quot;\x3e\n          \x3c!-- 默认项（创建条目） --\x3e\n          \x3cel-option\n            :value=\x26quot;query\x26quot;\n            created\n            v-if=\x26quot;showNewOption\x26quot;\x3e\n          \x3c\/el-option\x3e\n          \x3c!-- 插槽，用于放 option 和 option-group --\x3e\n          \x3cslot\x3e\x3c\/slot\x3e\n        \x3c\/el-scrollbar\x3e\n        \x3c!-- loading 加载中文本 --\x3e\n        \x3cp\n          v-if=\x26quot;emptyText \x26amp;\x26amp;\n            (!allowCreate || loading || (allowCreate \x26amp;\x26amp; options.length === 0 ))\x26quot;\x3e\n          \x22{{\x22 emptyText \x22}}\x22\n        \x3c\/p\x3e\n      \x3c\/el-select-menu\x3e\n    \x3c\/transition\x3e\n  \x3c\/div\x3e\n\x3c\/template\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 多选 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\n      \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22multiple\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22tags\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- collapse tags 多选时是否将选中值按文字的形式展示 --\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22collapseTags \x26amp;\x26amp; selected.length\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22info\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3edisable-transitions\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select__tags-text\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22 selected[0].currentLabel \x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22selected.length \x26gt; 1\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22info\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3edisable-transitions\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select__tags-text\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x2b \x22{{\x22 selected.length - 1 \x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 多选，多个 el-tag 组成 --\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etransition-group\x3c\/span\x3e @\x3cspan class=\x22hljs-attr\x22\x3eafter-leave\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22resetInputHeight\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22!collapseTags\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item in selected\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22getValueKey(item)\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22info\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3edisable-transitions\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select__tags-text\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22 item.currentLabel \x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etransition-group\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 可输入文本的查询框 --\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3einput\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22query\x22\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22filterable\x22\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22input\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 显示结果框 read-only --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-input\x3c\/span\x3e\n      \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22reference\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-attr\x22\x3ev-model\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22selectedLabel\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 用户显示清空和向下箭头 --\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ei\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eslot\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22suffix\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ei\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-input\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 下拉菜单 --\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etransition\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-select-menu\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22popper\x22\x3c\/span\x3e\n        \x3cspan class=\x22hljs-attr\x22\x3ev-show\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22visible \x26amp;\x26amp; emptyText !== false\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-scrollbar\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3etag\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22ul\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ewrap-class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select-dropdown__wrap\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eview-class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select-dropdown__list\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3eref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22scrollbar\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ev-show\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22options.length \x26gt; 0 \x26amp;\x26amp; !loading\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 默认项（创建条目） --\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-option\x3c\/span\x3e\n            \x3cspan class=\x22hljs-attr\x22\x3e:value\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22query\x22\x3c\/span\x3e\n            \x3cspan class=\x22hljs-attr\x22\x3ecreated\x3c\/span\x3e\n            \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22showNewOption\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-option\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 插槽，用于放 option 和 option-group --\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-scrollbar\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- loading 加载中文本 --\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ev-if\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22emptyText \x26amp;\x26amp;\n            (!allowCreate || loading || (allowCreate \x26amp;\x26amp; options.length === 0 ))\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x22{{\x22 emptyText \x22}}\x22\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ep\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-select-menu\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etransition\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etemplate\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e具体都写在注释中了~从上面内容中可以看到，select 考虑了很多情况，如单选、多选、搜索、下拉框、图标等等。并且使用 slot 插槽来获取开发者传递的 option 和 option-group 组件。\x3cbr\x3e可以发现在 select 中使用了多个外部组件，也就是说 el-select 是由多个组件组装成的一个复杂组件~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \/\/ components\n  import ElInput from \x27element-ui\/packages\/input\x27;\n  import ElSelectMenu from \x27.\/select-dropdown.vue\x27;\n  import ElOption from \x27.\/option.vue\x27;\n  import ElTag from \x27element-ui\/packages\/tag\x27;\n  import ElScrollbar from \x27element-ui\/packages\/scrollbar\x27;\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ components\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ElInput \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27element-ui\/packages\/input\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ElSelectMenu \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/select-dropdown.vue\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ElOption \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27.\/option.vue\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ElTag \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27element-ui\/packages\/tag\x27\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3eimport\x3c\/span\x3e ElScrollbar \x3cspan class=\x22hljs-keyword\x22\x3efrom\x3c\/span\x3e \x3cspan class=\x22hljs-string\x22\x3e\x27element-ui\/packages\/scrollbar\x27\x3c\/span\x3e;\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader1\x22\x3eselect 要实现的功能\x3c\/h1\x3e\n\x3cp\x3e参照\x3ca href=\x22http:\/\/element-cn.eleme.io\/#\/zh-CN\/component\/select\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e官方文档\x3c\/a\x3e的内容罗列出 select 的一些功能，后面跟上我对功能实现的理解：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e单选 —— 点击 \x3ccode\x3eselect\x3c\/code\x3e 弹出下拉框，点击 \x3ccode\x3eoption\x3c\/code\x3e 完成赋值。\x3c\/li\x3e\n\x3cli\x3e禁用 —— \x3ccode\x3eselect\x3c\/code\x3e 和 \x3ccode\x3eoption\x3c\/code\x3e 都有 \x3ccode\x3edisabled\x3c\/code\x3e 选项用于禁用。\x3c\/li\x3e\n\x3cli\x3e清空 —— 如果 \x3ccode\x3eselect\x3c\/code\x3e 中有内容，鼠标悬浮在 \x3ccode\x3einput\x3c\/code\x3e 上显示删除图标，点击执行删除操作。\x3c\/li\x3e\n\x3cli\x3e多选（平铺展示和数字显示数量两种方式） —— 参数 model 变为数组，点击下拉菜单中的选项添加或删除数组中的值。\x3c\/li\x3e\n\x3cli\x3e自定义模板 —— option 中定义了 \x3ccode\x3eslot\x3c\/code\x3e 插槽，默认加了 \x3ccode\x3espan\x3c\/code\x3e 显示内容。可以修改 \x3ccode\x3eel-option\x3c\/code\x3e 标签中内容来自定义模板。\x3c\/li\x3e\n\x3cli\x3e分组 —— 使用 option-group 组件来实现分组效果。\x3c\/li\x3e\n\x3cli\x3e搜索 —— 通过正则匹配搜索项，不符合搜索项的控制 v-show 隐藏\x3c\/li\x3e\n\x3cli\x3e创建条目 —— 在 \x3ccode\x3eselect\x3c\/code\x3e 中添加额外 \x3ccode\x3eoption\x3c\/code\x3e（一般 \x3ccode\x3eoption\x3c\/code\x3e 都是通过 \x3ccode\x3eslot\x3c\/code\x3e 插槽传递的），如允许创建条目，则显示这条 \x3ccode\x3eoption\x3c\/code\x3e ,\x3ccode\x3eoption\x3c\/code\x3e 的内容显示为查询内容。\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch1 id=\x22articleHeader2\x22\x3e从几个问题去看源码逻辑\x3c\/h1\x3e\n\x3ch2 id=\x22articleHeader3\x22\x3e如何实现基本单选功能？\x3c\/h2\x3e\n\x3cp\x3e分析下基本功能：点击 input，显示下拉菜单；鼠标选中一项 option，隐藏下拉菜单；input 中显示选中的结果。\x3cbr\x3e所以这里看下显示内容的 input 都有些什么事件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      @focus=\x26quot;handleFocus\x26quot; \/\/ 处理 焦点\n      @blur=\x26quot;handleBlur\x26quot; \/\/ 处理 焦点 离开\n      @keyup.native=\x26quot;debouncedOnInputChange\x26quot;\n      @keydown.native.down.stop.prevent=\x26quot;navigateOptions(\x27next\x27)\x26quot; \/\/ 向下按键，移动到下一个 option\n      @keydown.native.up.stop.prevent=\x26quot;navigateOptions(\x27prev\x27)\x26quot; \/\/ 向上按键，移动到上一个 option\n      @keydown.native.enter.prevent=\x26quot;selectOption\x26quot; \/\/ 回车按键，选中option\n      @keydown.native.esc.stop.prevent=\x26quot;visible = false\x26quot;  \/\/ esc按键，隐藏下拉框\n      @keydown.native.tab=\x26quot;visible = false\x26quot; \/\/ tab按键，跳转到下一个文本框，隐藏下拉框\n      @paste.native=\x26quot;debouncedOnInputChange\x26quot; \/\/ \n      @mouseenter.native=\x26quot;inputHovering = true\x26quot; \/\/ mouse enter 事件\n      @mouseleave.native=\x26quot;inputHovering = false\x26quot; \/\/ mouse leave 事件\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs less\x22\x3e\x3ccode\x3e      \x3cspan class=\x22hljs-variable\x22\x3e@focus\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22handleFocus\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理 焦点\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@blur\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22handleBlur\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理 焦点 离开\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@keyup\x3c\/span\x3e.native=\x3cspan class=\x22hljs-string\x22\x3e\x22debouncedOnInputChange\x22\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@keydown\x3c\/span\x3e.native.down.stop.prevent=\x3cspan class=\x22hljs-string\x22\x3e\x22navigateOptions(\x27next\x27)\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 向下按键，移动到下一个 option\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@keydown\x3c\/span\x3e.native.up.stop.prevent=\x3cspan class=\x22hljs-string\x22\x3e\x22navigateOptions(\x27prev\x27)\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 向上按键，移动到上一个 option\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@keydown\x3c\/span\x3e.native.enter.prevent=\x3cspan class=\x22hljs-string\x22\x3e\x22selectOption\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 回车按键，选中option\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@keydown\x3c\/span\x3e.native.esc.stop.prevent=\x3cspan class=\x22hljs-string\x22\x3e\x22visible = false\x22\x3c\/span\x3e  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ esc按键，隐藏下拉框\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@keydown\x3c\/span\x3e.native.tab=\x3cspan class=\x22hljs-string\x22\x3e\x22visible = false\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ tab按键，跳转到下一个文本框，隐藏下拉框\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@paste\x3c\/span\x3e.native=\x3cspan class=\x22hljs-string\x22\x3e\x22debouncedOnInputChange\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ \x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@mouseenter\x3c\/span\x3e.native=\x3cspan class=\x22hljs-string\x22\x3e\x22inputHovering = true\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ mouse enter 事件\x3c\/span\x3e\n      \x3cspan class=\x22hljs-variable\x22\x3e@mouseleave\x3c\/span\x3e.native=\x3cspan class=\x22hljs-string\x22\x3e\x22inputHovering = false\x22\x3c\/span\x3e \x3cspan class=\x22hljs-comment\x22\x3e\/\/ mouse leave 事件\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从上面的这些事件中可以知道：选中方法为 \x3ccode\x3eselectOption\x3c\/code\x3e（从英文字面意思都能知道~）；显示下拉框通过 \x3ccode\x3evisible\x3c\/code\x3e 属性控制；以及其他按键的一些功能。这里主要主要看看 \x3ccode\x3eselectOption\x3c\/code\x3e 方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      selectOption() {\n        if (!this.visible) {\n          this.toggleMenu();\n        } else {\n          if (this.options[this.hoverIndex]) {\n            this.handleOptionSelect(this.options[this.hoverIndex]);\n          }\n        }\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      selectOption() {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.toggleMenu();\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hoverIndex]) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleOptionSelect(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.options[\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hoverIndex]);\n          }\n        }\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e逻辑就是，如果下拉框未显示则执行 \x3ccode\x3etoggleMenu\x3c\/code\x3e 方法触发下拉框，如果已显示下拉框则处理选择 option 的过程。看看这个 \x3ccode\x3etoggleMenu\x3c\/code\x3e 方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      toggleMenu() {\n        if (!this.selectDisabled) {\n          this.visible = !this.visible;\n          if (this.visible) {\n            (this.$refs.input || this.$refs.reference).focus();\n          }\n        }\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      toggleMenu() {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectDisabled) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible = !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible;\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible) {\n            (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.reference).focus();\n          }\n        }\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其实就是控制下拉菜单的显示和隐藏。如果显示的时候定焦在 \x3ccode\x3einput\x3c\/code\x3e 和 \x3ccode\x3ereference\x3c\/code\x3e 上，它们其实就是单选和多选的 input 框（多选 input 定义了 \x3ccode\x3eref=\x22input\x22\x3c\/code\x3e 单选 input 定义了 \x3ccode\x3eref=\x22reference\x22\x3c\/code\x3e）。\x3cbr\x3e至此，下拉菜单的显示与隐藏解决了。然后我们去找 option 点击事件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/ 处理选项选中事件\n      handleOptionSelect(option) {\n        if (this.multiple) {\n          \/\/ 多选\n          const value = this.value.slice();\n          const optionIndex = this.getValueIndex(value, option.value);\n          if (optionIndex \x3e -1) {\n            \/\/ 已选中，从数组中移除\n            value.splice(optionIndex, 1);\n          } else if (this.multipleLimit \x3c= 0 || value.length \x3c this.multipleLimit) {\n            \/\/ 未选中，传入数组\n            value.push(option.value);\n          }\n          this.$emit(\x27input\x27, value);\n          this.emitChange(value);\n          if (option.created) {\n            this.query = \x27\x27;\n            this.handleQueryChange(\x27\x27);\n            this.inputLength = 20;\n          }\n          \/\/ 查询\n          if (this.filterable) this.$refs.input.focus();\n        } else {\n          \/\/ 单选\n          this.$emit(\x27input\x27, option.value);\n          this.emitChange(option.value);\n          this.visible = false;\n        }\n        \/\/ 渲染完成后\n        this.$nextTick(() =\x3e {\n          this.scrollToOption(option);\n          this.setSoftFocus();\n        });\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理选项选中事件\x3c\/span\x3e\n      handleOptionSelect(option) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple) {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 多选\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e value = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value.slice();\n          \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e optionIndex = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getValueIndex(value, option.value);\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (optionIndex \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 已选中，从数组中移除\x3c\/span\x3e\n            value.splice(optionIndex, \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multipleLimit \x26lt;= \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || value.length \x26lt; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multipleLimit) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 未选中，传入数组\x3c\/span\x3e\n            value.push(option.value);\n          }\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27input\x27\x3c\/span\x3e, value);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.emitChange(value);\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (option.created) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleQueryChange(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputLength = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\n          }\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 查询\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input.focus();\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单选\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27input\x27\x3c\/span\x3e, option.value);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.emitChange(option.value);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 渲染完成后\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$nextTick(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.scrollToOption(option);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setSoftFocus();\n        });\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e处理选中事件考虑了单选和多选两种情况。\x3cbr\x3e如果是多选，检索选中 option 是否在 \x3ccode\x3evalue\x3c\/code\x3e 数组中，有则移除、无则添加到 \x3ccode\x3evalue\x3c\/code\x3e 数组中。然后 \x3ccode\x3e$emit\x3c\/code\x3e 触发 \x3ccode\x3einput\x3c\/code\x3e 事件，执行 \x3ccode\x3eemitChange\x3c\/code\x3e 方法。如果 option 的 \x3ccode\x3ecreated\x3c\/code\x3e 为 true，则清空查询内容。\x3cbr\x3e如果是单选，\x3ccode\x3e$emit\x3c\/code\x3e 触发 \x3ccode\x3einput\x3c\/code\x3e 事件将选中值传递给父组件，执行 \x3ccode\x3eemitChange\x3c\/code\x3e 方法，最后隐藏下拉菜单。\x3cbr\x3e最后使用 \x3ccode\x3e$nextTick\x3c\/code\x3e 方法处理下界面。\x3cbr\x3e到这里，选中 option 后下拉菜单消失问题解决，只剩下显示结果到 input 中了。这个显示结果的过程是通过对 \x3ccode\x3evisible\x3c\/code\x3e 属性的监听来完成的（一开始以为在 \x3ccode\x3eemitChange\x3c\/code\x3e 结果发现那只是触发改变事件的）。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      visible(val) {\n        \/\/ 在下拉菜单隐藏时\n        if (!val) {\n          \/\/ 处理图标\n          this.handleIconHide();\n          \/\/ 广播下拉菜单销毁事件\n          this.broadcast(\x27ElSelectDropdown\x27, \x27destroyPopper\x27);\n          \/\/ 取消焦点\n          if (this.$refs.input) {\n            this.$refs.input.blur();\n          }\n          \/\/ 重置过程\n          this.query = \x27\x27;\n          this.previousQuery = null;\n          this.selectedLabel = \x27\x27;\n          this.inputLength = 20;\n          this.resetHoverIndex();\n          this.$nextTick(() =\x3e {\n            if (this.$refs.input \x26amp;\x26amp;\n              this.$refs.input.value === \x27\x27 \x26amp;\x26amp;\n              this.selected.length === 0) {\n              this.currentPlaceholder = this.cachedPlaceHolder;\n            }\n          });\n          \/\/ 如果不是多选，进行赋值现在 input 中\n          if (!this.multiple) {\n            \/\/ selected 为当前选中的 option\n            if (this.selected) {\n              if (this.filterable \x26amp;\x26amp; this.allowCreate \x26amp;\x26amp;\n                this.createdSelected \x26amp;\x26amp; this.createdOption) {\n                this.selectedLabel = this.createdLabel;\n              } else {\n                this.selectedLabel = this.selected.currentLabel;\n              }\n              \/\/ 查询结果\n              if (this.filterable) this.query = this.selectedLabel;\n            }\n          }\n        } else {\n          \/\/ 下拉菜单显示\n          \/\/ 处理图片显示\n          this.handleIconShow();\n          \/\/ 广播下拉菜单更新事件\n          this.broadcast(\x27ElSelectDropdown\x27, \x27updatePopper\x27);\n          \/\/ 处理查询事件\n          if (this.filterable) {\n            this.query = this.remote ? \x27\x27 : this.selectedLabel;\n            this.handleQueryChange(this.query);\n            if (this.multiple) {\n              this.$refs.input.focus();\n            } else {\n              if (!this.remote) {\n                this.broadcast(\x27ElOption\x27, \x27queryChange\x27, \x27\x27);\n                this.broadcast(\x27ElOptionGroup\x27, \x27queryChange\x27);\n              }\n              this.broadcast(\x27ElInput\x27, \x27inputSelect\x27);\n            }\n          }\n        }\n        \/\/ 触发 visible-change 事件\n        this.$emit(\x27visible-change\x27, val);\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      visible(val) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在下拉菜单隐藏时\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!val) {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理图标\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleIconHide();\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 广播下拉菜单销毁事件\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElSelectDropdown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27destroyPopper\x27\x3c\/span\x3e);\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 取消焦点\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input.blur();\n          }\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重置过程\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.previousQuery = \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputLength = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resetHoverIndex();\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$nextTick(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input \x26amp;\x26amp;\n              \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input.value === \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e \x26amp;\x26amp;\n              \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selected.length === \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e) {\n              \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentPlaceholder = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cachedPlaceHolder;\n            }\n          });\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 如果不是多选，进行赋值现在 input 中\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple) {\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ selected 为当前选中的 option\x3c\/span\x3e\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selected) {\n              \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.allowCreate \x26amp;\x26amp;\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createdSelected \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createdOption) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createdLabel;\n              } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selected.currentLabel;\n              }\n              \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 查询结果\x3c\/span\x3e\n              \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel;\n            }\n          }\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 下拉菜单显示\x3c\/span\x3e\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理图片显示\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleIconShow();\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 广播下拉菜单更新事件\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElSelectDropdown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27updatePopper\x27\x3c\/span\x3e);\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理查询事件\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remote ? \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleQueryChange(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query);\n            \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple) {\n              \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input.focus();\n            } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n              \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remote) {\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElOption\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27queryChange\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n                \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElOptionGroup\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27queryChange\x27\x3c\/span\x3e);\n              }\n              \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElInput\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27inputSelect\x27\x3c\/span\x3e);\n            }\n          }\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 触发 visible-change 事件\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27visible-change\x27\x3c\/span\x3e, val);\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e从 template 中可知，显示结果的 input 绑定的 \x3ccode\x3ev-model\x3c\/code\x3e 是 \x3ccode\x3eselectedLabel\x3c\/code\x3e，而 select 是通过获取下拉菜单的显示与隐藏事件来执行结果显示部分的功能的。最终 \x3ccode\x3eselectedLabel\x3c\/code\x3e 获得到了选中的 option 的 \x3ccode\x3elabel\x3c\/code\x3e 内容。\x3cbr\x3e这样，从 \x3cstrong\x3e点击-单选-显示\x3c\/strong\x3e 的流程就实现了。还是很简单的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e如何实现多选，多选选中后 option 右侧的勾以及 input 中的 tag 如何显示？\x3c\/h2\x3e\n\x3cp\x3e关于多选，在刚才讲单选的时候提及了一些了。所以有些代码就不贴出浪费篇幅了。具体逻辑如下：\x3cbr\x3e先点击 input 执行 \x3ccode\x3eselectOption\x3c\/code\x3e 方法显示下拉菜单，然后点击下拉菜单中的 option，执行 \x3ccode\x3ehandleOptionSelect\x3c\/code\x3e 方法将 option 的值都传给 \x3ccode\x3evalue\x3c\/code\x3e 数组。此时 \x3ccode\x3evalue\x3c\/code\x3e 数组改变，触发 watch 中的 \x3ccode\x3evalue\x3c\/code\x3e 变化监听方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      value(val) {\n        \/\/ 多选\n        if (this.multiple) {\n          this.resetInputHeight();\n          if (val.length \x3e 0 || (this.$refs.input \x26amp;\x26amp; this.query !== \x27\x27)) {\n            this.currentPlaceholder = \x27\x27;\n          } else {\n            this.currentPlaceholder = this.cachedPlaceHolder;\n          }\n          if (this.filterable \x26amp;\x26amp; !this.reserveKeyword) {\n            this.query = \x27\x27;\n            this.handleQueryChange(this.query);\n          }\n        }\n        this.setSelected();\n        \/\/ 非多选查询\n        if (this.filterable \x26amp;\x26amp; !this.multiple) {\n          this.inputLength = 20;\n        }\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      value(val) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 多选\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resetInputHeight();\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (val.length \x26gt; \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e || (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query !== \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e)) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentPlaceholder = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentPlaceholder = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.cachedPlaceHolder;\n          }\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable \x26amp;\x26amp; !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.reserveKeyword) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query = \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.handleQueryChange(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query);\n          }\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.setSelected();\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 非多选查询\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable \x26amp;\x26amp; !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputLength = \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\n        }\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e以上代码关键是执行了 \x3ccode\x3esetSelected\x3c\/code\x3e 方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/ 设置选择项\n      setSelected() {\n        \/\/ 单选\n        if (!this.multiple) {\n          let option = this.getOption(this.value);\n          \/\/ created 是指创建出来的 option，这里指 allow-create 创建的 option 项\n          if (option.created) {\n            this.createdLabel = option.currentLabel;\n            this.createdSelected = true;\n          } else {\n            this.createdSelected = false;\n          }\n          this.selectedLabel = option.currentLabel;\n          this.selected = option;\n          if (this.filterable) this.query = this.selectedLabel;\n          return;\n        }\n        \/\/ 遍历获取 option\n        let result = [];\n        if (Array.isArray(this.value)) {\n          this.value.forEach(value =\x3e {\n            result.push(this.getOption(value));\n          });\n        }\n        \/\/ 赋值\n        this.selected = result;\n        this.$nextTick(() =\x3e {\n          \/\/ 重置 input 高度\n          this.resetInputHeight();\n        });\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置选择项\x3c\/span\x3e\n      setSelected() {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 单选\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple) {\n          \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e option = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getOption(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value);\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ created 是指创建出来的 option，这里指 allow-create 创建的 option 项\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (option.created) {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createdLabel = option.currentLabel;\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createdSelected = \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e;\n          } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n            \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.createdSelected = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n          }\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel = option.currentLabel;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selected = option;\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.query = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectedLabel;\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 遍历获取 option\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e result = [];\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.isArray(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value)) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3evalue\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n            result.push(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.getOption(value));\n          });\n        }\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 赋值\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selected = result;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$nextTick(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 重置 input 高度\x3c\/span\x3e\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resetInputHeight();\n        });\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e可以看到如果是多选，那么将 \x3ccode\x3evalue\x3c\/code\x3e 数组遍历，获取相应的 \x3ccode\x3eoption\x3c\/code\x3e 值，传给 \x3ccode\x3eselected\x3c\/code\x3e。而多选界面其实就是对于这个 \x3ccode\x3eselected\x3c\/code\x3e 的 v-for 遍历显示。显示的标签使用的是 element 的另外一个组件 \x3ca href=\x22http:\/\/element-cn.eleme.io\/#\/zh-CN\/component\/tag\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eel-tag\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22        \x3cel-tag\n          v-for=\x26quot;item in selected\x26quot;\n          :key=\x26quot;getValueKey(item)\x26quot;\x3e\n          \x3cspan class=\x26quot;el-select__tags-text\x26quot;\x3e\x22{{\x22 item.currentLabel \x22}}\x22\x3c\/span\x3e\n        \x3c\/el-tag\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3ev-for\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22item in selected\x22\x3c\/span\x3e\n          \x3cspan class=\x22hljs-attr\x22\x3e:key\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22getValueKey(item)\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n          \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select__tags-text\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22 item.currentLabel \x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n        \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eel-tag\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这里顺便提一句： option 的 \x3ccode\x3ecreated\x3c\/code\x3e 参数用于标识是 \x3ccode\x3eselect\x3c\/code\x3e 组件中创建的那个用于创建条目的 \x3ccode\x3eoption\x3c\/code\x3e。而从 slot 插槽传入的 option 是不用传 \x3ccode\x3ecreated\x3c\/code\x3e 参数的。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader5\x22\x3e如何实现搜索功能？\x3c\/h2\x3e\n\x3cp\x3e从 template 中可知，select 有两个 input，一个用于显示结果，一个则用于查询搜索。我们来看下搜索内容的 input 文本框如何实现搜索功能：\x3cbr\x3e在 input 中有 \x3ccode\x3e@input=\x22e =\x26gt; handleQueryChange(e.target.value)\x22\x3c\/code\x3e这么一段代码。所以，handleQueryChange 方法就是关键所在了。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/ 处理查询改变\n      handleQueryChange(val) {\n        if (this.previousQuery === val) return;\n        if (\n          this.previousQuery === null \x26amp;\x26amp;\n          (typeof this.filterMethod === \x27function\x27 || typeof this.remoteMethod === \x27function\x27)\n        ) {\n          this.previousQuery = val;\n          return;\n        }\n        this.previousQuery = val;\n        this.$nextTick(() =\x3e {\n          if (this.visible) this.broadcast(\x27ElSelectDropdown\x27, \x27updatePopper\x27);\n        });\n        this.hoverIndex = -1;\n        if (this.multiple \x26amp;\x26amp; this.filterable) {\n          const length = this.$refs.input.value.length * 15 \x2b 20;\n          this.inputLength = this.collapseTags ? Math.min(50, length) : length;\n          this.managePlaceholder();\n          this.resetInputHeight();\n        }\n        if (this.remote \x26amp;\x26amp; typeof this.remoteMethod === \x27function\x27) {\n          this.hoverIndex = -1;\n          this.remoteMethod(val);\n        } else if (typeof this.filterMethod === \x27function\x27) {\n          this.filterMethod(val);\n          this.broadcast(\x27ElOptionGroup\x27, \x27queryChange\x27);\n        } else {\n          this.filteredOptionsCount = this.optionsCount;\n          this.broadcast(\x27ElOption\x27, \x27queryChange\x27, val);\n          this.broadcast(\x27ElOptionGroup\x27, \x27queryChange\x27);\n        }\n        if (this.defaultFirstOption \x26amp;\x26amp; (this.filterable || this.remote) \x26amp;\x26amp; this.filteredOptionsCount) {\n          this.checkDefaultFirstOption();\n        }\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理查询改变\x3c\/span\x3e\n      handleQueryChange(val) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.previousQuery === val) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.previousQuery === \x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e \x26amp;\x26amp;\n          (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterMethod === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e || \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remoteMethod === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e)\n        ) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.previousQuery = val;\n          \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e;\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.previousQuery = val;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$nextTick(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3e()\x3c\/span\x3e =\x26gt;\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElSelectDropdown\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27updatePopper\x27\x3c\/span\x3e);\n        });\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hoverIndex = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable) {\n          \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e length = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$refs.input.value.length * \x3cspan class=\x22hljs-number\x22\x3e15\x3c\/span\x3e \x2b \x3cspan class=\x22hljs-number\x22\x3e20\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputLength = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.collapseTags ? \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.min(\x3cspan class=\x22hljs-number\x22\x3e50\x3c\/span\x3e, length) : length;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.managePlaceholder();\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.resetInputHeight();\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remote \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remoteMethod === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.hoverIndex = \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remoteMethod(val);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3etypeof\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterMethod === \x3cspan class=\x22hljs-string\x22\x3e\x27function\x27\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterMethod(val);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElOptionGroup\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27queryChange\x27\x3c\/span\x3e);\n        } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filteredOptionsCount = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.optionsCount;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElOption\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27queryChange\x27\x3c\/span\x3e, val);\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.broadcast(\x3cspan class=\x22hljs-string\x22\x3e\x27ElOptionGroup\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27queryChange\x27\x3c\/span\x3e);\n        }\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.defaultFirstOption \x26amp;\x26amp; (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remote) \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filteredOptionsCount) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.checkDefaultFirstOption();\n        }\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e其中，\x3ccode\x3eremoteMethod\x3c\/code\x3e 和 \x3ccode\x3efilterMethod\x3c\/code\x3e 方法是自定义的远程查询和本地过滤方法。如果没有自定义的这两个方法，则会触发广播给 \x3ccode\x3eoption\x3c\/code\x3e 和 \x3ccode\x3eoption-group\x3c\/code\x3e 组件 \x3ccode\x3equeryChange\x3c\/code\x3e 方法。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/ option.vue\n      queryChange(query) {\n        let parsedQuery = String(query).replace(\/(\\^|\\(|\\)|\\[|\\]|\\$|\\*|\\\x2b|\\.|\\?|\\\\|\\{|\\}|\\|)\/g, \x27\\\\$1\x27);\n        \/\/ 匹配字符决定是否显示当前option\n        this.visible = new RegExp(parsedQuery, \x27i\x27).test(this.currentLabel) || this.created;\n        if (!this.visible) {\n          this.select.filteredOptionsCount--;\n        }\n      }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ option.vue\x3c\/span\x3e\n      queryChange(query) {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e parsedQuery = \x3cspan class=\x22hljs-built_in\x22\x3eString\x3c\/span\x3e(query).replace(\x3cspan class=\x22hljs-regexp\x22\x3e\/(\\^|\\(|\\)|\\[|\\]|\\$|\\*|\\\x2b|\\.|\\?|\\\\|\\{|\\}|\\|)\/g\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\\\\$1\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 匹配字符决定是否显示当前option\x3c\/span\x3e\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eRegExp\x3c\/span\x3e(parsedQuery, \x3cspan class=\x22hljs-string\x22\x3e\x27i\x27\x3c\/span\x3e).test(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.currentLabel) || \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.created;\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.select.filteredOptionsCount--;\n        }\n      }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3eoption 中通过正则匹配决定是否隐藏当前 option 组件，而 option-group 通过获取子组件，判断如果有子组件是可见的则显示，否则隐藏。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/ option-group.vue\n      queryChange() {\n        this.visible = this.$children \x26amp;\x26amp;\n          Array.isArray(this.$children) \x26amp;\x26amp;\n          this.$children.some(option =\x3e option.visible === true);\n      }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ option-group.vue\x3c\/span\x3e\n      queryChange() {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$children \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.isArray(\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$children) \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$children.some(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-params\x22\x3eoption\x3c\/span\x3e =\x26gt;\x3c\/span\x3e option.visible === \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n      }\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e所以，其实 option 和 option-group 在搜索的时候只是隐藏掉了不匹配的内容而已。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader6\x22\x3e下拉菜单的显示和隐藏效果是如何实现的？下拉菜单本质是什么东西？\x3c\/h2\x3e\n\x3cp\x3e下拉菜单是通过 \x3ca href=\x22https:\/\/cn.vuejs.org\/v2\/api\/#transition\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3etransition\x3c\/a\x3e 来实现过渡动画的。\x3cbr\x3e下拉菜单 \x3ccode\x3eel-select-menu\x3c\/code\x3e 本质上就是一个 div 容器而已。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22  \x3cdiv\n    class=\x26quot;el-select-dropdown el-popper\x26quot;\n    :class=\x26quot;[{ \x27is-multiple\x27: $parent.multiple }, popperClass]\x26quot;\n    :style=\x26quot;{ minWidth: minWidth }\x26quot;\x3e\n    \x3cslot\x3e\x3c\/slot\x3e\n  \x3c\/div\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22el-select-dropdown el-popper\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22[{ \x27is-multiple\x27: $parent.multiple }, popperClass]\x22\x3c\/span\x3e\n    \x3cspan class=\x22hljs-attr\x22\x3e:style\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22{ minWidth: minWidth }\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e另外，在代码中经常出现的通知下拉菜单显示和隐藏的广播在 \x3ccode\x3eel-select-menu\x3c\/code\x3e 的 \x3ccode\x3emounted\x3c\/code\x3e 方法中接收使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    mounted() {\n      this.referenceElm = this.$parent.$refs.reference.$el;\n      this.$parent.popperElm = this.popperElm = this.$el;\n      this.$on(\x27updatePopper\x27, () =\x3e {\n        if (this.$parent.visible) this.updatePopper();\n      });\n      this.$on(\x27destroyPopper\x27, this.destroyPopper);\n    }\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e    mounted() {\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.referenceElm = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$parent.$refs.reference.$el;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$parent.popperElm = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.popperElm = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$el;\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$on(\x3cspan class=\x22hljs-string\x22\x3e\x27updatePopper\x27\x3c\/span\x3e, () =\x26gt; {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$parent.visible) \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.updatePopper();\n      });\n      \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$on(\x3cspan class=\x22hljs-string\x22\x3e\x27destroyPopper\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.destroyPopper);\n    }\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader7\x22\x3e创建条目如何实现？\x3c\/h2\x3e\n\x3cp\x3e上文中提到过，就是在 select 中默认藏了一条 option，当创建条目时显示这个 option 并显示创建内容。点击这个 option 就可以把创建的内容添加到显示结果的 input 上了。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader8\x22\x3e如何展示远程数据？\x3c\/h2\x3e\n\x3cp\x3e通过为 select 设置 \x3ccode\x3eremote\x3c\/code\x3e 和 \x3ccode\x3eremote-method\x3c\/code\x3e 属性来获取远程数据。\x3ccode\x3eremote-method\x3c\/code\x3e 方法最终将数据赋值给 option 的 v-model 绑定数组数据将结果显示出来即可。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader9\x22\x3e清空按钮显示和点击事件呢？\x3c\/h2\x3e\n\x3cp\x3e在显示结果的 input 文本框中有一个 \x3ccode\x3e\x26lt;i\x26gt;\x3c\/code\x3e 标签，用于显示图标。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \x3c!-- 用户显示清空和向下箭头 --\x3e\n      \x3ci slot=\x26quot;suffix\x26quot;\n       :class=\x26quot;[\x27el-select__caret\x27, \x27el-input__icon\x27, \x27el-icon-\x27 \x2b iconClass]\x26quot;\n       @click=\x26quot;handleIconClick\x26quot;\n      \x3e\x3c\/i\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\x26lt;!-- 用户显示清空和向下箭头 --\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ei\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eslot\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22suffix\x22\x3c\/span\x3e\n       \x3cspan class=\x22hljs-attr\x22\x3e:class\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22[\x27el-select__caret\x27, \x27el-input__icon\x27, \x27el-icon-\x27 \x2b iconClass]\x22\x3c\/span\x3e\n       @\x3cspan class=\x22hljs-attr\x22\x3eclick\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22handleIconClick\x22\x3c\/span\x3e\n      \x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ei\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终 input 右侧显示什么图标由 \x3ccode\x3eiconClass\x3c\/code\x3e 决定，其中 \x3ccode\x3ecircle-close\x3c\/code\x3e 就是圆形查查，即清空按钮~\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      iconClass() {\n        let criteria = this.clearable \x26amp;\x26amp;\n          !this.selectDisabled \x26amp;\x26amp;\n          this.inputHovering \x26amp;\x26amp;\n          !this.multiple \x26amp;\x26amp;\n          this.value !== undefined \x26amp;\x26amp;\n          this.value !== \x27\x27;\n        return criteria ? \x27circle-close is-show-close\x27 : (this.remote \x26amp;\x26amp; this.filterable ? \x27\x27 : \x27arrow-up\x27);\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      iconClass() {\n        \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e criteria = \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.clearable \x26amp;\x26amp;\n          !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.selectDisabled \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.inputHovering \x26amp;\x26amp;\n          !\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.multiple \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value !== \x3cspan class=\x22hljs-literal\x22\x3eundefined\x3c\/span\x3e \x26amp;\x26amp;\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.value !== \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e criteria ? \x3cspan class=\x22hljs-string\x22\x3e\x27circle-close is-show-close\x27\x3c\/span\x3e : (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.remote \x26amp;\x26amp; \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.filterable ? \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e : \x3cspan class=\x22hljs-string\x22\x3e\x27arrow-up\x27\x3c\/span\x3e);\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e\x3ccode\x3ehandleIconClick\x3c\/code\x3e 方法：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22      \/\/ 处理图标点击事件（删除按钮）\n      handleIconClick(event) {\n        if (this.iconClass.indexOf(\x27circle-close\x27) \x3e -1) {\n          this.deleteSelected(event);\n        }\n      },\n      \/\/ 删除选中\n      deleteSelected(event) {\n        event.stopPropagation();\n        this.$emit(\x27input\x27, \x27\x27);\n        this.emitChange(\x27\x27);\n        this.visible = false;\n        this.$emit(\x27clear\x27);\n      },\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22js\x22\x3e      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 处理图标点击事件（删除按钮）\x3c\/span\x3e\n      handleIconClick(event) {\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.iconClass.indexOf(\x3cspan class=\x22hljs-string\x22\x3e\x27circle-close\x27\x3c\/span\x3e) \x26gt; \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e) {\n          \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.deleteSelected(event);\n        }\n      },\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 删除选中\x3c\/span\x3e\n      deleteSelected(event) {\n        event.stopPropagation();\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27input\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.emitChange(\x3cspan class=\x22hljs-string\x22\x3e\x27\x27\x3c\/span\x3e);\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.visible = \x3cspan class=\x22hljs-literal\x22\x3efalse\x3c\/span\x3e;\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.$emit(\x3cspan class=\x22hljs-string\x22\x3e\x27clear\x27\x3c\/span\x3e);\n      },\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e最终，清空只是将文本清空掉并且关闭下拉菜单。其实当再次打开 select 的时候，option 还是选中在之前选中的那个位置，即 \x3ccode\x3eHoverIndex\x3c\/code\x3e 没有变为 -1，不知道算不算 bug。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader10\x22\x3eoption 的自定义模板是如何实现的？\x3c\/h2\x3e\n\x3cp\x3e很简单，使用了 slot 插槽。并且在 slot 中定义了默认显示方式。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22    \x3cslot\x3e\n      \x3cspan\x3e\x22{{\x22 currentLabel \x22}}\x22\x3c\/span\x3e\n    \x3c\/slot\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x22{{\x22 currentLabel \x22}}\x22\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3espan\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eslot\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch1 id=\x22articleHeader11\x22\x3e最后\x3c\/h1\x3e\n\x3cp\x3e第一次尝试用问题取代主题来写博客，这样看着中心是不是更明确一些？\x3cbr\x3e最后，说下看完 select 组件的感受：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3eelement 通过自定义的广播方法进行父子组件间的通信。（好像以前Vue也有这个功能，后来弃用了。）\x3c\/li\x3e\n\x3cli\x3e再复杂的组件都是由一个个基础的组件拼起来的。\x3c\/li\x3e\n\x3cli\x3eselect 功能还是挺复杂的，加上子组件 1000\x2b 行代码了。本文只是讲了基本功能的实现，值得深入学习。\x3c\/li\x3e\n\x3cli\x3e学习了高手写组件的方式和写法~之后在自己写组件的时候可以参考。\x3c\/li\x3e\n\x3cli\x3e方法、参数命名非常规范，一眼就能看懂具体用法。\x3c\/li\x3e\n\x3cli\x3e知道了 \x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Array\/some\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eArray.some()\x3c\/a\x3e 方法~\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3cp\x3e好吧，说好了一天写出来，结果断断续续花了三天才完成。有点高估自己能力啦~\x3cbr\x3e说下之后的Vue实验室博客计划：计划再找两个复杂的 element 组件来学习，最后写一篇总结博客。然后试着自己去创建几个 UI 组件，学以致用。\x3c\/p\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>element 源码学习三 —— select 源码学习</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014098739">https://segmentfault.com/a/1190000014098739</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/z82vbdz4ae/" target="_blank">https://alili.tech/archive/z82vbdz4ae/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>