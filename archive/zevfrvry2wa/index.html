<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="Mocha中文文档"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>Mocha中文文档 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/zevfrvry2wa/",
				"appid": "1613049289050283", 
				"title": "Mocha中文文档 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-30T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/0yntvw8o53q/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/mkzm575njy9/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&text=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&text=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&title=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&is_video=false&description=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&title=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&title=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&title=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzevfrvry2wa%2f&title=Mocha%e4%b8%ad%e6%96%87%e6%96%87%e6%a1%a3"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">Mocha中文文档</h1><div class="meta"><div class="postdate"><time datetime="2018-12-30" itemprop="datePublished">2018-12-30</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3emocha中文文档\x3c\/h2\x3e\n\x3cblockquote\x3e\x3cp\x3e这个是对\x3ca href=\x22https:\/\/mochajs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3emocha\x3c\/a\x3e文档的翻译，都是我一个字一个字敲出来的。水平有限，激情无限，欢迎大家批评指正。文档我也放在了我的\x3ca href=\x22https:\/\/github.com\/2json\/mocha-in-chinese\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3egithub\x3c\/a\x3e上,后续，我会添加一些例子进去，欢迎大家关注和贡献。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader1\x22\x3e安装\x3c\/h3\x3e\n\x3cp\x3e使用\x3ca href=\x22https:\/\/npmjs.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3enpm\x3c\/a\x3e全局安装：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install --global mocha\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install --global mocha\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也可以作为项目的依赖进行安装：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install --save-dev mocha\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm install --save-dev mocha\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e安装Mocha \x26gt;= v3.0.0，npm的版本应该\x26gt;=v1.4.0。除此，确保使用Node.js的版本\x26gt;=v0.10来运行Mocha\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3eMocha也可以使用\x3ca href=\x22http:\/\/bower.io\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eBower\x3c\/a\x3e进行安装(\x3ccode\x3ebower install mocha\x3c\/code\x3e)，也可以从\x3ca href=\x22https:\/\/cdnjs.com\/libraries\/mocha\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ecdnjs\x3c\/a\x3e上获取。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3eGEETING STARTED\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm install mocha\n$ mkdir test\n$ $EDITOR test\/test.js # 或者使用你喜欢的编辑器\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e$ npm install mocha\n$ mkdir \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e\n$ \x3cspan class=\x22hljs-variable\x22\x3e$EDITOR\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e\/test.js \x3cspan class=\x22hljs-comment\x22\x3e# 或者使用你喜欢的编辑器\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在编辑器中输入：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var assert = require(\x27assert\x27)\ndescribe(\x27Array\x27, function() {\n    describe(\x27#indexOf()\x27, function() {\n        it(\x27should return -1 when the value is not present\x27, function() {\n            assert.equal(-1, [1, 2, 3].indexOf(4))\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e assert = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27assert\x27\x3c\/span\x3e)\ndescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 when the value is not present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            assert.equal(\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e, [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e))\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后在终端中运行：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ .\/node_modules\/mocha\/bin\/mocha\n\nArray\n    #indexOf()\n      ✓ should return -1 when the value is not present\n\n\n  1 passing (9ms)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e$ .\/node_modules\/mocha\/bin\/mocha\n\nArray\n    \x3cspan class=\x22hljs-comment\x22\x3e#indexOf()\x3c\/span\x3e\n      ✓ should \x3cspan class=\x22hljs-built_in\x22\x3ereturn\x3c\/span\x3e -1 when the value is not present\n\n\n  1 passing (9ms)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在\x3ccode\x3epackage.json\x3c\/code\x3e中设置一个测试脚本：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x26quot;scripts\x26quot;:{\n    \x26quot;test\x26quot;: \x26quot;mocha\x26quot;\n}\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-string\x22\x3e\x22scripts\x22\x3c\/span\x3e:{\n    \x3cspan class=\x22hljs-string\x22\x3e\x22test\x22\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x22mocha\x22\x3c\/span\x3e\n}\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e然后运行：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ npm test\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ npm \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3eASSERTIONS(断言)\x3c\/h3\x3e\n\x3cp\x3eMocha允许你使用任意你喜欢的断言库，在上面的例子中，我们使用了Node.js内置的\x3ca href=\x22https:\/\/nodejs.org\/api\/assert.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eassert\x3c\/a\x3e模块作为断言。如果能够抛出一个错误，它就能够运行。这意味着你能使用下面的这些仓库，比如：\x3c\/p\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/shouldjs\/should.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eshould.js\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/LearnBoost\/expect.js\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexpect.js\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/chaijs.com\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3echai\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/visionmedia\/better-assert\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ebetter-assert\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22http:\/\/unexpected.js.org\/\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eunexpected\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader4\x22\x3eASYNCHRONOUS CODE(异步代码)\x3c\/h3\x3e\n\x3cp\x3e使用mocha测试异步代码是再简单不过了。只需要在测试完成的时候调用一下回调函数即可。通过添加一个回调函数(通常命名为\x3ccode\x3edone\x3c\/code\x3e)给\x3ccode\x3eit()\x3c\/code\x3e方法，Mocha就会知道，它应该等这个函数被调用的时候才能完成测试。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27User\x27, function() {\n    describe(\x27#save()\x27, function() {\n        it(\x27should save without error\x27, function() {\n            var user = new User(\x27Luna\x27)\n            user.save(function(err) {\n                if(err) done(err);\n                else done()\n            })\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#save()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should save without error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e user = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User(\x3cspan class=\x22hljs-string\x22\x3e\x27Luna\x27\x3c\/span\x3e)\n            user.save(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n                \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(err) done(err);\n                \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e done()\n            })\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e也可以让事情变得更简单，因为\x3ccode\x3edone()\x3c\/code\x3e函数接收一个err，所以，我们可以直接按照下面的使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27User\x27, function() {\n    describe(\x27#save()\x27, function() {\n        it(\x27should save without error\x27, function(done) {\n            var user = new User(\x27Luna\x27)\n            user.save(done)\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#save()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should save without error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e user = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User(\x3cspan class=\x22hljs-string\x22\x3e\x27Luna\x27\x3c\/span\x3e)\n            user.save(done)\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eWORKING WITH PROMISES(使用promises)\x3c\/h4\x3e\n\x3cp\x3e同时，除了使用\x3ccode\x3edone()\x3c\/code\x3e回调函数，你也可以返回一个\x3ca href=\x22https:\/\/developer.mozilla.org\/en-US\/docs\/Web\/JavaScript\/Reference\/Global_Objects\/Promise\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3ePromise\x3c\/a\x3e。这种方式对于测试那些返回promies的方法是实用的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22beforeEach(function() {\n  return db.clear()\n    .then(function() {\n      return db.save([tobi, loki, jane]);\n    });\n});\n\ndescribe(\x27#find()\x27, function() {\n  it(\x27respond with matching records\x27, function() {\n    return db.find({ type: \x27User\x27 }).should.eventually.have.length(3);\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ebeforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e db.clear()\n    .then(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e db.save([tobi, loki, jane]);\n    });\n});\n\ndescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27#find()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27respond with matching records\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e db.find({ \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e }).should.eventually.have.length(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e后面的例子使用了\x3ca href=\x22https:\/\/www.npmjs.com\/package\/chai-as-promised\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eChai as Promised\x3c\/a\x3e 进行promise断言\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e在Mocha\x26gt;=3.0.0版本中，返回一个promise的同时，调用了done函数。将会导致一个异常，下面是一个常见的错误：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22const assert = require(\x27assert\x27)\n\nit(\x27should complete this test\x27, function (done) {\n    return new Promise(function (resolve) {\n        assert.ok(true)\n        resolve()\n    })\n    .then(done)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e assert = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27assert\x27\x3c\/span\x3e)\n\nit(\x3cspan class=\x22hljs-string\x22\x3e\x27should complete this test\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3ePromise\x3c\/span\x3e(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3eresolve\x3c\/span\x3e) \x3c\/span\x3e{\n        assert.ok(\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e)\n        resolve()\n    })\n    .then(done)\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个测试会失败，错误信息为：\x3ccode\x3e Error: Resolution method is overspecified. Specify a callback *or* return a Promise; not both.\x3c\/code\x3e\x3cbr\x3e而比v3.0.0更老的版本中，调用done函数会被忽略。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader5\x22\x3eUSING ASYNC \/ AWAIT\x3c\/h3\x3e\n\x3cp\x3e如果你的js运行环境支持\x3ca href=\x22https:\/\/developer.mozilla.org\/en\/docs\/Web\/JavaScript\/Reference\/Statements\/async_function\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3easync\/await\x3c\/a\x3e，你也可以像下面这样写异步测试。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22beforeEach(async function() {\n  await db.clear();\n  await db.save([tobi, loki, jane]);\n});\n\ndescribe(\x27#find()\x27, function() {\n  it(\x27responds with matching records\x27, async function() {\n    const users = await db.find({ type: \x27User\x27 });\n    users.should.have.length(3);\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ebeforeEach(\x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e db.clear();\n  \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e db.save([tobi, loki, jane]);\n});\n\ndescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27#find()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27responds with matching records\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-keyword\x22\x3easync\x3c\/span\x3e \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e users = \x3cspan class=\x22hljs-keyword\x22\x3eawait\x3c\/span\x3e db.find({ \x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e });\n    users.should.have.length(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader6\x22\x3eSYNCHRONOUS CODE\x3c\/h3\x3e\n\x3cp\x3e当测试同步代码的时候，可以省略参数中的回调函数，Mocha会自动的测试下面的代码。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function () {\n    describe(\x27#indexOf()\x27, function () {\n        it(\x27should return -1 when the value is not present\x27, function() {\n          [1,2,3].indexOf(5).should.equal(-1);\n          [1,2,3].indexOf(0).should.equal(-1);\n        });\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22hljs lisp\x22\x3e\x3ccode class=\x22javascrit\x22\x3edescribe(\x27Array\x27, function () {\n    describe(\x27#indexOf()\x27, function () {\n        it(\x27should return \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e when the value is not present\x27, function() {\n          [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-name\x22\x3e-1\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n          [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-name\x22\x3e-1\x3c\/span\x3e)\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n        })\x3cspan class=\x22hljs-comment\x22\x3e;\x3c\/span\x3e\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader7\x22\x3eARROW FUNCTIONS\x3c\/h3\x3e\n\x3cp\x3e向Mocha传递箭头函数是不好的，由于this的词法作用域的问题，箭头函数是不能够访问mocha的上下文的。例如，由于箭头函数本身的机制，下面的代码会失败。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27my suite\x27, () =\x3e {\n  it(\x27my test\x27, () =\x3e {\n    \/\/ should set the timeout of this test to 1000 ms; instead will fail\n    this.timeout(1000);\n    assert.ok(true);\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27my suite\x27\x3c\/span\x3e, () =\x26gt; {\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27my test\x27\x3c\/span\x3e, () =\x26gt; {\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ should set the timeout of this test to 1000 ms; instead will fail\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.timeout(\x3cspan class=\x22hljs-number\x22\x3e1000\x3c\/span\x3e);\n    assert.ok(\x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e);\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e如果你不需要使用mocha的上下文，可以使用箭头函数。然而，如果你以后需要使用这个上下文的话，重构会变得十分困难。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader8\x22\x3eHOOKS\x3c\/h3\x3e\n\x3cp\x3e鉴于默认使用BDD风格的接口，Mocha提供了一些钩子函数:\x3ccode\x3ebefore()\x3c\/code\x3e,\x3ccode\x3eafter()\x3c\/code\x3e,\x3ccode\x3ebeforeEach()\x3c\/code\x3e和\x3ccode\x3eafterEach()\x3c\/code\x3e。这些钩子函数可以用于设置测试的先决条件或者对测试进行清理。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27hooks\x27, function() {\n    before(function() {\n        \/\/ 在这个区块内的所有测试之前运行\n    })\n    after(function () {\n        \/\/ 在这个区块内的所有测试之后运行\n    })\n    beforeEach(function () {\n        \/\/ 在这个区块内的每个测试运行之前运行\n    })\n    afterEach(function () {\n        \/\/ 在这个区块内的每个测试之后运行\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27hooks\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    before(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这个区块内的所有测试之前运行\x3c\/span\x3e\n    })\n    after(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这个区块内的所有测试之后运行\x3c\/span\x3e\n    })\n    beforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这个区块内的每个测试运行之前运行\x3c\/span\x3e\n    })\n    afterEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 在这个区块内的每个测试之后运行\x3c\/span\x3e\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e测试可以出现在before,after或者和你的钩子函数交替出现。钩子函数会按照它们被定义的顺序运行。一般就是，\x3ccode\x3ebefore()(只运行一次)\x3c\/code\x3e-\x26gt;\x3ccode\x3ebeforeEach()\x3c\/code\x3e-\x26gt;\x3ccode\x3eafterEach()\x3c\/code\x3e-\x26gt;\x3ccode\x3eafter()(只运行一次)\x3c\/code\x3e。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader9\x22\x3eDESCRIBING HOOKS\x3c\/h3\x3e\n\x3cp\x3e任何钩子函数在执行的时候都可以传递一个可选的描述信息，可以更容易地准确指出测试中的错误。如果钩子函数使用了命名的回调函数，则其名字会被作为默认的描述信息。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22beforeEach(function () {\n    \/\/ beforeEach钩子函数(没有任何的描述信息)\n})\nbeforeEach(function namedFn() {\n    \/\/ beforeEach:namedFn会被当作描述信息\n})\nbeforeEach(\x27some description\x27, function () {\n    \/\/ beforeEach:some description(提供了描述信息)\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ebeforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ beforeEach钩子函数(没有任何的描述信息)\x3c\/span\x3e\n})\nbeforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3enamedFn\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ beforeEach:namedFn会被当作描述信息\x3c\/span\x3e\n})\nbeforeEach(\x3cspan class=\x22hljs-string\x22\x3e\x27some description\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ beforeEach:some description(提供了描述信息)\x3c\/span\x3e\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader10\x22\x3eASYNCHRONOUS HOOKS\x3c\/h3\x3e\n\x3cp\x3e所有的钩子(\x3ccode\x3ebefore()\x3c\/code\x3e,\x3ccode\x3eafter()\x3c\/code\x3e,\x3ccode\x3ebeforeEach()\x3c\/code\x3e,\x3ccode\x3eafterEach()\x3c\/code\x3e)可以是同步的也可以是异步的，其行为就像是普通的测试用例。例如，你希望在每个测试之前，向数据库中填充一些内容。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Connection\x27, function() {\n  var db = new Connection,\n    tobi = new User(\x27tobi\x27),\n    loki = new User(\x27loki\x27),\n    jane = new User(\x27jane\x27);\n\n  beforeEach(function(done) {\n    db.clear(function(err) {\n      if (err) return done(err);\n      db.save([tobi, loki, jane], done);\n    });\n  });\n\n  describe(\x27#find()\x27, function() {\n    it(\x27respond with matching records\x27, function(done) {\n      db.find({type: \x27User\x27}, function(err, res) {\n        if (err) return done(err);\n        res.should.have.length(3);\n        done();\n      });\n    });\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Connection\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e db = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Connection,\n    tobi = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User(\x3cspan class=\x22hljs-string\x22\x3e\x27tobi\x27\x3c\/span\x3e),\n    loki = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User(\x3cspan class=\x22hljs-string\x22\x3e\x27loki\x27\x3c\/span\x3e),\n    jane = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e User(\x3cspan class=\x22hljs-string\x22\x3e\x27jane\x27\x3c\/span\x3e);\n\n  beforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n    db.clear(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e done(err);\n      db.save([tobi, loki, jane], done);\n    });\n  });\n\n  describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#find()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    it(\x3cspan class=\x22hljs-string\x22\x3e\x27respond with matching records\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n      db.find({\x3cspan class=\x22hljs-attr\x22\x3etype\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27User\x27\x3c\/span\x3e}, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eerr, res\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (err) \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e done(err);\n        res.should.have.length(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n        done();\n      });\n    });\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader11\x22\x3eROOT-LEVEL HOOKS\x3c\/h3\x3e\n\x3cp\x3e你可以选择几个文件来添加根级别的钩子。例如，添加\x3ccode\x3ebeforeEach()\x3c\/code\x3e在所有\x3ccode\x3edescribe()\x3c\/code\x3e块外面(译者注：可以理解为最顶级作用域中)，这会造成在每个测试用例之前调用这个钩子函数。不仅仅它所在的这个文件(这是因为Mocha有一个暗藏的\x3ccode\x3edescribe()\x3c\/code\x3e，叫做\x22root-suite\x22)。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22beforeEach(function () {\n    console.log(\x27before every test in every file\x27);\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ebeforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3econsole\x3c\/span\x3e.log(\x3cspan class=\x22hljs-string\x22\x3e\x27before every test in every file\x27\x3c\/span\x3e);\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader12\x22\x3eDELAYED ROOT SUITE\x3c\/h3\x3e\n\x3cp\x3e如果想在mocha命令运行之后，先做一些别的工作，再启动测试，可以使用mocha --delay命令，此命令会在全局环境中生成一个run函数，延迟工作完成后调用run函数即可启动测试。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22setTimeout(function () {\n    \/\/ do some setup\n    \n    describe(\x27my suite\x27, function () {\n        \/\/ ...\n    });\n    \n    run();\n}, 5000)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3esetTimeout(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ do some setup\x3c\/span\x3e\n    \n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27my suite\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    });\n    \n    run();\n}, \x3cspan class=\x22hljs-number\x22\x3e5000\x3c\/span\x3e)\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader13\x22\x3ePENDING TESTS\x3c\/h3\x3e\n\x3cp\x3e不给测试用例传递一个回调函数，就是被等待实现的测试用例，但同样会在报告中体现出来。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function() {\n    describe(\x27#indexOf\x27, function () {\n        \/\/ 等待测试\n        it(\x27should return -1 when the value is nor present\x27);\n    });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 等待测试\x3c\/span\x3e\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 when the value is nor present\x27\x3c\/span\x3e);\n    });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader14\x22\x3eEXCLUSIVE TESTS\x3c\/h3\x3e\n\x3cp\x3e在用例测试集或者用例单元后面加上\x3ccode\x3e.only()\x3c\/code\x3e方法，可以让mocha只测试此用例集合或者用例单元。下面是一个仅执行一个特殊的测试单元的例子：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function () {\n    describe.only(\x27#indexOf()\x27, function () {\n        \/\/ ....\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe.only(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ....\x3c\/span\x3e\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意：在Array用例集下面嵌套的集合，只有#indexOf用例集合会被执行。\x3c\/p\x3e\n\x3cp\x3e下面的这个例子是仅仅执行唯一一个测试单元。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function() {\n    describe(\x27#indexOf\x27, function() {\n        it.only(\x27should return -1 unless preset\x27, function () {\n            \/\/ ...\n        })\n        it(\x27should return the index when present\x27, function () {\n            \/\/ ...\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it.only(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 unless preset\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n        })\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return the index when present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e在v3.0.0版本之前，\x3ccode\x3e.only()\x3c\/code\x3e函数通过字符串匹配的方式去决定哪个测试应该被执行。但是在v3.0.0版本及以后，\x3ccode\x3e.only()\x3c\/code\x3e可以被定义多次来定义一系列的测试子集。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function () {\n    describe(\x27#indexOf\x27, function () {\n        it.only(\x27should return -1 unless present\x27, function () {\n            \/\/ this test will be run\n        })\n        it.only(\x27should return index when present\x27, function () {\n            \/\/ this test will also be run\n        })\n        it(\x27should return -1 if called with a non-Array context\x27, function () {\n            \/\/ this test will not be run\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it.only(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 unless present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will be run\x3c\/span\x3e\n        })\n        it.only(\x3cspan class=\x22hljs-string\x22\x3e\x27should return index when present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will also be run\x3c\/span\x3e\n        })\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 if called with a non-Array context\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will not be run\x3c\/span\x3e\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e你也可以选择多个测试集合：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\ndescribe(\x27Array\x27, function () {\n    describe.only(\x27#indexOf()\x27, function () {\n        it(\x27should return -1 unless present\x27, function() {\n          \/\/ this test will be run\n        });\n    \n        it(\x27should return the index when present\x27, function() {\n          \/\/ this test will also be run\n        });\n    });\n    describe.only(\x27#concat()\x27, function () {\n        it(\x27should return a new Array\x27, function () {\n          \/\/ this test will also be run\n        });\n    });\n    \n    describe(\x27#slice()\x27, function () {\n        it(\x27should return a new Array\x27, function () {\n          \/\/ this test will not be run\n        });\n    });\n})\n\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\ndescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe.only(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 unless present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will be run\x3c\/span\x3e\n        });\n    \n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return the index when present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will also be run\x3c\/span\x3e\n        });\n    });\n    describe.only(\x3cspan class=\x22hljs-string\x22\x3e\x27#concat()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return a new Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will also be run\x3c\/span\x3e\n        });\n    });\n    \n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#slice()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return a new Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will not be run\x3c\/span\x3e\n        });\n    });\n})\n\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面两种情况也可以结合在一起使用：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function () {\n    describe.only(\x27#indexOf()\x27, function () {\n        it.only(\x27should return -1 unless present\x27, function () {\n            \/\/ this test will be run\n        })\n        it(\x27should return the index when present\x27, function () {\n            \/\/ this test will not be run\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe.only(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it.only(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 unless present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will be run\x3c\/span\x3e\n        })\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return the index when present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will not be run\x3c\/span\x3e\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e注意：如果有钩子函数，钩子函数会被执行。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e除非你是真的需要它，否则不要提交\x3ccode\x3eonly()\x3c\/code\x3e到你的版本控制中。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader15\x22\x3eINCLUSIVE TESTS\x3c\/h3\x3e\n\x3cp\x3e和\x3ccode\x3eonly()\x3c\/code\x3e方法相反，\x3ccode\x3e.skip()\x3c\/code\x3e方法可以用于跳过某些测试测试集合和测试用例。所有被跳过的用例都会被标记为\x3ccode\x3epending\x3c\/code\x3e用例，在报告中也会以\x3ccode\x3epending\x3c\/code\x3e用例显示。下面是一个跳过整个测试集的例子。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function () {\n    describe.skip(\x27#indexOf\x27, function () {\n        \/\/ ...\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe.skip(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e或者指定跳过某一个测试用例：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function () {\n    describe(\x27#indexOf()\x27, function () {\n        it.skip(\x27should return -1 unless present\x27, function () {\n            \/\/ this test will not be run\n        })\n        \n        it(\x27should return the index when present\x27, function () {\n            \/\/ this test will be run\n        })\n    })\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it.skip(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 unless present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will not be run\x3c\/span\x3e\n        })\n        \n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return the index when present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            \x3cspan class=\x22hljs-comment\x22\x3e\/\/ this test will be run\x3c\/span\x3e\n        })\n    })\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e最佳实践：使用\x3ccode\x3e.skip()\x3c\/code\x3e方法来跳过某些不需要的测试用例而不是从代码中注释掉。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e有些时候，测试用例需要某些特定的环境或者一些特殊的配置，但我们事先是无法确定的。这个时候，我们可以使用\x3ccode\x3ethis.skip()\x3c\/code\x3e［译者注：这个时候就不能使用箭头函数了］根据条件在运行的时候跳过某些测试用例。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22it(\x27should only test in the correct environment\x27, function () {\n    if(\/* check the environment *\/) {\n        \/\/ make assertions\n    } else {\n        this.skip()\n    }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eit(\x3cspan class=\x22hljs-string\x22\x3e\x27should only test in the correct environment\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-comment\x22\x3e\/* check the environment *\/\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ make assertions\x3c\/span\x3e\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.skip()\n    }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e这个测试在报告中会以\x3ccode\x3epending\x3c\/code\x3e状态呈现。为了避免测试逻辑混乱，在调用skip函数之后，就不要再在用例函数或after钩子中执行更多的逻辑了。\x3c\/p\x3e\n\x3cp\x3e下面的这个测试和上面的相比，因为没有在else分支做任何事情，当if条件不满足的时候，它仍然会在报告中显示passing。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22it(\x27should only test in the correct environment\x27, function () {\n    if (\/* check test environment *\/) {\n        \/\/ make assertion\n    } else {\n        \/\/ do nothing\n    }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3eit(\x3cspan class=\x22hljs-string\x22\x3e\x27should only test in the correct environment\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (\x3cspan class=\x22hljs-comment\x22\x3e\/* check test environment *\/\x3c\/span\x3e) {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ make assertion\x3c\/span\x3e\n    } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n        \x3cspan class=\x22hljs-comment\x22\x3e\/\/ do nothing\x3c\/span\x3e\n    }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e最佳事件：千万不要什么事情都不做，一个测试应该做个断言判断或者使用skip()\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cp\x3e我们也可以在before钩子函数中使用.skip()来跳过多个测试用例或者测试集合。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22before(function () {\n   if(\/* check test environment *\/) {\n       \/\/ setup mode\n   } else {\n       this.skip()\n   }\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3ebefore(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n   \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e(\x3cspan class=\x22hljs-comment\x22\x3e\/* check test environment *\/\x3c\/span\x3e) {\n       \x3cspan class=\x22hljs-comment\x22\x3e\/\/ setup mode\x3c\/span\x3e\n   } \x3cspan class=\x22hljs-keyword\x22\x3eelse\x3c\/span\x3e {\n       \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.skip()\n   }\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3eMocha v3.0.0之前，在异步的测试用例和钩子函数中是不支持\x3ccode\x3ethis.skip()\x3c\/code\x3e的。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader16\x22\x3eRETRY TESTS\x3c\/h3\x3e\n\x3cp\x3eMocha允许你为失败的测试用例指定需要重复的次数。这个功能是为端对端测试所设计的，因为这些测试的数据不好模拟。Mocha不推荐在单元测试中使用这个功能。\x3c\/p\x3e\n\x3cp\x3e这个功能会重新运行beforeEach\/afterEach钩子，但不会重新运行before\/after钩子。\x3c\/p\x3e\n\x3cp\x3e下面是一个使用Selenium webdriver写的一个重复执行的测试用例。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27retries\x27, function () {\n    \/\/ 尝试全部的失败的测试4次，\n    this.retries(4);\n\n  beforeEach(function () {\n    browser.get(\x27http:\/\/www.yahoo.com\x27);\n  });\n\n  it(\x27should succeed on the 3rd try\x27, function () {\n    \/\/ Specify this test to only retry up to 2 times\n    this.retries(2);\n    expect($(\x27.foo\x27).isDisplayed()).to.eventually.be.true;\n  });\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27retries\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 尝试全部的失败的测试4次，\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.retries(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n\n  beforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    browser.get(\x3cspan class=\x22hljs-string\x22\x3e\x27http:\/\/www.yahoo.com\x27\x3c\/span\x3e);\n  });\n\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27should succeed on the 3rd try\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ Specify this test to only retry up to 2 times\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.retries(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n    expect($(\x3cspan class=\x22hljs-string\x22\x3e\x27.foo\x27\x3c\/span\x3e).isDisplayed()).to.eventually.be.true;\n  });\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader17\x22\x3eDYNAMICALLY GENERATING TESTS\x3c\/h3\x3e\n\x3cp\x3eMocha可以使用\x3ccode\x3eFunction.prototype.call\x3c\/code\x3e和函数表达式来定义测试用例，其实就是动态生成一些测试用例，不需要使用什么特殊的语法。和你见过的其他框架可能有所不同，这个特性可以通过定义一些参数来实现测试用例所拥有的功能。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var assert = require(\x27chai\x27).assert;\n\nfunction add() {\n  return Array.prototype.slice.call(arguments).reduce(function(prev, curr) {\n    return prev \x2b curr;\n  }, 0);\n}\n\ndescribe(\x27add()\x27, function() {\n  var tests = [\n    {args: [1, 2],       expected: 3},\n    {args: [1, 2, 3],    expected: 6},\n    {args: [1, 2, 3, 4], expected: 10}\n  ];\n\n  tests.forEach(function(test) {\n    it(\x27correctly adds \x27 \x2b test.args.length \x2b \x27 args\x27, function() {\n      var res = add.apply(null, test.args);\n      assert.equal(res, test.expected);\n    });\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e assert = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chai\x27\x3c\/span\x3e).assert;\n\n\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eadd\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eArray\x3c\/span\x3e.prototype.slice.call(\x3cspan class=\x22hljs-built_in\x22\x3earguments\x3c\/span\x3e).reduce(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eprev, curr\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ereturn\x3c\/span\x3e prev \x2b curr;\n  }, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n}\n\ndescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27add()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e tests = [\n    {\x3cspan class=\x22hljs-attr\x22\x3eargs\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e],       \x3cspan class=\x22hljs-attr\x22\x3eexpected\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eargs\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e],    \x3cspan class=\x22hljs-attr\x22\x3eexpected\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e6\x3c\/span\x3e},\n    {\x3cspan class=\x22hljs-attr\x22\x3eargs\x3c\/span\x3e: [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e], \x3cspan class=\x22hljs-attr\x22\x3eexpected\x3c\/span\x3e: \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e}\n  ];\n\n  tests.forEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3etest\x3c\/span\x3e) \x3c\/span\x3e{\n    it(\x3cspan class=\x22hljs-string\x22\x3e\x27correctly adds \x27\x3c\/span\x3e \x2b test.args.length \x2b \x3cspan class=\x22hljs-string\x22\x3e\x27 args\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e res = add.apply(\x3cspan class=\x22hljs-literal\x22\x3enull\x3c\/span\x3e, test.args);\n      assert.equal(res, test.expected);\n    });\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的测试用例所产生的结果如下：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ mocha\n\n  add()\n    ✓ correctly adds 2 args\n    ✓ correctly adds 3 args\n    ✓ correctly adds 4 args\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e$ mocha\n\n  add()\n    ✓ correctly adds 2 args\n    ✓ correctly adds 3 args\n    ✓ correctly adds 4 args\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader18\x22\x3eTEST DURATION\x3c\/h3\x3e\n\x3cp\x3e很多的测试报告都会显示测试所花费的时间，同样也会对一些耗时的测试作出特殊的标记。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362882\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362882\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e我们可以使用slow()方法来明确的表示出，超过多久的时间，这个测试就可以认为是slow的。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27something slow\x27, function() {\n  this.slow(10000);\n\n  it(\x27should take long enough for me to go make a sandwich\x27, function() {\n    \/\/ ...\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27something slow\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.slow(\x3cspan class=\x22hljs-number\x22\x3e10000\x3c\/span\x3e);\n\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27should take long enough for me to go make a sandwich\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader19\x22\x3eTIMEOUTS\x3c\/h3\x3e\n\x3cp\x3e测试集合超时:\x3c\/p\x3e\n\x3cp\x3e在测试集合上定义超时时间，会对这个测试集合中所有的测试用例和测试集合起作用。我们可以通过\x3ccode\x3ethis.timeout(0)\x3c\/code\x3e来关闭超时判断的功能。而且在测试用例和测试集合上定义的超时时间会覆盖外围的测试集合的设置。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27a suite of tests\x27, function() {\n  this.timeout(500);\n\n  it(\x27should take less than 500ms\x27, function(done){\n    setTimeout(done, 300);\n  });\n\n  it(\x27should take less than 500ms as well\x27, function(done){\n    setTimeout(done, 250);\n  });\n})\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27a suite of tests\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.timeout(\x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e);\n\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27should take less than 500ms\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e)\x3c\/span\x3e{\n    setTimeout(done, \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e);\n  });\n\n  it(\x3cspan class=\x22hljs-string\x22\x3e\x27should take less than 500ms as well\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e)\x3c\/span\x3e{\n    setTimeout(done, \x3cspan class=\x22hljs-number\x22\x3e250\x3c\/span\x3e);\n  });\n})\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e测试用例超时：\x3c\/p\x3e\n\x3cp\x3e我们也可以给测试用例定义超时时间，或者通过\x3ccode\x3ethis.timeout(0)\x3c\/code\x3e来禁止超时时间的判断。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22it(\x27should take less than 500ms\x27, function(done){\n  this.timeout(500);\n  setTimeout(done, 300);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22python hljs\x22\x3e\x3ccode class=\x22python\x22\x3eit(\x3cspan class=\x22hljs-string\x22\x3e\x27should take less than 500ms\x27\x3c\/span\x3e, function(done){\n  this.timeout(\x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e);\n  setTimeout(done, \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e钩子函数超时：\x3c\/p\x3e\n\x3cp\x3e也可以给钩子函数设定超时时间，同样也可以使用\x3ccode\x3ethis.timeout(0)\x3c\/code\x3e来禁止掉超时时间的判断。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27a suite of tests\x27, function() {\n  beforeEach(function(done) {\n    this.timeout(3000); \/\/ A very long environment setup.\n    setTimeout(done, 2500);\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27a suite of tests\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  beforeEach(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3edone\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-keyword\x22\x3ethis\x3c\/span\x3e.timeout(\x3cspan class=\x22hljs-number\x22\x3e3000\x3c\/span\x3e); \x3cspan class=\x22hljs-comment\x22\x3e\/\/ A very long environment setup.\x3c\/span\x3e\n    setTimeout(done, \x3cspan class=\x22hljs-number\x22\x3e2500\x3c\/span\x3e);\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cblockquote\x3e\x3cp\x3e在Mocha v3.0.0版本及以上，如果设定的超时时间比\x3ca href=\x22https:\/\/developer.mozilla.org\/docs\/Web\/API\/WindowTimers\/setTimeout#Maximum_delay_value\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e最大延迟时间\x3c\/a\x3e的值大，那么也会被认为是禁止掉超时时间的判断。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3ch3 id=\x22articleHeader20\x22\x3eDIFFS\x3c\/h3\x3e\n\x3cp\x3e如果做断言的时候抛出了\x3ccode\x3eAssertionErrors\x3c\/code\x3e的异常，且错误对象中含有\x3ccode\x3eerr.expected\x3c\/code\x3e属性和\x3ccode\x3eerr.actual\x3c\/code\x3e属性，mocha会在报告中展示出期望值和实际值之间的差异。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362883\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362883\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader21\x22\x3eUSAGE\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22格式：mocha [debug] [options] [files]\n\n命令：\n    init \x3cpath\x3e : 生成一个在浏览器中运行的单元测试的模版\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e格式：mocha [debug] [options] [files]\n\n命令：\n    init \x26lt;path\x26gt; : 生成一个在浏览器中运行的单元测试的模版\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们运行如下命令的时候:\x3ccode\x3emocha init .\x3c\/code\x3e会在当前路径中生成一个模版，文件如下：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362884\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362884\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3emocha的命令的基本选项：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22Options:\n\n    -h, --help                  输出帮助信息\n    -V, --version               输出mocha的版本号\n    -A, --async-only            强制所有的测试用例必须使用callback或者返回一个promise的格式来确定异步的正确性\n    -c, --colors                在报告中显示颜色\n    -C, --no-colors             在报告中禁止显示颜色\n    -g, --growl                 在桌面上显示测试报告的结果\n    -O, --reporter-options \x3ck=v,k2=v2,...\x3e  设置报告的基本选项\n    -R, --reporter \x3cname\x3e       指定测试报告的格式\n    -S, --sort                  对测试文件进行排序\n    -b, --bail                  在第一个测试没有通过的时候就停止执行后面所有的测试\n    -d, --debug                 启用node的debugger功能\n    -g, --grep \x3cpattern\x3e        用于搜索测试用例的名称，然后只执行匹配的测试用例\n    -f, --fgrep \x3cstring\x3e        只执行测试用例的名称中含有string的测试用例\n    -gc, --expose-gc            展示垃圾回收的log内容\n    -i, --invert                只运行不符合条件的测试用例，必须和--grep或--fgrep之一同时运行\n    -r, --require \x3cname\x3e        require指定模块\n    -s, --slow \x3cms\x3e             指定slow的时间，单位是ms，默认是75ms\n    -t, --timeout \x3cms\x3e          指定超时时间，单位是ms，默认是200ms\n    -u, --ui \x3cname\x3e             指定user-interface (bdd|tdd|exports)中的一种\n    -w, --watch                 用来监视指定的测试脚本。只要测试脚本有变化，就会自动运行Mocha\n    --check-leaks               检测全局变量造成的内存泄漏问题\n    --full-trace                展示完整的错误栈信息\n    --compilers \x3cext\x3e:\x3cmodule\x3e,...  使用给定的模块来编译文件\n    --debug-brk                 启用nodejs的debug模式\n    --es_staging                启用全部staged特性\n    --harmony\x3c_classes,_generators,...\x3e     all node --harmony* flags are available\n    --preserve-symlinks                     告知模块加载器在解析和缓存模块的时候，保留模块本身的软链接信息\n    --icu-data-dir                          include ICU data\n    --inline-diffs              用内联的方式展示actual\/expected之间的不同\n    --inspect                   激活chrome浏览器的控制台\n    --interfaces                展示所有可用的接口\n    --no-deprecation            不展示warning信息\n    --no-exit                   require a clean shutdown of the event loop: mocha will not call process.exit\n    --no-timeouts               禁用超时功能\n    --opts \x3cpath\x3e               定义option文件路径 \n    --perf-basic-prof           启用linux的分析功能\n    --prof                      打印出统计分析信息\n    --recursive                 包含子目录中的测试用例\n    --reporters                 展示所有可以使用的测试报告的名称\n    --retries \x3ctimes\x3e           设置对于失败的测试用例的尝试的次数\n    --throw-deprecation         无论任何时候使用过时的函数都抛出一个异常\n    --trace                     追踪函数的调用过程\n    --trace-deprecation         展示追踪错误栈\n    --use_strict                强制使用严格模式\n    --watch-extensions \x3cext\x3e,... --watch监控的扩展 \n    --delay                     异步测试用例的延迟时间\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3eOptions:\n\n    -h, --help                  输出帮助信息\n    -V, --version               输出mocha的版本号\n    -A, --async-only            强制所有的测试用例必须使用callback或者返回一个promise的格式来确定异步的正确性\n    -c, --colors                在报告中显示颜色\n    -C, --no-colors             在报告中禁止显示颜色\n    -g, --growl                 在桌面上显示测试报告的结果\n    -O, --reporter-options \x26lt;k=v,k2=v2,...\x26gt;  设置报告的基本选项\n    -R, --reporter \x26lt;name\x26gt;       指定测试报告的格式\n    -S, --sort                  对测试文件进行排序\n    -b, --bail                  在第一个测试没有通过的时候就停止执行后面所有的测试\n    \x3cspan class=\x22hljs-_\x22\x3e-d\x3c\/span\x3e, --debug                 启用node的debugger功能\n    -g, --grep \x26lt;pattern\x26gt;        用于搜索测试用例的名称，然后只执行匹配的测试用例\n    \x3cspan class=\x22hljs-_\x22\x3e-f\x3c\/span\x3e, --fgrep \x26lt;string\x26gt;        只执行测试用例的名称中含有string的测试用例\n    -gc, --expose-gc            展示垃圾回收的\x3cspan class=\x22hljs-built_in\x22\x3elog\x3c\/span\x3e内容\n    -i, --invert                只运行不符合条件的测试用例，必须和--grep或--fgrep之一同时运行\n    -r, --require \x26lt;name\x26gt;        require指定模块\n    \x3cspan class=\x22hljs-_\x22\x3e-s\x3c\/span\x3e, --slow \x26lt;ms\x26gt;             指定slow的时间，单位是ms，默认是75ms\n    -t, --timeout \x26lt;ms\x26gt;          指定超时时间，单位是ms，默认是200ms\n    -u, --ui \x26lt;name\x26gt;             指定user-interface (bdd|tdd|exports)中的一种\n    -w, --watch                 用来监视指定的测试脚本。只要测试脚本有变化，就会自动运行Mocha\n    --check-leaks               检测全局变量造成的内存泄漏问题\n    --full-trace                展示完整的错误栈信息\n    --compilers \x26lt;ext\x26gt;:\x26lt;module\x26gt;,...  使用给定的模块来编译文件\n    --debug-brk                 启用nodejs的debug模式\n    --es_staging                启用全部staged特性\n    --harmony\x26lt;_classes,_generators,...\x26gt;     all node --harmony* flags are available\n    --preserve-symlinks                     告知模块加载器在解析和缓存模块的时候，保留模块本身的软链接信息\n    --icu-data-dir                          include ICU data\n    --inline-diffs              用内联的方式展示actual\/expected之间的不同\n    --inspect                   激活chrome浏览器的控制台\n    --interfaces                展示所有可用的接口\n    --no-deprecation            不展示warning信息\n    --no-exit                   require a clean shutdown of the event loop: mocha will not call process.exit\n    --no-timeouts               禁用超时功能\n    --opts \x26lt;path\x26gt;               定义option文件路径 \n    --perf-basic-prof           启用linux的分析功能\n    --prof                      打印出统计分析信息\n    --recursive                 包含子目录中的测试用例\n    --reporters                 展示所有可以使用的测试报告的名称\n    --retries \x26lt;\x3cspan class=\x22hljs-built_in\x22\x3etimes\x3c\/span\x3e\x26gt;           设置对于失败的测试用例的尝试的次数\n    --throw-deprecation         无论任何时候使用过时的函数都抛出一个异常\n    --trace                     追踪函数的调用过程\n    --trace-deprecation         展示追踪错误栈\n    --use_strict                强制使用严格模式\n    --watch-extensions \x26lt;ext\x26gt;,... --watch监控的扩展 \n    --delay                     异步测试用例的延迟时间\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eAbout Babel\x3c\/h4\x3e\n\x3cp\x3e如果你在js文件中使用了es6的模块，你可以\x3ccode\x3enpm install --save-dev babel-register\x3c\/code\x3e，然后使用--require选项\x3ccode\x3e mocha --require babel-register\x3c\/code\x3e。如果你指定了文件的后缀名，--compilers选项也是必需的。\x3c\/p\x3e\n\x3ch4\x3e-b, --bail\x3c\/h4\x3e\n\x3cp\x3e如果你只对第一个异常感兴趣，可以使用这个选项。\x3c\/p\x3e\n\x3ch4\x3e-d, --debug\x3c\/h4\x3e\n\x3cp\x3e启用nodejs的debug功能。这个选项会用\x3ccode\x3enode debug \x26lt;file\x26gt;\x3c\/code\x3e的模式运行你的脚本，所以会在\x3ccode\x3edebugger\x3c\/code\x3e语句处暂停执行。这个选项和mocha debug以及mocha --debug是不同的；mocha debug将会唤起nodejs默认的debug客户端，mocha --debug也可以使用不同的接口，比如－－Blink的控制台工具。\x3c\/p\x3e\n\x3ch4\x3e--globals names\x3c\/h4\x3e\n\x3cp\x3enames是一个逗号分隔的列表，例如，假设你的app需要使用全局变量\x3ccode\x3eapp\x3c\/code\x3e和\x3ccode\x3eYUI\x3c\/code\x3e，这个时候你就可以使用\x3ccode\x3e--global app, YUI\x3c\/code\x3e了。names也可以是一个通配符。比如，--global \x27*bar\x27将会匹配foobar，barbar等。参数传入 * 的话，会忽略所有全局变量。\x3c\/p\x3e\n\x3ch4\x3e--check-leaks\x3c\/h4\x3e\n\x3cp\x3e默认情况下，mocha并不会去检查应用暴露出来的全局变量，加上这个配置后就会去检查，此时某全局变量如果没有用上面的--GLOBALS去配置为可接受，mocha就会报错。\x3c\/p\x3e\n\x3ch4\x3e-r, --require module-name\x3c\/h4\x3e\n\x3cp\x3e这个命令可以引入一些测试运行时候所必需的依赖。比如should.js，通过这个选项你不需要在每个文件使用require(\x27should\x27)来添加should.js了。也可以用--require .\/test\/helper.js这样的命令去引入指定的本地模块。\x3cbr\x3e但是，如果要引用模块导出的对象，还是需要require，var should = require(\x27should\x27)这样搞。\x3c\/p\x3e\n\x3ch4\x3e-u, --ui name\x3c\/h4\x3e\n\x3cp\x3e用来指定测试所使用的接口，默认是\x27bdd\x27。\x3c\/p\x3e\n\x3ch4\x3e-R, --reporter name\x3c\/h4\x3e\n\x3cp\x3e这个命令用于指定报告的格式。默认是spec。这个选项也可以用于指定使用第三方的报告样式。例如，在\x3ccode\x3enpm install mocha-lcov-reporter\x3c\/code\x3e后，就可以使用\x3ccode\x3e--reporter mocha-lcov-reporter\x3c\/code\x3e来指定报告格式。\x3c\/p\x3e\n\x3ch4\x3e-t, --timeout ms\x3c\/h4\x3e\n\x3cp\x3e用来指定用例超时时间。单位是ms，默认是2s。可以直接使用带单位的时间来覆盖掉默认的单位。例如：--timeout 2s和--timeout 2000是一样的。\x3c\/p\x3e\n\x3ch4\x3e-s, --slow ms\x3c\/h4\x3e\n\x3cp\x3e用来指定慢用例判定时间，默认是75ms。\x3c\/p\x3e\n\x3ch4\x3e-g, --grep\x3c\/h4\x3e\n\x3cp\x3e参数用于搜索测试用例的名称（即it块的第一个参数），然后只执行匹配的测试用例。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27api\x27, function() {\n  describe(\x27GET \/api\/users\x27, function() {\n    it(\x27respond with an array of users\x27, function() {\n      \/\/ ...\n    });\n  });\n});\n\ndescribe(\x27app\x27, function() {\n  describe(\x27GET \/users\x27, function() {\n    it(\x27respond with an array of users\x27, function() {\n      \/\/ ...\n    });\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27api\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  describe(\x3cspan class=\x22hljs-string\x22\x3e\x27GET \/api\/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    it(\x3cspan class=\x22hljs-string\x22\x3e\x27respond with an array of users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    });\n  });\n});\n\ndescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27app\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  describe(\x3cspan class=\x22hljs-string\x22\x3e\x27GET \/users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    it(\x3cspan class=\x22hljs-string\x22\x3e\x27respond with an array of users\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    });\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e当我们使用\x3ccode\x3e--grep api\x3c\/code\x3e或者\x3ccode\x3e--grep app\x3c\/code\x3e只能运行其中一个对应的测试。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader22\x22\x3eINTERFACES\x3c\/h3\x3e\n\x3cp\x3emocha的测绘接口类型指的是集中测试用例组织模式的选择。Mocha提供了\x3cstrong\x3eBDD\x3c\/strong\x3e,\x3cstrong\x3eTDD\x3c\/strong\x3e,\x3cstrong\x3eExports\x3c\/strong\x3e,\x3cstrong\x3eQUnit\x3c\/strong\x3e和\x3cstrong\x3eRequire-style\x3c\/strong\x3e几种接口。\x3c\/p\x3e\n\x3ch4\x3eBDD\x3c\/h4\x3e\n\x3cp\x3eBDD测试提供了describe()，context()，it()，specify()，before()，after()，beforeEach()和afterEach()这几种函数。\x3c\/p\x3e\n\x3cp\x3econtext()是describe()的别名，二者的用法是一样的。最大的作用就是让测试的可读性更好，组织的更好。相似地，specify()是it()的别名。\x3c\/p\x3e\n\x3cblockquote\x3e\x3cp\x3e上面的所有测试都是用BDD风格的接口写的。\x3c\/p\x3e\x3c\/blockquote\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function() {\n    before(function() {\n      \/\/ ...\n    });\n\n    describe(\x27#indexOf()\x27, function() {\n      context(\x27when not present\x27, function() {\n        it(\x27should not throw an error\x27, function() {\n          (function() {\n            [1,2,3].indexOf(4);\n          }).should.not.throw();\n        });\n        it(\x27should return -1\x27, function() {\n          [1,2,3].indexOf(4).should.equal(-1);\n        });\n      });\n      context(\x27when present\x27, function() {\n        it(\x27should return the index where the element first appears in the array\x27, function() {\n          [1,2,3].indexOf(3).should.equal(2);\n        });\n      });\n    });\n  });\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    before(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n    });\n\n    describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      context(\x3cspan class=\x22hljs-string\x22\x3e\x27when not present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should not throw an error\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n            [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e);\n          }).should.not.throw();\n        });\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e);\n        });\n      });\n      context(\x3cspan class=\x22hljs-string\x22\x3e\x27when present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return the index where the element first appears in the array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n          [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n        });\n      });\n    });\n  });\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eTDD\x3c\/h4\x3e\n\x3cp\x3eTDD风格的测试提供了suite(), test(), suiteSetup(), suiteTeardown(), setup(), 和 teardown()这几个函数:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22suite(\x27Array\x27, function() {\n  setup(function() {\n    \/\/ ...\n  });\n\n  suite(\x27#indexOf()\x27, function() {\n    test(\x27should return -1 when not present\x27, function() {\n      assert.equal(-1, [1,2,3].indexOf(4));\n    });\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3esuite(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  setup(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n  });\n\n  suite(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    test(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 when not present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      assert.equal(\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e, [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e));\n    });\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eExports\x3c\/h4\x3e\n\x3cp\x3eExports 的写法有的类似于Mocha的前身\x3ca href=\x22https:\/\/github.com\/tj\/expresso\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eexpresso\x3c\/a\x3e，键 before, after, beforeEach, 和afterEach都具有特殊的含义。对象值对应的是测试集合，函数值对应的是测试用例。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22module.exports = {\n  before: function() {\n    \/\/ ...\n  },\n\n  \x27Array\x27: {\n    \x27#indexOf()\x27: {\n      \x27should return -1 when not present\x27: function() {\n        [1,2,3].indexOf(4).should.equal(-1);\n      }\n    }\n  }\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3emodule\x3c\/span\x3e.exports = {\n  \x3cspan class=\x22hljs-attr\x22\x3ebefore\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n  },\n\n  \x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e: {\n    \x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e: {\n      \x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 when not present\x27\x3c\/span\x3e: \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n        [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e);\n      }\n    }\n  }\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eQUNIT\x3c\/h4\x3e\n\x3cp\x3eQUNIT风格的测试像TDD接口一样支持suite和test函数，同时又像BDD一样支持before(), after(), beforeEach(), 和 afterEach()等钩子函数。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22function ok(expr, msg) {\n  if (!expr) throw new Error(msg);\n}\n\nsuite(\x27Array\x27);\n\ntest(\x27#length\x27, function() {\n  var arr = [1,2,3];\n  ok(arr.length == 3);\n});\n\ntest(\x27#indexOf()\x27, function() {\n  var arr = [1,2,3];\n  ok(arr.indexOf(1) == 0);\n  ok(arr.indexOf(2) == 1);\n  ok(arr.indexOf(3) == 2);\n});\n\nsuite(\x27String\x27);\n\ntest(\x27#length\x27, function() {\n  ok(\x27foo\x27.length == 3);\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3eok\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3eexpr, msg\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (!expr) \x3cspan class=\x22hljs-keyword\x22\x3ethrow\x3c\/span\x3e \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e \x3cspan class=\x22hljs-built_in\x22\x3eError\x3c\/span\x3e(msg);\n}\n\nsuite(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e);\n\ntest(\x3cspan class=\x22hljs-string\x22\x3e\x27#length\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n  ok(arr.length == \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n});\n\ntest(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e arr = [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e];\n  ok(arr.indexOf(\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e) == \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n  ok(arr.indexOf(\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e) == \x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e);\n  ok(arr.indexOf(\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e) == \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n});\n\nsuite(\x3cspan class=\x22hljs-string\x22\x3e\x27String\x27\x3c\/span\x3e);\n\ntest(\x3cspan class=\x22hljs-string\x22\x3e\x27#length\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  ok(\x3cspan class=\x22hljs-string\x22\x3e\x27foo\x27\x3c\/span\x3e.length == \x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e);\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eREQUIRE\x3c\/h4\x3e\n\x3cp\x3erequire可以使用require方法引入describe函数，同时，你可以为其设置一个别名。如果你不想再测试中出现全局变量，这个方法也是十分实用的。\x3c\/p\x3e\n\x3cp\x3e\x3cstrong\x3e注意\x3c\/strong\x3e：这种风格的测试不能通过node命令来直接运行，因为，这里的require()方法node是不能够解析的，我们必须通过mocha来运行测试。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22var testCase = require(\x27mocha\x27).describe;\nvar pre = require(\x27mocha\x27).before;\nvar assertions = require(\x27mocha\x27).it;\nvar assert = require(\x27chai\x27).assert;\n\ntestCase(\x27Array\x27, function() {\n  pre(function() {\n    \/\/ ...\n  });\n\n  testCase(\x27#indexOf()\x27, function() {\n    assertions(\x27should return -1 when not present\x27, function() {\n      assert.equal([1,2,3].indexOf(4), -1);\n    });\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e testCase = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mocha\x27\x3c\/span\x3e).describe;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e pre = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mocha\x27\x3c\/span\x3e).before;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e assertions = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27mocha\x27\x3c\/span\x3e).it;\n\x3cspan class=\x22hljs-keyword\x22\x3evar\x3c\/span\x3e assert = \x3cspan class=\x22hljs-built_in\x22\x3erequire\x3c\/span\x3e(\x3cspan class=\x22hljs-string\x22\x3e\x27chai\x27\x3c\/span\x3e).assert;\n\ntestCase(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  pre(\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ...\x3c\/span\x3e\n  });\n\n  testCase(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    assertions(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 when not present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      assert.equal([\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e4\x3c\/span\x3e), \x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e);\n    });\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader23\x22\x3eREPORTERS\x3c\/h3\x3e\n\x3cp\x3eMocha报告会自适应终端窗口，如果终端类型非TTY类型，会禁用ANSI-escape颜色。\x3c\/p\x3e\n\x3ch4\x3eSPEC\x3c\/h4\x3e\n\x3cp\x3e这是默认的测试报告，输出的格式是一个嵌套的分级视图。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362885\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362885\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362886\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362886\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eDOT MATRIX\x3c\/h4\x3e\n\x3cp\x3edot matrix视图报告使用一系列的字符来表示报告的结果，失败的测试使用红色的\x3ccode\x3e!\x3c\/code\x3e来表示，pending测试使用蓝色的\x3ccode\x3e,\x3c\/code\x3e来表示。慢的测试用黄色的\x3ccode\x3e.\x3c\/code\x3e来表示。这个终端输出的内容最少。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362887\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362887\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eNYAN\x3c\/h4\x3e\n\x3cp\x3e\x22nyan\x22报告就是你所期望的那样（谜一样的解释）：\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362888\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362888\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eTAP\x3c\/h4\x3e\n\x3cp\x3eThe TAP reporter emits lines for a \x3ca href=\x22http:\/\/en.wikipedia.org\/wiki\/Test_Anything_Protocol\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eTest-Anything-Protocol\x3c\/a\x3e consumer.\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362889\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362889\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eLANDING STRIP\x3c\/h4\x3e\n\x3cp\x3elanding strip飞机降落的跑道，测试报告就是像一架飞机轨道一样的视图。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362890\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362890\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362891\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362891\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eLIST\x3c\/h4\x3e\n\x3cp\x3e\x22list\x22报告就是简单的输出一个列表来显示每个测试用例是否通过或失败，对于失败的测试用例，会在下面输出详细的信息。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362892\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362892\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3ePROGRESS\x3c\/h4\x3e\n\x3cp\x3e\x22progress\x22报告就是一个包含进度条的视图。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362893\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362893\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eJSON\x3c\/h4\x3e\n\x3cp\x3ejson视图会输出一个json对象作为结果\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362894\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362894\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eJSON STREAM\x3c\/h4\x3e\n\x3cp\x3e输出的也是一个json，不同测试用例以换行符进行分割。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362895\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362895\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eMIN\x3c\/h4\x3e\n\x3cp\x3e这个报告只显示测试的整体情况，但是仍然会输出错误和失败的情况。和--watch选项结合使用最好。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362896\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362896\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eDOC\x3c\/h4\x3e\n\x3cp\x3e生成一个只包含html的body内容的测试报告。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362897\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362897\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e例如，假设你有下面的javascript代码：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22describe(\x27Array\x27, function() {\n  describe(\x27#indexOf()\x27, function() {\n    it(\x27should return -1 when the value is not present\x27, function() {\n      [1,2,3].indexOf(5).should.equal(-1);\n      [1,2,3].indexOf(0).should.equal(-1);\n    });\n  });\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3edescribe(\x3cspan class=\x22hljs-string\x22\x3e\x27Array\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  describe(\x3cspan class=\x22hljs-string\x22\x3e\x27#indexOf()\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    it(\x3cspan class=\x22hljs-string\x22\x3e\x27should return -1 when the value is not present\x27\x3c\/span\x3e, \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n      [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e5\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e);\n      [\x3cspan class=\x22hljs-number\x22\x3e1\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e,\x3cspan class=\x22hljs-number\x22\x3e3\x3c\/span\x3e].indexOf(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e).should.equal(\x3cspan class=\x22hljs-number\x22\x3e-1\x3c\/span\x3e);\n    });\n  });\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e通过\x3ccode\x3emocha --reporter doc array\x3c\/code\x3e会生成如下的报告：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3csection class=\x26quot;suite\x26quot;\x3e\n  \x3ch1\x3eArray\x3c\/h1\x3e\n  \x3cdl\x3e\n    \x3csection class=\x26quot;suite\x26quot;\x3e\n      \x3ch1\x3e#indexOf()\x3c\/h1\x3e\n      \x3cdl\x3e\n      \x3cdt\x3eshould return -1 when the value is not present\x3c\/dt\x3e\n      \x3cdd\x3e\x3cpre\x3e\x3ccode\x3e[1,2,3].indexOf(5).should.equal(-1);\n[1,2,3].indexOf(0).should.equal(-1);\x3c\/code\x3e\x3c\/pre\x3e\x3c\/dd\x3e\n      \x3c\/dl\x3e\n    \x3c\/section\x3e\n  \x3c\/dl\x3e\n\x3c\/section\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22suite\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3eArray\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3edl\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eclass\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22suite\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e#indexOf()\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3eh1\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3edl\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3edt\x3c\/span\x3e\x26gt;\x3c\/span\x3eshould return -1 when the value is not present\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3edt\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3edd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3epre\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ecode\x3c\/span\x3e\x26gt;\x3c\/span\x3e[1,2,3].indexOf(5).should.equal(-1);\n[1,2,3].indexOf(0).should.equal(-1);\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ecode\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3epre\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3edd\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n      \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3edl\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n    \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3edl\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3esection\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eMARKDOWN\x3c\/h4\x3e\n\x3cp\x3e\x22markdown\x22格式的报告会给你的测试用例生成一个markdown内容。如果你想使用github wiki或者生成一个github能够渲染的markdown文件，这种格式十分有用。这有一个例子\x3ca href=\x22https:\/\/github.com\/senchalabs\/connect\/blob\/90a725343c2945aaee637e799b1cd11e065b2bff\/tests.md\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3etest output\x3c\/a\x3e\x3c\/p\x3e\n\x3ch4\x3eHTML\x3c\/h4\x3e\n\x3cp\x3e只有在浏览器中使用Mocha的时候才能生成这种报告。\x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/remote\/1460000011362898\x22 src=\x22https:\/\/static.alili.tech\/img\/remote\/1460000011362898\x22 alt=\x22\x22 title=\x22\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3ch4\x3eUNDOCUMENTED REPORTERS\x3c\/h4\x3e\n\x3cp\x3e\x22XUnit\x22类型的报告也是可以使用的。默认情况下，只会在console控制台中输出。为了将报告写入一个文件中，使用\x3ccode\x3e--reporter-options output=filename.xml\x3c\/code\x3e\x3c\/p\x3e\n\x3ch4\x3eTHIRD PARTY REPORTERS\x3c\/h4\x3e\n\x3cp\x3eMocha也可以使用第三方报告生成器，具体的件\x3ca href=\x22https:\/\/github.com\/mochajs\/mocha\/wiki\/Third-party-reporters\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e文档\x3c\/a\x3e\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader24\x22\x3eRUNNING MOCHA IN THE BROWSER\x3c\/h3\x3e\n\x3cp\x3eMocha可以在浏览器中使用。每次Mocha发版，都会生成一个新的.\/mocha.js和.\/mocha.css文件，以便在浏览器中使用。\x3c\/p\x3e\n\x3ch4\x3eBROWSER-SPECIFIC METHODS\x3c\/h4\x3e\n\x3cp\x3e下面的方法只能在浏览器中使用。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3emocha.allowUncaught()\x3c\/code\x3e：未捕获的错误不会被抛出。\x3c\/p\x3e\n\x3cp\x3e下面是一个典型的例子。在加载测试脚本之前，使用mocha.setup(\x27bdd\x27)函数把测试模式设置为BDD接口，测试脚本加载完之后用mocha.run()函数来运行测试。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\x3chtml\x3e\n\x3chead\x3e\n  \x3cmeta charset=\x26quot;utf-8\x26quot;\x3e\n  \x3ctitle\x3eMocha Tests\x3c\/title\x3e\n  \x3clink href=\x26quot;https:\/\/cdn.rawgit.com\/mochajs\/mocha\/2.2.5\/mocha.css\x26quot; rel=\x26quot;stylesheet\x26quot; \/\x3e\n\x3c\/head\x3e\n\x3cbody\x3e\n  \x3cdiv id=\x26quot;mocha\x26quot;\x3e\x3c\/div\x3e\n\n  \x3cscript src=\x26quot;https:\/\/cdn.rawgit.com\/jquery\/jquery\/2.1.4\/dist\/jquery.min.js\x26quot;\x3e\x3c\/script\x3e\n  \x3cscript src=\x26quot;https:\/\/cdn.rawgit.com\/Automattic\/expect.js\/0.3.1\/index.js\x26quot;\x3e\x3c\/script\x3e\n  \x3cscript src=\x26quot;https:\/\/cdn.rawgit.com\/mochajs\/mocha\/2.2.5\/mocha.js\x26quot;\x3e\x3c\/script\x3e\n\n  \x3cscript\x3emocha.setup(\x27bdd\x27)\x3c\/script\x3e\n  \x3cscript src=\x26quot;test.array.js\x26quot;\x3e\x3c\/script\x3e\n  \x3cscript src=\x26quot;test.object.js\x26quot;\x3e\x3c\/script\x3e\n  \x3cscript src=\x26quot;test.xhr.js\x26quot;\x3e\x3c\/script\x3e\n  \x3cscript\x3e\n    mocha.checkLeaks();\n    mocha.globals([\x27jQuery\x27]);\n    mocha.run();\n  \x3c\/script\x3e\n\x3c\/body\x3e\n\x3c\/html\x3e\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22xml hljs\x22\x3e\x3ccode class=\x22html\x22\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3emeta\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3echarset\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22utf-8\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3eMocha Tests\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3etitle\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3elink\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3ehref\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.rawgit.com\/mochajs\/mocha\/2.2.5\/mocha.css\x22\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3erel\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22stylesheet\x22\x3c\/span\x3e \/\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehead\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3eid\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22mocha\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ediv\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.rawgit.com\/jquery\/jquery\/2.1.4\/dist\/jquery.min.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.rawgit.com\/Automattic\/expect.js\/0.3.1\/index.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22https:\/\/cdn.rawgit.com\/mochajs\/mocha\/2.2.5\/mocha.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22actionscript\x22\x3emocha.setup(\x3cspan class=\x22hljs-string\x22\x3e\x27bdd\x27\x3c\/span\x3e)\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22test.array.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22test.object.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e \x3cspan class=\x22hljs-attr\x22\x3esrc\x3c\/span\x3e=\x3cspan class=\x22hljs-string\x22\x3e\x22test.xhr.js\x22\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22undefined\x22\x3e\x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n  \x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3cspan class=\x22actionscript\x22\x3e\n    mocha.checkLeaks();\n    mocha.globals([\x3cspan class=\x22hljs-string\x22\x3e\x27jQuery\x27\x3c\/span\x3e]);\n    mocha.run();\n  \x3c\/span\x3e\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3escript\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ebody\x3c\/span\x3e\x26gt;\x3c\/span\x3e\n\x3cspan class=\x22hljs-tag\x22\x3e\x26lt;\/\x3cspan class=\x22hljs-name\x22\x3ehtml\x3c\/span\x3e\x26gt;\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eGREP\x3c\/h4\x3e\n\x3cp\x3e浏览器中可以通过在url后边加?grep=api参数，来使用grep命令。\x3c\/p\x3e\n\x3ch4\x3eBROWSER CONFIGURATION\x3c\/h4\x3e\n\x3cp\x3e可以通过mocha.setup()方法来设置配置:\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ Use \x26quot;tdd\x26quot; interface.  This is a shortcut to setting the interface;\n\/\/ any other options must be passed via an object.\nmocha.setup(\x27tdd\x27);\n\n\/\/ This is equivalent to the above.\nmocha.setup({\n  ui: \x27tdd\x27\n});\n\n\/\/ Use \x26quot;tdd\x26quot; interface, ignore leaks, and force all tests to be asynchronous\nmocha.setup({\n  ui: \x27tdd\x27,\n  ignoreLeaks: true,\n  asyncOnly: true\n});\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Use \x22tdd\x22 interface.  This is a shortcut to setting the interface;\x3c\/span\x3e\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ any other options must be passed via an object.\x3c\/span\x3e\nmocha.setup(\x3cspan class=\x22hljs-string\x22\x3e\x27tdd\x27\x3c\/span\x3e);\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ This is equivalent to the above.\x3c\/span\x3e\nmocha.setup({\n  \x3cspan class=\x22hljs-attr\x22\x3eui\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27tdd\x27\x3c\/span\x3e\n});\n\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ Use \x22tdd\x22 interface, ignore leaks, and force all tests to be asynchronous\x3c\/span\x3e\nmocha.setup({\n  \x3cspan class=\x22hljs-attr\x22\x3eui\x3c\/span\x3e: \x3cspan class=\x22hljs-string\x22\x3e\x27tdd\x27\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3eignoreLeaks\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e,\n  \x3cspan class=\x22hljs-attr\x22\x3easyncOnly\x3c\/span\x3e: \x3cspan class=\x22hljs-literal\x22\x3etrue\x3c\/span\x3e\n});\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch4\x3eBROWSER-SPECIFIC OPTION(S)\x3c\/h4\x3e\n\x3cp\x3e下面的选项只能在浏览器中使用。\x3c\/p\x3e\n\x3cp\x3e\x3ccode\x3enoHighlighting\x3c\/code\x3e：如果为true，在输出结果中语法不会高亮。\x3c\/p\x3e\n\x3ch4\x3eMOCHA.OPTS\x3c\/h4\x3e\n\x3cp\x3e在服务端运行的时候，mocha会去加载test目录下的mocha.opts文件，来读取mocha配置项。这个配置文件中的每一行代表一项配置。如果运行mocha命令的时候，带上的配置参数与这个配置文件中的配置冲突的话，以命令中的为准。\x3c\/p\x3e\n\x3cp\x3e假设你有如下的mocha.opt文件：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22-- require should\n-- reporter dot\n-- ui bdd\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e-- require should\n-- reporter dot\n-- ui bdd\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e上面的配置就会让mocha 引入一下should模块、报告样式设置为dot，并且使用bdd的测试接口。在这个基础上，运行mocha的时候也可以添加一些额外的参数，比如添加\x3ccode\x3e--Growl\x3c\/code\x3e选项同时更改报告样式为list风格：\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ mocha --reporter list --growl\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22 style=\x22word-break: break-word; white-space: initial;\x22\x3e$ mocha --reporter list --growl\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader25\x22\x3eTHE TEST\/ DIRECTORY\x3c\/h3\x3e\n\x3cp\x3e默认情况下，Mocha会搜索\x3ccode\x3e.\/test\/*.js\x3c\/code\x3e和\x3ccode\x3e.\/test\/*.coffee\x3c\/code\x3e，所以，你可以把你的测试放在\x3ccode\x3etest\/\x3c\/code\x3e文件夹下面。\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader26\x22\x3eEXAMPLES\x3c\/h3\x3e\n\x3cul\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/visionmedia\/express\/tree\/master\/test\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eExpress\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/senchalabs\/connect\/tree\/master\/test\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eConnect\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/visionmedia\/superagent\/tree\/master\/test\/node\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eSuperAgent\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/LearnBoost\/websocket.io\/tree\/master\/test\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eWebSocket.io\x3c\/a\x3e\x3c\/li\x3e\n\x3cli\x3e\x3ca href=\x22https:\/\/github.com\/mochajs\/mocha\/tree\/master\/test\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3eMocha\x3c\/a\x3e\x3c\/li\x3e\n\x3c\/ul\x3e\n\x3ch3 id=\x22articleHeader27\x22\x3eTESTING MOCHA\x3c\/h3\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22$ cd \/path\/to\/mocha\n$ npm install\n$ npm test\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22bash hljs\x22\x3e\x3ccode class=\x22bash\x22\x3e$ \x3cspan class=\x22hljs-built_in\x22\x3ecd\x3c\/span\x3e \/path\/to\/mocha\n$ npm install\n$ npm \x3cspan class=\x22hljs-built_in\x22\x3etest\x3c\/span\x3e\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>Mocha中文文档</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000011362879">https://segmentfault.com/a/1190000011362879</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/zevfrvry2wa/" target="_blank">https://alili.tech/archive/zevfrvry2wa/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>