<!DOCTYPE html><html lang="zh"><head><meta name="generator" content="Hugo 0.51"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="HandheldFriendly" content="True"><meta name="viewport" content="initial-scale=1,width=device-width,minimum-scale=1,maximum-scale=1,user-scalable=no"><meta name="wap-font-scale" content="no"><meta name="360-site-verification" content="0903ba33c82867d1f7bd8831e32a7e34"><meta name="sogou_site_verification" content="E8uWFBcf4a"><meta name="author" content="Fan"><meta name="description" itemprop="description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta name="keywords" content="Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js"><meta property="og:locale" content="en_US"><meta property="og:title" content="【30分钟学完】canvas动画|游戏基础(6)：坐标旋转探究"><meta property="og:image" content="https://alili.tech/images/logo2.png"><meta property="og:description" content="Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css"><meta property="og:site_name" content="Alili"><title>【30分钟学完】canvas动画|游戏基础(6)：坐标旋转探究 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!</title><link rel="shortcut icon" href="https://alili.tech/images/favicon.ico"><link rel="manifest" href="/manifest.json"><link rel="stylesheet" href="https://alili.tech/lib/font-awesome/css/font-awesome.min.css"><link rel="stylesheet" href="https://alili.tech/lib/justified-gallery/justifiedGallery.min.css"><link rel="stylesheet" href="https://alili.tech/css/style.css"><script src="https://alili.tech/lib/highlight.min.js"></script><script>hljs.initHighlightingOnLoad();</script><script src="https://alili.tech/lib/jquery/jquery.min.js"></script><script>document.addEventListener("error", function (e) {
			  var elem = e.target;
			  if (elem.tagName.toLowerCase() == 'img') {
				elem.style.display='none'
			  }
			}, true);</script><script type="application/ld+json">{
				"@context": "https://ziyuan.baidu.com/contexts/cambrian.jsonld",
				"@id": "https://alili.tech/archive/zo95cnqp2u/",
				"appid": "1613049289050283", 
				"title": "【30分钟学完】canvas动画|游戏基础(6)：坐标旋转探究 | 前端大爆炸! - WEB BANG! BANG!! BANG!!!", 
				"images": [],
				"pubDate": "2018-12-07T02:30:10"
			}</script></head><body><div id="header-post"><a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a> <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a> <span id="menu"><span id="nav"><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></span><br><span id="actions"><ul><li><a class="icon" href="https://alili.tech/archive/nr14p77zb/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover='$("#i-prev").toggle();' onmouseout='$("#i-prev").toggle();'></i></a></li><li><a class="icon" href="https://alili.tech/archive/ay6ld95qqxf/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover='$("#i-next").toggle();' onmouseout='$("#i-next").toggle();'></i></a></li><li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover='$("#i-top").toggle();' onmouseout='$("#i-top").toggle();'></i></a></li><li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover='$("#i-share").toggle();' onmouseout='$("#i-share").toggle();' onclick='$("#share").toggle();return false;'></i></a></li></ul><span id="i-prev" class="info" style="display:none;">Previous post</span> <span id="i-next" class="info" style="display:none;">Next post</span> <span id="i-top" class="info" style="display:none;">Back to top</span> <span id="i-share" class="info" style="display:none;">Share post</span></span><br><div id="share" style="display: none"><ul><li><a class="icon" href="http://v.t.sina.com.cn/share/share.php?u=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&text=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-weibo" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.facebook.com/sharer.php?u=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f"><i class="fa fa-facebook" aria-hidden="true"></i></a></li><li><a class="icon" href="https://twitter.com/share?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&text=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-twitter" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-linkedin" aria-hidden="true"></i></a></li><li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&is_video=false&description=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li><li><a class="icon" href="mailto:?subject=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6&body=Check out this article: https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f"><i class="fa fa-envelope" aria-hidden="true"></i></a></li><li><a class="icon" href="https://getpocket.com/save?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-get-pocket" aria-hidden="true"></i></a></li><li><a class="icon" href="http://reddit.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-reddit" aria-hidden="true"></i></a></li><li><a class="icon" href="http://www.stumbleupon.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-stumbleupon" aria-hidden="true"></i></a></li><li><a class="icon" href="http://digg.com/submit?url=https%3a%2f%2falili.tech%2farchive%2fzo95cnqp2u%2f&title=%e3%80%9030%e5%88%86%e9%92%9f%e5%ad%a6%e5%ae%8c%e3%80%91canvas%e5%8a%a8%e7%94%bb%7c%e6%b8%b8%e6%88%8f%e5%9f%ba%e7%a1%80%286%29%ef%bc%9a%e5%9d%90%e6%a0%87%e6%97%8b%e8%bd%ac%e6%8e%a2%e7%a9%b6"><i class="fa fa-digg" aria-hidden="true"></i></a></li></ul></div><div id="toc"><nav id="TableOfContents"><ul><li><a href="#版权声明">版权声明</a><ul><li><a href="#原文标题">原文标题</a></li><li><a href="#原文链接">原文链接</a></li></ul></li></ul></nav></div></span></div><div class="content index width mx-auto px3 my3"><section id="wrapper" class="home"><article class="post" itemscope itemtype="http://schema.org/BlogPosting"><header><h1 class="posttitle" itemprop="name headline">【30分钟学完】canvas动画|游戏基础(6)：坐标旋转探究</h1><div class="meta"><div class="postdate"><time datetime="2018-12-07" itemprop="datePublished">2018-12-07</time></div><div class="article-tag"><i class="fa fa-eye"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span></span></div><div class="article-tag-box"></div></div></header><div class="content" itemprop="articleBody"><div id="raw"><p style="opacity: 0;">Alili | 前端大爆炸! - WEB BANG! BANG!! BANG!!! 前端大爆炸,一个前端技术博客.想到哪,学到哪,写到哪. 本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有， Alili, 前端大爆炸, WEB BANG BANG BANG, web前端博客, 前端模块化, 前端工程化, 前端数据监控, 性能优化, 网页制作, 前端, js, html5, css, 踩坑小报告, 微前端, 树莓派, 前端开发, 区块链, 网络, Mongodb, Vue.js, Angular.js, node.js</p><script>$(function () {
            var html = "\n\n                    \n\x3ch2 id=\x22articleHeader0\x22\x3e前言\x3c\/h2\x3e\n\x3cp\x3e本篇主要讲坐标旋转及其应用，这是编程动画必不可少的技术。  \x3cbr\x3e阅读本篇前请先打好前面的基础。  \x3cbr\x3e本人能力有限，欢迎牛人共同讨论，批评指正。\x3c\/p\x3e\n\x3ch2 id=\x22articleHeader1\x22\x3e坐标旋转\x3c\/h2\x3e\n\x3cp\x3e模拟场景：已知一个中心点（centerX,centerY），旋转前物体ball（x1,y1），旋转弧度（rotation）；求旋转后物体（x2,y2）。（如下图）  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7nCv?w=1072\x26amp;h=784\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7nCv?w=1072\x26amp;h=784\x22 alt=\x22场景图\x22 title=\x22场景图\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e坐标旋转就是说围绕某个点旋转坐标，我们要依据旋转的角度（弧度），计算出物体旋转前后的坐标，一般有两种方法：\x3c\/p\x3e\n\x3ch3 id=\x22articleHeader2\x22\x3e简单坐标旋转\x3c\/h3\x3e\n\x3cp\x3e灵活运用前章节的三角函数知识可以很容易解决，基本思路：\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e计算物体初始相对于中心点的位置；\x3c\/li\x3e\n\x3cli\x3e使用atan2计算弧度angle；\x3c\/li\x3e\n\x3cli\x3e使用勾股定理计算半径radius；\x3c\/li\x3e\n\x3cli\x3eangle\x2brotation后使用cos计算旋转后x轴位置，用sin计算旋转后y轴位置。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e下面是示例是采用这种方法的圆周运动，其中vr为ball相对于中心点的弧度变化速度，由于旋转半径是固定的，所以没有在动画循环里每次都获取。  \x3cbr\x3e完整示例：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part9\/01-rotate-1.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e简单坐标旋转演示\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 简单坐标旋转演示\n * *\/\nwindow.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const ball = new Ball();\n  ball.x = 300;\n  ball.y = 200;\n  \/\/ 弧度变化速度\n  const vr = 0.05;\n  \/\/ 中心点位置设定在画布中心\n  const centerX = canvas.width \/ 2;\n  const centerY = canvas.height \/ 2;\n  \/\/ ball相对与中心点的距离\n  const dx = ball.x - centerX;\n  const dy = ball.y - centerY;\n  \/\/ ball相对与中心点的弧度\n  let angle = Math.atan2(dy, dx);\n  \/\/ 旋转半径\n  const radius = Math.sqrt(dx ** 2 \x2b dy ** 2);\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    ball.x = centerX \x2b Math.cos(angle) * radius;\n    ball.y = centerY \x2b Math.sin(angle) * radius;\n    angle \x2b= vr;\n    ball.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 简单坐标旋转演示\n * *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Ball();\n  ball.x = \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e;\n  ball.y = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 弧度变化速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vr = \x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 中心点位置设定在画布中心\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e centerX = canvas.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e centerY = canvas.height \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ball相对与中心点的距离\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx = ball.x - centerX;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy = ball.y - centerY;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ball相对与中心点的弧度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e angle = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.atan2(dy, dx);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转半径\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e radius = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sqrt(dx ** \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e \x2b dy ** \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e);\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    ball.x = centerX \x2b \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(angle) * radius;\n    ball.y = centerY \x2b \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(angle) * radius;\n    angle \x2b= vr;\n    ball.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch3 id=\x22articleHeader3\x22\x3e坐标旋转公式\x3c\/h3\x3e\n\x3cp\x3e上面的方法对于单个物体来说是很合适的，特别是角度和半径只需计算一次的情况。但是在更动态的场景中，可能需要旋转多个物体，而他们相对于中心点的位置各不相同。所以每一帧都要计算每个物体的距离、角度和半径，然后把vr累加在角度上，最后计算物体新的坐标。这样显然不会是优雅的做法。  \x3cbr\x3e理想的做法是用数学方法推导出旋转角度与位置的关系，直接每次代入计算即可。推导过程如下图：  \x3c\/p\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7nCC?w=1232\x26amp;h=930\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7nCC?w=1232\x26amp;h=930\x22 alt=\x22推导过程\x22 title=\x22推导过程\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e其实推导过程不重要，我们只需要记住如下两组公式，其中dx2和dy2是ball结束点相对于中心点的距离，所以得到物体结束点，还要分别加上中心点坐标。\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/\/ 正向选择\ndx2 = (x1 - centerX) * cos(rotation) - (y1 - centerY) * sin(rotation)\ndy2 = (y1 - centerY) * cos(rotation) \x2b (x1 - centerX) * sin(rotation)\n\/\/ 反向选择\ndx2 = (x1 - centerX) * cos(rotation) \x2b (y1 - centerY) * sin(rotation)\ndy2 = (y1 - centerY) * cos(rotation) - (x1 - centerX) * sin(rotation)\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 正向选择\x3c\/span\x3e\ndx2 = (x1 - centerX) * cos(rotation) - (y1 - centerY) * sin(rotation)\ndy2 = (y1 - centerY) * cos(rotation) \x2b (x1 - centerX) * sin(rotation)\n\x3cspan class=\x22hljs-comment\x22\x3e\/\/ 反向选择\x3c\/span\x3e\ndx2 = (x1 - centerX) * cos(rotation) \x2b (y1 - centerY) * sin(rotation)\ndy2 = (y1 - centerY) * cos(rotation) - (x1 - centerX) * sin(rotation)\x3c\/code\x3e\x3c\/pre\x3e\n\x3cp\x3e下面是示例是采用这种方法的圆周运动，其中dx1和dy1是ball起始点相对于中心点的距离，dx2和dy2是ball结束点相对于中心点的距离。  \x3cbr\x3e完整示例：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part9\/02-rotate-2.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e高级坐标旋转演示\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22\/**\n * 高级坐标旋转演示\n * *\/\nwindow.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const ball = new Ball();\n  ball.x = 300;\n  ball.y = 200;\n  \/\/ 弧度变化速度\n  const vr = 0.05;\n  \/\/ 中心点位置设定在画布中心\n  const centerX = canvas.width \/ 2;\n  const centerY = canvas.height \/ 2;\n  \/\/ 由于vr是固定的可以先计算正弦和余弦\n  const cos = Math.cos(vr);\n  const sin = Math.sin(vr);\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    \/\/ ball相对与中心点的距离\n    const dx1 = ball.x - centerX;\n    const dy1 = ball.y - centerY;\n    \/\/ 代入公式求出ball在结束相对与中心点的距离\n    const dx2 = dx1 * cos - dy1 * sin;\n    const dy2 = dy1 * cos \x2b dx1 * sin;\n    \/\/ 求出x2，y2\n    ball.x = centerX \x2b dx2;\n    ball.y = centerY \x2b dy2;\n    ball.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-comment\x22\x3e\/**\n * 高级坐标旋转演示\n * *\/\x3c\/span\x3e\n\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Ball();\n  ball.x = \x3cspan class=\x22hljs-number\x22\x3e300\x3c\/span\x3e;\n  ball.y = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 弧度变化速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vr = \x3cspan class=\x22hljs-number\x22\x3e0.05\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 中心点位置设定在画布中心\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e centerX = canvas.width \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e centerY = canvas.height \/ \x3cspan class=\x22hljs-number\x22\x3e2\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 由于vr是固定的可以先计算正弦和余弦\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cos = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(vr);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e sin = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(vr);\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ ball相对与中心点的距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx1 = ball.x - centerX;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy1 = ball.y - centerY;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 代入公式求出ball在结束相对与中心点的距离\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dx2 = dx1 * cos - dy1 * sin;\n    \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e dy2 = dy1 * cos \x2b dx1 * sin;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 求出x2，y2\x3c\/span\x3e\n    ball.x = centerX \x2b dx2;\n    ball.y = centerY \x2b dy2;\n    ball.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\x3ch2 id=\x22articleHeader4\x22\x3e斜面反弹\x3c\/h2\x3e\n\x3cp\x3e前面的章节中我们介绍过越界的一种处理办法是反弹，由于边界是矩形，反弹面垂直或水平，所以可以直接将对应轴的速度取反即可，但对于非垂直或水平的反弹面这种方法是不适用的。  \x3cbr\x3e坐标旋转常见的应用就是处理这种情况，将不规律方向的复杂问题简单化。  \x3cbr\x3e基本思路：（旋转前后如图）\x3c\/p\x3e\n\x3col\x3e\n\x3cli\x3e使用旋转公式，旋转整个系统，将斜面场景转变为水平场景；\x3c\/li\x3e\n\x3cli\x3e在水平场景中处理反弹；\x3c\/li\x3e\n\x3cli\x3e再旋转回来。\x3c\/li\x3e\n\x3c\/ol\x3e\n\x3cp\x3e\x3cspan class=\x22img-wrap\x22\x3e\x3cimg data-src=\x22\/img\/bV7nCD?w=1430\x26amp;h=596\x22 src=\x22https:\/\/static.alili.tech\/img\/bV7nCD?w=1430\x26amp;h=596\x22 alt=\x22旋转前后系统\x22 title=\x22旋转前后系统\x22 style=\x22cursor: pointer; display: inline;\x22\x3e\x3c\/span\x3e\x3c\/p\x3e\n\x3cp\x3e示例是一个球掉落到一条线上，球受到重力加速度影响下落，碰到斜面就会反弹，每次反弹都会损耗速度。  \x3cbr\x3e完整示例：\x3ca href=\x22https:\/\/nimokuri.github.io\/H5Learning-animationDemo\/part9\/05-angle-bounce-opt.html\x22 rel=\x22nofollow noreferrer\x22 target=\x22_blank\x22\x3e斜面反弹示例\x3c\/a\x3e\x3c\/p\x3e\n\x3cdiv class=\x22widget-codetool\x22 style=\x22display:none;\x22\x3e\n      \x3cdiv class=\x22widget-codetool--inner\x22\x3e\n      \x3cspan class=\x22selectCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22全选\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22copyCode code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 data-clipboard-text=\x22window.onload = function () {\n  const canvas = document.getElementById(\x27canvas\x27);\n  const context = canvas.getContext(\x272d\x27);\n  const ball = new Ball();\n  \/\/ line类构造函数参数（开始点x轴坐标，开始点y轴坐标，结束点x轴坐标，结束点y轴坐标）\n  const line = new Line(0, 0, 500, 0);\n  \/\/ 设置重力加速度\n  const gravity = 0.2;\n  \/\/ 设置反弹系数\n  const bounce = -0.6;\n\n  ball.x = 100;\n  ball.y = 100;\n\n  line.x = 0;\n  line.y = 200;\n  line.rotation = 10 * Math.PI \/ 180;\n\n  const cos = Math.cos(line.rotation);\n  const sin = Math.sin(line.rotation);\n\n  (function drawFrame() {\n    window.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(0, 0, canvas.width, canvas.height);\n\n    ball.vy \x2b= gravity;\n    ball.x \x2b= ball.vx;\n    ball.y \x2b= ball.vy;\n\n    \/\/ 获取ball与line的相对位置\n    let x1 = ball.x - line.x;\n    let y1 = ball.y - line.y;\n    \/\/ 旋转坐标系（反向）\n    let y2 = y1 * cos - x1 * sin;\n\n    \/\/ 依据旋转值执行反弹\n    if (y2 \x3e -ball.radius) {\n      \/\/ 旋转坐标系（反向）\n      const x2 = x1 * cos \x2b y1 * sin;\n      \/\/ 旋转速度（反向）\n      const vx1 = ball.vx * cos \x2b ball.vy * sin;\n      let vy1 = ball.vy * cos - ball.vx * sin;\n\n      y2 = -ball.radius;\n      vy1 *= bounce;\n\n      \/\/ 将所有东西回转（正向）\n      x1 = x2 * cos - y2 * sin;\n      y1 = y2 * cos \x2b x2 * sin;\n      ball.vx = vx1 * cos - vy1 * sin;\n      ball.vy = vy1 * cos \x2b vx1 * sin;\n      ball.x = line.x \x2b x1;\n      ball.y = line.y \x2b y1;\n    }\n\n    ball.draw(context);\n    line.draw(context);\n  }());\n};\x22 title=\x22\x22 data-original-title=\x22复制\x22\x3e\x3c\/span\x3e\n      \x3cspan type=\x22button\x22 class=\x22saveToNote code-tool\x22 data-toggle=\x22tooltip\x22 data-placement=\x22top\x22 title=\x22\x22 data-original-title=\x22放进笔记\x22\x3e\x3c\/span\x3e\n      \x3c\/div\x3e\n      \x3c\/div\x3e\x3cpre class=\x22javascript hljs\x22\x3e\x3ccode class=\x22javascript\x22\x3e\x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.onload = \x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e (\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e canvas = \x3cspan class=\x22hljs-built_in\x22\x3edocument\x3c\/span\x3e.getElementById(\x3cspan class=\x22hljs-string\x22\x3e\x27canvas\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e context = canvas.getContext(\x3cspan class=\x22hljs-string\x22\x3e\x272d\x27\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e ball = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Ball();\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ line类构造函数参数（开始点x轴坐标，开始点y轴坐标，结束点x轴坐标，结束点y轴坐标）\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e line = \x3cspan class=\x22hljs-keyword\x22\x3enew\x3c\/span\x3e Line(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e500\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e);\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置重力加速度\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e gravity = \x3cspan class=\x22hljs-number\x22\x3e0.2\x3c\/span\x3e;\n  \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 设置反弹系数\x3c\/span\x3e\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e bounce = \x3cspan class=\x22hljs-number\x22\x3e-0.6\x3c\/span\x3e;\n\n  ball.x = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n  ball.y = \x3cspan class=\x22hljs-number\x22\x3e100\x3c\/span\x3e;\n\n  line.x = \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e;\n  line.y = \x3cspan class=\x22hljs-number\x22\x3e200\x3c\/span\x3e;\n  line.rotation = \x3cspan class=\x22hljs-number\x22\x3e10\x3c\/span\x3e * \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.PI \/ \x3cspan class=\x22hljs-number\x22\x3e180\x3c\/span\x3e;\n\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e cos = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.cos(line.rotation);\n  \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e sin = \x3cspan class=\x22hljs-built_in\x22\x3eMath\x3c\/span\x3e.sin(line.rotation);\n\n  (\x3cspan class=\x22hljs-function\x22\x3e\x3cspan class=\x22hljs-keyword\x22\x3efunction\x3c\/span\x3e \x3cspan class=\x22hljs-title\x22\x3edrawFrame\x3c\/span\x3e(\x3cspan class=\x22hljs-params\x22\x3e\x3c\/span\x3e) \x3c\/span\x3e{\n    \x3cspan class=\x22hljs-built_in\x22\x3ewindow\x3c\/span\x3e.requestAnimationFrame(drawFrame, canvas);\n    context.clearRect(\x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, \x3cspan class=\x22hljs-number\x22\x3e0\x3c\/span\x3e, canvas.width, canvas.height);\n\n    ball.vy \x2b= gravity;\n    ball.x \x2b= ball.vx;\n    ball.y \x2b= ball.vy;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 获取ball与line的相对位置\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e x1 = ball.x - line.x;\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e y1 = ball.y - line.y;\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转坐标系（反向）\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e y2 = y1 * cos - x1 * sin;\n\n    \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 依据旋转值执行反弹\x3c\/span\x3e\n    \x3cspan class=\x22hljs-keyword\x22\x3eif\x3c\/span\x3e (y2 \x26gt; -ball.radius) {\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转坐标系（反向）\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e x2 = x1 * cos \x2b y1 * sin;\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 旋转速度（反向）\x3c\/span\x3e\n      \x3cspan class=\x22hljs-keyword\x22\x3econst\x3c\/span\x3e vx1 = ball.vx * cos \x2b ball.vy * sin;\n      \x3cspan class=\x22hljs-keyword\x22\x3elet\x3c\/span\x3e vy1 = ball.vy * cos - ball.vx * sin;\n\n      y2 = -ball.radius;\n      vy1 *= bounce;\n\n      \x3cspan class=\x22hljs-comment\x22\x3e\/\/ 将所有东西回转（正向）\x3c\/span\x3e\n      x1 = x2 * cos - y2 * sin;\n      y1 = y2 * cos \x2b x2 * sin;\n      ball.vx = vx1 * cos - vy1 * sin;\n      ball.vy = vy1 * cos \x2b vx1 * sin;\n      ball.x = line.x \x2b x1;\n      ball.y = line.y \x2b y1;\n    }\n\n    ball.draw(context);\n    line.draw(context);\n  }());\n};\x3c\/code\x3e\x3c\/pre\x3e\n\n                \n"
            html = html.replace(/"{/g, "{")
            html = html.replace(/{"/g, "{")
            html = html.replace(/"}/g, "}")
            html = html.replace(/}"/g, "}")
            $('#raw').html(html);

            let postTitle =  $('.posttitle').text()
            let postContentTitle =  $('#raw > h1').text()
            if(postTitle === postContentTitle){
                $('#raw > h1').hide()
            }
            $('button.preview').hide()
        })</script></div><h1 id="版权声明">版权声明</h1><p>本文资源来源互联网，仅供学习研究使用，版权归该资源的合法拥有者所有，</p><p>本文仅用于学习、研究和交流目的。转载请注明出处、完整链接以及原作者。</p><p>原作者若认为本站侵犯了您的版权，请联系我们，我们会立即删除！</p><h2 id="原文标题">原文标题</h2><p>【30分钟学完】canvas动画|游戏基础(6)：坐标旋转探究</p><h2 id="原文链接">原文链接</h2><p><a href="https://segmentfault.com/a/1190000014113090">https://segmentfault.com/a/1190000014113090</a></p><h2>本文链接：</h2><a href="https://alili.tech/archive/zo95cnqp2u/" target="_blank">https://alili.tech/archive/zo95cnqp2u/</a></div></article><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//unpkg.com/valine/dist/Valine.min.js"></script><div class="blog-post-comments"></div><script>new Valine({
        el: '.blog-post-comments', 
        app_id: 'ItyOVb4I33bTwprf3cY6uqMc-gzGzoHsz', 
        app_key: 'hLhtmd4tT0qJbyO2SgQ8odya', 
        placeholder: '说点什么?', 
        avatar:'robohash',
        notify:true,
        verify:true
    });</script><ul id="more-post-list" class="archive readmore"><h3>其他推荐</h3><li><a href="/archive/hvvo3rmt3dj/">JS打包工具rollup——完全入门指南<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/semhn25oasq/">Spring Boot [基于Spring Boot 与 Vue的后台脚手架] SanJi Boot Security<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/t1iml4tjj7r/">WebGL入门demo<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/8gbs1y0r0ns/">[面试专题]一线互联网大厂面试总结<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/4os59l0zeel/">react&#43;react-router4&#43;redux最新版构建分享<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/dznv6a9ewcj/">react虚拟dom机制与diff算法<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/myiqarfowok/">一套Vue的单页模板：N3-admin<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/2eeweuxgjbk/">使用 json-server 搭建 api mock 服务 (一)<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/h7cszygcoqq/">使用Ionic3框架开始第一个混合开发APP<aside class="dates">2019-01-04</aside></a></li><li><a href="/archive/g8by6kv9q8t/">如何只用 CSS 完成漂亮的加载<aside class="dates">2019-01-04</aside></a></li></ul></section></div><footer id="footer"><div class="footer-left">Copyright © 2019 Fan <a href="http://www.miitbeian.gov.cn" rel="external nofollow noopener noreferrer" target="_blank">浙ICP备18045521号</a></div><div class="footer-right"><nav><ul><li><a href="/">Home</a></li><li><a href="/archive/">Archives</a></li><li><a href="/about/">About</a></li><li><a href="http://github.com/Fantasy9527" target="_blank">Github</a></li></ul></nav></div></footer><script src="https://alili.tech/lib/justified-gallery/jquery.justifiedGallery.min.js"></script><script src="https://alili.tech/lib/typed.js"></script><script src="https://alili.tech/js/main.js"></script><script async src=""></script><script>(function(){
  if(location.host!=='alili.tech')return;
  var ga = document.createElement('script');
  var curProtocol = window.location.protocol.split(':')[0];
  ga.src = 'https://www.googletagmanager.com/gtag/js?id=UA-129382678-1';       
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(ga, s);
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-129382678-1');
})()</script><script>(function(){
    if(location.host!=='alili.tech')return;
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      if (curProtocol === 'https') {
          bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
      }
      else {
          bp.src = 'http://push.zhanzhang.baidu.com/push.js';
      }
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
  })();</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script>if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
          navigator.serviceWorker
              .register('/sw.js')
              .then(registration => {
                  console.log('SW registered: ', registration);
              })
              .catch(registrationError => {
                  console.log('SW registration failed: ', registrationError);
              });
      });
  }</script></body></html>